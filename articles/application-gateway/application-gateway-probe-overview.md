---
title: "Azure uygulama ağ geçidi için genel bakış izleme aaaHealth | Microsoft Docs"
description: "Azure uygulama ağ geçidi özelliklerinde izleme hello hakkında bilgi edinin"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="11a17-103">Uygulama ağ geçidi sistem durumu izlemeye genel bakış</span><span class="sxs-lookup"><span data-stu-id="11a17-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="11a17-104">Varsayılan olarak Azure uygulama ağ geçidi arka uç havuzundaki tüm kaynakları hello durumunu izler ve hello havuzundan sağlıksız kabul herhangi bir kaynağa otomatik olarak kaldırır.</span><span class="sxs-lookup"><span data-stu-id="11a17-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="11a17-105">Uygulama ağ geçidi toomonitor hello sağlıksız örnekleri devam eder ve bunları ekler kullanılabilir durumda olduklarında ve yanıt toohealth yoklamaları sonra toohello sağlıklı arka uç havuzu yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="11a17-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="11a17-106">Uygulama ağ geçidi hello sistem durumu araştırmalarının hello ile Merhaba arka uç HTTP Ayarları'nda tanımlanan aynı bağlantı noktasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="11a17-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="11a17-107">Bu yapılandırma bu hello araştırma müşteriler tooconnect toohello arka uç kullanarak, aynı bağlantı noktası hello sınama sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a17-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![Uygulama ağ geçidi araştırma örneği][1]

<span data-ttu-id="11a17-109">Toplama toousing varsayılan durumu araştırma izleme, uygulamanızın gereksinimleri hello sistem durumu araştırma toosuit de özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="11a17-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="11a17-110">Bu makalede, hem varsayılan hem de özel sistem durumu araştırmalarının ele alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="11a17-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="11a17-111">Uygulama ağ geçidi alt ağı üzerinde bir NSG varsa, bağlantı noktası aralıkları 65503 65534 hello uygulama ağ geçidi alt gelen trafik için açılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="11a17-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="11a17-112">Bu bağlantı noktaları hello arka uç sistem durumu API toowork için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="11a17-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="11a17-113">Varsayılan durumu araştırması</span><span class="sxs-lookup"><span data-stu-id="11a17-113">Default health probe</span></span>

<span data-ttu-id="11a17-114">Herhangi bir özel araştırma yapılandırma ayarladığınızda olmayan bir uygulama ağ geçidi varsayılan durumu araştırması otomatik olarak yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="11a17-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="11a17-115">davranış izlemeyi hello hello arka uç havuzu için yapılandırılmış bir HTTP isteği toohello IP adresleri yapma çalışır.</span><span class="sxs-lookup"><span data-stu-id="11a17-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="11a17-116">Merhaba arka uç http ayarları HTTPS için yapılandırılmış olması halinde için varsayılan araştırmalar hello araştırma hello arka uçlarını iyi tootest sistem durumu HTTPS kullanır.</span><span class="sxs-lookup"><span data-stu-id="11a17-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="11a17-117">Örneğin: bağlantı noktası 80 üzerinde uygulama ağ geçidi toouse arka uç sunucuları A, B ve C tooreceive HTTP ağ trafiğinizi yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="11a17-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="11a17-118">Merhaba varsayılan sistem durumu izleme hello üç sunucu her 30 saniyede sağlıklı bir HTTP yanıtı için sınar.</span><span class="sxs-lookup"><span data-stu-id="11a17-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="11a17-119">Sağlıklı bir HTTP yanıtı sahip bir [durum kodu](https://msdn.microsoft.com/library/aa287675.aspx) 200 399 arasındaki.</span><span class="sxs-lookup"><span data-stu-id="11a17-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="11a17-120">Sunucu A Hello varsayılan araştırma denetimi başarısız olursa, isteğe bağlı olarak hello uygulama ağ geçidi, arka uç havuzundan kaldırır ve ağ trafiğini toothis sunucu akışı durur.</span><span class="sxs-lookup"><span data-stu-id="11a17-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="11a17-121">Merhaba varsayılan araştırma, her 30 saniyede bir toocheck sunucusu için hala devam eder.</span><span class="sxs-lookup"><span data-stu-id="11a17-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="11a17-122">Sunucu A varsayılan durumu araştırması başarıyla tooone isteğini yanıtladığında, sağlıklı toohello arka uç havuzu ve toohello sunucu yeniden akan trafik başlatır geri eklenir.</span><span class="sxs-lookup"><span data-stu-id="11a17-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="11a17-123">Varsayılan durumu araştırma ayarları</span><span class="sxs-lookup"><span data-stu-id="11a17-123">Default health probe settings</span></span>

| <span data-ttu-id="11a17-124">Araştırma özelliği</span><span class="sxs-lookup"><span data-stu-id="11a17-124">Probe property</span></span> | <span data-ttu-id="11a17-125">Değer</span><span class="sxs-lookup"><span data-stu-id="11a17-125">Value</span></span> | <span data-ttu-id="11a17-126">Açıklama</span><span class="sxs-lookup"><span data-stu-id="11a17-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="11a17-127">Araştırma URL'si</span><span class="sxs-lookup"><span data-stu-id="11a17-127">Probe URL</span></span> |<span data-ttu-id="11a17-128">http://127.0.0.1:\<bağlantı noktası\>/</span><span class="sxs-lookup"><span data-stu-id="11a17-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="11a17-129">URL yolu</span><span class="sxs-lookup"><span data-stu-id="11a17-129">URL path</span></span> |
| <span data-ttu-id="11a17-130">aralığı</span><span class="sxs-lookup"><span data-stu-id="11a17-130">Interval</span></span> |<span data-ttu-id="11a17-131">30</span><span class="sxs-lookup"><span data-stu-id="11a17-131">30</span></span> |<span data-ttu-id="11a17-132">Saniye cinsinden yoklama aralığı</span><span class="sxs-lookup"><span data-stu-id="11a17-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="11a17-133">Zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="11a17-133">Time-out</span></span> |<span data-ttu-id="11a17-134">30</span><span class="sxs-lookup"><span data-stu-id="11a17-134">30</span></span> |<span data-ttu-id="11a17-135">Zaman aşımı saniye cinsinden araştırma</span><span class="sxs-lookup"><span data-stu-id="11a17-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="11a17-136">Sağlıksız durum eşiği.</span><span class="sxs-lookup"><span data-stu-id="11a17-136">Unhealthy threshold</span></span> |<span data-ttu-id="11a17-137">3</span><span class="sxs-lookup"><span data-stu-id="11a17-137">3</span></span> |<span data-ttu-id="11a17-138">Yeniden deneme sayısı araştırma.</span><span class="sxs-lookup"><span data-stu-id="11a17-138">Probe retry count.</span></span> <span data-ttu-id="11a17-139">Merhaba arka arkaya araştırma hatası sayısı hello sağlıksız durum eşiği ulaştıktan sonra hello arka uç sunucu işaretlenmiş.</span><span class="sxs-lookup"><span data-stu-id="11a17-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="11a17-140">Merhaba bağlantı noktası olan hello aynı hello arka uç HTTP ayarları olarak bağlantı noktası.</span><span class="sxs-lookup"><span data-stu-id="11a17-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="11a17-141">Merhaba varsayılan araştırma yalnızca http://127.0.0.1 arar:\<bağlantı noktası\> toodetermine sistem durumu.</span><span class="sxs-lookup"><span data-stu-id="11a17-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="11a17-142">Tooconfigure hello sistem durumu araştırma toogo tooa özel URL gerekir veya diğer herhangi bir ayarı değiştirmek, aşağıdaki adımları hello açıklandığı gibi özel araştırmalara kullanmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="11a17-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="11a17-143">Özel durum araştırması</span><span class="sxs-lookup"><span data-stu-id="11a17-143">Custom health probe</span></span>

<span data-ttu-id="11a17-144">Özel araştırmalara toohave hello sistem durumu izleme üzerinde daha ayrıntılı bir denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a17-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="11a17-145">Özel araştırmalara kullanırken hello arka uç havuzu örneği sağlıksız olarak işaretleme önce hello yoklama aralığı, hello URL ve yol tootest ve kaç tane başarısız yanıtları tooaccept yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="11a17-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="11a17-146">Özel durum yoklama ayarları</span><span class="sxs-lookup"><span data-stu-id="11a17-146">Custom health probe settings</span></span>

<span data-ttu-id="11a17-147">Merhaba aşağıdaki tabloda bir özel durum araştırması hello özelliklerini için tanımları sağlar.</span><span class="sxs-lookup"><span data-stu-id="11a17-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="11a17-148">Araştırma özelliği</span><span class="sxs-lookup"><span data-stu-id="11a17-148">Probe property</span></span> | <span data-ttu-id="11a17-149">Açıklama</span><span class="sxs-lookup"><span data-stu-id="11a17-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="11a17-150">Ad</span><span class="sxs-lookup"><span data-stu-id="11a17-150">Name</span></span> |<span data-ttu-id="11a17-151">Merhaba araştırma adı.</span><span class="sxs-lookup"><span data-stu-id="11a17-151">Name of hello probe.</span></span> <span data-ttu-id="11a17-152">Arka uç HTTP Ayarları'nda kullanılan toorefer toohello araştırma adıdır.</span><span class="sxs-lookup"><span data-stu-id="11a17-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="11a17-153">Protokol</span><span class="sxs-lookup"><span data-stu-id="11a17-153">Protocol</span></span> |<span data-ttu-id="11a17-154">Toosend hello araştırma kullanılan protokol.</span><span class="sxs-lookup"><span data-stu-id="11a17-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="11a17-155">Merhaba araştırma hello arka uç HTTP Ayarları'nda tanımlanan hello protokolünü kullanır</span><span class="sxs-lookup"><span data-stu-id="11a17-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="11a17-156">Host</span><span class="sxs-lookup"><span data-stu-id="11a17-156">Host</span></span> |<span data-ttu-id="11a17-157">Ana bilgisayar adı toosend hello araştırma.</span><span class="sxs-lookup"><span data-stu-id="11a17-157">Host name toosend hello probe.</span></span> <span data-ttu-id="11a17-158">Geçerli yalnızca çok siteli uygulama ağ geçidi üzerinde yapılandırılmış, aksi takdirde '127.0.0.1' kullanın.</span><span class="sxs-lookup"><span data-stu-id="11a17-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="11a17-159">Bu değer, VM ana bilgisayar adından farklıdır.</span><span class="sxs-lookup"><span data-stu-id="11a17-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="11a17-160">Yol</span><span class="sxs-lookup"><span data-stu-id="11a17-160">Path</span></span> |<span data-ttu-id="11a17-161">Merhaba araştırma göreli yolu.</span><span class="sxs-lookup"><span data-stu-id="11a17-161">Relative path of hello probe.</span></span> <span data-ttu-id="11a17-162">Merhaba geçerli bir yol başlatır '/'.</span><span class="sxs-lookup"><span data-stu-id="11a17-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="11a17-163">aralığı</span><span class="sxs-lookup"><span data-stu-id="11a17-163">Interval</span></span> |<span data-ttu-id="11a17-164">Aralığı saniye cinsinden araştırma.</span><span class="sxs-lookup"><span data-stu-id="11a17-164">Probe interval in seconds.</span></span> <span data-ttu-id="11a17-165">İki ardışık araştırmalar arasındaki hello zaman aralığını değerdir.</span><span class="sxs-lookup"><span data-stu-id="11a17-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="11a17-166">Zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="11a17-166">Time-out</span></span> |<span data-ttu-id="11a17-167">Zaman aşımı saniye cinsinden araştırma.</span><span class="sxs-lookup"><span data-stu-id="11a17-167">Probe time-out in seconds.</span></span> <span data-ttu-id="11a17-168">Bu zaman aşımı süresi içinde geçerli bir yanıt alınmazsa, hello araştırma başarısız olarak işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="11a17-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="11a17-169">Sağlıksız durum eşiği.</span><span class="sxs-lookup"><span data-stu-id="11a17-169">Unhealthy threshold</span></span> |<span data-ttu-id="11a17-170">Yeniden deneme sayısı araştırma.</span><span class="sxs-lookup"><span data-stu-id="11a17-170">Probe retry count.</span></span> <span data-ttu-id="11a17-171">Merhaba arka arkaya araştırma hatası sayısı hello sağlıksız durum eşiği ulaştıktan sonra hello arka uç sunucu işaretlenmiş.</span><span class="sxs-lookup"><span data-stu-id="11a17-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="11a17-172">Uygulama ağ geçidi tek bir site için yapılandırılmışsa, varsayılan hello ana bilgisayar tarafından adı '127.0.0.1', içinde özel araştırma aksi belirtilmedikçe belirtilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="11a17-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="11a17-173">Başvuru için özel bir araştırma çok gönderilir\<Protokolü\>://\<konak\>:\<bağlantı noktası\>\<yolu\>.</span><span class="sxs-lookup"><span data-stu-id="11a17-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="11a17-174">Merhaba kullanılan bağlantı noktası olacaktır hello arka uç HTTP Ayarları'nda tanımlanan gibi hello aynı bağlantı noktası.</span><span class="sxs-lookup"><span data-stu-id="11a17-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="11a17-175">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="11a17-175">Next steps</span></span>
<span data-ttu-id="11a17-176">Uygulama ağ geçidi durumunu izleme hakkında daha fazla öğrenme sonra yapılandırdığınız bir [özel durumu araştırması](application-gateway-create-probe-portal.md) hello Azure portal'ın veya [özel durumu araştırması](application-gateway-create-probe-ps.md) PowerShell ve hello Azure Resource Manager kullanarak dağıtım modeli.</span><span class="sxs-lookup"><span data-stu-id="11a17-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
