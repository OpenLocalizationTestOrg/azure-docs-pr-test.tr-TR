---
title: "Azure uygulama ağ geçidi için genel bakış izleme sistem durumu | Microsoft Docs"
description: "Azure uygulama ağ geçidi izleme özellikleri hakkında bilgi edinin"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 899115d213e626f17e58c2e5f01313f760f9e7f4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="9c22d-103">Uygulama ağ geçidi sistem durumu izlemeye genel bakış</span><span class="sxs-lookup"><span data-stu-id="9c22d-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="9c22d-104">Varsayılan olarak Azure uygulama ağ geçidi arka uç havuzundaki tüm kaynakların durumunu izler ve herhangi bir kaynak havuzundan sağlıksız kabul otomatik olarak kaldırır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-104">Azure Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="9c22d-105">Uygulama ağ geçidi düzgün çalışmayan örnekleri izlemek devam eder ve kullanılabilir hale gelir ve sistem durumu araştırmalarının yanıt sonra bunları sağlıklı arka uç havuzuna ekler.</span><span class="sxs-lookup"><span data-stu-id="9c22d-105">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span> <span data-ttu-id="9c22d-106">Uygulama ağ geçidi arka uç HTTP Ayarları'nda tanımlanan aynı bağlantı noktası ile sistem durumu araştırmalarının gönderir.</span><span class="sxs-lookup"><span data-stu-id="9c22d-106">Application gateway sends the health probes with the same port that is defined in the back-end HTTP settings.</span></span> <span data-ttu-id="9c22d-107">Bu yapılandırma, araştırma müşteriler arka ucuna bağlanmak için kullanılmasını aynı bağlantı noktasını test ediyor sağlar.</span><span class="sxs-lookup"><span data-stu-id="9c22d-107">This configuration ensures that the probe is testing the same port that customers would be using to connect to the backend.</span></span>

![Uygulama ağ geçidi araştırma örneği][1]

<span data-ttu-id="9c22d-109">Varsayılan araştırma sistem durumu izleme kullanmanın yanı sıra, uygulamanızın gereksinimlerine uyacak şekilde durumu araştırması de özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c22d-109">In addition to using default health probe monitoring, you can also customize the health probe to suit your application's requirements.</span></span> <span data-ttu-id="9c22d-110">Bu makalede, hem varsayılan hem de özel sistem durumu araştırmalarının ele alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="9c22d-111">Uygulama ağ geçidi alt ağı üzerinde bir NSG varsa, bağlantı noktası aralıkları 65503 65534 uygulama ağ geçidi alt ağı gelen trafik için açılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on the Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="9c22d-112">Bu bağlantı noktaları, arka uç sistem çalışmak için API için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="9c22d-112">These ports are required for the backend health API to work.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="9c22d-113">Varsayılan durumu araştırması</span><span class="sxs-lookup"><span data-stu-id="9c22d-113">Default health probe</span></span>

<span data-ttu-id="9c22d-114">Herhangi bir özel araştırma yapılandırma ayarladığınızda olmayan bir uygulama ağ geçidi varsayılan durumu araştırması otomatik olarak yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="9c22d-115">İzleme davranışı, arka uç havuzu için yapılandırılmış IP adresleri için bir HTTP isteği yaparak çalışır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-115">The monitoring behavior works by making an HTTP request to the IP addresses configured for the back-end pool.</span></span> <span data-ttu-id="9c22d-116">Arka uç http ayarları HTTPS için yapılandırılmış olması halinde varsayılan araştırmalar için araştırma HTTPS de arka uçlarını durumunu sınamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-116">For default probes if the backend http settings are configured for HTTPS, the probe uses HTTPS as well to test health of the backends.</span></span>

<span data-ttu-id="9c22d-117">Örneğin: bağlantı noktası 80 üzerinde HTTP ağ trafiği almak için arka uç sunucu A, B ve C kullanmak için uygulama ağ geçidi yapılandırması.</span><span class="sxs-lookup"><span data-stu-id="9c22d-117">For example: You configure your application gateway to use back-end servers A, B, and C to receive HTTP network traffic on port 80.</span></span> <span data-ttu-id="9c22d-118">Varsayılan sistem durumu izleme üç sunucu her 30 saniyede sağlıklı bir HTTP yanıtı için sınar.</span><span class="sxs-lookup"><span data-stu-id="9c22d-118">The default health monitoring tests the three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="9c22d-119">Sağlıklı bir HTTP yanıtı sahip bir [durum kodu](https://msdn.microsoft.com/library/aa287675.aspx) 200 399 arasındaki.</span><span class="sxs-lookup"><span data-stu-id="9c22d-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="9c22d-120">Sunucu A varsayılan araştırma denetimi başarısız olursa, isteğe bağlı olarak uygulama ağ geçidi, arka uç havuzundan kaldırır ve bu sunucuya akışı ağ trafiğini durur.</span><span class="sxs-lookup"><span data-stu-id="9c22d-120">If the default probe check fails for server A, the application gateway removes it from its back-end pool, and network traffic stops flowing to this server.</span></span> <span data-ttu-id="9c22d-121">Varsayılan araştırmasını her 30 saniyede bir sunucu için denetlemek hala devam eder.</span><span class="sxs-lookup"><span data-stu-id="9c22d-121">The default probe still continues to check for server A every 30 seconds.</span></span> <span data-ttu-id="9c22d-122">Sunucu, bir isteği başarıyla varsayılan durumu araştırması yanıt verir. Bu geri sağlıklı arka uç havuzuna eklenir ve sunucuya yeniden akan trafik başlatır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-122">When server A responds successfully to one request from a default health probe, it is added back as healthy to the back-end pool, and traffic starts flowing to the server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="9c22d-123">Varsayılan durumu araştırma ayarları</span><span class="sxs-lookup"><span data-stu-id="9c22d-123">Default health probe settings</span></span>

| <span data-ttu-id="9c22d-124">Araştırma özelliği</span><span class="sxs-lookup"><span data-stu-id="9c22d-124">Probe property</span></span> | <span data-ttu-id="9c22d-125">Değer</span><span class="sxs-lookup"><span data-stu-id="9c22d-125">Value</span></span> | <span data-ttu-id="9c22d-126">Açıklama</span><span class="sxs-lookup"><span data-stu-id="9c22d-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9c22d-127">Araştırma URL'si</span><span class="sxs-lookup"><span data-stu-id="9c22d-127">Probe URL</span></span> |<span data-ttu-id="9c22d-128">http://127.0.0.1:\<bağlantı noktası\>/</span><span class="sxs-lookup"><span data-stu-id="9c22d-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="9c22d-129">URL yolu</span><span class="sxs-lookup"><span data-stu-id="9c22d-129">URL path</span></span> |
| <span data-ttu-id="9c22d-130">aralığı</span><span class="sxs-lookup"><span data-stu-id="9c22d-130">Interval</span></span> |<span data-ttu-id="9c22d-131">30</span><span class="sxs-lookup"><span data-stu-id="9c22d-131">30</span></span> |<span data-ttu-id="9c22d-132">Saniye cinsinden yoklama aralığı</span><span class="sxs-lookup"><span data-stu-id="9c22d-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="9c22d-133">Zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="9c22d-133">Time-out</span></span> |<span data-ttu-id="9c22d-134">30</span><span class="sxs-lookup"><span data-stu-id="9c22d-134">30</span></span> |<span data-ttu-id="9c22d-135">Zaman aşımı saniye cinsinden araştırma</span><span class="sxs-lookup"><span data-stu-id="9c22d-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="9c22d-136">Sağlıksız durum eşiği.</span><span class="sxs-lookup"><span data-stu-id="9c22d-136">Unhealthy threshold</span></span> |<span data-ttu-id="9c22d-137">3</span><span class="sxs-lookup"><span data-stu-id="9c22d-137">3</span></span> |<span data-ttu-id="9c22d-138">Yeniden deneme sayısı araştırma.</span><span class="sxs-lookup"><span data-stu-id="9c22d-138">Probe retry count.</span></span> <span data-ttu-id="9c22d-139">Sağlıksız eşik arka arkaya araştırma hatası sayısı ulaştıktan sonra arka uç sunucu işaretlenmiş.</span><span class="sxs-lookup"><span data-stu-id="9c22d-139">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="9c22d-140">Bağlantı uç HTTP ayarları aynı bağlantı noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-140">The port is the same port as the back-end HTTP settings.</span></span>

<span data-ttu-id="9c22d-141">Varsayılan araştırma yalnızca http://127.0.0.1 arar:\<bağlantı noktası\> sistem durumunu belirlemek için.</span><span class="sxs-lookup"><span data-stu-id="9c22d-141">The default probe looks only at http://127.0.0.1:\<port\> to determine health status.</span></span> <span data-ttu-id="9c22d-142">Bir özel URL'ye Git veya diğer herhangi bir ayarı değiştirmek için sistem durumu araştırma yapılandırmanız gerekiyorsa, aşağıdaki adımlarda açıklandığı gibi özel araştırmalara kullanmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="9c22d-142">If you need to configure the health probe to go to a custom URL or modify any other settings, you must use custom probes as described in the following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="9c22d-143">Özel durum araştırması</span><span class="sxs-lookup"><span data-stu-id="9c22d-143">Custom health probe</span></span>

<span data-ttu-id="9c22d-144">Özel araştırmalara sistem durumu izleme üzerinde daha ayrıntılı bir denetim olmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="9c22d-144">Custom probes allow you to have a more granular control over the health monitoring.</span></span> <span data-ttu-id="9c22d-145">Özel araştırmalara kullanırken, yoklama aralığı, URL ve test etmek için yolu ve arka uç havuzu örneği sağlıksız olarak işaretleme önce kabul etmek için kaç tane başarısız yanıtları yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c22d-145">When using custom probes, you can configure the probe interval, the URL and path to test, and how many failed responses to accept before marking the back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="9c22d-146">Özel durum yoklama ayarları</span><span class="sxs-lookup"><span data-stu-id="9c22d-146">Custom health probe settings</span></span>

<span data-ttu-id="9c22d-147">Aşağıdaki tabloda bir özel durum araştırması özelliklerini için tanımları sağlar.</span><span class="sxs-lookup"><span data-stu-id="9c22d-147">The following table provides definitions for the properties of a custom health probe.</span></span>

| <span data-ttu-id="9c22d-148">Araştırma özelliği</span><span class="sxs-lookup"><span data-stu-id="9c22d-148">Probe property</span></span> | <span data-ttu-id="9c22d-149">Açıklama</span><span class="sxs-lookup"><span data-stu-id="9c22d-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9c22d-150">Ad</span><span class="sxs-lookup"><span data-stu-id="9c22d-150">Name</span></span> |<span data-ttu-id="9c22d-151">Araştırma adı.</span><span class="sxs-lookup"><span data-stu-id="9c22d-151">Name of the probe.</span></span> <span data-ttu-id="9c22d-152">Bu ad, arka uç HTTP Ayarları'nda araştırma başvurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-152">This name is used to refer to the probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="9c22d-153">Protokol</span><span class="sxs-lookup"><span data-stu-id="9c22d-153">Protocol</span></span> |<span data-ttu-id="9c22d-154">Araştırma göndermek için kullanılan protokol.</span><span class="sxs-lookup"><span data-stu-id="9c22d-154">Protocol used to send the probe.</span></span> <span data-ttu-id="9c22d-155">Araştırma arka uç HTTP Ayarları'nda tanımlanan protokolünü kullanır</span><span class="sxs-lookup"><span data-stu-id="9c22d-155">The probe uses the protocol defined in the back-end HTTP settings</span></span> |
| <span data-ttu-id="9c22d-156">Host</span><span class="sxs-lookup"><span data-stu-id="9c22d-156">Host</span></span> |<span data-ttu-id="9c22d-157">Araştırma göndermek için ana bilgisayar adı.</span><span class="sxs-lookup"><span data-stu-id="9c22d-157">Host name to send the probe.</span></span> <span data-ttu-id="9c22d-158">Geçerli yalnızca çok siteli uygulama ağ geçidi üzerinde yapılandırılmış, aksi takdirde '127.0.0.1' kullanın.</span><span class="sxs-lookup"><span data-stu-id="9c22d-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="9c22d-159">Bu değer, VM ana bilgisayar adından farklıdır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="9c22d-160">Yol</span><span class="sxs-lookup"><span data-stu-id="9c22d-160">Path</span></span> |<span data-ttu-id="9c22d-161">Araştırma göreli yolu.</span><span class="sxs-lookup"><span data-stu-id="9c22d-161">Relative path of the probe.</span></span> <span data-ttu-id="9c22d-162">Geçerli yol başlar '/'.</span><span class="sxs-lookup"><span data-stu-id="9c22d-162">The valid path starts from '/'.</span></span> |
| <span data-ttu-id="9c22d-163">aralığı</span><span class="sxs-lookup"><span data-stu-id="9c22d-163">Interval</span></span> |<span data-ttu-id="9c22d-164">Aralığı saniye cinsinden araştırma.</span><span class="sxs-lookup"><span data-stu-id="9c22d-164">Probe interval in seconds.</span></span> <span data-ttu-id="9c22d-165">Bu değer arasında iki ardışık araştırmalar zaman aralığıdır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-165">This value is the time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="9c22d-166">Zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="9c22d-166">Time-out</span></span> |<span data-ttu-id="9c22d-167">Zaman aşımı saniye cinsinden araştırma.</span><span class="sxs-lookup"><span data-stu-id="9c22d-167">Probe time-out in seconds.</span></span> <span data-ttu-id="9c22d-168">Bu zaman aşımı süresi içinde geçerli bir yanıt alınmazsa, araştırma başarısız olarak işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="9c22d-168">If a valid response is not received within this time-out period, the probe is marked as failed.</span></span>  |
| <span data-ttu-id="9c22d-169">Sağlıksız durum eşiği.</span><span class="sxs-lookup"><span data-stu-id="9c22d-169">Unhealthy threshold</span></span> |<span data-ttu-id="9c22d-170">Yeniden deneme sayısı araştırma.</span><span class="sxs-lookup"><span data-stu-id="9c22d-170">Probe retry count.</span></span> <span data-ttu-id="9c22d-171">Sağlıksız eşik arka arkaya araştırma hatası sayısı ulaştıktan sonra arka uç sunucu işaretlenmiş.</span><span class="sxs-lookup"><span data-stu-id="9c22d-171">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="9c22d-172">Uygulama ağ geçidi tek bir site için yapılandırılmışsa, varsayılan olarak ana bilgisayar adı '127.0.0.1' içinde özel araştırma aksi belirtilmedikçe belirtilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="9c22d-172">If Application Gateway is configured for a single site, by default the Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="9c22d-173">Özel bir araştırma gönderilir başvurusunu \<Protokolü\>://\<konak\>:\<bağlantı noktası\>\<yolu\>.</span><span class="sxs-lookup"><span data-stu-id="9c22d-173">For reference a custom probe is sent to \<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="9c22d-174">Kullanılan bağlantı noktası aynı bağlantı noktasını arka uç HTTP Ayarları'nda tanımlanan gibi olacaktır.</span><span class="sxs-lookup"><span data-stu-id="9c22d-174">The port used will be the same port as defined in the back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9c22d-175">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="9c22d-175">Next steps</span></span>
<span data-ttu-id="9c22d-176">Uygulama ağ geçidi durumunu izleme hakkında daha fazla öğrenme sonra yapılandırdığınız bir [özel durumu araştırması](application-gateway-create-probe-portal.md) Azure portalında veya [özel durumu araştırması](application-gateway-create-probe-ps.md) PowerShell ve Azure Resource Manager kullanarak dağıtım modeli.</span><span class="sxs-lookup"><span data-stu-id="9c22d-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in the Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and the Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
