---
title: "Etki alanına katılmış Azure Hdınsight mimarisi | Microsoft Docs"
description: "Etki alanına katılmış HDInsight planlama hakkında bilgi edinin."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 7e34f47f09466a40993b4cc797ff1cad2bdaeafe
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="f9508-103">HDInsight'ta Azure etki alanına katılmış Hadoop kümeleri planlama</span><span class="sxs-lookup"><span data-stu-id="f9508-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="f9508-104">Geleneksel Hadoop tek kullanıcılı bir kümedir.</span><span class="sxs-lookup"><span data-stu-id="f9508-104">The traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="f9508-105">Büyük veri iş yükleri oluşturan küçük uygulama ekiplerine sahip çoğu şirket için uygundur.</span><span class="sxs-lookup"><span data-stu-id="f9508-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="f9508-106">Hadoop'un popülerliği arttıkça çoğu kurum, kümelerin BT ekipleri tarafından yönetildiği ve birden çok uygulama ekibinin ortak kümelerde çalıştığı bir modele geçiş yapıyor.</span><span class="sxs-lookup"><span data-stu-id="f9508-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="f9508-107">Bu nedenle çok kullanıcılı kümeler gibi işlevler, en çok talep gören Azure HDInsight işlevlerinden biri.</span><span class="sxs-lookup"><span data-stu-id="f9508-107">Thus, functionalities involving multiuser clusters are among the most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="f9508-108">Kendi çok kullanıcılı kimlik doğrulama ve yetkilendirme oluşturmak yerine, Hdınsight en popüler kimlik sağlayıcısı--Active Directory (AD) kullanır.</span><span class="sxs-lookup"><span data-stu-id="f9508-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on the most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="f9508-109">AD güçlü güvenlik işlevindeki hdınsight'ta çok kullanıcılı yetkilendirmeyi yönetmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="f9508-109">The powerful security functionality in AD can be used to manage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="f9508-110">Hdınsight AD ile tümleştirme, AD kimlik bilgilerinizi kullanarak kümeleriyle iletişim kurabilir.</span><span class="sxs-lookup"><span data-stu-id="f9508-110">By integrating HDInsight with AD, you can communicate with the clusters by using your AD credentials.</span></span> <span data-ttu-id="f9508-111">Hdınsight Hdınsight üzerinde çalışan tüm hizmetleri yerel bir Hadoop kullanıcı için bir AD kullanıcısının eşler (Ambari, sunucu, bırakabilmenizi, Spark thrift Hive sunucu ve diğerleri) kimliği doğrulanmış kullanıcı için sorunsuz bir şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="f9508-111">HDInsight maps an AD user to a local Hadoop user, so all the services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for the authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="f9508-112">Hdınsight AD ve Iaas VM üzerinde AD ile tümleştirme</span><span class="sxs-lookup"><span data-stu-id="f9508-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="f9508-113">Hdınsight Azure AD veya Iaas VM üzerinde AD ile tümleştirerek, Hdınsight küme düğümleri etki alanına bir etki alanına katılmış.</span><span class="sxs-lookup"><span data-stu-id="f9508-113">By integrating HDInsight with Azure AD or AD on Iaas VM, the HDInsight cluster nodes are domain-joined to a domain.</span></span> <span data-ttu-id="f9508-114">Hdınsight küme üzerinde çalışan Hadoop Hizmetleri için hizmet asıl adı oluşturur ve bunları belirtilen bir kuruluş birimi (OU) Azure AD veya Iaas VM üzerinde AD yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="f9508-114">HDInsight creates service principals for the Hadoop services running on the cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="f9508-115">Hdınsight geriye doğru DNS eşlemelerini etki alanına katılan düğümlerin IP adresleri etki alanında da oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f9508-115">HDInsight also creates reverse DNS mappings in the domain for the IP addresses of the nodes that are joined to the domain.</span></span>

<span data-ttu-id="f9508-116">Bu kuruluma birden fazla mimari kullanarak ulaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f9508-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="f9508-117">Aşağıdaki mimarilerin arasından seçim yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f9508-117">You can choose from the following architectures.</span></span>

<span data-ttu-id="f9508-118">**Azure Iaas üzerinde çalışan AD ile tümleşik Hdınsight**</span><span class="sxs-lookup"><span data-stu-id="f9508-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="f9508-119">HDInsight’ı Active Directory ile tümleştirmek için kullanabileceğiniz en basit mimari budur.</span><span class="sxs-lookup"><span data-stu-id="f9508-119">This is the simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="f9508-120">Bir (veya birden çok) sanal makinelerde (VM'ler) Azure AD etki alanı denetleyicisi çalışır.</span><span class="sxs-lookup"><span data-stu-id="f9508-120">The AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="f9508-121">Genellikle bu VM'ler bir sanal ağ içerisindedir.</span><span class="sxs-lookup"><span data-stu-id="f9508-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="f9508-122">HDInsight kümesi için başka bir sanal ağ kurarsınız.</span><span class="sxs-lookup"><span data-stu-id="f9508-122">You set up another virtual network for the HDInsight cluster.</span></span> <span data-ttu-id="f9508-123">Active Directory için bir satır görüş sağlamak Hdınsight için kullanarak bu sanal ağlar eş gerek [VNet-VNet eşlemesi](../virtual-network/virtual-network-create-peering.md).</span><span class="sxs-lookup"><span data-stu-id="f9508-123">For HDInsight to have a line of sight to Active Directory, you need to peer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="f9508-124">ARM üzerinde Active Directory oluşturursanız, daha sonra Active Directory ve Hdınsight aynı Vnet'i oluşturabilirsiniz ve eşliği yapmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f9508-124">If you create the Active Directory in ARM, then you can create the Active Directory and HDInsight in the same VNet and you don't need to do peering.</span></span> 

![HDInsight küme topolojisini etki alanına katma](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="f9508-126">Bu mimaride, Azure Data Lake Store'u HDInsight kümesi ile kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="f9508-126">In this architecture, you cannot use Azure Data Lake Store with the HDInsight cluster.</span></span>


<span data-ttu-id="f9508-127">Active Directory için Önkoşullar:</span><span class="sxs-lookup"><span data-stu-id="f9508-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="f9508-128">HDInsight kümesi VM'lerini ve küme tarafından kullanılan hizmet sorumlularını yerleştireceğiniz bir [kuruluş birimi](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9508-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place the HDInsight cluster VMs and the service principals used by the cluster.</span></span>
* <span data-ttu-id="f9508-129">[Hafif Dizin Erişim protokolleri](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) ayarlanmalıdır AD ile iletişim kurmak için.</span><span class="sxs-lookup"><span data-stu-id="f9508-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="f9508-130">LDAPS kurulumu için kullanılan sertifika gerçek bir sertifika (otomatik olarak imzalanan sertifika değil) olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9508-130">The certificate used to set up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="f9508-131">HDInsight alt ağının IP adresi aralığı için etki alanında ters DNS bölgeleri oluşturulmalıdır (örneğin, bir önceki resimde 10.2.0.0/24).</span><span class="sxs-lookup"><span data-stu-id="f9508-131">Reverse DNS zones must be created on the domain for the IP address range of the HDInsight subnet (for example, 10.2.0.0/24 in the previous picture).</span></span>
* <span data-ttu-id="f9508-132">Hizmet hesabı veya kullanıcı hesabı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="f9508-132">A service account or a user account is needed.</span></span> <span data-ttu-id="f9508-133">Bu hesabı HDInsight kümesini oluşturmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="f9508-133">Use this account to create the HDInsight cluster.</span></span> <span data-ttu-id="f9508-134">Bu hesap aşağıdaki izinlere sahip olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="f9508-134">This account must have the following permissions:</span></span>

    - <span data-ttu-id="f9508-135">Kuruluş birimi içerisinde hizmet sorumlusu nesneleri ve makine nesneleri oluşturma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-135">Permissions to create service principal objects and machine objects within the organizational unit</span></span>
    - <span data-ttu-id="f9508-136">Ters DNS proxy kuralları oluşturma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-136">Permissions to create reverse DNS proxy rules</span></span>
    - <span data-ttu-id="f9508-137">Makineleri Active Directory etki alanına katma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-137">Permissions to join machines to the Active Directory domain</span></span>

<span data-ttu-id="f9508-138">**Yalnızca bulutta çalışan Azure AD ile tümleştirilmiş HDInsight**</span><span class="sxs-lookup"><span data-stu-id="f9508-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="f9508-139">Yalnızca bulutta çalışan Azure AD için bir etki alanı denetleyiciyi yapılandırarak HDInsight ile Azure AD'nin tümleştirilmesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="f9508-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="f9508-140">Bu kullanılarak elde edilir [Azure Active Directory etki alanı Hizmetleri](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="f9508-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="f9508-141">Azure AD DS bulutta etki alanı denetleyici makinelerini oluşturur ve bunların IP adreslerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="f9508-141">Azure AD DS creates domain controller machines on the cloud and provides IP addresses for them.</span></span> <span data-ttu-id="f9508-142">Yüksek kullanılabilirlik için iki etki alanı denetleyicisi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f9508-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="f9508-143">Şu anda Azure AD DS yalnızca klasik sanal ağlarda mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="f9508-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="f9508-144">Yalnızca klasik Azure portalı kullanılarak erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="f9508-144">It is only accessible by using the Azure classic portal.</span></span> <span data-ttu-id="f9508-145">Azure portalında yer alan HDInsight sanal ağının sanal ağlar arası eşleme kullanılarak klasik sanal ağla eşlenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9508-145">The HDInsight virtual network exists in the Azure portal, which needs to be peered with the classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="f9508-146">Klasik bir sanal ağ ile bir Azure Resource Manager sanal ağı arasında eşleme gerçekleştirilebilmesi için her iki sanal ağ da aynı bölgede ve aynı Azure aboneliği altında olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9508-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in the same region and under the same Azure subscription.</span></span>

![HDInsight küme topolojisini etki alanına katma](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="f9508-148">Azure AD önkoşulları:</span><span class="sxs-lookup"><span data-stu-id="f9508-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="f9508-149">HDInsight kümesi VM'lerini ve küme tarafından kullanılan hizmet sorumlularını yerleştireceğiniz bir [kuruluş birimi](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9508-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place the HDInsight cluster VMs and the service principals used by the cluster.</span></span>
* <span data-ttu-id="f9508-150">Azure AD DS'yi yapılandırırken [LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) kurulumu gerçekleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9508-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="f9508-151">LDAPS kurulumu için kullanılan sertifika gerçek bir sertifika (otomatik olarak imzalanan sertifika değil) olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f9508-151">The certificate used to set up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="f9508-152">HDInsight alt ağının IP adresi aralığı için etki alanında ters DNS bölgeleri oluşturulmalıdır (örneğin, bir önceki resimde 10.2.0.0/24).</span><span class="sxs-lookup"><span data-stu-id="f9508-152">Reverse DNS zones must be created on the domain for the IP address range of the HDInsight subnet (for example, 10.2.0.0/24 in the previous picture).</span></span>
* <span data-ttu-id="f9508-153">[Parola karmalarının](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) Azure AD'den Azure AD DS'ye eşitlenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9508-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD to Azure AD DS.</span></span>
* <span data-ttu-id="f9508-154">Hizmet hesabı veya kullanıcı hesabı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="f9508-154">A service account or a user account is needed.</span></span> <span data-ttu-id="f9508-155">Bu hesabı HDInsight kümesini oluşturmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="f9508-155">Use this account to create the HDInsight cluster.</span></span> <span data-ttu-id="f9508-156">Bu hesap aşağıdaki izinlere sahip olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="f9508-156">This account must have the following permissions:</span></span>

    - <span data-ttu-id="f9508-157">Kuruluş birimi içerisinde hizmet sorumlusu nesneleri ve makine nesneleri oluşturma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-157">Permissions to create service principal objects and machine objects within the organizational unit</span></span>
    - <span data-ttu-id="f9508-158">Ters DNS proxy kuralları oluşturma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-158">Permissions to create reverse DNS proxy rules</span></span>
    - <span data-ttu-id="f9508-159">Makineleri Azure AD etki alanına katma izinleri</span><span class="sxs-lookup"><span data-stu-id="f9508-159">Permissions to join machines to the Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="f9508-160">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="f9508-160">Next steps</span></span>
* <span data-ttu-id="f9508-161">Etki alanına katılmış bir HDInsight kümesi yapılandırmak için bkz. [Etki alanına katılmış HDInsight kümelerini yapılandırma](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="f9508-161">To configure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="f9508-162">Etki alanına katılmış HDInsight kümelerini yönetmek için bkz. [Etki alanına katılmış HDInsight kümelerini yönetme](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="f9508-162">To manage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="f9508-163">Hive ilkelerini yapılandırmak ve Hive sorgularını çalıştırmak için bkz. [Etki alanına katılmış HDInsight kümeleri için Hive ilkelerini yapılandırma](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="f9508-163">To configure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="f9508-164">Etki alanına katılmış Hdınsight kümelerinde SSH kullanarak Hive sorguları çalıştırmak için bkz: [Hdınsight ile SSH kullanma](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="f9508-164">To run Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
