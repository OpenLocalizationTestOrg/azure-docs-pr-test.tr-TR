---
title: "Azure Hdınsight mimarisi aaaDomain katılmış | Microsoft Docs"
description: "Nasıl tooplan etki alanı Hdınsight katılmış öğrenin."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 1c3ecedf3739b4f8fa54160225be9c1d6e2ca6cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="36161-103">HDInsight'ta Azure etki alanına katılmış Hadoop kümeleri planlama</span><span class="sxs-lookup"><span data-stu-id="36161-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="36161-104">Merhaba geleneksel Hadoop bir tek kullanıcı kümedir.</span><span class="sxs-lookup"><span data-stu-id="36161-104">hello traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="36161-105">Büyük veri iş yükleri oluşturan küçük uygulama ekiplerine sahip çoğu şirket için uygundur.</span><span class="sxs-lookup"><span data-stu-id="36161-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="36161-106">Hadoop'un popülerliği arttıkça çoğu kurum, kümelerin BT ekipleri tarafından yönetildiği ve birden çok uygulama ekibinin ortak kümelerde çalıştığı bir modele geçiş yapıyor.</span><span class="sxs-lookup"><span data-stu-id="36161-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="36161-107">Bu nedenle, ilgili çok kullanıcılı kümeleri arasında olan işlevler en istenen işlevlerin Azure Hdınsight hello.</span><span class="sxs-lookup"><span data-stu-id="36161-107">Thus, functionalities involving multiuser clusters are among hello most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="36161-108">Kendi çok kullanıcılı kimlik doğrulama ve yetkilendirme oluşturmak yerine, Hdınsight hello en popüler kimlik sağlayıcısı üzerinde--Active Directory (AD) kullanır.</span><span class="sxs-lookup"><span data-stu-id="36161-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on hello most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="36161-109">AD içinde Hello güçlü güvenlik işlev hdınsight'ta kullanılan toomanage çok kullanıcılı yetkilendirme olabilir.</span><span class="sxs-lookup"><span data-stu-id="36161-109">hello powerful security functionality in AD can be used toomanage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="36161-110">Hdınsight AD ile tümleştirme, AD kimlik bilgilerinizi kullanarak hello kümeleriyle iletişim kurabilir.</span><span class="sxs-lookup"><span data-stu-id="36161-110">By integrating HDInsight with AD, you can communicate with hello clusters by using your AD credentials.</span></span> <span data-ttu-id="36161-111">Tüm Hdınsight üzerinde çalışan hizmetleri hello şekilde Hdınsight eşleşen bir AD tooa yerel Hadoop kullanıcı, (Ambari, sunucu, bırakabilmenizi, Spark thrift Hive sunucu ve diğerleri) hello kimliği doğrulanmış kullanıcı için sorunsuz bir şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="36161-111">HDInsight maps an AD user tooa local Hadoop user, so all hello services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for hello authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="36161-112">Hdınsight AD ve Iaas VM üzerinde AD ile tümleştirme</span><span class="sxs-lookup"><span data-stu-id="36161-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="36161-113">Hdınsight Azure AD veya Iaas VM üzerinde AD ile tümleştirerek, etki alanına katılmış tooa etki alanı hello Hdınsight küme düğümü olan.</span><span class="sxs-lookup"><span data-stu-id="36161-113">By integrating HDInsight with Azure AD or AD on Iaas VM, hello HDInsight cluster nodes are domain-joined tooa domain.</span></span> <span data-ttu-id="36161-114">Hdınsight Hadoop Hizmetleri hello kümede çalışan hello için hizmet asıl adı oluşturur ve bunları belirtilen bir kuruluş birimi (OU) Azure AD veya Iaas VM üzerinde AD yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="36161-114">HDInsight creates service principals for hello Hadoop services running on hello cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="36161-115">Hdınsight de geriye doğru DNS eşlemelerini hello için hello etki alanındaki etki alanına katılmış toohello hello düğümleri IP adreslerini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="36161-115">HDInsight also creates reverse DNS mappings in hello domain for hello IP addresses of hello nodes that are joined toohello domain.</span></span>

<span data-ttu-id="36161-116">Bu kuruluma birden fazla mimari kullanarak ulaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="36161-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="36161-117">Mimariler aşağıdaki hello seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="36161-117">You can choose from hello following architectures.</span></span>

<span data-ttu-id="36161-118">**Azure Iaas üzerinde çalışan AD ile tümleşik Hdınsight**</span><span class="sxs-lookup"><span data-stu-id="36161-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="36161-119">Hdınsight Active Directory ile tümleştirme için hello basit mimarisi budur.</span><span class="sxs-lookup"><span data-stu-id="36161-119">This is hello simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="36161-120">Merhaba AD etki alanı denetleyicisi bir (veya birden çok) sanal makinelerle (VM) çalışır.</span><span class="sxs-lookup"><span data-stu-id="36161-120">hello AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="36161-121">Genellikle bu VM'ler bir sanal ağ içerisindedir.</span><span class="sxs-lookup"><span data-stu-id="36161-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="36161-122">Merhaba Hdınsight kümesi için başka bir sanal ağ ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="36161-122">You set up another virtual network for hello HDInsight cluster.</span></span> <span data-ttu-id="36161-123">Hdınsight toohave görüş tooActive Directory toopeer bu sanal ağlar kullanarak gereksinim duyduğunuz [VNet-VNet eşlemesi](../virtual-network/virtual-network-create-peering.md).</span><span class="sxs-lookup"><span data-stu-id="36161-123">For HDInsight toohave a line of sight tooActive Directory, you need toopeer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="36161-124">Oluşturursanız, Active Directory hello oluşturabilirsiniz ve Hdınsight'ta hello aynı sanal ağı ARM, Active Directory'de hello ve toodo eşliği olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="36161-124">If you create hello Active Directory in ARM, then you can create hello Active Directory and HDInsight in hello same VNet and you don't need toodo peering.</span></span> 

![HDInsight küme topolojisini etki alanına katma](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="36161-126">Bu mimaride, Azure Data Lake Store ile Merhaba Hdınsight kümesi kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="36161-126">In this architecture, you cannot use Azure Data Lake Store with hello HDInsight cluster.</span></span>


<span data-ttu-id="36161-127">Active Directory için Önkoşullar:</span><span class="sxs-lookup"><span data-stu-id="36161-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="36161-128">Bir [kuruluş birimi](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) hangi yerleştirdiğiniz içinde oluşturulmalıdır Hdınsight küme VM'ler hello ve hello küme tarafından kullanılan hizmet asıl adı hello.</span><span class="sxs-lookup"><span data-stu-id="36161-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="36161-129">[Hafif Dizin Erişim protokolleri](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) ayarlanmalıdır AD ile iletişim kurmak için.</span><span class="sxs-lookup"><span data-stu-id="36161-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="36161-130">Merhaba kullanılan sertifika tooset LDAPS kurma (otomatik imzalı bir sertifika değil) gerçek bir sertifika olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="36161-130">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="36161-131">Geriye doğru DNS bölgeleri hello Hdınsight alt ağ (örneğin, 10.2.0.0/24 hello önceki resimdeki) başlangıç IP adresi aralığı için hello etki alanında oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="36161-131">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="36161-132">Hizmet hesabı veya kullanıcı hesabı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="36161-132">A service account or a user account is needed.</span></span> <span data-ttu-id="36161-133">Bu hesap toocreate hello Hdınsight kümesi kullanın.</span><span class="sxs-lookup"><span data-stu-id="36161-133">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="36161-134">Bu hesabın hello aşağıdaki izinleri olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="36161-134">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="36161-135">İzinleri toocreate hizmet asıl nesneleri ve makine nesnelerinde hello kuruluş birimi</span><span class="sxs-lookup"><span data-stu-id="36161-135">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="36161-136">İzinleri toocreate geriye doğru DNS proxy kuralları</span><span class="sxs-lookup"><span data-stu-id="36161-136">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="36161-137">İzinleri toojoin makineler toohello Active Directory etki alanı</span><span class="sxs-lookup"><span data-stu-id="36161-137">Permissions toojoin machines toohello Active Directory domain</span></span>

<span data-ttu-id="36161-138">**Yalnızca bulutta çalışan Azure AD ile tümleştirilmiş HDInsight**</span><span class="sxs-lookup"><span data-stu-id="36161-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="36161-139">Yalnızca bulutta çalışan Azure AD için bir etki alanı denetleyiciyi yapılandırarak HDInsight ile Azure AD'nin tümleştirilmesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="36161-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="36161-140">Bu kullanılarak elde edilir [Azure Active Directory etki alanı Hizmetleri](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="36161-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="36161-141">Azure AD DS etki alanı denetleyicisi makineler hello bulutta oluşturur ve bunları için IP adresleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="36161-141">Azure AD DS creates domain controller machines on hello cloud and provides IP addresses for them.</span></span> <span data-ttu-id="36161-142">Yüksek kullanılabilirlik için iki etki alanı denetleyicisi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="36161-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="36161-143">Şu anda Azure AD DS yalnızca klasik sanal ağlarda mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="36161-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="36161-144">Bunu yalnızca hello Klasik Azure portalı kullanılarak erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="36161-144">It is only accessible by using hello Azure classic portal.</span></span> <span data-ttu-id="36161-145">Merhaba hello toobe gereken Azure portalında sanal ağ var. Hdınsight VNet-VNet eşlemesi kullanarak hello Klasik sanal ağ ile eşlenen.</span><span class="sxs-lookup"><span data-stu-id="36161-145">hello HDInsight virtual network exists in hello Azure portal, which needs toobe peered with hello classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="36161-146">Klasik sanal ağ ve sanal ağ gerektiren her iki sanal ağ içinde olan bir Azure Resource Manager arasında eşleme hello aynı bölgede ve altında hello aynı Azure aboneliği.</span><span class="sxs-lookup"><span data-stu-id="36161-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in hello same region and under hello same Azure subscription.</span></span>

![HDInsight küme topolojisini etki alanına katma](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="36161-148">Azure AD önkoşulları:</span><span class="sxs-lookup"><span data-stu-id="36161-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="36161-149">Bir [kuruluş birimi](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) hangi yerleştirdiğiniz içinde oluşturulmalıdır Hdınsight küme VM'ler hello ve hello küme tarafından kullanılan hizmet asıl adı hello.</span><span class="sxs-lookup"><span data-stu-id="36161-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="36161-150">Azure AD DS'yi yapılandırırken [LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) kurulumu gerçekleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="36161-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="36161-151">Merhaba kullanılan sertifika tooset LDAPS kurma (otomatik imzalı bir sertifika değil) gerçek bir sertifika olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="36161-151">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="36161-152">Geriye doğru DNS bölgeleri hello Hdınsight alt ağ (örneğin, 10.2.0.0/24 hello önceki resimdeki) başlangıç IP adresi aralığı için hello etki alanında oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="36161-152">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="36161-153">[Parola karmaları](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) Azure AD tooAzure AD DS eşitlenen gerekir.</span><span class="sxs-lookup"><span data-stu-id="36161-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD tooAzure AD DS.</span></span>
* <span data-ttu-id="36161-154">Hizmet hesabı veya kullanıcı hesabı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="36161-154">A service account or a user account is needed.</span></span> <span data-ttu-id="36161-155">Bu hesap toocreate hello Hdınsight kümesi kullanın.</span><span class="sxs-lookup"><span data-stu-id="36161-155">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="36161-156">Bu hesabın hello aşağıdaki izinleri olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="36161-156">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="36161-157">İzinleri toocreate hizmet asıl nesneleri ve makine nesnelerinde hello kuruluş birimi</span><span class="sxs-lookup"><span data-stu-id="36161-157">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="36161-158">İzinleri toocreate geriye doğru DNS proxy kuralları</span><span class="sxs-lookup"><span data-stu-id="36161-158">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="36161-159">İzinleri toojoin makineler toohello Azure AD etki alanı</span><span class="sxs-lookup"><span data-stu-id="36161-159">Permissions toojoin machines toohello Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="36161-160">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="36161-160">Next steps</span></span>
* <span data-ttu-id="36161-161">bir etki alanına katılmış Hdınsight kümesi tooconfigure bkz [etki alanına katılmış Hdınsight kümeleri yapılandırma](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="36161-161">tooconfigure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="36161-162">bkz: toomanage etki alanına katılmış Hdınsight kümeleri [etki alanına katılmış Hdınsight kümelerini yönetme](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="36161-162">toomanage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="36161-163">bkz: tooconfigure Hive ilkeleri ve çalışma Hive sorguları [etki alanına katılmış Hdınsight kümeleri için yapılandırma Hive ilkeleri](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="36161-163">tooconfigure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="36161-164">etki alanına katılmış Hdınsight kümelerinde SSH kullanarak toorun Hive sorguları bkz [Hdınsight ile SSH kullanma](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="36161-164">toorun Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
