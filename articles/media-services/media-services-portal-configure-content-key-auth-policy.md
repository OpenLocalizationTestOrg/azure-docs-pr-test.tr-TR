---
title: "İçerik anahtarı yetkilendirme ilkesini aaaConfigure kullanarak hello Azure portalı | Microsoft Docs"
description: "Bilgi nasıl tooconfigure bir içerik anahtarı için bir yetkilendirme ilkesi."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 157fb691b7f71f4889228817e1dc64555e327d48
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="4b120-103">İçerik anahtarı yetkilendirme ilkesini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="4b120-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="4b120-104">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="4b120-104">Overview</span></span>
<span data-ttu-id="4b120-105">Microsoft Azure Media Services sağlar toodeliver MPEG-DASH, kesintisiz akış ve HTTP canlı akış (HLS) akışlar Gelişmiş Şifreleme Standardı ((128-bit şifreleme anahtarları kullanılarak) AES ile) korumalı veya [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="4b120-105">Microsoft Azure Media Services enables you toodeliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="4b120-106">AMS Ayrıca, Widevine DRM ile şifrelenmiş, toodeliver DASH akışları sağlar.</span><span class="sxs-lookup"><span data-stu-id="4b120-106">AMS also enables you toodeliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="4b120-107">PlayReady ve Widevine, ortak şifreleme (ISO/IEC 23001-7 CENC) belirtimi hello şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="4b120-107">Both PlayReady and Widevine are encrypted per hello Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="4b120-108">Medya Hizmetleri de sağlar bir **anahtarı/lisans teslimat hizmeti** hangi istemcilerin AES anahtarları elde edebilirsiniz veya PlayReady/Widevine lisansları tooplay hello şifrelenmiş içerik.</span><span class="sxs-lookup"><span data-stu-id="4b120-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses tooplay hello encrypted content.</span></span>

<span data-ttu-id="4b120-109">Bu konu, nasıl toouse hello Azure portal tooconfigure hello içerik anahtarı yetkilendirme ilkesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="4b120-109">This topic shows how toouse hello Azure portal tooconfigure hello content key authorization policy.</span></span> <span data-ttu-id="4b120-110">başlangıç anahtarı daha sonra kullanılabilir toodynamically şifrelemek içeriğinizi.</span><span class="sxs-lookup"><span data-stu-id="4b120-110">hello key can later be used toodynamically encrypt your content.</span></span> <span data-ttu-id="4b120-111">Şu anda, akış biçimlerine aşağıdaki hello şifreleyebilirsiniz olduğunu unutmayın: HLS, MPEG DASH ve kesintisiz akış.</span><span class="sxs-lookup"><span data-stu-id="4b120-111">Note that currently you can encrypt hello following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="4b120-112">Aşamalı indirme şifrelenemiyor.</span><span class="sxs-lookup"><span data-stu-id="4b120-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="4b120-113">Bir oyuncu dinamik olarak şifrelenmiş toobe ayarlanmış bir akış istediğinde, Media Services kullanır yapılandırılmış hello anahtar toodynamically AES veya DRM şifreleme kullanarak içeriğinizi şifreleyin.</span><span class="sxs-lookup"><span data-stu-id="4b120-113">When a player requests a stream that is set toobe dynamically encrypted, Media Services uses hello configured key toodynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="4b120-114">toodecrypt hello akış hello anahtar teslim hizmetinden hello anahtar hello player isteyin.</span><span class="sxs-lookup"><span data-stu-id="4b120-114">toodecrypt hello stream, hello player will request hello key from hello key delivery service.</span></span> <span data-ttu-id="4b120-115">tooget hello anahtar desteklemediğini hello kullanıcıdır toodecide yetkili, hello hizmet hello anahtar için belirtilen hello yetkilendirme ilkelerini değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="4b120-115">toodecide whether or not hello user is authorized tooget hello key, hello service evaluates hello authorization policies that you specified for hello key.</span></span>

<span data-ttu-id="4b120-116">Birden çok içerik anahtarı toohave plan veya toospecify istiyorsanız bir **anahtarı/lisans teslimat hizmeti** Media Services .NET SDK veya REST API'leri hello Media Services anahtar teslim hizmeti dışındaki URL'yi kullanın.</span><span class="sxs-lookup"><span data-stu-id="4b120-116">If you plan toohave multiple content keys or want toospecify a **Key/License Delivery Service** URL other than hello Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="4b120-117">Media Services .NET SDK kullanarak içerik anahtarının yetkilendirme ilkesini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="4b120-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="4b120-118">Media Services REST API kullanarak içerik anahtarının yetkilendirme ilkesini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="4b120-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="4b120-119">Bazı dikkate alınması gereken noktalar vardır:</span><span class="sxs-lookup"><span data-stu-id="4b120-119">Some considerations apply:</span></span>
* <span data-ttu-id="4b120-120">AMS hesabınızı oluşturulduğunda bir **varsayılan** akış uç noktası ekleniyor tooyour hesabı hello **durduruldu** durumu.</span><span class="sxs-lookup"><span data-stu-id="4b120-120">When your AMS account is created a **default** streaming endpoint is added  tooyour account in hello **Stopped** state.</span></span> <span data-ttu-id="4b120-121">İçerik ve Al avantajı, dinamik paketleme ve dinamik şifreleme, akış uç noktanızı akış toostart sahip toobe hello **çalıştıran** durumu.</span><span class="sxs-lookup"><span data-stu-id="4b120-121">toostart streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has toobe in hello **Running** state.</span></span> 
* <span data-ttu-id="4b120-122">Varlığınızı Uyarlamalı bit hızlı MP4s ya da Uyarlamalı bit hızlı kesintisiz akış dosyaları içermelidir.</span><span class="sxs-lookup"><span data-stu-id="4b120-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="4b120-123">Daha fazla bilgi için bkz: [bir varlık kodla](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="4b120-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="4b120-124">Merhaba anahtar teslim hizmeti ContentKeyAuthorizationPolicy ve ilişkili nesnelerini (ilkesi seçenekleri ve kısıtlamaları) 15 dakika için önbelleğe alır.</span><span class="sxs-lookup"><span data-stu-id="4b120-124">hello Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="4b120-125">Bir ContentKeyAuthorizationPolicy oluşturmak ve toouse "Token" kısıtlama belirtirseniz ardından test ve hello İlkesi güncelleştirmesi çok kısıtlama "Aç", hello İlkesi anahtarları toohello "Açık" Merhaba ilkesinin sürümü önce yaklaşık 15 dakika sürer.</span><span class="sxs-lookup"><span data-stu-id="4b120-125">If you create a ContentKeyAuthorizationPolicy and specify toouse a “Token” restriction, then test it, and then update hello policy too“Open” restriction, it will take roughly 15 minutes before hello policy switches toohello “Open” version of hello policy.</span></span>

## <a name="how-to-configure-hello-key-authorization-policy"></a><span data-ttu-id="4b120-126">Nasıl yapılır: başlangıç anahtarı yetkilendirme ilkesini yapılandırın</span><span class="sxs-lookup"><span data-stu-id="4b120-126">How to: configure hello key authorization policy</span></span>
<span data-ttu-id="4b120-127">tooconfigure hello anahtar yetkilendirme ilkesi, select hello **içerik koruma** sayfa.</span><span class="sxs-lookup"><span data-stu-id="4b120-127">tooconfigure hello key authorization policy, select hello **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="4b120-128">Media Services, anahtar isteğinde bulunan kullanıcıların kimlik doğrulamasını yapmanın birden çok yöntemini destekler.</span><span class="sxs-lookup"><span data-stu-id="4b120-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="4b120-129">Merhaba içerik anahtarı yetkilendirme ilkesini olabilir **açmak**, **belirteci**, veya **IP** yetkilendirme kısıtlamaları (**IP** yapılandırılabilir REST veya .NET SDK'sı).</span><span class="sxs-lookup"><span data-stu-id="4b120-129">hello content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="4b120-130">Açık kısıtlama</span><span class="sxs-lookup"><span data-stu-id="4b120-130">Open restriction</span></span>
<span data-ttu-id="4b120-131">Merhaba **açmak** sınırlama hello sistemini anahtar isteği yapan hello anahtar tooanyone teslim anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="4b120-131">hello **open** restriction means hello system will deliver hello key tooanyone who makes a key request.</span></span> <span data-ttu-id="4b120-132">Bu kısıtlama sınama amacıyla yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="4b120-132">This restriction might be useful for testing purposes.</span></span>

![OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="4b120-134">Belirteç kısıtlama</span><span class="sxs-lookup"><span data-stu-id="4b120-134">Token restriction</span></span>
<span data-ttu-id="4b120-135">toochoose hello belirteci kısıtlanmış tuşuna hello İlkesi **BELİRTECİ** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="4b120-135">toochoose hello token restricted policy, press hello **TOKEN** button.</span></span>

<span data-ttu-id="4b120-136">Merhaba **belirteci** sınırlı İlkesi eşlik, tarafından verilmiş bir belirteç tarafından bir **güvenli belirteç hizmeti** (STS).</span><span class="sxs-lookup"><span data-stu-id="4b120-136">hello **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="4b120-137">Media Services hello belirteçleri destekler **basit Web belirteçleri** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) biçimi ve **JSON Web belirteci** (JWT) biçimi.</span><span class="sxs-lookup"><span data-stu-id="4b120-137">Media Services supports tokens in hello **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="4b120-138">Bilgi için bkz: [JWT belirteci kimlik doğrulaması](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="4b120-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="4b120-139">Media Services sağlamaz **güvenli belirteç Hizmetleri**.</span><span class="sxs-lookup"><span data-stu-id="4b120-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="4b120-140">Özel bir STS oluşturabilir veya Microsoft Azure ACS tooissue belirteçleri yararlanın.</span><span class="sxs-lookup"><span data-stu-id="4b120-140">You can create a custom STS or leverage Microsoft Azure ACS tooissue tokens.</span></span> <span data-ttu-id="4b120-141">Merhaba STS bir belirteci imzalayan belirtilen hello ile yapılandırılmış toocreate olmalıdır hello belirteç kısıtlamasına yapılandırmasında belirtilen anahtarı ve çıkış talep.</span><span class="sxs-lookup"><span data-stu-id="4b120-141">hello STS must be configured toocreate a token signed with hello specified key and issue claims that you specified in hello token restriction configuration.</span></span> <span data-ttu-id="4b120-142">Merhaba Media Services anahtar teslim hizmeti hello şifreleme anahtar toohello istemcisi hello belirteci geçerliyse ve hello hello belirtecinizdeki talepleri hello içerik anahtarı için yapılandırılan eşleşen döndürür.</span><span class="sxs-lookup"><span data-stu-id="4b120-142">hello Media Services key delivery service will return hello encryption key toohello client if hello token is valid and hello claims in hello token match those configured for hello content key.</span></span> <span data-ttu-id="4b120-143">Daha fazla bilgi için bkz: [kullanım Azure ACS tooissue belirteçleri](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="4b120-143">For more information, see [Use Azure ACS tooissue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="4b120-144">Merhaba yapılandırırken **BELİRTECİ** sınırlı İlkesi değerlerini ayarlamanız gerekir **doğrulama anahtarı**, **veren** ve **İzleyici**.</span><span class="sxs-lookup"><span data-stu-id="4b120-144">When configuring hello **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="4b120-145">Merhaba birincil doğrulama anahtarı içeren hello hello belirteci imzalayan, veren hello belirteci veren hello güvenli belirteç hizmeti olan anahtar.</span><span class="sxs-lookup"><span data-stu-id="4b120-145">hello primary verification key contains hello key that hello token was signed with, issuer is hello secure token service that issues hello token.</span></span> <span data-ttu-id="4b120-146">Merhaba kaynak hello belirteci erişimini yetkilendirir veya (bazen kapsam denir) hello İzleyici hello belirteci hello amacı açıklanır.</span><span class="sxs-lookup"><span data-stu-id="4b120-146">hello audience (sometimes called scope) describes hello intent of hello token or hello resource hello token authorizes access to.</span></span> <span data-ttu-id="4b120-147">Merhaba Media Services anahtar teslim hizmeti bu değerleri hello belirteci hello değerleri hello şablonunda eşleştiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="4b120-147">hello Media Services key delivery service validates that these values in hello token match hello values in hello template.</span></span>

### <a name="playready"></a><span data-ttu-id="4b120-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="4b120-148">PlayReady</span></span>
<span data-ttu-id="4b120-149">İçeriğinizi ile korurken **PlayReady**, bir gereksinim duyduğunuz hello şey toospecify Yetkilendirme İlkesi'nde hello PlayReady lisans şablonu tanımlar XML dizesidir.</span><span class="sxs-lookup"><span data-stu-id="4b120-149">When protecting your content with **PlayReady**, one of hello things you need toospecify in your authorization policy is an XML string that defines hello PlayReady license template.</span></span> <span data-ttu-id="4b120-150">Varsayılan olarak, ilke aşağıdaki hello ayarlanır:</span><span class="sxs-lookup"><span data-stu-id="4b120-150">By default, hello following policy is set:</span></span>

<span data-ttu-id="4b120-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates> <PlayReadyLicenseTemplate> <AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>izin verilen</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="4b120-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="4b120-152">Merhaba tıklayabilirsiniz **ilke XML'yi içe** düğmesine tıklayın ve XML Şeması tanımlanan toohello uyan farklı bir XML sağlamak [burada](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4b120-152">You can click hello **import policy xml** button and provide a different XML which conforms toohello  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="4b120-153">Sonraki adım</span><span class="sxs-lookup"><span data-stu-id="4b120-153">Next step</span></span>
<span data-ttu-id="4b120-154">Media Services öğrenme yollarını gözden geçirin.</span><span class="sxs-lookup"><span data-stu-id="4b120-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="4b120-155">Geri bildirimde bulunma</span><span class="sxs-lookup"><span data-stu-id="4b120-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

