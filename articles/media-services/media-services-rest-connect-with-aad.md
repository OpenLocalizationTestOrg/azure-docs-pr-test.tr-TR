---
title: "Azure Media Services API REST ile erişmek için kimlik doğrulamasını kullan Azure AD | Microsoft Docs"
description: "Azure Media Services API REST kullanarak Azure Active Directory kimlik doğrulaması ile erişim öğrenin."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 1c62857699fb29b3583363e1c6f2dc7874635f40
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="use-azure-ad-authentication-to-access-the-azure-media-services-api-with-rest"></a><span data-ttu-id="f2541-103">Azure Media Services API REST ile erişmek için Azure AD kimlik doğrulaması kullanın</span><span class="sxs-lookup"><span data-stu-id="f2541-103">Use Azure AD authentication to access the Azure Media Services API with REST</span></span>

<span data-ttu-id="f2541-104">Azure Media Services ekip Azure Media Services erişimi için Azure Active Directory (Azure AD) kimlik doğrulama desteği yayımladı.</span><span class="sxs-lookup"><span data-stu-id="f2541-104">The Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="f2541-105">Ayrıca, Media Services erişimi için Azure erişim denetimi hizmeti kimlik doğrulama alanı onaylanamadı planları duyurdu.</span><span class="sxs-lookup"><span data-stu-id="f2541-105">It also announced plans to deprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="f2541-106">Her Azure aboneliği ve her medya hizmetleri hesabı için Azure AD kiracısı bağlı olduğundan, Azure AD kimlik doğrulama desteği birçok güvenlik avantajları beraberinde getirir.</span><span class="sxs-lookup"><span data-stu-id="f2541-106">Because every Azure subscription, and every Media Services account, is attached to an Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="f2541-107">Bu değişiklik ve (uygulamanız için'de Media Services .NET SDK'sı kullanıyorsanız) geçişi hakkında daha fazla ayrıntı için aşağıdaki blog gönderileri ve makalelere bakın:</span><span class="sxs-lookup"><span data-stu-id="f2541-107">For details about this change and migration (if you use the Media Services .NET SDK for your app), see the following blog posts and articles:</span></span>

- [<span data-ttu-id="f2541-108">Azure Media Services, Azure AD için destek sunar ve erişim denetimi kimlik doğrulamasının kullanımdan kaldırma</span><span class="sxs-lookup"><span data-stu-id="f2541-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="f2541-109">Azure AD kimlik doğrulamasını kullanarak erişim Azure Media Services API</span><span class="sxs-lookup"><span data-stu-id="f2541-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="f2541-110">Microsoft .NET kullanarak Azure Media Services API erişmek için Azure AD kimlik doğrulaması kullanın</span><span class="sxs-lookup"><span data-stu-id="f2541-110">Use Azure AD authentication to access Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="f2541-111">Azure portalı kullanarak Azure AD kimlik doğrulaması ile çalışmaya başlama</span><span class="sxs-lookup"><span data-stu-id="f2541-111">Getting started with Azure AD authentication by using the Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="f2541-112">Aşağıdaki kısıtlamalar altında Media Services çözümleri geliştirmek bazı müşteriler gerekir:</span><span class="sxs-lookup"><span data-stu-id="f2541-112">Some customers need to develop their Media Services solutions under the following constraints:</span></span>

*   <span data-ttu-id="f2541-113">Microsoft .NET veya C# programlama bir dil kullanın veya çalışma zamanı ortamı Windows değil.</span><span class="sxs-lookup"><span data-stu-id="f2541-113">They use a programming language that is not Microsoft .NET or C#, or the runtime environment is not Windows.</span></span>
*   <span data-ttu-id="f2541-114">Active Directory kimlik doğrulama kitaplıkları gibi Azure AD kitaplıkları için programlama dili kullanılabilir değil veya kendi çalışma zamanı ortamı için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="f2541-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for the programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="f2541-115">Bazı müşteriler, erişim denetimi kimlik doğrulaması ve Azure Media Services erişimi için REST API kullanarak uygulamaları geliştirdik.</span><span class="sxs-lookup"><span data-stu-id="f2541-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="f2541-116">Bu müşteriler için Azure AD kimlik doğrulaması ve sonraki Azure Media Services erişimi için yalnızca REST API kullanmak için bir yönteme ihtiyacınız vardır.</span><span class="sxs-lookup"><span data-stu-id="f2541-116">For these customers, you need a way to use only the REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="f2541-117">Herhangi bir Azure AD kitaplıkları veya Media Services .NET SDK'sı kalmamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2541-117">You need to not rely on any of the Azure AD libraries or on the Media Services .NET SDK.</span></span> <span data-ttu-id="f2541-118">Bu makalede, bir çözüm açıklar ve bu senaryo için örnek kod sağlar.</span><span class="sxs-lookup"><span data-stu-id="f2541-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="f2541-119">Kod hiçbir bağımlılık tüm Azure AD ile tüm REST API çağrıları olduğundan veya Azure Media Services kitaplık kodu diğer programlama dili için kolay çevrilebilir.</span><span class="sxs-lookup"><span data-stu-id="f2541-119">Because the code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, the code can easily be translated to any other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f2541-120">Şu anda, Media Services Azure erişim denetimi Hizmetleri kimlik doğrulama modelini destekler.</span><span class="sxs-lookup"><span data-stu-id="f2541-120">Currently, Media Services supports the Azure Access Control services authentication model.</span></span> <span data-ttu-id="f2541-121">Ancak, erişim denetimi kimlik doğrulaması 1 Haziran 2018 kullanım dışı kalacaktır.</span><span class="sxs-lookup"><span data-stu-id="f2541-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="f2541-122">Azure AD kimlik doğrulama modeline mümkün olan en kısa sürede geçirmek öneririz.</span><span class="sxs-lookup"><span data-stu-id="f2541-122">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="f2541-123">Tasarlayın</span><span class="sxs-lookup"><span data-stu-id="f2541-123">Design</span></span>

<span data-ttu-id="f2541-124">Bu makalede, aşağıdaki kimlik doğrulama ve yetkilendirme tasarım kullanın:</span><span class="sxs-lookup"><span data-stu-id="f2541-124">In this article, we use the following authentication and authorization design:</span></span>

*  <span data-ttu-id="f2541-125">Yetkilendirme Protokolü: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f2541-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="f2541-126">OAuth 2.0 kimlik doğrulama ve yetkilendirme kapsayan bir web güvenlik standardıdır.</span><span class="sxs-lookup"><span data-stu-id="f2541-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="f2541-127">Google, Microsoft, Facebook ve PayPal tarafından desteklenir.</span><span class="sxs-lookup"><span data-stu-id="f2541-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="f2541-128">Ekim 2012 onay.</span><span class="sxs-lookup"><span data-stu-id="f2541-128">It was ratified October 2012.</span></span> <span data-ttu-id="f2541-129">Microsoft, OAuth 2.0 ve Openıd Connect sıkıca destekler.</span><span class="sxs-lookup"><span data-stu-id="f2541-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="f2541-130">Bu standartlar her ikisinin birden çok hizmet ve istemci kitaplıkları, Azure Active Directory gibi .NET (OWIN) Katana açık Web arabirimi desteklenir ve Azure AD kitaplıkları.</span><span class="sxs-lookup"><span data-stu-id="f2541-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="f2541-131">Vermek türü: istemci kimlik bilgileri vermenizi türü.</span><span class="sxs-lookup"><span data-stu-id="f2541-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="f2541-132">İstemci kimlik bilgileri biridir OAuth 2.0 dört grant türler.</span><span class="sxs-lookup"><span data-stu-id="f2541-132">Client credentials is one of the four grant types in OAuth 2.0.</span></span> <span data-ttu-id="f2541-133">Genellikle, Azure AD Microsoft Graph API erişimi için de kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f2541-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="f2541-134">Kimlik doğrulama modu: hizmet sorumlusu.</span><span class="sxs-lookup"><span data-stu-id="f2541-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="f2541-135">Diğer kimlik doğrulama modu, kullanıcı veya etkileşimli kimlik doğrulaması ' dir.</span><span class="sxs-lookup"><span data-stu-id="f2541-135">The other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="f2541-136">Azure AD kimlik doğrulama ve yetkilendirme dört uygulamalar veya hizmetler toplam söz konusu Media Services'i kullanarak akışı.</span><span class="sxs-lookup"><span data-stu-id="f2541-136">A total of four applications or services are involved in the Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="f2541-137">Uygulamaları ve Hizmetleri ve akış aşağıdaki tabloda açıklanmıştır:</span><span class="sxs-lookup"><span data-stu-id="f2541-137">The applications and services, and the flow, are described in the following table:</span></span>

|<span data-ttu-id="f2541-138">Uygulama türü</span><span class="sxs-lookup"><span data-stu-id="f2541-138">Application type</span></span> |<span data-ttu-id="f2541-139">Uygulama</span><span class="sxs-lookup"><span data-stu-id="f2541-139">Application</span></span> |<span data-ttu-id="f2541-140">Akış</span><span class="sxs-lookup"><span data-stu-id="f2541-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="f2541-141">İstemci</span><span class="sxs-lookup"><span data-stu-id="f2541-141">Client</span></span> | <span data-ttu-id="f2541-142">Müşteri uygulama ya da çözüm</span><span class="sxs-lookup"><span data-stu-id="f2541-142">Customer app or solution</span></span> | <span data-ttu-id="f2541-143">Bu uygulamayı (aslında, kendi proxy) Azure aboneliği ve medya hizmet hesabının bulunduğu Azure AD kiracısında kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f2541-143">This app (actually, its proxy) is registered in the Azure AD tenant in which the Azure subscription and the media service account reside.</span></span> <span data-ttu-id="f2541-144">Hizmet sorumlusu kayıtlı uygulamanın sahibi veya katkıda bulunan rolü, erişim denetimi (IAM) medya hizmet hesabının sonra verilir.</span><span class="sxs-lookup"><span data-stu-id="f2541-144">The service principal of the registered app is then granted with Owner or Contributor role in the Access Control (IAM) of the media service account.</span></span> <span data-ttu-id="f2541-145">Hizmet sorumlusu uygulama istemci Kimliğini ve istemci gizli anahtarı temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="f2541-145">The service principal is represented by the app client ID and client secret.</span></span> |
|<span data-ttu-id="f2541-146">Kimlik sağlayıcıyı (IDP)</span><span class="sxs-lookup"><span data-stu-id="f2541-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="f2541-147">IDP olarak Azure AD</span><span class="sxs-lookup"><span data-stu-id="f2541-147">Azure AD as IDP</span></span> | <span data-ttu-id="f2541-148">Kayıtlı uygulama hizmet sorumlusu (istemci kimliği ve istemci gizli anahtarı) IDP olarak Azure AD tarafından doğrulanır.</span><span class="sxs-lookup"><span data-stu-id="f2541-148">The registered app service principal (client ID and client secret) is authenticated by Azure AD as the IDP.</span></span> <span data-ttu-id="f2541-149">Bu kimlik doğrulaması, dahili ve örtük olarak gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f2541-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="f2541-150">İstemci kimlik bilgileri akışının olduğu gibi istemci yerine kullanıcının kimliği doğrulanır.</span><span class="sxs-lookup"><span data-stu-id="f2541-150">As in client credentials flow, the client is authenticated instead of the user.</span></span> |
|<span data-ttu-id="f2541-151">Belirteç Hizmeti (STS) güvenli / OAuth sunucu</span><span class="sxs-lookup"><span data-stu-id="f2541-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="f2541-152">STS olarak Azure AD</span><span class="sxs-lookup"><span data-stu-id="f2541-152">Azure AD as STS</span></span> | <span data-ttu-id="f2541-153">IDP (veya OAuth sunucusu OAuth 2.0 terimleriyle) göre kimlik doğrulamasından sonra bir erişim belirteci veya JSON Web Token (JWT) STS/OAuth sunucusu olarak Azure AD erişim için Orta katmanda kaynağı tarafından verilir: Bu örnekte, Media Services REST API uç noktası.</span><span class="sxs-lookup"><span data-stu-id="f2541-153">After authentication by the IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access to the middle-tier resource: in our case, the Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="f2541-154">Kaynak</span><span class="sxs-lookup"><span data-stu-id="f2541-154">Resource</span></span> | <span data-ttu-id="f2541-155">Media Services REST API'si</span><span class="sxs-lookup"><span data-stu-id="f2541-155">Media Services REST API</span></span> | <span data-ttu-id="f2541-156">Her Media Services REST API çağrısı STS veya OAuth sunucu olarak Azure AD tarafından verilen bir erişim belirteci tarafından yetkilendirildi.</span><span class="sxs-lookup"><span data-stu-id="f2541-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or the OAuth server.</span></span> |

<span data-ttu-id="f2541-157">Örnek kodu çalıştırmak ve yakalama JWT veya bir erişim belirteci, JWT aşağıdaki özniteliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="f2541-157">If you run the sample code and capture a JWT or an access token, the JWT has the following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="f2541-158">JWT ve özniteliklere dört uygulamalar veya hizmetler önceki tabloda arasındaki eşlemeleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="f2541-158">Here are the mappings between the attributes in the JWT and the four applications or services in the preceding table:</span></span>

|<span data-ttu-id="f2541-159">Uygulama türü</span><span class="sxs-lookup"><span data-stu-id="f2541-159">Application type</span></span> |<span data-ttu-id="f2541-160">Uygulama</span><span class="sxs-lookup"><span data-stu-id="f2541-160">Application</span></span> |<span data-ttu-id="f2541-161">JWT özniteliği</span><span class="sxs-lookup"><span data-stu-id="f2541-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="f2541-162">İstemci</span><span class="sxs-lookup"><span data-stu-id="f2541-162">Client</span></span> |<span data-ttu-id="f2541-163">Müşteri uygulama ya da çözüm</span><span class="sxs-lookup"><span data-stu-id="f2541-163">Customer app or solution</span></span> |<span data-ttu-id="f2541-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="f2541-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="f2541-165">Bir uygulamanın istemci Kimliğini sonraki bölümde Azure AD ile kaydeder.</span><span class="sxs-lookup"><span data-stu-id="f2541-165">The client ID of an application you will register to Azure AD in the next section.</span></span> |
|<span data-ttu-id="f2541-166">Kimlik sağlayıcıyı (IDP)</span><span class="sxs-lookup"><span data-stu-id="f2541-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="f2541-167">IDP olarak Azure AD</span><span class="sxs-lookup"><span data-stu-id="f2541-167">Azure AD as IDP</span></span> |<span data-ttu-id="f2541-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="f2541-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="f2541-169">Microsoft kimlik Kiracı (microsoft.onmicrosoft.com) GUID'dir.</span><span class="sxs-lookup"><span data-stu-id="f2541-169">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f2541-170">Her bir kiracı kendi, benzersiz kimliği vardır.</span><span class="sxs-lookup"><span data-stu-id="f2541-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="f2541-171">Belirteç Hizmeti (STS) güvenli / OAuth sunucu</span><span class="sxs-lookup"><span data-stu-id="f2541-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="f2541-172">STS olarak Azure AD</span><span class="sxs-lookup"><span data-stu-id="f2541-172">Azure AD as STS</span></span> | <span data-ttu-id="f2541-173">ISS: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="f2541-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="f2541-174">Microsoft kimlik Kiracı (microsoft.onmicrosoft.com) GUID'dir.</span><span class="sxs-lookup"><span data-stu-id="f2541-174">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="f2541-175">Kaynak</span><span class="sxs-lookup"><span data-stu-id="f2541-175">Resource</span></span> | <span data-ttu-id="f2541-176">Media Services REST API'si</span><span class="sxs-lookup"><span data-stu-id="f2541-176">Media Services REST API</span></span> |<span data-ttu-id="f2541-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="f2541-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="f2541-178">Alıcı ya da erişim belirteci İzleyici.</span><span class="sxs-lookup"><span data-stu-id="f2541-178">The recipient or audience of the access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="f2541-179">Kurulum adımları</span><span class="sxs-lookup"><span data-stu-id="f2541-179">Steps for setup</span></span>

<span data-ttu-id="f2541-180">Kaydolun ve Azure AD kimlik doğrulaması için Azure AD uygulaması ayarlayın ve Azure Media Services REST API uç noktası çağrılmadan için bir erişim belirteci edinmek için aşağıdaki adımları tamamlayın:</span><span class="sxs-lookup"><span data-stu-id="f2541-180">To register and set up an Azure AD application for Azure AD authentication, and to obtain an access token for calling the Azure Media Services REST API endpoint, complete the following steps:</span></span>

1.  <span data-ttu-id="f2541-181">İçinde [Klasik Azure portalı](http://go.microsoft.com/fwlink/?LinkID=213885), Azure AD uygulaması (örneğin, wzmediaservice) Azure AD kiracısı (örneğin, microsoft.onmicrosoft.com) kaydedin.</span><span class="sxs-lookup"><span data-stu-id="f2541-181">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) to the Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f2541-182">Web uygulaması veya yerel uygulama kayıtlı olup olmadığını önemli değildir.</span><span class="sxs-lookup"><span data-stu-id="f2541-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="f2541-183">Ayrıca, tüm oturum açma URL'si ve yanıt URL'si (örneğin, her ikisi için de http://wzmediaservice.com) seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f2541-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="f2541-184">İçinde [Klasik Azure portalı](http://go.microsoft.com/fwlink/?LinkID=213885)gidin **yapılandırma** uygulamanızın sekmesi.</span><span class="sxs-lookup"><span data-stu-id="f2541-184">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go to the **Configure** tab of your application.</span></span> <span data-ttu-id="f2541-185">Not **istemci kimliği**.</span><span class="sxs-lookup"><span data-stu-id="f2541-185">Note the **client ID**.</span></span> <span data-ttu-id="f2541-186">Ardından, altında **anahtarları**, Oluştur bir **istemci anahtar** (gizli).</span><span class="sxs-lookup"><span data-stu-id="f2541-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="f2541-187">İstemci gizli anahtarı not edin.</span><span class="sxs-lookup"><span data-stu-id="f2541-187">Take note of the client secret.</span></span> <span data-ttu-id="f2541-188">Yeniden gösterilmeyecektir.</span><span class="sxs-lookup"><span data-stu-id="f2541-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="f2541-189">İçinde [Azure portal](http://ms.portal.azure.com)Media Services hesabı'na gidin.</span><span class="sxs-lookup"><span data-stu-id="f2541-189">In the [Azure portal](http://ms.portal.azure.com), go to the Media Services account.</span></span> <span data-ttu-id="f2541-190">Seçin **erişim denetimi** (IAM) bölmesi.</span><span class="sxs-lookup"><span data-stu-id="f2541-190">Select the **Access Control** (IAM) pane.</span></span> <span data-ttu-id="f2541-191">Sahibi veya katkıda bulunan rolü sahip yeni bir üye ekleyin.</span><span class="sxs-lookup"><span data-stu-id="f2541-191">Add a new member that has either the Owner or the Contributor role.</span></span> <span data-ttu-id="f2541-192">Asıl için (Bu örnekte, wzmediaservice) 1. adımda kaydettiğiniz uygulama adını arayın.</span><span class="sxs-lookup"><span data-stu-id="f2541-192">For the principal, search for the application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-to-collect"></a><span data-ttu-id="f2541-193">Bilgi toplamak için</span><span class="sxs-lookup"><span data-stu-id="f2541-193">Info to collect</span></span>

<span data-ttu-id="f2541-194">REST kodlama hazırlamak üzere kod eklemek için aşağıdaki veri noktaları Topla:</span><span class="sxs-lookup"><span data-stu-id="f2541-194">To prepare REST coding, collect the following data points to include in the code:</span></span>

*   <span data-ttu-id="f2541-195">Bir STS uç noktası olarak Azure AD: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="f2541-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="f2541-196">Bu uç noktasından bir JWT erişim belirteci istendi.</span><span class="sxs-lookup"><span data-stu-id="f2541-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="f2541-197">Bir IDP hizmet veren ek olarak, Azure AD aynı zamanda bir STS olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="f2541-197">In addition to serving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="f2541-198">Azure AD kaynak erişimi (bir erişim belirteci) için JWT verir.</span><span class="sxs-lookup"><span data-stu-id="f2541-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="f2541-199">JWT belirteci çeşitli talep vardır.</span><span class="sxs-lookup"><span data-stu-id="f2541-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="f2541-200">Kaynak veya hedef kitle olarak Azure Media Services REST API: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="f2541-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="f2541-201">İstemci kimliği: Bkz. Adım 2'de [kurulum adımları](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f2541-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f2541-202">İstemci gizliliği: bkz: adım 2'de [kurulum adımları](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f2541-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f2541-203">Media Services REST API uç noktası şu biçimde hesap:</span><span class="sxs-lookup"><span data-stu-id="f2541-203">Your Media Services account REST API endpoint in the following format:</span></span>

    <span data-ttu-id="f2541-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="f2541-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="f2541-205">Bu karşı tüm hangi Media Services REST API çağrıları, uygulamanızda yapılan uç noktadır.</span><span class="sxs-lookup"><span data-stu-id="f2541-205">This is the endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="f2541-206">Örneğin, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="f2541-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="f2541-207">Daha sonra kodunuzda kullanmak için web.config veya app.config dosyasını, bu beş parametreleri koyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f2541-207">You can then put these five parameters in your web.config or app.config file, to use in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="f2541-208">Örnek kod</span><span class="sxs-lookup"><span data-stu-id="f2541-208">Sample code</span></span>

<span data-ttu-id="f2541-209">Örnek kodda bulabilirsiniz [Azure Media Services erişimi için Azure AD kimlik doğrulamasını: REST API aracılığıyla her ikisi de](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="f2541-209">You can find the sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="f2541-210">Örnek kod iki bölümden oluşur:</span><span class="sxs-lookup"><span data-stu-id="f2541-210">The sample code has two parts:</span></span>

*   <span data-ttu-id="f2541-211">Azure AD kimlik doğrulama ve yetkilendirme için tüm REST API koduna sahip bir DLL Kitaplığı projesi.</span><span class="sxs-lookup"><span data-stu-id="f2541-211">A DLL library project that has all the REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="f2541-212">Ayrıca, erişim belirteci ile Media Services REST API uç REST API çağrıları yapma için bir yöntem vardır.</span><span class="sxs-lookup"><span data-stu-id="f2541-212">It also has a method for making REST API calls to the Media Services REST API endpoint, with the access token.</span></span>
*   <span data-ttu-id="f2541-213">Azure AD kimlik doğrulaması başlatır ve farklı Media Services REST API çağrıları bir konsol test istemcisi.</span><span class="sxs-lookup"><span data-stu-id="f2541-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="f2541-214">Örnek Proje üç özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="f2541-214">The sample project has three features:</span></span>

*   <span data-ttu-id="f2541-215">İstemci kimlik bilgileri aracılığıyla Azure AD kimlik doğrulamaları yalnızca REST API kullanarak verirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f2541-215">Azure AD authentications via the client credentials grant by using only the REST API.</span></span>
*   <span data-ttu-id="f2541-216">Yalnızca REST API kullanarak azure Media Services erişimi.</span><span class="sxs-lookup"><span data-stu-id="f2541-216">Azure Media Services access by using only the REST API.</span></span>
*   <span data-ttu-id="f2541-217">Yalnızca REST (REST API kullanarak bir Media Services hesabı oluşturmak için kullanılan gibi) API kullanarak azure depolama erişim.</span><span class="sxs-lookup"><span data-stu-id="f2541-217">Azure Storage access by using only the REST API (as used to create a Media Services account, by using REST API).</span></span>


## <a name="where-is-the-refresh-token"></a><span data-ttu-id="f2541-218">Yenileme belirteci nerede?</span><span class="sxs-lookup"><span data-stu-id="f2541-218">Where is the refresh token?</span></span>

<span data-ttu-id="f2541-219">Bazı okuyucular isteyebilir: yenileme belirtecini nerede?</span><span class="sxs-lookup"><span data-stu-id="f2541-219">Some readers might ask: Where is the refresh token?</span></span> <span data-ttu-id="f2541-220">Neden bir yenileme belirteci burada kullanabilir?</span><span class="sxs-lookup"><span data-stu-id="f2541-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="f2541-221">Bir yenileme belirteci amacı, bir erişim belirteci yenileme değil olmaktır.</span><span class="sxs-lookup"><span data-stu-id="f2541-221">The purpose of a refresh token is not to refresh an access token.</span></span> <span data-ttu-id="f2541-222">Bunun yerine, son kullanıcı kimlik doğrulaması veya kullanıcı müdahalesi atlamak ve bir önceki belirteç süresi dolduğunda hala geçerli erişim belirteci almak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f2541-222">Instead, it is designed to bypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="f2541-223">Bir yenileme belirteci için daha iyi bir adı "kullanıcı yeniden-oturumu açma belirteci atlama."gibi bir şey olabilir</span><span class="sxs-lookup"><span data-stu-id="f2541-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="f2541-224">Yetki akış (kullanıcı adı ve parola, bir kullanıcı adına hareket) OAuth 2.0 kullanıyorsanız, yenileme belirteci, kullanıcı müdahalesi gerektirmeden yenilenmiş bir erişim belirteci almak yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="f2541-224">If you use the OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="f2541-225">Ancak, biz bu makalede açıklamak akış istemci kimlik bilgileri vermenizi OAuth 2.0 için istemci kendi adına hareket eder.</span><span class="sxs-lookup"><span data-stu-id="f2541-225">However, for the OAuth 2.0 client credentials grant flow that we describe in this article, the client acts on its own behalf.</span></span> <span data-ttu-id="f2541-226">Hiçbir kullanıcı etkileşimi gerekmez ve yetkilendirme sunucusu, bir yenileme belirteci vermek gerekmez ve olmaz.</span><span class="sxs-lookup"><span data-stu-id="f2541-226">You don't need user intervention at all, and the authorization server doesn't need to (and won't) give you a refresh token.</span></span> <span data-ttu-id="f2541-227">Hata ayıklama, **GetUrlEncodedJWT** yöntemi, fark belirteç uç noktası yanıttan bir erişim belirteci ancak herhangi bir yenileme belirteci sahiptir.</span><span class="sxs-lookup"><span data-stu-id="f2541-227">If you debug the **GetUrlEncodedJWT** method, you notice that the response from the token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f2541-228">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="f2541-228">Next steps</span></span>

<span data-ttu-id="f2541-229">Kullanmaya başlama [dosyaları hesabınıza Yükleniyor](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="f2541-229">Get started with [uploading files to your account](media-services-dotnet-upload-files.md).</span></span>
