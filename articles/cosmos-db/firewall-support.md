---
title: "aaaAzure Cosmos DB güvenlik duvarı desteği & IP erişim denetimi | Microsoft Docs"
description: "Azure Cosmos DB veritabanı hesaplarında toouse IP erişim denetimi İlkeleri Güvenlik Duvarı için nasıl destek bilgi edinin."
keywords: "IP erişim denetimi, güvenlik duvarı desteği"
services: cosmos-db
author: shahankur11
manager: jhubbard
editor: 
tags: azure-resource-manager
documentationcenter: 
ms.assetid: c1b9ede0-ed93-411a-ac9a-62c113a8e887
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/22/2017
ms.author: ankshah
ms.openlocfilehash: b5cdbdb28e9d7ee0fd0ea54aad277167b699929f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-firewall-support"></a><span data-ttu-id="d413a-104">Azure Cosmos DB güvenlik duvarı desteği</span><span class="sxs-lookup"><span data-stu-id="d413a-104">Azure Cosmos DB firewall support</span></span>
<span data-ttu-id="d413a-105">bir Azure Cosmos DB veritabanı hesapta depolanan toosecure verileri Azure Cosmos DB sağlanan destek dayalı bir gizlilik için [yetkilendirme modelini](https://msdn.microsoft.com/library/azure/dn783368.aspx) güçlü karma tabanlı ileti kimlik doğrulama kodu (HMAC) kullanır.</span><span class="sxs-lookup"><span data-stu-id="d413a-105">toosecure data stored in an Azure Cosmos DB database account, Azure Cosmos DB has provided support for a secret based [authorization model](https://msdn.microsoft.com/library/azure/dn783368.aspx) that utilizes a strong Hash-based message authentication code (HMAC).</span></span> <span data-ttu-id="d413a-106">Şimdi, ayrıca yetkilendirme modelini toohello gizli alan, gelen güvenlik duvarı desteği için IP tabanlı erişim denetimlerini güdümlü İlkesi Azure Cosmos DB destekler.</span><span class="sxs-lookup"><span data-stu-id="d413a-106">Now, in addition toohello secret based authorization model, Azure Cosmos DB supports policy driven IP-based access controls for inbound firewall support.</span></span> <span data-ttu-id="d413a-107">Bu model geleneksel veritabanı sisteminin çok benzer toohello güvenlik duvarı kuralları ve güvenlik toohello Azure Cosmos DB veritabanı hesabı, ek bir düzeyi sağlar.</span><span class="sxs-lookup"><span data-stu-id="d413a-107">This model is very similar toohello firewall rules of a traditional database system and provides an additional level of security toohello Azure Cosmos DB database account.</span></span> <span data-ttu-id="d413a-108">Bu modelde, şimdi bir Azure Cosmos DB veritabanı hesabı toobe yalnızca onaylanan bir makineler kümesinden erişilebilir yapılandırmak ve/veya Bulut Hizmetleri.</span><span class="sxs-lookup"><span data-stu-id="d413a-108">With this model, you can now configure an Azure Cosmos DB database account toobe accessible only from an approved set of machines and/or cloud services.</span></span> <span data-ttu-id="d413a-109">Bu makineler ve hizmetler onaylanan kümeleri tooAzure Cosmos DB kaynaklarına erişim hala hello arayan toopresent geçerli bir yetkilendirme belirteci gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d413a-109">Access tooAzure Cosmos DB resources from these approved sets of machines and services still require hello caller toopresent a valid authorization token.</span></span>

## <a name="ip-access-control-overview"></a><span data-ttu-id="d413a-110">IP erişim denetimine genel bakış</span><span class="sxs-lookup"><span data-stu-id="d413a-110">IP access control overview</span></span>
<span data-ttu-id="d413a-111">Varsayılan olarak, bir Azure Cosmos DB veritabanı hesabı Hello isteği tarafından geçerli bir yetkilendirme belirteci eşlik sürece, genel internet'ten erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="d413a-111">By default, an Azure Cosmos DB database account is accessible from public internet as long as hello request is accompanied by a valid authorization token.</span></span> <span data-ttu-id="d413a-112">tooconfigure IP ilke tabanlı erişim denetimi, hello kullanıcı IP adreslerini veya CIDR form toobe izin verilen veritabanı hesabı için istemci IP listesi hello olarak eklenen IP adres aralıklarını hello kümesi sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d413a-112">tooconfigure IP policy-based access control, hello user must provide hello set of IP addresses or IP address ranges in CIDR form toobe included as hello allowed list of client IPs for a given database account.</span></span> <span data-ttu-id="d413a-113">Bu yapılandırma uygulandıktan sonra bu izin verilenler dışında makinelerden kaynaklanan tüm istekler hello sunucu tarafından engellenir.</span><span class="sxs-lookup"><span data-stu-id="d413a-113">Once this configuration is applied, all requests originating from machines outside this allowed list will be blocked by hello server.</span></span>  <span data-ttu-id="d413a-114">Merhaba IP tabanlı erişim denetimi için akışı işleme hello bağlantı diyagramı aşağıdaki hello tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="d413a-114">hello connection processing flow for hello IP-based access control is described in hello following diagram.</span></span>

![IP tabanlı erişim denetimi için Hello bağlantı işlemini gösteren diyagram](./media/firewall-support/firewall-support-flow.png)

## <a name="connections-from-cloud-services"></a><span data-ttu-id="d413a-116">Bulut hizmetleri gelen bağlantıları</span><span class="sxs-lookup"><span data-stu-id="d413a-116">Connections from cloud services</span></span>
<span data-ttu-id="d413a-117">Azure'da, bulut Hizmetleri Azure Cosmos DB kullanan Orta katman hizmet mantığı barındırmak için bir çok yaygın bir yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="d413a-117">In Azure, cloud services are a very common way for hosting middle tier service logic using Azure Cosmos DB.</span></span> <span data-ttu-id="d413a-118">tooenable erişim tooan bir bulut hizmetinden Azure Cosmos DB veritabanı hesabı, hello genel IP adresi hello bulut hizmeti tarafından Azure Cosmos DB veritabanı hesabınızla ilişkili IP adreslerinin listesi izin eklenen toohello olmalıdır [yapılandırma Merhaba IP erişim denetimi ilkesini](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="d413a-118">tooenable access tooan Azure Cosmos DB database account from a cloud service, hello public IP address of hello cloud service must be added toohello allowed list of IP addresses associated with your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span>  <span data-ttu-id="d413a-119">Bu, bulut Hizmetleri tüm rol örneklerini erişim tooyour Azure Cosmos DB veritabanı hesabı sahip olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="d413a-119">This ensures that all role instances of cloud services have access tooyour Azure Cosmos DB database account.</span></span> <span data-ttu-id="d413a-120">Hello ekran aşağıdaki gösterildiği gibi hello Azure portalında, bulut hizmetlerinizde için IP adreslerini alabilir.</span><span class="sxs-lookup"><span data-stu-id="d413a-120">You can retrieve IP addresses for your cloud services in hello Azure portal, as shown in hello following screenshot.</span></span>

![Hello Azure portalında görüntülenen bir bulut hizmeti için genel IP adresi Hello gösteren ekran görüntüsü](./media/firewall-support/public-ip-addresses.png)

<span data-ttu-id="d413a-122">Ek rol örnekleri ekleyerek, bulut hizmetinin ölçeğini olduğunda, bu yeni örnekleri otomatik olarak erişim toohello Azure Cosmos DB veritabanı hesabı sahip hello parçası olduğu aynı bulut hizmeti.</span><span class="sxs-lookup"><span data-stu-id="d413a-122">When you scale out your cloud service by adding additional role instance(s), those new instances will automatically have access toohello Azure Cosmos DB database account since they are part of hello same cloud service.</span></span>

## <a name="connections-from-virtual-machines"></a><span data-ttu-id="d413a-123">Sanal makinelerden bağlantıları</span><span class="sxs-lookup"><span data-stu-id="d413a-123">Connections from virtual machines</span></span>
<span data-ttu-id="d413a-124">[Sanal makineler](https://azure.microsoft.com/services/virtual-machines/) veya [sanal makine ölçek kümeleri](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) kullanılan toohost Azure Cosmos DB kullanarak orta katman hizmetleri de olabilir.</span><span class="sxs-lookup"><span data-stu-id="d413a-124">[Virtual machines](https://azure.microsoft.com/services/virtual-machines/) or [virtual machine scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) can also be used toohost middle tier services using Azure Cosmos DB.</span></span>  <span data-ttu-id="d413a-125">tooconfigure hello Azure Cosmos DB veritabanı hesabı tooallow erişimi sanal makineler, sanal makine ve/veya sanal makine ölçek kümesi genel IP adreslerine izin verilen IP adreslerini Azure Cosmos DB veritabanı hesabınızın hello biri olarak yapılandırılması gerekir [hello IP erişim denetimi ilkesini yapılandırma](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="d413a-125">tooconfigure hello Azure Cosmos DB database account tooallow access from virtual machines, public IP addresses of virtual machine and/or virtual machine scale set must be configured as one of hello allowed IP addresses for your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span> <span data-ttu-id="d413a-126">Hello ekran aşağıdaki gösterildiği gibi hello Azure portal, sanal makineler için IP adresleri geri alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d413a-126">You can retrieve IP addresses for virtual machines in hello Azure portal, as shown in hello following screenshot.</span></span>

![Hello Azure portalında görüntülenen bir sanal makine için genel bir IP adresi gösteren ekran görüntüsü](./media/firewall-support/public-ip-addresses-dns.png)

<span data-ttu-id="d413a-128">Ek sanal makine örnekleri toohello grup eklediğinizde, bunlar otomatik olarak erişim tooyour Azure Cosmos DB veritabanı hesabı sağlanır.</span><span class="sxs-lookup"><span data-stu-id="d413a-128">When you add additional virtual machine instances toohello group, they are automatically provided access tooyour Azure Cosmos DB database account.</span></span>

## <a name="connections-from-hello-internet"></a><span data-ttu-id="d413a-129">Internet bağlantılarını hello</span><span class="sxs-lookup"><span data-stu-id="d413a-129">Connections from hello internet</span></span>
<span data-ttu-id="d413a-130">Bir Azure Cosmos DB üzerinde bir bilgisayar hesabını veritabanı erişimi Merhaba, Internet hello istemci IP adresi veya IP adresi aralığı hello makinenin izin verilen hello Azure Cosmos DB veritabanı hesabı için bir IP adresi listesine eklenen toohello olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d413a-130">When you access an Azure Cosmos DB database account from a computer on hello internet, hello client IP address or IP address range of hello machine must be added toohello allowed list of IP address for hello Azure Cosmos DB database account.</span></span> 

## <span data-ttu-id="d413a-131"><a id="configure-ip-policy"></a>Merhaba IP erişim denetimi ilkesini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d413a-131"><a id="configure-ip-policy"></a> Configuring hello IP access control policy</span></span>
<span data-ttu-id="d413a-132">Merhaba IP erişim denetimi ilkesini hello Azure portal ayarlanabilir veya üzerinden programlı olarak [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), veya hello [REST API](/rest/api/documentdb/) hello güncelleştirerek`ipRangeFilter` özelliği.</span><span class="sxs-lookup"><span data-stu-id="d413a-132">hello IP access control policy can be set in hello Azure portal, or programmatically through [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), or hello [REST API](/rest/api/documentdb/) by updating hello `ipRangeFilter` property.</span></span> <span data-ttu-id="d413a-133">IP adresleri/aralıklarına virgülle ayrılmış ve boşluk içermemelidir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d413a-133">IP addresses/ranges must be comma separated and must not contain any spaces.</span></span> <span data-ttu-id="d413a-134">Örnek: "13.91.6.132,13.91.6.1/24".</span><span class="sxs-lookup"><span data-stu-id="d413a-134">Example: "13.91.6.132,13.91.6.1/24".</span></span> <span data-ttu-id="d413a-135">Veritabanı hesabınızı bu yöntemlerle güncelleştirirken emin toopopulate olması tüm hello özellikleri tooprevent toodefault ayarları sıfırlanıyor.</span><span class="sxs-lookup"><span data-stu-id="d413a-135">When updating your database account through these methods, be sure toopopulate all of hello properties tooprevent resetting toodefault settings.</span></span>

> [!NOTE]
> <span data-ttu-id="d413a-136">Tüm erişim tooyour yapılandırılmış hello dışında makinelerden Azure Cosmos DB veritabanı hesabı, Azure Cosmos DB veritabanı hesabınız için bir IP erişim denetimi İlkesi etkinleştirerek, IP adresi aralıkları listesi engellendi izin verilen.</span><span class="sxs-lookup"><span data-stu-id="d413a-136">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="d413a-137">Bu model, hello veri düzlemi işlemi hello portalından gözatma de engellenen tooensure hello bütünlüğü erişim denetimi.</span><span class="sxs-lookup"><span data-stu-id="d413a-137">By virtue of this model, browsing hello data plane operation from hello portal will also be blocked tooensure hello integrity of access control.</span></span>

<span data-ttu-id="d413a-138">toosimplify geliştirme hello Azure portal belirleyip makinenizde çalışan uygulamalar hello Azure Cosmos DB hesap erişebilmesi için listesi, izin verilen, istemci makine toohello hello IP'sini ekleyin yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="d413a-138">toosimplify development, hello Azure portal helps you identify and add hello IP of your client machine toohello allowed list, so that apps running your machine can access hello Azure Cosmos DB account.</span></span> <span data-ttu-id="d413a-139">Merhaba istemci IP adresi burada hello portal tarafından görülen algılandığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d413a-139">Note that hello client IP address here is detected as seen by hello portal.</span></span> <span data-ttu-id="d413a-140">Makinenizin hello istemci IP adresi olabilir, ancak ağ geçidinizin hello IP adresi olabilir.</span><span class="sxs-lookup"><span data-stu-id="d413a-140">It may be hello client IP address of your machine, but it could also be hello IP address of your network gateway.</span></span> <span data-ttu-id="d413a-141">Tooremove unutmadığınızdan giderek tooproduction önce.</span><span class="sxs-lookup"><span data-stu-id="d413a-141">Do not forget tooremove it before going tooproduction.</span></span>

<span data-ttu-id="d413a-142">tooset hello IP erişim denetimi ilkesini hello Azure portal'ı tıklatın, toohello Azure Cosmos DB hesabı dikey gidin **Güvenlik Duvarı** hello Gezinti menüsünde ardından **ON**</span><span class="sxs-lookup"><span data-stu-id="d413a-142">tooset hello IP access control policy in hello Azure portal, navigate toohello Azure Cosmos DB account blade, click **Firewall** in hello navigation menu, then click **ON**</span></span> 

![Nasıl tooopen hello güvenlik duvarı dikey penceresinde hello Azure portal gösteren ekran görüntüsü](./media/firewall-support/azure-portal-firewall.png)

<span data-ttu-id="d413a-144">Merhaba yeni bölmesinde hello Azure portal erişim hello hesabı ve diğer adresleri ve aralıkları uygun şekilde ekleyin, sonra tıklatın olup olmadığını belirtin **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="d413a-144">In hello new pane, specify whether hello Azure portal can access hello account, and add other addresses and ranges as appropriate, then click **Save**.</span></span>  

> [!NOTE]
> <span data-ttu-id="d413a-145">Bir IP erişim denetimi İlkesi etkinleştirdiğinizde, Azure portal toomaintain erişim hello için tooadd başlangıç IP adresi gerekir.</span><span class="sxs-lookup"><span data-stu-id="d413a-145">When you enable an IP access control policy, you need tooadd hello IP address for hello Azure portal toomaintain access.</span></span> <span data-ttu-id="d413a-146">Merhaba portal IP adresleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="d413a-146">hello portal IP addresses are:</span></span>
> |<span data-ttu-id="d413a-147">Bölge</span><span class="sxs-lookup"><span data-stu-id="d413a-147">Region</span></span>|<span data-ttu-id="d413a-148">IP adresi</span><span class="sxs-lookup"><span data-stu-id="d413a-148">IP address</span></span>|
> |------|----------|
> |<span data-ttu-id="d413a-149">Tüm bölgeler aşağıda belirtilen hariç</span><span class="sxs-lookup"><span data-stu-id="d413a-149">All regions except those specified below</span></span>| <span data-ttu-id="d413a-150">104.42.195.92</span><span class="sxs-lookup"><span data-stu-id="d413a-150">104.42.195.92</span></span>|
> |<span data-ttu-id="d413a-151">Almanya</span><span class="sxs-lookup"><span data-stu-id="d413a-151">Germany</span></span>|<span data-ttu-id="d413a-152">51.4.229.218</span><span class="sxs-lookup"><span data-stu-id="d413a-152">51.4.229.218</span></span>|
> |<span data-ttu-id="d413a-153">Çin</span><span class="sxs-lookup"><span data-stu-id="d413a-153">China</span></span>|<span data-ttu-id="d413a-154">139.217.8.252</span><span class="sxs-lookup"><span data-stu-id="d413a-154">139.217.8.252</span></span>|
> |<span data-ttu-id="d413a-155">ABD Devleti Arizona</span><span class="sxs-lookup"><span data-stu-id="d413a-155">US Gov Arizona</span></span>|<span data-ttu-id="d413a-156">52.244.48.71</span><span class="sxs-lookup"><span data-stu-id="d413a-156">52.244.48.71</span></span>|
>

![Bir nasıl gösteren ekran görüntüsü tooconfigure Güvenlik Duvarı ayarlarında hello Azure portalı](./media/firewall-support/azure-portal-firewall-configure.png)

## <a name="troubleshooting-hello-ip-access-control-policy"></a><span data-ttu-id="d413a-158">Merhaba IP erişim denetimi İlkesi sorun giderme</span><span class="sxs-lookup"><span data-stu-id="d413a-158">Troubleshooting hello IP access control policy</span></span>
### <a name="portal-operations"></a><span data-ttu-id="d413a-159">Portal işlemleri</span><span class="sxs-lookup"><span data-stu-id="d413a-159">Portal operations</span></span>
<span data-ttu-id="d413a-160">Tüm erişim tooyour yapılandırılmış hello dışında makinelerden Azure Cosmos DB veritabanı hesabı, Azure Cosmos DB veritabanı hesabınız için bir IP erişim denetimi İlkesi etkinleştirerek, IP adresi aralıkları listesi engellendi izin verilen.</span><span class="sxs-lookup"><span data-stu-id="d413a-160">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="d413a-161">Koleksiyonlar ve sorgu belgeleri gözatma gibi tooenable portal veri düzlemi işlemler istiyorsanız, bu nedenle tooexplicitly gerekir hello kullanarak Azure portal erişime izin **Güvenlik Duvarı** dikey penceresinde hello portal.</span><span class="sxs-lookup"><span data-stu-id="d413a-161">Therefore if you want tooenable portal data plane operations like browsing collections and query documents, you need tooexplicitly allow Azure portal access using hello **Firewall** blade in hello portal.</span></span> 

![Bir nasıl gösteren ekran görüntüsü tooenable erişim toohello Azure portalı](./media/firewall-support/azure-portal-access-firewall.png)

### <a name="sdk--rest-api"></a><span data-ttu-id="d413a-163">SDK & Rest API'si</span><span class="sxs-lookup"><span data-stu-id="d413a-163">SDK & Rest API</span></span>
<span data-ttu-id="d413a-164">Güvenlik nedeniyle, SDK veya REST API aracılığıyla erişime izin verilen listesine hello makinelerde karşı genel 404 bulunamadı yanıtta başka ek ayrıntı döndürülecek için.</span><span class="sxs-lookup"><span data-stu-id="d413a-164">For security reasons, access via SDK or REST API from machines not on hello allowed list will return a generic 404 Not Found response with no additional details.</span></span> <span data-ttu-id="d413a-165">Merhaba IP Azure Cosmos DB veritabanı hesap tooensure hello doğru ilke yapılandırmanızı için yapılandırılan listesinden uygulanan tooyour Azure Cosmos DB veritabanı hesabı izin verilen doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="d413a-165">Please verify hello IP allowed list configured for your Azure Cosmos DB database account tooensure hello correct policy configuration is applied tooyour Azure Cosmos DB database account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d413a-166">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="d413a-166">Next steps</span></span>
<span data-ttu-id="d413a-167">Ağ hakkında bilgi için ilgili performans ipuçları, bkz: [performans ipuçları](performance-tips.md).</span><span class="sxs-lookup"><span data-stu-id="d413a-167">For information about network related performance tips, see [Performance tips](performance-tips.md).</span></span>

