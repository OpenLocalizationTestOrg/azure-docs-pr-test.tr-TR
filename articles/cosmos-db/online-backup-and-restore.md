---
title: "aaaOnline yedekleme ve geri yükleme ile Azure Cosmos DB | Microsoft Docs"
description: "Bilgi nasıl tooperform otomatik yedekleme ve geri yükleme, bir Azure Cosmos DB veritabanı."
keywords: "Yedekleme ve geri yükleme, çevrimiçi yedekleme"
services: cosmos-db
documentationcenter: 
author: RahulPrasad16
manager: jhubbard
editor: monicar
ms.assetid: 98eade4a-7ef4-4667-b167-6603ecd80b79
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/11/2017
ms.author: raprasa
ms.openlocfilehash: a0b464c95681dfc7b5462b02bf04c2c43d6bc16f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-online-backup-and-restore-with-azure-cosmos-db"></a><span data-ttu-id="44b2f-104">Otomatik çevrimiçi yedekleme ve geri yükleme ile Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="44b2f-104">Automatic online backup and restore with Azure Cosmos DB</span></span>
<span data-ttu-id="44b2f-105">Azure Cosmos DB tüm verilerinizi yedeklerini düzenli aralıklarla otomatik olarak alır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-105">Azure Cosmos DB automatically takes backups of all your data at regular intervals.</span></span> <span data-ttu-id="44b2f-106">Merhaba otomatik yedeklemeler hello performans veya veritabanı işlemlerinizin kullanılabilirliğini etkilemeden alınır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-106">hello automatic backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="44b2f-107">Tüm yedeklemeler ayrı olarak başka bir depolama hizmetinde depolanır ve bu yedekleri bölgesel afetler karşı dayanıklılık için genel olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-107">All your backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span></span> <span data-ttu-id="44b2f-108">yanlışlıkla Comos DB kapsayıcı sildiğinizde ve daha sonra veri kurtarma veya bir olağanüstü durum kurtarma çözümü gerektiren hello otomatik yedekleme senaryoları için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-108">hello automatic backups are intended for scenarios when you accidentally delete your Comos DB container and later require data recovery or a disaster recovery solution.</span></span>  

<span data-ttu-id="44b2f-109">Bu makalede hızlı bir özeti hello veri artıklık ve kullanılabilirlik Cosmos DB'de ile başlayan ve yedeklemeleri ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-109">This article starts with a quick recap of hello data redundancy and availability in Cosmos DB, and then discusses backups.</span></span> 

## <a name="high-availability-with-cosmos-db---a-recap"></a><span data-ttu-id="44b2f-110">Cosmos DB - bir özeti ile yüksek kullanılabilirlik</span><span class="sxs-lookup"><span data-stu-id="44b2f-110">High availability with Cosmos DB - a recap</span></span>
<span data-ttu-id="44b2f-111">Cosmos DB olduğu tasarlanmış toobe [Genel dağıtılmış](distribute-data-globally.md) –, yük devretme ve saydam çok girişli API'leri güdümlü İlkesi ile birlikte birden çok Azure bölgeler arasında tooscale verimlilik sağlar.</span><span class="sxs-lookup"><span data-stu-id="44b2f-111">Cosmos DB is designed toobe [globally distributed](distribute-data-globally.md) – it allows you tooscale throughput across multiple Azure regions along with policy driven failover and transparent multi-homing APIs.</span></span> <span data-ttu-id="44b2f-112">Bir veritabanı sistem sunumu olarak [% 99,99 kullanılabilirlik SLA](https://azure.microsoft.com/support/legal/sla/cosmos-db), Cosmos DB'de tüm hello yazma işlemi taahhüt toolocal çoğaltmalarının bir yerel veri merkezi içinde bir çekirdek tarafından toohello istemci bildirmeden disklerdir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-112">As a database system offering [99.99% availability SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db), all hello writes in Cosmos DB are durably committed toolocal disks by a quorum of replicas within a local data center before acknowledging toohello client.</span></span> <span data-ttu-id="44b2f-113">Cosmos DB yüksek kullanılabilirliğini Hello yerel depolama biriminde bulunan güvenir ve hiçbir harici depolama teknolojileri bağlı değildir unutmayın.</span><span class="sxs-lookup"><span data-stu-id="44b2f-113">Note that hello high availability of Cosmos DB relies on local storage and does not depend on any external storage technologies.</span></span> <span data-ttu-id="44b2f-114">Ayrıca, veritabanı hesabınızı birden fazla Azure bölgesiyle ilişkiliyse, yazma diğer bölgeler arasında çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-114">Additionally, if your database account is associated with more than one Azure region, your writes are replicated across other regions as well.</span></span> <span data-ttu-id="44b2f-115">tooscale birçok dilediğiniz şekilde veritabanı hesabınızla ilişkili bölgeler salt okunur, üretilen iş ve erişim verilerinizi en düşük gecikme olabilir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-115">tooscale your throughput and access data at low latencies, you can have as many read regions associated with your database account as you like.</span></span> <span data-ttu-id="44b2f-116">Okuma her bölgede (Yinelenmiş) hello veri çoğaltma kümesi boyunca işlemi kalıcıdır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-116">In each read region, hello (replicated) data is durably persisted across a replica set.</span></span>  

<span data-ttu-id="44b2f-117">Hello Aşağıdaki diyagramda gösterildiği gibi bir tek Cosmos DB kapsayıcıdır [yatay olarak bölümlenmiş](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="44b2f-117">As illustrated in hello following diagram, a single Cosmos DB container is [horizontally partitioned](partition-data.md).</span></span> <span data-ttu-id="44b2f-118">"Bölüm" diyagramı aşağıdaki hello içinde bir daire gösterilir ve her bölüm bir çoğaltma kümesi yüksek oranda kullanılabilir hale gelir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-118">A “partition” is denoted by a circle in hello following diagram, and each partition is made highly available via a replica set.</span></span> <span data-ttu-id="44b2f-119">Yerel bir dağıtım hello (Merhaba X ekseni tarafından gösterilen) tek bir Azure bölgesi içinde budur.</span><span class="sxs-lookup"><span data-stu-id="44b2f-119">This is hello local distribution within a single Azure region (denoted by hello X axis).</span></span> <span data-ttu-id="44b2f-120">Ayrıca, her bölüm (karşılık gelen çoğaltma kümesi) sonra genel veritabanı hesabınızı (örneğin, bu çizimde hello üç Bölgeler – Doğu ABD, Batı ABD ve orta Hindistan) ile ilişkili birden çok bölgeye dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-120">Further, each partition (with its corresponding replica set) is then globally distributed across multiple regions associated with your database account (for example, in this illustration hello three regions – East US, West US and Central India).</span></span> <span data-ttu-id="44b2f-121">Merhaba "bölüm kümesi" Genel dağıtılmış olduğu varlık verilerinizi (Merhaba Y ekseni tarafından gösterilen) her bölgede birden çok kopyasını kapsayan.</span><span class="sxs-lookup"><span data-stu-id="44b2f-121">hello “partition set” is a globally distributed entity comprising of multiple copies of your data in each region (denoted by hello Y axis).</span></span> <span data-ttu-id="44b2f-122">Veritabanı hesabınızla ilişkili toohello bölgeler öncelik atayabilirsiniz ve Cosmos DB olacak saydam yük devretme toohello sonraki bölgeyi olağanüstü durum durumunda.</span><span class="sxs-lookup"><span data-stu-id="44b2f-122">You can assign priority toohello regions associated with your database account and Cosmos DB will transparently failover toohello next region in case of disaster.</span></span> <span data-ttu-id="44b2f-123">El ile de yük devretme tootest hello uçtan uca kullanılabilirlik uygulamanızın benzetimini de yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="44b2f-123">You can also manually simulate failover tootest hello end-to-end availability of your application.</span></span>  

<span data-ttu-id="44b2f-124">Merhaba aşağıdaki görüntüde artıklık Cosmos DB ile yüksek derecede hello gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-124">hello following image illustrates hello high degree of redundancy with Cosmos DB.</span></span>

![Yüksek düzeyde artıklık Cosmos DB ile](./media/online-backup-and-restore/redundancy.png)

![Yüksek düzeyde artıklık Cosmos DB ile](./media/online-backup-and-restore/global-distribution.png)

## <a name="full-automatic-online-backups"></a><span data-ttu-id="44b2f-127">Tam otomatik, çevrimiçi yedeklemeleri</span><span class="sxs-lookup"><span data-stu-id="44b2f-127">Full, automatic, online backups</span></span>
<span data-ttu-id="44b2f-128">Hata, ı my kapsayıcı veya veritabanı silindi!</span><span class="sxs-lookup"><span data-stu-id="44b2f-128">Oops, I deleted my container or database!</span></span> <span data-ttu-id="44b2f-129">Cosmos DB ile yalnızca, veriler, ancak hello yedekleme verilerinizin yüksek oranda yedekli ve esnek tooregional olağanüstü da yapılır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-129">With Cosmos DB, not only your data, but hello backups of your data are also made highly redundant and resilient tooregional disasters.</span></span> <span data-ttu-id="44b2f-130">Bu otomatik yedeklemeler şu anda yaklaşık dört saat alınır ve her zaman en son 2 yedeklemeler depolanır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-130">These automated backups are currently taken approximately every four hours and latest 2 backups are stored at all times.</span></span> <span data-ttu-id="44b2f-131">Merhaba veri yanlışlıkla ise bırakılan veya bozuk, lütfen [Azure desteğine başvurun](https://azure.microsoft.com/support/options/) 8 saat içinde.</span><span class="sxs-lookup"><span data-stu-id="44b2f-131">If hello data is accidently dropped or corrupted, please [contact Azure support](https://azure.microsoft.com/support/options/) within 8 hours.</span></span> 

<span data-ttu-id="44b2f-132">Merhaba yedeklemeleri hello performans veya veritabanı işlemlerinizin kullanılabilirliğini etkilemeden alınır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-132">hello backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="44b2f-133">Cosmos DB hello yedekleme sağlanan RUs kullanma veya hello performansını etkileyen olmadan ve veritabanınızı hello kullanılabilirliğini etkilemeden hello arka planda alır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-133">Cosmos DB takes hello backup in hello background without consuming your provisioned RUs or affecting hello performance and without affecting hello availability of your database.</span></span> 

<span data-ttu-id="44b2f-134">Cosmos DB içinde depolanan farklı olarak, verilerinizin hello otomatik yedeklemeler, Azure Blob Storage hizmetinde depolanır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-134">Unlike your data that is stored inside Cosmos DB, hello automatic backups are stored in Azure Blob Storage service.</span></span> <span data-ttu-id="44b2f-135">tooguarantee hello düşük gecikme/verimli karşıya yükleme, yedeklemenin hello anlık görüntüsüdür Azure Blob depolama alanına karşıya yüklenen tooan örneğini hello hello geçerli yazma bölge Cosmos DB veritabanı hesabının aynı bölgede.</span><span class="sxs-lookup"><span data-stu-id="44b2f-135">tooguarantee hello low latency/efficient upload, hello snapshot of your backup is uploaded tooan instance of Azure Blob storage in hello same region as hello current write region of your Cosmos DB database account.</span></span> <span data-ttu-id="44b2f-136">Bölgesel olağanüstü durum karşı dayanıklılık için Azure Blob Depolama, yedekleme verilerinizin her anlık görüntü yeniden coğrafi olarak yedekli depolama (GRS) tooanother bölge çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-136">For resiliency against regional disaster, each snapshot of your backup data in Azure Blob Storage is again replicated via geo-redundant storage (GRS) tooanother region.</span></span> <span data-ttu-id="44b2f-137">Merhaba Aşağıdaki diyagramda hello tüm Cosmos DB kapsayıcıyla (üç birincil içindeki tüm bölümlerin Batı ABD, bu örnekte) Batı ABD uzak bir Azure Blob Storage hesabında yedeklenir ve ardından GRS tooEast BİZE kopyalandığı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-137">hello following diagram shows that hello entire Cosmos DB container (with all three primary partitions in West US, in this example) is backed up in a remote Azure Blob Storage account in West US and then GRS replicated tooEast US.</span></span> 

<span data-ttu-id="44b2f-138">Merhaba aşağıdaki görüntüde GRS Azure depolama birimindeki tüm Cosmos DB varlıkların düzenli tam yedeklemeler gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-138">hello following image illustrates periodic full backups of all Cosmos DB entities in GRS Azure Storage.</span></span>

![Tüm Cosmos DB varlıkların GRS Azure storage'da düzenli tam yedeklemeler](./media/online-backup-and-restore/automatic-backup.png)

## <a name="backup-retention-period"></a><span data-ttu-id="44b2f-140">Yedekleme saklama süresi</span><span class="sxs-lookup"><span data-stu-id="44b2f-140">Backup retention period</span></span>
<span data-ttu-id="44b2f-141">Yukarıda açıklandığı gibi Azure Cosmos DB dört saatte verilerinizin anlık görüntüleri alır ve her bölümün hello son iki anlık görüntü 30 gün boyunca korur.</span><span class="sxs-lookup"><span data-stu-id="44b2f-141">As described above, Azure Cosmos DB takes snapshots of your data every four hours and retains hello last two snapshots of every partition for 30 days.</span></span> <span data-ttu-id="44b2f-142">Bizim uyumluluk düzenlemeleri anlık görüntüleri 90 gün sonra temizlenir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-142">Per our compliance regulations, snapshots are purged after 90 days.</span></span>

<span data-ttu-id="44b2f-143">Kendi anlık görüntüleri toomaintain istiyorsanız hello verme tooJSON seçeneği hello Azure Cosmos DB kullanabilirsiniz [veri geçiş aracı](import-data.md#export-to-json-file) tooschedule ek yedeklemeler.</span><span class="sxs-lookup"><span data-stu-id="44b2f-143">If you want toomaintain your own snapshots, you can use hello export tooJSON option in hello Azure Cosmos DB [Data Migration tool](import-data.md#export-to-json-file) tooschedule additional backups.</span></span> 

## <a name="restoring-a-database-from-an-online-backup"></a><span data-ttu-id="44b2f-144">Bir veritabanı çevrimiçi bir yedekten geri yükleme</span><span class="sxs-lookup"><span data-stu-id="44b2f-144">Restoring a database from an online backup</span></span>
<span data-ttu-id="44b2f-145">Veritabanı veya koleksiyon yanlışlıkla silerseniz, şunları yapabilirsiniz [bir destek bileti dosya](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) veya [Azure destek çağrısı](https://azure.microsoft.com/support/options/) hello son otomatik yedekleme toorestore hello verileri.</span><span class="sxs-lookup"><span data-stu-id="44b2f-145">If you accidentally delete your database or collection, you can [file a support ticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) or [call Azure support](https://azure.microsoft.com/support/options/) toorestore hello data from hello last automatic backup.</span></span> <span data-ttu-id="44b2f-146">Veri bozulması sorunları nedeniyle veritabanınıza toorestore gerekiyorsa, bkz: [veri bozulması işleme](#handling-data-corruption) gerektiği tootake ek tooprevent hello bozuk veri penetrating hello yedeklemelerden adımları.</span><span class="sxs-lookup"><span data-stu-id="44b2f-146">If you need toorestore your database because of data corruption issue, see [Handling data corruption](#handling-data-corruption) as you need tootake additional steps tooprevent hello corrupted data from penetrating hello backups.</span></span> <span data-ttu-id="44b2f-147">Belirli bir anlık görüntüsünü geri, yedekleme toobe için hello veri hello süre hello yedekleme döngüsü bu anlık görüntü için kullanılabilir olduğunu Cosmos DB gerektirir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-147">For a specific snapshot of your backup toobe restored, Cosmos DB requires that hello data was available for hello duration of hello backup cycle for that snapshot.</span></span>

## <a name="handling-data-corruption"></a><span data-ttu-id="44b2f-148">Veri bozulması işleme</span><span class="sxs-lookup"><span data-stu-id="44b2f-148">Handling data corruption</span></span>
<span data-ttu-id="44b2f-149">Azure Cosmos DB hello son iki yedekleme her bölümün hello sistemde korur.</span><span class="sxs-lookup"><span data-stu-id="44b2f-149">Azure Cosmos DB retains hello last two backups of every partition in hello system.</span></span> <span data-ttu-id="44b2f-150">Merhaba son sürümlerinden birini geri bu yana bir kapsayıcı (belgeler, grafik, tablo koleksiyonu) veya bir veritabanı yanlışlıkla silindiğinde, bu model çok iyi çalışır.</span><span class="sxs-lookup"><span data-stu-id="44b2f-150">This model works very well when a container (collection of documents, graph, table) or a database is accidentally deleted since one of hello last versions can be restored.</span></span> <span data-ttu-id="44b2f-151">Ancak, hello kullanıcıların bir veri bozulması sorunu çıkarabilir, Azure Cosmos DB hello veri bozulmasını farkında ve Bozulması hello mümkün olduğunda çalışması hello yedeklemeleri penetrated.</span><span class="sxs-lookup"><span data-stu-id="44b2f-151">However, in hello case when when users may introduce a data corruption issue, Azure Cosmos DB may be unaware of hello data corruption, and it is possible that hello corruption may have penetrated hello backups.</span></span> <span data-ttu-id="44b2f-152">Bozulması algıladı hemen yedeklemeler bozuk verilerle üzerine korunmaya bozuk hello kapsayıcı (grafik/koleksiyonu/tablosu) silmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="44b2f-152">As soon as corruption is detected, you should delete hello corrupted container (collection/graph/table) so that backups are protected from being overwritten with corrupted data.</span></span> <span data-ttu-id="44b2f-153">Dört saat eski olabilir Hello son yedekleme beri hello kullanıcı uygulayabileceğiniz [akış değiştirme](change-feed.md) toocapture ve deposu hello son dört hello kapsayıcı silmeden önce saat değerinde veri.</span><span class="sxs-lookup"><span data-stu-id="44b2f-153">Since hello last backup could be four hours old, hello user can employ [change feed](change-feed.md) toocapture and store hello last four hours worth of data before deleting hello container.</span></span>

## <a name="next-steps"></a><span data-ttu-id="44b2f-154">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="44b2f-154">Next steps</span></span>

<span data-ttu-id="44b2f-155">birden çok veri merkezleri, veritabanınızda tooreplicate gördüğünüz [verilerinizle genel Cosmos DB dağıtmak](distribute-data-globally.md).</span><span class="sxs-lookup"><span data-stu-id="44b2f-155">tooreplicate your database in multiple data centers, see [distribute your data globally with Cosmos DB](distribute-data-globally.md).</span></span> 

<span data-ttu-id="44b2f-156">toofile kişi Azure Destek [hello Azure portal biletindeki dosya](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span><span class="sxs-lookup"><span data-stu-id="44b2f-156">toofile contact Azure Support, [file a ticket from hello Azure portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span></span>

