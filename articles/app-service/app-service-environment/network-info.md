---
title: "Azure uygulama hizmeti ortamı ile ağ konuları"
description: "Ana ağ trafiği ve Nsg'ler ve Udr'ler, ana ile nasıl ayarlanacağı açıklanır"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: 3be0d7a202ff53f5532fd7169a50a04cfaf88832
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="59c48-103">Uygulama hizmeti ortamı için ağ konuları</span><span class="sxs-lookup"><span data-stu-id="59c48-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="59c48-104">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="59c48-104">Overview</span></span> ##

 <span data-ttu-id="59c48-105">Azure [uygulama hizmeti ortamı] [ Intro] bir Azure App Service, Azure sanal ağınıza (VNet) bir alt ağ içinde dağıtımıdır.</span><span class="sxs-lookup"><span data-stu-id="59c48-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="59c48-106">Uygulama hizmeti ortamı (ana) için iki dağıtım türleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="59c48-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="59c48-107">**Dış ana**: internet'ten erişilebilen bir IP adresi üzerinde ana barındırılan uygulamalar kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="59c48-107">**External ASE**: Exposes the ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="59c48-108">Daha fazla bilgi için bkz: [bir dış ana oluşturma][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="59c48-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="59c48-109">**ILB ana**: ana barındırılan uygulamalar üzerinde bir IP adresi sanal ağınızın içinde kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="59c48-109">**ILB ASE**: Exposes the ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="59c48-110">Bir ILB ana çağırdı neden olan bir iç yük dengeleyici (ILB) iç uç noktadır.</span><span class="sxs-lookup"><span data-stu-id="59c48-110">The internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="59c48-111">Daha fazla bilgi için bkz: [oluşturma ve kullanma bir ILB ana][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="59c48-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="59c48-112">Artık uygulama hizmeti ortamı iki sürümü vardır: ASEv1 ve ASEv2.</span><span class="sxs-lookup"><span data-stu-id="59c48-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="59c48-113">ASEv1 hakkında daha fazla bilgi için bkz: [uygulama hizmeti ortamı v1 giriş][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="59c48-113">For information on ASEv1, see [Introduction to App Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="59c48-114">ASEv1 Klasik veya Resource Manager Vnet'i dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="59c48-115">ASEv2 yalnızca Resource Manager Vnet'i dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="59c48-116">İnternet'e giden tüm çağrılarından bir ana sanal ağ için ana atanmış bir VIP aracılığıyla bırakın.</span><span class="sxs-lookup"><span data-stu-id="59c48-116">All calls from an ASE that go to the internet leave the VNet through a VIP assigned for the ASE.</span></span> <span data-ttu-id="59c48-117">Bu VIP genel IP ana gelen internet'e gidin tüm çağrıları için kaynak IP ise.</span><span class="sxs-lookup"><span data-stu-id="59c48-117">The public IP of this VIP is then the source IP for all calls from the ASE that go to the internet.</span></span> <span data-ttu-id="59c48-118">Kaynak IP, ana uygulamalar sanal ağınızın içinde veya bir VPN kaynaklara çağrıları yaparsanız, ana tarafından kullanılan alt ağdaki IP biridir.</span><span class="sxs-lookup"><span data-stu-id="59c48-118">If the apps in your ASE make calls to resources in your VNet or across a VPN, the source IP is one of the IPs in the subnet used by your ASE.</span></span> <span data-ttu-id="59c48-119">Ana sanal ağ içinde olduğundan, ayrıca herhangi bir ek yapılandırma olmadan sanal ağ içindeki kaynaklara erişebilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-119">Because the ASE is within the VNet, it can also access resources within the VNet without any additional configuration.</span></span> <span data-ttu-id="59c48-120">VNet şirket içi ağınıza bağlanırsa, ana uygulamalarında kaynaklarına erişimi de vardır'e sahip.</span><span class="sxs-lookup"><span data-stu-id="59c48-120">If the VNet is connected to your on-premises network, apps in your ASE also have access to resources there.</span></span> <span data-ttu-id="59c48-121">Her ana ya da uygulamanızı daha fazla yapılandırmak gerekmez.</span><span class="sxs-lookup"><span data-stu-id="59c48-121">You don't need to configure the ASE or your app any further.</span></span>

![Dış ana][1] 

<span data-ttu-id="59c48-123">Bir dış ana varsa, genel VIP ana uygulamalarınız için çözümlemek uç nokta da şöyledir:</span><span class="sxs-lookup"><span data-stu-id="59c48-123">If you have an External ASE, the public VIP is also the endpoint that your ASE apps resolve to for:</span></span>

* <span data-ttu-id="59c48-124">HTTP/S'DİR.</span><span class="sxs-lookup"><span data-stu-id="59c48-124">HTTP/S.</span></span> 
* <span data-ttu-id="59c48-125">FTP/S'DİR.</span><span class="sxs-lookup"><span data-stu-id="59c48-125">FTP/S.</span></span> 
* <span data-ttu-id="59c48-126">Web dağıtımı.</span><span class="sxs-lookup"><span data-stu-id="59c48-126">Web deployment.</span></span>
* <span data-ttu-id="59c48-127">Uzaktan hata ayıklama.</span><span class="sxs-lookup"><span data-stu-id="59c48-127">Remote debugging.</span></span>

![ILB ANA][2]

<span data-ttu-id="59c48-129">Bir ILB ana varsa, ILB'nin IP adresini HTTP/S, FTP/sn, web dağıtımı ve uzaktan hata ayıklama için uç noktadır.</span><span class="sxs-lookup"><span data-stu-id="59c48-129">If you have an ILB ASE, the IP address of the ILB is the endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="59c48-130">Normal uygulama erişim bağlantı noktaları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="59c48-130">The normal app access ports are:</span></span>

| <span data-ttu-id="59c48-131">Kullanım</span><span class="sxs-lookup"><span data-stu-id="59c48-131">Use</span></span> | <span data-ttu-id="59c48-132">Kaynak</span><span class="sxs-lookup"><span data-stu-id="59c48-132">From</span></span> | <span data-ttu-id="59c48-133">Bitiş</span><span class="sxs-lookup"><span data-stu-id="59c48-133">To</span></span> |
|----------|---------|-------------|
|  <span data-ttu-id="59c48-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="59c48-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="59c48-135">Kullanıcı tarafından yapılandırılabilir</span><span class="sxs-lookup"><span data-stu-id="59c48-135">User configurable</span></span> |  <span data-ttu-id="59c48-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="59c48-136">80, 443</span></span> |
|  <span data-ttu-id="59c48-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="59c48-137">FTP/FTPS</span></span>    | <span data-ttu-id="59c48-138">Kullanıcı tarafından yapılandırılabilir</span><span class="sxs-lookup"><span data-stu-id="59c48-138">User configurable</span></span> |  <span data-ttu-id="59c48-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="59c48-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="59c48-140">Visual Studio uzaktan hata ayıklama</span><span class="sxs-lookup"><span data-stu-id="59c48-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="59c48-141">Kullanıcı tarafından yapılandırılabilir</span><span class="sxs-lookup"><span data-stu-id="59c48-141">User configurable</span></span> |  <span data-ttu-id="59c48-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="59c48-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="59c48-143">Bu, bir dış ana ya da bir ILB ana iseniz geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="59c48-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="59c48-144">Bir dış ana üzerinde değilseniz, bu bağlantı noktalarına genel VIP ulaştı.</span><span class="sxs-lookup"><span data-stu-id="59c48-144">If you're on an External ASE, you hit those ports on the public VIP.</span></span> <span data-ttu-id="59c48-145">Bir ILB ana değilseniz, bu bağlantı noktalarına ILB ulaştı.</span><span class="sxs-lookup"><span data-stu-id="59c48-145">If you're on an ILB ASE, you hit those ports on the ILB.</span></span> <span data-ttu-id="59c48-146">Bağlantı noktası 443 kilitlemek portalda kullanıma bazı özellikler üzerinde bir etkisi olabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-146">If you lock down port 443, there can be an effect on some features exposed in the portal.</span></span> <span data-ttu-id="59c48-147">Daha fazla bilgi için bkz: [Portal bağımlılıkları](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="59c48-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="59c48-148">Ana bağımlılıkları</span><span class="sxs-lookup"><span data-stu-id="59c48-148">ASE dependencies</span></span> ##

<span data-ttu-id="59c48-149">Bir ana gelen erişim bağımlılık:</span><span class="sxs-lookup"><span data-stu-id="59c48-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="59c48-150">Kullanım</span><span class="sxs-lookup"><span data-stu-id="59c48-150">Use</span></span> | <span data-ttu-id="59c48-151">Kaynak</span><span class="sxs-lookup"><span data-stu-id="59c48-151">From</span></span> | <span data-ttu-id="59c48-152">Bitiş</span><span class="sxs-lookup"><span data-stu-id="59c48-152">To</span></span> |
|-----|------|----|
| <span data-ttu-id="59c48-153">Yönetim</span><span class="sxs-lookup"><span data-stu-id="59c48-153">Management</span></span> | <span data-ttu-id="59c48-154">App Service management adresleri</span><span class="sxs-lookup"><span data-stu-id="59c48-154">App Service management addresses</span></span> | <span data-ttu-id="59c48-155">ANA alt: 454, 455</span><span class="sxs-lookup"><span data-stu-id="59c48-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="59c48-156">ANA iç iletişim</span><span class="sxs-lookup"><span data-stu-id="59c48-156">ASE internal communication</span></span> | <span data-ttu-id="59c48-157">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-157">ASE subnet: All ports</span></span> | <span data-ttu-id="59c48-158">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="59c48-159">Azure yük dengeleyici izin gelen</span><span class="sxs-lookup"><span data-stu-id="59c48-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="59c48-160">Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="59c48-160">Azure load balancer</span></span> | <span data-ttu-id="59c48-161">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="59c48-162">Uygulama atanmış IP adresleri</span><span class="sxs-lookup"><span data-stu-id="59c48-162">App assigned IP addresses</span></span> | <span data-ttu-id="59c48-163">Atanmış adresleri uygulama</span><span class="sxs-lookup"><span data-stu-id="59c48-163">App assigned addresses</span></span> | <span data-ttu-id="59c48-164">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-164">ASE subnet: All ports</span></span>

<span data-ttu-id="59c48-165">Gelen trafik komut ve sistem izleme yanı sıra ana denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c48-165">The inbound traffic provides command and control of the ASE in addition to system monitoring.</span></span> <span data-ttu-id="59c48-166">Bu trafik kaynağı IP'leri içinde listelenen [adresleri ana Yönetimi] [ ASEManagement] belge.</span><span class="sxs-lookup"><span data-stu-id="59c48-166">The source IPs for this traffic are listed in the [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="59c48-167">Tüm IP'ler 454 ve 455 bağlantı noktalarında gelen erişime izin verecek şekilde ağ güvenliği yapılandırması gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-167">The network security configuration needs to allow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="59c48-168">İç bileşeni için kullanılan pek çok bağlantı noktaları olduğundan ana alt ağ içindeki iletişim ve bunlar değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c48-168">Within the ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="59c48-169">Bu, tüm bağlantı noktaları ana alt ağdaki ana alt ağ üzerinden erişilebilir olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="59c48-169">This requires all of the ports in the ASE subnet to be accessible from the ASE subnet.</span></span> 

<span data-ttu-id="59c48-170">Azure yük dengeleyici ve ana alt ağ arasındaki iletişimin açık olması gereken minimum bağlantı noktaları 454 ve 455 16001 içindir.</span><span class="sxs-lookup"><span data-stu-id="59c48-170">For the communication between the Azure load balancer and the ASE subnet the minimum ports that need to be open are 454, 455 and 16001.</span></span> <span data-ttu-id="59c48-171">16001 bağlantı noktası, yük dengeleyici ve ana arasındaki Koru canlı akış için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="59c48-171">The 16001 port is used for keep alive traffic between the load balancer and the ASE.</span></span> <span data-ttu-id="59c48-172">Bir ILB ana kullandığınız sonra yalnızca 454, 455, 16001 aşağıya doğru trafiği kilitleyebilirsiniz bağlantı noktaları.</span><span class="sxs-lookup"><span data-stu-id="59c48-172">If you are using an ILB ASE then you can lock traffic down to just the 454, 455, 16001 ports.</span></span>  <span data-ttu-id="59c48-173">Bir dış ana kullanıyorsanız, normal uygulama erişim bağlantı noktaları dikkate almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-173">If you are using an External ASE then you need to take into account the normal app access ports.</span></span>  <span data-ttu-id="59c48-174">Atanan uygulamayı adresleri kullanıyorsanız, tüm bağlantı noktalarını açmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-174">If you are using app assigned addresses you need to open it to all ports.</span></span>  <span data-ttu-id="59c48-175">Belirli bir uygulamayı bir adresi atandığında, yük dengeleyici, önceden HTTP ve HTTPS trafiği için ana göndermek için Bilinmeyen bağlantı noktalarını kullanır.</span><span class="sxs-lookup"><span data-stu-id="59c48-175">When an address is assigned to a specific app, then the load balancer will use ports that are not known of in advance to send HTTP and HTTPS traffic to the ASE.</span></span>

<span data-ttu-id="59c48-176">Atanmış IP adresleri uygulamalarınızı ana alt ağa atanan IP gelen trafiğe izin verecek şekilde gereken uygulama kullanıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="59c48-176">If you are using app assigned IP addresses you need to allow traffic from the IPs assigned to your apps to the ASE subnet.</span></span>

<span data-ttu-id="59c48-177">Giden erişim için bir ana birden çok dış sistemlerde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="59c48-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="59c48-178">Bu sistem bağımlılıkların DNS adları ile tanımlanır ve sabit bir IP adresleri kümesini eşleme yok.</span><span class="sxs-lookup"><span data-stu-id="59c48-178">Those system dependencies are defined with DNS names and don't map to a fixed set of IP addresses.</span></span> <span data-ttu-id="59c48-179">Bu nedenle, ana çeşitli bağlantı noktaları tüm dış IP ana alt ağdan giden erişim gerektirir.</span><span class="sxs-lookup"><span data-stu-id="59c48-179">Thus, the ASE requires outbound access from the ASE subnet to all external IPs across a variety of ports.</span></span> <span data-ttu-id="59c48-180">Bir ana aşağıdaki giden bağımlılıklara sahiptir:</span><span class="sxs-lookup"><span data-stu-id="59c48-180">An ASE has the following outbound dependencies:</span></span>

| <span data-ttu-id="59c48-181">Kullanım</span><span class="sxs-lookup"><span data-stu-id="59c48-181">Use</span></span> | <span data-ttu-id="59c48-182">Kaynak</span><span class="sxs-lookup"><span data-stu-id="59c48-182">From</span></span> | <span data-ttu-id="59c48-183">Bitiş</span><span class="sxs-lookup"><span data-stu-id="59c48-183">To</span></span> |
|-----|------|----|
| <span data-ttu-id="59c48-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="59c48-184">Azure Storage</span></span> | <span data-ttu-id="59c48-185">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-185">ASE subnet</span></span> | <span data-ttu-id="59c48-186">Table.Core.Windows.NET, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 yalnızca gereklidir ASEv1 için.)</span><span class="sxs-lookup"><span data-stu-id="59c48-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="59c48-187">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="59c48-187">Azure SQL Database</span></span> | <span data-ttu-id="59c48-188">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-188">ASE subnet</span></span> | <span data-ttu-id="59c48-189">Database.Windows.NET: 1433 11000 11999, 14000 14999 (daha fazla bilgi için bkz: [SQL Database V12 bağlantı noktası kullanımı](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="59c48-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="59c48-190">Azure Yönetimi</span><span class="sxs-lookup"><span data-stu-id="59c48-190">Azure management</span></span> | <span data-ttu-id="59c48-191">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-191">ASE subnet</span></span> | <span data-ttu-id="59c48-192">Management.Core.Windows.NET, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="59c48-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="59c48-193">SSL sertifika doğrulama</span><span class="sxs-lookup"><span data-stu-id="59c48-193">SSL certificate verification</span></span> |  <span data-ttu-id="59c48-194">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-194">ASE subnet</span></span>            |  <span data-ttu-id="59c48-195">OCSP.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="59c48-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="59c48-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="59c48-196">Azure Active Directory</span></span>        | <span data-ttu-id="59c48-197">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-197">ASE subnet</span></span>            |  <span data-ttu-id="59c48-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="59c48-198">Internet: 443</span></span>
| <span data-ttu-id="59c48-199">Uygulama Hizmeti Yönetimi</span><span class="sxs-lookup"><span data-stu-id="59c48-199">App Service management</span></span>        | <span data-ttu-id="59c48-200">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-200">ASE subnet</span></span>            |  <span data-ttu-id="59c48-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="59c48-201">Internet: 443</span></span>
| <span data-ttu-id="59c48-202">Azure DNS</span><span class="sxs-lookup"><span data-stu-id="59c48-202">Azure DNS</span></span>                     | <span data-ttu-id="59c48-203">ANA alt ağ</span><span class="sxs-lookup"><span data-stu-id="59c48-203">ASE subnet</span></span>            |  <span data-ttu-id="59c48-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="59c48-204">Internet: 53</span></span>
| <span data-ttu-id="59c48-205">ANA iç iletişim</span><span class="sxs-lookup"><span data-stu-id="59c48-205">ASE internal communication</span></span>    | <span data-ttu-id="59c48-206">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="59c48-207">ANA alt: tüm bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="59c48-207">ASE subnet: All ports</span></span>

<span data-ttu-id="59c48-208">Ana Bu bağımlılıklar erişimi kaybederse, çalışmayı durdurur.</span><span class="sxs-lookup"><span data-stu-id="59c48-208">If the ASE loses access to these dependencies, it stops working.</span></span> <span data-ttu-id="59c48-209">Bu yetecek kadar uzun süre durum oluştuğunda ana askıya alındı.</span><span class="sxs-lookup"><span data-stu-id="59c48-209">When that happens long enough, the ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="59c48-210">Müşteri DNS</span><span class="sxs-lookup"><span data-stu-id="59c48-210">Customer DNS</span></span> ###

<span data-ttu-id="59c48-211">VNet müşteri tanımlı bir DNS sunucusu ile yapılandırılmışsa, Kiracı İş yükleri bunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="59c48-211">If the VNet is configured with a customer-defined DNS server, the tenant workloads use it.</span></span> <span data-ttu-id="59c48-212">Ana hala yönetim amacıyla Azure DNS ile iletişim kurması gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="59c48-212">The ASE still needs to communicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="59c48-213">VNet DNS diğer tarafındaki bir VPN müşteri ile yapılandırılmışsa, DNS sunucusu ana içeren alt ağ üzerinden erişilebilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-213">If the VNet is configured with a customer DNS on the other side of a VPN, the DNS server must be reachable from the subnet that contains the ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="59c48-214">Portal bağımlılıkları</span><span class="sxs-lookup"><span data-stu-id="59c48-214">Portal dependencies</span></span> ##

<span data-ttu-id="59c48-215">ANA işlevsel bağımlılıkları ek olarak, portal deneyimiyle ilgili birkaç ek öğeler vardır.</span><span class="sxs-lookup"><span data-stu-id="59c48-215">In addition to the ASE functional dependencies, there are a few extra items related to the portal experience.</span></span> <span data-ttu-id="59c48-216">Bazı Azure portalında özelliklerini doğrudan erişim bağımlı _SCM site_.</span><span class="sxs-lookup"><span data-stu-id="59c48-216">Some of the capabilities in the Azure portal depend on direct access to _SCM site_.</span></span> <span data-ttu-id="59c48-217">Azure App Service'te her uygulama için iki URL'leri vardır.</span><span class="sxs-lookup"><span data-stu-id="59c48-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="59c48-218">İlk uygulamanızı erişmek için URL'dir.</span><span class="sxs-lookup"><span data-stu-id="59c48-218">The first URL is to access your app.</span></span> <span data-ttu-id="59c48-219">İkinci olarak da adlandırılır SCM sitesine erişmek için URL'dir _Kudu konsol_.</span><span class="sxs-lookup"><span data-stu-id="59c48-219">The second URL is to access the SCM site, which is also called the _Kudu console_.</span></span> <span data-ttu-id="59c48-220">SCM site kullanan özellikler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="59c48-220">Features that use the SCM site include:</span></span>

-   <span data-ttu-id="59c48-221">Web işleri</span><span class="sxs-lookup"><span data-stu-id="59c48-221">Web jobs</span></span>
-   <span data-ttu-id="59c48-222">İşlevler</span><span class="sxs-lookup"><span data-stu-id="59c48-222">Functions</span></span>
-   <span data-ttu-id="59c48-223">Akış günlüğü</span><span class="sxs-lookup"><span data-stu-id="59c48-223">Log streaming</span></span>
-   <span data-ttu-id="59c48-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="59c48-224">Kudu</span></span>
-   <span data-ttu-id="59c48-225">Uzantılar</span><span class="sxs-lookup"><span data-stu-id="59c48-225">Extensions</span></span>
-   <span data-ttu-id="59c48-226">İşlem Gezgini</span><span class="sxs-lookup"><span data-stu-id="59c48-226">Process Explorer</span></span>
-   <span data-ttu-id="59c48-227">Konsol</span><span class="sxs-lookup"><span data-stu-id="59c48-227">Console</span></span>

<span data-ttu-id="59c48-228">Bir ILB ana kullandığınızda, SCM site internet sanal ağ dışında erişilebilir değildir.</span><span class="sxs-lookup"><span data-stu-id="59c48-228">When you use an ILB ASE, the SCM site isn't internet accessible from outside the VNet.</span></span> <span data-ttu-id="59c48-229">Uygulamanızı bir ILB ana barındırıldığında, bazı özellikleri portaldan çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="59c48-229">When your app is hosted on an ILB ASE, some capabilities will not work from the portal.</span></span>  

<span data-ttu-id="59c48-230">Birçok SCM site bağımlı bu yetenekleri de doğrudan Kudu konsolunda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-230">Many of those capabilities that depend upon the SCM site are also available directly in the Kudu console.</span></span> <span data-ttu-id="59c48-231">Bunu doğrudan yerine portalını kullanarak bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-231">You can connect to it directly rather than by using the portal.</span></span> <span data-ttu-id="59c48-232">Uygulamanızı ILB ASE'de barındırılıyorsa, oturum açmak için yayımlama kimlik bilgilerinizi kullanın.</span><span class="sxs-lookup"><span data-stu-id="59c48-232">If your app is hosted in an ILB ASE, use your publishing credentials to sign in.</span></span> <span data-ttu-id="59c48-233">ILB ASE'de barındırılan bir uygulamanın SCM sitesine erişmek için URL'si aşağıdaki biçime sahiptir:</span><span class="sxs-lookup"><span data-stu-id="59c48-233">The URL to access the SCM site of an app hosted in an ILB ASE has the following format:</span></span> 

```
<appname>.scm.<domain name the ILB ASE was created with> 
```

<span data-ttu-id="59c48-234">ILB ana etki alanı adı ise *contoso.net* ve uygulama adınız *testapp*, uygulamanın en üst sınırına *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="59c48-234">If your ILB ASE is the domain name *contoso.net* and your app name is *testapp*, the app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="59c48-235">İle gidiyor SCM sitenin en üst sınırına *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="59c48-235">The SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="59c48-236">İşlevler ve Web işleri</span><span class="sxs-lookup"><span data-stu-id="59c48-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="59c48-237">İşlevler ve Web işleri SCM siteye bağımlı olan ancak tarayıcınız SCM sitenin ulaşabileceği sürece, uygulamalarınızı ILB ASE'de olsa bile, portalı kullanmak için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="59c48-237">Both Functions and Web jobs depend on the SCM site but are supported for use in the portal, even if your apps are in an ILB ASE, so long as your browser can reach the SCM site.</span></span>  <span data-ttu-id="59c48-238">İle ILB ana kendinden imzalı bir sertifika kullanıyorsanız, bu sertifika güven için tarayıcınızı etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-238">If you are using a self-signed certificate with your ILB ASE, you will need to enable your browser to trust that certificate.</span></span>  <span data-ttu-id="59c48-239">IE ve sertifika anlamına gelir kenar için bilgisayar güven deposunda olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-239">For IE and Edge that means the certificate has to be in the computer trust store.</span></span>  <span data-ttu-id="59c48-240">Tarayıcıda sertifika önceki büyük olasılıkla scm sitenin doğrudan basarsa tarafından kabul ettiğiniz anlamına gelir sonra Chrome kullanıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="59c48-240">If you are using Chrome then that means you accepted the certificate in the browser earlier by presumably hitting the scm site directly.</span></span>  <span data-ttu-id="59c48-241">En iyi çözüm, güven tarayıcı zinciri ticari bir sertifika kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="59c48-241">The best solution is to use a commercial certificate that is in the browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="59c48-242">ANA IP adresleri</span><span class="sxs-lookup"><span data-stu-id="59c48-242">ASE IP addresses</span></span> ##

<span data-ttu-id="59c48-243">Bir ana dikkat edilmesi gereken birkaç IP adresi vardır.</span><span class="sxs-lookup"><span data-stu-id="59c48-243">An ASE has a few IP addresses to be aware of.</span></span> <span data-ttu-id="59c48-244">Bunlar:</span><span class="sxs-lookup"><span data-stu-id="59c48-244">They are:</span></span>

- <span data-ttu-id="59c48-245">**Gelen ortak IP adresi**: bir dış ana uygulama trafiği ve bir dış ana ve bir ILB ana yönetim trafiği için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="59c48-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="59c48-246">**Giden genel IP**: hangi VPN yönlendirilen değil, VNet bırakın giden bağlantılar ana "Kimden" IP olarak kullanılacak.</span><span class="sxs-lookup"><span data-stu-id="59c48-246">**Outbound public IP**: Used as the "from" IP for outbound connections from the ASE that leave the VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="59c48-247">**ILB IP adresi**: bir ILB ana kullanıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="59c48-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="59c48-248">**Uygulama tarafından atanan IP tabanlı SSL adresleri**: bir dış ana ve IP tabanlı SSL yapılandırıldığında mümkün.</span><span class="sxs-lookup"><span data-stu-id="59c48-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="59c48-249">Bu IP adreslerine ana Arabiriminden kolayca Azure portalında bir ASEv2 içinde görülebilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-249">All these IP addresses are easily visible in an ASEv2 in the Azure portal from the ASE UI.</span></span> <span data-ttu-id="59c48-250">Bir ILB ana varsa, ILB'nin IP listelenir.</span><span class="sxs-lookup"><span data-stu-id="59c48-250">If you have an ILB ASE, the IP for the ILB is listed.</span></span>

![IP adresleri][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="59c48-252">Uygulama tarafından atanan IP adresleri</span><span class="sxs-lookup"><span data-stu-id="59c48-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="59c48-253">Bir dış ana ile tek tek uygulamalar için IP adresleri atayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c48-253">With an External ASE, you can assign IP addresses to individual apps.</span></span> <span data-ttu-id="59c48-254">Bir ILB ana ile yapamazsınız.</span><span class="sxs-lookup"><span data-stu-id="59c48-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="59c48-255">Kendi IP adresini için uygulamanızı yapılandırma hakkında daha fazla bilgi için bkz: [Azure web uygulamaları için var olan özel bir SSL sertifikası bağlama](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="59c48-255">For more information on how to configure your app to have its own IP address, see [Bind an existing custom SSL certificate to Azure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="59c48-256">Uygulama kendi IP tabanlı SSL adresine sahipse, ana o IP adresine eşlemek için iki bağlantı noktası ayırır.</span><span class="sxs-lookup"><span data-stu-id="59c48-256">When an app has its own IP-based SSL address, the ASE reserves two ports to map to that IP address.</span></span> <span data-ttu-id="59c48-257">Bir bağlantı noktası HTTP trafiği için ve diğer bağlantı noktası için HTTPS şeklindedir.</span><span class="sxs-lookup"><span data-stu-id="59c48-257">One port is for HTTP traffic, and the other port is for HTTPS.</span></span> <span data-ttu-id="59c48-258">Bu bağlantı noktaları ana kullanıcı arabiriminde IP adresleri bölümünde listelenir.</span><span class="sxs-lookup"><span data-stu-id="59c48-258">Those ports are listed in the ASE UI in the IP addresses section.</span></span> <span data-ttu-id="59c48-259">Uygulamaları erişilemeyen veya trafiği bağlantı noktalarından VIP ulaşabilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59c48-259">Traffic must be able to reach those ports from the VIP or the apps are inaccessible.</span></span> <span data-ttu-id="59c48-260">Bu gereksinim, ağ güvenlik grupları (Nsg'ler) yapılandırdığınızda unutmayın.</span><span class="sxs-lookup"><span data-stu-id="59c48-260">This requirement is important to remember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="59c48-261">Ağ Güvenlik Grupları</span><span class="sxs-lookup"><span data-stu-id="59c48-261">Network Security Groups</span></span> ##

<span data-ttu-id="59c48-262">[Ağ güvenlik grupları] [ NSGs] bir sanal ağ içindeki ağ erişimi denetleme olanağı sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c48-262">[Network Security Groups][NSGs] provide the ability to control network access within a VNet.</span></span> <span data-ttu-id="59c48-263">Portalı'nı kullandığınızda, her şeyi reddetmek için en düşük öncelikli bir örtük izin verme kuralı yoktur.</span><span class="sxs-lookup"><span data-stu-id="59c48-263">When you use the portal, there's an implicit deny rule at the lowest priority to deny everything.</span></span> <span data-ttu-id="59c48-264">Derleme olan, kuralları izin verir.</span><span class="sxs-lookup"><span data-stu-id="59c48-264">What you build are your allow rules.</span></span>

<span data-ttu-id="59c48-265">ASE'de, ana barındırmak için kullanılan sanal makineleri erişimi yok.</span><span class="sxs-lookup"><span data-stu-id="59c48-265">In an ASE, you don't have access to the VMs used to host the ASE itself.</span></span> <span data-ttu-id="59c48-266">Bunlar, Microsoft tarafından yönetilen bir abonelikte demektir.</span><span class="sxs-lookup"><span data-stu-id="59c48-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="59c48-267">Ana uygulamaları için erişimi kısıtlamak istiyorsanız, ana alt ağda Nsg'ler ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="59c48-267">If you want to restrict access to the apps on the ASE, set NSGs on the ASE subnet.</span></span> <span data-ttu-id="59c48-268">Bunu yaparken dikkatli ana bağımlılıkları dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="59c48-268">In doing so, pay careful attention to the ASE dependencies.</span></span> <span data-ttu-id="59c48-269">Bağımlılıkları engellerseniz, ana çalışmayı durdurur.</span><span class="sxs-lookup"><span data-stu-id="59c48-269">If you block any dependencies, the ASE stops working.</span></span>

<span data-ttu-id="59c48-270">Nsg'ler, Azure portal veya PowerShell aracılığıyla yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-270">NSGs can be configured through the Azure portal or via PowerShell.</span></span> <span data-ttu-id="59c48-271">Burada yer alan bilgiler Azure Portalı'nı gösterir.</span><span class="sxs-lookup"><span data-stu-id="59c48-271">The information here shows the Azure portal.</span></span> <span data-ttu-id="59c48-272">Oluşturma ve Nsg'ler altında en üst düzey bir kaynak olarak portalda yönetme **ağ**.</span><span class="sxs-lookup"><span data-stu-id="59c48-272">You create and manage NSGs in the portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="59c48-273">Gelen ve giden gereksinimlerini dikkate alınır, Nsg'ler Bu örnekte gösterilen Nsg'ler benzemelidir.</span><span class="sxs-lookup"><span data-stu-id="59c48-273">When the inbound and outbound requirements are taken into account, the NSGs should look similar to the NSGs shown in this example.</span></span> <span data-ttu-id="59c48-274">VNet adres aralığı _192.168.250.0/16_, ve ana bulunduğu alt ağ _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="59c48-274">The VNet address range is _192.168.250.0/16_, and the subnet that the ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="59c48-275">Bu örnekte liste üstündeki ana işlevi ilk iki gelen gereksinimlerini gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="59c48-275">The first two inbound requirements for the ASE to function are shown at the top of the list in this example.</span></span> <span data-ttu-id="59c48-276">Bunlar ana yönetimini etkinleştirme ve ana kendisiyle iletişim kurmasına izin verin.</span><span class="sxs-lookup"><span data-stu-id="59c48-276">They enable ASE management and allow the ASE to communicate with itself.</span></span> <span data-ttu-id="59c48-277">Diğer girişler tüm Kiracı yapılandırılabilir ve ana barındırılan uygulamalar için ağ erişimi yönetebilirler.</span><span class="sxs-lookup"><span data-stu-id="59c48-277">The other entries are all tenant configurable and can govern network access to the ASE-hosted applications.</span></span> 

![Gelen güvenlik kuralları][4]

<span data-ttu-id="59c48-279">Varsayılan kural ana alt ağına anlaşmak için sanal ağ içindeki IP sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c48-279">A default rule enables the IPs in the VNet to talk to the ASE subnet.</span></span> <span data-ttu-id="59c48-280">Başka bir varsayılan kural ana ile iletişim kurmak için ortak VIP olarak da bilinen yük dengeleyici sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c48-280">Another default rule enables the load balancer, also known as the public VIP, to communicate with the ASE.</span></span> <span data-ttu-id="59c48-281">Varsayılan kuralları görmek için seçin **varsayılan kuralları** yanına **Ekle** simgesi.</span><span class="sxs-lookup"><span data-stu-id="59c48-281">To see the default rules, select **Default rules** next to the **Add** icon.</span></span> <span data-ttu-id="59c48-282">NSG gösterilen kuralları sonra şey kural reddetme put ise, VIP ve ana arasındaki trafiği engeller.</span><span class="sxs-lookup"><span data-stu-id="59c48-282">If you put a deny everything else rule after the NSG rules shown, you prevent traffic between the VIP and the ASE.</span></span> <span data-ttu-id="59c48-283">VNet içinde gelen trafiği engellemek için izin veren kendi gelen kuralı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="59c48-283">To prevent traffic coming from inside the VNet, add your own rule to allow inbound.</span></span> <span data-ttu-id="59c48-284">Bir kaynak için AzureLoadBalancer eşit hedefi ile kullanmak **herhangi** ve bir bağlantı noktası aralığı  **\*** .</span><span class="sxs-lookup"><span data-stu-id="59c48-284">Use a source equal to AzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="59c48-285">NSG kuralının ana alt ağına uygulandığından hedef belirli olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="59c48-285">Because the NSG rule is applied to the ASE subnet, you don't need to be specific in the destination.</span></span>

<span data-ttu-id="59c48-286">Uygulamanız için bir IP adresi atanmışsa, bağlantı noktalarını açık tutmak emin olun.</span><span class="sxs-lookup"><span data-stu-id="59c48-286">If you assigned an IP address to your app, make sure you keep the ports open.</span></span> <span data-ttu-id="59c48-287">Bağlantı noktaları görmek için seçin **uygulama hizmeti ortamı** > **IP adreslerini**.</span><span class="sxs-lookup"><span data-stu-id="59c48-287">To see the ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="59c48-288">Aşağıdaki giden kurallar gösterilen tüm öğeler, son öğenin dışında gereklidir.</span><span class="sxs-lookup"><span data-stu-id="59c48-288">All the items shown in the following outbound rules are needed, except for the last item.</span></span> <span data-ttu-id="59c48-289">Bunlar, bu makalenin önceki bölümlerinde belirtilenlerle ana bağımlılıkları ağ erişimini etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="59c48-289">They enable network access to the ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="59c48-290">Bunlardan herhangi birinin engellerseniz, ana çalışmayı durdurur.</span><span class="sxs-lookup"><span data-stu-id="59c48-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="59c48-291">Listesindeki son öğeyi kullanarak sanal ağınızdaki diğer kaynakları ile iletişim kurmak, ana sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c48-291">The last item in the list enables your ASE to communicate with other resources in your VNet.</span></span>

![Giden güvenlik kuralları][5]

<span data-ttu-id="59c48-293">Nsg'lerinizi tanımlandıktan sonra ana açıktır alt ağa atayın.</span><span class="sxs-lookup"><span data-stu-id="59c48-293">After your NSGs are defined, assign them to the subnet that your ASE is on.</span></span> <span data-ttu-id="59c48-294">Ana sanal ağ veya alt ağ hatırlamıyorsanız ana Yönetim Portalı'ndan görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c48-294">If you don’t remember the ASE VNet or subnet, you can see it from the ASE management portal.</span></span> <span data-ttu-id="59c48-295">Alt ağınız NSG atamak için kullanıcı Arabirimi alt ağa gidin ve NSG seçin.</span><span class="sxs-lookup"><span data-stu-id="59c48-295">To assign the NSG to your subnet, go to the subnet UI and select the NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="59c48-296">Yollar</span><span class="sxs-lookup"><span data-stu-id="59c48-296">Routes</span></span> ##

<span data-ttu-id="59c48-297">Azure ExpressRoute ile ağınızı yapılandırırken yollara en yaygın olarak sorunlu dönüşür.</span><span class="sxs-lookup"><span data-stu-id="59c48-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="59c48-298">Üç türde bir sanal ağda yollar vardır:</span><span class="sxs-lookup"><span data-stu-id="59c48-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="59c48-299">Sistem yolları</span><span class="sxs-lookup"><span data-stu-id="59c48-299">System routes</span></span>
-   <span data-ttu-id="59c48-300">BGP yolları</span><span class="sxs-lookup"><span data-stu-id="59c48-300">BGP routes</span></span>
-   <span data-ttu-id="59c48-301">Kullanıcı tanımlı yollar (Udr'ler)</span><span class="sxs-lookup"><span data-stu-id="59c48-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="59c48-302">BGP yolları sistem yolları geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="59c48-302">BGP routes override system routes.</span></span> <span data-ttu-id="59c48-303">BGP yolları Udr'ler geçersiz.</span><span class="sxs-lookup"><span data-stu-id="59c48-303">UDRs override BGP routes.</span></span> <span data-ttu-id="59c48-304">Azure sanal ağlar yollar hakkında daha fazla bilgi için bkz: [kullanıcı tanımlı yollar genel bakış][UDRs].</span><span class="sxs-lookup"><span data-stu-id="59c48-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="59c48-305">Sistem yönetmek için ana kullanan Azure SQL veritabanı güvenlik duvarı vardır.</span><span class="sxs-lookup"><span data-stu-id="59c48-305">The Azure SQL database that the ASE uses to manage the system has a firewall.</span></span> <span data-ttu-id="59c48-306">Ana genel VIP kaynaklanacak şekilde iletişim gerektirir.</span><span class="sxs-lookup"><span data-stu-id="59c48-306">It requires communication to originate from the ASE public VIP.</span></span> <span data-ttu-id="59c48-307">ExpressRoute bağlantısı aşağı ve başka bir IP adresi çıkış gönderilirse ana gelen SQL veritabanına bağlantıları reddedilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-307">Connections to the SQL database from the ASE will be denied if they are sent down the ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="59c48-308">Gelen yönetim isteklerini yanıtlar ExpressRoute gönderirse yanıt adresini özgün hedef farklıdır.</span><span class="sxs-lookup"><span data-stu-id="59c48-308">If replies to incoming management requests are sent down the ExpressRoute, the reply address is different than the original destination.</span></span> <span data-ttu-id="59c48-309">Bu uyuşmazlık TCP iletişimi keser.</span><span class="sxs-lookup"><span data-stu-id="59c48-309">This mismatch breaks the TCP communication.</span></span>

<span data-ttu-id="59c48-310">Ana ağınızı bir ExpressRoute ile yapılandırılırken çalışmaya yapmak için kolay şeydir:</span><span class="sxs-lookup"><span data-stu-id="59c48-310">For your ASE to work while your VNet is configured with an ExpressRoute, the easiest thing to do is:</span></span>

-   <span data-ttu-id="59c48-311">Tanıtmak için ExpressRoute yapılandırma _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="59c48-311">Configure ExpressRoute to advertise _0.0.0.0/0_.</span></span> <span data-ttu-id="59c48-312">Varsayılan olarak, zorla tünel giden tüm trafiği şirket içi.</span><span class="sxs-lookup"><span data-stu-id="59c48-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="59c48-313">Bir UDR oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c48-313">Create a UDR.</span></span> <span data-ttu-id="59c48-314">Bir adres öneki ile ana içeren alt ağ geçerli _0.0.0.0/0_ ve bir sonraki atlama türü _Internet_.</span><span class="sxs-lookup"><span data-stu-id="59c48-314">Apply it to the subnet that contains the ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="59c48-315">Bu iki değişiklik yaparsanız, ana alt ağdan kaynaklanan Internet hedefleyen trafiğe works ExpressRoute ve ana aşağı zorlanmaz.</span><span class="sxs-lookup"><span data-stu-id="59c48-315">If you make these two changes, internet-destined traffic that originates from the ASE subnet isn't forced down the ExpressRoute and the ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="59c48-316">Bir UDR tanımlanan rotalar ExpressRoute yapılandırma tarafından tanıtılan rotaları önceliklidir için belirli olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-316">The routes defined in a UDR must be specific enough to take precedence over any routes advertised by the ExpressRoute configuration.</span></span> <span data-ttu-id="59c48-317">Yukarıdaki örnek, geniş 0.0.0.0/0 adres aralığını kullanır.</span><span class="sxs-lookup"><span data-stu-id="59c48-317">The preceding example uses the broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="59c48-318">Bu büyük olasılıkla yanlışlıkla daha belirli adres aralıkları Yol tanıtımlarını tarafından geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="59c48-319">ASEs ortak eşleme yolu yolları özel eşleme yoluna arası tanıtma ExpressRoute yapılandırmalarla desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="59c48-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from the public-peering path to the private-peering path.</span></span> <span data-ttu-id="59c48-320">Microsoft'tan Yol tanıtımlarını ilgili yapılandırılmış ortak eşleme ile ExpressRoute yapılandırmaları.</span><span class="sxs-lookup"><span data-stu-id="59c48-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="59c48-321">Reklam çok sayıda Microsoft Azure IP adres aralıklarını içerir.</span><span class="sxs-lookup"><span data-stu-id="59c48-321">The advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="59c48-322">Özel eşliği yolda arası tanıtılan adres aralıklarını, tüm giden ağ paketlerinin ana'nın alt ağdan bir müşterinin şirket içi ağ altyapısına tünelli zorla demektir.</span><span class="sxs-lookup"><span data-stu-id="59c48-322">If the address ranges are cross-advertised on the private-peering path, all outbound network packets from the ASE's subnet are force tunneled to a customer's on-premises network infrastructure.</span></span> <span data-ttu-id="59c48-323">Bu ağ akışı ASEs ile şu anda desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="59c48-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="59c48-324">Bu sorun için bir çözüm, ortak eşleme yolu arası reklam yolları özel eşleme yoluna önlemektir.</span><span class="sxs-lookup"><span data-stu-id="59c48-324">One solution to this problem is to stop cross-advertising routes from the public-peering path to the private-peering path.</span></span>

<span data-ttu-id="59c48-325">Bir UDR oluşturmak için aşağıdaki adımları izleyin:</span><span class="sxs-lookup"><span data-stu-id="59c48-325">To create a UDR, follow these steps:</span></span>

1. <span data-ttu-id="59c48-326">Azure portalına gidin.</span><span class="sxs-lookup"><span data-stu-id="59c48-326">Go to the Azure portal.</span></span> <span data-ttu-id="59c48-327">Seçin **ağ** > **yol tablosu**.</span><span class="sxs-lookup"><span data-stu-id="59c48-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="59c48-328">Sanal ağınızı aynı bölgede yeni bir yol tablosu oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c48-328">Create a new route table in the same region as your VNet.</span></span>

3. <span data-ttu-id="59c48-329">Kullanıcı Arabirimi, rota tablosu içindeki seçin **yollar** > **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="59c48-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="59c48-330">Ayarlama **sonraki atlama türü** için **Internet** ve **adres ön eki** için **0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="59c48-330">Set the **Next hop type** to **Internet** and the **Address prefix** to **0.0.0.0/0**.</span></span> <span data-ttu-id="59c48-331">**Kaydet**’i seçin.</span><span class="sxs-lookup"><span data-stu-id="59c48-331">Select **Save**.</span></span>

    <span data-ttu-id="59c48-332">Ardından aşağıdaki gibi bir şey görürsünüz:</span><span class="sxs-lookup"><span data-stu-id="59c48-332">You then see something like the following:</span></span>

    ![İşlev yolları][6]

5. <span data-ttu-id="59c48-334">Yeni yol tablosu oluşturduktan sonra ana içeren alt ağa gidin.</span><span class="sxs-lookup"><span data-stu-id="59c48-334">After you create the new route table, go to the subnet that contains your ASE.</span></span> <span data-ttu-id="59c48-335">Yol tablosu portal listeden seçin.</span><span class="sxs-lookup"><span data-stu-id="59c48-335">Select your route table from the list in the portal.</span></span> <span data-ttu-id="59c48-336">Değişiklik kaydettikten sonra alt ağ ile belirtilen yollar ve Nsg'ler sonra görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c48-336">After you save the change, you should then see the NSGs and routes noted with your subnet.</span></span>

    ![Nsg'ler ve yolları][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="59c48-338">ExpressRoute ile tümleşik olan Azure sanal ağlarda dağıtma</span><span class="sxs-lookup"><span data-stu-id="59c48-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="59c48-339">ExpressRoute ile tümleşik bir VNet içine, ana dağıtmak için dağıtılan ana istediğiniz alt ağ önceden yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="59c48-339">To deploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure the subnet where you want the ASE deployed.</span></span> <span data-ttu-id="59c48-340">Ardından bunu dağıtmak için bir Resource Manager şablonunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="59c48-340">Then use a Resource Manager template to deploy it.</span></span> <span data-ttu-id="59c48-341">Bir ana sanal ağ içinde zaten oluşturmak için yapılandırılmış ExpressRoute sahiptir:</span><span class="sxs-lookup"><span data-stu-id="59c48-341">To create an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="59c48-342">Ana barındırmak için bir alt ağ oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c48-342">Create a subnet to host the ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="59c48-343">Hiçbir şey alt ancak ana olabilir.</span><span class="sxs-lookup"><span data-stu-id="59c48-343">Nothing else can be in the subnet but the ASE.</span></span> <span data-ttu-id="59c48-344">Gelecekteki büyümeyi de izin veren bir adres alanı seçtiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="59c48-344">Be sure to choose an address space that allows for future growth.</span></span> <span data-ttu-id="59c48-345">Bu ayarı daha sonra değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c48-345">You can't change this setting later.</span></span> <span data-ttu-id="59c48-346">Dosya boyutu öneririz `/25` 128 adreslerine sahip.</span><span class="sxs-lookup"><span data-stu-id="59c48-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="59c48-347">Daha önce açıklandığı gibi Udr'ler (örneğin, yol tablolarını) oluşturun ve bu alt ağda ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="59c48-347">Create UDRs (for example, route tables) as described earlier, and set that on the subnet.</span></span>
- <span data-ttu-id="59c48-348">Ana açıklandığı gibi bir Resource Manager şablonunu kullanarak oluşturduğunuz [Resource Manager şablonu kullanarak bir ana oluşturma][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="59c48-348">Create the ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
