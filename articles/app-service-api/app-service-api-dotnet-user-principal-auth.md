---
title: "Azure uygulama hizmetinde API uygulamaları için aaaUser kimlik doğrulaması | Microsoft Docs"
description: "Nasıl tooprotect sağlayarak Azure App Service'deki bir API uygulamasına erişim yalnızca tooauthenticated kullanıcılar hakkında bilgi edinin."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: 3896760d-46ff-4b67-b98a-edd233f24758
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: dotnet
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: alkarche
ms.openlocfilehash: 4702fc77fcfe736405e22b033c35d22ae3c5a300
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="user-authentication-for-api-apps-in-azure-app-service"></a><span data-ttu-id="df4b3-103">Azure uygulama hizmetinde API uygulamaları için kullanıcı kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="df4b3-103">User authentication for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="df4b3-104">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="df4b3-104">Overview</span></span>
<span data-ttu-id="df4b3-105">Bu makalede nasıl tooprotect, yalnızca kimliği doğrulanmış kullanıcılar için bir Azure API uygulaması işleyememesi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-105">This article shows how tooprotect an Azure API app so that only authenticated users can call it.</span></span> <span data-ttu-id="df4b3-106">Merhaba makalede hello okuduğunuz varsayılır [Azure App Service kimlik doğrulamasına genel bakış](../app-service/app-service-authentication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-106">hello article assumes that you have read hello [Azure App Service authentication overview](../app-service/app-service-authentication-overview.md).</span></span>

<span data-ttu-id="df4b3-107">Şunları öğreneceksiniz:</span><span class="sxs-lookup"><span data-stu-id="df4b3-107">You'll learn:</span></span>

* <span data-ttu-id="df4b3-108">Nasıl tooconfigure ayrıntılarıyla Azure Active Directory (Azure AD) için bir kimlik doğrulama sağlayıcısı.</span><span class="sxs-lookup"><span data-stu-id="df4b3-108">How tooconfigure an authentication provider, with details for Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="df4b3-109">Nasıl tooconsume kullanarak korumalı bir API uygulaması hello [Active Directory Authentication Library (ADAL) JavaScript için](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span><span class="sxs-lookup"><span data-stu-id="df4b3-109">How tooconsume a protected API app by using hello [Active Directory Authentication Library (ADAL) for JavaScript](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span></span>

<span data-ttu-id="df4b3-110">Merhaba makale iki bölüm içerir:</span><span class="sxs-lookup"><span data-stu-id="df4b3-110">hello article contains two sections:</span></span>

* <span data-ttu-id="df4b3-111">Merhaba [nasıl tooconfigure kullanıcı kimlik doğrulaması Azure App Service'te](#authconfig) bölümde açıklanmıştır genel nasıl herhangi bir API uygulaması için tooconfigure kullanıcı kimlik doğrulaması ve .NET dahil App Service tarafından desteklenen tooall çerçeveleri eşit oranda geçerlidir Node.js ve Java.</span><span class="sxs-lookup"><span data-stu-id="df4b3-111">hello [How tooconfigure user authentication in Azure App Service](#authconfig) section explains in general how tooconfigure user authentication for any API app and applies equally tooall frameworks supported by App Service, including .NET, Node.js, and Java.</span></span>
* <span data-ttu-id="df4b3-112">Merhaba ile başlayan [hello .NET API Apps öğreticileri etmeden](#tutorialstart) bölümünde, örnek bir uygulama bir .NET ile yapılandırma yoluyla geri uç ve bir AngularJS ön uç, Azure Active Directory kullanıcı için kullanmayacağından makale kılavuzları hello kimlik doğrulaması.</span><span class="sxs-lookup"><span data-stu-id="df4b3-112">Starting with hello [Continuing hello .NET API Apps tutorials](#tutorialstart) section, hello article guides you through configuring a sample application with a .NET back end and an AngularJS front end so that it uses Azure Active Directory for user authentication.</span></span> 

## <span data-ttu-id="df4b3-113"><a id="authconfig"></a>Nasıl Azure App Service'te tooconfigure kullanıcı kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="df4b3-113"><a id="authconfig"></a> How tooconfigure user authentication in Azure App Service</span></span>
<span data-ttu-id="df4b3-114">Bu bölümde tooany API uygulaması geçerli olan genel yönergeleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-114">This section provides general instructions that apply tooany API app.</span></span> <span data-ttu-id="df4b3-115">Adımları belirli toohello tooDo listesi .NET örnek uygulaması için çok Git[hello .NET kullanmaya Başlarken öğreticilerine devam etme](#tutorialstart).</span><span class="sxs-lookup"><span data-stu-id="df4b3-115">For steps specific toohello tooDo List .NET sample application, go too[Continuing hello .NET getting-started tutorials](#tutorialstart).</span></span>

1. <span data-ttu-id="df4b3-116">Merhaba, [Azure portal](https://portal.azure.com/), toohello gidin **ayarları** tooprotect, Bul hello istediğiniz hello API uygulaması dikey **özellikleri** bölümünde ve ardından  **Kimlik doğrulama / yetkilendirme**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-116">In hello [Azure portal](https://portal.azure.com/), navigate toohello **Settings** blade of hello API app that you want tooprotect, find hello **Features** section, and then click **Authentication/ Authorization**.</span></span>
   
    ![Azure portal kimlik doğrulama/yetkilendirme](./media/app-service-api-dotnet-user-principal-auth/features.png)
2. <span data-ttu-id="df4b3-118">Merhaba, **kimlik doğrulama / yetkilendirme** dikey penceresinde tıklatın **üzerinde**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-118">In hello **Authentication / Authorization** blade, click **On**.</span></span>
3. <span data-ttu-id="df4b3-119">Hello hello seçeneklerden birini belirleyin **istek kimliği doğrulanmamış olduğunda eylem tootake** aşağı açılan liste.</span><span class="sxs-lookup"><span data-stu-id="df4b3-119">Select one of hello options from hello **Action tootake when request is not authenticated** drop-down list.</span></span>
   
   * <span data-ttu-id="df4b3-120">API uygulamanız yalnızca kimliği doğrulanmış çağrıları tooreach istiyorsanız, hello birini tercih **ile oturum...**  seçenekleri.</span><span class="sxs-lookup"><span data-stu-id="df4b3-120">If you want only authenticated calls tooreach your API app, choose one of hello **Log in with ...** options.</span></span> <span data-ttu-id="df4b3-121">Bu seçenek, içinde çalışan herhangi bir kod yazmak zorunda kalmadan, tooprotect hello API uygulaması sağlar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-121">This option enables you tooprotect hello API app without writing any code that runs in it.</span></span>
   * <span data-ttu-id="df4b3-122">API uygulamanız tüm çağrılar tooreach istiyorsanız, tercih **isteğine izin ver (hiçbir işlem)**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-122">If you want all calls tooreach your API app, choose **Allow request (no action)**.</span></span> <span data-ttu-id="df4b3-123">Bu seçenek kimliği doğrulanmamış toodirect arayanlar tooa seçimine kimlik doğrulama sağlayıcılarını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-123">You can use this option toodirect unauthenticated callers tooa choice of authentication providers.</span></span> <span data-ttu-id="df4b3-124">Bu seçenek ile toowrite kod toohandle yetkiye sahip.</span><span class="sxs-lookup"><span data-stu-id="df4b3-124">With this option you have toowrite code toohandle authorization.</span></span>
     
     <span data-ttu-id="df4b3-125">Daha fazla bilgi için bkz. [Azure App Service’de API Apps için kimlik doğrulama ve yetkilendirme](app-service-api-authentication.md#multiple-protection-options).</span><span class="sxs-lookup"><span data-stu-id="df4b3-125">For more information, see [Authentication and authorization for API Apps in Azure App Service](app-service-api-authentication.md#multiple-protection-options).</span></span>
4. <span data-ttu-id="df4b3-126">Bir veya daha fazla hello seçin **kimlik doğrulama sağlayıcıları**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-126">Select one or more of hello **Authentication Providers**.</span></span>
   
    <span data-ttu-id="df4b3-127">Merhaba görüntü Azure AD tarafından kimliği doğrulanmış tüm arayanlar toobe gerektiren seçimler gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-127">hello image shows    choices that require all callers toobe authenticated by Azure AD.</span></span>
   
    ![Azure portal kimlik doğrulama/yetkilendirme dikey penceresi](./media/app-service-api-dotnet-user-principal-auth/authblade.png)
   
    <span data-ttu-id="df4b3-129">Bir kimlik doğrulama sağlayıcısı seçtiğinizde, hello portal bu sağlayıcı için bir yapılandırma dikey penceresinde görüntüler.</span><span class="sxs-lookup"><span data-stu-id="df4b3-129">When you choose an authentication provider, hello portal displays a configuration blade for that provider.</span></span> 
   
    <span data-ttu-id="df4b3-130">Nasıl tooconfigure hello kimlik doğrulama sağlayıcısı yapılandırma dikey açıklayan ayrıntılı yönergeler için bkz: [nasıl tooconfigure App Service uygulama toouse Azure Active Directory oturum açma](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-130">For detailed instructions that explain how tooconfigure hello authentication provider configuration blades, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="df4b3-131">(Azure AD hakkındaki tooan makale hello bağlantı gider, ancak hello makalesi kendisini tooarticles hello için diğer kimlik doğrulama sağlayıcıları bağlantı sekme içerir.)</span><span class="sxs-lookup"><span data-stu-id="df4b3-131">(hello link goes tooan article about Azure AD, but hello article itself contains tabs that link tooarticles for hello other authentication providers.)</span></span>
5. <span data-ttu-id="df4b3-132">Merhaba kimlik doğrulama sağlayıcısı yapılandırma dikey bittiğinde, tıklatın **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-132">When you're done with hello authentication provider configuration blade, click **OK**.</span></span>
6. <span data-ttu-id="df4b3-133">Merhaba, **kimlik doğrulama / yetkilendirme** dikey penceresinde tıklatın **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-133">In hello **Authentication / Authorization** blade, click **Save**.</span></span>

<span data-ttu-id="df4b3-134">Bu yapıldığında, uygulama hizmeti hello API uygulaması düşmeden önce tüm API çağrıları kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="df4b3-134">When this is done, App Service authenticates all API calls before they reach hello API app.</span></span> <span data-ttu-id="df4b3-135">Merhaba kimlik doğrulama hizmetleri iş hello aynı .NET, Node.js ve Java dahil olmak üzere uygulama hizmetini destekleyen tüm diller için.</span><span class="sxs-lookup"><span data-stu-id="df4b3-135">hello authentication services work hello same for all languages that App service supports, including .NET, Node.js, and Java.</span></span> 

<span data-ttu-id="df4b3-136">API çağrıları toomake kimlik doğrulaması, hello çağıran hello kimlik doğrulama sağlayıcısının OAuth 2.0 taşıyıcı belirteci hello yetkilendirme üstbilgisinde HTTP isteklerini içerir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-136">toomake authenticated API calls, hello caller includes hello authentication provider's OAuth 2.0 bearer token in hello Authorization header of HTTP requests.</span></span> <span data-ttu-id="df4b3-137">Merhaba belirteci hello kimlik doğrulama sağlayıcısının SDK kullanılarak edinilebilir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-137">hello token can be acquired by using hello authentication provider's SDK.</span></span>

## <span data-ttu-id="df4b3-138"><a id="tutorialstart"></a>Merhaba .NET API uygulamaları öğreticilerine devam etme</span><span class="sxs-lookup"><span data-stu-id="df4b3-138"><a id="tutorialstart"></a> Continuing hello .NET API Apps tutorials</span></span>
<span data-ttu-id="df4b3-139">API uygulamaları için hello Node.js ve Java öğreticileri izliyorsanız, toohello sonraki makalede atla [API uygulamaları için hizmet asıl kimlik doğrulaması](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-139">If you are following hello Node.js or Java tutorials for API apps, skip toohello next article, [service principal authentication for API apps](app-service-api-dotnet-service-principal-auth.md).</span></span> 

<span data-ttu-id="df4b3-140">API uygulamaları için .NET Öğreticisi serisi hello izleyen ve Merhaba örnek uygulaması hello yönergelerine uygun olarak zaten dağıttıysanız [ilk](app-service-api-dotnet-get-started.md) ve [ikinci](app-service-api-cors-consume-javascript.md) öğreticileri, Atla toohello [ayarlama Uygulama hizmeti ve Azure AD kimlik doğrulaması](#azureauth) bölümü.</span><span class="sxs-lookup"><span data-stu-id="df4b3-140">If you are following hello .NET tutorial series for API apps and have already deployed hello sample application as directed in hello [first](app-service-api-dotnet-get-started.md) and [second](app-service-api-cors-consume-javascript.md) tutorials, skip toohello [Set up authentication in App Service and Azure AD](#azureauth) section.</span></span>

<span data-ttu-id="df4b3-141">Bu öğretici hello birinci ve ikinci öğreticileri geçmeden toofollow istiyorsanız, otomatik bir işlem toodeploy hello örnek uygulamanın kullanarak tooget nasıl başlatılacağını açıklayan adımları izleyerek hello.</span><span class="sxs-lookup"><span data-stu-id="df4b3-141">If you want toofollow this tutorial without going through hello first and second tutorials, do hello following steps which explain how tooget started by using an automated process toodeploy hello sample application.</span></span>

> [!NOTE]
> <span data-ttu-id="df4b3-142">Merhaba aşağıdaki adımlar, aynı başlangıç noktası tek bir istisna ilk iki öğreticileri hello gibi toohello alırsınız: Visual Studio olmaz zaten biliyor hangi web uygulaması veya her proje dağıtılan API uygulaması.</span><span class="sxs-lookup"><span data-stu-id="df4b3-142">hello following steps get you toohello same starting point as if you did hello first two tutorials, with one exception: Visual Studio won't already know which web app or API app that each project gets deployed to.</span></span> <span data-ttu-id="df4b3-143">Bu öğreticideki açıklayan tam yönergeler sahip olmaz anlamına nasıl toodeploy toohello sağ hedefler.</span><span class="sxs-lookup"><span data-stu-id="df4b3-143">That means you won't have exact instructions in this tutorial that explain how toodeploy toohello right targets.</span></span> <span data-ttu-id="df4b3-144">Açık nasıl toodo hello dağıtım, kendi adımları memnun değilseniz, daha iyi toofollow hello öğretici serisinde hello olan [ilk öğreticide](app-service-api-dotnet-get-started.md) bu toostart'den otomatik dağıtım işlemi.</span><span class="sxs-lookup"><span data-stu-id="df4b3-144">If you're not comfortable with figuring out how toodo hello deployment steps on your own, it's better toofollow hello tutorial series from hello [first tutorial](app-service-api-dotnet-get-started.md) than toostart with this automated deployment process.</span></span>
> 
> 

1. <span data-ttu-id="df4b3-145">Hello listelenen hello Önkoşullar tümüne sahip olduğunuzdan emin olun [ilk öğreticide](app-service-api-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-145">Make sure that you have all of hello prerequisites listed in hello [first tutorial](app-service-api-dotnet-get-started.md).</span></span> <span data-ttu-id="df4b3-146">Toplama toohello Önkoşullar listelenen bu kimlik doğrulama öğreticiler App Service web apps ve Visual Studio API uygulamaları ile çalıştıktan ve Azure portal hello varsayalım.</span><span class="sxs-lookup"><span data-stu-id="df4b3-146">In addition toohello prerequisites listed, these authentication tutorials assume that you have worked with App Service web apps and API apps in Visual Studio and hello Azure portal.</span></span>
2. <span data-ttu-id="df4b3-147">Merhaba tıklatın **tooAzure dağıtmak** hello düğmesini [tooDo listesi örnek depo Benioku dosyası](https://github.com/azure-samples/app-service-api-dotnet-todo-list/blob/master/readme.md) toodeploy hello API apps ve hello web uygulaması.</span><span class="sxs-lookup"><span data-stu-id="df4b3-147">Click hello **Deploy tooAzure** button in hello [tooDo List sample repository readme file](https://github.com/azure-samples/app-service-api-dotnet-todo-list/blob/master/readme.md) toodeploy hello API apps and hello web app.</span></span> <span data-ttu-id="df4b3-148">Web uygulaması ve API uygulaması adları daha sonra bu toolook kullanabileceğiniz gibi oluşturulan, hello Azure kaynak grubu not edin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-148">Make a note of hello Azure resource group that gets created, as you can use this later toolook up web app and API app names.</span></span>
3. <span data-ttu-id="df4b3-149">İndirme veya kopya hello [tooDo listesi örnek depo](https://github.com/Azure-Samples/app-service-api-dotnet-todo-list) , ile yerel olarak Visual Studio'da karşılaşmayacağınızı tooget hello kodu.</span><span class="sxs-lookup"><span data-stu-id="df4b3-149">Download or clone hello [tooDo List sample repository](https://github.com/Azure-Samples/app-service-api-dotnet-todo-list) tooget hello code that you'll work with locally in Visual Studio.</span></span>

## <span data-ttu-id="df4b3-150"><a id="azureauth"></a>Uygulama hizmeti ve Azure AD kimlik doğrulaması ayarlama</span><span class="sxs-lookup"><span data-stu-id="df4b3-150"><a id="azureauth"></a> Set up authentication in App Service and Azure AD</span></span>
<span data-ttu-id="df4b3-151">Artık kullanıcıların kimliğinin doğrulanmasını gerek kalmadan Azure App Service'te çalışan hello uygulama vardır.</span><span class="sxs-lookup"><span data-stu-id="df4b3-151">You now have hello application running in Azure App Service without requiring that users be authenticated.</span></span> <span data-ttu-id="df4b3-152">Bu bölümde kimlik doğrulama görevleri aşağıdaki hello yaparak ekleyin:</span><span class="sxs-lookup"><span data-stu-id="df4b3-152">In this section you add authentication by doing hello following tasks:</span></span>

* <span data-ttu-id="df4b3-153">Merhaba orta katman API uygulamasını çağırmak için uygulama hizmeti toorequire Azure Active Directory (Azure AD) kimlik doğrulamasını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-153">Configure App Service toorequire Azure Active Directory (Azure AD) authentication for calling hello middle tier API app.</span></span>
* <span data-ttu-id="df4b3-154">Azure AD uygulaması oluşturun.</span><span class="sxs-lookup"><span data-stu-id="df4b3-154">Create an Azure AD application.</span></span>
* <span data-ttu-id="df4b3-155">Hello Azure AD uygulama toosend hello taşıyıcı belirteci oturum açma toohello AngularJS ön uç sonra yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-155">Configure hello Azure AD application toosend hello bearer token after logon toohello AngularJS front end.</span></span> 

<span data-ttu-id="df4b3-156">Aşağıdaki hello öğretici yönergeleri sırasında sorunları alıyorsanız hello bkz [sorun giderme](#troubleshooting) hello öğretici hello sonunda bölüm.</span><span class="sxs-lookup"><span data-stu-id="df4b3-156">If you run into problems while following hello tutorial directions, see hello [Troubleshooting](#troubleshooting) section at hello end of hello tutorial.</span></span> 

### <a name="configure-authentication-for-hello-middle-tier-api-app"></a><span data-ttu-id="df4b3-157">Merhaba orta katman API uygulaması için kimlik doğrulamasını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="df4b3-157">Configure authentication for hello middle tier API app</span></span>
1. <span data-ttu-id="df4b3-158">Merhaba, [Azure portal](https://portal.azure.com/), toohello gidin **ayarları** oluşturduğunuz hello API uygulaması dikey penceresinde hello Todolistapı projesi için bulma hello **özellikleri** bölümünde ve ardından tıklatın **kimlik doğrulama / yetkilendirme**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-158">In hello [Azure portal](https://portal.azure.com/), navigate toohello **Settings** blade of hello API app that you created for hello ToDoListAPI project, find hello **Features** section, and then click **Authentication / Authorization**.</span></span>
   
    ![Azure portal kimlik doğrulama/yetkilendirme](./media/app-service-api-dotnet-user-principal-auth/features.png)
2. <span data-ttu-id="df4b3-160">Merhaba, **kimlik doğrulama / yetkilendirme** dikey penceresinde tıklatın **üzerinde**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-160">In hello **Authentication / Authorization** blade, click **On**.</span></span>
3. <span data-ttu-id="df4b3-161">Merhaba, **istek kimliği doğrulanmamış olduğunda eylem tootake** aşağı açılan listesinden, **Azure Active Directory ile oturum aç**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-161">In hello **Action tootake when request is not authenticated** drop-down list, select **Log in with Azure Active Directory**.</span></span>
   
    <span data-ttu-id="df4b3-162">Bu seçenek, hiçbir unauathenticated istek hello API uygulaması ulaşabileceği sağlar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-162">This option ensures that no unauathenticated requests will reach hello API app.</span></span> 
4. <span data-ttu-id="df4b3-163">Altında **kimlik doğrulama sağlayıcıları**, tıklatın **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-163">Under **Authentication Providers**, click **Azure Active Directory**.</span></span>
   
    ![Azure portal kimlik doğrulama/yetkilendirme dikey penceresi](./media/app-service-api-dotnet-user-principal-auth/authblade.png)
5. <span data-ttu-id="df4b3-165">Merhaba, **Azure Active Directory ayarları** dikey penceresinde tıklatın **Express**</span><span class="sxs-lookup"><span data-stu-id="df4b3-165">In hello **Azure Active Directory Settings** blade, click **Express**</span></span>
   
    ![Azure portal kimlik doğrulama/yetkilendirme Express seçeneği](./media/app-service-api-dotnet-user-principal-auth/aadsettings.png)
   
    <span data-ttu-id="df4b3-167">Merhaba ile **Express** seçeneği, uygulama hizmeti otomatik olarak oluşturabilir Azure AD uygulaması, Azure AD'de [Kiracı](https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#BKMK_WhatIsAnAzureADTenant).</span><span class="sxs-lookup"><span data-stu-id="df4b3-167">With hello **Express** option, App Service can automatically create an Azure AD application in your Azure AD [tenant](https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#BKMK_WhatIsAnAzureADTenant).</span></span> 
   
    <span data-ttu-id="df4b3-168">Her Azure hesabı otomatik olarak bir tane var olduğundan, Kiracı toocreate yok.</span><span class="sxs-lookup"><span data-stu-id="df4b3-168">You don't have toocreate a tenant, because every Azure account automatically has one.</span></span>
6. <span data-ttu-id="df4b3-169">Altında **yönetim modu**, tıklatın **yeni AD uygulaması oluştur** seçili değilse ve fark hello hello değer **uygulama oluşturma** metin kutusu; bu AAD göreceğiz Merhaba Klasik Azure portalı daha sonra uygulama.</span><span class="sxs-lookup"><span data-stu-id="df4b3-169">Under **Management mode**, click **Create New AD App** if it isn't already selected, and notice hello value that is in hello **Create App** text box; you'll look up this AAD application in hello Azure classic portal later.</span></span>
   
    ![Azure portalında Azure AD ayarları](./media/app-service-api-dotnet-user-principal-auth/aadsettings2.png)
   
    <span data-ttu-id="df4b3-171">Azure, Azure AD kiracınızda hello Belirtilen adda bir Azure AD uygulaması otomatik olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="df4b3-171">Azure will automatically create an Azure AD application with hello indicated name in your Azure AD tenant.</span></span> <span data-ttu-id="df4b3-172">Varsayılan olarak, Azure AD uygulaması hello adlı aynı hello API uygulaması gibi hello.</span><span class="sxs-lookup"><span data-stu-id="df4b3-172">By default, hello Azure AD application is named hello same as hello API app.</span></span> <span data-ttu-id="df4b3-173">İsterseniz, farklı bir ad girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-173">If you prefer, you can enter a different name.</span></span>
7. <span data-ttu-id="df4b3-174">**Tamam** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-174">Click **OK**.</span></span>
8. <span data-ttu-id="df4b3-175">Merhaba, **kimlik doğrulama / yetkilendirme** dikey penceresinde tıklatın **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-175">In hello **Authentication / Authorization** blade, click **Save**.</span></span>
   
    ![Kaydet’e tıklayın.](./media/app-service-api-dotnet-user-principal-auth/authsave.png)

<span data-ttu-id="df4b3-177">Artık yalnızca Azure AD kiracınızdaki kullanıcıların hello API uygulaması çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-177">Now only users in your Azure AD tenant can call hello API app.</span></span>

### <a name="optional-test-hello-api-app"></a><span data-ttu-id="df4b3-178">İsteğe bağlı: hello API uygulamayı test etme</span><span class="sxs-lookup"><span data-stu-id="df4b3-178">Optional: Test hello API app</span></span>
1. <span data-ttu-id="df4b3-179">Toohello hello API uygulaması URL'sini bir tarayıcıda gidin: hello içinde **API uygulaması** dikey penceresinde hello Azure portal altında hello bağlantısını tıklatın **URL**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-179">In a browser go toohello URL of hello API app: in hello **API app** blade in hello Azure portal, click hello link under **URL**.</span></span>  
   
    <span data-ttu-id="df4b3-180">Kimliği doğrulanmamış istekler tooreach hello API uygulaması izin verilmediğinden, yeniden yönlendirilen tooa oturum açma ekranı demektir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-180">You are redirected tooa login screen because unauthenticated requests are not allowed tooreach hello API app.</span></span>
   
    <span data-ttu-id="df4b3-181">Tarayıcınız toohello "başarıyla oluşturuldu" sayfası kalırsa, hello tarayıcı zaten oturum açmış olabilirsiniz--bu durumda, bir InPrivate veya Incognito penceresi açın ve toohello API uygulamanızın URL'sine gidin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-181">If your browser goes toohello "successfully created" page, hello browser might already be logged on -- in that case, open an InPrivate or Incognito window and go toohello API app's URL.</span></span>
2. <span data-ttu-id="df4b3-182">Azure AD kiracınızda bir kullanıcı için kimlik bilgilerini kullanarak oturum açın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-182">Log on using credentials for a user in your Azure AD tenant.</span></span>
   
    <span data-ttu-id="df4b3-183">Oturum açarken hello tarayıcıda hello "başarıyla oluşturuldu" sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-183">When you're logged on, hello "successfully created" page appears in hello browser.</span></span>
3. <span data-ttu-id="df4b3-184">Kapat hello tarayıcı.</span><span class="sxs-lookup"><span data-stu-id="df4b3-184">Close hello browser.</span></span>

### <a name="configure-hello-azure-ad-application"></a><span data-ttu-id="df4b3-185">Merhaba Azure AD uygulaması yapılandırma</span><span class="sxs-lookup"><span data-stu-id="df4b3-185">Configure hello Azure AD application</span></span>
<span data-ttu-id="df4b3-186">Azure AD kimlik doğrulaması için yapılandırıldığında, uygulama hizmeti bir Azure AD uygulaması oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="df4b3-186">When you configured Azure AD authentication, App Service created an Azure AD application for you.</span></span> <span data-ttu-id="df4b3-187">Varsayılan olarak yapılandırılmış tooprovide hello taşıyıcı belirteci toohello API uygulamasının URL'si Merhaba yeni Azure AD uygulaması oluştu.</span><span class="sxs-lookup"><span data-stu-id="df4b3-187">By default hello new Azure AD application was configured tooprovide hello bearer token toohello API app's URL.</span></span> <span data-ttu-id="df4b3-188">Bu bölümde hello Azure AD uygulama tooprovide hello taşıyıcı belirteci toohello AngularJS ön uç yerine doğrudan toohello orta katman API uygulamasını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-188">In this section you configure hello Azure AD application tooprovide hello bearer token toohello AngularJS front end instead of directly toohello middle tier API app.</span></span> <span data-ttu-id="df4b3-189">Merhaba AngularJS ön uç hello API uygulamasını çağıran hello belirteci toohello API uygulaması gönderir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-189">hello AngularJS front end will send hello token toohello API app when it calls hello API app.</span></span>

> [!NOTE]
> <span data-ttu-id="df4b3-190">tookeep hello işlemi kadar basit, Bu öğretici, tek bir Azure AD kullanır hello ön uç ve hello orta katman API uygulaması için uygulama.</span><span class="sxs-lookup"><span data-stu-id="df4b3-190">tookeep hello process as simple as possible, this tutorial uses a single Azure AD application for both hello front end and hello middle tier API app.</span></span> <span data-ttu-id="df4b3-191">Toouse iki Azure AD uygulama başka bir seçenektir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-191">Another option is toouse two Azure AD applications.</span></span> <span data-ttu-id="df4b3-192">Bu durumda toogive hello ön uç ait Azure AD uygulama izni toocall hello Orta katmanın Azure AD uygulaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-192">In that case you would have toogive hello front end's Azure AD application permission toocall hello middle tier's Azure AD application.</span></span> <span data-ttu-id="df4b3-193">Birden çok uygulama bu yaklaşım izinleri tooeach katmanı üzerinde daha ayrıntılı denetim verirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-193">This multi-application approach would give you more granular control over permissions tooeach tier.</span></span>
> 
> 

1. <span data-ttu-id="df4b3-194">Merhaba, [Klasik Azure portalı](https://manage.windowsazure.com/), çok Git**Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-194">In hello [Azure classic portal](https://manage.windowsazure.com/), go too**Azure Active Directory**.</span></span>
   
   <span data-ttu-id="df4b3-195">Gereksinim duyduğunuz belirli Azure Active Directory ayarları tooare hello mevcut Azure portalından henüz kullanılamıyor eriştiğinden toouse hello Klasik portal sahip.</span><span class="sxs-lookup"><span data-stu-id="df4b3-195">You have toouse hello classic portal because certain Azure Active Directory settings that you need access tooare not yet available in hello current Azure portal.</span></span>
2. <span data-ttu-id="df4b3-196">Merhaba üzerinde **Directory** sekmesinde, AAD kiracınızın tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-196">On hello **Directory** tab, click your AAD tenant.</span></span>
   
   ![Azure AD Klasik portalında](./media/app-service-api-dotnet-user-principal-auth/selecttenant.png)
3. <span data-ttu-id="df4b3-198">Tıklatın **uygulamaları > Şirketimin sahip olduğu uygulamalar**ve ardından hello onay işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-198">Click **Applications > Applications my company owns**, and then click hello check mark.</span></span>
   
   <span data-ttu-id="df4b3-199">Toorefresh hello sayfa toosee hello yeni uygulama da olabilir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-199">You might also have toorefresh hello page toosee hello new application.</span></span>
4. <span data-ttu-id="df4b3-200">Uygulamaları Hello listesinde hello API uygulamanız için kimlik doğrulaması etkinleştirildiğinde Azure sizin için oluşturulmuş bir hello adına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-200">In hello list of applications, click hello name of hello one that Azure created for you when you enabled authentication for your API app.</span></span>
   
   ![Azure AD uygulamalar sekmesi](./media/app-service-api-dotnet-user-principal-auth/appstab.png)
5. <span data-ttu-id="df4b3-202">**Yapılandır**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-202">Click **Configure**.</span></span>
   
   ![Azure AD Yapılandır sekmesi](./media/app-service-api-dotnet-user-principal-auth/configure.png)
6. <span data-ttu-id="df4b3-204">Ayarlama **oturum açma URL'si** AngularJS web uygulamanız, hiçbir eğik toohello URL.</span><span class="sxs-lookup"><span data-stu-id="df4b3-204">Set **Sign-on URL** toohello URL for your AngularJS web app, no trailing slash.</span></span>
   
   <span data-ttu-id="df4b3-205">Örneğin: https://todolistangular.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="df4b3-205">For example: https://todolistangular.azurewebsites.net</span></span>
   
   ![Oturum açma URL'si](./media/app-service-api-dotnet-user-principal-auth/signonurlazure.png)
7. <span data-ttu-id="df4b3-207">Ayarlama **yanıt URL'si** web uygulamanıza hiçbir eğik toohello URL'si.</span><span class="sxs-lookup"><span data-stu-id="df4b3-207">Set **Reply URL** toohello URL for your web app, no trailing slash.</span></span>
   
   <span data-ttu-id="df4b3-208">Örneğin: https://todolistsangular.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="df4b3-208">For example: https://todolistsangular.azurewebsites.net</span></span>
8. <span data-ttu-id="df4b3-209">**Kaydet** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-209">Click **Save**.</span></span>
   
   ![Yanıt URL'si](./media/app-service-api-dotnet-user-principal-auth/replyurlazure.png)
9. <span data-ttu-id="df4b3-211">Merhaba sayfasının Hello altında tıklatın **Yönet bildirimi > indirme bildirimi**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-211">At hello bottom of hello page, click **Manage manifest > Download manifest**.</span></span>
   
   ![Bildirim indirin](./media/app-service-api-dotnet-user-principal-auth/downloadmanifest.png)
10. <span data-ttu-id="df4b3-213">Merhaba dosya tooa konumu, düzenleyebileceğiniz indirin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-213">Download hello file tooa location where you can edit it.</span></span>
11. <span data-ttu-id="df4b3-214">Merhaba indirilen hello bildirim dosyasında arama `oauth2AllowImplicitFlow` özelliği.</span><span class="sxs-lookup"><span data-stu-id="df4b3-214">In hello downloaded manifest file, search for hello  `oauth2AllowImplicitFlow` property.</span></span> <span data-ttu-id="df4b3-215">Bu özellikten hello değerini değiştirin `false` çok`true`ve hello dosyasını kaydedin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-215">Change hello value of this property from `false` too`true`, and then save hello file.</span></span>
    
    <span data-ttu-id="df4b3-216">Bu ayar, bir JavaScript tek sayfalı uygulama erişimi için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-216">This setting is required for access from a JavaScript single-page application.</span></span> <span data-ttu-id="df4b3-217">Merhaba Oauth 2.0 taşıyıcı belirteci toobe hello URL parçadaki döndürülen sağlar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-217">It enables hello Oauth 2.0 bearer token toobe returned in hello URL fragment.</span></span>
12. <span data-ttu-id="df4b3-218">Tıklatın **Yönet bildirimi > karşıya yükleme bildirimi**ve adım önceki hello güncelleştirilmiş hello dosya karşıya yükleme.</span><span class="sxs-lookup"><span data-stu-id="df4b3-218">Click **Manage manifest > Upload manifest**, and upload hello file that you updated in hello preceding step.</span></span>
    
    ![Bildirim karşıya yükle](./media/app-service-api-dotnet-user-principal-auth/uploadmanifest.png)
13. <span data-ttu-id="df4b3-220">Kopya hello **istemci kimliği** değer ve bir yere alabilirsiniz ondan daha sonra kaydedin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-220">Copy hello **Client ID** value and save it somewhere you can get it from later.</span></span>

## <a name="configure-hello-todolistangular-project-toouse-authentication"></a><span data-ttu-id="df4b3-221">Merhaba ToDoListAngular projesi toouse kimlik doğrulamasını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="df4b3-221">Configure hello ToDoListAngular project toouse authentication</span></span>
<span data-ttu-id="df4b3-222">Bu bölümde JS tooacquire Azure AD'den hello oturum açan kullanıcı için bir taşıyıcı belirteç için Active Directory Authentication Library (ADAL) kullanan şekilde hello AngularJS ön uç değiştirin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-222">In this section you change hello AngularJS front end so that it uses Active Directory Authentication Library (ADAL) for JS tooacquire a bearer token for hello logged-on user from Azure AD.</span></span> <span data-ttu-id="df4b3-223">Merhaba kod hello belirteci toohello orta katman, gönderilen HTTP isteklerinde hello Aşağıdaki diyagramda gösterildiği gibi içerir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-223">hello code will include hello token in HTTP requests sent toohello middle tier, as shown in hello following diagram.</span></span> 

![Kullanıcı kimlik doğrulama diyagramı](./media/app-service-api-dotnet-user-principal-auth/appdiagram.png)

<span data-ttu-id="df4b3-225">Değişiklikleri toofiles hello ToDoListAngular projesinde aşağıdaki hello olun.</span><span class="sxs-lookup"><span data-stu-id="df4b3-225">Make hello following changes toofiles in hello ToDoListAngular project.</span></span>

1. <span data-ttu-id="df4b3-226">Açık hello *Index.cshtml* dosya.</span><span class="sxs-lookup"><span data-stu-id="df4b3-226">Open hello *index.cshtml* file.</span></span>
2. <span data-ttu-id="df4b3-227">JS komut dosyaları için Active Directory Authentication Library (ADAL) hello başvuru hello satırlardaki yorumları kaldırın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-227">Uncomment hello lines that reference hello Active Directory Authentication Library (ADAL) for JS scripts.</span></span>
   
        <script src="app/scripts/adal.js"></script>
        <script src="app/scripts/adal-angular.js"></script>
3. <span data-ttu-id="df4b3-228">Açık hello *app/scripts/app.js* dosya.</span><span class="sxs-lookup"><span data-stu-id="df4b3-228">Open hello *app/scripts/app.js* file.</span></span>
4. <span data-ttu-id="df4b3-229">Açıklama kod bloğunu hello çıkışı için "olmadan kimlik doğrulaması" olarak işaretlenmiş ve kod bloğunu hello "ile kimlik doğrulaması için" olarak işaretlenmiş açıklamadan çıkarın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-229">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>
   
    <span data-ttu-id="df4b3-230">Bu değişiklik hello ADAL JS kimlik doğrulama sağlayıcısı başvuruyor ve yapılandırma değerleri tooit sağlar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-230">This change references hello ADAL JS authentication provider and provides configuration values tooit.</span></span> <span data-ttu-id="df4b3-231">Aşağıdaki adımları hello Azure AD uygulaması ve API uygulaması için hello yapılandırma değerlerini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-231">In hello following steps you set hello configuration values for your API app and Azure AD application.</span></span>
5. <span data-ttu-id="df4b3-232">Merhaba ayarlar hello kodda `endpoints` değişken, ayarlanmış hello API URL toohello hello Todolistapı projesi için oluşturduğunuz ve ayarlama hello API uygulaması URL'sini hello hello Klasik Azure Portalı ' kopyaladığınız Azure AD uygulama kimliği toohello istemci kimliği.</span><span class="sxs-lookup"><span data-stu-id="df4b3-232">In hello code that sets hello `endpoints` variable, set hello API URL toohello URL of hello API app that you created for hello ToDoListAPI project, and set hello Azure AD application ID toohello client ID that you copied from hello Azure classic portal.</span></span>
   
    <span data-ttu-id="df4b3-233">Merhaba kod aşağıdaki örneğine benzer toohello sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="df4b3-233">hello code is now similar toohello following example.</span></span>
   
        var endpoints = {
            "https://todolistapi0121.azurewebsites.net/": "1cf55bc9-9ed8-4df31cf55bc9-9ed8-4df3"
        };
6. <span data-ttu-id="df4b3-234">Hello çağrı çok`adalProvider.init`ayarlayın `tenant` tooyour Kiracı adı ve `clientId` hello önceki adımda kullanılan toosame değer.</span><span class="sxs-lookup"><span data-stu-id="df4b3-234">In hello call too`adalProvider.init`, set `tenant` tooyour tenant name and `clientId` toosame value you used in hello previous step.</span></span>
   
    <span data-ttu-id="df4b3-235">Merhaba kod aşağıdaki örneğine benzer toohello sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="df4b3-235">hello code is now similar toohello following example.</span></span>
   
        adalProvider.init(
            {
                instance: 'https://login.microsoftonline.com/', 
                tenant: 'contoso.onmicrosoft.com',
                clientId: '1cf55bc9-9ed8-4df31cf55bc9-9ed8-4df3',
                extraQueryParameter: 'nux=1',
                endpoints: endpoints
            },
            $httpProvider
            );
   
    <span data-ttu-id="df4b3-236">Bu değişiklikler çok`app.js` hello çağıran kodu ve API adlı hello hello aynı Azure AD uygulama olduğunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-236">These changes too`app.js` specify that hello calling code and hello called API are in hello same Azure AD application.</span></span>
7. <span data-ttu-id="df4b3-237">Açık hello *app/scripts/homeCtrl.js* dosya.</span><span class="sxs-lookup"><span data-stu-id="df4b3-237">Open hello *app/scripts/homeCtrl.js* file.</span></span>
8. <span data-ttu-id="df4b3-238">Açıklama kod bloğunu hello çıkışı için "olmadan kimlik doğrulaması" olarak işaretlenmiş ve kod bloğunu hello "ile kimlik doğrulaması için" olarak işaretlenmiş açıklamadan çıkarın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-238">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>
9. <span data-ttu-id="df4b3-239">Açık hello *app/scripts/indexCtrl.js* dosya.</span><span class="sxs-lookup"><span data-stu-id="df4b3-239">Open hello *app/scripts/indexCtrl.js* file.</span></span>
10. <span data-ttu-id="df4b3-240">Açıklama kod bloğunu hello çıkışı için "olmadan kimlik doğrulaması" olarak işaretlenmiş ve kod bloğunu hello "ile kimlik doğrulaması için" olarak işaretlenmiş açıklamadan çıkarın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-240">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>

### <a name="deploy-hello-todolistangular-project-tooazure"></a><span data-ttu-id="df4b3-241">Merhaba ToDoListAngular projesi tooAzure dağıtma</span><span class="sxs-lookup"><span data-stu-id="df4b3-241">Deploy hello ToDoListAngular project tooAzure</span></span>
1. <span data-ttu-id="df4b3-242">İçinde **Çözüm Gezgini**hello ToDoListAngular projesine sağ tıklayın ve ardından **Yayımla**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-242">In **Solution Explorer**, right-click hello ToDoListAngular project, and then click **Publish**.</span></span>
2. <span data-ttu-id="df4b3-243">**Yayımla**’ta tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-243">Click **Publish**.</span></span>
   
    <span data-ttu-id="df4b3-244">Visual Studio Başlangıç projesini dağıtır ve bir tarayıcı toohello web uygulamanızın temel URL'yi açar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-244">Visual Studio deploys hello project and opens a browser toohello web app's base URL.</span></span> <span data-ttu-id="df4b3-245">Bu bir tarayıcıdan girişimi toogo tooa Web API'sini temel URL için normal bir 403 hata sayfası gösterilir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-245">This will show a 403 error page, which is normal for an attempt toogo tooa Web API base URL from a browser.</span></span>
   
    <span data-ttu-id="df4b3-246">Merhaba uygulaması test edebilmemiz toomake bir değişiklik toohello orta katman API uygulaması hala sahip olursunuz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-246">You still have toomake a change toohello middle tier API app before you can test hello application.</span></span>
3. <span data-ttu-id="df4b3-247">Kapat hello tarayıcı.</span><span class="sxs-lookup"><span data-stu-id="df4b3-247">Close hello browser.</span></span>

## <a name="configure-hello-todolistapi-project-toouse-authentication"></a><span data-ttu-id="df4b3-248">Merhaba Todolistapı projesi toouse kimlik doğrulamasını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="df4b3-248">Configure hello ToDoListAPI project toouse authentication</span></span>
<span data-ttu-id="df4b3-249">Şu anda Todolistapı projesi gönderir hello "*" Merhaba olarak `owner` değeri tooToDoListDataAPI.</span><span class="sxs-lookup"><span data-stu-id="df4b3-249">Currently hello ToDoListAPI project sends "*" as hello `owner` value tooToDoListDataAPI.</span></span> <span data-ttu-id="df4b3-250">Bu bölümde hello kod toosend hello hello oturum açmış kullanıcının Kimliğini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-250">In this section you change hello code toosend hello ID of hello logged-on user.</span></span>

<span data-ttu-id="df4b3-251">Aşağıdaki değişiklikler hello Todolistapı projesinde hello olun.</span><span class="sxs-lookup"><span data-stu-id="df4b3-251">Make hello following changes in hello ToDoListAPI project.</span></span>

1. <span data-ttu-id="df4b3-252">Açık hello *Controllers/ToDoListController.cs* dosya ve ayarlar her eylem yöntemindeki hello satırı açıklamadan kaldırmasına `owner` toohello Azure AD `NameIdentifier` talep değeri.</span><span class="sxs-lookup"><span data-stu-id="df4b3-252">Open hello *Controllers/ToDoListController.cs* file, and uncomment hello line in each action method that sets `owner` toohello Azure AD `NameIdentifier` claim value.</span></span> <span data-ttu-id="df4b3-253">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="df4b3-253">For example:</span></span>
   
        owner = ((ClaimsIdentity)User.Identity).FindFirst(ClaimTypes.NameIdentifier).Value;
   
    <span data-ttu-id="df4b3-254">**Önemli**: hello kodda açıklamadan çıkarın yok `ToDoListDataAPI` yöntemi; bu daha sonra hello hizmet asıl kimlik doğrulaması öğretici için gerçekleştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-254">**Important**: Don't uncomment code in hello `ToDoListDataAPI` method; you'll do that later for hello service principal authentication tutorial.</span></span>

### <a name="deploy-hello-todolistapi-project-tooazure"></a><span data-ttu-id="df4b3-255">Merhaba Todolistapı projesi tooAzure dağıtma</span><span class="sxs-lookup"><span data-stu-id="df4b3-255">Deploy hello ToDoListAPI project tooAzure</span></span>
1. <span data-ttu-id="df4b3-256">İçinde **Çözüm Gezgini**hello Todolistapı projesine sağ tıklayın ve ardından **Yayımla**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-256">In **Solution Explorer**, right-click hello ToDoListAPI project, and then click **Publish**.</span></span>
2. <span data-ttu-id="df4b3-257">**Yayımla**’ta tıklayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-257">Click **Publish**.</span></span>
   
    <span data-ttu-id="df4b3-258">Visual Studio Başlangıç projesini dağıtır ve bir tarayıcı toohello API uygulamasının temel URL'yi açar.</span><span class="sxs-lookup"><span data-stu-id="df4b3-258">Visual Studio deploys hello project and opens a browser toohello API app's base URL.</span></span>
3. <span data-ttu-id="df4b3-259">Kapat hello tarayıcı.</span><span class="sxs-lookup"><span data-stu-id="df4b3-259">Close hello browser.</span></span>

### <a name="test-hello-application"></a><span data-ttu-id="df4b3-260">Merhaba uygulamayı test etme</span><span class="sxs-lookup"><span data-stu-id="df4b3-260">Test hello application</span></span>
1. <span data-ttu-id="df4b3-261">Merhaba web uygulamasının toohello URL'sini Git **HTTPS değil HTTP kullanarak**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-261">Go toohello URL of hello web app, **using HTTPS, not HTTP**.</span></span>
2. <span data-ttu-id="df4b3-262">Merhaba tıklatın **tooDo listesi** sekmesi.</span><span class="sxs-lookup"><span data-stu-id="df4b3-262">Click hello **tooDo List** tab.</span></span>
   
    <span data-ttu-id="df4b3-263">İçinde istendiğinde toolog var.</span><span class="sxs-lookup"><span data-stu-id="df4b3-263">You are prompted toolog in.</span></span>
3. <span data-ttu-id="df4b3-264">Bir kullanıcının AAD kiracınızda hello kimlik bilgilerinizle oturum açın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-264">Log in with hello credentials of a user in your AAD tenant.</span></span>
4. <span data-ttu-id="df4b3-265">Merhaba **tooDo listesi** sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-265">hello **tooDo List** page appears.</span></span>
   
   ![tooDo Listesi Sayfası](./media/app-service-api-dotnet-user-principal-auth/webappindex.png)
   
   <span data-ttu-id="df4b3-267">Şimdiye kadar bunların tümünü sahibi bırakıldığından Yapılacaklar öğelerini görüntülenen "*".</span><span class="sxs-lookup"><span data-stu-id="df4b3-267">No to-do items are displayed because until now they have all been for owner "*".</span></span> <span data-ttu-id="df4b3-268">Merhaba orta katman öğeleri hello oturum açan kullanıcı için şimdi isteme ve hiçbiri henüz oluşturulmadı.</span><span class="sxs-lookup"><span data-stu-id="df4b3-268">Now hello middle tier is requesting items for hello logged-on user, and none have been created yet.</span></span>
5. <span data-ttu-id="df4b3-269">Merhaba uygulaması çalışma yeni yapılacak iş öğeleri tooverify ekleyin.</span><span class="sxs-lookup"><span data-stu-id="df4b3-269">Add new to-do items tooverify that hello application is working.</span></span>
6. <span data-ttu-id="df4b3-270">Başka bir tarayıcı penceresinde hello Todolistdataapı API uygulaması için Swagger kullanıcı Arabirimi URL toohello gidin ve tıklayın **ToDoList > almak**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-270">In another browser window, go toohello Swagger UI URL for hello ToDoListDataAPI API app and click **ToDoList > Get**.</span></span> <span data-ttu-id="df4b3-271">Hello için bir yıldız işareti girin `owner` parametre ve ardından **deneyin**.</span><span class="sxs-lookup"><span data-stu-id="df4b3-271">Enter an asterisk for hello `owner` parameter, and then click **Try it out**.</span></span>
   
   <span data-ttu-id="df4b3-272">Merhaba yanıt hello yeni yapılacak iş öğeleri hello sahibi özelliğindeki hello gerçek Azure AD kullanıcı kimliği olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="df4b3-272">hello response shows that hello new to-do items have hello actual Azure AD user ID in hello Owner property.</span></span>
   
   ![JSON yanıt sahibinin kimliği](./media/app-service-api-dotnet-user-principal-auth/todolistapiauth.png)

## <a name="building-hello-projects-from-scratch"></a><span data-ttu-id="df4b3-274">Sıfırdan Hello projeler derleme</span><span class="sxs-lookup"><span data-stu-id="df4b3-274">Building hello projects from scratch</span></span>
<span data-ttu-id="df4b3-275">Merhaba iki Web API projeleri hello kullanarak oluşturulmuş **Azure API uygulaması** proje şablonu ve bir Yapılacaklar listesi denetleyicisiyle değiştirerek hello varsayılan değerleri denetleyicisi.</span><span class="sxs-lookup"><span data-stu-id="df4b3-275">hello two Web API projects were created by using hello **Azure API App** project template and replacing hello default Values controller with a ToDoList controller.</span></span> 

<span data-ttu-id="df4b3-276">Bir Web API 2 arka uç ile bir AngularJS tek sayfalı uygulama hakkında bilgi çok oluşturmak için bkz: [ellere üzerindeki Laboratuvar: tek sayfa uygulama (SPA) ASP.NET Web API ve Angular.js yapı](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs).</span><span class="sxs-lookup"><span data-stu-id="df4b3-276">For information about how too create an AngularJS single-page application with a Web API 2 back end, see  [Hands On Lab: Build a Single Page Application (SPA) with ASP.NET Web API and Angular.js](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs).</span></span> <span data-ttu-id="df4b3-277">Hakkında bilgi için tooadd Azure AD kimlik doğrulama kodu, kaynakları aşağıdaki hello bakın:</span><span class="sxs-lookup"><span data-stu-id="df4b3-277">For information about how tooadd Azure AD authentication code, see hello following resources:</span></span>

* <span data-ttu-id="df4b3-278">[AngularJS tek güvenli hale getirme sayfasında Azure AD ile uygulamaları](../active-directory/active-directory-devquickstarts-angular.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-278">[Securing AngularJS Single Page Apps with Azure AD](../active-directory/active-directory-devquickstarts-angular.md).</span></span>
* [<span data-ttu-id="df4b3-279">ADAL JS v1 Tanıtımı</span><span class="sxs-lookup"><span data-stu-id="df4b3-279">Introducing ADAL JS v1</span></span>](http://www.cloudidentity.com/blog/2015/02/19/introducing-adal-js-v1/)

## <a name="troubleshooting"></a><span data-ttu-id="df4b3-280">Sorun giderme</span><span class="sxs-lookup"><span data-stu-id="df4b3-280">Troubleshooting</span></span>
[!INCLUDE [troubleshooting](../../includes/app-service-api-auth-troubleshooting.md)]

* <span data-ttu-id="df4b3-281">Todolistapı (orta katman) ve Todolistdataapı (veri katmanı) karıştırmayın emin olun.</span><span class="sxs-lookup"><span data-stu-id="df4b3-281">Make sure that you don't confuse ToDoListAPI (middle tier) and ToDoListDataAPI (data tier).</span></span> <span data-ttu-id="df4b3-282">Örneğin, kimlik doğrulama toohello orta katman API uygulaması, hello veri katmanı eklediğinizi doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="df4b3-282">For example, verify that you added authentication toohello middle tier API app, not hello data tier.</span></span> 
* <span data-ttu-id="df4b3-283">Merhaba AngularJS kaynak kodu başvuruları hello orta katman API uygulaması URL'sini (Todolistapı, Todolistdataapı değil) ve hello Azure AD istemci kimliği doğru olduğuna emin olun</span><span class="sxs-lookup"><span data-stu-id="df4b3-283">Make sure that hello AngularJS source code references hello middle tier API app URL (ToDoListAPI, not ToDoListDataAPI)and hello correct Azure AD client ID.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="df4b3-284">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="df4b3-284">Next steps</span></span>
<span data-ttu-id="df4b3-285">Bu öğreticide nasıl toouse bir API uygulaması için uygulama hizmeti kimlik doğrulama ve nasıl toocall hello API uygulaması kullanarak ADAL JS kitaplığı hello öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="df4b3-285">In this tutorial you learned how toouse App Service authentication for an API app and how toocall hello API app by using hello ADAL JS library.</span></span> <span data-ttu-id="df4b3-286">Merhaba sonraki öğreticide şunları nasıl çok öğreneceksiniz[hizmet senaryoları için güvenli erişim tooyour API uygulaması](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="df4b3-286">In hello next tutorial you'll learn how too[secure access tooyour API app for service-to-service scenarios](app-service-api-dotnet-service-principal-auth.md).</span></span>

