---
title: "Doğrulama - Microsoft tehdit modelleme aracı - Azure giriş | Microsoft Docs"
description: "Azaltıcı Etkenler tehdit modelleme Aracı kullanıma sunulan tehditleri"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: b7ce6f353cf8cf48d5fb038ee77b0d3fdae16fb7
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="d477b-103">Güvenlik çerçevesi: Giriş doğrulama | Azaltıcı Etkenler</span><span class="sxs-lookup"><span data-stu-id="d477b-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="d477b-104">Ürün/hizmet</span><span class="sxs-lookup"><span data-stu-id="d477b-104">Product/Service</span></span> | <span data-ttu-id="d477b-105">Makale</span><span class="sxs-lookup"><span data-stu-id="d477b-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="d477b-106">**Web uygulaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="d477b-107">XSLT güvenilmeyen stil sayfalarını kullanarak tüm dönüşümler için komut dosyası devre dışı bırak</span><span class="sxs-lookup"><span data-stu-id="d477b-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="d477b-108">Kullanıcı denetlenebilir içeriği içerebilir her sayfanın MIME otomatik algılaması dışında çevrilir emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="d477b-109">Sağlamlaştırmak veya XML varlık çözümleme devre dışı bırakma</span><span class="sxs-lookup"><span data-stu-id="d477b-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="d477b-110">HTTP.sys kullanan uygulamalar URL Standartlaştırma doğrulama gerçekleştirme</span><span class="sxs-lookup"><span data-stu-id="d477b-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="d477b-111">Uygun denetimleri dosyaların kullanıcılardan kabul ederken karşılandığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="d477b-112">Tür kullanımı uyumlu parametreleri veri erişimi için Web uygulamasında kullanıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="d477b-113">Ayrı model bağlama sınıflarını kullanın veya MVC yığın atama güvenlik açığı önlemek için bağlama filtresi listeler</span><span class="sxs-lookup"><span data-stu-id="d477b-113">Use separate model binding classes or binding filter lists to prevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="d477b-114">Güvenilmeyen web çıkış işleme önce kodlama</span><span class="sxs-lookup"><span data-stu-id="d477b-114">Encode untrusted web output prior to rendering</span></span>](#rendering)</li><li>[<span data-ttu-id="d477b-115">Giriş doğrulaması ve tüm dize türünde Model özelliklerini filtrelemesine</span><span class="sxs-lookup"><span data-stu-id="d477b-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="d477b-116">Tüm karakterleri, örneğin, Zengin Metin Düzenleyicisi'ni kabul eden form alanlarını temizleme işlemi uygulanmalıdır</span><span class="sxs-lookup"><span data-stu-id="d477b-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="d477b-117">DOM öğeleri yerleşik kodlama olmayan havuzlarını atamayın</span><span class="sxs-lookup"><span data-stu-id="d477b-117">Do not assign DOM elements to sinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="d477b-118">Tüm doğrulama uygulama içinde yeniden yönlendirmeleri kapalı veya güvenli bir şekilde tamamlandı</span><span class="sxs-lookup"><span data-stu-id="d477b-118">Validate all redirects within the application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="d477b-119">Uygulama giriş doğrulaması denetleyicisi yöntemler tarafından kabul edilen tüm dize türü parametreleri</span><span class="sxs-lookup"><span data-stu-id="d477b-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="d477b-120">Normal ifade DoS nedeniyle hatalı normal ifadeler önlemek için işleme için üst sınır zaman aşımını ayarlama</span><span class="sxs-lookup"><span data-stu-id="d477b-120">Set upper limit timeout for regular expression processing to prevent DoS due to bad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="d477b-121">Razor görünümleri Html.Raw kullanmaktan kaçının</span><span class="sxs-lookup"><span data-stu-id="d477b-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="d477b-122">**Veritabanı**</span><span class="sxs-lookup"><span data-stu-id="d477b-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="d477b-123">Dinamik sorgular saklı yordamlarda kullanmayın</span><span class="sxs-lookup"><span data-stu-id="d477b-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="d477b-124">**Web API**</span><span class="sxs-lookup"><span data-stu-id="d477b-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="d477b-125">Model doğrulama Web API yöntemlerini yapıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="d477b-126">Web API yöntemleri tarafından kabul edilen tüm dize tür parametrelerindeki giriş doğrulaması uygulama</span><span class="sxs-lookup"><span data-stu-id="d477b-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="d477b-127">Tür kullanımı uyumlu parametreleri Web API'si veri erişimi için kullanıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="d477b-128">**Azure belge DB**</span><span class="sxs-lookup"><span data-stu-id="d477b-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="d477b-129">DocumentDB için parametreli SQL sorgularını kullan</span><span class="sxs-lookup"><span data-stu-id="d477b-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="d477b-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="d477b-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="d477b-131">Şema bağlama aracılığıyla WCF girişi doğrulama</span><span class="sxs-lookup"><span data-stu-id="d477b-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="d477b-132">Parametre denetçiler aracılığıyla WCF girişi doğrulama</span><span class="sxs-lookup"><span data-stu-id="d477b-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="d477b-133"><a id="disable-xslt"></a>XSLT güvenilmeyen stil sayfalarını kullanarak tüm dönüşümler için komut dosyası devre dışı bırak</span><span class="sxs-lookup"><span data-stu-id="d477b-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="d477b-134">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-134">Title</span></span>                   | <span data-ttu-id="d477b-135">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-136">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-136">**Component**</span></span>               | <span data-ttu-id="d477b-137">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-137">Web Application</span></span> | 
| <span data-ttu-id="d477b-138">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-138">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-139">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-139">Build</span></span> |  
| <span data-ttu-id="d477b-140">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-140">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-141">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-141">Generic</span></span> |
| <span data-ttu-id="d477b-142">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-142">**Attributes**</span></span>              | <span data-ttu-id="d477b-143">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-143">N/A</span></span>  |
| <span data-ttu-id="d477b-144">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-144">**References**</span></span>              | <span data-ttu-id="d477b-145">[XSLT güvenlik](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript özelliği](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="d477b-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="d477b-146">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-146">**Steps**</span></span> | <span data-ttu-id="d477b-147">XSLT destekleyen kullanarak stil sayfaları komut dosyası `<msxml:script>` öğesi.</span><span class="sxs-lookup"><span data-stu-id="d477b-147">XSLT supports scripting inside style sheets using the `<msxml:script>` element.</span></span> <span data-ttu-id="d477b-148">Bu, bir XSLT dönüşümü kullanılacak özel işlevler sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-148">This allows custom functions to be used in an XSLT transformation.</span></span> <span data-ttu-id="d477b-149">Komut dosyası dönüştürme gerçekleştirme işlem bağlamı altında yürütülür.</span><span class="sxs-lookup"><span data-stu-id="d477b-149">The script is executed under the context of the process performing the transform.</span></span> <span data-ttu-id="d477b-150">XSLT komut dosyası, güvenilmeyen kodun yürütülmesini engellemek için bir ortamda güvenilmeyen zaman devre dışı bırakılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-150">XSLT script must be disabled when in an untrusted environment to prevent execution of untrusted code.</span></span> <span data-ttu-id="d477b-151">*.NET kullanıyorsanız:* varsayılan olarak XSLT komut dosyası devre dışı; ancak, bunu açıkça aracılığıyla etkinleştirilmemiş olduğundan emin olmalısınız `XsltSettings.EnableScript` özelliği.</span><span class="sxs-lookup"><span data-stu-id="d477b-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through the `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="d477b-152">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET TO false
```

### <a name="example"></a><span data-ttu-id="d477b-153">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-153">Example</span></span>
<span data-ttu-id="d477b-154">XSLT komut dosyası, MSXML 6.0 kullanarak kullanıyorsanız, varsayılan olarak devre dışıdır; Ancak, bunu açıkça AllowXsltScript XML DOM nesnesi özelliği üzerinden etkinleştirilmemiş olduğundan emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="d477b-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through the XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET TO false
```

### <a name="example"></a><span data-ttu-id="d477b-155">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-155">Example</span></span>
<span data-ttu-id="d477b-156">MSXML 5 kullanıyorsanız veya aşağıda XSLT komut dosyası varsayılan olarak etkindir ve açıkça gerekir devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="d477b-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="d477b-157">XML DOM nesnesi özelliğini AllowXsltScript false olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-157">Set the XML DOM object property AllowXsltScript to false.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting to false disables XSLT scripting.
```

## <span data-ttu-id="d477b-158"><a id="out-sniffing"></a>Kullanıcı denetlenebilir içeriği içerebilir her sayfanın MIME otomatik algılaması dışında çevrilir emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="d477b-159">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-159">Title</span></span>                   | <span data-ttu-id="d477b-160">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-161">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-161">**Component**</span></span>               | <span data-ttu-id="d477b-162">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-162">Web Application</span></span> | 
| <span data-ttu-id="d477b-163">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-163">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-164">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-164">Build</span></span> |  
| <span data-ttu-id="d477b-165">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-165">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-166">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-166">Generic</span></span> |
| <span data-ttu-id="d477b-167">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-167">**Attributes**</span></span>              | <span data-ttu-id="d477b-168">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-168">N/A</span></span>  |
| <span data-ttu-id="d477b-169">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-169">**References**</span></span>              | [<span data-ttu-id="d477b-170">IE8 Güvenlik bölümü V - kapsamlı koruma</span><span class="sxs-lookup"><span data-stu-id="d477b-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="d477b-171">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-171">**Steps**</span></span> | <p><span data-ttu-id="d477b-172">Kullanıcı denetlenebilir içeriği içerebilir her bir sayfa için HTTP üstbilgisi kullanmalısınız `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="d477b-172">For each page that could contain user controllable content, you must use the HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="d477b-173">Bu gereksinim ile uyum sağlamak için gereken üstbilgi kullanıcı denetlenebilir içerik içerebilecek sayfalar için sayfa tarafından ayarlayabilirsiniz veya genel uygulamadaki tüm sayfalar için ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-173">To comply with this requirement, you can either set the required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in the application.</span></span></p><p><span data-ttu-id="d477b-174">Her bir web sunucusundan teslim dosya ilişkili bir türü [MIME türü](http://en.wikipedia.org/wiki/Mime_type) (olarak da adlandırılan bir *içerik türü*) (diğer bir deyişle, görüntü, metin, uygulama, vb.) içerik yapısını açıklar</span><span class="sxs-lookup"><span data-stu-id="d477b-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes the nature of the content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="d477b-175">Geliştiriciler kendi içerik MIME sniffed olmamalıdır belirtmek izin veren bir HTTP üstbilgisi içerik türü seçenekleri X başlığıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-175">The X-Content-Type-Options header is an HTTP header that allows developers to specify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="d477b-176">Bu üst MIME algılaması saldırıları azaltmak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="d477b-176">This header is designed to mitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="d477b-177">Internet Explorer 8 (IE8) bu başlığı için destek eklendi</span><span class="sxs-lookup"><span data-stu-id="d477b-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="d477b-178">Yalnızca Internet Explorer 8 (IE8) kullanıcılarının X-içerik-tür-seçeneklerden yararlanabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="d477b-179">Internet Explorer'ın önceki sürümlerini şu anda X-içerik-tür-Options üstbilgisi dikkate almaz</span><span class="sxs-lookup"><span data-stu-id="d477b-179">Previous versions of Internet Explorer do not currently respect the X-Content-Type-Options header</span></span></p><p><span data-ttu-id="d477b-180">Bir MIME algılaması çevirin özelliği uygulamak için yalnızca ana tarayıcılar Internet Explorer 8 (ve üstü) var.</span><span class="sxs-lookup"><span data-stu-id="d477b-180">Internet Explorer 8 (and later) are the only major browsers to implement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="d477b-181">Bu tarayıcılar da söz diziminin dahil etmek için diğer önemli tarayıcılar (Firefox, Safari, Chrome) benzer özellikleri varsa ve uyguladığınızda, bu öneri güncelleştirilir</span><span class="sxs-lookup"><span data-stu-id="d477b-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated to include syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="d477b-182">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-182">Example</span></span>
<span data-ttu-id="d477b-183">Uygulamadaki tüm sayfalar için genel gerekli üstbilgisi etkinleştirmek için aşağıdakilerden birini yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d477b-183">To enable the required header globally for all pages in the application, you can do one of the following:</span></span> 

* <span data-ttu-id="d477b-184">Uygulama Internet Information Services (IIS) 7 tarafından barındırılıyorsa web.config dosyasında üstbilgisi Ekle</span><span class="sxs-lookup"><span data-stu-id="d477b-184">Add the header in the web.config file if the application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="d477b-185">Genel Uygulama aracılığıyla üstbilgisi eklemek\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="d477b-185">Add the header through the global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="d477b-186">Uygulama özel HTTP modülü</span><span class="sxs-lookup"><span data-stu-id="d477b-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="d477b-187">Yalnızca belirli sayfaları için gerekli üstbilgisi tek tek yanıtlarını ekleyerek etkinleştirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d477b-187">You can enable the required header only for specific pages by adding it to individual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="d477b-188"><a id="xml-resolution"></a>Sağlamlaştırmak veya XML varlık çözümleme devre dışı bırakma</span><span class="sxs-lookup"><span data-stu-id="d477b-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="d477b-189">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-189">Title</span></span>                   | <span data-ttu-id="d477b-190">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-191">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-191">**Component**</span></span>               | <span data-ttu-id="d477b-192">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-192">Web Application</span></span> | 
| <span data-ttu-id="d477b-193">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-193">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-194">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-194">Build</span></span> |  
| <span data-ttu-id="d477b-195">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-195">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-196">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-196">Generic</span></span> |
| <span data-ttu-id="d477b-197">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-197">**Attributes**</span></span>              | <span data-ttu-id="d477b-198">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-198">N/A</span></span>  |
| <span data-ttu-id="d477b-199">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-199">**References**</span></span>              | <span data-ttu-id="d477b-200">[XML varlık genişletme](http://capec.mitre.org/data/definitions/197.html), [XML hizmet reddi saldırılarına ve savunma](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML güvenliğine genel bakış](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [MSXML kod güvenliğini sağlamak için en iyi uygulamalar](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protokolü başvurusu](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [dış başvuruları çözme](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="d477b-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="d477b-201">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-201">**Steps**</span></span>| <p><span data-ttu-id="d477b-202">Yaygın olarak kullanılmaz rağmen belge içinde veya dış kaynaklardan tanımlanan değerlerle makrosu varlıklar genişletmek XML Ayrıştırıcı sağlayan XML özelliği yoktur.</span><span class="sxs-lookup"><span data-stu-id="d477b-202">Although it is not widely used, there is a feature of XML that allows the XML parser to expand macro entities with values defined either within the document itself or from external sources.</span></span> <span data-ttu-id="d477b-203">Örneğin, belgeyi bir varlık "Şirket" adı "Microsoft" değeriyle şekilde tanımlayabilir, her zaman metin "&companyname;" belgede bunu otomatik olarak değiştirilir Microsoft metinle görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d477b-203">For example, the document might define an entity "companyname" with the value "Microsoft," so that every time the text "&companyname;" appears in the document, it is automatically replaced with the text Microsoft.</span></span> <span data-ttu-id="d477b-204">Veya, belgeyi bir varlık "Microsoft hisse senedi geçerli değeri getirmek için bir dış web hizmeti başvuran MSFTStock" tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-204">Or, the document might define an entity "MSFTStock" that references an external web service to fetch the current value of Microsoft stock.</span></span></p><p><span data-ttu-id="d477b-205">Sonra her zaman "&MSFTStock;", otomatik olarak değiştirilir geçerli stok fiyatıyla belgede görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d477b-205">Then any time "&MSFTStock;" appears in the document, it is automatically replaced with the current stock price.</span></span> <span data-ttu-id="d477b-206">Ancak, bu işlev reddi (DoS) hizmet koşulları oluşturmak için kötüye.</span><span class="sxs-lookup"><span data-stu-id="d477b-206">However, this functionality can be abused to create denial of service (DoS) conditions.</span></span> <span data-ttu-id="d477b-207">Bir saldırgan sistem üzerindeki tüm kullanılabilir bellek tüketir üstel genişletme XML Bomba oluşturmak için birden çok varlık yerleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-207">An attacker can nest multiple entities to create an exponential expansion XML bomb that consumes all available memory on the system.</span></span> </p><p><span data-ttu-id="d477b-208">Alternatif olarak, kendisinin geri akışları bir dış başvuru sonsuz bir veri miktarı oluşturabilir veya, yalnızca iş parçacığı askıda kalır.</span><span class="sxs-lookup"><span data-stu-id="d477b-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs the thread.</span></span> <span data-ttu-id="d477b-209">Sonuç olarak, tamamen kendi uygulama değil, kullanıyorsanız veya el ile bellek ve bu işlevselliği kesinlikle gerekli değilse, uygulama için varlık çözümlemesi tüketebileceği süre miktarını sınırlamak tüm takımlar iç ve/veya dış XML varlık çözümleme devre dışı bırakmalısınız.</span><span class="sxs-lookup"><span data-stu-id="d477b-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit the amount of memory and time that the application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="d477b-210">Varlık çözümleme, uygulamanız tarafından gerekli değildir, sonra da devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="d477b-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="d477b-211">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-211">Example</span></span>
<span data-ttu-id="d477b-212">.NET Framework kodunu aşağıdaki yaklaşımlardan kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d477b-212">For .NET Framework code, you can use the following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="d477b-213">Unutmayın varsayılan değerini `ProhibitDtd` içinde `XmlReaderSettings` ancak doğrudur `XmlTextReader` false olur.</span><span class="sxs-lookup"><span data-stu-id="d477b-213">Note that the default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="d477b-214">In kapsama kullanıyorsanız, ProhibitDtd açıkça true olarak ayarlanmış gerekmez, ancak güvenliği artırmak amacıyla için bunu yapmanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-214">If you are using XmlReaderSettings, you do not need to set ProhibitDtd to true explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="d477b-215">Ayrıca XmlDocument sınıfı varsayılan varlık çözümleme izin verildiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-215">Also note that the XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="d477b-216">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-216">Example</span></span>
<span data-ttu-id="d477b-217">Varlık çözümleme XML belgelerine uymasıdır için devre dışı bırakmak için `XmlDocument.Load(XmlReader)` aşırı yükleme yöntemi ve uygun özellikleri XmlReader bağımsız değişkeni çözümleme, devre dışı bırakmak için aşağıdaki kodda gösterildiği şekilde ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="d477b-217">To disable entity resolution for XmlDocuments, use the `XmlDocument.Load(XmlReader)` overload of the Load method and set the appropriate properties in the XmlReader argument to disable resolution, as illustrated in the following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="d477b-218">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-218">Example</span></span>
<span data-ttu-id="d477b-219">Varlık çözümlemeyi devre dışı bırakma, uygulamanız için mümkün değilse, uygulamanızın gereksinimlerine göre uygun bir değere XmlReaderSettings.MaxCharactersFromEntities özelliğini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-219">If disabling entity resolution is not possible for your application, set the XmlReaderSettings.MaxCharactersFromEntities property to a reasonable value according to your application's needs.</span></span> <span data-ttu-id="d477b-220">Bu olası üstel genişletme DoS saldırıları etkisini sınırlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-220">This will limit the impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="d477b-221">Aşağıdaki kod, bu yaklaşımın bir örnek sağlar:</span><span class="sxs-lookup"><span data-stu-id="d477b-221">The following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="d477b-222">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-222">Example</span></span>
<span data-ttu-id="d477b-223">Satır içi varlıkları çözmek ancak bunu gerekiyorsa dış varlıklar, çözümlemeye gerekmez XmlReaderSettings.XmlResolver özelliği null olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-223">If you need to resolve inline entities but do not need to resolve external entities, set the XmlReaderSettings.XmlResolver property to null.</span></span> <span data-ttu-id="d477b-224">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="d477b-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="d477b-225">Msxml6 içinde ProhibitDTD true (devre dışı bırakma DTD işleme) varsayılan olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="d477b-225">Note that in MSXML6, ProhibitDTD is set to true (disabling DTD processing) by default.</span></span> <span data-ttu-id="d477b-226">Apple OSX/iOS kodu için kullanabileceğiniz iki XML ayrıştırıcıları vardır: NSXMLParser ve libXML2.</span><span class="sxs-lookup"><span data-stu-id="d477b-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="d477b-227"><a id="app-verification"></a>HTTP.sys kullanan uygulamalar URL Standartlaştırma doğrulama gerçekleştirme</span><span class="sxs-lookup"><span data-stu-id="d477b-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="d477b-228">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-228">Title</span></span>                   | <span data-ttu-id="d477b-229">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-230">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-230">**Component**</span></span>               | <span data-ttu-id="d477b-231">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-231">Web Application</span></span> | 
| <span data-ttu-id="d477b-232">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-232">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-233">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-233">Build</span></span> |  
| <span data-ttu-id="d477b-234">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-234">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-235">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-235">Generic</span></span> |
| <span data-ttu-id="d477b-236">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-236">**Attributes**</span></span>              | <span data-ttu-id="d477b-237">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-237">N/A</span></span>  |
| <span data-ttu-id="d477b-238">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-238">**References**</span></span>              | <span data-ttu-id="d477b-239">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-239">N/A</span></span>  |
| <span data-ttu-id="d477b-240">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-240">**Steps**</span></span> | <p><span data-ttu-id="d477b-241">Http.sys kullanan herhangi bir uygulama bu yönergeleri izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="d477b-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="d477b-242">URL uzunluğu en fazla 16.384 karakter (ASCII veya Unicode) sınırlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-242">Limit the URL length to no more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="d477b-243">Varsayılan Internet Information Services (IIS) 6 ayarına göre mutlak URL uzunluğu üst sınırı budur.</span><span class="sxs-lookup"><span data-stu-id="d477b-243">This is the absolute maximum URL length based on the default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="d477b-244">Web siteleri bu değerden daha kısa bir süre için mümkünse çaba</span><span class="sxs-lookup"><span data-stu-id="d477b-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="d477b-245">Bunlar kurallı kullanım kuralları .NET FX yararlanır gibi standart .NET Framework dosyası g/ç sınıfları (örneğin, FILESTREAM) kullanın</span><span class="sxs-lookup"><span data-stu-id="d477b-245">Use the standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of the canonicalization rules in the .NET FX</span></span></li><li><span data-ttu-id="d477b-246">Açıkça bilinen dosya adları, bir izin verilenler listesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="d477b-247">Açıkça bilinen dosya türleri, değil hizmet UrlScan reddeder reddetme: exe bat, cmd, com, htw, IDA, IDQ, htr, IDC, shtm [l], stm, yazıcı, INI, pol, verilerinin dosyaları</span><span class="sxs-lookup"><span data-stu-id="d477b-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="d477b-248">Aşağıdaki özel durumları yakalamak:</span><span class="sxs-lookup"><span data-stu-id="d477b-248">Catch the following exceptions:</span></span><ul><li><span data-ttu-id="d477b-249">System.ArgumentException (için aygıt adları)</span><span class="sxs-lookup"><span data-stu-id="d477b-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="d477b-250">System.NotSupportedException (için veri akışları)</span><span class="sxs-lookup"><span data-stu-id="d477b-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="d477b-251">System.IO.FileNotFoundException (için geçersiz kaçış karakterli dosya adları)</span><span class="sxs-lookup"><span data-stu-id="d477b-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="d477b-252">System.IO.directorynotfoundexception (için geçersiz kaçış karakterli dizin)</span><span class="sxs-lookup"><span data-stu-id="d477b-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="d477b-253">*Sağlamadığı* Win32 dosya g/ç API'leri duyurmak.</span><span class="sxs-lookup"><span data-stu-id="d477b-253">*Do not* call out to Win32 file I/O APIs.</span></span> <span data-ttu-id="d477b-254">Geçersiz bir URL, düzgün biçimde 400 hatası kullanıcıya geri götürmek ve gerçek hata oturum.</span><span class="sxs-lookup"><span data-stu-id="d477b-254">On an invalid URL gracefully return a 400 error to the user, and log the real error.</span></span></li></ul>|

## <span data-ttu-id="d477b-255"><a id="controls-users"></a>Uygun denetimleri dosyaların kullanıcılardan kabul ederken karşılandığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="d477b-256">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-256">Title</span></span>                   | <span data-ttu-id="d477b-257">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-258">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-258">**Component**</span></span>               | <span data-ttu-id="d477b-259">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-259">Web Application</span></span> | 
| <span data-ttu-id="d477b-260">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-260">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-261">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-261">Build</span></span> |  
| <span data-ttu-id="d477b-262">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-262">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-263">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-263">Generic</span></span> |
| <span data-ttu-id="d477b-264">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-264">**Attributes**</span></span>              | <span data-ttu-id="d477b-265">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-265">N/A</span></span>  |
| <span data-ttu-id="d477b-266">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-266">**References**</span></span>              | <span data-ttu-id="d477b-267">[Kısıtlanmamış karşıya dosya yükleme](https://www.owasp.org/index.php/Unrestricted_File_Upload), [dosya imza tablosu](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="d477b-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="d477b-268">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-268">**Steps**</span></span> | <p><span data-ttu-id="d477b-269">Karşıya yüklenen dosyaların uygulamaları için önemli bir riski temsil eder.</span><span class="sxs-lookup"><span data-stu-id="d477b-269">Uploaded files represent a significant risk to applications.</span></span></p><p><span data-ttu-id="d477b-270">İlk adımda saldırıların çoğu saldırıya için sisteme biraz kod almaktır.</span><span class="sxs-lookup"><span data-stu-id="d477b-270">The first step in many attacks is to get some code to the system to be attacked.</span></span> <span data-ttu-id="d477b-271">Ardından saldırı yürütülen kod almanın bir yolu bulmak yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="d477b-271">Then the attack only needs to find a way to get the code executed.</span></span> <span data-ttu-id="d477b-272">Bir dosyayı karşıya yükleme kullanarak ilk adımı gerçekleştirmek saldırgan yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="d477b-272">Using a file upload helps the attacker accomplish the first step.</span></span> <span data-ttu-id="d477b-273">Sınırsız dosya karşıya yükleme sonuçlarını tam sistem devralma, aşırı yüklenmiş dosya sistemi ya da veritabanı, arka uç sistemleri ve basit tahrifatı saldırılarına iletme de dahil olmak üzere değişebilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-273">The consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks to back-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="d477b-274">Yüklenen dosya ile uygulama yaptığı ve özellikle depolandığı bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-274">It depends on what the application does with the uploaded file and especially where it is stored.</span></span> <span data-ttu-id="d477b-275">Sunucu tarafı dosya yüklemeleriyle doğrulanması eksik.</span><span class="sxs-lookup"><span data-stu-id="d477b-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="d477b-276">Güvenlik denetimleri aşağıdaki dosyayı karşıya yüklemeyi işlevselliği için uygulanması gerekir:</span><span class="sxs-lookup"><span data-stu-id="d477b-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="d477b-277">Dosya uzantısı onay (izin verilen dosya türü için geçerli bir kümesi kabul)</span><span class="sxs-lookup"><span data-stu-id="d477b-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="d477b-278">En büyük dosya boyutu sınırı</span><span class="sxs-lookup"><span data-stu-id="d477b-278">Maximum file size limit</span></span></li><li><span data-ttu-id="d477b-279">Dosya için webroot yüklenmelidir değil; konum, sistem dışı sürücü üzerinde bir dizin olmalıdır</span><span class="sxs-lookup"><span data-stu-id="d477b-279">File should not be uploaded to webroot; the location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="d477b-280">Adlandırma kuralı izlenmesi gereken, karşıya yüklenen dosya adına sahip dosyanın önlemek amacıyla bazı rastgele, üzerine yazar</span><span class="sxs-lookup"><span data-stu-id="d477b-280">Naming convention should be followed, such that the uploaded file name have some randomness, so as to prevent file overwrites</span></span></li><li><span data-ttu-id="d477b-281">Dosyaları diske yazmadan önce virüsten koruma için taranmalıdır</span><span class="sxs-lookup"><span data-stu-id="d477b-281">Files should be scanned for anti-virus before writing to the disk</span></span></li><li><span data-ttu-id="d477b-282">Dosya adı ve diğer meta verileri (örneğin, dosya yolu) için kötü amaçlı karakter doğrulandığından emin olmak</span><span class="sxs-lookup"><span data-stu-id="d477b-282">Ensure that the file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="d477b-283">Dosya biçimi imza işaretlenmelidir, bir kullanıcının masqueraded bir dosyayı karşıya yüklemeyi önlemek için (örneğin, bir exe dosyası için txt uzantısı değiştirerek karşıya yükleme)</span><span class="sxs-lookup"><span data-stu-id="d477b-283">File format signature should be checked, to prevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension to txt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="d477b-284">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-284">Example</span></span>
<span data-ttu-id="d477b-285">Dosya biçimi imza doğrulaması ilgili son noktası için Ayrıntılar sınıfına bakın:</span><span class="sxs-lookup"><span data-stu-id="d477b-285">For the last point regarding file format signature validation, refer to the class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="d477b-286"><a id="typesafe"></a>Tür kullanımı uyumlu parametreleri veri erişimi için Web uygulamasında kullanıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="d477b-287">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-287">Title</span></span>                   | <span data-ttu-id="d477b-288">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-289">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-289">**Component**</span></span>               | <span data-ttu-id="d477b-290">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-290">Web Application</span></span> | 
| <span data-ttu-id="d477b-291">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-291">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-292">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-292">Build</span></span> |  
| <span data-ttu-id="d477b-293">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-293">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-294">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-294">Generic</span></span> |
| <span data-ttu-id="d477b-295">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-295">**Attributes**</span></span>              | <span data-ttu-id="d477b-296">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-296">N/A</span></span>  |
| <span data-ttu-id="d477b-297">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-297">**References**</span></span>              | <span data-ttu-id="d477b-298">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-298">N/A</span></span>  |
| <span data-ttu-id="d477b-299">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-299">**Steps**</span></span> | <p><span data-ttu-id="d477b-300">Kullanırsanız parametreler koleksiyonu, SQL davranır yerine yürütülebilir kod olarak değişmez değer olarak bir giriş olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-300">If you use the Parameters collection, SQL treats the input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="d477b-301">Parametreler koleksiyonu giriş veri türü ve uzunluğu kısıtlamalar uygulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-301">The Parameters collection can be used to enforce type and length constraints on input data.</span></span> <span data-ttu-id="d477b-302">Değer aralığının dışında bir özel durum tetikler.</span><span class="sxs-lookup"><span data-stu-id="d477b-302">Values outside of the range trigger an exception.</span></span> <span data-ttu-id="d477b-303">Tür kullanımı uyumlu SQL parametre kullanılmazsa, saldırganlar filtrelenmemiş girişinde katıştırılmış ekleme saldırıları yürütmek olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-303">If type-safe SQL parameters are not used, attackers might be able to execute injection attacks that are embedded in the unfiltered input.</span></span></p><p><span data-ttu-id="d477b-304">Tür güvenli parametreleri SQL sorguları oluşturmak filtrelenmemiş girişle oluşabilecek olası SQL ekleme saldırıları önlemek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-304">Use type safe parameters when constructing SQL queries to avoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="d477b-305">Saklı yordamlar ve dinamik SQL deyimleri ile tür güvenli parametreleri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="d477b-306">Parametreleri yürütülebilir kod değil de, veritabanı tarafından değişmez değerler olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-306">Parameters are treated as literal values by the database and not as executable code.</span></span> <span data-ttu-id="d477b-307">Parametreler, türü ve uzunluğu için de denetlenir.</span><span class="sxs-lookup"><span data-stu-id="d477b-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="d477b-308">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-308">Example</span></span> 
<span data-ttu-id="d477b-309">Aşağıdaki kod tür güvenli parametreleri ile SqlParameterCollection bir saklı yordamı çağrılırken kullanmayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="d477b-309">The following code shows how to use type safe parameters with the SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="d477b-310">Önceki kod örneğinde giriş değeri 11 karakterden uzun olamaz.</span><span class="sxs-lookup"><span data-stu-id="d477b-310">In the preceding code example, the input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="d477b-311">Veri türü veya parametresi tarafından tanımlanan uzunluk uyuşmadığı SqlParameter sınıfı bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d477b-311">If the data does not conform to the type or length defined by the parameter, the SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="d477b-312"><a id="binding-mvc"></a>Ayrı model bağlama sınıflarını kullanın veya MVC yığın atama güvenlik açığı önlemek için bağlama filtresi listeler</span><span class="sxs-lookup"><span data-stu-id="d477b-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists to prevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="d477b-313">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-313">Title</span></span>                   | <span data-ttu-id="d477b-314">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-315">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-315">**Component**</span></span>               | <span data-ttu-id="d477b-316">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-316">Web Application</span></span> | 
| <span data-ttu-id="d477b-317">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-317">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-318">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-318">Build</span></span> |  
| <span data-ttu-id="d477b-319">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-319">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-320">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-321">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-321">**Attributes**</span></span>              | <span data-ttu-id="d477b-322">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-322">N/A</span></span>  |
| <span data-ttu-id="d477b-323">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-323">**References**</span></span>              | <span data-ttu-id="d477b-324">[Meta veri öznitelikleri](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [ortak anahtarı Güvenlik Açığı ve azaltma](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [tam kılavuzu için ASP.NET MVC yığın atamasını](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [MVC kullanarak EF ile çalışmaya başlama](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="d477b-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide to Mass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="d477b-325">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-325">**Steps**</span></span> | <ul><li><span data-ttu-id="d477b-326">**Güvenlik açıkları aşırı gönderim için ne zaman görmeliyim? -** Güvenlik açıkları aşırı gönderim giriş kullanıcıdan modeli sınıfları bağlamak herhangi bir yeri oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="d477b-327">MVC gibi çerçeveleri düz eski CLR nesnelerini (POCOs) dahil olmak üzere özel .NET sınıfları kullanıcı verilerini temsil edebilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="d477b-328">MVC kullanıcı girişi ilgilenmek için kullanışlı bir temsilini sağlayarak bu modeli sınıfları isteği verilerle otomatik olarak doldurur.</span><span class="sxs-lookup"><span data-stu-id="d477b-328">MVC automatically populates these model classes with data from the request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="d477b-329">Bu sınıfların kullanıcı tarafından ayarlanmamalıdır özellikleri eklediğinizde, uygulamanın kullanıcı denetimi uygulama hiçbir zaman amaçlı veri sağlayan, aşırı gönderim saldırılarına için saldırılara açık olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-329">When these classes include properties that should not be set by the user, the application can be vulnerable to over-posting attacks, which allow user control of data that the application never intended.</span></span> <span data-ttu-id="d477b-330">MVC model bağlama gibi veritabanına erişmek Entity Framework gibi nesne/ilişkisel mappers gibi teknolojileri genellikle ayrıca veritabanı verileri temsil etmek üzere POCO nesnelerini kullanma desteği.</span><span class="sxs-lookup"><span data-stu-id="d477b-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects to represent database data.</span></span> <span data-ttu-id="d477b-331">Bu veri modeli sınıflar kullanıcı girişi ile ilgili MVC yaptığı gibi veritabanı verileriyle ilgili olarak aynı kolaylık sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-331">These data model classes provide the same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="d477b-332">MVC ve veritabanı POCO nesneleri gibi benzer modelleri desteklemediğinden kolayca hem amacıyla aynı sınıfları yeniden gibi görünüyor.</span><span class="sxs-lookup"><span data-stu-id="d477b-332">Because both MVC and the database support similar models, like POCO objects, it seems easy to reuse the same classes for both purposes.</span></span> <span data-ttu-id="d477b-333">Sorunları ayrılması korumak bu yöntem başarısız olur ve istenmeyen özellikleri atlayarak nakil saldırılarını etkinleştirme model bağlama için Burada sunulan tek bir ortak alan olduğunu.</span><span class="sxs-lookup"><span data-stu-id="d477b-333">This practice fails to preserve separation of concerns, and it is one common area where unintended properties are exposed to model binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="d477b-334">**Neden ı my filtrelenmemiş veritabanı modeli sınıflarını parametre olarak my MVC Eylemler kullanmamanız gerekir? -** Çünkü MVC model bağlama bağlamak herhangi bir şey bu sınıfta.</span><span class="sxs-lookup"><span data-stu-id="d477b-334">**Why shouldn't I use my unfiltered database model classes as parameters to my MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="d477b-335">Verilerin görünümünüzde bile görünmüyorsa, kötü niyetli bir kullanıcının dahil bu verilerle bir HTTP isteği gönderebilir ve eyleminizi veritabanı sınıfı için kullanıcı girişi kabul etmelidir veri şekli olduğunu söylüyor çünkü MVC gladly onu bağlarsınız.</span><span class="sxs-lookup"><span data-stu-id="d477b-335">Even if the data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is the shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="d477b-336">**Model bağlama için kullanılan şekli hakkında neden önemli? -** Kullanarak ASP.NET MVC model bağlama aşırı geniş kapsamlı modellerle aşırı gönderim saldırılarına uygulamayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="d477b-336">**Why should I care about the shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application to over-posting attacks.</span></span> <span data-ttu-id="d477b-337">Atlayarak nakil hedeflenen, bir öğe için bir fiyat veya bir hesap için güvenlik ayrıcalıklarını geçersiz kılma gibi geliştirici ötesinde uygulama verileri değiştirmek saldırganlar sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-337">Over-posting could enable attackers to change application data beyond what the developer intended, such as overriding the price for an item or the security privileges for an account.</span></span> <span data-ttu-id="d477b-338">Uygulamalar, hangi güvenilmeyen girişi model bağlama aracılığıyla izin vermek için eyleme özgü modelleri (veya belirli izin verilen özellik filtresi listeleri) açık bir sağlamak için bağlama sözleşme kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-338">Applications should use action-specific binding models (or specific allowed property filter lists) to provide an explicit contract for what untrusted input to allow via model binding.</span></span></li><li><span data-ttu-id="d477b-339">**Kod yalnızca çoğaltma ayrı bağlama modelleri sorun mu yaşıyorsunuz? -** Hayır, sağlasa da, sorunları ayrılması yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="d477b-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="d477b-340">Eylem yöntemleri veritabanı modellerinde yeniden kullanırsanız, sınıf bir HTTP isteğinin kullanıcı tarafından ayarlanmış herhangi bir özelliği (veya alt özellik) yorumlarını.</span><span class="sxs-lookup"><span data-stu-id="d477b-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by the user in an HTTP request.</span></span> <span data-ttu-id="d477b-341">MVC yapmak istediğinizi değil ise, bir filtre listesi veya hangi verileri, bunun yerine Giriş kullanıcıdan gelebilir MVC göstermek için ayrı sınıf şeklin gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-341">If that is not what you want MVC to do, you need a filter list or a separate class shape to show MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="d477b-342">**Kullanıcı girişi için ayrı bağlama modelleri varsa, my veri ek açıklaması öznitelikleri yinelenen var mı? -** Gerekmez.</span><span class="sxs-lookup"><span data-stu-id="d477b-342">**If I have separate binding models for user input, do I have to duplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="d477b-343">Model bağlama sınıfı meta bağlamak için veritabanı model sınıfını MetadataTypeAttribute kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-343">You can use MetadataTypeAttribute on the database model class to link to the metadata on a model binding class.</span></span> <span data-ttu-id="d477b-344">Yalnızca MetadataTypeAttribute tarafından başvurulan türü (daha az özellik ancak fazla sahip olabilir) başvuru türünde bir alt olması gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-344">Just note that the type referenced by the MetadataTypeAttribute must be a subset of the referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="d477b-345">**Verileri geri ve İleri kullanıcı giriş modelleri ve veritabanı modelleri arasında taşıma yorucu olabilir. Yansıma kullanarak tüm özellikleri kopyalayabilir yalnızca miyim? -** Evet.</span><span class="sxs-lookup"><span data-stu-id="d477b-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="d477b-346">Bağlama modellerinde görünen yalnızca kullanıcı girişi için güvenli olarak belirlediğiniz olanları özelliklerdir.</span><span class="sxs-lookup"><span data-stu-id="d477b-346">The only properties that appear in the binding models are the ones you have determined to be safe for user input.</span></span> <span data-ttu-id="d477b-347">Bu iki modelleri arasında ortak mevcut tüm özellikleri üzerinden kopyalamak için yansıma kullanarak engelleyen güvenlik neden yoktur.</span><span class="sxs-lookup"><span data-stu-id="d477b-347">There is no security reason that prevents using reflection to copy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="d477b-348">**Ne hakkında [bağlayın (dışarıda = "â €¦")]. Ayrı bağlama modelleri sahip olmak yerine kullanabilir miyim? -** Bu yaklaşım önerilmez.</span><span class="sxs-lookup"><span data-stu-id="d477b-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="d477b-349">Kullanma [bağlayın (dışarıda = "â €¦")] herhangi bir yeni özellik, varsayılan olarak bağlanabilir anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="d477b-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="d477b-350">Yeni bir özellik eklendiğinde şeyler güvenli tutmak için fazladan bir adım yoktur yerine varsayılan olarak güvenli olacak tasarım sahip.</span><span class="sxs-lookup"><span data-stu-id="d477b-350">When a new property is added, there is an extra step to remember to keep things secure, rather than having the design be secure by default.</span></span> <span data-ttu-id="d477b-351">Geliştirici bağlı olarak bir özellik eklenir her zaman bu liste denetimi risklidir.</span><span class="sxs-lookup"><span data-stu-id="d477b-351">Depending on the developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="d477b-352">**Olduğundan [bağlayın (içerme = "â €¦")] düzenleme işlemleri için yararlı? -** No</span><span class="sxs-lookup"><span data-stu-id="d477b-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="d477b-353">[Bağlayın (içerme = "â €¦")] yalnızca (yeni veriler toplayarak) stili ekleme işlemleri için uygundur.</span><span class="sxs-lookup"><span data-stu-id="d477b-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="d477b-354">(Mevcut verileri düzeltilmesi) stilini güncelleştir işlemleri için ayrı bağlama modelleri olması veya açık bir izin verilen özellikleri listesi UpdateModel veya TryUpdateModel geçirme gibi başka bir yaklaşım kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties to UpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="d477b-355">Ekleme bir [bağlayın (içerme = "â €¦")] düzenleme işlemi öznitelikte anlamına gelir MVC bir nesne örneğini oluşturmak ve diğerlerini varsayılan değerlerinde bırakın yalnızca listelenen özellikleri ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only the listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="d477b-356">Veri kalıcı olduğunda tamamen Atlanan tüm özelliklerinin değerlerini kendi varsayılanlarına sıfırlamak olan bir varlığı değiştirir.</span><span class="sxs-lookup"><span data-stu-id="d477b-356">When the data is persisted, it will entirely replace the existing entity, resetting the values for any omitted properties to their defaults.</span></span> <span data-ttu-id="d477b-357">IsAdmin atlanırsa, örneğin, bir [bağlamak (içerme = "â €¦")] adı bu eylem düzenlenmiş herhangi bir kullanıcı bir Düzenle işlem özniteliği için IsAdmin sıfırlama = false (herhangi bir düzenlenen kullanıcı yönetici durumu kaybeder).</span><span class="sxs-lookup"><span data-stu-id="d477b-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset to IsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="d477b-358">Belirli özellikler için güncelleştirmeleri engellemek istiyorsanız, diğer yaklaşımlardan birini kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-358">If you want to prevent updates to certain properties, use one of the other approaches above.</span></span> <span data-ttu-id="d477b-359">MVC araç bazı sürümleri denetleyicisi sınıflarıyla oluşturmak Not [bağlamak (içerme = "â €¦")] düzenleme eylemleri ve bu listeden bir özellik kaldırma atlayarak nakil saldırılarını önlemeye kapsıyor.</span><span class="sxs-lookup"><span data-stu-id="d477b-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="d477b-360">Ancak, yukarıda açıklandığı gibi bu yaklaşımı beklendiği gibi çalışmaz ve bunun yerine belirtilmemişse özelliklerinde herhangi bir veri varsayılan değerlerine sıfırlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-360">However, as described above, that approach does not work as intended and instead will reset any data in the omitted properties to their default values.</span></span></li><li><span data-ttu-id="d477b-361">**Oluşturma işlemleri için kullanarak uyarılar vardır [bağlayın (içerme = "â €¦")] ayrı bağlama modelleri yerine? -** Evet.</span><span class="sxs-lookup"><span data-stu-id="d477b-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="d477b-362">Önce tüm atlayarak nakil güvenlik açıkları Azaltıcı için iki ayrı yaklaşım koruma gerektiren düzenleme senaryolar için bu yaklaşım çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="d477b-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="d477b-363">İkinci ve ayrı bağlama modelleri zorunlu kullanıcı girişi için kullanılan şekil kalıcılığı için kullanılan şekli arasındaki sorunları ayrılması bir şey [bağlayın (içerme = "â €¦")] yapın.</span><span class="sxs-lookup"><span data-stu-id="d477b-363">Second, separate binding models enforce separation of concerns between the shape used for user input and the shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="d477b-364">Üçüncü unutmayın [bağlayın (içerme = "â €¦")] yalnızca üst düzey özellikleri; işleyebilir yalnızca alt özellikleri (örneğin, "Details.Name") bölümünü özniteliğinde izin veremez.</span><span class="sxs-lookup"><span data-stu-id="d477b-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in the attribute.</span></span> <span data-ttu-id="d477b-365">Son olarak ve belki de en önemlisi, kullanarak [bağlayın (içerme = "â €¦")] sınıfı kurduğunda hatırlanan gerekir fazladan bir adım model bağlama için kullanılan ekler.</span><span class="sxs-lookup"><span data-stu-id="d477b-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time the class is used for model binding.</span></span> <span data-ttu-id="d477b-366">Yeni bir eylem yöntemi doğrudan veri sınıfına bağlar ve dahil etmek unutması durumunda bir [bağlamak (içerme = "â €¦")] özniteliği olabilir, aşırı gönderim saldırılarına için güvenlik açığı böylece [bağlamak (içerme = "â €¦")] yaklaşımdır varsayılan biraz daha az güvenli.</span><span class="sxs-lookup"><span data-stu-id="d477b-366">If a new action method binds to the data class directly and forgets to include a [Bind(Include ="â€¦")] attribute, it can be vulnerable to over-posting attacks, so the [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="d477b-367">Kullanırsanız [bağlayın (içerme = "â €¦")], her zaman veri sınıfları eylem yöntemi parametrelerine görünen her zaman belirtmek için dikkatli olun.</span><span class="sxs-lookup"><span data-stu-id="d477b-367">If you use [Bind(Include ="â€¦")], take care always to remember to specify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="d477b-368">**Oluşturma işlemleri için ne koyma [bağlayın (içerme = "â €¦")] modeli sınıfı özniteliği? Bu yaklaşım öznitelik her eylem yöntemi koyma hatırlama gereksinimini önlenir? -** Bazı durumlarda bu yaklaşım çalışır.</span><span class="sxs-lookup"><span data-stu-id="d477b-368">**For Create operations, what about putting the [Bind(Include ="â€¦")] attribute on the model class itself? Does not this approach avoid the need to remember putting the attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="d477b-369">Kullanma [bağlamak (INCLUDE = "â €¦")] model türündeki (yerine bu sınıfı kullanarak eylem parametrelerini), dahil etmeyi unutmayın gereksinimini ortadan kaldırmak [bağlamak (INCLUDE = "â €¦")] her eylem yöntemi özniteliği.</span><span class="sxs-lookup"><span data-stu-id="d477b-369">Using [Bind(Include ="â€¦")] on the model type itself (rather than on action parameters using this class), does avoid the need to remember to include the [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="d477b-370">Öznitelik doğrudan sınıf üzerinde etkili bir şekilde kullanarak model bağlama amacıyla bu sınıfın ayrı bir yüzey alanını oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d477b-370">Using the attribute directly on the class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="d477b-371">Ancak, bu yaklaşım, model bağlama bir şeklin model sınıfı başına yalnızca sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="d477b-372">Model bağlama bir alanın (kullanıcı rollerini güncelleştiren Örneğin, yalnızca yönetici eylem) izin vermek için bir eylem yönteminin gerekir ve bu alan model bağlama önlemek başka eylemler ihtiyacınız varsa bu yaklaşımı çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="d477b-372">If one action method needs to allow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need to prevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="d477b-373">Her sınıf yalnızca bir model bağlama şeklin olabilir; farklı eylemler farklı model bağlama şekiller gerekiyorsa, her iki ayrı model bağlama sınıflarını kullanarak bu ayrı şekilleri temsil veya ayırmak ihtiyaç duydukları [bağlayın (içerme = "â €¦")] eylem yöntemlerini öznitelikleri.</span><span class="sxs-lookup"><span data-stu-id="d477b-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need to represent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on the action methods.</span></span></li><li><span data-ttu-id="d477b-374">**Ne modelleri bağlama? Görünüm model ile aynı şey oldukları? -** İki ilgili kavramları şunlardır.</span><span class="sxs-lookup"><span data-stu-id="d477b-374">**What are binding models? Are they the same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="d477b-375">Bir model bağlama modelini başvuran bir eylemi kullanılan sınıf parametre listesi (MVC model bağlamanın dışında eylem yöntemine geçirilen Şekil) terimdir.</span><span class="sxs-lookup"><span data-stu-id="d477b-375">The term binding model refers to a model class used in an action is parameter list (the shape passed from MVC model binding to the action method).</span></span> <span data-ttu-id="d477b-376">Terim görünüm modeli eylem yönteminden bir görünüme iletilen bir model sınıfı gösterir.</span><span class="sxs-lookup"><span data-stu-id="d477b-376">The term view model refers to a model class passed from an action method to a view.</span></span> <span data-ttu-id="d477b-377">Bir görünüm özgü modeli kullanarak bir eylem yönteminden bir görünüme veri geçirme için ortak bir yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-377">Using a view-specific model is a common approach for passing data from an action method to a view.</span></span> <span data-ttu-id="d477b-378">Genellikle, bu şeklin model bağlama için uygundur ve terim görünüm modeli kullanılan her iki yerde de aynı modelin başvurmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-378">Often, this shape is also suitable for model binding, and the term view model can be used to refer the same model used in both places.</span></span> <span data-ttu-id="d477b-379">Kesin olarak için bu yordamı ne yığın atama amaçlar için önemli olan eyleme geçirilen şekli odaklanan modeller, özellikle bağlama hakkında alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="d477b-379">To be precise, this procedure talks specifically about binding models, focusing on the shape passed to the action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="d477b-380"><a id="rendering"></a>Güvenilmeyen web çıkış işleme önce kodlama</span><span class="sxs-lookup"><span data-stu-id="d477b-380"><a id="rendering"></a>Encode untrusted web output prior to rendering</span></span>

| <span data-ttu-id="d477b-381">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-381">Title</span></span>                   | <span data-ttu-id="d477b-382">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-383">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-383">**Component**</span></span>               | <span data-ttu-id="d477b-384">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-384">Web Application</span></span> | 
| <span data-ttu-id="d477b-385">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-385">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-386">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-386">Build</span></span> |  
| <span data-ttu-id="d477b-387">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-387">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-388">Genel, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-389">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-389">**Attributes**</span></span>              | <span data-ttu-id="d477b-390">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-390">N/A</span></span>  |
| <span data-ttu-id="d477b-391">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-391">**References**</span></span>              | <span data-ttu-id="d477b-392">[ASP.NET siteler arası komut önlemek nasıl](http://msdn.microsoft.com/library/ms998274.aspx), [siteler arası komut dosyası](http://cwe.mitre.org/data/definitions/79.html), [XSS (siteler arası komut dosyası) önleme kopya sayfası](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="d477b-392">[How to prevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="d477b-393">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-393">**Steps**</span></span> | <span data-ttu-id="d477b-394">Siteler arası komut dosyası (XSS yaygın olarak kısaltılır) Çevrimiçi hizmetler veya tüm uygulama / web girişten tüketen bileşen için saldırı vektörü olur.</span><span class="sxs-lookup"><span data-stu-id="d477b-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from the web.</span></span> <span data-ttu-id="d477b-395">XSS güvenlik açıkları, bir saldırganın bir güvenlik açığı web uygulaması aracılığıyla başka bir kullanıcının makinesinde betik yürütmek.</span><span class="sxs-lookup"><span data-stu-id="d477b-395">XSS vulnerabilities may allow an attacker to execute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="d477b-396">Kötü amaçlı komut dosyalarını, tanımlama bilgilerini çalabilir ve aksi halde bir kurbanın makine JavaScript aracılığıyla değiştirmesine için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-396">Malicious scripts can be used to steal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="d477b-397">Kullanıcı girişini doğrulama, doğru biçimlendirildiğinden olduktan ve bir web sayfasında işlenmeden önce kodlama XSS engelledi.</span><span class="sxs-lookup"><span data-stu-id="d477b-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="d477b-398">Giriş doğrulama ve çıktı kodlama Web koruma kitaplığı kullanılarak yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="d477b-399">Yönetilen kod için (C\#, VB.net, vb.), bir veya daha uygun kodlama yöntemlerini nerede kullanıcı girişini bildirilmiş bağlam bağlı olarak Web koruma (Anti-XSS) kitaplığı:</span><span class="sxs-lookup"><span data-stu-id="d477b-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from the Web Protection (Anti-XSS) Library, depending on the context where the user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="d477b-400">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="d477b-401"><a id="typemodel"></a>Giriş doğrulaması ve tüm dize türünde Model özelliklerini filtrelemesine</span><span class="sxs-lookup"><span data-stu-id="d477b-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="d477b-402">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-402">Title</span></span>                   | <span data-ttu-id="d477b-403">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-404">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-404">**Component**</span></span>               | <span data-ttu-id="d477b-405">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-405">Web Application</span></span> | 
| <span data-ttu-id="d477b-406">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-406">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-407">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-407">Build</span></span> |  
| <span data-ttu-id="d477b-408">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-408">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-409">Genel, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-410">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-410">**Attributes**</span></span>              | <span data-ttu-id="d477b-411">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-411">N/A</span></span>  |
| <span data-ttu-id="d477b-412">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-412">**References**</span></span>              | <span data-ttu-id="d477b-413">[Doğrulama ekleme](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [MVC uygulamasındaki Model verileri doğrulama](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [ilkeleri için ASP.NET MVC uygulamalarınızı yönlendirmede](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="d477b-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="d477b-414">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-414">**Steps**</span></span> | <p><span data-ttu-id="d477b-415">Uygulama kötü amaçlı kullanıcı girişleri karşı korunması emin olmak için uygulamada kullanılmadan önce giriş parametrelerini doğrulanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-415">All the input parameters must be validated before they are used in the application to ensure that the application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="d477b-416">Sunucu tarafında bir beyaz liste doğrulama stratejisi ile normal ifade doğrulamaları kullanarak giriş değerleri doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-416">Validate the input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="d477b-417">Kullanıcı girişleri unsanitized / yöntemlere iletilen parametreler yerleştirme güvenlik açıkları kodu neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-417">Unsanitized user inputs / parameters passed to the methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="d477b-418">Web uygulamaları için giriş noktaları form alanları, QueryStrings, tanımlama bilgileri, HTTP üst bilgilerine ve web hizmeti parametreleri de dahil edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="d477b-419">Aşağıdaki giriş doğrulama denetimleri, model bağlama sırasında gerçekleştirilen gerekir:</span><span class="sxs-lookup"><span data-stu-id="d477b-419">The following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="d477b-420">Yanıtta normal ifade ek açıklama, izin verilen karakterler ve izin verilen maksimum uzunluğu kabul etmek için model özellikleri açıklama</span><span class="sxs-lookup"><span data-stu-id="d477b-420">The model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="d477b-421">Denetleyici yöntemlerine ModelState geçerlilik gerçekleştirmeniz gerekir</span><span class="sxs-lookup"><span data-stu-id="d477b-421">The controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="d477b-422"><a id="richtext"></a>Tüm karakterleri, örneğin, Zengin Metin Düzenleyicisi'ni kabul eden form alanlarını temizleme işlemi uygulanmalıdır</span><span class="sxs-lookup"><span data-stu-id="d477b-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="d477b-423">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-423">Title</span></span>                   | <span data-ttu-id="d477b-424">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-425">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-425">**Component**</span></span>               | <span data-ttu-id="d477b-426">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-426">Web Application</span></span> | 
| <span data-ttu-id="d477b-427">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-427">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-428">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-428">Build</span></span> |  
| <span data-ttu-id="d477b-429">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-429">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-430">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-430">Generic</span></span> |
| <span data-ttu-id="d477b-431">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-431">**Attributes**</span></span>              | <span data-ttu-id="d477b-432">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-432">N/A</span></span>  |
| <span data-ttu-id="d477b-433">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-433">**References**</span></span>              | <span data-ttu-id="d477b-434">[Güvenli olmayan giriş kodlamak](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML temizleyici](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="d477b-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="d477b-435">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-435">**Steps**</span></span> | <p><span data-ttu-id="d477b-436">Kullanmak istediğiniz tüm static işaretleme etiketlerini tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-436">Identify all static markup tags that you want to use.</span></span> <span data-ttu-id="d477b-437">Ortak bir uygulama gibi güvenli HTML öğelerine biçimlendirme kısıtlamaktır `<b>` (kalın) ve `<i>` (italik).</span><span class="sxs-lookup"><span data-stu-id="d477b-437">A common practice is to restrict formatting to safe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="d477b-438">HTML kodlama verileri yazmadan önce onu.</span><span class="sxs-lookup"><span data-stu-id="d477b-438">Before writing the data, HTML-encode it.</span></span> <span data-ttu-id="d477b-439">Bu kötü amaçlı bir komut dosyası yürütülebilir kod olarak değil metin olarak işlenecek neden tarafından güvenli hale getirir.</span><span class="sxs-lookup"><span data-stu-id="d477b-439">This makes any malicious script safe by causing it to be handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="d477b-440">ValidateRequest ekleyerek ASP.NET istek doğrulamayı devre dışı bırak = "false" özniteliği için @ Page yönergesi</span><span class="sxs-lookup"><span data-stu-id="d477b-440">Disable ASP.NET request validation by the adding the ValidateRequest="false" attribute to the @ Page directive</span></span></li><li><span data-ttu-id="d477b-441">Dize girişi HtmlEncode yöntemi ile kodlayın</span><span class="sxs-lookup"><span data-stu-id="d477b-441">Encode the string input with the HtmlEncode method</span></span></li><li><span data-ttu-id="d477b-442">Bir StringBuilder kullanın ve seçmeli olarak izin vermek istediğiniz HTML öğeleri kodlama kaldırmak için değiştirme yöntemini çağırın</span><span class="sxs-lookup"><span data-stu-id="d477b-442">Use a StringBuilder and call its Replace method to selectively remove the encoding on the HTML elements that you want to permit</span></span></li></ol><p><span data-ttu-id="d477b-443">Sayfa bileşenini ayarlayarak başvuruları devre dışı bırakır ASP.NET istek doğrulama `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="d477b-443">The page-in the references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="d477b-444">Onu HTML olarak kodlar giriş ve seçmeli olarak tanır `<b>` ve `<i>` alternatif olarak, bir .NET kitaplığı HTML Temizleme için de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-444">It HTML-encodes the input and selectively allows the `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="d477b-445">HtmlSanitizer HTML parçalarının ve XSS saldırılarını açabilir yapıları belgelerden Temizleme için bir .NET kitaplıktır.</span><span class="sxs-lookup"><span data-stu-id="d477b-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead to XSS attacks.</span></span> <span data-ttu-id="d477b-446">Ayrıştırma, işlemek ve HTML ve CSS işlemek için AngleSharp kullanır.</span><span class="sxs-lookup"><span data-stu-id="d477b-446">It uses AngleSharp to parse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="d477b-447">Bir NuGet paketi olarak HtmlSanitizer yüklenebilir ve kullanıcı girişini ilgili HTML veya CSS temizleme yöntemi, sunucu tarafında geçerli aracılığıyla geçirilebilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-447">HtmlSanitizer can be installed as a NuGet package, and the user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on the server side.</span></span> <span data-ttu-id="d477b-448">Lütfen unutmayın, güvenlik denetimi olarak temizleme yalnızca son seçeneği olarak düşünülmelidir.</span><span class="sxs-lookup"><span data-stu-id="d477b-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="d477b-449">Giriş doğrulama ve çıktı kodlama daha iyi güvenlik denetimleri olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="d477b-450"><a id="inbuilt-encode"></a>DOM öğeleri yerleşik kodlama olmayan havuzlarını atamayın</span><span class="sxs-lookup"><span data-stu-id="d477b-450"><a id="inbuilt-encode"></a>Do not assign DOM elements to sinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="d477b-451">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-451">Title</span></span>                   | <span data-ttu-id="d477b-452">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-453">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-453">**Component**</span></span>               | <span data-ttu-id="d477b-454">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-454">Web Application</span></span> | 
| <span data-ttu-id="d477b-455">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-455">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-456">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-456">Build</span></span> |  
| <span data-ttu-id="d477b-457">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-457">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-458">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-458">Generic</span></span> |
| <span data-ttu-id="d477b-459">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-459">**Attributes**</span></span>              | <span data-ttu-id="d477b-460">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-460">N/A</span></span>  |
| <span data-ttu-id="d477b-461">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-461">**References**</span></span>              | <span data-ttu-id="d477b-462">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-462">N/A</span></span>  |
| <span data-ttu-id="d477b-463">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-463">**Steps**</span></span> | <span data-ttu-id="d477b-464">Varsayılan kodlama birçok javascript işlevleri desteklemez.</span><span class="sxs-lookup"><span data-stu-id="d477b-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="d477b-465">Bu tür işlevler aracılığıyla DOM öğelerine güvenilmeyen giriş atarken site komut dosyası (XSS) yürütmeleri sonuçlanabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-465">When assigning untrusted input to DOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="d477b-466">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-466">Example</span></span>
<span data-ttu-id="d477b-467">Güvensiz örnekleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="d477b-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="d477b-468">Kullanmayan `innerHtml`; bunun yerine kullanın `innerText`.</span><span class="sxs-lookup"><span data-stu-id="d477b-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="d477b-469">Benzer şekilde, yerine, `$("#elm").html()`, kullanın`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="d477b-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="d477b-470"><a id="redirect-safe"></a>Tüm doğrulama uygulama içinde yeniden yönlendirmeleri kapalı veya güvenli bir şekilde tamamlandı</span><span class="sxs-lookup"><span data-stu-id="d477b-470"><a id="redirect-safe"></a>Validate all redirects within the application are closed or done safely</span></span>

| <span data-ttu-id="d477b-471">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-471">Title</span></span>                   | <span data-ttu-id="d477b-472">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-473">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-473">**Component**</span></span>               | <span data-ttu-id="d477b-474">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-474">Web Application</span></span> | 
| <span data-ttu-id="d477b-475">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-475">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-476">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-476">Build</span></span> |  
| <span data-ttu-id="d477b-477">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-477">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-478">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-478">Generic</span></span> |
| <span data-ttu-id="d477b-479">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-479">**Attributes**</span></span>              | <span data-ttu-id="d477b-480">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-480">N/A</span></span>  |
| <span data-ttu-id="d477b-481">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-481">**References**</span></span>              | [<span data-ttu-id="d477b-482">OAuth 2.0 yetkilendirme Framework - açık yeniden yönlendiricileri</span><span class="sxs-lookup"><span data-stu-id="d477b-482">The OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="d477b-483">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-483">**Steps**</span></span> | <p><span data-ttu-id="d477b-484">Kullanıcının sağladığı bir konuma yeniden yönlendirme gerektiren uygulama tasarımı önceden tanımlanmış bir "safe" listesi siteler veya etki alanları için olası yeniden yönlendirme hedefleri sınırlamak gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-484">Application design requiring redirection to a user-supplied location must constrain the possible redirection targets to a predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="d477b-485">Uygulamadaki tüm yeniden yönlendirmeleri kapalı güvenli olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-485">All redirects in the application must be closed/safe.</span></span></p><p><span data-ttu-id="d477b-486">Bunu yapmak için:</span><span class="sxs-lookup"><span data-stu-id="d477b-486">To do this:</span></span></p><ul><li><span data-ttu-id="d477b-487">Tüm yeniden yönlendirmeleri tanımlayın</span><span class="sxs-lookup"><span data-stu-id="d477b-487">Identify all redirects</span></span></li><li><span data-ttu-id="d477b-488">Her yeniden yönlendirme için uygun bir hafifletme.</span><span class="sxs-lookup"><span data-stu-id="d477b-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="d477b-489">Uygun Azaltıcı Etkenler yeniden yönlendirme beyaz liste veya kullanıcı onayı içerir.</span><span class="sxs-lookup"><span data-stu-id="d477b-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="d477b-490">Bir web sitesi veya bir açık yeniden yönlendirme güvenlik açığı hizmetiyle Facebook/OAuth/Openıd kimlik sağlayıcıları kullanıyorsa, bir saldırganın bir kullanıcının oturum açma belirteci çalabilir ve o kullanıcının kimliğine bürün.</span><span class="sxs-lookup"><span data-stu-id="d477b-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="d477b-491">Bu devralınan bir risk RFC 6749 "OAuth 2.0 yetkilendirme Framework" belgelenen OAuth kullanıldığında, 10.15 "açmak yönlendiren" bölümünde benzer şekilde, zıpkınla kimlik avı saldırıları tarafından açık yeniden yönlendirmeleri kullanarak kullanıcıların kimlik bilgilerini tehlikeye girebilir</span><span class="sxs-lookup"><span data-stu-id="d477b-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "The OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="d477b-492"><a id="string-method"></a>Uygulama giriş doğrulaması denetleyicisi yöntemler tarafından kabul edilen tüm dize türü parametreleri</span><span class="sxs-lookup"><span data-stu-id="d477b-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="d477b-493">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-493">Title</span></span>                   | <span data-ttu-id="d477b-494">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-495">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-495">**Component**</span></span>               | <span data-ttu-id="d477b-496">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-496">Web Application</span></span> | 
| <span data-ttu-id="d477b-497">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-497">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-498">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-498">Build</span></span> |  
| <span data-ttu-id="d477b-499">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-499">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-500">Genel, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-501">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-501">**Attributes**</span></span>              | <span data-ttu-id="d477b-502">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-502">N/A</span></span>  |
| <span data-ttu-id="d477b-503">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-503">**References**</span></span>              | <span data-ttu-id="d477b-504">[Model verileri MVC uygulamasındaki doğrulama](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [ilkeleri için ASP.NET MVC uygulamalarınızı yönlendirmede](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="d477b-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="d477b-505">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-505">**Steps**</span></span> | <span data-ttu-id="d477b-506">Yalnızca basit veri türü ve değil modelleri bağımsız değişken olarak kabul yöntemleri için normal ifade kullanarak giriş doğrulaması yapılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="d477b-507">Burada Regex.IsMatch geçerli regex desenle kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="d477b-508">Giriş belirtilen normal ifadeyle eşleşmez, denetim daha fazla devam etmemelisiniz ve doğrulama hatası ile ilgili yeterli bir uyarı görüntülenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-508">If the input doesn't match the specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="d477b-509"><a id="dos-expression"></a>Normal ifade DoS nedeniyle hatalı normal ifadeler önlemek için işleme için üst sınır zaman aşımını ayarlama</span><span class="sxs-lookup"><span data-stu-id="d477b-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing to prevent DoS due to bad regular expressions</span></span>

| <span data-ttu-id="d477b-510">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-510">Title</span></span>                   | <span data-ttu-id="d477b-511">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-512">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-512">**Component**</span></span>               | <span data-ttu-id="d477b-513">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-513">Web Application</span></span> | 
| <span data-ttu-id="d477b-514">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-514">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-515">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-515">Build</span></span> |  
| <span data-ttu-id="d477b-516">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-516">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-517">Genel, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="d477b-518">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-518">**Attributes**</span></span>              | <span data-ttu-id="d477b-519">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-519">N/A</span></span>  |
| <span data-ttu-id="d477b-520">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-520">**References**</span></span>              | [<span data-ttu-id="d477b-521">DefaultRegexMatchTimeout özelliği</span><span class="sxs-lookup"><span data-stu-id="d477b-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="d477b-522">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-522">**Steps**</span></span> | <span data-ttu-id="d477b-523">Hizmet reddi saldırılarına karşı hatalı emin olmak için çok sayıda geri dönüş neden, oluşturulan normal ifadeler, genel varsayılan zaman aşımı ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-523">To ensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set the global default timeout.</span></span> <span data-ttu-id="d477b-524">İşleme tanımlanmış üst sınırından daha uzun sürüyorsa, zaman aşımı özel durumu throw.</span><span class="sxs-lookup"><span data-stu-id="d477b-524">If the processing time takes longer than the defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="d477b-525">Hiçbir şey yapılandırılmışsa, zaman aşımını sonsuz olacaktır.</span><span class="sxs-lookup"><span data-stu-id="d477b-525">If nothing is configured, the timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="d477b-526">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-526">Example</span></span>
<span data-ttu-id="d477b-527">Örneğin, aşağıdaki yapılandırma işleme 5 saniyeden daha uzun sürerse bir RegexMatchTimeoutException atar:</span><span class="sxs-lookup"><span data-stu-id="d477b-527">For example, the following configuration will throw a RegexMatchTimeoutException, if the processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="d477b-528"><a id="html-razor"></a>Razor görünümleri Html.Raw kullanmaktan kaçının</span><span class="sxs-lookup"><span data-stu-id="d477b-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="d477b-529">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-529">Title</span></span>                   | <span data-ttu-id="d477b-530">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-531">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-531">**Component**</span></span>               | <span data-ttu-id="d477b-532">Web Uygulaması</span><span class="sxs-lookup"><span data-stu-id="d477b-532">Web Application</span></span> | 
| <span data-ttu-id="d477b-533">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-533">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-534">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-534">Build</span></span> |  
| <span data-ttu-id="d477b-535">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-535">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-536">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-537">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-537">**Attributes**</span></span>              | <span data-ttu-id="d477b-538">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-538">N/A</span></span>  |
| <span data-ttu-id="d477b-539">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-539">**References**</span></span>              | <span data-ttu-id="d477b-540">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-540">N/A</span></span>  |
| <span data-ttu-id="d477b-541">Adım</span><span class="sxs-lookup"><span data-stu-id="d477b-541">Step</span></span> | <span data-ttu-id="d477b-542">ASP.Net Web sayfaları (Razor) gerçekleştirmek otomatik HTML kodlaması.</span><span class="sxs-lookup"><span data-stu-id="d477b-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="d477b-543">Katıştırılmış kod nuggets (@ blokları) tarafından yazdırılan tüm otomatik olarak HTML ile kodlanmış dizelerdir.</span><span class="sxs-lookup"><span data-stu-id="d477b-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="d477b-544">Ancak, ne zaman `HtmlHelper.Raw` yöntemi çağrıldığında, HTML kodlu olmayan biçimlendirme döndürür.</span><span class="sxs-lookup"><span data-stu-id="d477b-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="d477b-545">Varsa `Html.Raw()` yardımcı yöntemi kullanıldığında, Razor sağladığı otomatik kodlama koruma atlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-545">If `Html.Raw()` helper method is used, it bypasses the automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="d477b-546">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-546">Example</span></span>
<span data-ttu-id="d477b-547">Güvenli olmayan bir örnek aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="d477b-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="d477b-548">Kullanmayın `Html.Raw()` biçimlendirme görüntülemek gerekli olmadıkça.</span><span class="sxs-lookup"><span data-stu-id="d477b-548">Do not use `Html.Raw()` unless you need to display markup.</span></span> <span data-ttu-id="d477b-549">Bu yöntem örtük olarak kodlama çıkış gerçekleştirmez.</span><span class="sxs-lookup"><span data-stu-id="d477b-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="d477b-550">Örneğin diğer ASP.NET Yardımcıları kullanın,`@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="d477b-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="d477b-551"><a id="stored-proc"></a>Dinamik sorgular saklı yordamlarda kullanmayın</span><span class="sxs-lookup"><span data-stu-id="d477b-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="d477b-552">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-552">Title</span></span>                   | <span data-ttu-id="d477b-553">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-554">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-554">**Component**</span></span>               | <span data-ttu-id="d477b-555">Database</span><span class="sxs-lookup"><span data-stu-id="d477b-555">Database</span></span> | 
| <span data-ttu-id="d477b-556">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-556">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-557">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-557">Build</span></span> |  
| <span data-ttu-id="d477b-558">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-558">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-559">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-559">Generic</span></span> |
| <span data-ttu-id="d477b-560">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-560">**Attributes**</span></span>              | <span data-ttu-id="d477b-561">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-561">N/A</span></span>  |
| <span data-ttu-id="d477b-562">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-562">**References**</span></span>              | <span data-ttu-id="d477b-563">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-563">N/A</span></span>  |
| <span data-ttu-id="d477b-564">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-564">**Steps**</span></span> | <p><span data-ttu-id="d477b-565">Bir SQL ekleme saldırısı güvenlik açıklarını veritabanında rasgele komutları çalıştırmak için giriş doğrulamada kullanır.</span><span class="sxs-lookup"><span data-stu-id="d477b-565">A SQL injection attack exploits vulnerabilities in input validation to run arbitrary commands in the database.</span></span> <span data-ttu-id="d477b-566">Uygulamanız veritabanına erişmek için dinamik SQL deyimlerini oluşturmak için giriş kullandığında oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-566">It can occur when your application uses input to construct dynamic SQL statements to access the database.</span></span> <span data-ttu-id="d477b-567">Kodunuzu ham kullanıcı girişi içeren dizeleri geçirilen saklı yordamlar kullanılıyorsa da oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="d477b-568">Saldırgan, SQL ekleme saldırısında kullanarak, veritabanında rasgele komutları çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-568">Using the SQL injection attack, the attacker can execute arbitrary commands in the database.</span></span> <span data-ttu-id="d477b-569">Tüm SQL deyimleri (SQL deyimlerini saklı yordamlarda dahil) parametreli gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-569">All SQL statements (including the SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="d477b-570">Parametreli SQL deyimlerini-SQL (tek tırnak gibi) özel bir anlamı sorunsuz kesin türü belirtilmiş olduğundan olan karakterleri kabul eder.</span><span class="sxs-lookup"><span data-stu-id="d477b-570">Parameterized SQL statements will accept characters that have special meaning to SQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="d477b-571">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-571">Example</span></span>
<span data-ttu-id="d477b-572">Güvenli olmayan dinamik saklı yordam örneği aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="d477b-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="d477b-573">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-573">Example</span></span>
<span data-ttu-id="d477b-574">Güvenli bir şekilde uygulanan aynı saklı yordam aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="d477b-574">Following is the same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="d477b-575"><a id="validation-api"></a>Model doğrulama Web API yöntemlerini yapıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="d477b-576">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-576">Title</span></span>                   | <span data-ttu-id="d477b-577">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-578">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-578">**Component**</span></span>               | <span data-ttu-id="d477b-579">Web API</span><span class="sxs-lookup"><span data-stu-id="d477b-579">Web API</span></span> | 
| <span data-ttu-id="d477b-580">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-580">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-581">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-581">Build</span></span> |  
| <span data-ttu-id="d477b-582">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-582">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-583">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="d477b-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="d477b-584">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-584">**Attributes**</span></span>              | <span data-ttu-id="d477b-585">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-585">N/A</span></span>  |
| <span data-ttu-id="d477b-586">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-586">**References**</span></span>              | [<span data-ttu-id="d477b-587">ASP.NET Web API'de model doğrulama</span><span class="sxs-lookup"><span data-stu-id="d477b-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="d477b-588">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-588">**Steps**</span></span> | <span data-ttu-id="d477b-589">Bir istemci bir web API veri gönderdiğinde, herhangi bir işlem yapmadan önce verileri doğrulamak için zorunludur.</span><span class="sxs-lookup"><span data-stu-id="d477b-589">When a client sends data to a web API, it is mandatory to validate the data before doing any processing.</span></span> <span data-ttu-id="d477b-590">ASP.NET Web modelleri girdi olarak kabul için API ' larını veri ek açıklamaları modellerinde doğrulama kuralları modelin özelliklerini ayarlamak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-590">For ASP.NET Web APIs which accept models as input, use data annotations on models to set validation rules on the properties of the model.</span></span>|

### <a name="example"></a><span data-ttu-id="d477b-591">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-591">Example</span></span>
<span data-ttu-id="d477b-592">Aşağıdaki kod, aynı gösterir:</span><span class="sxs-lookup"><span data-stu-id="d477b-592">The following code demonstrates the same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="d477b-593">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-593">Example</span></span>
<span data-ttu-id="d477b-594">API denetleyicilerinin eylem yöntemi modeli geçerliliğini aşağıda gösterildiği gibi açıkça denetlenmesini sahiptir:</span><span class="sxs-lookup"><span data-stu-id="d477b-594">In the action method of the API controllers, validity of the model has to be explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with the product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="d477b-595"><a id="string-api"></a>Web API yöntemleri tarafından kabul edilen tüm dize tür parametrelerindeki giriş doğrulaması uygulama</span><span class="sxs-lookup"><span data-stu-id="d477b-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="d477b-596">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-596">Title</span></span>                   | <span data-ttu-id="d477b-597">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-598">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-598">**Component**</span></span>               | <span data-ttu-id="d477b-599">Web API</span><span class="sxs-lookup"><span data-stu-id="d477b-599">Web API</span></span> | 
| <span data-ttu-id="d477b-600">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-600">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-601">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-601">Build</span></span> |  
| <span data-ttu-id="d477b-602">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-602">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-603">Genel, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="d477b-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="d477b-604">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-604">**Attributes**</span></span>              | <span data-ttu-id="d477b-605">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-605">N/A</span></span>  |
| <span data-ttu-id="d477b-606">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-606">**References**</span></span>              | <span data-ttu-id="d477b-607">[Model verileri MVC uygulamasındaki doğrulama](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [ilkeleri için ASP.NET MVC uygulamalarınızı yönlendirmede](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="d477b-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="d477b-608">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-608">**Steps**</span></span> | <span data-ttu-id="d477b-609">Yalnızca basit veri türü ve değil modelleri bağımsız değişken olarak kabul yöntemleri için normal ifade kullanarak giriş doğrulaması yapılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="d477b-610">Burada Regex.IsMatch geçerli regex desenle kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="d477b-611">Giriş belirtilen normal ifadeyle eşleşmez, denetim daha fazla devam etmemelisiniz ve doğrulama hatası ile ilgili yeterli bir uyarı görüntülenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-611">If the input doesn't match the specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="d477b-612"><a id="typesafe-api"></a>Tür kullanımı uyumlu parametreleri Web API'si veri erişimi için kullanıldığından emin olun</span><span class="sxs-lookup"><span data-stu-id="d477b-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="d477b-613">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-613">Title</span></span>                   | <span data-ttu-id="d477b-614">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-615">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-615">**Component**</span></span>               | <span data-ttu-id="d477b-616">Web API</span><span class="sxs-lookup"><span data-stu-id="d477b-616">Web API</span></span> | 
| <span data-ttu-id="d477b-617">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-617">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-618">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-618">Build</span></span> |  
| <span data-ttu-id="d477b-619">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-619">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-620">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-620">Generic</span></span> |
| <span data-ttu-id="d477b-621">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-621">**Attributes**</span></span>              | <span data-ttu-id="d477b-622">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-622">N/A</span></span>  |
| <span data-ttu-id="d477b-623">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-623">**References**</span></span>              | <span data-ttu-id="d477b-624">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-624">N/A</span></span>  |
| <span data-ttu-id="d477b-625">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-625">**Steps**</span></span> | <p><span data-ttu-id="d477b-626">Kullanırsanız parametreler koleksiyonu, SQL davranır yerine yürütülebilir kod olarak değişmez değer olarak bir giriş olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-626">If you use the Parameters collection, SQL treats the input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="d477b-627">Parametreler koleksiyonu giriş veri türü ve uzunluğu kısıtlamalar uygulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-627">The Parameters collection can be used to enforce type and length constraints on input data.</span></span> <span data-ttu-id="d477b-628">Değer aralığının dışında bir özel durum tetikler.</span><span class="sxs-lookup"><span data-stu-id="d477b-628">Values outside of the range trigger an exception.</span></span> <span data-ttu-id="d477b-629">Tür kullanımı uyumlu SQL parametre kullanılmazsa, saldırganlar filtrelenmemiş girişinde katıştırılmış ekleme saldırıları yürütmek olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-629">If type-safe SQL parameters are not used, attackers might be able to execute injection attacks that are embedded in the unfiltered input.</span></span></p><p><span data-ttu-id="d477b-630">Tür güvenli parametreleri SQL sorguları oluşturmak filtrelenmemiş girişle oluşabilecek olası SQL ekleme saldırıları önlemek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-630">Use type safe parameters when constructing SQL queries to avoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="d477b-631">Saklı yordamlar ve dinamik SQL deyimleri ile tür güvenli parametreleri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="d477b-632">Parametreleri yürütülebilir kod değil de, veritabanı tarafından değişmez değerler olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-632">Parameters are treated as literal values by the database and not as executable code.</span></span> <span data-ttu-id="d477b-633">Parametreler, türü ve uzunluğu için de denetlenir.</span><span class="sxs-lookup"><span data-stu-id="d477b-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="d477b-634">Örnek</span><span class="sxs-lookup"><span data-stu-id="d477b-634">Example</span></span>
<span data-ttu-id="d477b-635">Aşağıdaki kod tür güvenli parametreleri ile SqlParameterCollection bir saklı yordamı çağrılırken kullanmayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="d477b-635">The following code shows how to use type safe parameters with the SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="d477b-636">Önceki kod örneğinde giriş değeri 11 karakterden uzun olamaz.</span><span class="sxs-lookup"><span data-stu-id="d477b-636">In the preceding code example, the input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="d477b-637">Veri türü veya parametresi tarafından tanımlanan uzunluk uyuşmadığı SqlParameter sınıfı bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d477b-637">If the data does not conform to the type or length defined by the parameter, the SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="d477b-638"><a id="sql-docdb"></a>Cosmos DB için parametreli SQL sorgularını kullan</span><span class="sxs-lookup"><span data-stu-id="d477b-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="d477b-639">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-639">Title</span></span>                   | <span data-ttu-id="d477b-640">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-641">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-641">**Component**</span></span>               | <span data-ttu-id="d477b-642">Azure belge DB</span><span class="sxs-lookup"><span data-stu-id="d477b-642">Azure Document DB</span></span> | 
| <span data-ttu-id="d477b-643">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-643">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-644">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-644">Build</span></span> |  
| <span data-ttu-id="d477b-645">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-645">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-646">Genel</span><span class="sxs-lookup"><span data-stu-id="d477b-646">Generic</span></span> |
| <span data-ttu-id="d477b-647">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-647">**Attributes**</span></span>              | <span data-ttu-id="d477b-648">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-648">N/A</span></span>  |
| <span data-ttu-id="d477b-649">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-649">**References**</span></span>              | [<span data-ttu-id="d477b-650">Documentdb'de SQL parametrelemeyi Duyurusu</span><span class="sxs-lookup"><span data-stu-id="d477b-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="d477b-651">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-651">**Steps**</span></span> | <span data-ttu-id="d477b-652">DocumentDB yalnızca salt okunur sorguları destekler; ancak, SQL ekleme sorguları kullanıcı girişi ile birleştirerek oluşturulur, yine de mümkündür.</span><span class="sxs-lookup"><span data-stu-id="d477b-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="d477b-653">Bunlar aynı koleksiyonunda kötü amaçlı SQL sorguları hazırlayın tarafından erişiyor döndürmemelidir verilere erişmek bir kullanıcı için mümkün olabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-653">It might be possible for a user to gain access to data they shouldn’t be accessing within the same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="d477b-654">Sorguları oluşturulan parametreli SQL sorguları kullanıcı girişini temel alarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="d477b-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="d477b-655"><a id="schema-binding"></a>Şema bağlama aracılığıyla WCF girişi doğrulama</span><span class="sxs-lookup"><span data-stu-id="d477b-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="d477b-656">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-656">Title</span></span>                   | <span data-ttu-id="d477b-657">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-658">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-658">**Component**</span></span>               | <span data-ttu-id="d477b-659">WCF</span><span class="sxs-lookup"><span data-stu-id="d477b-659">WCF</span></span> | 
| <span data-ttu-id="d477b-660">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-660">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-661">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-661">Build</span></span> |  
| <span data-ttu-id="d477b-662">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-662">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-663">Genel, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="d477b-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="d477b-664">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-664">**Attributes**</span></span>              | <span data-ttu-id="d477b-665">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-665">N/A</span></span>  |
| <span data-ttu-id="d477b-666">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-666">**References**</span></span>              | [<span data-ttu-id="d477b-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="d477b-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="d477b-668">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-668">**Steps**</span></span> | <p><span data-ttu-id="d477b-669">Doğrulama eksikliği farklı türü ekleme saldırıları için yol gösterir.</span><span class="sxs-lookup"><span data-stu-id="d477b-669">Lack of validation leads to different type injection attacks.</span></span></p><p><span data-ttu-id="d477b-670">İleti doğrulama bir savunma hattı oluşturan WCF uygulamanızın koruma temsil eder.</span><span class="sxs-lookup"><span data-stu-id="d477b-670">Message validation represents one line of defense in the protection of your WCF application.</span></span> <span data-ttu-id="d477b-671">Bu yaklaşımda, WCF Hizmeti işlemlerini kötü amaçlı bir istemci tarafından saldırılara karşı korumak için şemaları kullanarak iletileri doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-671">With this approach, you validate messages using schemas to protect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="d477b-672">İstemci tarafından kötü amaçlı bir hizmete saldırılardan korumak için istemci tarafından alınan tüm iletileri doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="d477b-672">Validate all messages received by the client to protect the client from attack by a malicious service.</span></span> <span data-ttu-id="d477b-673">İleti doğrulama ileti işlemleri ileti sözleşmeleri veya yapılamaz veri sözleşmeleri kullandığında doğrulamak mümkün kılar parametre doğrulaması kullanarak.</span><span class="sxs-lookup"><span data-stu-id="d477b-673">Message validation makes it possible to validate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="d477b-674">İleti doğrulama, böylece daha fazla esneklik sağlayan ve geliştirme süresini azaltarak şemalarını içinde doğrulama mantığını oluşturmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-674">Message validation allows you to create validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="d477b-675">Şemalar veri temsili standartları oluşturma, kuruluş içindeki farklı uygulamalar arasında yeniden kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d477b-675">Schemas can be reused across different applications inside the organization, creating standards for data representation.</span></span> <span data-ttu-id="d477b-676">Ayrıca, ileti doğrulama özelliği iş mantığı temsil eden sözleşmeleri içeren daha karmaşık veri türleri kullandığında işlemleri korumanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-676">Additionally, message validation allows you to protect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="d477b-677">İleti doğrulamayı gerçekleştirmek için önce işlemlerini hizmetiniz ve bu işlemler tarafından tüketilen veri türlerini temsil eden bir şema oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d477b-677">To perform message validation, you first build a schema that represents the operations of your service and the data types consumed by those operations.</span></span> <span data-ttu-id="d477b-678">Özel istemci ileti denetçisi ve özel dağıtıcısı ileti denetçisi hizmet denetleyicisinden gönderilen/alınan iletileri doğrulamak için uygulayan bir .NET sınıf oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="d477b-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector to validate the messages sent/received to/from the service.</span></span> <span data-ttu-id="d477b-679">Ardından, hem istemci hem de hizmet ileti doğrulamasını etkinleştirmek için bir özel uç noktası davranışı uygular.</span><span class="sxs-lookup"><span data-stu-id="d477b-679">Next, you implement a custom endpoint behavior to enable message validation on both the client and the service.</span></span> <span data-ttu-id="d477b-680">Son olarak, hizmet veya istemci yapılandırma dosyasında genişletilmiş özel uç noktası davranışı kullanıma sunmak izin veren sınıfındaki özel yapılandırma öğesi uygulamak"</span><span class="sxs-lookup"><span data-stu-id="d477b-680">Finally, you implement a custom configuration element on the class that allows you to expose the extended custom endpoint behavior in the configuration file of the service or the client"</span></span></p>|

## <span data-ttu-id="d477b-681"><a id="parameters"></a>Parametre denetçiler aracılığıyla WCF girişi doğrulama</span><span class="sxs-lookup"><span data-stu-id="d477b-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="d477b-682">Başlık</span><span class="sxs-lookup"><span data-stu-id="d477b-682">Title</span></span>                   | <span data-ttu-id="d477b-683">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="d477b-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d477b-684">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="d477b-684">**Component**</span></span>               | <span data-ttu-id="d477b-685">WCF</span><span class="sxs-lookup"><span data-stu-id="d477b-685">WCF</span></span> | 
| <span data-ttu-id="d477b-686">**SDL aşaması**</span><span class="sxs-lookup"><span data-stu-id="d477b-686">**SDL Phase**</span></span>               | <span data-ttu-id="d477b-687">Oluşturma</span><span class="sxs-lookup"><span data-stu-id="d477b-687">Build</span></span> |  
| <span data-ttu-id="d477b-688">**İlgili teknolojiler**</span><span class="sxs-lookup"><span data-stu-id="d477b-688">**Applicable Technologies**</span></span> | <span data-ttu-id="d477b-689">Genel, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="d477b-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="d477b-690">**Öznitelikleri**</span><span class="sxs-lookup"><span data-stu-id="d477b-690">**Attributes**</span></span>              | <span data-ttu-id="d477b-691">Yok</span><span class="sxs-lookup"><span data-stu-id="d477b-691">N/A</span></span>  |
| <span data-ttu-id="d477b-692">**Başvuruları**</span><span class="sxs-lookup"><span data-stu-id="d477b-692">**References**</span></span>              | [<span data-ttu-id="d477b-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="d477b-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="d477b-694">**Adımları**</span><span class="sxs-lookup"><span data-stu-id="d477b-694">**Steps**</span></span> | <p><span data-ttu-id="d477b-695">Giriş ve veri doğrulama derinlemesine koruma WCF uygulamanızın önemli bir satırı temsil eder.</span><span class="sxs-lookup"><span data-stu-id="d477b-695">Input and data validation represents one important line of defense in the protection of your WCF application.</span></span> <span data-ttu-id="d477b-696">Hizmet saldırılardan korumak için WCF hizmeti işlemlerinde kötü amaçlı bir istemci tarafından kullanıma sunulan tüm parametreleri doğrulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="d477b-696">You should validate all parameters exposed in WCF service operations to protect the service from attack by a malicious client.</span></span> <span data-ttu-id="d477b-697">Buna karşılık, aynı zamanda istemci tarafından kötü amaçlı bir hizmete saldırılardan korumak için istemci tarafından alınan tüm dönüş değerleri doğrulamalıdır</span><span class="sxs-lookup"><span data-stu-id="d477b-697">Conversely, you should also validate all return values received by the client to protect the client from attack by a malicious service</span></span></p><p><span data-ttu-id="d477b-698">WCF özel uzantılar oluşturarak WCF çalışma zamanı davranışını özelleştirmenizi farklı genişletilebilirlik noktaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="d477b-698">WCF provides different extensibility points that allow you to customize the WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="d477b-699">İleti denetçileri ve parametre denetçiler bir istemci ve hizmet arasında geçen verileri üzerinde daha fazla denetim kazanmak için kullanılan iki genişletilebilirlik mekanizmalardır.</span><span class="sxs-lookup"><span data-stu-id="d477b-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used to gain greater control over the data passing between a client and a service.</span></span> <span data-ttu-id="d477b-700">Giriş doğrulaması için parametre denetçiler kullanın ve yalnızca bir hizmet ve bu moddan akan tüm ileti incelemek gerektiğinde ileti denetçileri kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d477b-700">You should use parameter inspectors for input validation and use message inspectors only when you need to inspect the entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="d477b-701">Giriş doğrulamayı gerçekleştirmek için bir .NET sınıfını oluşturmak ve parametreleri hizmetinizi işlemlerini doğrulamakta özel parametre denetçisi uygulamak.</span><span class="sxs-lookup"><span data-stu-id="d477b-701">To perform input validation, you will build a .NET class and implement a custom parameter inspector in order to validate parameters on operations in your service.</span></span> <span data-ttu-id="d477b-702">Ardından, hem istemci hem de hizmet doğrulamasını etkinleştirmek için bir özel uç noktası davranışı gerçekleştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="d477b-702">You will then implement a custom endpoint behavior to enable validation on both the client and the service.</span></span> <span data-ttu-id="d477b-703">Son olarak, hizmet veya istemci yapılandırma dosyasında genişletilmiş özel uç noktası davranışı kullanıma sunmak izin veren sınıfındaki özel yapılandırma öğesi gerçekleştireceksiniz</span><span class="sxs-lookup"><span data-stu-id="d477b-703">Finally, you will implement a custom configuration element on the class that allows you to expose the extended custom endpoint behavior in the configuration file of the service or the client</span></span></p>|
