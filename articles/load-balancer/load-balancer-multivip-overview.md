---
title: "Azure yük dengeleyici VIP'ler aaaMultiple | Microsoft Docs"
description: "Azure yük dengeleyici üzerinde birden çok Vip genel bakış"
services: load-balancer
documentationcenter: na
author: chkuhtz
manager: narayan
editor: 
ms.assetid: 748e50cd-3087-4c2e-a9e1-ac0ecce4f869
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/11/2016
ms.author: chkuhtz
ms.openlocfilehash: e186e1248e7d187e7efd0668dc3244465ce3e156
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="multiple-vips-for-azure-load-balancer"></a><span data-ttu-id="f7b2f-103">Azure Load Balancer için birden çok VIP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-103">Multiple VIPs for Azure Load Balancer</span></span>

<span data-ttu-id="f7b2f-104">Azure yük dengeleyici tooload Hizmetleri birden çok bağlantı noktası, birden çok IP adresi veya her ikisi de sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-104">Azure Load Balancer allows you tooload balance services on multiple ports, multiple IP addresses, or both.</span></span> <span data-ttu-id="f7b2f-105">Sanal makineleri bir dizi arasında ortak ve iç yük dengeleyici tanımları tooload Bakiye akışları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-105">You can use public and internal load balancer definitions tooload balance flows across a set of VMs.</span></span>

<span data-ttu-id="f7b2f-106">Bu makalede, bu özelliği, önemli kavramlar ve kısıtlamaları hello temelleri açıklanır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-106">This article describes hello fundamentals of this ability, important concepts, and constraints.</span></span> <span data-ttu-id="f7b2f-107">Bir IP adresi yalnızca tooexpose Hizmetleri düşünüyorsanız için Basitleştirilmiş yönergelerini bulabilirsiniz [ortak](load-balancer-get-started-internet-portal.md) veya [iç](load-balancer-get-started-ilb-arm-portal.md) yük dengeleyici yapılandırmalarının.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-107">If you only intend tooexpose services on one IP address, you can find simplified instructions for [public](load-balancer-get-started-internet-portal.md) or [internal](load-balancer-get-started-ilb-arm-portal.md) load balancer configurations.</span></span> <span data-ttu-id="f7b2f-108">Birden çok Vip ekleme artımlı tooa tek VIP yapılandırmadır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-108">Adding Multiple VIPs is incremental tooa single VIP configuration.</span></span> <span data-ttu-id="f7b2f-109">Bu makalede Hello kavramları kullanarak herhangi bir zamanda Basitleştirilmiş bir yapılandırma genişletebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-109">Using hello concepts in this article, you can expand a simplified configuration at any time.</span></span>

<span data-ttu-id="f7b2f-110">Bir Azure yük dengeleyici tanımladığınızda, bir ön uç ve arka uç yapılandırması kuralları ile bağlanır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-110">When you define an Azure Load Balancer, a frontend and a backend configuration are connected with rules.</span></span> <span data-ttu-id="f7b2f-111">Merhaba hello kuralı tarafından başvurulan durumu araştırması olduğu kullanılan toodetermine nasıl yeni akışları hello arka uç havuzundaki tooa düğümü gönderilir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-111">hello health probe referenced by hello rule is used toodetermine how new flows are sent tooa node in hello backend pool.</span></span> <span data-ttu-id="f7b2f-112">Merhaba ön uç sanal IP (bir IP adresi (ortak veya dahili), Aktarım Protokolü (UDP veya TCP) ve bir bağlantı noktası numarası oluşan 3-tanımlama grubu olan bir VIP tarafından), tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-112">hello frontend is defined by a Virtual IP (VIP), which is a 3-tuple comprised of an IP address (public or internal), a transport protocol (UDP or TCP), and a port number.</span></span> <span data-ttu-id="f7b2f-113">Bir DIP tooa VM hello arka uç havuzundaki bir Azure sanal NIC üzerinde bir IP adresine bağlı olur.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-113">A DIP is an IP address on an Azure virtual NIC attached tooa VM in hello backend pool.</span></span>

<span data-ttu-id="f7b2f-114">Aşağıdaki tablonun hello bazı örnek ön uç yapılandırmaları içerir:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-114">hello following table contains some example frontend configurations:</span></span>

| <span data-ttu-id="f7b2f-115">VIP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-115">VIP</span></span> | <span data-ttu-id="f7b2f-116">IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-116">IP address</span></span> | <span data-ttu-id="f7b2f-117">Protokolü</span><span class="sxs-lookup"><span data-stu-id="f7b2f-117">protocol</span></span> | <span data-ttu-id="f7b2f-118">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-118">port</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="f7b2f-119">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-119">1</span></span> |<span data-ttu-id="f7b2f-120">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-120">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-121">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-121">TCP</span></span> |<span data-ttu-id="f7b2f-122">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-122">80</span></span> |
| <span data-ttu-id="f7b2f-123">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-123">2</span></span> |<span data-ttu-id="f7b2f-124">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-124">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-125">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-125">TCP</span></span> |<span data-ttu-id="f7b2f-126">*8080*</span><span class="sxs-lookup"><span data-stu-id="f7b2f-126">*8080*</span></span> |
| <span data-ttu-id="f7b2f-127">3</span><span class="sxs-lookup"><span data-stu-id="f7b2f-127">3</span></span> |<span data-ttu-id="f7b2f-128">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-128">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-129">*UDP*</span><span class="sxs-lookup"><span data-stu-id="f7b2f-129">*UDP*</span></span> |<span data-ttu-id="f7b2f-130">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-130">80</span></span> |
| <span data-ttu-id="f7b2f-131">4</span><span class="sxs-lookup"><span data-stu-id="f7b2f-131">4</span></span> |<span data-ttu-id="f7b2f-132">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="f7b2f-132">*65.52.0.2*</span></span> |<span data-ttu-id="f7b2f-133">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-133">TCP</span></span> |<span data-ttu-id="f7b2f-134">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-134">80</span></span> |

<span data-ttu-id="f7b2f-135">Merhaba tablo dört farklı ön uçlar gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-135">hello table shows four different frontends.</span></span> <span data-ttu-id="f7b2f-136">Ön Uçlar #1, #2 ve #3 birden çok kural ile tek bir VIP değerlerdir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-136">Frontends #1, #2 and #3 are a single VIP with multiple rules.</span></span> <span data-ttu-id="f7b2f-137">Merhaba aynı IP adresi kullanılır ancak başlangıç bağlantı noktası veya protokolü her ön uç için farklıdır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-137">hello same IP address is used but hello port or protocol is different for each frontend.</span></span> <span data-ttu-id="f7b2f-138">Ön Uçlar #1 ve #4 burada hello aynı ön uç protokolü ve bağlantı noktası birden çok Vip tekrar birden çok Vip bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-138">Frontends #1 and #4 are an example of Multiple VIPs, where hello same frontend protocol and port are reused across multiple VIPs.</span></span>

<span data-ttu-id="f7b2f-139">Azure yük dengeleyici hello Yük Dengeleme kuralları tanımlama esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-139">Azure Load Balancer provides flexibility in defining hello load balancing rules.</span></span> <span data-ttu-id="f7b2f-140">Bir kuralın nasıl bir adresi ve bağlantı noktası hello ön uçta olduğu eşlenen toohello hedef adresi ve bağlantı hello arka uç noktasına bildirir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-140">A rule declares how an address and port on hello frontend is mapped toohello destination address and port on hello backend.</span></span> <span data-ttu-id="f7b2f-141">Arka uç bağlantı noktaları kuralları yeniden hello kural hello türüne bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-141">Whether or not backend ports are reused across rules depends on hello type of hello rule.</span></span> <span data-ttu-id="f7b2f-142">Her kural türünün, ana bilgisayar yapılandırması ve araştırma tasarım etkileyebilir belirli gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-142">Each type of rule has specific requirements that can affect host configuration and probe design.</span></span> <span data-ttu-id="f7b2f-143">İki kural türü vardır:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-143">There are two types of rules:</span></span>

1. <span data-ttu-id="f7b2f-144">Merhaba varsayılan kuralı arka uç bağlantı noktasıyla yeniden</span><span class="sxs-lookup"><span data-stu-id="f7b2f-144">hello default rule with no backend port reuse</span></span>
2. <span data-ttu-id="f7b2f-145">arka uç bağlantı noktaları nerede tekrar hello kayan IP kuralı</span><span class="sxs-lookup"><span data-stu-id="f7b2f-145">hello Floating IP rule where backend ports are reused</span></span>

<span data-ttu-id="f7b2f-146">Azure yük dengeleyici sağlar, her ikisi de kural türleri üzerinde toomix hello aynı yük dengeleyici yapılandırması.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-146">Azure Load Balancer allows you toomix both rule types on hello same load balancer configuration.</span></span> <span data-ttu-id="f7b2f-147">Merhaba kural hello kısıtlamalar tarafından uymanız sürece hello yük dengeleyici bunları aynı anda belirli bir VM veya herhangi bir birleşimini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-147">hello load balancer can use them simultaneously for a given VM, or any combination, as long as you abide by hello constraints of hello rule.</span></span> <span data-ttu-id="f7b2f-148">Seçtiğiniz hangi kural türü bu yapılandırmayı destekleyen, uygulama ve hello karmaşıklığını hello gereksinimlerine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-148">Which rule type you choose depends on hello requirements of your application and hello complexity of supporting that configuration.</span></span> <span data-ttu-id="f7b2f-149">Hangi kural türlerinin senaryonuz için en iyi olduğunu değerlendirmelidir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-149">You should evaluate which rule types are best for your scenario.</span></span>

<span data-ttu-id="f7b2f-150">Biz bu senaryolar daha fazla hello varsayılan davranışı ile başlatarak keşfedin.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-150">We explore these scenarios further by starting with hello default behavior.</span></span>

## <a name="rule-type-1-no-backend-port-reuse"></a><span data-ttu-id="f7b2f-151">Kural türü #1: hiçbir arka uç bağlantı noktasını yeniden kullanma</span><span class="sxs-lookup"><span data-stu-id="f7b2f-151">Rule type #1: No backend port reuse</span></span>

![MultiVIP çizim](./media/load-balancer-multivip-overview/load-balancer-multivip.png)

<span data-ttu-id="f7b2f-153">Bu senaryoda, hello ön uç VIP'ler yapılandırılmış olan aşağıdaki gibi:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-153">In this scenario, hello frontend VIPs are configured as follows:</span></span>

| <span data-ttu-id="f7b2f-154">VIP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-154">VIP</span></span> | <span data-ttu-id="f7b2f-155">IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-155">IP address</span></span> | <span data-ttu-id="f7b2f-156">Protokolü</span><span class="sxs-lookup"><span data-stu-id="f7b2f-156">protocol</span></span> | <span data-ttu-id="f7b2f-157">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-157">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-159">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-159">1</span></span> |<span data-ttu-id="f7b2f-160">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-160">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-161">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-161">TCP</span></span> |<span data-ttu-id="f7b2f-162">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-162">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-164">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-164">2</span></span> |<span data-ttu-id="f7b2f-165">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="f7b2f-165">*65.52.0.2*</span></span> |<span data-ttu-id="f7b2f-166">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-166">TCP</span></span> |<span data-ttu-id="f7b2f-167">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-167">80</span></span> |

<span data-ttu-id="f7b2f-168">Merhaba DIP hello hello hedefi olan gelen akış.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-168">hello DIP is hello destination of hello inbound flow.</span></span> <span data-ttu-id="f7b2f-169">Merhaba arka uç havuzundaki her VM benzersiz bir bağlantı noktası bir DIP üzerinde istenen hello hizmeti kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-169">In hello backend pool, each VM exposes hello desired service on a unique port on a DIP.</span></span> <span data-ttu-id="f7b2f-170">Bu hizmet, bir kural tanımı aracılığıyla hello ön uç ile ilişkilidir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-170">This service is associated with hello frontend through a rule definition.</span></span>

<span data-ttu-id="f7b2f-171">Şu iki kural tanımlayın:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-171">We define two rules:</span></span>

| <span data-ttu-id="f7b2f-172">Kural</span><span class="sxs-lookup"><span data-stu-id="f7b2f-172">Rule</span></span> | <span data-ttu-id="f7b2f-173">Ön uç eşleme</span><span class="sxs-lookup"><span data-stu-id="f7b2f-173">Map frontend</span></span> | <span data-ttu-id="f7b2f-174">toobackend havuzu</span><span class="sxs-lookup"><span data-stu-id="f7b2f-174">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f7b2f-175">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-175">1</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-177">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-177">VIP1:80</span></span> |![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-179">DIP1:80,</span><span class="sxs-lookup"><span data-stu-id="f7b2f-179">DIP1:80,</span></span> ![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-181">DIP2:80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-181">DIP2:80</span></span> |
| <span data-ttu-id="f7b2f-182">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-182">2</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-184">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-184">VIP2:80</span></span> |![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-186">DIP1:81,</span><span class="sxs-lookup"><span data-stu-id="f7b2f-186">DIP1:81,</span></span> ![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-188">DIP2:81</span><span class="sxs-lookup"><span data-stu-id="f7b2f-188">DIP2:81</span></span> |

<span data-ttu-id="f7b2f-189">Azure yük dengeleyici tam eşlemesindeki Hello şimdi aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-189">hello complete mapping in Azure Load Balancer is now as follows:</span></span>

| <span data-ttu-id="f7b2f-190">Kural</span><span class="sxs-lookup"><span data-stu-id="f7b2f-190">Rule</span></span> | <span data-ttu-id="f7b2f-191">VIP IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-191">VIP IP address</span></span> | <span data-ttu-id="f7b2f-192">Protokolü</span><span class="sxs-lookup"><span data-stu-id="f7b2f-192">protocol</span></span> | <span data-ttu-id="f7b2f-193">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-193">port</span></span> | <span data-ttu-id="f7b2f-194">Hedef</span><span class="sxs-lookup"><span data-stu-id="f7b2f-194">Destination</span></span> | <span data-ttu-id="f7b2f-195">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-195">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![Kural](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-197">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-197">1</span></span> |<span data-ttu-id="f7b2f-198">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-198">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-199">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-199">TCP</span></span> |<span data-ttu-id="f7b2f-200">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-200">80</span></span> |<span data-ttu-id="f7b2f-201">DIP IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-201">DIP IP Address</span></span> |<span data-ttu-id="f7b2f-202">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-202">80</span></span> |
| ![Kural](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-204">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-204">2</span></span> |<span data-ttu-id="f7b2f-205">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-205">65.52.0.2</span></span> |<span data-ttu-id="f7b2f-206">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-206">TCP</span></span> |<span data-ttu-id="f7b2f-207">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-207">80</span></span> |<span data-ttu-id="f7b2f-208">DIP IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-208">DIP IP Address</span></span> |<span data-ttu-id="f7b2f-209">81</span><span class="sxs-lookup"><span data-stu-id="f7b2f-209">81</span></span> |

<span data-ttu-id="f7b2f-210">Her kural benzersiz bir hedef IP adresi ve hedef bağlantı noktası birleşimi ile akışını üretmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-210">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="f7b2f-211">Değişen hello hedef bağlantı noktası hello akış tarafından birden çok kural farklı bağlantı noktalarını aynı DIP akışları toohello sunabilir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-211">By varying hello destination port of hello flow, multiple rules can deliver flows toohello same DIP on different ports.</span></span>

<span data-ttu-id="f7b2f-212">Sistem durumu araştırmalarının her zaman yönlendirilmiş toohello VM DIP olur.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-212">Health probes are always directed toohello DIP of a VM.</span></span> <span data-ttu-id="f7b2f-213">Sağlamanız gerekir, araştırma hello VM hello durumunu yansıtır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-213">You must ensure you that your probe reflects hello health of hello VM.</span></span>

## <a name="rule-type-2-backend-port-reuse-by-using-floating-ip"></a><span data-ttu-id="f7b2f-214">Kural türü #2: kayan IP kullanarak arka uç bağlantı noktasını yeniden kullanma</span><span class="sxs-lookup"><span data-stu-id="f7b2f-214">Rule type #2: backend port reuse by using Floating IP</span></span>

<span data-ttu-id="f7b2f-215">Azure yük dengeleyici kullanılan hello kural türü ne olursa olsun birden çok VIP'ler arasında tooreuse hello ön uç bağlantı noktası hello esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-215">Azure Load Balancer provides hello flexibility tooreuse hello frontend port across multiple VIPs regardless of hello rule type used.</span></span> <span data-ttu-id="f7b2f-216">Ayrıca, bazı uygulama senaryoları tercih veya hello aynı toobe hello arka uç havuzundaki tek bir VM üzerindeki birden çok uygulama örneği tarafından kullanılan bağlantı noktası gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-216">Additionally, some application scenarios prefer or require hello same port toobe used by multiple application instances on a single VM in hello backend pool.</span></span> <span data-ttu-id="f7b2f-217">Bağlantı noktası yeniden ortak örnekleri için yüksek kullanılabilirliği kümeleme içerir, ağ sanal Gereçleri ve birden çok TLS uç noktaları yeniden şifreleme olmadan gösterme.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-217">Common examples of port reuse include clustering for high availability, network virtual appliances, and exposing multiple TLS endpoints without re-encryption.</span></span>

<span data-ttu-id="f7b2f-218">Tooreuse hello arka uç bağlantı noktası birden çok kural istiyorsanız hello kural tanımı kayan IP etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-218">If you want tooreuse hello backend port across multiple rules, you must enable Floating IP in hello rule definition.</span></span>

<span data-ttu-id="f7b2f-219">Kayan IP, doğrudan sunucu Döndür (DSR olarak) bilinen bir bölümüdür.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-219">Floating IP is a portion of what is known as Direct Server Return (DSR).</span></span> <span data-ttu-id="f7b2f-220">DSR iki bölümden oluşur: Eşleme Şeması bir akış topolojisi ve bir IP adresi.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-220">DSR consists of two parts: a flow topology and an IP address mapping scheme.</span></span> <span data-ttu-id="f7b2f-221">Bir platform düzeyde Azure yük dengeleyici DSR akış topolojisinde kayan IP etkin olup olmadığı bağımsız olarak her zaman çalışır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-221">At a platform level, Azure Load Balancer always operates in a DSR flow topology regardless of whether Floating IP is enabled or not.</span></span> <span data-ttu-id="f7b2f-222">Bu hello giden akış parçası her zaman doğru bir şekilde yeniden tooflow doğrudan arka toohello kaynak anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-222">This means that hello outbound part of a flow is always correctly rewritten tooflow directly back toohello origin.</span></span>

<span data-ttu-id="f7b2f-223">Merhaba varsayılan kural türüyle Azure geleneksel Yük Dengeleme kullanım kolaylığı için IP adresi eşleme şeması kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-223">With hello default rule type, Azure exposes a traditional load balancing IP address mapping scheme for ease of use.</span></span> <span data-ttu-id="f7b2f-224">Başlangıç IP adresi eşleme şeması tooallow aşağıda anlatıldığı gibi ek esneklik için etkinleştirme kayan IP değiştirir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-224">Enabling Floating IP changes hello IP address mapping scheme tooallow for additional flexibility as explained below.</span></span>

<span data-ttu-id="f7b2f-225">Aşağıdaki diyagramda hello bu yapılandırma gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-225">hello following diagram illustrates this configuration:</span></span>

![MultiVIP çizim](./media/load-balancer-multivip-overview/load-balancer-multivip-dsr.png)

<span data-ttu-id="f7b2f-227">Bu senaryo için her VM hello arka uç havuzundaki üç ağ arabirimi bulunur:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-227">For this scenario, every VM in hello backend pool has three network interfaces:</span></span>

* <span data-ttu-id="f7b2f-228">DIP: sanal hello VM (Azure'un NIC kaynak IP yapılandırması) ile ilişkili NIC</span><span class="sxs-lookup"><span data-stu-id="f7b2f-228">DIP: a Virtual NIC associated with hello VM (IP configuration of Azure's NIC resource)</span></span>
* <span data-ttu-id="f7b2f-229">Vıp1: bir geri döngü arabirimde Konuk vıp1 IP adresiyle yapılandırılmış işletim sistemi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-229">VIP1: a loopback interface within guest OS that is configured with IP address of VIP1</span></span>
* <span data-ttu-id="f7b2f-230">Vıp2: bir geri döngü arabirimde Konuk vıp2 IP adresiyle yapılandırılmış işletim sistemi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-230">VIP2: a loopback interface within guest OS that is configured with IP address of VIP2</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f7b2f-231">Merhaba mantıksal arabirimlerinin Hello yapılandırmasını hello konuk işletim sistemi içinde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-231">hello configuration of hello logical interfaces is performed within hello guest OS.</span></span> <span data-ttu-id="f7b2f-232">Bu yapılandırma değil gerçekleştirilen veya Azure tarafından yönetiliyor.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-232">This configuration is not performed or managed by Azure.</span></span> <span data-ttu-id="f7b2f-233">Bu yapılandırma olmazsa, hello kuralları çalışmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-233">Without this configuration, hello rules will not function.</span></span> <span data-ttu-id="f7b2f-234">Sistem durumu araştırma tanımları hello hello VM DIP kullanmak yerine mantıksal VIP hello.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-234">Health probe definitions use hello DIP of hello VM rather than hello logical VIP.</span></span> <span data-ttu-id="f7b2f-235">Bu nedenle, hizmetiniz hello mantıksal VIP hello sunulan hello hizmetinin durumunu yansıtacak bir DIP bağlantı noktasında araştırma yanıtları sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-235">Therefore, your service must provide probe responses on a DIP port that reflect hello status of hello service offered on hello logical VIP.</span></span>

<span data-ttu-id="f7b2f-236">Merhaba varsayalım hello önceki senaryoda olduğu gibi aynı ön uç yapılandırma:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-236">Let's assume hello same frontend configuration as in hello previous scenario:</span></span>

| <span data-ttu-id="f7b2f-237">VIP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-237">VIP</span></span> | <span data-ttu-id="f7b2f-238">IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-238">IP address</span></span> | <span data-ttu-id="f7b2f-239">Protokolü</span><span class="sxs-lookup"><span data-stu-id="f7b2f-239">protocol</span></span> | <span data-ttu-id="f7b2f-240">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-240">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-242">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-242">1</span></span> |<span data-ttu-id="f7b2f-243">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-243">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-244">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-244">TCP</span></span> |<span data-ttu-id="f7b2f-245">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-245">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-247">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-247">2</span></span> |<span data-ttu-id="f7b2f-248">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="f7b2f-248">*65.52.0.2*</span></span> |<span data-ttu-id="f7b2f-249">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-249">TCP</span></span> |<span data-ttu-id="f7b2f-250">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-250">80</span></span> |

<span data-ttu-id="f7b2f-251">Şu iki kural tanımlayın:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-251">We define two rules:</span></span>

| <span data-ttu-id="f7b2f-252">Kural</span><span class="sxs-lookup"><span data-stu-id="f7b2f-252">Rule</span></span> | <span data-ttu-id="f7b2f-253">Ön uç eşleme</span><span class="sxs-lookup"><span data-stu-id="f7b2f-253">Map frontend</span></span> | <span data-ttu-id="f7b2f-254">toobackend havuzu</span><span class="sxs-lookup"><span data-stu-id="f7b2f-254">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f7b2f-255">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-255">1</span></span> |![Kural](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-257">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-257">VIP1:80</span></span> |![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-259">VIP1:80 (içinde VM1 ve VM2)</span><span class="sxs-lookup"><span data-stu-id="f7b2f-259">VIP1:80 (in VM1 and VM2)</span></span> |
| <span data-ttu-id="f7b2f-260">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-260">2</span></span> |![Kural](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-262">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-262">VIP2:80</span></span> |![arka uç](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-264">VIP2:80 (içinde VM1 ve VM2)</span><span class="sxs-lookup"><span data-stu-id="f7b2f-264">VIP2:80 (in VM1 and VM2)</span></span> |

<span data-ttu-id="f7b2f-265">Aşağıdaki tablonun hello hello tam eşleme hello yük dengeleyicisi gösterir:</span><span class="sxs-lookup"><span data-stu-id="f7b2f-265">hello following table shows hello complete mapping in hello load balancer:</span></span>

| <span data-ttu-id="f7b2f-266">Kural</span><span class="sxs-lookup"><span data-stu-id="f7b2f-266">Rule</span></span> | <span data-ttu-id="f7b2f-267">VIP IP adresi</span><span class="sxs-lookup"><span data-stu-id="f7b2f-267">VIP IP address</span></span> | <span data-ttu-id="f7b2f-268">Protokolü</span><span class="sxs-lookup"><span data-stu-id="f7b2f-268">protocol</span></span> | <span data-ttu-id="f7b2f-269">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-269">port</span></span> | <span data-ttu-id="f7b2f-270">Hedef</span><span class="sxs-lookup"><span data-stu-id="f7b2f-270">Destination</span></span> | <span data-ttu-id="f7b2f-271">port</span><span class="sxs-lookup"><span data-stu-id="f7b2f-271">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="f7b2f-273">1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-273">1</span></span> |<span data-ttu-id="f7b2f-274">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="f7b2f-274">65.52.0.1</span></span> |<span data-ttu-id="f7b2f-275">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-275">TCP</span></span> |<span data-ttu-id="f7b2f-276">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-276">80</span></span> |<span data-ttu-id="f7b2f-277">VIP (65.52.0.1) ile aynı</span><span class="sxs-lookup"><span data-stu-id="f7b2f-277">same as VIP (65.52.0.1)</span></span> |<span data-ttu-id="f7b2f-278">VIP (80) aynı</span><span class="sxs-lookup"><span data-stu-id="f7b2f-278">same as VIP (80)</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="f7b2f-280">2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-280">2</span></span> |<span data-ttu-id="f7b2f-281">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="f7b2f-281">65.52.0.2</span></span> |<span data-ttu-id="f7b2f-282">TCP</span><span class="sxs-lookup"><span data-stu-id="f7b2f-282">TCP</span></span> |<span data-ttu-id="f7b2f-283">80</span><span class="sxs-lookup"><span data-stu-id="f7b2f-283">80</span></span> |<span data-ttu-id="f7b2f-284">VIP (65.52.0.2) ile aynı</span><span class="sxs-lookup"><span data-stu-id="f7b2f-284">same as VIP (65.52.0.2)</span></span> |<span data-ttu-id="f7b2f-285">VIP (80) aynı</span><span class="sxs-lookup"><span data-stu-id="f7b2f-285">same as VIP (80)</span></span> |

<span data-ttu-id="f7b2f-286">Merhaba hedef Merhaba gelen akış hello VIP hello VM hello geri döngü arabirimindeki adresidir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-286">hello destination of hello inbound flow is hello VIP address on hello loopback interface in hello VM.</span></span> <span data-ttu-id="f7b2f-287">Her kural benzersiz bir hedef IP adresi ve hedef bağlantı noktası birleşimi ile akışını üretmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-287">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="f7b2f-288">Değişen hello hedef IP adresi hello akış tarafından bağlantı noktası yeniden üzerinde mümkündür aynı VM hello.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-288">By varying hello destination IP address of hello flow, port reuse is possible on hello same VM.</span></span> <span data-ttu-id="f7b2f-289">Sunulan toohello yük dengeleyici toohello VIP'ın IP adresi ve bağlantı noktası hello ilgili geri döngü arabiriminin bağlayarak hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-289">Your service is exposed toohello load balancer by binding it toohello VIP’s IP address and port of hello respective loopback interface.</span></span>

<span data-ttu-id="f7b2f-290">Bu örnek hello hedef bağlantı noktası değiştirmez dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-290">Notice that this example does not change hello destination port.</span></span> <span data-ttu-id="f7b2f-291">Bu bir kayan IP senaryo olsa da, bir kural toorewrite hello arka uç hedef bağlantı noktası ve toomake tanımlama Azure yük dengeleyici de destekler, hello ön uç hedef bağlantı noktasından farklı.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-291">Even though this is a Floating IP scenario, Azure Load Balancer also supports defining a rule toorewrite hello backend destination port and toomake it different from hello frontend destination port.</span></span>

<span data-ttu-id="f7b2f-292">Merhaba kayan IP kural türü hello birden fazla yük dengeleyici yapılandırması desenlerini temelini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-292">hello Floating IP rule type is hello foundation of several load balancer configuration patterns.</span></span> <span data-ttu-id="f7b2f-293">Şu anda kullanılabilir olan bir örnektir hello [SQL AlwaysOn ile birden çok dinleyici](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-293">One example that is currently available is hello [SQL AlwaysOn with Multiple Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) configuration.</span></span> <span data-ttu-id="f7b2f-294">Zamanla, biz bu senaryoların birkaçı belge.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-294">Over time, we will document more of these scenarios.</span></span>

## <a name="limitations"></a><span data-ttu-id="f7b2f-295">Sınırlamalar</span><span class="sxs-lookup"><span data-stu-id="f7b2f-295">Limitations</span></span>

* <span data-ttu-id="f7b2f-296">Birden çok VIP yapılandırmaları yalnızca Iaas VM'ler ile desteklenir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-296">Multiple VIP configurations are only supported with IaaS VMs.</span></span>
* <span data-ttu-id="f7b2f-297">Hello kayan IP kuralıyla uygulamanız için giden trafik akışları hello DIP kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-297">With hello Floating IP rule, your application must use hello DIP for outbound flows.</span></span> <span data-ttu-id="f7b2f-298">Uygulamanızı hello geri döngü hello konuk işletim sistemi arabiriminde yapılandırılan toohello VIP adresi bağlar, ardından SNAT kullanılabilir toorewrite hello giden akış değildir ve hello akış başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-298">If your application binds toohello VIP address configured on hello loopback interface in hello guest OS, then SNAT is not available toorewrite hello outbound flow and hello flow fails.</span></span>
* <span data-ttu-id="f7b2f-299">Genel IP adresleri faturalama üzerinde bir etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-299">Public IP addresses have an effect on billing.</span></span> <span data-ttu-id="f7b2f-300">Daha fazla bilgi için bkz: [IP adresi fiyatlandırma](https://azure.microsoft.com/pricing/details/ip-addresses/)</span><span class="sxs-lookup"><span data-stu-id="f7b2f-300">For more information, see [IP Address pricing](https://azure.microsoft.com/pricing/details/ip-addresses/)</span></span>
* <span data-ttu-id="f7b2f-301">Abonelik sınırları uygulayın.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-301">Subscription limits apply.</span></span> <span data-ttu-id="f7b2f-302">Daha fazla bilgi için bkz: [hizmet sınırları](../azure-subscription-service-limits.md#networking-limits) Ayrıntılar için.</span><span class="sxs-lookup"><span data-stu-id="f7b2f-302">For more information, see [Service limits](../azure-subscription-service-limits.md#networking-limits) for details.</span></span>
