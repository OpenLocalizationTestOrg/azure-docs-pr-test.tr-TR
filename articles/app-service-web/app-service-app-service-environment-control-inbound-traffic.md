---
title: "Bir uygulama hizmeti ortamına gelen trafiğinin denetleme"
description: "Bir uygulama hizmeti ortamına gelen trafiği denetlemek için ağ güvenlik kuralları yapılandırma hakkında bilgi edinin."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: ee0a2248a1cd5d76f87b280de05410b94f96c8af
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-control-inbound-traffic-to-an-app-service-environment"></a><span data-ttu-id="9a674-103">Bir uygulama hizmeti ortamına gelen trafiğinin denetleme</span><span class="sxs-lookup"><span data-stu-id="9a674-103">How To Control Inbound Traffic to an App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="9a674-104">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="9a674-104">Overview</span></span>
<span data-ttu-id="9a674-105">Bir uygulama hizmeti ortamı oluşturulabilir **ya da** bir Azure Resource Manager sanal ağ **veya** Klasik dağıtım modeli [sanal ağ] [ virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="9a674-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="9a674-106">Bir uygulama hizmeti ortamı oluşturulduğunda, yeni sanal ağ ve yeni alt tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-106">A new virtual network and new subnet can be defined at the time an App Service Environment is created.</span></span>  <span data-ttu-id="9a674-107">Alternatif olarak, bir uygulama hizmeti ortamı önceden var olan sanal ağ ve önceden var olan bir alt ağ içinde oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="9a674-108">Haziran 2016'da yapılan bir değişikliği, ASEs de ortak adres aralıklarını veya RFC1918 adres alanlarını (örn.) kullanan sanal ağlar dağıtılabilir</span><span class="sxs-lookup"><span data-stu-id="9a674-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="9a674-109">özel adresler).</span><span class="sxs-lookup"><span data-stu-id="9a674-109">private addresses).</span></span>  <span data-ttu-id="9a674-110">Bir uygulama hizmeti ortamı oluşturma hakkında daha fazla bilgi için bkz [bir uygulama hizmeti ortamı oluşturmak için nasıl][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="9a674-110">For more details on creating an App Service Environment see [How To Create an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="9a674-111">Bir alt ağ Yukarı Akış aygıtlarını ve hizmetlerini arkasında gelen trafik HTTP ve HTTPS trafiği yalnızca gelen belirli kabul edilen şekilde kilitlemek için kullanılan bir ağ sınırında sağladığından bir uygulama hizmeti ortamı her zaman bir alt ağ içinde yukarı akış oluşturulmalıdır IP adresleri.</span><span class="sxs-lookup"><span data-stu-id="9a674-111">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used to lock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="9a674-112">Bir alt ağdaki gelen ve giden ağ trafiğini kullanılarak denetlenir bir [ağ güvenlik grubu][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="9a674-112">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="9a674-113">Gelen trafik denetleme uygulama hizmeti ortamı içeren alt ağ güvenlik kuralları bir ağ güvenlik grubu oluşturma ve ağ güvenliği atama Grup gerektirir.</span><span class="sxs-lookup"><span data-stu-id="9a674-113">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning the network security group the subnet containing the App Service Environment.</span></span>

<span data-ttu-id="9a674-114">Bir ağ güvenlik grubu bir alt ağa atandıktan sonra uygulama hizmeti ortamı uygulamalarında gelen trafiğe izin / izin ver dayalı engellenir ve reddetme kurallarının ağ güvenlik grubu listesinde tanımlı.</span><span class="sxs-lookup"><span data-stu-id="9a674-114">Once a network security group is assigned to a subnet, inbound traffic to apps in the App Service Environment is allowed/blocked based on the allow and deny rules defined in the network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="9a674-115">Gelen ağ bir uygulama hizmeti ortamı'nda kullanılan bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="9a674-115">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="9a674-116">Bir ağ güvenlik grubu ile gelen ağ trafiğini kilitleme önce bir uygulama hizmeti ortamı tarafından kullanılan gerekli ve isteğe bağlı ağ bağlantı noktası kümesi bilmeniz önemlidir.</span><span class="sxs-lookup"><span data-stu-id="9a674-116">Before locking down inbound network traffic with a network security group, it is important to know the set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="9a674-117">Bazı bağlantı noktaları için trafiği kapalı yanlışlıkla kapatma bir uygulama hizmeti ortamı işlev kaybı neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-117">Accidentally closing off traffic to some ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="9a674-118">Bir uygulama hizmeti ortamı tarafından kullanılan bağlantı noktalarının bir listesi verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="9a674-118">The following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="9a674-119">Tüm bağlantı noktaları **TCP**aksi açıkça belirtilmediği sürece:</span><span class="sxs-lookup"><span data-stu-id="9a674-119">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="9a674-120">454: **gerekli bağlantı noktası** yönetme ve SSL üzerinden uygulama hizmeti ortamları korumaya yönelik Azure altyapısı tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-120">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="9a674-121">Bu bağlantı noktası trafik engellemez.</span><span class="sxs-lookup"><span data-stu-id="9a674-121">Do not block traffic to this port.</span></span>  <span data-ttu-id="9a674-122">Bu bağlantı noktası her zaman bir ana genel VIP bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="9a674-122">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="9a674-123">455: **gerekli bağlantı noktası** yönetme ve SSL üzerinden uygulama hizmeti ortamları korumaya yönelik Azure altyapısı tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-123">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="9a674-124">Bu bağlantı noktası trafik engellemez.</span><span class="sxs-lookup"><span data-stu-id="9a674-124">Do not block traffic to this port.</span></span>  <span data-ttu-id="9a674-125">Bu bağlantı noktası her zaman bir ana genel VIP bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="9a674-125">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="9a674-126">80: varsayılan bağlantı noktası gelen HTTP trafiği App Service planları bir uygulama hizmeti ortamında çalışan uygulamalar için.</span><span class="sxs-lookup"><span data-stu-id="9a674-126">80:  Default port for inbound HTTP traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="9a674-127">Bir ILB özellikli ana Bu bağlantı noktası ana ILB adresine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="9a674-127">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="9a674-128">443: varsayılan bağlantı noktası gelen SSL trafiği App Service planları bir uygulama hizmeti ortamında çalışan uygulamalar için.</span><span class="sxs-lookup"><span data-stu-id="9a674-128">443: Default port for inbound SSL traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="9a674-129">Bir ILB özellikli ana Bu bağlantı noktası ana ILB adresine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="9a674-129">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="9a674-130">21: denetim kanalı FTP için.</span><span class="sxs-lookup"><span data-stu-id="9a674-130">21:  Control channel for FTP.</span></span>  <span data-ttu-id="9a674-131">FTP değil kullanılıyorsa, bu bağlantı noktası güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-131">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="9a674-132">Bir ILB özellikli ana Bu bağlantı noktası için bir ana ILB adresine bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-132">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="9a674-133">990: denetim kanalı FTPS için.</span><span class="sxs-lookup"><span data-stu-id="9a674-133">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="9a674-134">FTPS değil kullanılıyorsa, bu bağlantı noktası güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-134">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="9a674-135">Bir ILB özellikli ana Bu bağlantı noktası için bir ana ILB adresine bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-135">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="9a674-136">10001 10020: FTP için veri kanalı.</span><span class="sxs-lookup"><span data-stu-id="9a674-136">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="9a674-137">FTP değil kullanılıyorsa, denetim kanalı olduğu gibi bu bağlantı noktalarının güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-137">As with the control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="9a674-138">Bir ILB özellikli ana Bu bağlantı noktası ana'nın ILB adresine bağlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-138">On an ILB-enabled ASE, this port can be bound to the ASE's ILB address.</span></span>
* <span data-ttu-id="9a674-139">4016: Visual Studio 2012 ile uzaktan hata ayıklama için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-139">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="9a674-140">Özelliği olmayan kullanılıyorsa, bu bağlantı noktası güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-140">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="9a674-141">Bir ILB özellikli ana Bu bağlantı noktası ana ILB adresine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="9a674-141">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="9a674-142">4018: Visual Studio 2013 ile uzaktan hata ayıklama için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-142">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="9a674-143">Özelliği olmayan kullanılıyorsa, bu bağlantı noktası güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-143">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="9a674-144">Bir ILB özellikli ana Bu bağlantı noktası ana ILB adresine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="9a674-144">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="9a674-145">4020: Visual Studio 2015 ile uzaktan hata ayıklama için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-145">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="9a674-146">Özelliği olmayan kullanılıyorsa, bu bağlantı noktası güvenli bir şekilde engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-146">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="9a674-147">Bir ILB özellikli ana Bu bağlantı noktası ana ILB adresine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="9a674-147">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="9a674-148">Giden bağlantısı ve DNS gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="9a674-148">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="9a674-149">Bir uygulama hizmeti düzgün şekilde çalışabilmesi ortamı için çeşitli uç noktalarına giden erişim de gerektirir.</span><span class="sxs-lookup"><span data-stu-id="9a674-149">For an App Service Environment to function properly, it also requires outbound access to various endpoints.</span></span> <span data-ttu-id="9a674-150">Tam bir ana tarafından kullanılan dış uç noktalar "Ağ bağlantısı gerekli" bölümünde listelenmiştir [ExpressRoute için ağ yapılandırması](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) makalesi.</span><span class="sxs-lookup"><span data-stu-id="9a674-150">A full list of the external endpoints used by an ASE is in the "Required Network Connectivity" section of the [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="9a674-151">Uygulama hizmeti ortamları sanal ağ için yapılandırılmış geçerli bir DNS altyapısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="9a674-151">App Service Environments require a valid DNS infrastructure configured for the virtual network.</span></span>  <span data-ttu-id="9a674-152">Bir uygulama hizmeti ortamı oluşturulduktan sonra DNS yapılandırmasını herhangi bir nedenle değiştirilirse, geliştiricilerin yeni DNS yapılandırmasını almak için bir uygulama hizmeti ortamı zorlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9a674-152">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="9a674-153">"Yeniden Başlat" simgesini kullanarak çalışırken bir ortamı yeniden başlatma tetikleme bulunan uygulama hizmeti ortamı yönetim dikey penceresinde üstündeki [Azure portal] [ NewPortal] yeni DNS araması seçmek ortam neden olur yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="9a674-153">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="9a674-154">Ayrıca, tüm özel DNS sunucuları vnet üzerinde bir uygulama hizmeti ortamı oluşturmadan önce vaktinden Kurulum olması önerilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-154">It is also recommended that any custom DNS servers on the vnet be setup ahead of time prior to creating an App Service Environment.</span></span>  <span data-ttu-id="9a674-155">Bir uygulama hizmeti ortamı oluşturulurken bir sanal ağın DNS yapılandırması değiştiyse, uygulama hizmeti ortamı oluşturma işlemi başarısız olan neden olur.</span><span class="sxs-lookup"><span data-stu-id="9a674-155">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in the App Service Environment creation process failing.</span></span>  <span data-ttu-id="9a674-156">Benzer bir damarlı içinde özel bir DNS sunucusu bir VPN ağ geçidi diğer ucundaki var ve DNS sunucusu erişilemez veya kullanılamaz, uygulama hizmeti ortamı oluşturma işlemi de başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="9a674-156">In a similar vein, if a custom DNS server exists on the other end of a VPN gateway, and the DNS server is unreachable or unavailable, the App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="9a674-157">Bir ağ güvenlik grubu oluşturma</span><span class="sxs-lookup"><span data-stu-id="9a674-157">Creating a Network Security Group</span></span>
<span data-ttu-id="9a674-158">Aşağıdaki iş nasıl ağ güvenlik grupları hakkında tam bilgi için bkz [bilgi][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="9a674-158">For full details on how network security groups work see the following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="9a674-159">Aşağıdaki örnek dokunur Azure Hizmet Yönetimi yapılandırma ve bir uygulama hizmeti ortamı içeren bir alt ağ için ağ güvenlik grubu uygulama odağı olan ağ güvenlik gruplarını vurgular.</span><span class="sxs-lookup"><span data-stu-id="9a674-159">The Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group to a subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="9a674-160">**Not:** ağ güvenlik grupları, grafik kullanılarak yapılandırılabilir [Azure Portal](https://portal.azure.com) veya Azure PowerShell aracılığıyla.</span><span class="sxs-lookup"><span data-stu-id="9a674-160">**Note:** Network security groups can be configured graphically using the [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="9a674-161">Ağ güvenlik grupları, önce bir aboneliği ile ilişkili bir tek başına varlık olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="9a674-161">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="9a674-162">Ağ güvenlik grupları bir Azure bölgesinde oluşturulduğundan, ağ güvenlik grubu uygulama hizmeti ortamı ile aynı bölgede oluşturulduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="9a674-162">Since network security groups are created in an Azure region, ensure that the network security group is created in the same region as the App Service Environment.</span></span>

<span data-ttu-id="9a674-163">Aşağıdaki ağ güvenlik grubu oluşturmayı gösterir:</span><span class="sxs-lookup"><span data-stu-id="9a674-163">The following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="9a674-164">Bir ağ güvenlik grubu oluşturulduktan sonra bir veya daha fazla ağ güvenlik kuralları için eklenir.</span><span class="sxs-lookup"><span data-stu-id="9a674-164">Once a network security group is created, one or more network security rules are added to it.</span></span>  <span data-ttu-id="9a674-165">Kuralları zamanla değişebileceği için kural önceliklerini zamanla ek kurallar eklemek kolaylaştırmak için kullanılan numaralandırma düzeni çıkışı boşluk tavsiye edilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-165">Since the set of rules may change over time, it is recommended to space out the numbering scheme used for rule priorities to make it easy to insert additional rules over time.</span></span>

<span data-ttu-id="9a674-166">Aşağıdaki örnek, yönetme ve uygulama hizmeti ortamını sürdürmek için Azure altyapısı tarafından gerekli yönetim bağlantı noktalarını erişim açıkça veren bir kural gösterir.</span><span class="sxs-lookup"><span data-stu-id="9a674-166">The example below shows a rule that explicitly grants access to the management ports needed by the Azure infrastructure to manage and maintain an App Service Environment.</span></span>  <span data-ttu-id="9a674-167">Tüm yönetim trafiğini SSL üzerinden akar ve bağlantı noktaları açılmış olsa da, bunlar Azure Yönetim altyapısı dışında herhangi bir varlık tarafından erişilemez; bu nedenle istemci sertifikaları tarafından sağlanıyorsa unutmayın.</span><span class="sxs-lookup"><span data-stu-id="9a674-167">Note that all management traffic flows over SSL and is secured by client certificates, so even though the ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="9a674-168">80 ve 443 "Bir uygulama hizmeti ortamı Yukarı Akış aygıtları veya hizmetleri arkasındaki gizlemek için" bağlantı noktasına erişime kilitleme, Yukarı Akış IP adresini bilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="9a674-168">When locking down access to port 80 and 443 to "hide" an App Service Environment behind upstream devices or services, you will need to know the upstream IP address.</span></span>  <span data-ttu-id="9a674-169">Bir web uygulaması Güvenlik Duvarı (WAF) kullanıyorsanız, örneğin, WAF kendi IP adresi (veya adresleri) ne zaman kullanan sahip bir aşağı akış uygulama hizmeti ortamı proxy trafiği.</span><span class="sxs-lookup"><span data-stu-id="9a674-169">For example, if you are using a web application firewall (WAF), the WAF will have its own IP address (or addresses) which it uses when proxying traffic to a downstream App Service Environment.</span></span>  <span data-ttu-id="9a674-170">Bu IP adresi kullanmanız gerekecektir *SourceAddressPrefix* bir ağ güvenlik kuralı parametresi.</span><span class="sxs-lookup"><span data-stu-id="9a674-170">You will need to use this IP address in the *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="9a674-171">Aşağıdaki örnekte, belirli bir Yukarı Akış IP adresinden gelen gelen trafiğe açıkça izin verilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-171">In the example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="9a674-172">Adres *1.2.3.4* yer tutucu olarak bir Yukarı Akış WAF IP adresi için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9a674-172">The address *1.2.3.4* is used as a placeholder for the IP address of an upstream WAF.</span></span>  <span data-ttu-id="9a674-173">Yukarı Akış aygıt veya hizmet tarafından kullanılan adres değerini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="9a674-173">Change the value to match the address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="9a674-174">FTP desteği isterseniz, aşağıdaki kurallar Kanal bağlantı noktaları FTP denetim bağlantı noktası ve veri erişim vermek için bir şablon olarak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-174">If FTP support is desired, the following rules can be used as a template to grant access to the FTP control port and data channel ports.</span></span>  <span data-ttu-id="9a674-175">FTP durum bilgisi olan kuralıdır olduğundan, geleneksel HTTP/HTTPS güvenlik duvarı veya proxy üzerinden bir cihazın FTP trafiği yönlendirmek mümkün olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-175">Since FTP is a stateful protocol, you may not be able to route FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="9a674-176">Bu durumda, ayarlamanız gerekir *SourceAddressPrefix* için farklı bir değer - örneğin IP adresi aralığı üzerinde hangi FTP istemcileri çalıştığını geliştirici veya dağıtım makinelerin.</span><span class="sxs-lookup"><span data-stu-id="9a674-176">In this case you will need to set the *SourceAddressPrefix* to a different value - for example the IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="9a674-177">(**Not:** veri kanalı bağlantı noktası aralığı için Önizleme dönemi boyunca değişebilir.)</span><span class="sxs-lookup"><span data-stu-id="9a674-177">(**Note:**  the data channel port range may change during the preview period.)</span></span>

<span data-ttu-id="9a674-178">Visual Studio ile uzaktan hata ayıklama kullanılırsa, aşağıdaki kurallar erişim vermek nasıl ekleyebileceğiniz gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="9a674-178">If remote debugging with Visual Studio is used, the following rules demonstrate how to grant access.</span></span>  <span data-ttu-id="9a674-179">Her bir sürümü uzaktan hata ayıklama için farklı bir bağlantı noktasını kullandığından Visual Studio'nun desteklenen her sürümü için ayrı bir kural yok.</span><span class="sxs-lookup"><span data-stu-id="9a674-179">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="9a674-180">FTP erişimli olarak, uzaktan hata ayıklama trafiği geleneksel WAF ya da proxy aygıt akışı düzgün değil.</span><span class="sxs-lookup"><span data-stu-id="9a674-180">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="9a674-181">*SourceAddressPrefix* bunun yerine Visual Studio çalıştıran Geliştirici makinelerinde IP adres aralığını ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="9a674-181">The *SourceAddressPrefix* can instead be set to the IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-to-a-subnet"></a><span data-ttu-id="9a674-182">Bir alt ağa bir ağ güvenlik grubu atanması</span><span class="sxs-lookup"><span data-stu-id="9a674-182">Assigning a Network Security Group to a Subnet</span></span>
<span data-ttu-id="9a674-183">Bir ağ güvenlik grubu, tüm dış trafiğe erişimini engellediği bir varsayılan güvenlik kuralı vardır.</span><span class="sxs-lookup"><span data-stu-id="9a674-183">A network security group has a default security rule which denies access to all external traffic.</span></span>  <span data-ttu-id="9a674-184">Kaynak adres aralığı ile ilişkili yalnızca o trafiğinden yukarıda açıklanan ağ güvenlik kuralları ve gelen trafiği engelleyen varsayılan güvenlik kuralını birleştirme gelen sonucu olan bir *izin* eylem gönderebilmesi için olacaktır Uygulama hizmeti ortamı'nda çalışan uygulamalara trafiği.</span><span class="sxs-lookup"><span data-stu-id="9a674-184">The result from combining the network security rules described above, and the default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able to send traffic to apps running in an App Service Environment.</span></span>

<span data-ttu-id="9a674-185">Bir ağ güvenlik grubu güvenlik kuralları ile doldurulduktan sonra uygulama hizmeti ortamı içeren alt ağına atanmış olması gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="9a674-185">After a network security group is populated with security rules, it needs to be assigned to the subnet containing the App Service Environment.</span></span>  <span data-ttu-id="9a674-186">Atama komutu hem uygulama hizmeti ortamı bulunduğu sanal ağın adını, hem de uygulama hizmeti ortamı oluşturulduğu alt ağ adı başvurur.</span><span class="sxs-lookup"><span data-stu-id="9a674-186">The assignment command references both the name of the virtual network where the App Service Environment resides, as well as the name of the subnet where the App Service Environment was created.</span></span>  

<span data-ttu-id="9a674-187">Aşağıdaki örnek, bir alt ağ ve sanal ağ için atanmış bir ağ güvenlik grubu gösterir:</span><span class="sxs-lookup"><span data-stu-id="9a674-187">The example below shows a network security group being assigned to a subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="9a674-188">Ağ güvenlik grubu ataması başarılı olduktan sonra (ataması uzun süre çalışan işlemleri olduğu ve tamamlanması birkaç dakika sürebilir), yalnızca trafik eşleşen gelen *izin* kuralları başarıyla uygulama hizmetinde uygulamalar ulaşmak Ortam.</span><span class="sxs-lookup"><span data-stu-id="9a674-188">Once the network security group assignment succeeds (the assignment is a long-running operations and can take a few minutes to complete), only inbound traffic matching *Allow* rules will successfully reach apps in the App Service Environment.</span></span>

<span data-ttu-id="9a674-189">Eksiksiz olması için aşağıdaki örnek kaldırın ve bu nedenle ağ güvenlik grubu alt ağdan dis-ilişkilendirmek gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="9a674-189">For completeness the following example shows how to remove and thus dis-associate the network security group from the subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="9a674-190">Açık IP SSL için özel hususlar</span><span class="sxs-lookup"><span data-stu-id="9a674-190">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="9a674-191">Bir uygulama olan açık bir IP SSL adresi yapılandırılmışsa (uygulanabilir *yalnızca* genel VIP'ye sahip ASEs için), uygulama hizmeti ortamı varsayılan IP adresini kullanmak yerine, HTTP ve HTTPS alt akar üzerinden trafik bir 80 ve 443 numaralı bağlantı noktaları dışındaki bağlantı noktaları farklı kümesi.</span><span class="sxs-lookup"><span data-stu-id="9a674-191">If an app is configured with an explicit IP-SSL address (applicable *only* to ASEs that have a public VIP), instead of using the default IP address of the App Service Environment, both HTTP and HTTPS traffic flows into the subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="9a674-192">Uygulama hizmeti ortamı'nın ayrıntıları UX dikey penceresinden portal kullanıcı arabiriminde her IP SSL adresi tarafından kullanılan bağlantı noktalarını tek tek çiftinin bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="9a674-192">The individual pair of ports used by each IP-SSL address can be found in the portal user interface from the App Service Environment's details UX blade.</span></span>  <span data-ttu-id="9a674-193">Select "tüm ayarları", "IP adreslerini"-->.</span><span class="sxs-lookup"><span data-stu-id="9a674-193">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="9a674-194">"IP adreslerini" dikey her IP SSL adresi ile ilişkili HTTP ve HTTPS trafiği yönlendirmek için kullanılan özel bağlantı noktası çifti birlikte uygulama hizmeti ortamı için açıkça yapılandırılmış tüm IP SSL adresleri tablosu gösterir.</span><span class="sxs-lookup"><span data-stu-id="9a674-194">The "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for the App Service Environment, along with the special port pair that is used to route HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="9a674-195">DestinationPortRange parametrelerini kuralları içinde bir ağ güvenlik grubu yapılandırırken kullanılmalıdır bu bağlantı noktası çiftidir.</span><span class="sxs-lookup"><span data-stu-id="9a674-195">It is this port pair that needs to be used for the DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="9a674-196">Bir uygulama bir ana üzerinde IP SSL kullanmak üzere yapılandırıldığında, dış müşterileri görmezsiniz ve özel bağlantı noktası çifti eşleme hakkında endişelenmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="9a674-196">When an app on an ASE is configured to use IP-SSL, external customers will not see and do not need to worry about the special port pair mapping.</span></span>  <span data-ttu-id="9a674-197">Uygulamalar için trafik normal olarak yapılandırılmış IP SSL adres akar.</span><span class="sxs-lookup"><span data-stu-id="9a674-197">Traffic to the apps will flow normally to the configured IP-SSL address.</span></span>  <span data-ttu-id="9a674-198">Çeviri özel bağlantı noktası çifti için otomatik olarak dahili olarak Yönlendirme trafiğini son leg sırasında ana içeren alt ağ gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="9a674-198">The translation to the special port pair automatically happens internally during the final leg of routing traffic into the subnet containing the ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="9a674-199">Başlarken</span><span class="sxs-lookup"><span data-stu-id="9a674-199">Getting started</span></span>
<span data-ttu-id="9a674-200">Uygulama hizmeti ortamları ile çalışmaya başlamak için bkz: [uygulama hizmeti ortamı giriş][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="9a674-200">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="9a674-201">Tüm makaleler ve nasıl-için uygulama hizmeti ortamları kullanılabilir için kullanıcının [uygulama hizmeti ortamları için Benioku](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="9a674-201">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="9a674-202">Uygulamaları güvenli bir uygulama hizmeti ortamındaki arka uç kaynağa bağlamadan geçici daha fazla bilgi için bkz [bir uygulama hizmeti ortamı'ndan arka uç kaynaklarına güvenli bir şekilde bağlanma][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="9a674-202">For details around apps securely connecting to backend resource from an App Service Environment, see [Securely connecting to Backend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="9a674-203">Azure App Service platformu hakkında daha fazla bilgi için bkz: [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="9a674-203">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

