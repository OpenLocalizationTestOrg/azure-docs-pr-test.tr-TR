---
title: "Azure'da VM yedekleme altyapınızı planlama | Microsoft Docs"
description: "Azure sanal makineleri yedeklemek planlama yaparken önemli noktalar"
services: backup
documentationcenter: 
author: markgalioto
manager: carmonm
editor: 
keywords: sanal makineleri yedekleme, sanal makineleri yedekleme
ms.assetid: 19d2cf82-1f60-43e1-b089-9238042887a9
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/18/2017
ms.author: markgal;trinadhk
ms.openlocfilehash: 0c930c7413b24a811707c3a1ff3d7d70585bc528
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="plan-your-vm-backup-infrastructure-in-azure"></a><span data-ttu-id="fc1cf-104">Azure’da sanal makine yedekleme altyapınızı planlama</span><span class="sxs-lookup"><span data-stu-id="fc1cf-104">Plan your VM backup infrastructure in Azure</span></span>
<span data-ttu-id="fc1cf-105">Bu makalede, performansı ve VM yedekleme altyapınızı planlamanıza yardımcı olması için kaynak önerileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-105">This article provides performance and resource suggestions to help you plan your VM backup infrastructure.</span></span> <span data-ttu-id="fc1cf-106">Ayrıca, Backup hizmeti önemli yönlerini tanımlar; Bu yönlerinin, mimarisi belirlemede önemli kapasite planlaması ve zamanlama.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-106">It also defines key aspects of the Backup service; these aspects can be critical in determining your architecture, capacity planning, and scheduling.</span></span> <span data-ttu-id="fc1cf-107">Seçtiğiniz varsa [ortamınızı hazırlanmış](backup-azure-vms-prepare.md), planlama sonraki adım başlamadan önce [Vm'leri yedekleme için](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-107">If you've [prepared your environment](backup-azure-vms-prepare.md), planning is the next step before you begin [to back up VMs](backup-azure-vms.md).</span></span> <span data-ttu-id="fc1cf-108">Azure sanal makineler hakkında daha fazla bilgiye ihtiyacınız varsa bkz [Virtual Machines belgeleri](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-108">If you need more information about Azure virtual machines, see the [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="how-does-azure-back-up-virtual-machines"></a><span data-ttu-id="fc1cf-109">Azure nasıl mu sanal makineleri yedekleyin?</span><span class="sxs-lookup"><span data-stu-id="fc1cf-109">How does Azure back up virtual machines?</span></span>
<span data-ttu-id="fc1cf-110">Azure Backup hizmeti zamanlanan saatte bir yedekleme işi başlattığında, zaman içinde nokta anlık almak için yedekleme uzantısını tetikler.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-110">When the Azure Backup service initiates a backup job at the scheduled time, it triggers the backup extension to take a point-in-time snapshot.</span></span> <span data-ttu-id="fc1cf-111">Azure Backup hizmeti kullandığı _VMSnapshot_ pencerelerinde, uzantı ve _VMSnapshotLinux_ Linux uzantı.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-111">The Azure Backup service uses the _VMSnapshot_ extension in Windows, and the _VMSnapshotLinux_ extension in Linux.</span></span> <span data-ttu-id="fc1cf-112">Uzantısı ilk VM yedekleme sırasında yüklenir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-112">The extension is installed during the first VM backup.</span></span> <span data-ttu-id="fc1cf-113">Uzantıyı yüklemek için VM çalıştırması gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-113">To install the extension, the VM must be running.</span></span> <span data-ttu-id="fc1cf-114">VM çalışmıyorsa bu yana (hiçbir uygulama yazma VM durdurulduğunda oluşur) yedekleme hizmeti temel alınan depolama anlık görüntü alır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-114">If the VM is not running, the Backup service takes a snapshot of the underlying storage (since no application writes occur while the VM is stopped).</span></span>

<span data-ttu-id="fc1cf-115">Windows VM görüntüsünü alırken, Backup hizmeti Birim Gölge Kopyası Hizmeti (sanal makine disklerin tutarlı bir anlık görüntü almak için VSS ile) düzenler.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-115">When taking a snapshot of Windows VMs, the Backup service coordinates with the Volume Shadow Copy Service (VSS) to get a consistent snapshot of the virtual machine's disks.</span></span> <span data-ttu-id="fc1cf-116">Linux VM'ler yedekliyorsanız, bir VM anlık görüntü duruma getirirken tutarlılığını sağlamak için kendi özel komut dosyaları yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-116">If you're backing up Linux VMs, you can write your own custom scripts to ensure consistency when taking a VM snapshot.</span></span> <span data-ttu-id="fc1cf-117">Bu komut dosyalarını Çağırma ile ilgili ayrıntılar bu makalenin sonraki bölümlerinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-117">Details on invoking these scripts are provided later in this article.</span></span>

<span data-ttu-id="fc1cf-118">Azure Backup hizmeti anlık görüntüsünü alır sonra verileri kasaya aktarılır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-118">Once the Azure Backup service takes the snapshot, the data is transferred to the vault.</span></span> <span data-ttu-id="fc1cf-119">Verimliliği en üst düzeye çıkarmak için hizmet tanımlar ve yalnızca son yedeklemeden sonra değiştirilen veri blokları aktarır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-119">To maximize efficiency, the service identifies and transfers only the blocks of data that have changed since the previous backup.</span></span>

![Azure sanal makine yedekleme mimarisi](./media/backup-azure-vms-introduction/vmbackup-architecture.png)

<span data-ttu-id="fc1cf-121">Veri aktarımı tamamlandığında, anlık görüntü kaldırılır ve bir kurtarma noktası oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-121">When the data transfer is complete, the snapshot is removed and a recovery point is created.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="fc1cf-122">Azure yedekleme yedekleme işlemi sırasında sanal makineye bağlı geçici disk içermez.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-122">During the backup process, Azure Backup doesn't include the temporary disk attached to the virtual machine.</span></span> <span data-ttu-id="fc1cf-123">Daha fazla bilgi için blog bakın [geçici depolama](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-123">For more information, see the blog on [temporary storage](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span></span>
> 2. <span data-ttu-id="fc1cf-124">Azure yedekleme depolama düzeyi anlık görüntüsünü alır ve bu anlık görüntüyü kasa aktarır olduğundan, yedekleme işi tamamlanana kadar depolama hesabı anahtarlarını değiştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-124">Since Azure Backup takes a storage-level snapshot and transfers that snapshot to vault, do not change the storage account keys until the backup job finishes.</span></span>
> 3. <span data-ttu-id="fc1cf-125">Premium VM'ler için biz anlık görüntü depolama hesabına kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-125">For premium VMs, we copy the snapshot to storage account.</span></span> <span data-ttu-id="fc1cf-126">Azure Backup hizmeti kasa için verileri aktarmak için yeterli IOPS aldığından emin olmak için budur.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-126">This is to make sure that Azure Backup service gets sufficient IOPS for transferring data to vault.</span></span> <span data-ttu-id="fc1cf-127">Bu ek kopyasını depolama boyutu ayrılmış VM başına ücret kesilir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-127">This additional copy of storage is charged as per the VM allocated size.</span></span> 
>

### <a name="data-consistency"></a><span data-ttu-id="fc1cf-128">Veri tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-128">Data consistency</span></span>
<span data-ttu-id="fc1cf-129">Yedekleme ve geri yükleme iş açısından kritik verileri veri üreten uygulamaları sırasında yedeklenmesi olarak kritik verileri karmaşık iş çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-129">Backing up and restoring business critical data is complicated by the fact that business critical data must be backed up while the applications that produce the data are running.</span></span> <span data-ttu-id="fc1cf-130">Bu sorunu çözmek için Azure Backup uygulamayla tutarlı yedeklemeler Windows ve Linux VM'ler için destekler</span><span class="sxs-lookup"><span data-stu-id="fc1cf-130">To address this, Azure Backup supports application-consistent backups for both Windows and Linux VMs</span></span>
#### <a name="windows-vm"></a><span data-ttu-id="fc1cf-131">Windows VM</span><span class="sxs-lookup"><span data-stu-id="fc1cf-131">Windows VM</span></span>
<span data-ttu-id="fc1cf-132">Azure yedekleme Windows Vm'lerinde VSS tam yedeklemeler gerçekleştirir (daha fazla bilgi edinin [VSS tam yedekleme](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-132">Azure Backup takes VSS full backups on Windows VMs (read more about [VSS full backup](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span></span> <span data-ttu-id="fc1cf-133">VSS kopya yedeklemelerinin etkinleştirmek için aşağıdaki kayıt defteri anahtarını VM ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-133">To enable VSS copy backups, the following registry key needs to be set on the VM.</span></span>

```
[HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
"USEVSSCOPYBACKUP"="TRUE"
```

#### <a name="linux-vms"></a><span data-ttu-id="fc1cf-134">Linux VM'leri</span><span class="sxs-lookup"><span data-stu-id="fc1cf-134">Linux VMs</span></span>
<span data-ttu-id="fc1cf-135">Azure Backup komut dosyası bir çerçeve sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-135">Azure Backup provides a scripting framework.</span></span> <span data-ttu-id="fc1cf-136">Linux Vm'leri yedekleme olduğunda uygulama tutarlılığı sağlamak için özel öncesi ve yedekleme iş akışı ve ortam denetimi sonrası komut dosyaları oluşturun.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-136">To ensure application consistency when backing up Linux VMs, create custom pre-scripts and post-scripts that control the backup workflow and environment.</span></span> <span data-ttu-id="fc1cf-137">Azure yedekleme öncesi betik VM anlık görüntüsü çıkarmadan önce çağırır ve VM anlık görüntü işi tamamlandıktan sonra sonrası komut dosyasını çağırır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-137">Azure Backup invokes the pre-script before taking the VM snapshot and invokes the post-script once the VM snapshot job completes.</span></span> <span data-ttu-id="fc1cf-138">Daha fazla ayrıntı için bkz: [öncesi betiği ve sonrası betik kullanarak uygulama tutarlı VM yedeklemeleri](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-138">For more details, see [application consistent VM backups using pre-script and post-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span>
> [!NOTE]
> <span data-ttu-id="fc1cf-139">Azure yedekleme yalnızca çağırır müşteri tarafından yazılan öncesi ve sonrası komut dosyaları.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-139">Azure Backup only invokes the customer-written pre- and post-scripts.</span></span> <span data-ttu-id="fc1cf-140">Öncesi betiği ve sonrası betikleri başarıyla çalıştırırsanız, Azure yedekleme kurtarma noktası uygulama tutarlı işaretler.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-140">If the pre-script and post-scripts execute successfully, Azure Backup marks the recovery point as application consistent.</span></span> <span data-ttu-id="fc1cf-141">Ancak, müşterinin özel komut dosyaları için uygulama tutarlılığı sorumlu kullanıldığında.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-141">However, the customer is ultimately responsible for the application consistency when using custom scripts.</span></span>
>


<span data-ttu-id="fc1cf-142">Bu tablo tutarlılık türlerini açıklar ve Azure VM sırasında altında ortaya koşullar yedekleme ve geri yükleme yordamlarını.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-142">This table explains the types of consistency and the conditions that they occur under during Azure VM backup and restore procedures.</span></span>

| <span data-ttu-id="fc1cf-143">Tutarlılık</span><span class="sxs-lookup"><span data-stu-id="fc1cf-143">Consistency</span></span> | <span data-ttu-id="fc1cf-144">VSS tabanlı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-144">VSS-based</span></span> | <span data-ttu-id="fc1cf-145">Açıklama ve ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="fc1cf-145">Explanation and details</span></span> |
| --- | --- | --- |
| <span data-ttu-id="fc1cf-146">Uygulama tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-146">Application consistency</span></span> |<span data-ttu-id="fc1cf-147">Windows için Evet</span><span class="sxs-lookup"><span data-stu-id="fc1cf-147">Yes for Windows</span></span>|<span data-ttu-id="fc1cf-148">Uygulama tutarlılığı, sağlar gibi iş yükleri için idealdir:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-148">Application consistency is ideal for workloads as it ensures that:</span></span><ol><li> <span data-ttu-id="fc1cf-149">VM *ön*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-149">The VM *boots up*.</span></span> <li><span data-ttu-id="fc1cf-150">Yoktur *bozulma*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-150">There is *no corruption*.</span></span> <li><span data-ttu-id="fc1cf-151">Yoktur *veri kaybı*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-151">There is *no data loss*.</span></span><li> <span data-ttu-id="fc1cf-152">Verileri zamanında uygulama VSS veya ön/son betik kullanarak yedekleme--içeren tarafından veri kullanan uygulama tutarlıdır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-152">The data is consistent to the application that uses the data, by involving the application at the time of backup--using VSS or pre/post script.</span></span></ol> <li><span data-ttu-id="fc1cf-153">*Windows sanal makineleri*-en Microsoft iş yükleri için veri tutarlılığı ilgili iş yüküne özgü eylemleri gerçekleştirebilirsiniz VSS yazıcılarının vardır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-153">*Windows VMs*- Most Microsoft workloads have VSS writers that do workload-specific actions related to data consistency.</span></span> <span data-ttu-id="fc1cf-154">Örneğin, Microsoft SQL Server işlem günlüğü dosyasını ve veritabanına yazma doğru şekilde yapıldığını sağlar bir VSS yazıcısı olduğu.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-154">For example, Microsoft SQL Server has a VSS writer that ensures that the writes to the transaction log file and the database are done correctly.</span></span> <span data-ttu-id="fc1cf-155">Azure Windows VM yedeklemeler için bir uygulama tutarlı bir kurtarma noktası oluşturmak için backup uzantısı gerekir VSS iş akışının çağırmak ve VM anlık görüntüsü gerçekleştirilmesi için tamamlanması.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-155">For Azure Windows VM backups, to create an application-consistent recovery point, the backup extension must invoke the VSS workflow and complete it before taking the VM snapshot.</span></span> <span data-ttu-id="fc1cf-156">Azure VM anlık doğru olması tüm Azure VM uygulamaların VSS yazıcılarının da tamamlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-156">For the Azure VM snapshot to be accurate, the VSS writers of all Azure VM applications must complete as well.</span></span> <span data-ttu-id="fc1cf-157">(Öğrenin [VSS Temelleri](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) ve derin ayrıntılarını daha yakından inceleyin [nasıl çalıştığını](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-157">(Learn the [basics of VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) and dive deep into the details of [how it works](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span></span> </li> <li> <span data-ttu-id="fc1cf-158">*Linux VM'ler*-müşteriler yürütebilir [özel öncesi betiği ve uygulama tutarlılığı sağlamak için sonrası komut dosyası](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-158">*Linux VMs*- Customers can execute [custom pre-script and post-script to ensure application consistency](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span> </li> |
| <span data-ttu-id="fc1cf-159">Dosya sistemi tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-159">File-system consistency</span></span> |<span data-ttu-id="fc1cf-160">Evet - Windows tabanlı bilgisayarlar için</span><span class="sxs-lookup"><span data-stu-id="fc1cf-160">Yes - for Windows-based computers</span></span> |<span data-ttu-id="fc1cf-161">Kurtarma noktası olabilir burada iki senaryo vardır *dosya sistemi tutarlı*:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-161">There are two scenarios where the recovery point can be *file-system consistent*:</span></span><ul><li><span data-ttu-id="fc1cf-162">Linux VM'ler için Azure'da, yedeklerini öncesi-script/sonrası-script veya öncesi-script/sonrası-script başarısız olduysa olmadan.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-162">Backups of Linux VMs in Azure, without pre-script/post-script or if pre-script/post-script failed.</span></span> <li><span data-ttu-id="fc1cf-163">VSS azure'da Windows VM için yedekleme sırasında hata oluştu.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-163">VSS failure during backup for Windows VMs in Azure.</span></span></li></ul> <span data-ttu-id="fc1cf-164">Her iki bu durumda yapılabilir en iyi emin olmak için verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-164">In both these cases, the best that can be done is to ensure that:</span></span> <ol><li> <span data-ttu-id="fc1cf-165">VM *ön*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-165">The VM *boots up*.</span></span> <li><span data-ttu-id="fc1cf-166">Yoktur *bozulma*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-166">There is *no corruption*.</span></span><li><span data-ttu-id="fc1cf-167">Yoktur *veri kaybı*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-167">There is *no data loss*.</span></span></ol> <span data-ttu-id="fc1cf-168">Uygulamaları kendi "Düzeltme li" mekanizması geri yüklenen veriler üzerinde uygulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-168">Applications need to implement their own "fix-up" mechanism on the restored data.</span></span> |
| <span data-ttu-id="fc1cf-169">Kilitlenme tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-169">Crash consistency</span></span> |<span data-ttu-id="fc1cf-170">Hayır</span><span class="sxs-lookup"><span data-stu-id="fc1cf-170">No</span></span> |<span data-ttu-id="fc1cf-171">Bu durum, bir sanal makine (aracılığıyla ya da bir yazılım veya donanım sıfırlama) "kilitlenme" yaşayan eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-171">This situation is equivalent to a virtual machine experiencing a "crash" (through either a soft or hard reset).</span></span> <span data-ttu-id="fc1cf-172">Kilitlenme tutarlılığı normal yedekleme sırasında Azure sanal makine kapatılır ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-172">Crash consistency typically happens when the Azure virtual machine is shut down at the time of backup.</span></span> <span data-ttu-id="fc1cf-173">Kilitlenme tutarlı bir kurtarma noktası garanti veri tutarlılığını geçici depolama ortamına--işletim sistemi veya uygulama perspektifinden ya da sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-173">A crash-consistent recovery point provides no guarantees around the consistency of the data on the storage medium--either from the perspective of the operating system or the application.</span></span> <span data-ttu-id="fc1cf-174">Yalnızca yedekleme sırasında disk üzerinde zaten var. veri yakalanan ve yedeklendi.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-174">Only the data that already exists on the disk at the time of backup is captured and backed up.</span></span> <br/> <br/> <span data-ttu-id="fc1cf-175">Varken hiçbir garanti genellikle, işletim sistemini başlatır ve ardından disk kontrol ederek Bozulması hataları düzeltmek için chkdsk gibi yordamı.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-175">While there are no guarantees, usually, the operating system boots, followed by disk-checking procedure, like chkdsk, to fix any corruption errors.</span></span> <span data-ttu-id="fc1cf-176">Herhangi bir bellek içi veri veya diske aktarılmamış yazma kaybolur.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-176">Any in-memory data or writes that have not been transferred to the disk are lost.</span></span> <span data-ttu-id="fc1cf-177">Verileri geri alma yapılmalıdır durumda uygulama genellikle kendi doğrulama mekanizmasını ile izler.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-177">The application typically follows with its own verification mechanism in case data rollback needs to be done.</span></span> <br><br><span data-ttu-id="fc1cf-178">İşlem günlüğü veritabanında mevcut olmayan girişleri varsa verilerin tutarlı olana kadar örnek olarak, veritabanı yazılımına bir geri alma sonra yapar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-178">As an example, if the transaction log has entries that are not present in the database, then the database software does a rollback until the data is consistent.</span></span> <span data-ttu-id="fc1cf-179">(Gibi Dağıtılmış birimler) birden çok sanal disklere veri dağıldığında kilitlenme tutarlı bir kurtarma noktası verilerin doğruluğu garanti sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-179">When data is spread across multiple virtual disks (like spanned volumes), a crash-consistent recovery point provides no guarantees for the correctness of the data.</span></span> |

## <a name="performance-and-resource-utilization"></a><span data-ttu-id="fc1cf-180">Performans ve kaynak kullanımı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-180">Performance and resource utilization</span></span>
<span data-ttu-id="fc1cf-181">Dağıtılan şirket içi yedekleme yazılımı gibi kapasite ve kaynak kullanımı için gereksinimleri azure'da VM yedeklerken planlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-181">Like backup software that is deployed on-premises, you should plan for capacity and resource utilization needs when backing up VMs in Azure.</span></span> <span data-ttu-id="fc1cf-182">[Azure depolama sınırlarını](../azure-subscription-service-limits.md#storage-limits) nasıl yapılandıracağınıza en yüksek performans iş yüklerini çalıştırmak için en az etkiyle almak için VM dağıtımlarının tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-182">The [Azure Storage limits](../azure-subscription-service-limits.md#storage-limits) define how to structure VM deployments to get maximum performance with minimum impact to running workloads.</span></span>

<span data-ttu-id="fc1cf-183">Aşağıdaki Azure depolama sınırları yedekleme performansını planlarken dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-183">Pay attention to the following Azure Storage limits when planning backup performance:</span></span>

* <span data-ttu-id="fc1cf-184">Depolama hesabı başına en fazla çıkış</span><span class="sxs-lookup"><span data-stu-id="fc1cf-184">Max egress per storage account</span></span>
* <span data-ttu-id="fc1cf-185">Depolama hesabı başına toplam istek oranı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-185">Total request rate per storage account</span></span>

### <a name="storage-account-limits"></a><span data-ttu-id="fc1cf-186">Depolama hesabı sınırları</span><span class="sxs-lookup"><span data-stu-id="fc1cf-186">Storage account limits</span></span>
<span data-ttu-id="fc1cf-187">Yedekleme verilerini bir depolama hesabından kopyalanır, ölçümleri depolama hesabının ikinci (IOPS) ve çıkış (veya üretilen iş) başına girdi/çıktı işlemleri ekler.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-187">Backup data copied from a storage account, adds to the input/output operations per second (IOPS) and egress (or throughput) metrics of the storage account.</span></span> <span data-ttu-id="fc1cf-188">Aynı anda sanal makineleri de IOPS ve üretilen iş kullanıyor.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-188">At the same time, virtual machines are also consuming IOPS and throughput.</span></span> <span data-ttu-id="fc1cf-189">Hedef depolama hesabı sınırları yedekleme ve sanal makine trafiği aşmayan sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-189">The goal is to ensure Backup and virtual machine traffic don't exceed your storage account limits.</span></span>

### <a name="number-of-disks"></a><span data-ttu-id="fc1cf-190">Disk sayısı</span><span class="sxs-lookup"><span data-stu-id="fc1cf-190">Number of disks</span></span>
<span data-ttu-id="fc1cf-191">Yedekleme işlemi, yedekleme işi mümkün olan en kısa sürede tamamlamak çalışır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-191">The backup process tries to complete a backup job as quickly as possible.</span></span> <span data-ttu-id="fc1cf-192">Bunu yaparken, mümkün olduğunca fazla kaynak tüketir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-192">In doing so, it consumes as many resources as it can.</span></span> <span data-ttu-id="fc1cf-193">Ancak, tüm g/ç işlemleri tarafından sınırlı *tek Blob için hedef işleme*, saniye başına 60 MB sınırı vardır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-193">However, all I/O operations are limited by the *Target Throughput for Single Blob*, which has a limit of 60 MB per second.</span></span> <span data-ttu-id="fc1cf-194">Her VM'in disklerini yedeklemek yedekleme işlemi, hızı en üst düzeye çıkarmak için yapılan bir girişim de çalışır *paralel*.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-194">In an attempt to maximize its speed, the backup process tries to back up each of the VM's disks *in parallel*.</span></span> <span data-ttu-id="fc1cf-195">Bir VM dört diskler varsa, tüm dört diskleri paralel yedekleme hizmeti çalışır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-195">If a VM has four disks, the service attempts to back up all four disks in parallel.</span></span> <span data-ttu-id="fc1cf-196">**Diskleri sayısı** depolama hesabı yedekleme trafiği belirlemede en önemli etken olduğundan, yedeklenen.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-196">The **number of disks** being backed up, is the most important factor in determining storage account backup traffic.</span></span>

### <a name="backup-schedule"></a><span data-ttu-id="fc1cf-197">Yedekleme zamanlaması</span><span class="sxs-lookup"><span data-stu-id="fc1cf-197">Backup schedule</span></span>
<span data-ttu-id="fc1cf-198">Performansını etkiler ek bir etmen **yedekleme zamanlaması**.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-198">An additional factor that impacts performance is the **backup schedule**.</span></span> <span data-ttu-id="fc1cf-199">İlkeler tüm sanal makineleri aynı anda yedeklenir şekilde yapılandırırsanız, trafiği sıkışması zamanladınız.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-199">If you configure the policies so all VMs are backed up at the same time, you have scheduled a traffic jam.</span></span> <span data-ttu-id="fc1cf-200">Paralel tüm diskleri yedeklemek yedekleme işlemi çalışır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-200">The backup process attempts to back up all disks in parallel.</span></span> <span data-ttu-id="fc1cf-201">Bir depolama hesabından yedekleme trafiğini azaltmak için hiç örtüşmeyen günün farklı zamanında farklı Vm'leri yedekleme.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-201">To reduce the backup traffic from a storage account, back up different VMs at different time of the day, with no overlap.</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="fc1cf-202">Kapasite planlaması</span><span class="sxs-lookup"><span data-stu-id="fc1cf-202">Capacity planning</span></span>
<span data-ttu-id="fc1cf-203">Önceki Etkenler bir araya getirilmesi, depolama hesabı kullanımı gereksinimlerini planlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-203">Putting the previous factors together, you need to plan for the storage account usage needs.</span></span> <span data-ttu-id="fc1cf-204">Karşıdan [VM yedekleme kapasite planlama Excel elektronik tablosu](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) disk ve yedekleme zamanlaması seçimi etkisini görmek için.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-204">Download the [VM backup capacity planning Excel spreadsheet](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) to see the impact of your disk and backup schedule choices.</span></span>

### <a name="backup-throughput"></a><span data-ttu-id="fc1cf-205">Yedekleme işleme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-205">Backup throughput</span></span>
<span data-ttu-id="fc1cf-206">Yedeklenmekte olan her disk için Azure yedekleme disk üzerindeki blokları okur ve yalnızca değiştirilen verileri (artımlı yedeklemeyi) depolar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-206">For each disk being backed up, Azure Backup reads the blocks on the disk and stores only the changed data (incremental backup).</span></span> <span data-ttu-id="fc1cf-207">Aşağıdaki tabloda ortalama Yedekleme hizmetini işleme değerleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-207">The following table shows the average Backup service throughput values.</span></span> <span data-ttu-id="fc1cf-208">Aşağıdaki veriler kullanılarak, belirli bir boyutta bir diski yedeklemek için gereken süreyi tahmin edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-208">Using the following data, you can estimate the amount of time needed to back up a disk of a given size.</span></span>

| <span data-ttu-id="fc1cf-209">Yedekleme işlemi</span><span class="sxs-lookup"><span data-stu-id="fc1cf-209">Backup operation</span></span> | <span data-ttu-id="fc1cf-210">İyi verimlilik</span><span class="sxs-lookup"><span data-stu-id="fc1cf-210">Best-case throughput</span></span> |
| --- | --- |
| <span data-ttu-id="fc1cf-211">İlk yedekleme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-211">Initial backup</span></span> |<span data-ttu-id="fc1cf-212">160 MB/sn</span><span class="sxs-lookup"><span data-stu-id="fc1cf-212">160 Mbps</span></span> |
| <span data-ttu-id="fc1cf-213">Artımlı yedekleme (DR)</span><span class="sxs-lookup"><span data-stu-id="fc1cf-213">Incremental backup (DR)</span></span> |<span data-ttu-id="fc1cf-214">640 MB/sn</span><span class="sxs-lookup"><span data-stu-id="fc1cf-214">640 Mbps</span></span> <br><br> <span data-ttu-id="fc1cf-215">(Yedeklenmesi gereken) değiştirilen veri diski dağılmış olan, üretilen iş önemli ölçüde bırakır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-215">Throughput drops significantly if the changed data (that needs to be backed up) is dispersed across the disk.</span></span>|

## <a name="total-vm-backup-time"></a><span data-ttu-id="fc1cf-216">Toplam VM yedekleme saati</span><span class="sxs-lookup"><span data-stu-id="fc1cf-216">Total VM backup time</span></span>
<span data-ttu-id="fc1cf-217">Çoğu yedekleme zaman harcanır sırasında okuma ve veri kopyalama, diğer işlemlerin bir VM'yi yedeklemek için gereken toplam süreyi katkıda:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-217">While most of the backup time is spent reading and copying data, other operations contribute to the total time needed to back up a VM:</span></span>

* <span data-ttu-id="fc1cf-218">Gereken süre [veya yedekleme uzantısını güncelleştirmesini](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-218">Time needed to [install or update the backup extension](backup-azure-vms.md).</span></span>
* <span data-ttu-id="fc1cf-219">Anlık görüntü saati bir anlık görüntü tetiklemek için geçen süredir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-219">Snapshot time, which is the time taken to trigger a snapshot.</span></span> <span data-ttu-id="fc1cf-220">Anlık görüntüler yakın zamanlanmış yedekleme saati tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-220">Snapshots are triggered close to the scheduled backup time.</span></span>
* <span data-ttu-id="fc1cf-221">Sıra bekleme süresi.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-221">Queue wait time.</span></span> <span data-ttu-id="fc1cf-222">Birden çok müşteri yedeklemelerden işleme yedekleme hizmeti olduğundan, yedekleme veya kurtarma Hizmetleri kasasına yedekleme verileri anlık görüntüden kopyalama hemen başlatılamayabilir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-222">Since the Backup service is processing backups from multiple customers, copying backup data from snapshot to the backup or Recovery Services vault might not start immediately.</span></span> <span data-ttu-id="fc1cf-223">Yoğun saatler içinde yüklenemedi, bekleme sekiz saat işlenmekte olan yedekleme sayısı nedeniyle uzatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-223">In times of peak load, the wait can stretch up to eight hours due to the number of backups being processed.</span></span> <span data-ttu-id="fc1cf-224">Ancak, toplam VM yedekleme günlük yedekleme ilkeleri için 24 saatten az saattir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-224">However, the total VM backup time is less than 24 hours for daily backup policies.</span></span>
* <span data-ttu-id="fc1cf-225">Veri aktarımı zamanı, depolama kasası için artımlı değişiklikler önceki yedekten işlem ve bu değişiklikleri aktarmak yedekleme hizmeti için gereken zamanı.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-225">Data transfer time, time needed for backup service to compute the incremental changes from previous backup and transfer those changes to vault storage.</span></span>

### <a name="why-am-i-observing-longer12-hours-backup-time"></a><span data-ttu-id="fc1cf-226">Neden ı Gözlemleme longer(>12 hours) yedekleme zamanı?</span><span class="sxs-lookup"><span data-stu-id="fc1cf-226">Why am I observing longer(>12 hours) backup time?</span></span>
<span data-ttu-id="fc1cf-227">Yedekleme iki aşamadan oluşur: anlık görüntüler alma ve anlık görüntüleri Kasası'na aktarma.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-227">Backup consists of two phases: taking snapshots and transferring the snapshots to the vault.</span></span> <span data-ttu-id="fc1cf-228">Yedekleme hizmeti için depolama en iyi duruma getirir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-228">The Backup service optimizes for storage.</span></span> <span data-ttu-id="fc1cf-229">Anlık görüntü verilerini bir kasaya aktarırken hizmeti yalnızca artımlı değişiklikler önceki anlık görüntüden aktarır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-229">When transferring the snapshot data to a vault, the service only transfers incremental changes from the previous snapshot.</span></span>  <span data-ttu-id="fc1cf-230">Artımlı değişiklikler belirlemek için hizmet sağlama toplamı blokların hesaplar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-230">To determine the incremental changes, the service computes the checksum of the blocks.</span></span> <span data-ttu-id="fc1cf-231">Bir blok değiştirdiyseniz, blok kasaya gönderilmek üzere bloğu olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-231">If a block is changed, the block is identified as a block to be sent to the vault.</span></span> <span data-ttu-id="fc1cf-232">Ardından hizmeti ayrıntısına her veri aktarmak için en aza indirmek üzere fırsatlar arayan tanımlanan blokları, daha fazla.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-232">Then the service drills further into each of the identified blocks, looking for opportunities to minimize the data to transfer.</span></span> <span data-ttu-id="fc1cf-233">Tüm değişen blokları değerlendirdikten sonra hizmet değişiklikleri birleştirir ve bunları kasaya gönderir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-233">After evaluating all changed blocks, the service coalesces the changes and sends them to the vault.</span></span> <span data-ttu-id="fc1cf-234">Bazı eski uygulamalarda küçük, parçalanmış yazma depolama için uygun değildir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-234">In some legacy applications, small, fragmented writes are not optimal for storage.</span></span> <span data-ttu-id="fc1cf-235">Anlık görüntü çok sayıda küçük, parçalanmış yazma içeriyorsa, hizmet uygulamalar tarafından yazılan veriler işlemek için ek zaman harcayan.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-235">If the snapshot contains many small, fragmented writes, the service spends additional time processing the data written by the applications.</span></span> <span data-ttu-id="fc1cf-236">Azure, önerilen uygulama yazma bloğundan VM içinde çalışan uygulamalar için en az 8 KB ' dir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-236">The recommended application write block from Azure, for applications running inside the VM, is a minimum of 8 KB.</span></span> <span data-ttu-id="fc1cf-237">Uygulamanızı değerinden 8 KB'lik bir blok kullanıyorsa, yedekleme performansının parametreden etkilenir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-237">If your application uses a block of less than 8 KB, backup performance is effected.</span></span> <span data-ttu-id="fc1cf-238">Uygulamanızın performansını artırmak için ayarlama hakkında bilgi için bkz: [uygulamalarını Azure storage ile en iyi performans için ayarlama](../storage/common/storage-premium-storage-performance.md).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-238">For help with tuning your application to improve backup performance, see [Tuning applications for optimal performance with Azure storage](../storage/common/storage-premium-storage-performance.md).</span></span> <span data-ttu-id="fc1cf-239">Premium depolama örnekler makaleyi yedekleme performansı kullanılsa da Kılavuzu standart depolama diskleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-239">Though the article on backup performance uses Premium storage examples, the guidance is applicable for Standard storage disks.</span></span>

## <a name="total-restore-time"></a><span data-ttu-id="fc1cf-240">Toplam geri yükleme süresi</span><span class="sxs-lookup"><span data-stu-id="fc1cf-240">Total restore time</span></span>
<span data-ttu-id="fc1cf-241">Bir geri yükleme işlemi iki ana alt görevden oluşur: Seçilen müşteri depolama hesabına geri kasadan veri kopyalama ve sanal makine oluşturma.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-241">A restore operation consists of two main sub tasks: Copying data back from the vault to the chosen customer storage account, and creating the virtual machine.</span></span> <span data-ttu-id="fc1cf-242">Geri kasadan veri kopyalama, Azure yedekleme dahili olarak depolandığı ve müşteri depolama hesabı depolandığı bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-242">Copying data back from the vault depends on where the backups are stored internally in Azure, and where the customer storage account is stored.</span></span> <span data-ttu-id="fc1cf-243">Verileri kopyalamak için harcanan süre bağlıdır:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-243">Time taken to copy data depends upon:</span></span>
* <span data-ttu-id="fc1cf-244">Hizmet işleri birden çok müşterilerden aynı anda geri yükleme işlemleri beri. sıra bekleme süresi - geri yükleme bir kuyruğa koymak isteklerdir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-244">Queue wait time - Since the service processes restore jobs from multiple customers at the same time, restore requests are put in a queue.</span></span>
* <span data-ttu-id="fc1cf-245">Veri kopyalama zamanı - veri kasadan müşteri depolama hesabına kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-245">Data copy time - Data is copied from the vault to the customer storage account.</span></span> <span data-ttu-id="fc1cf-246">Geri yükleme süresi üzerinde IOPS bağlıdır ve verimlilik Azure Backup hizmeti seçili müşteriyi depolama hesabındaki alır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-246">Restore time depends on IOPS and throughput Azure Backup service gets on the selected customer storage account.</span></span> <span data-ttu-id="fc1cf-247">Geri yükleme işlemi sırasında kopyalama süresini azaltmak için diğer uygulama yazma ve okuma yüklenmemiş bir depolama hesabı seçin.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-247">To reduce the copying time during the restore process, select a storage account not loaded with other application writes and reads.</span></span>

## <a name="best-practices"></a><span data-ttu-id="fc1cf-248">En iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="fc1cf-248">Best practices</span></span>
<span data-ttu-id="fc1cf-249">Sanal makineleri için yedeklemeleri yapılandırılırken bu yöntemler aşağıdaki öneririz:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-249">We suggest following these practices while configuring backups for virtual machines:</span></span>

* <span data-ttu-id="fc1cf-250">10'dan fazla Klasik sanal makineleri aynı anda yedeklemek için aynı bulut hizmetinden zamanlama yok.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-250">Don't schedule more than 10 classic VMs from the same cloud service to back up at the same time.</span></span> <span data-ttu-id="fc1cf-251">Birden çok Vm'leri aynı bulut hizmetinden yedekleme istiyorsanız, bir saate göre yedekleme Başlangıç saatlerini basamaklandırma.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-251">If you want to back up multiple VMs from same cloud service, stagger the backup start times by an hour.</span></span>
* <span data-ttu-id="fc1cf-252">Aynı anda yedeklemek için birden fazla 40 VM'ler zamanlamayın.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-252">Do not schedule more than 40 VMs to back up at the same time.</span></span>
* <span data-ttu-id="fc1cf-253">VM, yoğun olmayan saatlerde yedeklemelerin.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-253">Schedule VM backups during non-peak hours.</span></span> <span data-ttu-id="fc1cf-254">Bu şekilde yedekleme hizmeti IOPS verileri müşteri depolama hesabından kasaya aktarmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-254">This way the Backup service uses IOPS for transferring data from the customer storage account to the vault.</span></span>
* <span data-ttu-id="fc1cf-255">Bir ilke farklı depolama hesaplarında yayılan VM'ler uygulanan emin olun.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-255">Make sure that a policy is applied on VMs spread across different storage accounts.</span></span> <span data-ttu-id="fc1cf-256">En fazla 20 önerdiğimiz tek bir depolama hesabına toplam disklerden aynı yedekleme zamanlaması tarafından korunmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-256">We suggest no more than 20 total disks from a single storage account be protected by the same backup schedule.</span></span> <span data-ttu-id="fc1cf-257">20 diskler daha büyük bir depolama hesabı varsa, bu sanal makineleri yedekleme işlemi aktarımı aşamasında gerekli IOPS almak için birden çok ilke arasında yayılır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-257">If you have greater than 20 disks in a storage account, spread those VMs across multiple policies to get the required IOPS during the transfer phase of the backup process.</span></span>
* <span data-ttu-id="fc1cf-258">Aynı depolama hesabı için Premium depolama üzerinde çalışan bir VM geri yüklemeyin.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-258">Do not restore a VM running on Premium storage to same storage account.</span></span> <span data-ttu-id="fc1cf-259">Geri yükleme işlemi işlemi yedekleme işlemi ile örtüşür, yedekleme için kullanılabilir IOPS azaltır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-259">If the restore operation process coincides with the backup operation, it reduces the available IOPS for backup.</span></span>
* <span data-ttu-id="fc1cf-260">Premium VM yedekleme için bu depolama hesabı konak premium disklerin başarılı bir yedekleme anlık görüntüsü hazırlama en az %50 boş alan olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-260">For Premium VM backup, ensure that storage account that hosts premium disks has atleast 50% free space for staging snapshot for a successful backup.</span></span> 
* <span data-ttu-id="fc1cf-261">Yedekleme 2.7 için emin olun, python sürümü Linux sanal makineleri üzerinde etkin</span><span class="sxs-lookup"><span data-stu-id="fc1cf-261">Make sure that python version on Linux VMs enabled for backup is 2.7</span></span>

## <a name="data-encryption"></a><span data-ttu-id="fc1cf-262">Veri şifrelemesi</span><span class="sxs-lookup"><span data-stu-id="fc1cf-262">Data encryption</span></span>
<span data-ttu-id="fc1cf-263">Azure yedekleme, Yedekleme işleminin bir parçası olarak verilerini şifrelemez.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-263">Azure Backup does not encrypt data as a part of the backup process.</span></span> <span data-ttu-id="fc1cf-264">Ancak, VM dahilinde verileri şifrelemek ve sorunsuz bir şekilde korumalı verileri yedekleme (daha fazla bilgi edinin [şifrelenmiş verilerin yedekleme](backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-264">However, you can encrypt data within the VM and back up the protected data seamlessly (read more about [backup of encrypted data](backup-azure-vms-encryption.md)).</span></span>

## <a name="calculating-the-cost-of-protected-instances"></a><span data-ttu-id="fc1cf-265">Korumalı örnekler maliyetini hesaplama</span><span class="sxs-lookup"><span data-stu-id="fc1cf-265">Calculating the cost of protected instances</span></span>
<span data-ttu-id="fc1cf-266">Azure Backup yedeklenir Azure sanal makineleri olan tabi [Azure yedekleme fiyatlandırması](https://azure.microsoft.com/pricing/details/backup/).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-266">Azure virtual machines that are backed up through Azure Backup are subject to [Azure Backup pricing](https://azure.microsoft.com/pricing/details/backup/).</span></span> <span data-ttu-id="fc1cf-267">Korumalı örnekler hesaplaması dayanır *gerçek* "kaynak disk" hariç olmak üzere sanal makinede--tüm verilerin toplamı olan sanal makine boyutu</span><span class="sxs-lookup"><span data-stu-id="fc1cf-267">The Protected Instances calculation is based on the *actual* size of the virtual machine, which is the sum of all the data in the virtual machine--excluding the “resource disk.”</span></span>

<span data-ttu-id="fc1cf-268">Vm'leri yedekleme için fiyatlandırma *değil* sanal makineye bağlı her veri diski için desteklenen en büyük boyutu göre.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-268">Pricing for backing up VMs is *not* based on the maximum supported size for each data disk attached to the virtual machine.</span></span> <span data-ttu-id="fc1cf-269">Fiyatlandırma veri diski saklanan gerçek verileri temel alır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-269">Pricing is based on the actual data stored in the data disk.</span></span> <span data-ttu-id="fc1cf-270">Benzer şekilde, Yedekleme depolaması faturanızda Azure Yedekleme'de her kurtarma noktası gerçek veri toplamını olduğu depolanan veri miktarını temel alır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-270">Similarly, the backup storage bill is based on the amount of data that is stored in Azure Backup, which is the sum of the actual data in each recovery point.</span></span>

<span data-ttu-id="fc1cf-271">Örneğin, bir boyutta A2 standart iki ek veri disklerinin her biri 1 TB maksimum boyuta sahip olan sanal makine alın.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-271">For example, take an A2 Standard-sized virtual machine that has two additional data disks with a maximum size of 1 TB each.</span></span> <span data-ttu-id="fc1cf-272">Aşağıdaki tabloda her bu diskleri saklanan gerçek verileri verir:</span><span class="sxs-lookup"><span data-stu-id="fc1cf-272">The following table gives the actual data stored on each of these disks:</span></span>

| <span data-ttu-id="fc1cf-273">Disk türü</span><span class="sxs-lookup"><span data-stu-id="fc1cf-273">Disk type</span></span> | <span data-ttu-id="fc1cf-274">En büyük boyutu</span><span class="sxs-lookup"><span data-stu-id="fc1cf-274">Max size</span></span> | <span data-ttu-id="fc1cf-275">Gerçek veri yok</span><span class="sxs-lookup"><span data-stu-id="fc1cf-275">Actual data present</span></span> |
| --- | --- | --- |
| <span data-ttu-id="fc1cf-276">İşletim sistemi diski</span><span class="sxs-lookup"><span data-stu-id="fc1cf-276">Operating system disk</span></span> |<span data-ttu-id="fc1cf-277">1023 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-277">1023 GB</span></span> |<span data-ttu-id="fc1cf-278">17 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-278">17 GB</span></span> |
| <span data-ttu-id="fc1cf-279">Yerel disk / kaynak disk</span><span class="sxs-lookup"><span data-stu-id="fc1cf-279">Local disk / Resource disk</span></span> |<span data-ttu-id="fc1cf-280">135 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-280">135 GB</span></span> |<span data-ttu-id="fc1cf-281">5 GB (yedekleme için yer almayan)</span><span class="sxs-lookup"><span data-stu-id="fc1cf-281">5 GB (not included for backup)</span></span> |
| <span data-ttu-id="fc1cf-282">Veri diski 1</span><span class="sxs-lookup"><span data-stu-id="fc1cf-282">Data disk 1</span></span> |<span data-ttu-id="fc1cf-283">1023 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-283">1023 GB</span></span> |<span data-ttu-id="fc1cf-284">30 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-284">30 GB</span></span> |
| <span data-ttu-id="fc1cf-285">Veri diski 2</span><span class="sxs-lookup"><span data-stu-id="fc1cf-285">Data disk 2</span></span> |<span data-ttu-id="fc1cf-286">1023 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-286">1023 GB</span></span> |<span data-ttu-id="fc1cf-287">0 GB</span><span class="sxs-lookup"><span data-stu-id="fc1cf-287">0 GB</span></span> |

<span data-ttu-id="fc1cf-288">*Gerçek* boyutunu sanal makine bu durumda olan 17 GB + 30 GB + 0 GB = 47 GB.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-288">The *actual* size of the virtual machine in this case is 17 GB + 30 GB + 0 GB = 47 GB.</span></span> <span data-ttu-id="fc1cf-289">Bu korumalı örnek boyutu (47 GB) aylık fatura temelini olur.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-289">This Protected Instance size (47 GB) becomes the basis for the monthly bill.</span></span> <span data-ttu-id="fc1cf-290">Sanal makine veri miktarı arttıkça, korumalı örnek boyutu için fatura değişiklikleri buna uygun olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-290">As the amount of data in the virtual machine grows, the Protected Instance size used for billing changes accordingly.</span></span>

<span data-ttu-id="fc1cf-291">Faturalama, ilk başarılı yedekleme tamamlanana kadar başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-291">Billing does not start until the first successful backup completes.</span></span> <span data-ttu-id="fc1cf-292">Bu noktada, hem depolama hem de korumalı örnekleri için fatura başlar.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-292">At this point, the billing for both Storage and Protected Instances begins.</span></span> <span data-ttu-id="fc1cf-293">Faturalandırma var olduğu sürece devam *herhangi bir kasasında depolanan verileri yedekleme* sanal makine için.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-293">Billing continues as long as there is *any backup data stored in a vault* for the virtual machine.</span></span> <span data-ttu-id="fc1cf-294">Sanal makinede korumayı durdurun, ancak sanal makine yedekleme verilerini bir kasada var olması gerekir, faturalandırma devam eder.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-294">If you stop protection on the virtual machine, but virtual machine backup data exists in a vault, billing continues.</span></span>

<span data-ttu-id="fc1cf-295">Belirtilen sanal makine yalnızca koruma durdurduysanız durdurur faturalama *ve* tüm yedekleme verileri silinir.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-295">Billing for a specified virtual machine stops only if the protection is stopped *and* all backup data is deleted.</span></span> <span data-ttu-id="fc1cf-296">Koruma durduğunda ve etkin yedek iş yok, son başarılı VM yedeğinin boyutu aylık fatura için kullanılan korumalı örnek boyutu olur.</span><span class="sxs-lookup"><span data-stu-id="fc1cf-296">When protection stops and there are no active backup jobs, the size of the last successful VM backup becomes the Protected Instance size used for the monthly bill.</span></span>

## <a name="questions"></a><span data-ttu-id="fc1cf-297">Sorularınız mı var?</span><span class="sxs-lookup"><span data-stu-id="fc1cf-297">Questions?</span></span>
<span data-ttu-id="fc1cf-298">Sorularınız varsa veya dahil edilmesini istediğiniz herhangi bir özellik varsa [bize geri bildirim gönderin](http://aka.ms/azurebackup_feedback).</span><span class="sxs-lookup"><span data-stu-id="fc1cf-298">If you have questions, or if there is any feature that you would like to see included, [send us feedback](http://aka.ms/azurebackup_feedback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="fc1cf-299">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="fc1cf-299">Next steps</span></span>
* [<span data-ttu-id="fc1cf-300">Sanal makineleri yedekleme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-300">Back up virtual machines</span></span>](backup-azure-vms.md)
* [<span data-ttu-id="fc1cf-301">Sanal makine yedeklemesi yönetme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-301">Manage virtual machine backup</span></span>](backup-azure-manage-vms.md)
* [<span data-ttu-id="fc1cf-302">Sanal makineleri geri yükleme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-302">Restore virtual machines</span></span>](backup-azure-restore-vms.md)
* [<span data-ttu-id="fc1cf-303">VM yedekleme sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="fc1cf-303">Troubleshoot VM backup issues</span></span>](backup-azure-vms-troubleshoot.md)
