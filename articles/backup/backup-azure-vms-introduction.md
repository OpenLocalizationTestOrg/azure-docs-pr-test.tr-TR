---
title: "aaaPlanning VM yedekleme altyapınızı Azure | Microsoft Docs"
description: "Azure'da sanal makineler yukarı tooback planlarken önemli noktalar"
services: backup
documentationcenter: 
author: markgalioto
manager: carmonm
editor: 
keywords: sanal makineleri yedekleme, sanal makineleri yedekleme
ms.assetid: 19d2cf82-1f60-43e1-b089-9238042887a9
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/18/2017
ms.author: markgal;trinadhk
ms.openlocfilehash: d11982431610000293038ee6aa7df8e7bc2d8b70
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="plan-your-vm-backup-infrastructure-in-azure"></a><span data-ttu-id="3ae7b-104">Azure’da sanal makine yedekleme altyapınızı planlama</span><span class="sxs-lookup"><span data-stu-id="3ae7b-104">Plan your VM backup infrastructure in Azure</span></span>
<span data-ttu-id="3ae7b-105">Bu makalede, performans ve kaynak önerileri toohelp VM yedekleme altyapınızı planlama sağlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-105">This article provides performance and resource suggestions toohelp you plan your VM backup infrastructure.</span></span> <span data-ttu-id="3ae7b-106">Ayrıca, önemli yönlerini hello Backup hizmeti tanımlar; Bu yönlerinin, mimarisi belirlemede önemli kapasite planlaması ve zamanlama.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-106">It also defines key aspects of hello Backup service; these aspects can be critical in determining your architecture, capacity planning, and scheduling.</span></span> <span data-ttu-id="3ae7b-107">Seçtiğiniz varsa [ortamınızı hazırlanmış](backup-azure-vms-prepare.md), planlama adımdır hello sonraki başlamadan önce [tooback Vm'leri yedekleme](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-107">If you've [prepared your environment](backup-azure-vms-prepare.md), planning is hello next step before you begin [tooback up VMs](backup-azure-vms.md).</span></span> <span data-ttu-id="3ae7b-108">Azure sanal makineler hakkında daha fazla bilgiye ihtiyacınız varsa, hello bkz [Virtual Machines belgeleri](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-108">If you need more information about Azure virtual machines, see hello [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="how-does-azure-back-up-virtual-machines"></a><span data-ttu-id="3ae7b-109">Azure nasıl mu sanal makineleri yedekleyin?</span><span class="sxs-lookup"><span data-stu-id="3ae7b-109">How does Azure back up virtual machines?</span></span>
<span data-ttu-id="3ae7b-110">Hello Azure Backup hizmeti yedekleme işi Zamanlanmış Başlangıç zamanında başlattığında hello yedekleme uzantısını tootake zaman içinde nokta anlık görüntü tetikler.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-110">When hello Azure Backup service initiates a backup job at hello scheduled time, it triggers hello backup extension tootake a point-in-time snapshot.</span></span> <span data-ttu-id="3ae7b-111">Hello Azure Backup hizmeti kullanan hello _VMSnapshot_ uzantısı'nda Windows ve hello _VMSnapshotLinux_ Linux uzantı.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-111">hello Azure Backup service uses hello _VMSnapshot_ extension in Windows, and hello _VMSnapshotLinux_ extension in Linux.</span></span> <span data-ttu-id="3ae7b-112">Merhaba uzantısı hello ilk VM yedekleme sırasında yüklenir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-112">hello extension is installed during hello first VM backup.</span></span> <span data-ttu-id="3ae7b-113">tooinstall hello uzantısı hello VM çalıştırması gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-113">tooinstall hello extension, hello VM must be running.</span></span> <span data-ttu-id="3ae7b-114">Merhaba VM çalışır durumda değilse, hello Backup hizmeti bir anlık görüntüsünü hello bu yana (hiçbir uygulama yazma VM durduruldu hello sırasında gerçekleşir) depolama temel alır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-114">If hello VM is not running, hello Backup service takes a snapshot of hello underlying storage (since no application writes occur while hello VM is stopped).</span></span>

<span data-ttu-id="3ae7b-115">Windows VM görüntüsünü alırken, hello Backup hizmeti ile Merhaba Birim Gölge Kopyası Hizmeti (VSS) tooget tutarlı bir anlık görüntü hello sanal makinenin disklerinin düzenler.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-115">When taking a snapshot of Windows VMs, hello Backup service coordinates with hello Volume Shadow Copy Service (VSS) tooget a consistent snapshot of hello virtual machine's disks.</span></span> <span data-ttu-id="3ae7b-116">Linux VM'ler yedekliyorsanız, bir VM anlık olduğunda kendi özel komut dosyaları tooensure tutarlılık yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-116">If you're backing up Linux VMs, you can write your own custom scripts tooensure consistency when taking a VM snapshot.</span></span> <span data-ttu-id="3ae7b-117">Bu komut dosyalarını Çağırma ile ilgili ayrıntılar bu makalenin sonraki bölümlerinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-117">Details on invoking these scripts are provided later in this article.</span></span>

<span data-ttu-id="3ae7b-118">Hello Azure Backup hizmeti hello anlık görüntüsünü alır sonra hello aktarılan toohello kasası verilerdir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-118">Once hello Azure Backup service takes hello snapshot, hello data is transferred toohello vault.</span></span> <span data-ttu-id="3ae7b-119">toomaximize verimliliği hello hizmeti tanımlar ve yalnızca hello hello önceki yedeklemeden bu yana değişmiş olan veri bloklarını aktarır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-119">toomaximize efficiency, hello service identifies and transfers only hello blocks of data that have changed since hello previous backup.</span></span>

![Azure sanal makine yedekleme mimarisi](./media/backup-azure-vms-introduction/vmbackup-architecture.png)

<span data-ttu-id="3ae7b-121">Merhaba veri aktarımı tamamlandığında hello anlık görüntü kaldırılır ve bir kurtarma noktası oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-121">When hello data transfer is complete, hello snapshot is removed and a recovery point is created.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="3ae7b-122">Merhaba yedekleme işlemi sırasında Azure yedekleme hello bağlı geçici disk toohello sanal makine içermez.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-122">During hello backup process, Azure Backup doesn't include hello temporary disk attached toohello virtual machine.</span></span> <span data-ttu-id="3ae7b-123">Daha fazla bilgi için hello blog bakın [geçici depolama](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-123">For more information, see hello blog on [temporary storage](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span></span>
> 2. <span data-ttu-id="3ae7b-124">Bir depolama düzeyi anlık görüntü ve toovault anlık görüntü aktarımları Azure yedeğini alır beri hello yedekleme işi tamamlanana kadar hello depolama hesabı anahtarlarını değiştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-124">Since Azure Backup takes a storage-level snapshot and transfers that snapshot toovault, do not change hello storage account keys until hello backup job finishes.</span></span>
> 3. <span data-ttu-id="3ae7b-125">Premium VM'ler için başlangıç anlık görüntü toostorage hesabı kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-125">For premium VMs, we copy hello snapshot toostorage account.</span></span> <span data-ttu-id="3ae7b-126">Azure Backup hizmeti veri toovault aktarmak için yeterli IOPS aldığından emin toomake budur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-126">This is toomake sure that Azure Backup service gets sufficient IOPS for transferring data toovault.</span></span> <span data-ttu-id="3ae7b-127">Bu ek kopyasını depolama VM boyutu ayrılmış hello göre ücretlendirilir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-127">This additional copy of storage is charged as per hello VM allocated size.</span></span> 
>

### <a name="data-consistency"></a><span data-ttu-id="3ae7b-128">Veri tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-128">Data consistency</span></span>
<span data-ttu-id="3ae7b-129">İş açısından kritik verileri veri çalıştıran hello üretmek hello uygulamaları sırasında yedeklenmesi hello olgu tarafından yedekleme ve geri yükleme iş açısından kritik verileri karmaşık.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-129">Backing up and restoring business critical data is complicated by hello fact that business critical data must be backed up while hello applications that produce hello data are running.</span></span> <span data-ttu-id="3ae7b-130">tooaddress Bu, Azure Backup destekler uygulamayla tutarlı yedeklemeler hem Windows hem de Linux VM'ler</span><span class="sxs-lookup"><span data-stu-id="3ae7b-130">tooaddress this, Azure Backup supports application-consistent backups for both Windows and Linux VMs</span></span>
#### <a name="windows-vm"></a><span data-ttu-id="3ae7b-131">Windows VM</span><span class="sxs-lookup"><span data-stu-id="3ae7b-131">Windows VM</span></span>
<span data-ttu-id="3ae7b-132">Azure yedekleme Windows Vm'lerinde VSS tam yedeklemeler gerçekleştirir (daha fazla bilgi edinin [VSS tam yedekleme](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-132">Azure Backup takes VSS full backups on Windows VMs (read more about [VSS full backup](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span></span> <span data-ttu-id="3ae7b-133">tooenable VSS yedeklemeleri, kayıt defteri anahtarı gereksinimlerini toobe ayarlanmış hello VM üzerinde aşağıdaki hello kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-133">tooenable VSS copy backups, hello following registry key needs toobe set on hello VM.</span></span>

```
[HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
"USEVSSCOPYBACKUP"="TRUE"
```

#### <a name="linux-vms"></a><span data-ttu-id="3ae7b-134">Linux VM'leri</span><span class="sxs-lookup"><span data-stu-id="3ae7b-134">Linux VMs</span></span>
<span data-ttu-id="3ae7b-135">Azure Backup komut dosyası bir çerçeve sağlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-135">Azure Backup provides a scripting framework.</span></span> <span data-ttu-id="3ae7b-136">Linux VM'ler yedeklerken tooensure uygulama tutarlılığı özel öncesi ve yedekleme iş akışı hello ve ortam denetimi sonrası komut dosyaları oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-136">tooensure application consistency when backing up Linux VMs, create custom pre-scripts and post-scripts that control hello backup workflow and environment.</span></span> <span data-ttu-id="3ae7b-137">Azure yedekleme hello VM anlık görüntü çıkarmadan önce hello öncesi betiği çağırır ve hello VM anlık görüntü işi tamamlandıktan sonra hello sonrası komut dosyasını çağırır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-137">Azure Backup invokes hello pre-script before taking hello VM snapshot and invokes hello post-script once hello VM snapshot job completes.</span></span> <span data-ttu-id="3ae7b-138">Daha fazla ayrıntı için bkz: [öncesi betiği ve sonrası betik kullanarak uygulama tutarlı VM yedeklemeleri](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-138">For more details, see [application consistent VM backups using pre-script and post-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span>
> [!NOTE]
> <span data-ttu-id="3ae7b-139">Azure yedekleme yalnızca müşteri tarafından yazılan hello çağırır öncesi ve sonrası komut dosyaları.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-139">Azure Backup only invokes hello customer-written pre- and post-scripts.</span></span> <span data-ttu-id="3ae7b-140">Merhaba öncesi betiği ve sonrası betikleri başarıyla çalıştırırsanız, Azure Backup hello kurtarma noktası uygulama tutarlı işaretler.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-140">If hello pre-script and post-scripts execute successfully, Azure Backup marks hello recovery point as application consistent.</span></span> <span data-ttu-id="3ae7b-141">Ancak, hello müşteri özel komut dosyaları kullanırken hello uygulama tutarlılığı için sonuçta sorumludur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-141">However, hello customer is ultimately responsible for hello application consistency when using custom scripts.</span></span>
>


<span data-ttu-id="3ae7b-142">Bu tabloda koşulları altında Azure VM yedeklemesi sırasında ortaya ve geri yükleme yordamlarını tutarlılık ve hello hello türleri açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-142">This table explains hello types of consistency and hello conditions that they occur under during Azure VM backup and restore procedures.</span></span>

| <span data-ttu-id="3ae7b-143">Tutarlılık</span><span class="sxs-lookup"><span data-stu-id="3ae7b-143">Consistency</span></span> | <span data-ttu-id="3ae7b-144">VSS tabanlı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-144">VSS-based</span></span> | <span data-ttu-id="3ae7b-145">Açıklama ve ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="3ae7b-145">Explanation and details</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3ae7b-146">Uygulama tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-146">Application consistency</span></span> |<span data-ttu-id="3ae7b-147">Windows için Evet</span><span class="sxs-lookup"><span data-stu-id="3ae7b-147">Yes for Windows</span></span>|<span data-ttu-id="3ae7b-148">Uygulama tutarlılığı, sağlar gibi iş yükleri için idealdir:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-148">Application consistency is ideal for workloads as it ensures that:</span></span><ol><li> <span data-ttu-id="3ae7b-149">Merhaba VM *ön*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-149">hello VM *boots up*.</span></span> <li><span data-ttu-id="3ae7b-150">Yoktur *bozulma*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-150">There is *no corruption*.</span></span> <li><span data-ttu-id="3ae7b-151">Yoktur *veri kaybı*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-151">There is *no data loss*.</span></span><li> <span data-ttu-id="3ae7b-152">Merhaba, VSS veya ön/son betik kullanarak yedekleme--hello zaman Merhaba uygulaması içeren tarafından hello veri kullanan tutarlı toohello uygulamayı verilerdir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-152">hello data is consistent toohello application that uses hello data, by involving hello application at hello time of backup--using VSS or pre/post script.</span></span></ol> <li><span data-ttu-id="3ae7b-153">*Windows sanal makineleri*-en Microsoft iş yükleri, iş yüküne özgü eylemler ilgili toodata tutarlılık denetimi yapmak VSS yazıcılarının vardır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-153">*Windows VMs*- Most Microsoft workloads have VSS writers that do workload-specific actions related toodata consistency.</span></span> <span data-ttu-id="3ae7b-154">Örneğin, Microsoft SQL Server hello yazma toohello işlem günlüğü dosyasını ve hello veritabanı doğru şekilde yapıldığını sağlar bir VSS yazıcısı olduğu.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-154">For example, Microsoft SQL Server has a VSS writer that ensures that hello writes toohello transaction log file and hello database are done correctly.</span></span> <span data-ttu-id="3ae7b-155">Azure Windows VM yedeklemeler, toocreate bir uygulamayla tutarlı kurtarma noktası hello yedekleme uzantısını hello VSS iş akışının çağırmak ve hello VM anlık görüntü gerçekleştirilmesi için tamamlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-155">For Azure Windows VM backups, toocreate an application-consistent recovery point, hello backup extension must invoke hello VSS workflow and complete it before taking hello VM snapshot.</span></span> <span data-ttu-id="3ae7b-156">Hello Azure VM anlık görüntü toobe için doğru tüm Azure VM uygulamaların hello VSS yazıcılarının da tamamlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-156">For hello Azure VM snapshot toobe accurate, hello VSS writers of all Azure VM applications must complete as well.</span></span> <span data-ttu-id="3ae7b-157">(Merhaba öğrenin [VSS Temelleri](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) ve derin hello ayrıntılarını daha yakından inceleyin [nasıl çalıştığını](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-157">(Learn hello [basics of VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) and dive deep into hello details of [how it works](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span></span> </li> <li> <span data-ttu-id="3ae7b-158">*Linux VM'ler*-müşteriler yürütebilir [özel öncesi betiğini ve sonrası betik tooensure uygulama tutarlılığı](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-158">*Linux VMs*- Customers can execute [custom pre-script and post-script tooensure application consistency](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span> </li> |
| <span data-ttu-id="3ae7b-159">Dosya sistemi tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-159">File-system consistency</span></span> |<span data-ttu-id="3ae7b-160">Evet - Windows tabanlı bilgisayarlar için</span><span class="sxs-lookup"><span data-stu-id="3ae7b-160">Yes - for Windows-based computers</span></span> |<span data-ttu-id="3ae7b-161">Merhaba kurtarma noktası olabilir burada iki senaryo vardır *dosya sistemi tutarlı*:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-161">There are two scenarios where hello recovery point can be *file-system consistent*:</span></span><ul><li><span data-ttu-id="3ae7b-162">Linux VM'ler için Azure'da, yedeklerini öncesi-script/sonrası-script veya öncesi-script/sonrası-script başarısız olduysa olmadan.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-162">Backups of Linux VMs in Azure, without pre-script/post-script or if pre-script/post-script failed.</span></span> <li><span data-ttu-id="3ae7b-163">VSS azure'da Windows VM için yedekleme sırasında hata oluştu.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-163">VSS failure during backup for Windows VMs in Azure.</span></span></li></ul> <span data-ttu-id="3ae7b-164">Her iki bu durumda yapılabilir en iyi hello tooensure olup:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-164">In both these cases, hello best that can be done is tooensure that:</span></span> <ol><li> <span data-ttu-id="3ae7b-165">Merhaba VM *ön*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-165">hello VM *boots up*.</span></span> <li><span data-ttu-id="3ae7b-166">Yoktur *bozulma*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-166">There is *no corruption*.</span></span><li><span data-ttu-id="3ae7b-167">Yoktur *veri kaybı*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-167">There is *no data loss*.</span></span></ol> <span data-ttu-id="3ae7b-168">Uygulamaları geri hello verileri tooimplement kendi "Düzeltme yukarı" mekanizmasına ihtiyaç duyarlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-168">Applications need tooimplement their own "fix-up" mechanism on hello restored data.</span></span> |
| <span data-ttu-id="3ae7b-169">Kilitlenme tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-169">Crash consistency</span></span> |<span data-ttu-id="3ae7b-170">Hayır</span><span class="sxs-lookup"><span data-stu-id="3ae7b-170">No</span></span> |<span data-ttu-id="3ae7b-171">Bu eşdeğer tooa sanal makine "kilitlenme" yaşayan (ya da bir yazılım veya donanım sıfırlama) durumdur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-171">This situation is equivalent tooa virtual machine experiencing a "crash" (through either a soft or hard reset).</span></span> <span data-ttu-id="3ae7b-172">Kilitlenme tutarlılığı normal yedekleme hello aynı anda Hello Azure sanal makine kapatılır ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-172">Crash consistency typically happens when hello Azure virtual machine is shut down at hello time of backup.</span></span> <span data-ttu-id="3ae7b-173">Kilitlenme tutarlı bir kurtarma noktası garanti hello hello veri tutarlılığını geçici hello depolama ortamına--hello işletim sistemi veya hello uygulamanın hello açısından ya da sağlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-173">A crash-consistent recovery point provides no guarantees around hello consistency of hello data on hello storage medium--either from hello perspective of hello operating system or hello application.</span></span> <span data-ttu-id="3ae7b-174">Yedekleme hello aynı anda hello diskte zaten var. yalnızca hello veriler yakalanan ve yedeklendi.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-174">Only hello data that already exists on hello disk at hello time of backup is captured and backed up.</span></span> <br/> <br/> <span data-ttu-id="3ae7b-175">Varken hiçbir garanti genellikle, işletim sistemi önyüklemesinde, disk kontrol ederek ve ardından hello yordamı, chkdsk, toofix gibi Bozulması hataları.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-175">While there are no guarantees, usually, hello operating system boots, followed by disk-checking procedure, like chkdsk, toofix any corruption errors.</span></span> <span data-ttu-id="3ae7b-176">Herhangi bir bellek içi veri veya aktarılan toohello disk edilmemiş yazma kaybolur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-176">Any in-memory data or writes that have not been transferred toohello disk are lost.</span></span> <span data-ttu-id="3ae7b-177">verileri geri alma tamamlandı toobe gerekebileceği Merhaba uygulaması genellikle kendi doğrulama mekanizmasını ile izler.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-177">hello application typically follows with its own verification mechanism in case data rollback needs toobe done.</span></span> <br><br><span data-ttu-id="3ae7b-178">Merhaba işlem günlüğü hello veritabanında mevcut olmayan girişleri varsa hello verileri tutarlı olana kadar örnek olarak, hello veritabanı yazılımını bir geri alma sonra yapar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-178">As an example, if hello transaction log has entries that are not present in hello database, then hello database software does a rollback until hello data is consistent.</span></span> <span data-ttu-id="3ae7b-179">(Gibi Dağıtılmış birimler) birden çok sanal disklere veri dağıldığında kilitlenme tutarlı bir kurtarma noktası hello veri hello doğruluğu garanti sağlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-179">When data is spread across multiple virtual disks (like spanned volumes), a crash-consistent recovery point provides no guarantees for hello correctness of hello data.</span></span> |

## <a name="performance-and-resource-utilization"></a><span data-ttu-id="3ae7b-180">Performans ve kaynak kullanımı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-180">Performance and resource utilization</span></span>
<span data-ttu-id="3ae7b-181">Dağıtılan şirket içi yedekleme yazılımı gibi kapasite ve kaynak kullanımı için gereksinimleri azure'da VM yedeklerken planlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-181">Like backup software that is deployed on-premises, you should plan for capacity and resource utilization needs when backing up VMs in Azure.</span></span> <span data-ttu-id="3ae7b-182">Merhaba [Azure depolama sınırlarını](../azure-subscription-service-limits.md#storage-limits) nasıl toostructure VM dağıtımları tooget en az başarımı toorunning iş yükleri tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-182">hello [Azure Storage limits](../azure-subscription-service-limits.md#storage-limits) define how toostructure VM deployments tooget maximum performance with minimum impact toorunning workloads.</span></span>

<span data-ttu-id="3ae7b-183">Yedekleme performansını planlarken aşağıdaki Azure depolama sınırlarını dikkat toohello ödeme:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-183">Pay attention toohello following Azure Storage limits when planning backup performance:</span></span>

* <span data-ttu-id="3ae7b-184">Depolama hesabı başına en fazla çıkış</span><span class="sxs-lookup"><span data-stu-id="3ae7b-184">Max egress per storage account</span></span>
* <span data-ttu-id="3ae7b-185">Depolama hesabı başına toplam istek oranı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-185">Total request rate per storage account</span></span>

### <a name="storage-account-limits"></a><span data-ttu-id="3ae7b-186">Depolama hesabı sınırları</span><span class="sxs-lookup"><span data-stu-id="3ae7b-186">Storage account limits</span></span>
<span data-ttu-id="3ae7b-187">Yedekleme verilerini bir depolama hesabından kopyalanır, toohello girdi/çıktı işlemleri / saniye (IOPS) ve çıkış (veya üretilen iş) ölçümleri hello depolama hesabının ekler.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-187">Backup data copied from a storage account, adds toohello input/output operations per second (IOPS) and egress (or throughput) metrics of hello storage account.</span></span> <span data-ttu-id="3ae7b-188">AT hello aynı zaman, sanal makineler de IOPS ve üretilen iş kullanma.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-188">At hello same time, virtual machines are also consuming IOPS and throughput.</span></span> <span data-ttu-id="3ae7b-189">Merhaba hedef tooensure yedekleme ve sanal makine trafiği depolama hesabı sınırları aşan yok.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-189">hello goal is tooensure Backup and virtual machine traffic don't exceed your storage account limits.</span></span>

### <a name="number-of-disks"></a><span data-ttu-id="3ae7b-190">Disk sayısı</span><span class="sxs-lookup"><span data-stu-id="3ae7b-190">Number of disks</span></span>
<span data-ttu-id="3ae7b-191">Merhaba yedekleme işlemi toocomplete bir yedekleme işi mümkün olan en kısa sürede çalışır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-191">hello backup process tries toocomplete a backup job as quickly as possible.</span></span> <span data-ttu-id="3ae7b-192">Bunu yaparken, mümkün olduğunca fazla kaynak tüketir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-192">In doing so, it consumes as many resources as it can.</span></span> <span data-ttu-id="3ae7b-193">Ancak, tüm g/ç işlemleri tarafından hello sınırlı *tek Blob için hedef işleme*, saniye başına 60 MB sınırı vardır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-193">However, all I/O operations are limited by hello *Target Throughput for Single Blob*, which has a limit of 60 MB per second.</span></span> <span data-ttu-id="3ae7b-194">Bir deneme toomaximize kendi hızı hello yedekleme işlemi çalışır her hello VM'in disklerini yukarı tooback *paralel*.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-194">In an attempt toomaximize its speed, hello backup process tries tooback up each of hello VM's disks *in parallel*.</span></span> <span data-ttu-id="3ae7b-195">VM dört diskler varsa, tüm dört diskleri paralel yukarı tooback hello hizmeti çalışır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-195">If a VM has four disks, hello service attempts tooback up all four disks in parallel.</span></span> <span data-ttu-id="3ae7b-196">Merhaba **diskleri sayısı** , yedeklenen olan depolama hesabı yedekleme trafiği belirlemede en önemli faktör hello.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-196">hello **number of disks** being backed up, is hello most important factor in determining storage account backup traffic.</span></span>

### <a name="backup-schedule"></a><span data-ttu-id="3ae7b-197">Yedekleme zamanlaması</span><span class="sxs-lookup"><span data-stu-id="3ae7b-197">Backup schedule</span></span>
<span data-ttu-id="3ae7b-198">Merhaba performansını etkiler ek bir faktörü olan **yedekleme zamanlaması**.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-198">An additional factor that impacts performance is hello **backup schedule**.</span></span> <span data-ttu-id="3ae7b-199">Tüm sanal makineleri hello aynı yedeklenir şekilde hello ilkeleri yapılandırın, zaman, trafiği sıkışması zamanlanmış.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-199">If you configure hello policies so all VMs are backed up at hello same time, you have scheduled a traffic jam.</span></span> <span data-ttu-id="3ae7b-200">Merhaba yedekleme işlemi paralel tüm diskleri yukarı tooback çalışır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-200">hello backup process attempts tooback up all disks in parallel.</span></span> <span data-ttu-id="3ae7b-201">hiç örtüşmeyen hello günün farklı zamanında farklı Vm'leri yedekleme depolama hesabından tooreduce hello yedekleme trafiği.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-201">tooreduce hello backup traffic from a storage account, back up different VMs at different time of hello day, with no overlap.</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="3ae7b-202">Kapasite planlaması</span><span class="sxs-lookup"><span data-stu-id="3ae7b-202">Capacity planning</span></span>
<span data-ttu-id="3ae7b-203">Merhaba önceki Etkenler bir araya getirilmesi, tooplan hello depolama hesabı kullanımı ihtiyaçları için gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-203">Putting hello previous factors together, you need tooplan for hello storage account usage needs.</span></span> <span data-ttu-id="3ae7b-204">Merhaba karşıdan [VM yedekleme kapasite planlama Excel elektronik tablosu](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello etkisini disk ve yedekleme zamanlaması seçimi.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-204">Download hello [VM backup capacity planning Excel spreadsheet](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello impact of your disk and backup schedule choices.</span></span>

### <a name="backup-throughput"></a><span data-ttu-id="3ae7b-205">Yedekleme işleme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-205">Backup throughput</span></span>
<span data-ttu-id="3ae7b-206">Yedeklenmekte olan her disk için Azure yedekleme hello blokları hello diskteki okur ve depoları yalnızca değiştirilen verileri (artımlı yedeklemeyi) hello.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-206">For each disk being backed up, Azure Backup reads hello blocks on hello disk and stores only hello changed data (incremental backup).</span></span> <span data-ttu-id="3ae7b-207">Merhaba aşağıdaki tabloda hello ortalama Yedekleme hizmetini işleme değerleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-207">hello following table shows hello average Backup service throughput values.</span></span> <span data-ttu-id="3ae7b-208">Veri aşağıdaki hello kullanarak, belirtilen boyutta bir disk yukarı tooback hello süreyi gerekli tahmin edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-208">Using hello following data, you can estimate hello amount of time needed tooback up a disk of a given size.</span></span>

| <span data-ttu-id="3ae7b-209">Yedekleme işlemi</span><span class="sxs-lookup"><span data-stu-id="3ae7b-209">Backup operation</span></span> | <span data-ttu-id="3ae7b-210">İyi verimlilik</span><span class="sxs-lookup"><span data-stu-id="3ae7b-210">Best-case throughput</span></span> |
| --- | --- |
| <span data-ttu-id="3ae7b-211">İlk yedekleme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-211">Initial backup</span></span> |<span data-ttu-id="3ae7b-212">160 MB/sn</span><span class="sxs-lookup"><span data-stu-id="3ae7b-212">160 Mbps</span></span> |
| <span data-ttu-id="3ae7b-213">Artımlı yedekleme (DR)</span><span class="sxs-lookup"><span data-stu-id="3ae7b-213">Incremental backup (DR)</span></span> |<span data-ttu-id="3ae7b-214">640 MB/sn</span><span class="sxs-lookup"><span data-stu-id="3ae7b-214">640 Mbps</span></span> <br><br> <span data-ttu-id="3ae7b-215">Verimliliği düşmeye önemli ölçüde hello (yedeklenen toobe gereken) veri değiştirdiyseniz dağınık hello diski.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-215">Throughput drops significantly if hello changed data (that needs toobe backed up) is dispersed across hello disk.</span></span>|

## <a name="total-vm-backup-time"></a><span data-ttu-id="3ae7b-216">Toplam VM yedekleme saati</span><span class="sxs-lookup"><span data-stu-id="3ae7b-216">Total VM backup time</span></span>
<span data-ttu-id="3ae7b-217">Çoğu hello yedekleme saati harcanır sırasında okuma ve veri kopyalama, diğer işlemlerin toohello gereken toplam süreyi tooback VM yukarı katkıda:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-217">While most of hello backup time is spent reading and copying data, other operations contribute toohello total time needed tooback up a VM:</span></span>

* <span data-ttu-id="3ae7b-218">Gereken süre çok[yükleyin veya güncelleştirin hello yedekleme uzantısını](backup-azure-vms.md).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-218">Time needed too[install or update hello backup extension](backup-azure-vms.md).</span></span>
* <span data-ttu-id="3ae7b-219">Hello geçen süre tootrigger anlık olduğu anlık görüntü saati.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-219">Snapshot time, which is hello time taken tootrigger a snapshot.</span></span> <span data-ttu-id="3ae7b-220">Anlık görüntüler tetiklenen Kapat toohello zamanlanmış yedekleme saati değildir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-220">Snapshots are triggered close toohello scheduled backup time.</span></span>
* <span data-ttu-id="3ae7b-221">Sıra bekleme süresi.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-221">Queue wait time.</span></span> <span data-ttu-id="3ae7b-222">Birden çok müşteri yedeklemelerden işleme Hello yedekleme hizmeti olduğundan, anlık görüntü toohello yedekleme veya kurtarma Hizmetleri yedekleme verileri kopyalayarak kasası hemen başlatılamayabilir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-222">Since hello Backup service is processing backups from multiple customers, copying backup data from snapshot toohello backup or Recovery Services vault might not start immediately.</span></span> <span data-ttu-id="3ae7b-223">Yoğun yük kez işlenmekte olan yedekleme toohello sayısı nedeniyle tooeight saatlerini hello bekleme uzatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-223">In times of peak load, hello wait can stretch up tooeight hours due toohello number of backups being processed.</span></span> <span data-ttu-id="3ae7b-224">Ancak, hello toplam VM yedekleme süresini günlük yedekleme ilkeleri için 24 saatten az olur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-224">However, hello total VM backup time is less than 24 hours for daily backup policies.</span></span>
* <span data-ttu-id="3ae7b-225">Veri aktarımı saati, yedekleme için gereken hizmet önceki yedekten toocompute hello artımlı değişiklikler ve bu değişiklikleri toovault depolama aktarma.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-225">Data transfer time, time needed for backup service toocompute hello incremental changes from previous backup and transfer those changes toovault storage.</span></span>

### <a name="why-am-i-observing-longer12-hours-backup-time"></a><span data-ttu-id="3ae7b-226">Neden ı Gözlemleme longer(>12 hours) yedekleme zamanı?</span><span class="sxs-lookup"><span data-stu-id="3ae7b-226">Why am I observing longer(>12 hours) backup time?</span></span>
<span data-ttu-id="3ae7b-227">Yedekleme iki aşamadan oluşur: anlık görüntüler alma ve aktarma hello anlık görüntüleri toohello kasası.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-227">Backup consists of two phases: taking snapshots and transferring hello snapshots toohello vault.</span></span> <span data-ttu-id="3ae7b-228">Merhaba yedekleme hizmeti için depolama en iyi duruma getirir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-228">hello Backup service optimizes for storage.</span></span> <span data-ttu-id="3ae7b-229">Başlangıç anlık görüntü veri tooa kasası aktarırken hello hizmeti hello önceki anlık görüntüden yalnızca artımlı değişiklikler aktarır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-229">When transferring hello snapshot data tooa vault, hello service only transfers incremental changes from hello previous snapshot.</span></span>  <span data-ttu-id="3ae7b-230">toodetermine hello artımlı değişiklikler, hello hizmet başlangıç bloklarından hello sağlama toplamı hesaplar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-230">toodetermine hello incremental changes, hello service computes hello checksum of hello blocks.</span></span> <span data-ttu-id="3ae7b-231">Bir blok değiştirdiyseniz hello blok toohello kasası gönderilen bir blok toobe tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-231">If a block is changed, hello block is identified as a block toobe sent toohello vault.</span></span> <span data-ttu-id="3ae7b-232">Ardından hello hizmet ayrıntısına daha fazla her hello fırsatları toominimize hello veri tootransfer için arayan blokları, tanımlanmış.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-232">Then hello service drills further into each of hello identified blocks, looking for opportunities toominimize hello data tootransfer.</span></span> <span data-ttu-id="3ae7b-233">Tüm değişen blokları değerlendirdikten sonra hello hizmet hello değişiklikleri birleştirir ve bunları toohello kasası gönderir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-233">After evaluating all changed blocks, hello service coalesces hello changes and sends them toohello vault.</span></span> <span data-ttu-id="3ae7b-234">Bazı eski uygulamalarda küçük, parçalanmış yazma depolama için uygun değildir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-234">In some legacy applications, small, fragmented writes are not optimal for storage.</span></span> <span data-ttu-id="3ae7b-235">Başlangıç anlık görüntü çok sayıda küçük, parçalanmış yazma içeriyorsa, hello hizmet hello uygulamalar tarafından yazılan hello veri işlemek için ek zaman harcadığı.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-235">If hello snapshot contains many small, fragmented writes, hello service spends additional time processing hello data written by hello applications.</span></span> <span data-ttu-id="3ae7b-236">Merhaba hello VM içinde çalışan uygulamalar için uygulama yazma blok Azure'dan, önerilen bir en az 8 KB..</span><span class="sxs-lookup"><span data-stu-id="3ae7b-236">hello recommended application write block from Azure, for applications running inside hello VM, is a minimum of 8 KB.</span></span> <span data-ttu-id="3ae7b-237">Uygulamanızı değerinden 8 KB'lik bir blok kullanıyorsa, yedekleme performansının parametreden etkilenir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-237">If your application uses a block of less than 8 KB, backup performance is effected.</span></span> <span data-ttu-id="3ae7b-238">Uygulama tooimprove yedekleme performans ayarlama konusunda daha fazla yardım için bkz: [uygulamalarını Azure storage ile en iyi performans için ayarlama](../storage/common/storage-premium-storage-performance.md).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-238">For help with tuning your application tooimprove backup performance, see [Tuning applications for optimal performance with Azure storage](../storage/common/storage-premium-storage-performance.md).</span></span> <span data-ttu-id="3ae7b-239">Premium depolama örnekler Hello makale yedekleme performansı kullanılsa da hello Kılavuzu standart depolama diskleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-239">Though hello article on backup performance uses Premium storage examples, hello guidance is applicable for Standard storage disks.</span></span>

## <a name="total-restore-time"></a><span data-ttu-id="3ae7b-240">Toplam geri yükleme süresi</span><span class="sxs-lookup"><span data-stu-id="3ae7b-240">Total restore time</span></span>
<span data-ttu-id="3ae7b-241">Bir geri yükleme işlemi iki ana alt görevden oluşur: geri hello kasası seçilen toohello müşteri depolama hesabından veri kopyalama ve hello sanal makine oluşturma.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-241">A restore operation consists of two main sub tasks: Copying data back from hello vault toohello chosen customer storage account, and creating hello virtual machine.</span></span> <span data-ttu-id="3ae7b-242">Geri hello kasadan veri kopyalama, Azure'da hello yedeklemeleri dahili olarak depolandığı ve hello müşteri depolama hesabı depolandığı bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-242">Copying data back from hello vault depends on where hello backups are stored internally in Azure, and where hello customer storage account is stored.</span></span> <span data-ttu-id="3ae7b-243">Toocopy veri geçen süre bağlıdır:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-243">Time taken toocopy data depends upon:</span></span>
* <span data-ttu-id="3ae7b-244">Merhaba, birden çok müşterilerden gelen geri yükleme hello hizmet işlemleri işlerini beri sıra bekleme süresi - aynı anda geri yükleme isteklerdir bir kuyruğa koymak.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-244">Queue wait time - Since hello service processes restore jobs from multiple customers at hello same time, restore requests are put in a queue.</span></span>
* <span data-ttu-id="3ae7b-245">Veri kopyalama zamanı - veri hello kasa toohello müşteri depolama hesabından kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-245">Data copy time - Data is copied from hello vault toohello customer storage account.</span></span> <span data-ttu-id="3ae7b-246">Geri yükleme süre üzerinde IOPS bağlıdır ve verimlilik Azure Backup hizmeti seçili hello müşteri depolama hesabında alır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-246">Restore time depends on IOPS and throughput Azure Backup service gets on hello selected customer storage account.</span></span> <span data-ttu-id="3ae7b-247">tooreduce saati hello geri yükleme işlemi sırasında kopyalama Merhaba, diğer uygulama yazma ve okuma yüklenmemiş bir depolama hesabı seçin.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-247">tooreduce hello copying time during hello restore process, select a storage account not loaded with other application writes and reads.</span></span>

## <a name="best-practices"></a><span data-ttu-id="3ae7b-248">En iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="3ae7b-248">Best practices</span></span>
<span data-ttu-id="3ae7b-249">Sanal makineleri için yedeklemeleri yapılandırılırken bu yöntemler aşağıdaki öneririz:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-249">We suggest following these practices while configuring backups for virtual machines:</span></span>

* <span data-ttu-id="3ae7b-250">Hello aynı bulut hizmeti tooback hello fazla 10 Klasik Vm'lerden zamanlama yok aynı anda.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-250">Don't schedule more than 10 classic VMs from hello same cloud service tooback up at hello same time.</span></span> <span data-ttu-id="3ae7b-251">Tooback aynı bulut hizmetinden birden çok sanal makineleri yedeklemek istiyorsanız, bir saate göre hello yedekleme Başlangıç saatlerini basamaklandırma.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-251">If you want tooback up multiple VMs from same cloud service, stagger hello backup start times by an hour.</span></span>
* <span data-ttu-id="3ae7b-252">Birden fazla 40 VM'ler tooback yukarı hello zamanlamayın aynı anda.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-252">Do not schedule more than 40 VMs tooback up at hello same time.</span></span>
* <span data-ttu-id="3ae7b-253">VM, yoğun olmayan saatlerde yedeklemelerin.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-253">Schedule VM backups during non-peak hours.</span></span> <span data-ttu-id="3ae7b-254">Bu şekilde hello Backup hizmeti IOPS hello müşteri depolama hesabı toohello kasadan veri aktarmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-254">This way hello Backup service uses IOPS for transferring data from hello customer storage account toohello vault.</span></span>
* <span data-ttu-id="3ae7b-255">Bir ilke farklı depolama hesaplarında yayılan VM'ler uygulanan emin olun.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-255">Make sure that a policy is applied on VMs spread across different storage accounts.</span></span> <span data-ttu-id="3ae7b-256">En fazla 20 önerdiğimiz tek bir depolama hesabına toplam disklerden hello tarafından korunan aynı yedekleme zamanlaması.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-256">We suggest no more than 20 total disks from a single storage account be protected by hello same backup schedule.</span></span> <span data-ttu-id="3ae7b-257">Büyüktür 20 diskleri depolama hesabındaki yayılan varsa bu VM'lerin birden çok ilkeleri tooget arasında hello aktarımı aşaması hello yedekleme işlemi sırasında gerekli IOPS hello.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-257">If you have greater than 20 disks in a storage account, spread those VMs across multiple policies tooget hello required IOPS during hello transfer phase of hello backup process.</span></span>
* <span data-ttu-id="3ae7b-258">Premium depolama toosame depolama hesabı üzerinde çalışan bir VM geri yüklemeyin.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-258">Do not restore a VM running on Premium storage toosame storage account.</span></span> <span data-ttu-id="3ae7b-259">Merhaba geri yükleme işlemi işlemi hello yedekleme işlemi ile örtüşür, hello azaltır yedekleme için kullanılabilir IOPS.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-259">If hello restore operation process coincides with hello backup operation, it reduces hello available IOPS for backup.</span></span>
* <span data-ttu-id="3ae7b-260">Premium VM yedekleme için bu depolama hesabı konak premium disklerin başarılı bir yedekleme anlık görüntüsü hazırlama en az %50 boş alan olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-260">For Premium VM backup, ensure that storage account that hosts premium disks has atleast 50% free space for staging snapshot for a successful backup.</span></span> 
* <span data-ttu-id="3ae7b-261">Yedekleme 2.7 için emin olun, python sürümü Linux sanal makineleri üzerinde etkin</span><span class="sxs-lookup"><span data-stu-id="3ae7b-261">Make sure that python version on Linux VMs enabled for backup is 2.7</span></span>

## <a name="data-encryption"></a><span data-ttu-id="3ae7b-262">Veri şifrelemesi</span><span class="sxs-lookup"><span data-stu-id="3ae7b-262">Data encryption</span></span>
<span data-ttu-id="3ae7b-263">Azure yedekleme verileri hello Yedekleme işleminin bir parçası olarak şifrelemez.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-263">Azure Backup does not encrypt data as a part of hello backup process.</span></span> <span data-ttu-id="3ae7b-264">Ancak, hello VM içinde verileri şifreleyebilir ve geri hello korumalı verilere sorunsuz bir şekilde (daha fazla bilgi edinin [şifrelenmiş verilerin yedekleme](backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-264">However, you can encrypt data within hello VM and back up hello protected data seamlessly (read more about [backup of encrypted data](backup-azure-vms-encryption.md)).</span></span>

## <a name="calculating-hello-cost-of-protected-instances"></a><span data-ttu-id="3ae7b-265">Korumalı örnekler Hello maliyetini hesaplama</span><span class="sxs-lookup"><span data-stu-id="3ae7b-265">Calculating hello cost of protected instances</span></span>
<span data-ttu-id="3ae7b-266">Azure Backup yedeklenir Azure sanal makineleri konu çok[Azure yedekleme fiyatlandırması](https://azure.microsoft.com/pricing/details/backup/).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-266">Azure virtual machines that are backed up through Azure Backup are subject too[Azure Backup pricing](https://azure.microsoft.com/pricing/details/backup/).</span></span> <span data-ttu-id="3ae7b-267">Merhaba korumalı örnekleri hesaplama hello üzerinde temel *gerçek* hello sanal makine--hello "kaynak disk" hariç tüm hello verileri hello toplamıdır hello sanal makine boyutu</span><span class="sxs-lookup"><span data-stu-id="3ae7b-267">hello Protected Instances calculation is based on hello *actual* size of hello virtual machine, which is hello sum of all hello data in hello virtual machine--excluding hello “resource disk.”</span></span>

<span data-ttu-id="3ae7b-268">Vm'leri yedekleme için fiyatlandırma *değil* her veri diski ekli toohello sanal makine için desteklenen en fazla hello boyutu göre.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-268">Pricing for backing up VMs is *not* based on hello maximum supported size for each data disk attached toohello virtual machine.</span></span> <span data-ttu-id="3ae7b-269">Fiyatlandırma hello veri diski depolanan hello gerçek verileri temel alır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-269">Pricing is based on hello actual data stored in hello data disk.</span></span> <span data-ttu-id="3ae7b-270">Benzer şekilde, hello Yedekleme depolaması faturanızda hello Azure Yedekleme'de her kurtarma noktası gerçek veri hello hello toplamını olduğu depolanan veri miktarına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-270">Similarly, hello backup storage bill is based on hello amount of data that is stored in Azure Backup, which is hello sum of hello actual data in each recovery point.</span></span>

<span data-ttu-id="3ae7b-271">Örneğin, bir boyutta A2 standart iki ek veri disklerinin her biri 1 TB maksimum boyuta sahip olan sanal makine alın.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-271">For example, take an A2 Standard-sized virtual machine that has two additional data disks with a maximum size of 1 TB each.</span></span> <span data-ttu-id="3ae7b-272">Merhaba aşağıdaki tabloda her bu disklere depolanan Merhaba gerçek veriler sağlar:</span><span class="sxs-lookup"><span data-stu-id="3ae7b-272">hello following table gives hello actual data stored on each of these disks:</span></span>

| <span data-ttu-id="3ae7b-273">Disk türü</span><span class="sxs-lookup"><span data-stu-id="3ae7b-273">Disk type</span></span> | <span data-ttu-id="3ae7b-274">En büyük boyutu</span><span class="sxs-lookup"><span data-stu-id="3ae7b-274">Max size</span></span> | <span data-ttu-id="3ae7b-275">Gerçek veri yok</span><span class="sxs-lookup"><span data-stu-id="3ae7b-275">Actual data present</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3ae7b-276">İşletim sistemi diski</span><span class="sxs-lookup"><span data-stu-id="3ae7b-276">Operating system disk</span></span> |<span data-ttu-id="3ae7b-277">1023 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-277">1023 GB</span></span> |<span data-ttu-id="3ae7b-278">17 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-278">17 GB</span></span> |
| <span data-ttu-id="3ae7b-279">Yerel disk / kaynak disk</span><span class="sxs-lookup"><span data-stu-id="3ae7b-279">Local disk / Resource disk</span></span> |<span data-ttu-id="3ae7b-280">135 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-280">135 GB</span></span> |<span data-ttu-id="3ae7b-281">5 GB (yedekleme için yer almayan)</span><span class="sxs-lookup"><span data-stu-id="3ae7b-281">5 GB (not included for backup)</span></span> |
| <span data-ttu-id="3ae7b-282">Veri diski 1</span><span class="sxs-lookup"><span data-stu-id="3ae7b-282">Data disk 1</span></span> |<span data-ttu-id="3ae7b-283">1023 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-283">1023 GB</span></span> |<span data-ttu-id="3ae7b-284">30 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-284">30 GB</span></span> |
| <span data-ttu-id="3ae7b-285">Veri diski 2</span><span class="sxs-lookup"><span data-stu-id="3ae7b-285">Data disk 2</span></span> |<span data-ttu-id="3ae7b-286">1023 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-286">1023 GB</span></span> |<span data-ttu-id="3ae7b-287">0 GB</span><span class="sxs-lookup"><span data-stu-id="3ae7b-287">0 GB</span></span> |

<span data-ttu-id="3ae7b-288">Merhaba *gerçek* hello sanal makinesinin boyutu bu durumda olan 17 GB + 30 GB + 0 GB = 47 GB.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-288">hello *actual* size of hello virtual machine in this case is 17 GB + 30 GB + 0 GB = 47 GB.</span></span> <span data-ttu-id="3ae7b-289">Bu korumalı örnek boyutu (47 GB) hello aylık fatura hello temelini olur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-289">This Protected Instance size (47 GB) becomes hello basis for hello monthly bill.</span></span> <span data-ttu-id="3ae7b-290">Hello hello sanal makine veri miktarı artar, fatura değişiklikler için uygun şekilde kullanılan hello korumalı örnek boyutu.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-290">As hello amount of data in hello virtual machine grows, hello Protected Instance size used for billing changes accordingly.</span></span>

<span data-ttu-id="3ae7b-291">Faturalama Hello ilk başarılı yedekleme tamamlanana kadar başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-291">Billing does not start until hello first successful backup completes.</span></span> <span data-ttu-id="3ae7b-292">Bu noktada, hem depolama hem de korumalı örnekleri hello faturalama başlar.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-292">At this point, hello billing for both Storage and Protected Instances begins.</span></span> <span data-ttu-id="3ae7b-293">Faturalandırma var olduğu sürece devam *herhangi bir kasasında depolanan verileri yedekleme* hello sanal makine için.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-293">Billing continues as long as there is *any backup data stored in a vault* for hello virtual machine.</span></span> <span data-ttu-id="3ae7b-294">Merhaba sanal makinede korumayı durdurun, ancak sanal makine yedekleme verilerini bir kasada var olması gerekir, faturalandırma devam eder.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-294">If you stop protection on hello virtual machine, but virtual machine backup data exists in a vault, billing continues.</span></span>

<span data-ttu-id="3ae7b-295">Belirtilen sanal makine yalnızca hello koruma durdurduysanız durdurur faturalama *ve* tüm yedekleme verileri silinir.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-295">Billing for a specified virtual machine stops only if hello protection is stopped *and* all backup data is deleted.</span></span> <span data-ttu-id="3ae7b-296">Koruma durduğunda ve etkin yedek iş yok, hello son başarılı VM yedeğinin boyutu hello hello aylık fatura için kullanılan hello korumalı örnek boyutu olur.</span><span class="sxs-lookup"><span data-stu-id="3ae7b-296">When protection stops and there are no active backup jobs, hello size of hello last successful VM backup becomes hello Protected Instance size used for hello monthly bill.</span></span>

## <a name="questions"></a><span data-ttu-id="3ae7b-297">Sorularınız mı var?</span><span class="sxs-lookup"><span data-stu-id="3ae7b-297">Questions?</span></span>
<span data-ttu-id="3ae7b-298">Sorularınız varsa veya herhangi bir özellik varsa dahil, toosee istediğiniz [Geri bildirimlerinizi bize gönderin](http://aka.ms/azurebackup_feedback).</span><span class="sxs-lookup"><span data-stu-id="3ae7b-298">If you have questions, or if there is any feature that you would like toosee included, [send us feedback](http://aka.ms/azurebackup_feedback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="3ae7b-299">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="3ae7b-299">Next steps</span></span>
* [<span data-ttu-id="3ae7b-300">Sanal makineleri yedekleme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-300">Back up virtual machines</span></span>](backup-azure-vms.md)
* [<span data-ttu-id="3ae7b-301">Sanal makine yedeklemesi yönetme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-301">Manage virtual machine backup</span></span>](backup-azure-manage-vms.md)
* [<span data-ttu-id="3ae7b-302">Sanal makineleri geri yükleme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-302">Restore virtual machines</span></span>](backup-azure-restore-vms.md)
* [<span data-ttu-id="3ae7b-303">VM yedekleme sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="3ae7b-303">Troubleshoot VM backup issues</span></span>](backup-azure-vms-troubleshoot.md)
