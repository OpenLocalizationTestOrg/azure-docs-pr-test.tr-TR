---
title: "Dosya ve klasörleri Azure Yedekleme'de yavaş yedeğini sorunlarını giderme | Microsoft Docs"
description: "Azure Backup performans sorunlarının nedeni tanılamanıza yardımcı olması için sorun giderme yönergeleri sunar"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 1688846957df3fbf0df747a6cd2a94b481d851b4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="0a7d8-103">Azure Backup’ta dosya ve klasörlerin yavaş yedekleme sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="0a7d8-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="0a7d8-104">Bu makalede, Azure Backup kullanırken dosyalar ve klasörler için yedekleme performansın nedenini tanılamaya yardımcı olmak için sorun giderme kılavuzu verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-104">This article provides troubleshooting guidance to help you diagnose the cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="0a7d8-105">Dosyaları yedeklemek için Azure Yedekleme aracısı kullandığınızda, yedekleme işlemi beklenenden daha uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-105">When you use the Azure Backup agent to back up files, the backup process might take longer than expected.</span></span> <span data-ttu-id="0a7d8-106">Bu gecikme bir veya daha fazlasını tarafından nedeni olabilir:</span><span class="sxs-lookup"><span data-stu-id="0a7d8-106">This delay might be caused by one or more of the following:</span></span>

* [<span data-ttu-id="0a7d8-107">Yedeklenmekte olan bilgisayarda performans sorunları vardır.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-107">There are performance bottlenecks on the computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="0a7d8-108">Başka bir işlem veya virüsten koruma yazılımı ile Azure yedekleme işlemi engelliyor.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-108">Another process or antivirus software is interfering with the Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="0a7d8-109">Yedekleme aracısını bir Azure sanal makine (VM) üzerinde çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-109">The Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="0a7d8-110">Çok sayıda dosya (milyonlarca) yedekleme yapıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="0a7d8-111">İndirme ve yükleme sorunlarını giderme başlamadan önce öneririz [en son Azure Backup aracısını](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="0a7d8-111">Before you start troubleshooting issues, we recommend that you download and install the [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="0a7d8-112">Çeşitli sorunları giderin, özellikleri ekleyin ve performansı artırmak için Backup Aracısı sık güncelleştirmeler vermiyoruz.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-112">We make frequent updates to the Backup agent to fix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="0a7d8-113">Ayrıca gözden geçirmenizi öneririz [Azure Backup hizmeti ile ilgili SSS](backup-azure-backup-faq.md) , değil yaşıyorsunuz ortak yapılandırma sorunlardan biri emin olmak için.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-113">We also strongly recommend that you review the [Azure Backup service FAQ](backup-azure-backup-faq.md) to make sure you're not experiencing any of the common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-the-computer"></a><span data-ttu-id="0a7d8-114">Neden: Bilgisayardaki performans sorunları</span><span class="sxs-lookup"><span data-stu-id="0a7d8-114">Cause: Performance bottlenecks on the computer</span></span>
<span data-ttu-id="0a7d8-115">Yedeklenmekte olan bilgisayarda performans sorunlarını gecikmelere neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-115">Bottlenecks on the computer that's being backed up can cause delays.</span></span> <span data-ttu-id="0a7d8-116">Örneğin, bilgisayarın özelliği okuma veya yazma disk veya ağ üzerinden veri göndermek için kullanılabilir bant genişliği performans sorunlarını neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-116">For example, the computer's ability to read or write to disk, or available bandwidth to send data over the network, can cause bottlenecks.</span></span>

<span data-ttu-id="0a7d8-117">Windows adlı yerleşik bir araç sağlar [Performans İzleyicisi](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) bu performans sorunlarını algılamak için (Perfmon).</span><span class="sxs-lookup"><span data-stu-id="0a7d8-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) to detect these bottlenecks.</span></span>

<span data-ttu-id="0a7d8-118">Bazı performans sayaçları ve en iyi yedeklemeler için performans sorunlarını tanılamada yararlı olabilir aralıkları aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="0a7d8-119">Sayaç</span><span class="sxs-lookup"><span data-stu-id="0a7d8-119">Counter</span></span> | <span data-ttu-id="0a7d8-120">Durum</span><span class="sxs-lookup"><span data-stu-id="0a7d8-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="0a7d8-121">Mantıksal Disk (Fiziksel Disk)--% boşta</span><span class="sxs-lookup"><span data-stu-id="0a7d8-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="0a7d8-122">• %100 %50 boşta boşta Sağlıklı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-122">• 100% idle to 50% idle = Healthy</span></span></br><span data-ttu-id="0a7d8-123">• %49 %20 boşta boşta uyarı veya İzleyici =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-123">• 49% idle to 20% idle = Warning or Monitor</span></span></br><span data-ttu-id="0a7d8-124">• % 19 boşta %0 boşta kritik veya dışı Spec =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-124">• 19% idle to 0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0a7d8-125">Mantıksal Disk (Fiziksel Disk)--% Ort.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-125">Logical Disk(Physical Disk)--%Avg.</span></span> <span data-ttu-id="0a7d8-126">Disk sn okuma veya yazma</span><span class="sxs-lookup"><span data-stu-id="0a7d8-126">Disk Sec Read or Write</span></span> |<span data-ttu-id="0a7d8-127">• 0,001 ms 0.015 ms için sağlıklı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-127">• 0.001 ms to 0.015 ms  = Healthy</span></span></br><span data-ttu-id="0a7d8-128">• 0.015 ms 0.025 ms için uyarı veya İzleyici =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-128">• 0.015 ms to 0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="0a7d8-129">• 0.026 ms veya kritik veya dışı Spec artık =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-129">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0a7d8-130">Mantıksal Disk (Fiziksel Disk)--geçerli Disk Sırası Uzunluğu (tüm örnekler)</span><span class="sxs-lookup"><span data-stu-id="0a7d8-130">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="0a7d8-131">6 dakikadan fazla için 80 istek</span><span class="sxs-lookup"><span data-stu-id="0a7d8-131">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="0a7d8-132">Bellek--olmayan havuzda bayt</span><span class="sxs-lookup"><span data-stu-id="0a7d8-132">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="0a7d8-133">• Tüketilen havuzu % 60'den Sağlıklı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-133">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="0a7d8-134">• %61 80 tüketilen havuzunun uyarı veya İzleyici =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-134">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="0a7d8-135">• Tüketilen % 80 havuzu büyük kritik veya dışı Spec =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-135">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0a7d8-136">Bellek--disk belleği havuzu bayt sayısı</span><span class="sxs-lookup"><span data-stu-id="0a7d8-136">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="0a7d8-137">• Tüketilen havuzu % 60'den Sağlıklı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-137">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="0a7d8-138">• %61 80 tüketilen havuzunun uyarı veya İzleyici =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-138">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="0a7d8-139">• Tüketilen % 80 havuzu büyük kritik veya dışı Spec =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-139">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0a7d8-140">Bellek--kullanılabilir megabayt</span><span class="sxs-lookup"><span data-stu-id="0a7d8-140">Memory--Available Megabytes</span></span> |<span data-ttu-id="0a7d8-141">• kullanılabilir boş bellek % 50 veya daha iyi =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-141">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="0a7d8-142">• 25 kullanılabilir boş bellek yüzdesi İzleyici =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-142">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="0a7d8-143">• 10 kullanılabilir boş bellek yüzdesi uyarı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-143">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="0a7d8-144">• 100 MB veya kullanılabilir boş bellek % 5'den daha az önemli veya dışı Spec =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-144">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0a7d8-145">İşlemci--\%işlemci zamanı (tüm örnekler)</span><span class="sxs-lookup"><span data-stu-id="0a7d8-145">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="0a7d8-146">• % 60'den tüketilen Sağlıklı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-146">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="0a7d8-147">• 61 tüketilen % 90 İzleyici veya uyarı =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-147">• 61% to 90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="0a7d8-148">• 91 tüketilen % 100 kritik =</span><span class="sxs-lookup"><span data-stu-id="0a7d8-148">• 91% to 100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="0a7d8-149">Altyapı sorunlu olduğunu belirlerseniz, daha iyi performans için düzenli aralıklarla disk birleştirme öneririz.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-149">If you determine that the infrastructure is the culprit, we recommend that you defragment the disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="0a7d8-150">Neden: Başka işlem veya Azure yedekleme ile engellemesini virüsten koruma yazılımı</span><span class="sxs-lookup"><span data-stu-id="0a7d8-150">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="0a7d8-151">Diğer işlemlerin Windows sisteminde Azure Yedekleme aracısı işlemi performansını olumsuz yönde burada etkilenen çeşitli örneklerine gördük.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-151">We've seen several instances where other processes in the Windows system have negatively affected performance of the Azure Backup agent process.</span></span> <span data-ttu-id="0a7d8-152">Örneğin, verileri yedeklemek için Azure Backup aracısı ve başka bir program kullanıyorsanız veya virüsten koruma yazılımı çalıştıran ve yedeklenecek dosyaları üzerinde bir kilit varsa, birden çok üzerinde kilitler dosyaları Çekişme neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-152">For example, if you use both the Azure Backup agent and another program to back up data, or if antivirus software is running and has a lock on files to be backed up, the multiple locks on files might cause contention.</span></span> <span data-ttu-id="0a7d8-153">Bu durumda, yedekleme başarısız olabilir veya iş beklenenden daha uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-153">In this situation, the backup might fail, or the job might take longer than expected.</span></span>

<span data-ttu-id="0a7d8-154">En iyi Bu senaryoda Azure Yedekleme aracısı yedekleme zamanını değişiklikler olup olmadığını görmek için diğer yedekleme programınızı kapatmak için önerilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-154">The best recommendation in this scenario is to turn off the other backup program to see whether the backup time for the Azure Backup agent changes.</span></span> <span data-ttu-id="0a7d8-155">Genellikle, birden çok yedekleme işleri aynı anda çalışmayan emin birbirine etkilemesini önlemek yeterli olur.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-155">Usually, making sure that multiple backup jobs are not running at the same time is sufficient to prevent them from affecting each other.</span></span>

<span data-ttu-id="0a7d8-156">Virüsten koruma programları için konumları ve aşağıdaki dosyaları dışla öneririz:</span><span class="sxs-lookup"><span data-stu-id="0a7d8-156">For antivirus programs, we recommend that you exclude the following files and locations:</span></span>

* <span data-ttu-id="0a7d8-157">C:\Program Files\Microsoft Azure kurtarma Hizmetleri Agent\bin\cbengine.exe bir işlem olarak</span><span class="sxs-lookup"><span data-stu-id="0a7d8-157">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="0a7d8-158">C:\Program Files\Microsoft Azure kurtarma Hizmetleri Agent\ klasörleri</span><span class="sxs-lookup"><span data-stu-id="0a7d8-158">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="0a7d8-159">(Standart konumu değil kullanıyorsanız) konumu boş</span><span class="sxs-lookup"><span data-stu-id="0a7d8-159">Scratch location (if you're not using the standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="0a7d8-160">Neden: bir Azure sanal makine üzerinde çalışan yedekleme aracısı</span><span class="sxs-lookup"><span data-stu-id="0a7d8-160">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="0a7d8-161">Backup Aracısı VM üzerinde çalıştırıyorsanız, performans, bir fiziksel makine çalıştırdığınızda yavaş olacaktır.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-161">If you're running the Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="0a7d8-162">Bu IOPS sınırlamaları nedeniyle beklenen bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-162">This is expected due to IOPS limitations.</span></span>  <span data-ttu-id="0a7d8-163">Ancak, Azure Premium Storage yedeklenmekte veri sürücüleri geçerek performansını iyileştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-163">However, you can optimize the performance by switching the data drives that are being backed up to Azure Premium Storage.</span></span> <span data-ttu-id="0a7d8-164">Bu sorunu düzeltmeye çalışıyoruz ve düzeltme gelecekteki bir sürümde kullanılabilir olacaktır.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-164">We're working on fixing this issue, and the fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="0a7d8-165">Neden: Yedekleme dosyaları çok sayıda (milyonlarca)</span><span class="sxs-lookup"><span data-stu-id="0a7d8-165">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="0a7d8-166">Büyük miktarda veri taşıma daha küçük bir veri hacmi taşımaktan daha uzun sürer.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-166">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="0a7d8-167">Bazı durumlarda, yalnızca boyutunu verileri, aynı zamanda dosyaları veya klasörleri sayısı için yedekleme saati ilişkilidir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-167">In some cases, backup time is related to not only the size of the data, but also the number of files or folders.</span></span> <span data-ttu-id="0a7d8-168">Bu, özellikle küçük dosyalar (birkaç kilobayt için birkaç bayt) milyonlarca yedekleniyor olduğunda geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-168">This is especially true when millions of small files (a few bytes to a few kilobytes) are being backed up.</span></span>

<span data-ttu-id="0a7d8-169">Veri yedekleme ve Azure'a taşıma olsa da, Azure dosyalarınızı aynı anda katalog için bu davranış oluşur.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-169">This behavior occurs because while you're backing up the data and moving it to Azure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="0a7d8-170">Bazı nadir senaryolarda katalog işlemi beklenenden daha uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-170">In some rare scenarios, the catalog operation might take longer than expected.</span></span>

<span data-ttu-id="0a7d8-171">Aşağıdaki göstergeleri performans sorunu anlamanıza ve buna göre sonraki adımları iş yardımcı olabilir:</span><span class="sxs-lookup"><span data-stu-id="0a7d8-171">The following indicators can help you understand the bottleneck and accordingly work on the next steps:</span></span>

* <span data-ttu-id="0a7d8-172">**UI veri aktarımı için ilerleme durumunu gösteren**.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-172">**UI is showing progress for the data transfer**.</span></span> <span data-ttu-id="0a7d8-173">Veri hala aktarıldığı.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-173">The data is still being transferred.</span></span> <span data-ttu-id="0a7d8-174">Ağ bant genişliğini veya verilerin boyutunu gecikmelere neden.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-174">The network bandwidth or the size of data might be causing delays.</span></span>
* <span data-ttu-id="0a7d8-175">**UI ilerleme veri aktarımı için gösteren değil**.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-175">**UI is not showing progress for the data transfer**.</span></span> <span data-ttu-id="0a7d8-176">C:\Microsoft Azure kurtarma Hizmetleri Agent\Temp bulunan günlükleri'ni açın ve günlükleri FileProvider::EndData girişi için denetleyin.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-176">Open the logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for the FileProvider::EndData entry in the logs.</span></span> <span data-ttu-id="0a7d8-177">Bu giriş, veri aktarımı tamamlandı ve Katalog işlemi gerçekleştiriliyor belirtir.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-177">This entry signifies that the data transfer finished and the catalog operation is happening.</span></span> <span data-ttu-id="0a7d8-178">Yedekleme işleri iptal etme.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-178">Don't cancel the backup jobs.</span></span> <span data-ttu-id="0a7d8-179">Bunun yerine, katalog işlemini tamamlamak biraz daha uzun süre bekleyin.</span><span class="sxs-lookup"><span data-stu-id="0a7d8-179">Instead, wait a little longer for the catalog operation to finish.</span></span> <span data-ttu-id="0a7d8-180">Sorun devam ederse, iletişim [Azure Destek](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="0a7d8-180">If the problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
