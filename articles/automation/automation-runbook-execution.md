---
title: "Azure Otomasyonu Runbook yürütme | Microsoft Docs"
description: "Azure automation'da bir runbook nasıl işleneceğini ayrıntılarını açıklar."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="e78ca-103">Azure Otomasyonu Runbook yürütme</span><span class="sxs-lookup"><span data-stu-id="e78ca-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="e78ca-104">Azure Automation'da bir runbook başlattığınızda bir iş oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="e78ca-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="e78ca-105">Bir iş bir runbook tek yürütme örneğidir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="e78ca-106">Bir Azure Otomasyonu çalışan her bir iş çalıştırmak için atanır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="e78ca-107">Çalışan birden çok Azure paylaştığı olsa da, farklı Automation hesapları işlerden birbirinden yalıtılır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="e78ca-108">Değil sahip denetim işinizi isteği hangi çalışan hizmetleri.</span><span class="sxs-lookup"><span data-stu-id="e78ca-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="e78ca-109">Tek bir runbook'ta aynı anda çalışan birden çok iş bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="e78ca-110">Azure portalında listesini görüntülediğinizde, her runbook için başlatılan tüm işlerin durumunu listeler.</span><span class="sxs-lookup"><span data-stu-id="e78ca-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="e78ca-111">Her durumunu izlemek için her runbook için iş listesini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e78ca-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="e78ca-112">Farklı iş durumları açıklaması için bkz: [iş durumları](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="e78ca-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="e78ca-113">Aşağıdaki diyagramda bir runbook işi için yaşam döngüsü gösterilmektedir [grafik runbook'lar](automation-runbook-types.md#graphical-runbooks) ve [PowerShell iş akışı runbook'ları](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="e78ca-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![İş durumları - PowerShell iş akışı](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="e78ca-115">Aşağıdaki diyagramda bir runbook işi için yaşam döngüsü gösterilmektedir [PowerShell runbook'ları](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="e78ca-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![İş durumları - PowerShell Betiği](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="e78ca-117">İşleriniz Azure kaynaklarınızı Azure aboneliğinize bağlantı yaparak erişimi.</span><span class="sxs-lookup"><span data-stu-id="e78ca-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="e78ca-118">Bu kaynakları genel buluttan erişilebilir olması durumunda yalnızca kaynakları veri merkezinizde erişimi.</span><span class="sxs-lookup"><span data-stu-id="e78ca-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="e78ca-119">İş durumları</span><span class="sxs-lookup"><span data-stu-id="e78ca-119">Job statuses</span></span>
<span data-ttu-id="e78ca-120">Aşağıdaki tabloda, bir iş için olası farklı durumlarını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="e78ca-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="e78ca-121">Durum</span><span class="sxs-lookup"><span data-stu-id="e78ca-121">Status</span></span> | <span data-ttu-id="e78ca-122">Açıklama</span><span class="sxs-lookup"><span data-stu-id="e78ca-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="e78ca-123">tamamlandı</span><span class="sxs-lookup"><span data-stu-id="e78ca-123">Completed</span></span> |<span data-ttu-id="e78ca-124">İş başarıyla tamamlandı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-124">The job completed successfully.</span></span> |
| <span data-ttu-id="e78ca-125">Başarısız oldu</span><span class="sxs-lookup"><span data-stu-id="e78ca-125">Failed</span></span> |<span data-ttu-id="e78ca-126">İçin [grafik ve PowerShell iş akışı runbook'ları](automation-runbook-types.md), runbook derlenemedi.</span><span class="sxs-lookup"><span data-stu-id="e78ca-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="e78ca-127">İçin [PowerShell Betiği runbook'ları](automation-runbook-types.md), runbook başlatılamadı veya iş bir özel durumla karşılaştı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="e78ca-128">Başarısız oldu, kaynaklar bekleniyor</span><span class="sxs-lookup"><span data-stu-id="e78ca-128">Failed, waiting for resources</span></span> |<span data-ttu-id="e78ca-129">İşi başarısız oldu, ulaştığından [Orta paylaşımı](#fairshare) sınırlamak üç kez ve her zaman aynı denetim noktasından veya runbook'un başından başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="e78ca-130">Sıraya alınmış</span><span class="sxs-lookup"><span data-stu-id="e78ca-130">Queued</span></span> |<span data-ttu-id="e78ca-131">İş başlatılabilir başlatılabilmek için Otomasyon çalışanındaki kaynakları bekliyor.</span><span class="sxs-lookup"><span data-stu-id="e78ca-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="e78ca-132">Başlangıç</span><span class="sxs-lookup"><span data-stu-id="e78ca-132">Starting</span></span> |<span data-ttu-id="e78ca-133">İş bir çalışana atandı ve bunu başlatma işleminde sistemidir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="e78ca-134">Devam ettirme</span><span class="sxs-lookup"><span data-stu-id="e78ca-134">Resuming</span></span> |<span data-ttu-id="e78ca-135">Askıya alındıktan sonra işi sürdürme işleminde sistemidir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="e78ca-136">Çalışıyor</span><span class="sxs-lookup"><span data-stu-id="e78ca-136">Running</span></span> |<span data-ttu-id="e78ca-137">İşi çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="e78ca-137">The job is running.</span></span> |
| <span data-ttu-id="e78ca-138">Çalıştıran, kaynaklar bekleniyor</span><span class="sxs-lookup"><span data-stu-id="e78ca-138">Running, waiting for resources</span></span> |<span data-ttu-id="e78ca-139">Bunu ulaştığından iş kaldırıldı [Orta paylaşımı](#fairshare) sınırı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="e78ca-140">Kısa bir süre sonra son denetim noktasından sürdürür.</span><span class="sxs-lookup"><span data-stu-id="e78ca-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="e78ca-141">Durduruldu</span><span class="sxs-lookup"><span data-stu-id="e78ca-141">Stopped</span></span> |<span data-ttu-id="e78ca-142">İş tamamlanmadan kullanıcı tarafından durduruldu.</span><span class="sxs-lookup"><span data-stu-id="e78ca-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="e78ca-143">Durduruluyor</span><span class="sxs-lookup"><span data-stu-id="e78ca-143">Stopping</span></span> |<span data-ttu-id="e78ca-144">İşi durdurma işleminde sistemidir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="e78ca-145">askıya alındı</span><span class="sxs-lookup"><span data-stu-id="e78ca-145">Suspended</span></span> |<span data-ttu-id="e78ca-146">İş, kullanıcı, sistem veya runbook'taki bir komut tarafından askıya alındı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="e78ca-147">Askıya alınmış bir iş yeniden başlatılabilir ve kontrol noktası yoksa en son denetim noktasından veya runbook'un başından devam.</span><span class="sxs-lookup"><span data-stu-id="e78ca-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="e78ca-148">Özel durum oluştuğunda runbook yalnızca sistem tarafından askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="e78ca-149">Varsayılan olarak, ErrorActionPreference ayarlamak **devam**, yani bir hatayla işi tutar.</span><span class="sxs-lookup"><span data-stu-id="e78ca-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="e78ca-150">Bu tercih değişkeni ayarlanmışsa **durdurmak**, sonra da bir hata işini askıya alır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="e78ca-151">Uygulandığı öğe [grafik ve PowerShell iş akışı runbook'ları](automation-runbook-types.md) yalnızca.</span><span class="sxs-lookup"><span data-stu-id="e78ca-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="e78ca-152">Askıya alma</span><span class="sxs-lookup"><span data-stu-id="e78ca-152">Suspending</span></span> |<span data-ttu-id="e78ca-153">Sistem, kullanıcının isteği üzerine işi askıya almaya çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="e78ca-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="e78ca-154">Runbook, askıya alınmadan önce sonraki denetim noktasına erişmelidir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="e78ca-155">Askıya alınmadan önce tamamlandıktan sonra zaten en son denetim aktarılırsa.</span><span class="sxs-lookup"><span data-stu-id="e78ca-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="e78ca-156">Uygulandığı öğe [grafik ve PowerShell iş akışı runbook'ları](automation-runbook-types.md) yalnızca.</span><span class="sxs-lookup"><span data-stu-id="e78ca-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="e78ca-157">Azure portalından işi durumunu görüntüleme</span><span class="sxs-lookup"><span data-stu-id="e78ca-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="e78ca-158">Tüm runbook işleri özetlenen durumunu görüntüleyin ya da belirli bir runbook işi Azure portalında veya runbook iş durumu ve iş iletmek için Microsoft Operations Management Suite (OMS) günlük analizi çalışma alanınız ile tümleştirme yapılandırarak ayrıntılarını incelemek Akışlar.</span><span class="sxs-lookup"><span data-stu-id="e78ca-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="e78ca-159">OMS günlük analizi ile tümleştirme hakkında daha fazla bilgi için bkz: [Otomasyon iş durumu ve iş akışları günlük analizi (OMS) iletmek](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="e78ca-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="e78ca-160">Otomasyon runbook işleri özeti</span><span class="sxs-lookup"><span data-stu-id="e78ca-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="e78ca-161">Seçili Otomasyon hesabınızı sağ tarafta, tüm seçili Otomasyon hesabında runbook işlerini özetini görebilirsiniz **Proje istatistikleri** döşeme.</span><span class="sxs-lookup"><span data-stu-id="e78ca-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="e78ca-162">![Proje istatistikleri döşeme](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="e78ca-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="e78ca-163">Bu kutucuğun count ve iş durumu yürütülen tüm işler için grafik gösterimi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e78ca-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="e78ca-164">Kutucuğa tıklandığında sunar **işleri** yürütülen tüm işler, durum, iş yürütme ve başlangıç ve tamamlanma sürelerini özetlenen bir listesini içeren dikey penceresi.</span><span class="sxs-lookup"><span data-stu-id="e78ca-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="e78ca-165">![Otomasyon hesabı işler dikey](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="e78ca-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="e78ca-166">Seçerek işlerin listesini filtreleyebilirsiniz **filtre işleri** ve filtre iş durumu, belirli bir runbook'u veya aşağı açılan listeden, içinde arama yapmak için tarih aralığı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="e78ca-167">![Filtre iş durumu](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="e78ca-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="e78ca-168">Alternatif olarak, belirli bir runbook için iş Özet ayrıntıları bu runbook'tan seçerek görüntüleyebileceğiniz **Runbook'lar** dikey penceresinde, Automation hesabı ve ardından **işleri** döşeme.</span><span class="sxs-lookup"><span data-stu-id="e78ca-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="e78ca-169">Bu **işleri** dikey penceresinde ve buradan ayrıntılarını ve çıktısını görüntülemek için iş kaydı tıklatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e78ca-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="e78ca-170">![Otomasyon hesabı işler dikey](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="e78ca-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="e78ca-171">İş Özeti</span><span class="sxs-lookup"><span data-stu-id="e78ca-171">Job Summary</span></span>
<span data-ttu-id="e78ca-172">Belirli bir runbook ve en son durumlarını için oluşturulan işleri tümünün listesini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e78ca-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="e78ca-173">Bu listeyi işe ve işe son değişikliğin tarih aralığına göre filtreleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e78ca-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="e78ca-174">Ayrıntılı bilgi ve çıktısını görüntülemek için bir işin adına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e78ca-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="e78ca-175">İşin ayrıntılı görünümü bu iş için sağlanan runbook parametrelerinin değerlerini içerir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="e78ca-176">Bir runbook işlerini görüntülemek için aşağıdaki adımları kullanın.</span><span class="sxs-lookup"><span data-stu-id="e78ca-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="e78ca-177">Azure portalında seçin **Otomasyon** ve ardından bir Otomasyon hesabının adını seçin.</span><span class="sxs-lookup"><span data-stu-id="e78ca-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="e78ca-178">Hub'ından seçin **Runbook'lar** ve daha sonra **Runbook'lar** dikey penceresinde, listeden bir runbook seçin.</span><span class="sxs-lookup"><span data-stu-id="e78ca-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="e78ca-179">Seçilen runbook için dikey penceresinde **işleri** döşeme.</span><span class="sxs-lookup"><span data-stu-id="e78ca-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="e78ca-180">İşlerini listesinde birini tıklatın ve runbook iş ayrıntıları dikey penceresinde ayrıntılarını ve çıktısını görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e78ca-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="e78ca-181">Windows PowerShell kullanarak iş durumunu alma</span><span class="sxs-lookup"><span data-stu-id="e78ca-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="e78ca-182">Kullanabileceğiniz [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) bir runbook ve belirli bir işin ayrıntılarını için oluşturulan işleri alınamadı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="e78ca-183">Windows PowerShell ile bir runbook başlatırsanız [başlangıç AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), sonuçtaki işi verir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="e78ca-184">Kullanım [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)animasyonun bir işi almak için çıktı çıktı.</span><span class="sxs-lookup"><span data-stu-id="e78ca-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="e78ca-185">Aşağıdaki örnek komutlar, örnek bir runbook'un son işini almak ve runbook parametreleri ve iş çıktısını için sağlanan değerler durumunu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e78ca-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="e78ca-186">Dengeli dağıtım</span><span class="sxs-lookup"><span data-stu-id="e78ca-186">Fair share</span></span>
<span data-ttu-id="e78ca-187">Üç saat boyunca çalıştıktan sonra kaynakları bulutta tüm runbook'lar arasında paylaşmak için Azure Automation geçici olarak herhangi bir işi kaldıracak.</span><span class="sxs-lookup"><span data-stu-id="e78ca-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="e78ca-188">Bu süre boyunca işler [PowerShell tabanlı runbook'ları](automation-runbook-types.md#powershell-runbooks) durdurulur ve yeniden.</span><span class="sxs-lookup"><span data-stu-id="e78ca-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="e78ca-189">İş durumu gösterir **durduruldu**.</span><span class="sxs-lookup"><span data-stu-id="e78ca-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="e78ca-190">Kontrol noktaları desteklemeyen beri runbook bu tür her zaman en baştan yeniden başlatılır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="e78ca-191">[PowerShell iş akışı tabanlı runbook'ları](automation-runbook-types.md#powershell-workflow-runbooks) kendi sonuncudan sürdürülecek [denetim noktası](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="e78ca-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="e78ca-192">Üç saat çalıştırdıktan sonra runbook işi hizmeti ve durumunu tarafından askıya alınacak gösterir **çalıştıran, kaynaklar bekleniyor**.</span><span class="sxs-lookup"><span data-stu-id="e78ca-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="e78ca-193">Bir korumalı alan kullanılabilir duruma geldiğinde runbook Otomasyon hizmeti ve en son kontrol modundan tarafından otomatik olarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="e78ca-194">Askıya alma/yeniden başlatma için normal PowerShell iş akışı davranış budur.</span><span class="sxs-lookup"><span data-stu-id="e78ca-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="e78ca-195">Runbook yeniden çalışma zamanı, üç saatlik aşarsa işlemi, en fazla üç kez yineler.</span><span class="sxs-lookup"><span data-stu-id="e78ca-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="e78ca-196">Runbook hala üç saat içinde tamamlanmadı sonra runbook işi başarısız oldu ve iş durumu gösterir üçüncü yeniden başlatma işleminden sonra **kaynaklar bekleniyor başarısız**.</span><span class="sxs-lookup"><span data-stu-id="e78ca-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="e78ca-197">Bu durumda, şu özel durumla hatası alırsınız.</span><span class="sxs-lookup"><span data-stu-id="e78ca-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="e78ca-198">*İş sürekli olarak aynı denetim noktasından çıkarıldı çünkü çalışmaya devam edemiyor. Runbook'unuzda durumuna kalıcı olmadan uzun işlemleri gerçekleştirmez emin olun.*</span><span class="sxs-lookup"><span data-stu-id="e78ca-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="e78ca-199">Yeniden kaldırılıyor olmadan sonraki denetim sağlamak mümkün olmayan gibi hizmet tamamlamadan, süresiz olarak çalışan runbook'lar korumak için budur.</span><span class="sxs-lookup"><span data-stu-id="e78ca-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="e78ca-200">Ardından runbook herhangi bir denetim noktası varsa veya iş ilk denetim noktası kaldırıldığında önce ulaşmıştı değil, baştan başlatılır.</span><span class="sxs-lookup"><span data-stu-id="e78ca-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="e78ca-201">Bir runbook oluştururken etkinlikler arasında iki kontrol noktaları çalıştırmak için zaman üç saat aşmadığından emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="e78ca-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="e78ca-202">Runbook'unuzda bu değil Bu üç saat sınırına ulaştığında veya uzun süre sonu emin olmak için denetim noktaları eklemek gerekebilir işlemleri çalıştırma.</span><span class="sxs-lookup"><span data-stu-id="e78ca-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="e78ca-203">Örneğin, runbook'unuz bir arat büyük bir SQL veritabanında gerçekleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="e78ca-204">Bu tek bir işlem Orta paylaşımı sınırı içinde tamamlanmazsa, sonra iş kaldırıldı ve baştan yeniden.</span><span class="sxs-lookup"><span data-stu-id="e78ca-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="e78ca-205">Bu durumda, bir kerede bir tablo yeniden dizin oluşturmaya gibi birden çok adımlara arat işlemi bölmeniz ve son işlemi sonra işi devam ettirin böylece her işlemden sonra bir denetim noktası ekleme gerekir.</span><span class="sxs-lookup"><span data-stu-id="e78ca-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e78ca-206">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="e78ca-206">Next steps</span></span>
* <span data-ttu-id="e78ca-207">Azure Otomasyonu runbook'u başlatmak için kullanılan farklı yöntemleri hakkında daha fazla bilgi için bkz: [Azure Otomasyonu runbook başlatma](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="e78ca-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

