---
title: aaaStarting ve durdurma sanal makineleri - Graph | Microsoft Docs
description: "PowerShell iş akışı runbook'ları toostart ve durdurma Klasik sanal makineler de dahil olmak üzere Azure otomasyonu senaryosu sürümü."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 62d93170-ca3d-42ef-ac1d-6d50b61ac87d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2016
ms.author: magoedte;bwren
redirect_url: https://docs.microsoft.com/azure/automation/automation-solution-vm-management
redirect_document_id: False
ms.openlocfilehash: 5add8d8cf35ea2e89a570744755ac7db0a6feb07
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---starting-and-stopping-virtual-machines"></a><span data-ttu-id="8d4f8-103">Başlatma ve durdurma sanal makineler, azure otomasyonu senaryosu-</span><span class="sxs-lookup"><span data-stu-id="8d4f8-103">Azure Automation scenario - starting and stopping virtual machines</span></span>
<span data-ttu-id="8d4f8-104">Bu Azure otomasyonu senaryosu runbook'lar toostart ve durdurma Klasik sanal makineleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-104">This Azure Automation scenario includes runbooks toostart and stop classic virtual machines.</span></span>  <span data-ttu-id="8d4f8-105">Bu senaryo hello aşağıdakilerden birini kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="8d4f8-105">You can use this scenario for any of hello following:</span></span>  

* <span data-ttu-id="8d4f8-106">Değişiklik yapmadan Hello runbook'ları, kendi ortamınızda kullanın.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-106">Use hello runbooks without modification in your own environment.</span></span>
* <span data-ttu-id="8d4f8-107">Merhaba runbook'lar özelleştirilmiş tooperform işlevlerini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-107">Modify hello runbooks tooperform customized functionality.</span></span>  
* <span data-ttu-id="8d4f8-108">Merhaba runbook çözümü genelinin bir parçası olarak başka bir runbook'tan çağırın.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-108">Call hello runbooks from another runbook as part of an overall solution.</span></span>
* <span data-ttu-id="8d4f8-109">Merhaba runbook'lar öğreticileri toolearn runbook kavramları yazma kullanın.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-109">Use hello runbooks as tutorials toolearn runbook authoring concepts.</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="8d4f8-110">Grafik</span><span class="sxs-lookup"><span data-stu-id="8d4f8-110">Graphical</span></span>](automation-solution-startstopvm-graphical.md)
> * [<span data-ttu-id="8d4f8-111">PowerShell İş Akışı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-111">PowerShell Workflow</span></span>](automation-solution-startstopvm-psworkflow.md)
>
>

<span data-ttu-id="8d4f8-112">Bu hello grafik runbook bu senaryonun sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-112">This is hello graphical runbook version of this scenario.</span></span> <span data-ttu-id="8d4f8-113">Ayrıca kullanılabilir kullanarak olan [PowerShell iş akışı runbook'ları](automation-solution-startstopvm-psworkflow.md).</span><span class="sxs-lookup"><span data-stu-id="8d4f8-113">It is also available using [PowerShell Workflow runbooks](automation-solution-startstopvm-psworkflow.md).</span></span>

## <a name="getting-hello-scenario"></a><span data-ttu-id="8d4f8-114">Merhaba senaryo alma</span><span class="sxs-lookup"><span data-stu-id="8d4f8-114">Getting hello scenario</span></span>
<span data-ttu-id="8d4f8-115">Bu senaryo iki oluşur indirebileceğiniz iki grafik runbook'lar hello bağlantılar.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-115">This scenario consists of two two graphical runbooks that you can download from hello following links.</span></span>  <span data-ttu-id="8d4f8-116">Merhaba bkz [PowerShell iş akışı sürümü](automation-solution-startstopvm-psworkflow.md) bu senaryonun bağlantılar toohello PowerShell iş akışı runbook'ları için.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-116">See hello [PowerShell Workflow version](automation-solution-startstopvm-psworkflow.md) of this scenario for links toohello PowerShell Workflow runbooks.</span></span>

| <span data-ttu-id="8d4f8-117">Runbook</span><span class="sxs-lookup"><span data-stu-id="8d4f8-117">Runbook</span></span> | <span data-ttu-id="8d4f8-118">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-118">Link</span></span> | <span data-ttu-id="8d4f8-119">Tür</span><span class="sxs-lookup"><span data-stu-id="8d4f8-119">Type</span></span> | <span data-ttu-id="8d4f8-120">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8d4f8-120">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="8d4f8-121">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-121">StartAzureClassicVM</span></span> |[<span data-ttu-id="8d4f8-122">Azure Klasik VM grafik Runbook başlatın</span><span class="sxs-lookup"><span data-stu-id="8d4f8-122">Start Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Start-Azure-Classic-VM-c6067b3d) |<span data-ttu-id="8d4f8-123">Grafik</span><span class="sxs-lookup"><span data-stu-id="8d4f8-123">Graphical</span></span> |<span data-ttu-id="8d4f8-124">Tüm Klasik sanal makineleri bir Azure aboneliği veya tüm sanal makinelerin belirli bir hizmet adı ile başlatır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-124">Starts all classic virtual machines in an Azure subscription or all virtual machines with a particular service name.</span></span> |
| <span data-ttu-id="8d4f8-125">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-125">StopAzureClassicVM</span></span> |[<span data-ttu-id="8d4f8-126">Azure Klasik VM grafik Runbook'u durdurun</span><span class="sxs-lookup"><span data-stu-id="8d4f8-126">Stop Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Stop-Azure-Classic-VM-397819bd) |<span data-ttu-id="8d4f8-127">Grafik</span><span class="sxs-lookup"><span data-stu-id="8d4f8-127">Graphical</span></span> |<span data-ttu-id="8d4f8-128">Tüm sanal makinelerin bir Otomasyon hesabı veya belirli bir hizmet adı ile tüm sanal makineleri durdurur.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-128">Stops all virtual machines in an automation account or all virtual machines with a particular service name.</span></span> |

## <a name="installing-and-configuring-hello-scenario"></a><span data-ttu-id="8d4f8-129">Yükleme ve yapılandırma hello senaryosu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-129">Installing and configuring hello scenario</span></span>
### <a name="1-install-hello-runbooks"></a><span data-ttu-id="8d4f8-130">1. Merhaba runbook'ları yükleyin</span><span class="sxs-lookup"><span data-stu-id="8d4f8-130">1. Install hello runbooks</span></span>
<span data-ttu-id="8d4f8-131">Merhaba runbook'ları indirdikten sonra bunları aktarabilirsiniz hello yordamda kullanarak [grafik runbook yordamları](automation-graphical-authoring-intro.md#graphical-runbook-procedures).</span><span class="sxs-lookup"><span data-stu-id="8d4f8-131">After downloading hello runbooks, you can import them using hello procedure in [Graphical runbook procedures](automation-graphical-authoring-intro.md#graphical-runbook-procedures).</span></span>

### <a name="2-review-hello-description-and-requirements"></a><span data-ttu-id="8d4f8-132">2. Gözden geçirme hello açıklama ve gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="8d4f8-132">2. Review hello description and requirements</span></span>
<span data-ttu-id="8d4f8-133">Merhaba runbook'ları dahil olarak adlandırılan bir etkinlik **beni oku** bir açıklama ve gerekli varlıkları içerir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-133">hello runbooks include an activity called **Read Me** that includes a description and required assets.</span></span>  <span data-ttu-id="8d4f8-134">Merhaba seçerek bu bilgiyi görüntüleyebilirsiniz **beni oku** etkinliği ve hello **iş akışı betiği** parametresi.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-134">You can view this information by selecting hello **Read Me** activity and then hello **Workflow Script** parameter.</span></span>  <span data-ttu-id="8d4f8-135">Ayrıca alabilirsiniz hello Bu makale aynı bilgileri.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-135">You can also get hello same information from this article.</span></span>

### <a name="3-configure-assets"></a><span data-ttu-id="8d4f8-136">3. Varlıklar yapılandırın</span><span class="sxs-lookup"><span data-stu-id="8d4f8-136">3. Configure assets</span></span>
<span data-ttu-id="8d4f8-137">Merhaba runbook'lar oluşturmak ve uygun değerlerle doldurmak varlıklar aşağıdaki hello gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-137">hello runbooks require hello following assets that you must create and populate with appropriate values.</span></span>  <span data-ttu-id="8d4f8-138">Merhaba, varsayılan adlardır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-138">hello names are default.</span></span>  <span data-ttu-id="8d4f8-139">Bu adları hello belirtirseniz, farklı adlara sahip varlıklar kullanabilirsiniz [giriş parametreleri](#using-the-runbooks) hello runbook başlattığınızda.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-139">You can use assets with different names if you specify those names in hello [input parameters](#using-the-runbooks) when you start hello runbook.</span></span>

| <span data-ttu-id="8d4f8-140">Varlık türü</span><span class="sxs-lookup"><span data-stu-id="8d4f8-140">Asset Type</span></span> | <span data-ttu-id="8d4f8-141">Varsayılan adı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-141">Default Name</span></span> | <span data-ttu-id="8d4f8-142">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8d4f8-142">Description</span></span> |
|:--- |:--- |:--- |:--- |
| [<span data-ttu-id="8d4f8-143">Kimlik bilgisi</span><span class="sxs-lookup"><span data-stu-id="8d4f8-143">Credential</span></span>](automation-credentials.md) |<span data-ttu-id="8d4f8-144">AzureCredential</span><span class="sxs-lookup"><span data-stu-id="8d4f8-144">AzureCredential</span></span> |<span data-ttu-id="8d4f8-145">Yetkilisi toostart ve durdurma sanal makineler hello Azure aboneliğine sahip bir hesabın kimlik bilgilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-145">Contains credentials for an account that has authority toostart and stop virtual machines in hello Azure subscription.</span></span> |
| [<span data-ttu-id="8d4f8-146">Değişken</span><span class="sxs-lookup"><span data-stu-id="8d4f8-146">Variable</span></span>](automation-variables.md) |<span data-ttu-id="8d4f8-147">Azuresubscriptionıd</span><span class="sxs-lookup"><span data-stu-id="8d4f8-147">AzureSubscriptionId</span></span> |<span data-ttu-id="8d4f8-148">Merhaba abonelik kimliği, Azure aboneliğinizin yer alır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-148">Contains hello subscription ID of your Azure subscription.</span></span> |

## <a name="using-hello-scenario"></a><span data-ttu-id="8d4f8-149">Merhaba senaryo kullanma</span><span class="sxs-lookup"><span data-stu-id="8d4f8-149">Using hello scenario</span></span>
### <a name="parameters"></a><span data-ttu-id="8d4f8-150">Parametreler</span><span class="sxs-lookup"><span data-stu-id="8d4f8-150">Parameters</span></span>
<span data-ttu-id="8d4f8-151">Merhaba runbook'lar her hello aşağıdakilere sahip [giriş parametreleri](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="8d4f8-151">hello runbooks each have hello following [input parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span>  <span data-ttu-id="8d4f8-152">Zorunlu parametreler için değer sağlamalısınız ve değerleri gereksinimlerinize bağlı olarak diğer parametreleri için isteğe bağlı olarak sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-152">You must provide values for any mandatory parameters and can optionally provide values for other parameters depending on your requirements.</span></span>

| <span data-ttu-id="8d4f8-153">Parametre</span><span class="sxs-lookup"><span data-stu-id="8d4f8-153">Parameter</span></span> | <span data-ttu-id="8d4f8-154">Tür</span><span class="sxs-lookup"><span data-stu-id="8d4f8-154">Type</span></span> | <span data-ttu-id="8d4f8-155">Zorunlu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-155">Mandatory</span></span> | <span data-ttu-id="8d4f8-156">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8d4f8-156">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="8d4f8-157">ServiceName</span><span class="sxs-lookup"><span data-stu-id="8d4f8-157">ServiceName</span></span> |<span data-ttu-id="8d4f8-158">Dize</span><span class="sxs-lookup"><span data-stu-id="8d4f8-158">string</span></span> |<span data-ttu-id="8d4f8-159">Hayır</span><span class="sxs-lookup"><span data-stu-id="8d4f8-159">No</span></span> |<span data-ttu-id="8d4f8-160">Bir değer belirtilirse, hizmet adının tüm sanal makinelerle başlatıldığı veya durdurulduğu sonra.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-160">If a value is provided, then all virtual machines with that service name are started or stopped.</span></span>  <span data-ttu-id="8d4f8-161">Herhangi bir değer sağlanmazsa, ardından hello Azure aboneliği tüm Klasik sanal makinelerin başlatıldığı veya durdurulduğu.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-161">If no value is provided, then all classic virtual machines in hello Azure subscription are started or stopped.</span></span> |
| <span data-ttu-id="8d4f8-162">AzureSubscriptionIdAssetName</span><span class="sxs-lookup"><span data-stu-id="8d4f8-162">AzureSubscriptionIdAssetName</span></span> |<span data-ttu-id="8d4f8-163">Dize</span><span class="sxs-lookup"><span data-stu-id="8d4f8-163">string</span></span> |<span data-ttu-id="8d4f8-164">Hayır</span><span class="sxs-lookup"><span data-stu-id="8d4f8-164">No</span></span> |<span data-ttu-id="8d4f8-165">Merhaba Hello adını içeren [değişken varlığı](#installing-and-configuring-the-scenario) hello abonelik kimliği, Azure aboneliğinizin içerir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-165">Contains hello name of hello [variable asset](#installing-and-configuring-the-scenario) that contains hello subscription ID of your Azure subscription.</span></span>  <span data-ttu-id="8d4f8-166">Bir değer belirtmezseniz *Azuresubscriptionıd* kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-166">If you don't specify a value, *AzureSubscriptionId* is used.</span></span> |
| <span data-ttu-id="8d4f8-167">AzureCredentialAssetName</span><span class="sxs-lookup"><span data-stu-id="8d4f8-167">AzureCredentialAssetName</span></span> |<span data-ttu-id="8d4f8-168">Dize</span><span class="sxs-lookup"><span data-stu-id="8d4f8-168">string</span></span> |<span data-ttu-id="8d4f8-169">Hayır</span><span class="sxs-lookup"><span data-stu-id="8d4f8-169">No</span></span> |<span data-ttu-id="8d4f8-170">Merhaba Hello adını içeren [kimlik bilgisi varlığı](#installing-and-configuring-the-scenario) hello runbook toouse hello kimlik bilgilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-170">Contains hello name of hello [credential asset](#installing-and-configuring-the-scenario) that contains hello credentials for hello runbook toouse.</span></span>  <span data-ttu-id="8d4f8-171">Bir değer belirtmezseniz *AzureCredential* kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-171">If you don't specify a value, *AzureCredential* is used.</span></span> |

### <a name="starting-hello-runbooks"></a><span data-ttu-id="8d4f8-172">Başlangıç hello runbook'ları</span><span class="sxs-lookup"><span data-stu-id="8d4f8-172">Starting hello runbooks</span></span>
<span data-ttu-id="8d4f8-173">Merhaba yöntemlerden herhangi birini kullanabilirsiniz [Azure Otomasyonu runbook başlatma](automation-starting-a-runbook.md) toostart ya da bu makalede hello runbook'lar.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-173">You can use any of hello methods in [Starting a runbook in Azure Automation](automation-starting-a-runbook.md) toostart either of hello runbooks in this article.</span></span>

<span data-ttu-id="8d4f8-174">Aşağıdaki örnek komutlar hello kullanan Windows PowerShell toorun **StartAzureClassicVM** toostart hello hizmet adı ile tüm sanal makineleri *MyVMService*.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-174">hello following sample commands uses Windows PowerShell toorun **StartAzureClassicVM** toostart all virtual machines with hello service name *MyVMService*.</span></span>

    $params = @{"ServiceName"="MyVMService"}
    Start-AzureAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "StartAzureClassicVM" –Parameters $params

### <a name="output"></a><span data-ttu-id="8d4f8-175">Çıktı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-175">Output</span></span>
<span data-ttu-id="8d4f8-176">Merhaba runbook'ları olacak [bir çıktı mesajı](automation-runbook-output-and-messages.md) her sanal makine belirten desteklemediğini hello Başlat veya Durdur yönerge başarıyla gönderildiği.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-176">hello runbooks will [output a message](automation-runbook-output-and-messages.md) for each virtual machine indicating whether or not hello start or stop instruction was successfully submitted.</span></span>  <span data-ttu-id="8d4f8-177">Merhaba çıktı toodetermine hello sonuç her runbook için belirli bir dizeyi arayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-177">You can look for a specific string in hello output toodetermine hello result for each runbook.</span></span>  <span data-ttu-id="8d4f8-178">Merhaba olası çıktı dizeleri aşağıdaki tablonun hello listelenir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-178">hello possible output strings are listed in hello following table.</span></span>

| <span data-ttu-id="8d4f8-179">Runbook</span><span class="sxs-lookup"><span data-stu-id="8d4f8-179">Runbook</span></span> | <span data-ttu-id="8d4f8-180">Koşul</span><span class="sxs-lookup"><span data-stu-id="8d4f8-180">Condition</span></span> | <span data-ttu-id="8d4f8-181">İleti</span><span class="sxs-lookup"><span data-stu-id="8d4f8-181">Message</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="8d4f8-182">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-182">StartAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-183">Sanal makine zaten çalışıyor</span><span class="sxs-lookup"><span data-stu-id="8d4f8-183">Virtual machine is already running</span></span> |<span data-ttu-id="8d4f8-184">MyVM zaten çalışıyor</span><span class="sxs-lookup"><span data-stu-id="8d4f8-184">MyVM is already running</span></span> |
| <span data-ttu-id="8d4f8-185">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-185">StartAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-186">Başlatma isteği başarıyla gönderildi bir sanal makine için</span><span class="sxs-lookup"><span data-stu-id="8d4f8-186">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="8d4f8-187">MyVM başlatıldı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-187">MyVM has been started</span></span> |
| <span data-ttu-id="8d4f8-188">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-188">StartAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-189">Sanal makine başlatma isteği başarısız oldu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-189">Start request for virtual machine failed</span></span> |<span data-ttu-id="8d4f8-190">MyVM toostart başarısız oldu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-190">MyVM failed toostart</span></span> |
| <span data-ttu-id="8d4f8-191">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-191">StopAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-192">Sanal makine zaten çalışıyor</span><span class="sxs-lookup"><span data-stu-id="8d4f8-192">Virtual machine is already running</span></span> |<span data-ttu-id="8d4f8-193">MyVM zaten durdurulmuş</span><span class="sxs-lookup"><span data-stu-id="8d4f8-193">MyVM is already stopped</span></span> |
| <span data-ttu-id="8d4f8-194">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-194">StopAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-195">Başlatma isteği başarıyla gönderildi bir sanal makine için</span><span class="sxs-lookup"><span data-stu-id="8d4f8-195">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="8d4f8-196">MyVM başlatıldı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-196">MyVM has been started</span></span> |
| <span data-ttu-id="8d4f8-197">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="8d4f8-197">StopAzureClassicVM</span></span> |<span data-ttu-id="8d4f8-198">Sanal makine başlatma isteği başarısız oldu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-198">Start request for virtual machine failed</span></span> |<span data-ttu-id="8d4f8-199">MyVM toostart başarısız oldu</span><span class="sxs-lookup"><span data-stu-id="8d4f8-199">MyVM failed toostart</span></span> |

<span data-ttu-id="8d4f8-200">Aşağıdadır hello kullanarak bir görüntü **StartAzureClassicVM** olarak bir [alt runbook](automation-child-runbooks.md) bir örnek grafik runbook'ta.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-200">Following is an image of using hello **StartAzureClassicVM** as a [child runbook](automation-child-runbooks.md) in a sample graphical runbook.</span></span>  <span data-ttu-id="8d4f8-201">Bu, aşağıdaki tablonun hello hello koşullu bağlantıları kullanır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-201">This uses hello conditional links in hello following table.</span></span>

| <span data-ttu-id="8d4f8-202">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-202">Link</span></span> | <span data-ttu-id="8d4f8-203">Ölçütler</span><span class="sxs-lookup"><span data-stu-id="8d4f8-203">Criteria</span></span> |
|:--- |:--- |
| <span data-ttu-id="8d4f8-204">Başarılı bağlantı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-204">Success link</span></span> |<span data-ttu-id="8d4f8-205">$ActivityOutput ['StartAzureClassicVM']-gibi "\* başlatıldı"</span><span class="sxs-lookup"><span data-stu-id="8d4f8-205">$ActivityOutput['StartAzureClassicVM'] -like "\* has been started"</span></span> |
| <span data-ttu-id="8d4f8-206">Hata bağlantısı</span><span class="sxs-lookup"><span data-stu-id="8d4f8-206">Error link</span></span> |<span data-ttu-id="8d4f8-207">$ActivityOutput ['StartAzureClassicVM']-notlike "\* başlatıldı"</span><span class="sxs-lookup"><span data-stu-id="8d4f8-207">$ActivityOutput['StartAzureClassicVM'] -notlike "\* has been started"</span></span> |

![Alt runbook örneği](media/automation-solution-startstopvm/graphical-childrunbook-example.png)

## <a name="detailed-breakdown"></a><span data-ttu-id="8d4f8-209">Ayrıntılı dökümü</span><span class="sxs-lookup"><span data-stu-id="8d4f8-209">Detailed breakdown</span></span>
<span data-ttu-id="8d4f8-210">Bu senaryoda hello runbook'lar ayrıntılı bir dökümünü aşağıdadır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-210">Following is a detailed breakdown of hello runbooks in this scenario.</span></span>  <span data-ttu-id="8d4f8-211">Bu bilgileri kullanabilir tooeither özelleştirme hello runbook'ları veya bunlardan yalnızca toolearn kendi Otomasyon senaryoları yazma.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-211">You can use this information tooeither customize hello runbooks or just toolearn from them for authoring your own automation scenarios.</span></span>

### <a name="authentication"></a><span data-ttu-id="8d4f8-212">Kimlik Doğrulaması</span><span class="sxs-lookup"><span data-stu-id="8d4f8-212">Authentication</span></span>
![Kimlik Doğrulaması](media/automation-solution-startstopvm/graphical-authentication.png)

<span data-ttu-id="8d4f8-214">Merhaba runbook etkinlikleri tooset hello ile başlatır [kimlik bilgileri](automation-credentials.md) ve hello runbook hello kalanı için kullanılacak Azure aboneliği.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-214">hello runbook starts with activities tooset hello [credentials](automation-credentials.md) and Azure subscription that will be used for hello rest of hello runbook.</span></span>

<span data-ttu-id="8d4f8-215">ilk iki etkinlik hello **abonelik kimliği Al** ve **Azure kimlik bilgisi almak**, hello almak [varlıklar](#installing-the-runbook) hello sonraki iki etkinlikler tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-215">hello first two activities, **Get Subscription Id** and **Get Azure Credential**, retrieve hello [assets](#installing-the-runbook) that are used by hello next two activities.</span></span>  <span data-ttu-id="8d4f8-216">Bu etkinlikler doğrudan hello varlıklar belirtebilirsiniz, ancak bunlar hello varlık adları gerekir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-216">Those activities could directly specify hello assets, but they need hello asset names.</span></span>  <span data-ttu-id="8d4f8-217">Biz hello kullanıcı toospecify hello adları izin beri [giriş parametreleri](#using-the-runbooks), bu etkinlikler tooretrieve hello varlıkları bir giriş parametresi tarafından belirtilen bir adla ihtiyacımız.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-217">Since we are allowing hello user toospecify those names in hello [input parameters](#using-the-runbooks), we need these activities tooretrieve hello assets with a name specified by an input parameter.</span></span>

<span data-ttu-id="8d4f8-218">**Add-AzureAccount** hello hello runbook hello kalanı için kullanılacak kimlik bilgilerini ayarlar.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-218">**Add-AzureAccount** sets hello credentials that will be used for hello rest of hello runbook.</span></span>  <span data-ttu-id="8d4f8-219">Bunu alır hello kimlik bilgisi varlığı **Azure kimlik bilgisi almak** erişim toostart ve durdurma sanal makineleri hello Azure aboneliğinizin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-219">hello credential asset that it retrieves from **Get Azure Credential** must have access toostart and stop virtual machines in hello Azure subscription.</span></span>  <span data-ttu-id="8d4f8-220">Merhaba kullanılan abonelik tarafından seçilen **Select-AzureSubscription** hello abonelik kimliği kullanan gelen **abonelik kimliği Al**.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-220">hello subscription that's used is selected by **Select-AzureSubscription** which uses hello subscription Id from **Get Subscription Id**.</span></span>

### <a name="get-virtual-machines"></a><span data-ttu-id="8d4f8-221">Sanal makinelerini Al</span><span class="sxs-lookup"><span data-stu-id="8d4f8-221">Get virtual machines</span></span>
![VM Al](media/automation-solution-startstopvm/graphical-getvms.png)

<span data-ttu-id="8d4f8-223">Merhaba runbook hangi sanal makinelerin bu ile çalışacaksınız toodetermine ve olup Bunlar zaten başlatıldığında veya (Merhaba runbook bağlı olarak) durduruldu gerekir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-223">hello runbook needs toodetermine which virtual machines it will be working with and whether they are already started or stopped (depending on hello runbook).</span></span>   <span data-ttu-id="8d4f8-224">İki etkinliklerden birini hello VM'ler alır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-224">One of two activities will retrieve hello VMs.</span></span>  <span data-ttu-id="8d4f8-225">**Hizmetinde VM'ler alma** hello çalışacak *ServiceName* giriş parametresi hello runbook için bir değer içeriyor.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-225">**Get VMs in Service** will run if hello *ServiceName* input parameter for hello runbook contains a value.</span></span>  <span data-ttu-id="8d4f8-226">**Tüm sanal makineleri almak** hello çalışacak *ServiceName* hello runbook giriş parametresi değeri içermiyor.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-226">**Get All VMs** will run if hello *ServiceName* input parameter for hello runbook does not contain a value.</span></span>  <span data-ttu-id="8d4f8-227">Bu mantık hello koşullu bağlantıları her etkinlik önceki tarafından gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-227">This logic is performed by hello conditional links preceding each activity.</span></span>

<span data-ttu-id="8d4f8-228">Her iki etkinlikleri hello kullanır **Get-AzureVM** cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-228">Both activities use hello **Get-AzureVM** cmdlet.</span></span>  <span data-ttu-id="8d4f8-229">**Tüm sanal makineleri almak** kullanır hello **ListAllVMs** parametre tooreturn tüm sanal makineler.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-229">**Get All VMs** uses hello **ListAllVMs** parameter set tooreturn all virtual machines.</span></span>  <span data-ttu-id="8d4f8-230">**Hizmetinde VM'ler alma** kullanır hello **GetVMByServiceAndVMName** parametre kümesi ve hello sağlayan **ServiceName** hello için giriş parametresi **ServiceName**parametresi.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-230">**Get VMs in Service** uses hello **GetVMByServiceAndVMName** parameter set and provides hello **ServiceName** input parameter for hello **ServiceName** parameter.</span></span>  

### <a name="merge-vms"></a><span data-ttu-id="8d4f8-231">Sanal makineleri birleştirme</span><span class="sxs-lookup"><span data-stu-id="8d4f8-231">Merge VMs</span></span>
![Sanal makineleri birleştirme](media/automation-solution-startstopvm/graphical-mergevms.png)

<span data-ttu-id="8d4f8-233">Merhaba **birleştirme VM'ler** etkinliktir çok giriş gerekli tooprovide**Start-AzureVM** hello adı ve hello sanal makine toostart hizmet adı gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-233">hello **Merge VMs** activity is required tooprovide input too**Start-AzureVM** which needs hello name and service name of hello vm(s) toostart.</span></span>  <span data-ttu-id="8d4f8-234">Giriş herhangi birinden gelebilir **tüm sanal makineleri almak** veya **alma VM'ler hizmetindeki**, ancak **Start-AzureVM** yalnızca kendi giriş için bir etkinlik belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-234">That input could come from either **Get All VMs** or **Get VMs in Service**, but **Start-AzureVM** can only specify one activity for its input.</span></span>   

<span data-ttu-id="8d4f8-235">Merhaba senaryodur toocreate **birleştirme VM'ler** hello çalıştığı **Write-Output** cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-235">hello scenario is toocreate **Merge VMs** which runs hello **Write-Output** cmdlet.</span></span>  <span data-ttu-id="8d4f8-236">Merhaba **Inputobject** Bu cmdlet parametresi hello giriş hello önceki iki etkinlik birleştiren bir PowerShell ifadesi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-236">hello **InputObject** parameter for that cmdlet is a PowerShell Expression that combines hello input of hello previous two activities.</span></span>  <span data-ttu-id="8d4f8-237">Bu etkinlikler yalnızca biri dolayısıyla yalnızca tek bir çıktı kümesini beklenen çalışır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-237">Only one of those activities will run, so only one set of output is expected.</span></span>  <span data-ttu-id="8d4f8-238">**Start-AzureVM** bu çıkışı giriş parametreleri için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-238">**Start-AzureVM** can use that output for its input parameters.</span></span>

### <a name="startstop-virtual-machines"></a><span data-ttu-id="8d4f8-239">Sanal makineleri Başlatma/Durdurma</span><span class="sxs-lookup"><span data-stu-id="8d4f8-239">Start/Stop virtual machines</span></span>
![Sanal makineleri Başlat](media/automation-solution-startstopvm/graphical-startvm.png) ![Sanal makineleri Durdur](media/automation-solution-startstopvm/graphical-stopvm.png)

<span data-ttu-id="8d4f8-242">Merhaba runbook'a bağlı hello sonraki etkinlikleri toostart denemek veya runbook hello kullanmayı **Start-AzureVM** veya **Stop-AzureVM**.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-242">Depending on hello runbook, hello next activities attempt toostart or stop hello runbook using **Start-AzureVM** or **Stop-AzureVM**.</span></span>  <span data-ttu-id="8d4f8-243">Ardışık Düzen bağlantısına tarafından Hello etkinlik öncesinde olduğundan, bu kez döndürülen her nesne için çalışır **birleştirme VM'ler**.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-243">Since hello activity is preceded by a pipeline link, it will run once for each object returned from **Merge VMs**.</span></span>  <span data-ttu-id="8d4f8-244">Merhaba etkinliği yalnızca hello çalışacak hello bağlantı koşullu, böylelikle *RunningState* Merhaba bir sanal makinedir *durduruldu* için **Start-AzureVM** ve  *Başlatılan* için **Stop-AzureVM**.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-244">hello link is conditional so that hello activity will only run if hello *RunningState* of hello virtual machine is *Stopped* for **Start-AzureVM** and *Started* for **Stop-AzureVM**.</span></span> <span data-ttu-id="8d4f8-245">Bu durum, ardından uyulmazsa **zaten başlatıldığında bildir** veya **bildir zaten durdurulmuş** toosend bir iletiyi kullanarak çalıştırılan **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-245">If this condition is not met, then **Notify Already Started** or **Notify Already Stopped** is run toosend a message using **Write-Output**.</span></span>

### <a name="send-output"></a><span data-ttu-id="8d4f8-246">Çıktı Gönder</span><span class="sxs-lookup"><span data-stu-id="8d4f8-246">Send output</span></span>
![Başlangıç VM'ler bildir](media/automation-solution-startstopvm/graphical-notifystart.png) ![Stop VM'ler bildir](media/automation-solution-startstopvm/graphical-notifystop.png)

<span data-ttu-id="8d4f8-249">Merhaba son hello runbook toosend çıkış olup başlangıç hello veya her sanal makine durdurma isteği başarıyla gönderildi adımdır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-249">hello final step in hello runbook is toosend output whether hello start or stop request for each virtual machine was successfully submitted.</span></span> <span data-ttu-id="8d4f8-250">Ayrı bir yoktur **Write-Output** her biri için etkinlik ve hangi bir toorun koşullu bağlantılarla belirleriz.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-250">There is a separate **Write-Output** activity for each, and we determine which one toorun with conditional links.</span></span>  <span data-ttu-id="8d4f8-251">**VM başlatıldığında bildir** veya **bildir VM durduruldu** çalıştırılır *OperationStatus* olan *başarılı*.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-251">**Notify VM Started** or **Notify VM Stopped** is run if *OperationStatus* is *Succeeded*.</span></span>  <span data-ttu-id="8d4f8-252">Varsa *OperationStatus* diğer herhangi bir değer ise **başarısız olduğunda bildir tooStart** veya **başarısız olduğunda bildir tooStop** çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="8d4f8-252">If *OperationStatus* is any other value, then **Notify Failed tooStart** or **Notify Failed tooStop** is run.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8d4f8-253">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="8d4f8-253">Next steps</span></span>
* [<span data-ttu-id="8d4f8-254">Grafik Azure Otomasyonu'nda yazma</span><span class="sxs-lookup"><span data-stu-id="8d4f8-254">Graphical authoring in Azure Automation</span></span>](automation-graphical-authoring-intro.md)
* [<span data-ttu-id="8d4f8-255">Azure Otomasyonu'nda alt runbook'lar</span><span class="sxs-lookup"><span data-stu-id="8d4f8-255">Child runbooks in Azure Automation</span></span>](automation-child-runbooks.md)
* [<span data-ttu-id="8d4f8-256">Runbook çıkışı ve iletileri Azure Automation</span><span class="sxs-lookup"><span data-stu-id="8d4f8-256">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)
