---
title: "Alt runbook'ları Azure Automation | Microsoft Docs"
description: "Azure Otomasyonu'nda başka bir runbook'tan runbook başlatma ve bunlar arasında bilgi paylaşımı için farklı yöntemleri açıklar."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: a605d278dbbda9613b91007ea6a7042403a7a6ff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="e21d1-103">Azure Otomasyonu'nda alt runbook'lar</span><span class="sxs-lookup"><span data-stu-id="e21d1-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="e21d1-104">Azure Automation'ın diğer runbook'lar tarafından kullanılabilen ayrı işleve sahip yeniden kullanılabilir, modüler runbook'lar yazmak için en iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-104">It is a best practice in Azure Automation to write reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="e21d1-105">Üst runbook genellikle gerekli işlevleri gerçekleştirmek için bir veya daha fazla alt runbook'u çağırır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-105">A parent runbook will often call one or more child runbooks to perform required functionality.</span></span> <span data-ttu-id="e21d1-106">Bir alt runbook'u çağırmanın iki yolu vardır ve her anlamanız gereken belirli farklara sahiptir, farklı senaryolarınız için en iyi olacağı belirleyebilmesi.</span><span class="sxs-lookup"><span data-stu-id="e21d1-106">There are two ways to call a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="e21d1-107">Satır içi yürütme kullanarak bir alt runbook çağırma</span><span class="sxs-lookup"><span data-stu-id="e21d1-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="e21d1-108">Başka bir runbook'tan bir runbook'u satır içi olarak çağırmak için runbook adı kullanın ve tam olarak, bir etkinlik veya cmdlet'i kullanırken yaptığınız gibi parametreleri için değerler sağlayın.</span><span class="sxs-lookup"><span data-stu-id="e21d1-108">To invoke a runbook inline from another runbook, you use the name of the runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="e21d1-109">Aynı Otomasyon hesaptaki tüm runbook'lar bu şekilde kullanılacak diğerleri tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-109">All runbooks in the same Automation account are available to all others to be used in this manner.</span></span> <span data-ttu-id="e21d1-110">Üst runbook alt runbook'un bir sonraki satıra geçmeden önce tamamlanmasını bekler ve herhangi bir çıkış doğrudan üst öğeye döndürülür.</span><span class="sxs-lookup"><span data-stu-id="e21d1-110">The parent runbook will wait for the child runbook to complete before moving to the next line, and any output is returned directly to the parent.</span></span>

<span data-ttu-id="e21d1-111">Bir runbook'u satır içi çağırdığınızda üst runbook ile aynı işi çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-111">When you invoke a runbook inline, it runs in the same job as the parent runbook.</span></span> <span data-ttu-id="e21d1-112">Çalıştırdığı alt runbook'un iş geçmişinde hiçbir belirti olmaz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-112">There will be no indication in the job history of the child runbook that it ran.</span></span> <span data-ttu-id="e21d1-113">Tüm özel durumlar ve alt runbook'tan çıkış akışı üst öğesi ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-113">Any exceptions and any stream output from the child runbook will be associated with the parent.</span></span> <span data-ttu-id="e21d1-114">Bu daha az iş çalıştırılır ve izlemek için ve alt runbook'un ve tüm ve akış çıkışı tarafından karşılaşılan özel durumlar üst işle ilişkili olduğundan gidermek için daha kolay hale getirir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-114">This results in fewer jobs and makes them easier to track and to troubleshoot since any exceptions thrown by the child runbook and any of its stream output are associated with the parent job.</span></span>

<span data-ttu-id="e21d1-115">Bir runbook yayımlandığında, bu runbook'un çağırdığı tüm alt runbook zaten yayımlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="e21d1-116">Azure Otomasyonu runbook derlendiğinde alt runbook'larla bir ilişkilendirme derlemeler olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="e21d1-117">Yoksa, üst runbook doğru şekilde yayımlamak için görünür ancak başlatıldığında bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e21d1-117">If they aren’t, the parent runbook will appear to publish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="e21d1-118">Bu durumda, üst runbook alt runbook'ları doğru şekilde başvurmak için yayımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-118">If this happens, you can republish the parent runbook in order to properly reference the child runbooks.</span></span> <span data-ttu-id="e21d1-119">İlişki zaten oluşturulmuş olduğundan herhangi bir alt runbook'lardan biri değiştirilirse üst runbook'u yeniden yayımlamanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="e21d1-119">You do not need to republish the parent runbook if any of the child runbooks are changed because the association will have already been created.</span></span>

<span data-ttu-id="e21d1-120">Satır içi olarak adlandırılan bir alt runbook'un parametreleri karmaşık nesneler de dahil olmak üzere herhangi bir veri türü olabilir ve olmadığından hiçbir [JSON serileştirmesi](automation-starting-a-runbook.md#runbook-parameters) Azure Yönetim Portalı'nı kullanarak runbook'u başlattığınızda veya Start-AzureRmAutomationRunbook cmdlet ile olduğundan.</span><span class="sxs-lookup"><span data-stu-id="e21d1-120">The parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start the runbook using the Azure Management Portal or with the Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="e21d1-121">Runbook türleri</span><span class="sxs-lookup"><span data-stu-id="e21d1-121">Runbook types</span></span>
<span data-ttu-id="e21d1-122">Hangi tür birbirine çağırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="e21d1-122">Which types can call each other:</span></span>

* <span data-ttu-id="e21d1-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) ve [grafik runbook'lar](automation-runbook-types.md#graphical-runbooks) (her ikisi de olan temel PowerShell) her bir satır çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="e21d1-124">A [PowerShell iş akışı runbook'u](automation-runbook-types.md#powershell-workflow-runbooks) ve grafik PowerShell iş akışı runbook'ları (her ikisi de olan temel PowerShell iş akışı) her bir satır çağırın</span><span class="sxs-lookup"><span data-stu-id="e21d1-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="e21d1-125">PowerShell türleri ve PowerShell iş akışı türleri birbirine satır içi çağrılamıyor ve başlangıç AzureRmAutomationRunbook kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-125">The PowerShell types and the PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="e21d1-126">Zaman sipariş sağlasa da yayımlayın:</span><span class="sxs-lookup"><span data-stu-id="e21d1-126">When does publish order matter:</span></span>

* <span data-ttu-id="e21d1-127">Runbook'ları Yayımla sırasını yalnızca PowerShell iş akışı ve grafik PowerShell iş akışı runbook'ları için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-127">The publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="e21d1-128">Satır içi yürütme kullanarak bir grafik veya PowerShell iş akışı alt runbook'u çağırdığınızda, yalnızca runbook'un adını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use the name of the runbook.</span></span>  <span data-ttu-id="e21d1-129">PowerShell alt runbook çağırdığınızda, gerekir öncesinde adıyla *.\\*  komut dosyası yerel dizinde bulunur belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="e21d1-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* to specify that the script is located in the local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="e21d1-130">Örnek</span><span class="sxs-lookup"><span data-stu-id="e21d1-130">Example</span></span>
<span data-ttu-id="e21d1-131">Aşağıdaki örnekte, üç parametre, karmaşık bir nesne, bir tamsayı ve bir Boole değeri kabul eden bir test alt runbook'u çağırır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-131">The following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="e21d1-132">Alt runbook'un çıkışı bir değişkene atanır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-132">The output of the child runbook is assigned to a variable.</span></span>  <span data-ttu-id="e21d1-133">Bu durumda, bir PowerShell iş akışı runbook alt runbook.</span><span class="sxs-lookup"><span data-stu-id="e21d1-133">In this case, the child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="e21d1-134">Aşağıda bir PowerShell runbook alt öğesi olarak kullanarak aynı örnek verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-134">Following is the same example using a PowerShell runbook as the child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="e21d1-135">Cmdlet'ini kullanarak bir alt runbook'u başlatma</span><span class="sxs-lookup"><span data-stu-id="e21d1-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="e21d1-136">Kullanabileceğiniz [başlangıç AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) açıklandığı gibi bir runbook'u başlatmak için cmdlet [Windows PowerShell ile bir runbook'u başlatmak için](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="e21d1-136">You can use the [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet to start a runbook as described in [To start a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="e21d1-137">Bu cmdlet kullanım iki modu mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="e21d1-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="e21d1-138">Alt iş alt runbook için oluşturulan hemen bir modda cmdlet iş kimliğini döndürür.</span><span class="sxs-lookup"><span data-stu-id="e21d1-138">In one mode, the cmdlet returns the job id as soon as the child job is created for the child runbook.</span></span>  <span data-ttu-id="e21d1-139">Belirterek etkinleştirmek diğer bütün modunda **-bekleyin** parametresi, cmdlet alt kadar bekler işi bittiğinde ve alt runbook'tan çıkış döndürür.</span><span class="sxs-lookup"><span data-stu-id="e21d1-139">In the other mode, which you enable by specifying the **-wait** parameter, the cmdlet will wait until the child job finishes and will return the output from the child runbook.</span></span>

<span data-ttu-id="e21d1-140">Bir alt runbook'tan bir cmdlet'le başlatılan iş, üst runbook'tan ayrı bir iş çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-140">The job from a child runbook started with a cmdlet will run in a separate job from the parent runbook.</span></span> <span data-ttu-id="e21d1-141">Bu runbook'u satır içi çağırma'den daha fazla iş sonuçlanır ve izlemek daha zor hale getirir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-141">This results in more jobs than invoking the runbook inline and makes them more difficult to track.</span></span> <span data-ttu-id="e21d1-142">Üst her birinin tamamlanmasını beklemeden birden çok alt runbook zaman uyumsuz olarak başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-142">The parent can start multiple child runbooks asynchronously without waiting for each to complete.</span></span> <span data-ttu-id="e21d1-143">Alt runbook'ların satır içi olarak çağrıldığı Paralel yürütme türü için üst runbook kullanması gerekir [parallel anahtar kelimesini](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="e21d1-143">For that same kind of parallel execution calling the child runbooks inline, the parent runbook would need to use the [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="e21d1-144">Bir cmdlet'le başlatılan bir alt runbook'un parametreleri açıklandığı gibi karma tablosu olarak sağlanır [Runbook parametreleri](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="e21d1-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="e21d1-145">Yalnızca basit veri türleri kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-145">Only simple data types can be used.</span></span> <span data-ttu-id="e21d1-146">Ardından runbook karmaşık veri türü olan bir parametreye sahipse satır içi çağrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-146">If the runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="e21d1-147">Örnek</span><span class="sxs-lookup"><span data-stu-id="e21d1-147">Example</span></span>
<span data-ttu-id="e21d1-148">Aşağıdaki örnek parametrelere sahip bir alt runbook başlatır ve başlangıç AzureRmAutomationRunbook kullanarak tamamlanmasını bekler-parametre bekleyin.</span><span class="sxs-lookup"><span data-stu-id="e21d1-148">The following example starts a child runbook with parameters and then waits for it to complete using the Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="e21d1-149">Tamamlandığında, çıktısını alt runbook'tan toplanır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-149">Once completed, its output is collected from the child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="e21d1-150">Alt runbook çağırma yöntemlerinin karşılaştırılması</span><span class="sxs-lookup"><span data-stu-id="e21d1-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="e21d1-151">Aşağıdaki tabloda, başka bir runbook'tan bir runbook'u çağırmak için iki yöntem arasındaki farklar özetlenmektedir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-151">The following table summarizes the differences between the two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="e21d1-152">Satır içi</span><span class="sxs-lookup"><span data-stu-id="e21d1-152">Inline</span></span> | <span data-ttu-id="e21d1-153">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="e21d1-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="e21d1-154">İş</span><span class="sxs-lookup"><span data-stu-id="e21d1-154">Job</span></span> |<span data-ttu-id="e21d1-155">Alt runbook'lar üst ile aynı işi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="e21d1-155">Child runbooks run in the same job as the parent.</span></span> |<span data-ttu-id="e21d1-156">Alt runbook için ayrı bir iş oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="e21d1-156">A separate job is created for the child runbook.</span></span> |
| <span data-ttu-id="e21d1-157">Yürütme</span><span class="sxs-lookup"><span data-stu-id="e21d1-157">Execution</span></span> |<span data-ttu-id="e21d1-158">Üst runbook alt runbook'un devam etmeden önce tamamlanmasını bekler.</span><span class="sxs-lookup"><span data-stu-id="e21d1-158">Parent runbook waits for the child runbook to complete before continuing.</span></span> |<span data-ttu-id="e21d1-159">Üst runbook alt runbook başlatıldıktan hemen sonra devam *veya* üst runbook alt iş tamamlamak bekler.</span><span class="sxs-lookup"><span data-stu-id="e21d1-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for the child job to finish.</span></span> |
| <span data-ttu-id="e21d1-160">Çıktı</span><span class="sxs-lookup"><span data-stu-id="e21d1-160">Output</span></span> |<span data-ttu-id="e21d1-161">Üst runbook doğrudan alt runbook'tan çıkış alabilir.</span><span class="sxs-lookup"><span data-stu-id="e21d1-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="e21d1-162">Üst runbook alt runbook işinden çıkış almak gerekir *veya* üst runbook alt runbook'tan çıkış doğrudan alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="e21d1-163">Parametreler</span><span class="sxs-lookup"><span data-stu-id="e21d1-163">Parameters</span></span> |<span data-ttu-id="e21d1-164">Alt runbook parametre değerlerini ayrı ayrı belirtilir ve herhangi bir veri türü kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-164">Values for the child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="e21d1-165">JSON serileştirmesi kullanan nesne veri türlerini ve alt runbook parametreleri tek bir karma tablosunda birleştirilmelidir ve yalnızca basit, içerebilir değerleri dizisi.</span><span class="sxs-lookup"><span data-stu-id="e21d1-165">Values for the child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="e21d1-166">Otomasyon Hesabı</span><span class="sxs-lookup"><span data-stu-id="e21d1-166">Automation Account</span></span> |<span data-ttu-id="e21d1-167">Üst runbook, yalnızca aynı automation hesabında alt runbook kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-167">Parent runbook can only use child runbook in the same automation account.</span></span> |<span data-ttu-id="e21d1-168">Bir bağlantı varsa, üst runbook alt runbook'tan herhangi bir Otomasyon hesabı aynı Azure aboneliği ve hatta farklı bir abonelik kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e21d1-168">Parent runbook can use child runbook from any automation account from the same Azure subscription and even a different subscription if you have a connection to it.</span></span> |
| <span data-ttu-id="e21d1-169">Yayımlama</span><span class="sxs-lookup"><span data-stu-id="e21d1-169">Publishing</span></span> |<span data-ttu-id="e21d1-170">Üst runbook yayımlanmadan önce alt runbook yayımlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="e21d1-171">Üst runbook başlatılmadan önce dilediğiniz zaman alt runbook yayımlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e21d1-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="e21d1-172">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="e21d1-172">Next steps</span></span>
* [<span data-ttu-id="e21d1-173">Azure Otomasyonu runbook başlatma</span><span class="sxs-lookup"><span data-stu-id="e21d1-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="e21d1-174">Runbook çıkışı ve iletileri Azure Automation</span><span class="sxs-lookup"><span data-stu-id="e21d1-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

