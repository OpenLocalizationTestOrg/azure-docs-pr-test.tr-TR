---
title: Azure Otomasyonu aaaChild runbook'larda | Microsoft Docs
description: "Azure Otomasyonu'nda başka bir runbook'tan runbook başlatma ve bunlar arasında bilgi paylaşımı için farklı yöntemler hello açıklar."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: d3d06818d344b565d53cc4f4705b41dcfcf9a376
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="4146f-103">Azure Otomasyonu'nda alt runbook'lar</span><span class="sxs-lookup"><span data-stu-id="4146f-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="4146f-104">Bunu bir Azure Otomasyonu toowrite yeniden kullanılabilir, modüler runbook'lar diğer runbook'lar tarafından kullanılabilen ayrı işleve sahip en iyi uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="4146f-104">It is a best practice in Azure Automation toowrite reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="4146f-105">Üst runbook genellikle bir veya daha fazla alt runbook'lar gerekli tooperform işlevi çağırır.</span><span class="sxs-lookup"><span data-stu-id="4146f-105">A parent runbook will often call one or more child runbooks tooperform required functionality.</span></span> <span data-ttu-id="4146f-106">Bir alt runbook'u iki yolu toocall vardır ve her anlamanız gereken belirli farklara sahiptir, farklı senaryolarınız için en iyi olacağı belirleyebilmesi.</span><span class="sxs-lookup"><span data-stu-id="4146f-106">There are two ways toocall a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="4146f-107">Satır içi yürütme kullanarak bir alt runbook çağırma</span><span class="sxs-lookup"><span data-stu-id="4146f-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="4146f-108">bir runbook'u satır içi tooinvoke başka bir runbook'tan hello runbook hello adını kullanın ve tam olarak, bir etkinlik veya cmdlet'i kullanırken yaptığınız gibi parametreleri için değerler sağlayın.</span><span class="sxs-lookup"><span data-stu-id="4146f-108">tooinvoke a runbook inline from another runbook, you use hello name of hello runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="4146f-109">Tüm runbook'ları hello aynı Otomasyon hesabı kullanılabilir tooall diğerleri toobe bu yöntemle kullanılan alanlarıdır.</span><span class="sxs-lookup"><span data-stu-id="4146f-109">All runbooks in hello same Automation account are available tooall others toobe used in this manner.</span></span> <span data-ttu-id="4146f-110">Merhaba üst runbook toohello sonraki satıra geçmeden önce hello alt runbook toocomplete için bekler ve herhangi bir çıkış doğrudan toohello üst döndürülür.</span><span class="sxs-lookup"><span data-stu-id="4146f-110">hello parent runbook will wait for hello child runbook toocomplete before moving toohello next line, and any output is returned directly toohello parent.</span></span>

<span data-ttu-id="4146f-111">Bir runbook'u satır içi çağırdığınızda hello aynı hello üst runbook işi çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="4146f-111">When you invoke a runbook inline, it runs in hello same job as hello parent runbook.</span></span> <span data-ttu-id="4146f-112">Çalıştırdığınız hello alt runbook'un hello iş geçmişinde hiçbir belirti olmaz.</span><span class="sxs-lookup"><span data-stu-id="4146f-112">There will be no indication in hello job history of hello child runbook that it ran.</span></span> <span data-ttu-id="4146f-113">Tüm özel durumlar ve akış hello alt runbook'tan hello üst öğesi ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="4146f-113">Any exceptions and any stream output from hello child runbook will be associated with hello parent.</span></span> <span data-ttu-id="4146f-114">Bu daha az iş çalıştırılır ve bunları tootrack ve tootroubleshoot hello alt runbook tarafından karşılaşılan özel durumlar itibaren kolaylaştırır ve akış çıktısını hello üst işle ilişkili olan.</span><span class="sxs-lookup"><span data-stu-id="4146f-114">This results in fewer jobs and makes them easier tootrack and tootroubleshoot since any exceptions thrown by hello child runbook and any of its stream output are associated with hello parent job.</span></span>

<span data-ttu-id="4146f-115">Bir runbook yayımlandığında, bu runbook'un çağırdığı tüm alt runbook zaten yayımlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4146f-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="4146f-116">Azure Otomasyonu runbook derlendiğinde alt runbook'larla bir ilişkilendirme derlemeler olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="4146f-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="4146f-117">Yoksa, hello üst runbook toopublish düzgün görünür ancak başlatıldığında bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="4146f-117">If they aren’t, hello parent runbook will appear toopublish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="4146f-118">Bu durumda, sipariş tooproperly başvuru hello alt runbook'hello üst runbook yeniden yayımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-118">If this happens, you can republish hello parent runbook in order tooproperly reference hello child runbooks.</span></span> <span data-ttu-id="4146f-119">Merhaba ilişki zaten oluşturulmuş olduğundan hello alt runbook'ları hiçbirini değiştirilirse toorepublish hello üst runbook gerekmez.</span><span class="sxs-lookup"><span data-stu-id="4146f-119">You do not need toorepublish hello parent runbook if any of hello child runbooks are changed because hello association will have already been created.</span></span>

<span data-ttu-id="4146f-120">Satır içi olarak adlandırılan bir alt runbook'un Hello parametreleri karmaşık nesneler de dahil olmak üzere herhangi bir veri türü olabilir ve var. hiçbir [JSON serileştirmesi](automation-starting-a-runbook.md#runbook-parameters) hello Azure Yönetim Portalı kullanarak hello runbook'u başlattığınızda veya hello olduğundan Start-AzureRmAutomationRunbook cmdlet'ini kullanın.</span><span class="sxs-lookup"><span data-stu-id="4146f-120">hello parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start hello runbook using hello Azure Management Portal or with hello Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="4146f-121">Runbook türleri</span><span class="sxs-lookup"><span data-stu-id="4146f-121">Runbook types</span></span>
<span data-ttu-id="4146f-122">Hangi tür birbirine çağırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="4146f-122">Which types can call each other:</span></span>

* <span data-ttu-id="4146f-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) ve [grafik runbook'lar](automation-runbook-types.md#graphical-runbooks) (her ikisi de olan temel PowerShell) her bir satır çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="4146f-124">A [PowerShell iş akışı runbook'u](automation-runbook-types.md#powershell-workflow-runbooks) ve grafik PowerShell iş akışı runbook'ları (her ikisi de olan temel PowerShell iş akışı) her bir satır çağırın</span><span class="sxs-lookup"><span data-stu-id="4146f-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="4146f-125">PowerShell türleri hello ve PowerShell iş akışı türleri hello birbirine satır içi çağrılamıyor ve başlangıç AzureRmAutomationRunbook kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4146f-125">hello PowerShell types and hello PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="4146f-126">Zaman sipariş sağlasa da yayımlayın:</span><span class="sxs-lookup"><span data-stu-id="4146f-126">When does publish order matter:</span></span>

* <span data-ttu-id="4146f-127">Merhaba, PowerShell iş akışı ve grafik PowerShell iş akışı runbook için runbook'ları yalnızca önemlidir dizisi yayımlayın.</span><span class="sxs-lookup"><span data-stu-id="4146f-127">hello publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="4146f-128">Satır içi yürütme kullanarak bir grafik veya PowerShell iş akışı alt runbook'u çağırdığınızda, yalnızca hello runbook hello adını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use hello name of hello runbook.</span></span>  <span data-ttu-id="4146f-129">PowerShell alt runbook çağırdığınızda, gerekir öncesinde adıyla *.\\*  betik hello toospecify hello yerel dizininde bulunur.</span><span class="sxs-lookup"><span data-stu-id="4146f-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* toospecify that hello script is located in hello local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="4146f-130">Örnek</span><span class="sxs-lookup"><span data-stu-id="4146f-130">Example</span></span>
<span data-ttu-id="4146f-131">Aşağıdaki örnek hello üç parametre, karmaşık bir nesne, bir tamsayı ve bir Boole değeri kabul eden bir test alt runbook'u çağırır.</span><span class="sxs-lookup"><span data-stu-id="4146f-131">hello following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="4146f-132">Merhaba hello alt runbook'un çıktısını tooa değişkeni atanır.</span><span class="sxs-lookup"><span data-stu-id="4146f-132">hello output of hello child runbook is assigned tooa variable.</span></span>  <span data-ttu-id="4146f-133">Bu durumda, bir PowerShell iş akışı runbook hello alt runbook.</span><span class="sxs-lookup"><span data-stu-id="4146f-133">In this case, hello child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="4146f-134">Aşağıdadır hello hello alt öğesi olarak bir PowerShell runbook kullanarak aynı örneği.</span><span class="sxs-lookup"><span data-stu-id="4146f-134">Following is hello same example using a PowerShell runbook as hello child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="4146f-135">Cmdlet'ini kullanarak bir alt runbook'u başlatma</span><span class="sxs-lookup"><span data-stu-id="4146f-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="4146f-136">Merhaba kullanabilirsiniz [başlangıç AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart açıklandığı gibi bir runbook [toostart Windows PowerShell ile bir runbook](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="4146f-136">You can use hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart a runbook as described in [toostart a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="4146f-137">Bu cmdlet kullanım iki modu mevcuttur.</span><span class="sxs-lookup"><span data-stu-id="4146f-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="4146f-138">Merhaba alt iş hello alt runbook için oluşturulan hemen bir modda hello cmdlet hello iş kimliği döndürür.</span><span class="sxs-lookup"><span data-stu-id="4146f-138">In one mode, hello cmdlet returns hello job id as soon as hello child job is created for hello child runbook.</span></span>  <span data-ttu-id="4146f-139">İçinde hello belirterek etkinleştirmek diğer modu hello **-bekleyin** parametresi hello cmdlet hello alt kadar bekler işi bittiğinde ve hello çıktı hello alt runbook'tan döndürür.</span><span class="sxs-lookup"><span data-stu-id="4146f-139">In hello other mode, which you enable by specifying hello **-wait** parameter, hello cmdlet will wait until hello child job finishes and will return hello output from hello child runbook.</span></span>

<span data-ttu-id="4146f-140">Merhaba iş bir alt runbook'tan bir cmdlet'le başlatılan hello üst runbook'tan ayrı bir iş çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="4146f-140">hello job from a child runbook started with a cmdlet will run in a separate job from hello parent runbook.</span></span> <span data-ttu-id="4146f-141">Bu hello runbook'u satır içi çağırma'den daha fazla iş sonuçlanır ve daha zor tootrack yapar.</span><span class="sxs-lookup"><span data-stu-id="4146f-141">This results in more jobs than invoking hello runbook inline and makes them more difficult tootrack.</span></span> <span data-ttu-id="4146f-142">Merhaba üst birden çok alt runbook için her toocomplete beklemeden zaman uyumsuz olarak başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-142">hello parent can start multiple child runbooks asynchronously without waiting for each toocomplete.</span></span> <span data-ttu-id="4146f-143">Merhaba alt runbook'ların satır içi olarak çağrıldığı Paralel yürütme türü için hello üst runbook toouse hello gerekir [parallel anahtar kelimesini](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="4146f-143">For that same kind of parallel execution calling hello child runbooks inline, hello parent runbook would need toouse hello [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="4146f-144">Bir cmdlet'le başlatılan bir alt runbook'un parametreleri açıklandığı gibi karma tablosu olarak sağlanır [Runbook parametreleri](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="4146f-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="4146f-145">Yalnızca basit veri türleri kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4146f-145">Only simple data types can be used.</span></span> <span data-ttu-id="4146f-146">Ardından Hello runbook karmaşık veri türüne sahip bir parametre varsa, satır içi çağrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4146f-146">If hello runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="4146f-147">Örnek</span><span class="sxs-lookup"><span data-stu-id="4146f-147">Example</span></span>
<span data-ttu-id="4146f-148">Merhaba aşağıdaki örnek bir alt runbook parametreleri ve ardından bekler hello başlangıç AzureRmAutomationRunbook kullanarak toocomplete başlar-parametre bekleyin.</span><span class="sxs-lookup"><span data-stu-id="4146f-148">hello following example starts a child runbook with parameters and then waits for it toocomplete using hello Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="4146f-149">Tamamlandığında, çıktısını hello alt runbook'tan toplanır.</span><span class="sxs-lookup"><span data-stu-id="4146f-149">Once completed, its output is collected from hello child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="4146f-150">Alt runbook çağırma yöntemlerinin karşılaştırılması</span><span class="sxs-lookup"><span data-stu-id="4146f-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="4146f-151">Merhaba aşağıdaki tabloda hello hello başka bir runbook'tan bir runbook'u çağırmak için iki yöntem arasındaki farklar özetlenmektedir.</span><span class="sxs-lookup"><span data-stu-id="4146f-151">hello following table summarizes hello differences between hello two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="4146f-152">Satır içi</span><span class="sxs-lookup"><span data-stu-id="4146f-152">Inline</span></span> | <span data-ttu-id="4146f-153">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="4146f-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="4146f-154">İş</span><span class="sxs-lookup"><span data-stu-id="4146f-154">Job</span></span> |<span data-ttu-id="4146f-155">Alt runbook'ları hello aynı hello üst öğe olarak işi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="4146f-155">Child runbooks run in hello same job as hello parent.</span></span> |<span data-ttu-id="4146f-156">Merhaba alt runbook için ayrı bir iş oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="4146f-156">A separate job is created for hello child runbook.</span></span> |
| <span data-ttu-id="4146f-157">Yürütme</span><span class="sxs-lookup"><span data-stu-id="4146f-157">Execution</span></span> |<span data-ttu-id="4146f-158">Üst runbook devam etmeden önce hello alt runbook toocomplete için bekler.</span><span class="sxs-lookup"><span data-stu-id="4146f-158">Parent runbook waits for hello child runbook toocomplete before continuing.</span></span> |<span data-ttu-id="4146f-159">Üst runbook alt runbook başlatıldıktan hemen sonra devam *veya* üst runbook hello alt iş toofinish için bekler.</span><span class="sxs-lookup"><span data-stu-id="4146f-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for hello child job toofinish.</span></span> |
| <span data-ttu-id="4146f-160">Çıktı</span><span class="sxs-lookup"><span data-stu-id="4146f-160">Output</span></span> |<span data-ttu-id="4146f-161">Üst runbook doğrudan alt runbook'tan çıkış alabilir.</span><span class="sxs-lookup"><span data-stu-id="4146f-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="4146f-162">Üst runbook alt runbook işinden çıkış almak gerekir *veya* üst runbook alt runbook'tan çıkış doğrudan alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="4146f-163">Parametreler</span><span class="sxs-lookup"><span data-stu-id="4146f-163">Parameters</span></span> |<span data-ttu-id="4146f-164">Merhaba alt runbook parametreleri için değerleri ayrı ayrı belirtilir ve herhangi bir veri türü kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4146f-164">Values for hello child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="4146f-165">Parametreleri tek bir karma tablosunda birleştirilmelidir ve yalnızca basit, içerebilir hello alt runbook için değerleri dizisi ve JSON serileştirmesi kullanan veri türleri nesne.</span><span class="sxs-lookup"><span data-stu-id="4146f-165">Values for hello child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="4146f-166">Otomasyon Hesabı</span><span class="sxs-lookup"><span data-stu-id="4146f-166">Automation Account</span></span> |<span data-ttu-id="4146f-167">Üst runbook alt runbook hello kullanma yalnızca aynı automation hesabı.</span><span class="sxs-lookup"><span data-stu-id="4146f-167">Parent runbook can only use child runbook in hello same automation account.</span></span> |<span data-ttu-id="4146f-168">Üst runbook alt runbook'tan herhangi bir Otomasyon hesabı hello gelen kullanabileceğiniz aynı Azure aboneliği ve bir bağlantı tooit varsa bile farklı bir abonelik.</span><span class="sxs-lookup"><span data-stu-id="4146f-168">Parent runbook can use child runbook from any automation account from hello same Azure subscription and even a different subscription if you have a connection tooit.</span></span> |
| <span data-ttu-id="4146f-169">Yayımlama</span><span class="sxs-lookup"><span data-stu-id="4146f-169">Publishing</span></span> |<span data-ttu-id="4146f-170">Üst runbook yayımlanmadan önce alt runbook yayımlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4146f-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="4146f-171">Üst runbook başlatılmadan önce dilediğiniz zaman alt runbook yayımlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4146f-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="4146f-172">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="4146f-172">Next steps</span></span>
* [<span data-ttu-id="4146f-173">Azure Otomasyonu runbook başlatma</span><span class="sxs-lookup"><span data-stu-id="4146f-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="4146f-174">Runbook çıkışı ve iletileri Azure Automation</span><span class="sxs-lookup"><span data-stu-id="4146f-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

