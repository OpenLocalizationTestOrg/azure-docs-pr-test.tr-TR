---
title: "Automation DSC sürekli dağıtım Chocolatey aaaAzure | Microsoft Docs"
description: "Azure Otomasyonu DSC ve Chocolatey Paket Yöneticisi'ni kullanarak sürekli dağıtım DevOps.  Örnek tam JSON ARM şablonu ve PowerShell kaynağı."
services: automation
documentationcenter: 
author: eslesar
manager: carmonm
editor: tysonn
ms.assetid: c0baa411-eb76-4f91-8d14-68f68b4805b6
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: na
ms.date: 10/29/2016
ms.author: golive
ms.openlocfilehash: 60af52af5f834fd48e3a0dc4677919397b53f0f4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="usage-example-continuous-deployment-toovirtual-machines-using-automation-dsc-and-chocolatey"></a><span data-ttu-id="33121-104">Kullanım örneği: Sürekli dağıtım tooVirtual Automation DSC ve Chocolatey kullanarak makineleri</span><span class="sxs-lookup"><span data-stu-id="33121-104">Usage Example: Continuous deployment tooVirtual Machines using Automation DSC and Chocolatey</span></span>
<span data-ttu-id="33121-105">Bir DevOps world hello sürekli tümleştirme ardışık düzendeki çeşitli noktalarıyla birçok araçları tooassist vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-105">In a DevOps world there are many tools tooassist with various points in hello Continuous Integration pipeline.</span></span>  <span data-ttu-id="33121-106">Azure Otomasyonu istenen durum yapılandırması (DSC) DevOps takımlar uygulayabileceğiniz bir Hoş Geldiniz yeni toplama toohello Seçenekleri ' dir.</span><span class="sxs-lookup"><span data-stu-id="33121-106">Azure Automation Desired State Configuration (DSC) is a welcome new addition toohello options that DevOps teams can employ.</span></span>  <span data-ttu-id="33121-107">Bu makalede, bir Windows bilgisayar için yukarı sürekli dağıtımı (CD) ayarı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="33121-107">This article demonstrates setting up Continuous Deployment (CD) for a Windows computer.</span></span>  <span data-ttu-id="33121-108">Merhaba teknik tooinclude hello rol (bir web sitesi, örneğin gibi) ve orada tooadditional gerektiği gibi kadar Windows bilgisayarları kolayca genişletebilirsiniz rolleri de.</span><span class="sxs-lookup"><span data-stu-id="33121-108">You can easily extend hello technique tooinclude as many Windows computers as necessary in hello role (a web site, for example), and from there tooadditional roles as well.</span></span>

![Iaas VM'ler için sürekli dağıtım](./media/automation-dsc-cd-chocolatey/cdforiaasvm.png)

## <a name="at-a-high-level"></a><span data-ttu-id="33121-110">Yüksek düzeyde</span><span class="sxs-lookup"><span data-stu-id="33121-110">At a high level</span></span>
<span data-ttu-id="33121-111">Buraya gelmeden oldukça bit yoktur, ancak iki ana süreçleriyle Neyse ayrılabilir:</span><span class="sxs-lookup"><span data-stu-id="33121-111">There is quite a bit going on here, but fortunately it can be broken into two main processes:</span></span> 

* <span data-ttu-id="33121-112">Kod yazma, test, oluşturma ve yayımlama hello sistem birincil ve ikincil sürümleri için yükleme paketleri.</span><span class="sxs-lookup"><span data-stu-id="33121-112">Writing code and testing it, then creating and publishing installation packages for major and minor versions of hello system.</span></span> 
* <span data-ttu-id="33121-113">Oluşturma ve yükleyecek ve hello paketlerinde hello kod yürütmek VM'ler yönetme.</span><span class="sxs-lookup"><span data-stu-id="33121-113">Creating and managing VMs that will install and execute hello code in hello packages.</span></span>  

<span data-ttu-id="33121-114">Her iki çekirdek işlem yerinde olduktan sonra yeni sürümler oluşturulan ve dağıtılan herhangi belirli VM üzerinde çalışan bir kısa adım tooautomatically güncelleştirme hello paketi değil.</span><span class="sxs-lookup"><span data-stu-id="33121-114">Once both of these core processes are in place, it’s a short step tooautomatically update hello package running on any particular VM as new versions are created and deployed.</span></span>

## <a name="component-overview"></a><span data-ttu-id="33121-115">Bileşenine genel bakış</span><span class="sxs-lookup"><span data-stu-id="33121-115">Component overview</span></span>
<span data-ttu-id="33121-116">Yöneticileri gibi paketini [get apt](https://en.wikipedia.org/wiki/Advanced_Packaging_Tool) Merhaba Linux dünya ancak değil çok hello Windows dünyada oldukça iyi bilinen sorunlardır.</span><span class="sxs-lookup"><span data-stu-id="33121-116">Package managers such as [apt-get](https://en.wikipedia.org/wiki/Advanced_Packaging_Tool) are pretty well known in hello Linux world, but not so much in hello Windows world.</span></span>  <span data-ttu-id="33121-117">[Chocolatey](https://chocolatey.org/) böyle bir şey ve Scott Hanselman'ın [blog](http://www.hanselman.com/blog/IsTheWindowsUserReadyForAptget.aspx) hello üzerinde harika bir giriş konudur.</span><span class="sxs-lookup"><span data-stu-id="33121-117">[Chocolatey](https://chocolatey.org/) is such a thing, and Scott Hanselman’s [blog](http://www.hanselman.com/blog/IsTheWindowsUserReadyForAptget.aspx) on hello topic is a great intro.</span></span>  <span data-ttu-id="33121-118">Buna koysalar Chocolatey paketlerin merkezi bir depodan tooinstall paketler hello komut satırını kullanarak bir Windows sistemine sağlar.</span><span class="sxs-lookup"><span data-stu-id="33121-118">In a nutshell, Chocolatey allows you tooinstall packages from a central repository of packages into a Windows system using hello command line.</span></span>  <span data-ttu-id="33121-119">Oluşturma ve kendi depo yönetme ve Chocolatey belirttiğiniz depoları arasında herhangi bir sayı paketleri yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33121-119">You can create and manage your own repository, and Chocolatey can install packages from any number of repositories that you designate.</span></span>

<span data-ttu-id="33121-120">İstenen durum Yapılandırması'nı (DSC) ([genel bakış](https://technet.microsoft.com/library/dn249912.aspx)) için bir makine istediğiniz toodeclare hello yapılandırma sağlayan bir PowerShell aracıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-120">Desired State Configuration (DSC) ([overview](https://technet.microsoft.com/library/dn249912.aspx)) is a PowerShell tool that allows you toodeclare hello configuration that you want for a machine.</span></span>  <span data-ttu-id="33121-121">Örneğin, sizin deyin, "yüklü Chocolatey istediğiniz IIS'in yüklenmesini istediğiniz, açılan bağlantı noktası 80 istediğiniz, yüklü sürümü 1.0.0 sitemde istiyorum."</span><span class="sxs-lookup"><span data-stu-id="33121-121">For example, you can say, “I want Chocolatey installed, I want IIS installed, I want port 80 opened, I want version 1.0.0 of my website installed.”</span></span>  <span data-ttu-id="33121-122">Merhaba DSC Local Configuration Manager, bu yapılandırma (LCM'yi) uygular.</span><span class="sxs-lookup"><span data-stu-id="33121-122">hello DSC Local Configuration Manager (LCM) implements that configuration.</span></span> <span data-ttu-id="33121-123">Bir DSC çekme sunucusuna bir depo makinelerinizi için yapılandırmaların tutar.</span><span class="sxs-lookup"><span data-stu-id="33121-123">A DSC Pull Server holds a repository of configurations for your machines.</span></span> <span data-ttu-id="33121-124">Merhaba LCM'yi her makinede hello depolanan yapılandırma yapılandırmasıyla eşleşen düzenli aralıklarla toosee içinde denetler.</span><span class="sxs-lookup"><span data-stu-id="33121-124">hello LCM on each machine checks in periodically toosee if its configuration matches hello stored configuration.</span></span> <span data-ttu-id="33121-125">Bu durum raporu ya da hello saklı yapılandırmasıyla hizalama uygulamasına geri toobring hello makine dener.</span><span class="sxs-lookup"><span data-stu-id="33121-125">It can either report status or attempt toobring hello machine back into alignment with hello stored configuration.</span></span> <span data-ttu-id="33121-126">Merhaba depolanan yapılandırma hello çekme sunucu toocause bir makine veya makineler toocome kümesi hizalama içine değiştirilen hello yapılandırmasıyla düzenleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33121-126">You can edit hello stored configuration on hello pull server toocause a machine or set of machines toocome into alignment with hello changed configuration.</span></span>

<span data-ttu-id="33121-127">Azure Otomasyonu runbook'ları, düğümler, kimlik bilgilerini, kaynakları ve zamanlamaları ve genel değişkenler gibi varlıklar kullanarak çeşitli görevleri tooautomate sağlayan Microsoft Azure içinde yönetilen bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="33121-127">Azure Automation is a managed service in Microsoft Azure that allows you tooautomate various tasks using runbooks, nodes, credentials, resources and assets such as schedules and global variables.</span></span> <span data-ttu-id="33121-128">Azure Otomasyonu DSC bu Otomasyon yetenek tooinclude PowerShell DSC araçları genişletir.</span><span class="sxs-lookup"><span data-stu-id="33121-128">Azure Automation DSC extends this automation capability tooinclude PowerShell DSC tools.</span></span>  <span data-ttu-id="33121-129">Mükemmel işte [genel bakış](automation-dsc-overview.md).</span><span class="sxs-lookup"><span data-stu-id="33121-129">Here’s a great [overview](automation-dsc-overview.md).</span></span>

<span data-ttu-id="33121-130">DSC kaynağı olan ağ, Active Directory ya da SQL Server yönetme gibi belirli özelliklerine kod bir modüldür.</span><span class="sxs-lookup"><span data-stu-id="33121-130">A DSC Resource is a module of code that has specific capabilities, such as managing networking, Active Directory, or SQL Server.</span></span>  <span data-ttu-id="33121-131">Merhaba Chocolatey DSC kaynağı nasıl tooaccess (Diğerlerinin yanında), NuGet sunucu paketlerini indirmek, paketleri yüklemek ve benzeri bilir.</span><span class="sxs-lookup"><span data-stu-id="33121-131">hello Chocolatey DSC Resource knows how tooaccess a NuGet Server (among others), download packages, install packages, and so on.</span></span>  <span data-ttu-id="33121-132">Hello diğer birçok DSC kaynakları olan [PowerShell Galerisi](http://www.powershellgallery.com/packages?q=dsc+resources&prerelease=&sortOrder=package-title).</span><span class="sxs-lookup"><span data-stu-id="33121-132">There are many other DSC Resources in hello [PowerShell Gallery](http://www.powershellgallery.com/packages?q=dsc+resources&prerelease=&sortOrder=package-title).</span></span>  <span data-ttu-id="33121-133">Bu modüller, Azure Automation DSC çekme Sunucusu'na (sizin tarafınızdan) yüklü olan yapılandırmalarınızı tarafından kullanılabilmesi için.</span><span class="sxs-lookup"><span data-stu-id="33121-133">These modules are installed into your Azure Automation DSC Pull Server (by you) so they can be used by your configurations.</span></span>

<span data-ttu-id="33121-134">Resource Manager şablonları altyapınızı - ağları, alt ağlar, ağ güvenliği gibi şeyleri oluşturmanın bildirim temelli bir yolunu sağlar ve yönlendirme, yük Dengeleyiciler, NIC'ler, VM'ler ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="33121-134">Resource Manager templates provide a declarative way of generating your infrastructure - things like networks, subnets, network security and routing, load balancers, NICs, VMs, and so on.</span></span>  <span data-ttu-id="33121-135">Burada bir [makale](../azure-resource-manager/resource-manager-deployment-model.md) karşılaştırır hello Azure Hizmet Yönetimi (ASM veya Klasik) ile Resource Manager dağıtım modeli (tanımlayıcı) hello dağıtım modeli (kesinliği) ve hello çekirdek kaynak anlatılmaktadır sağlayıcıları, işlem, depolama ve ağ.</span><span class="sxs-lookup"><span data-stu-id="33121-135">Here’s an [article](../azure-resource-manager/resource-manager-deployment-model.md) that compares hello Resource Manager deployment model (declarative) with hello Azure Service Management (ASM, or classic) deployment model (imperative), and discusses hello core resource providers, compute, storage and network.</span></span>

<span data-ttu-id="33121-136">Bir Resource Manager şablonu bir anahtar özellik sağlandığından kendi yeteneği tooinstall VM uzantısı hello VM içine aynıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-136">One key feature of an Resource Manager template is its ability tooinstall a VM extension into hello VM as it’s provisioned.</span></span>  <span data-ttu-id="33121-137">VM uzantısı özel bir komut dosyası, virüsten koruma yazılımı yükleme veya bir DSC yapılandırma betiği çalıştırmasını gibi belirli özellikleri vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-137">A VM extension has specific capabilities such as running a custom script, installing anti-virus software, or running a DSC configuration script.</span></span>  <span data-ttu-id="33121-138">Diğer türlerde VM uzantıları vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-138">There are many other types of VM extensions.</span></span>

## <a name="quick-trip-around-hello-diagram"></a><span data-ttu-id="33121-139">Hızlı seyahat geçici hello diyagramı</span><span class="sxs-lookup"><span data-stu-id="33121-139">Quick trip around hello diagram</span></span>
<span data-ttu-id="33121-140">Merhaba üstten başlayarak, kodunuz yazma derleme, test ve sonra bir yükleme paketi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="33121-140">Starting at hello top, you write your code, build and test, then create an installation package.</span></span>  <span data-ttu-id="33121-141">Chocolatey yükleme paketleri, MSI, MSU, posta gibi çeşitli türlerde işleyebilir.</span><span class="sxs-lookup"><span data-stu-id="33121-141">Chocolatey can handle various types of installation packages, such as MSI, MSU, ZIP.</span></span>  <span data-ttu-id="33121-142">Ve Chocolatey'nın yerel yetenekleri oldukça tooit yoksa PowerShell toodo hello gerçek yükleme hello gücünü vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-142">And you have hello full power of PowerShell toodo hello actual installation if Chocolatey’s native capabilities aren’t quite up tooit.</span></span>  <span data-ttu-id="33121-143">Merhaba paket nedenini bildirmeden bir yerde ulaşılabilir – bir paket deposu yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="33121-143">Put hello package into someplace reachable – a package repository.</span></span>  <span data-ttu-id="33121-144">Bu kullanım örnek bir Azure blob storage hesabı ortak bir klasörde kullanır, ancak herhangi bir yere olabilir.</span><span class="sxs-lookup"><span data-stu-id="33121-144">This usage example uses a public folder in an Azure blob storage account, but it can be anywhere.</span></span>  <span data-ttu-id="33121-145">Chocolatey yerel NuGet sunucularını ve birkaç diğerleri paket meta verileri yönetimi için birlikte çalışır.</span><span class="sxs-lookup"><span data-stu-id="33121-145">Chocolatey works natively with NuGet servers and a few others for management of package metadata.</span></span>  <span data-ttu-id="33121-146">[Bu makalede](https://github.com/chocolatey/choco/wiki/How-To-Host-Feed) hello seçenekleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="33121-146">[This article](https://github.com/chocolatey/choco/wiki/How-To-Host-Feed) describes hello options.</span></span>  <span data-ttu-id="33121-147">Bu kullanım örneği NuGet kullanır.</span><span class="sxs-lookup"><span data-stu-id="33121-147">This usage example uses NuGet.</span></span>  <span data-ttu-id="33121-148">Bir Nuspec paketlerinizi hakkındaki meta verileri ' dir.</span><span class="sxs-lookup"><span data-stu-id="33121-148">A Nuspec is metadata about your packages.</span></span>  <span data-ttu-id="33121-149">Merhaba Nuspec'ın "NuPkg ait derlenmiş" ve bir NuGet Server'da depolanır.</span><span class="sxs-lookup"><span data-stu-id="33121-149">hello Nuspec’s are “compiled” into NuPkg’s and stored in a NuGet server.</span></span>  <span data-ttu-id="33121-150">Yapılandırmanıza bir paket adıyla ister ve NuGet sunucusuna başvuran hello Chocolatey DSC kaynağı (şimdi üzerinde hello VM) hello paket alan ve sizin yerinize yükler.</span><span class="sxs-lookup"><span data-stu-id="33121-150">When your configuration requests a package by name, and references a NuGet server, hello Chocolatey DSC Resource (now on hello VM) grabs hello package and installs it for you.</span></span>  <span data-ttu-id="33121-151">Ayrıca, belirli bir paket sürümü isteyebilir.</span><span class="sxs-lookup"><span data-stu-id="33121-151">You can also request a specific version of a package.</span></span>

<span data-ttu-id="33121-152">Merhaba alt sol bölümünde hello resim, bir Azure Resource Manager (ARM) şablonu yoktur.</span><span class="sxs-lookup"><span data-stu-id="33121-152">In hello bottom left portion of hello picture, there is an Azure Resource Manager (ARM) template.</span></span>  <span data-ttu-id="33121-153">Bu kullanım örnekte hello VM uzantısı hello VM hello Azure Otomasyonu DSC istek sunucusuyla (diğer bir deyişle, bir çekme sunucu) ile bir düğüm olarak kaydeder.</span><span class="sxs-lookup"><span data-stu-id="33121-153">In this usage example, hello VM extension registers hello VM with hello Azure Automation DSC Pull Server (that is, a pull server) as a Node.</span></span>  <span data-ttu-id="33121-154">Merhaba yapılandırma hello çekme sunucusunda depolanır.</span><span class="sxs-lookup"><span data-stu-id="33121-154">hello configuration is stored in hello pull server.</span></span>  <span data-ttu-id="33121-155">Aslında, iki kez depolandıktan: düz metin olarak ve (için olanlar gibi şeyler hakkında bilmeniz.) bir MOF dosyası olarak derlenmiş sonra bir kez  Merhaba Portalı'nda hello MOF bir "düğümü" (karşılıklı toosimply "yapılandırma") yapılandırmadır.</span><span class="sxs-lookup"><span data-stu-id="33121-155">Actually, it’s stored twice: once as plain text and once compiled as an MOF file (for those that know about such things.)  In hello portal, hello MOF is a “node configuration” (as opposed toosimply “configuration”).</span></span>  <span data-ttu-id="33121-156">Merhaba düğüm yapılandırmasını bilir, böylece bir düğümle ilişkili onun hello yapı.</span><span class="sxs-lookup"><span data-stu-id="33121-156">It’s hello artifact that’s associated with a Node so hello node will know its configuration.</span></span>  <span data-ttu-id="33121-157">Ayrıntılar aşağıdaki nasıl tooassign hello düğüm yapılandırması toohello düğümünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="33121-157">Details below show how tooassign hello node configuration toohello node.</span></span>

<span data-ttu-id="33121-158">Büyük olasılıkla zaten hello bit hello üstünde veya çoğuna yaptığınız.</span><span class="sxs-lookup"><span data-stu-id="33121-158">Presumably you’re already doing hello bit at hello top, or most of it.</span></span>  <span data-ttu-id="33121-159">Merhaba nuspec oluşturma, derleme ve bir NuGet Server'da depolama küçük bir şeydir.</span><span class="sxs-lookup"><span data-stu-id="33121-159">Creating hello nuspec, compiling and storing it in a NuGet server is a small thing.</span></span>  <span data-ttu-id="33121-160">Ve sanal makineleri zaten yönetme.</span><span class="sxs-lookup"><span data-stu-id="33121-160">And you’re already managing VMs.</span></span>  <span data-ttu-id="33121-161">Hello sonraki adım toocontinuous dağıtım alma (bir kez) hello çekme sunucusu kurma, düğümleriniz Bununla (bir kez), kaydetme ve oluşturma ve başlangıç yapılandırması (başlangıçta) depolama gerektirir.</span><span class="sxs-lookup"><span data-stu-id="33121-161">Taking hello next step toocontinuous deployment requires setting up hello pull server (once), registering your nodes with it (once), and creating and storing hello configuration there (initially).</span></span>  <span data-ttu-id="33121-162">Daha sonra paketleri yükseltilir ve toohello depo dağıtılan hello yapılandırma ve düğüm yapılandırması hello çekme sunucusunda (gerektiği şekilde yineleyin) yenileyin.</span><span class="sxs-lookup"><span data-stu-id="33121-162">Then as packages are upgraded and deployed toohello repository, refresh hello Configuration and Node Configuration in hello pull server (repeat as needed).</span></span>

<span data-ttu-id="33121-163">ARM şablonu ile başlatıyorsanız değil, bu da normaldir.</span><span class="sxs-lookup"><span data-stu-id="33121-163">If you’re not starting with an ARM template, that’s also OK.</span></span>  <span data-ttu-id="33121-164">PowerShell cmdlet'leri tasarlanmış toohelp hello çekme server ve tüm hello rest, Vm'leri kaydetme vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-164">There are PowerShell cmdlets designed toohelp you register your VMs with hello pull server and all of hello rest.</span></span> <span data-ttu-id="33121-165">Bu makalede daha fazla ayrıntı için bkz: [Azure Otomasyonu DSC tarafından Yönetim için hazırlama makineler](automation-dsc-onboarding.md)</span><span class="sxs-lookup"><span data-stu-id="33121-165">For more details, see this article: [Onboarding machines for management by Azure Automation DSC](automation-dsc-onboarding.md)</span></span>

## <a name="step-1-setting-up-hello-pull-server-and-automation-account"></a><span data-ttu-id="33121-166">1. adım: Hello çekme sunucusuna ve Otomasyon hesabı ayarlama</span><span class="sxs-lookup"><span data-stu-id="33121-166">Step 1: Setting up hello pull server and automation account</span></span>
<span data-ttu-id="33121-167">Bir kimliği doğrulanmış (Add-AzureRmAccount) PowerShell komut satırında: (Merhaba çekme sunucu ayarlanması birkaç dakika sürebilir)</span><span class="sxs-lookup"><span data-stu-id="33121-167">At an authenticated (Add-AzureRmAccount) PowerShell command line:  (can take a few minutes while hello pull server is set up)</span></span>

    New-AzureRmResourceGroup –Name MY-AUTOMATION-RG –Location MY-RG-LOCATION-IN-QUOTES
    New-AzureRmAutomationAccount –ResourceGroupName MY-AUTOMATION-RG –Location MY-RG-LOCATION-IN-QUOTES –Name MY-AUTOMATION-ACCOUNT 

<span data-ttu-id="33121-168">Otomasyon hesabınızı bölgeler (diğer adıyla konum) aşağıdaki hello hiçbirine koyabilirsiniz: Doğu ABD 2, Orta Güney ABD, BİZE kamu Virginia, Batı Avrupa, Güneydoğu Asya, Japonya Doğu, Orta Hindistan ve Avustralya Güneydoğu, Orta Kanada Kuzey Avrupa.</span><span class="sxs-lookup"><span data-stu-id="33121-168">You can put your automation account into any of hello following regions (aka location):  East US 2, South Central US, US Gov Virginia, West Europe, Southeast Asia, Japan East, Central India and Australia Southeast, Canada Central, North Europe.</span></span>

## <a name="step-2-vm-extension-tweaks-toohello-arm-template"></a><span data-ttu-id="33121-169">2. adım: VM uzantısı tweaks toohello ARM şablonu</span><span class="sxs-lookup"><span data-stu-id="33121-169">Step 2: VM extension tweaks toohello ARM template</span></span>
<span data-ttu-id="33121-170">Bu konuda sağlanan (Merhaba PowerShell DSC VM uzantısı kullanılarak) VM kaydı ayrıntılarını [Azure Hızlı Başlangıç şablonu](https://github.com/Azure/azure-quickstart-templates/tree/master/dsc-extension-azure-automation-pullserver).</span><span class="sxs-lookup"><span data-stu-id="33121-170">Details for VM registration (using hello PowerShell DSC VM extension) provided in this [Azure Quickstart Template](https://github.com/Azure/azure-quickstart-templates/tree/master/dsc-extension-azure-automation-pullserver).</span></span>  <span data-ttu-id="33121-171">Bu adım, yeni VM DSC düğümleri hello listesinde hello çekme sunucusuyla kaydeder.</span><span class="sxs-lookup"><span data-stu-id="33121-171">This step registers your new VM with hello pull server in hello list of DSC Nodes.</span></span>  <span data-ttu-id="33121-172">Bu kayıt parçası hello düğümü yapılandırma uygulanan toobe toohello düğümü belirtme.</span><span class="sxs-lookup"><span data-stu-id="33121-172">Part of this registration is specifying hello node configuration toobe applied toohello node.</span></span>  <span data-ttu-id="33121-173">Bu düğüm yapılandırması tooexist bu ilk kez Merhaba burada yapılır adım 4. Tamam olacak şekilde hello çekme sunucusunda, henüz yok.</span><span class="sxs-lookup"><span data-stu-id="33121-173">This node configuration doesn't have tooexist yet in hello pull server, so it's OK that Step 4 is where this is done for hello first time.</span></span>  <span data-ttu-id="33121-174">Ancak burada 2. adımda toohave kampanyanızın hello hello düğümün adını ve hello yapılandırmasının hello adı gerekir.</span><span class="sxs-lookup"><span data-stu-id="33121-174">But here in Step 2 you do need toohave decided hello name of hello node and hello name of hello configuration.</span></span>  <span data-ttu-id="33121-175">Bu kullanım örnekte hello düğümdür 'isvbox' ve 'ISVBoxConfig' hello yapılandırmadır.</span><span class="sxs-lookup"><span data-stu-id="33121-175">In this usage example, hello node is 'isvbox' and hello configuration is 'ISVBoxConfig'.</span></span>  <span data-ttu-id="33121-176">Bu nedenle hello düğüm yapılandırması (toobe DeploymentTemplate.json içinde belirtilen) 'ISVBoxConfig.isvbox' adıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-176">So hello node configuration name (toobe specified in DeploymentTemplate.json) is 'ISVBoxConfig.isvbox'.</span></span>  

## <a name="step-3-adding-required-dsc-resources-toohello-pull-server"></a><span data-ttu-id="33121-177">3. adım: gerekli DSC kaynakları toohello çekme sunucu ekleme</span><span class="sxs-lookup"><span data-stu-id="33121-177">Step 3: Adding required DSC resources toohello pull server</span></span>
<span data-ttu-id="33121-178">Merhaba PowerShell Galerisi Araçlı tooinstall DSC kaynakları Azure Otomasyon hesabınızda ' dir.</span><span class="sxs-lookup"><span data-stu-id="33121-178">hello PowerShell Gallery is instrumented tooinstall DSC resources into your Azure Automation account.</span></span>  <span data-ttu-id="33121-179">İstediğiniz ve hello "Dağıtma tooAzure Otomasyon" düğmesini tıklatın toohello kaynak gidin.</span><span class="sxs-lookup"><span data-stu-id="33121-179">Navigate toohello resource you want and click hello “Deploy tooAzure Automation” button.</span></span>

![PowerShell Galerisi örneği](./media/automation-dsc-cd-chocolatey/xNetworking.PNG)

<span data-ttu-id="33121-181">Başka bir teknik toohello Azure portalı, yeni modüller veya güncelleştirme mevcut modüllerde toopull sağlar eklenen son.</span><span class="sxs-lookup"><span data-stu-id="33121-181">Another technique recently added toohello Azure Portal allows you toopull in new modules or update existing modules.</span></span> <span data-ttu-id="33121-182">Hello Otomasyon hesabı kaynak, hello varlıklar döşeme ve hello modülleri döşeme son tıklatın.</span><span class="sxs-lookup"><span data-stu-id="33121-182">Click through hello Automation Account resource, hello Assets tile, and finally hello Modules tile.</span></span>  <span data-ttu-id="33121-183">Hello Gözat galeri simgesi toosee hello hello galerisinde modüllerin listesini sağlar, ayrıntılı bilgiler detaya ve sonuçta Otomasyon hesabınızda içeri aktarın.</span><span class="sxs-lookup"><span data-stu-id="33121-183">hello Browse Gallery icon allows you toosee hello list of modules in hello gallery, drill down into details and ultimately import into your Automation Account.</span></span> <span data-ttu-id="33121-184">Bu harika yolu tookeep modüllerinizi toodate zaman tootime gelen yukarı olduğu.</span><span class="sxs-lookup"><span data-stu-id="33121-184">This is a great way tookeep your modules up toodate from time tootime.</span></span> <span data-ttu-id="33121-185">Ve hiçbir şey eşitlenmemiş alır diğer modüller tooensure bağımlılıklarla hello içeri aktarma özelliğini denetler.</span><span class="sxs-lookup"><span data-stu-id="33121-185">And, hello import feature checks dependencies with other modules tooensure nothing gets out of sync.</span></span>

<span data-ttu-id="33121-186">Ya da hello el ile yaklaşım vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-186">Or, there’s hello manual approach.</span></span>  <span data-ttu-id="33121-187">bir Windows bilgisayar için bir PowerShell tümleştirme modülü Hello klasör yapısını hello Azure Automation tarafından beklenen hello klasör yapısı biraz farklıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-187">hello folder structure of a PowerShell Integration Module for a Windows computer is a little different from hello folder structure expected by hello Azure Automation.</span></span>  <span data-ttu-id="33121-188">Bu, küçük bir bölümü'uyguladıkça gerektirir.</span><span class="sxs-lookup"><span data-stu-id="33121-188">This requires a little tweaking on your part.</span></span>  <span data-ttu-id="33121-189">Ancak sabit değildir ve kaynak başına yalnızca bir kez gerçekleştirilir (tooupgrade istemediğiniz sürece, gelecekte.)  Bu makalede PowerShell tümleştirme modülleri yazma hakkında daha fazla bilgi için bkz: [için Azure Automation tümleştirme modülleri yazma](https://azure.microsoft.com/blog/authoring-integration-modules-for-azure-automation/)</span><span class="sxs-lookup"><span data-stu-id="33121-189">But it’s not hard, and it’s done only once per resource (unless you want tooupgrade it in future.)  For more information on authoring PowerShell Integration Modules, see this article: [Authoring Integration Modules for Azure Automation](https://azure.microsoft.com/blog/authoring-integration-modules-for-azure-automation/)</span></span>

* <span data-ttu-id="33121-190">İş istasyonunuza, aşağıdaki gibi gereken hello modülünü yükleyin:</span><span class="sxs-lookup"><span data-stu-id="33121-190">Install hello module that you need on your workstation, as follows:</span></span>
  * <span data-ttu-id="33121-191">Yükleme [Windows Management Framework v5](http://aka.ms/wmf5latest) (Windows 10 için gerekli değildir)</span><span class="sxs-lookup"><span data-stu-id="33121-191">Install [Windows Management Framework, v5](http://aka.ms/wmf5latest) (not needed for Windows 10)</span></span>
  * <span data-ttu-id="33121-192">`Install-Module –Name MODULE-NAME`< — alan hello hello PowerShell Galerisi Modülü</span><span class="sxs-lookup"><span data-stu-id="33121-192">`Install-Module –Name MODULE-NAME`    <—grabs hello module from hello PowerShell Gallery</span></span> 
* <span data-ttu-id="33121-193">Kopya hello modülü klasöründen `c:\Program Files\WindowsPowerShell\Modules\MODULE-NAME` tooa geçici klasörü</span><span class="sxs-lookup"><span data-stu-id="33121-193">Copy hello module folder from `c:\Program Files\WindowsPowerShell\Modules\MODULE-NAME` tooa temp folder</span></span> 
* <span data-ttu-id="33121-194">Örnekler ve belgeler hello ana klasöründen silin</span><span class="sxs-lookup"><span data-stu-id="33121-194">Delete samples and documentation from hello main folder</span></span> 
* <span data-ttu-id="33121-195">Zip hello ana klasörü, tam olarak hello ZIP dosyası adlandırma hello aynı hello klasörü olarak</span><span class="sxs-lookup"><span data-stu-id="33121-195">Zip hello main folder, naming hello ZIP file exactly hello same as hello folder</span></span> 
* <span data-ttu-id="33121-196">Merhaba ZIP dosyası Azure depolama hesabında blob depolama gibi erişilebilir bir HTTP konuma yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="33121-196">Put hello ZIP file into a reachable HTTP location, such as blob storage in an Azure Storage Account.</span></span>
* <span data-ttu-id="33121-197">Bu PowerShell çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="33121-197">Run this PowerShell:</span></span>
  
      New-AzureRmAutomationModule `
          -ResourceGroupName MY-AUTOMATION-RG -AutomationAccountName MY-AUTOMATION-ACCOUNT `
          -Name MODULE-NAME –ContentLink "https://STORAGE-URI/CONTAINERNAME/MODULE-NAME.zip"

<span data-ttu-id="33121-198">Merhaba dahil örnek cChoco ve xNetworking için aşağıdaki adımları gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="33121-198">hello included example performs these steps for cChoco and xNetworking.</span></span> <span data-ttu-id="33121-199">Merhaba bkz [notları](#notes) cChoco için özel işleme.</span><span class="sxs-lookup"><span data-stu-id="33121-199">See hello [Notes](#notes) for special handling for cChoco.</span></span>

## <a name="step-4-adding-hello-node-configuration-toohello-pull-server"></a><span data-ttu-id="33121-200">4. adım: hello düğümü yapılandırma toohello çekme sunucusu ekleme</span><span class="sxs-lookup"><span data-stu-id="33121-200">Step 4: Adding hello node configuration toohello pull server</span></span>
<span data-ttu-id="33121-201">Hiçbir şey yoktur hello hakkında özel ilk kez yapılandırmanızı hello çekme sunucusuna ve derleme alma.</span><span class="sxs-lookup"><span data-stu-id="33121-201">There’s nothing special about hello first time you import your configuration into hello pull server and compile.</span></span>  <span data-ttu-id="33121-202">Tüm sonraki alma/derlerken Merhaba aynı yapılandırma görünüm tam olarak hello aynı.</span><span class="sxs-lookup"><span data-stu-id="33121-202">All subsequent import/compiles of hello same configuration look exactly hello same.</span></span>  <span data-ttu-id="33121-203">Paketinizi güncelleştirin ve tooproduction çıkışı, bu adımı hello yapılandırma dosyası olduktan sonra bunu toopush gereken her zaman doğru – hello dahil olmak üzere paketinin yeni sürümü.</span><span class="sxs-lookup"><span data-stu-id="33121-203">Each time you update your package and need toopush it out tooproduction you do this step after ensuring hello configuration file is correct – including hello new version of your package.</span></span>  <span data-ttu-id="33121-204">Merhaba yapılandırma dosyası ve PowerShell şöyledir:</span><span class="sxs-lookup"><span data-stu-id="33121-204">Here’s hello configuration file and PowerShell:</span></span>

<span data-ttu-id="33121-205">ISVBoxConfig.ps1:</span><span class="sxs-lookup"><span data-stu-id="33121-205">ISVBoxConfig.ps1:</span></span>

    Configuration ISVBoxConfig 
    { 
        Import-DscResource -ModuleName cChoco 
        Import-DscResource -ModuleName xNetworking

        Node "isvbox" {   

            cChocoInstaller installChoco 
            { 
                InstallDir = "C:\choco" 
            }

            WindowsFeature installIIS 
            { 
                Ensure="Present" 
                Name="Web-Server" 
            }

            xFirewall WebFirewallRule 
            { 
                Direction = "Inbound" 
                Name = "Web-Server-TCP-In" 
                DisplayName = "Web Server (TCP-In)" 
                Description = "IIS allow incoming web site traffic." 
                DisplayGroup = "IIS Incoming Traffic" 
                State = "Enabled" 
                Access = "Allow" 
                Protocol = "TCP" 
                LocalPort = "80" 
                Ensure = "Present" 
            }

            cChocoPackageInstaller trivialWeb 
            {            
                Name = "trivialweb" 
                Version = "1.0.0" 
                Source = “MY-NUGET-V2-SERVER-ADDRESS” 
                DependsOn = "[cChocoInstaller]installChoco", 
                "[WindowsFeature]installIIS" 
            } 
        }    
    }

<span data-ttu-id="33121-206">Yeni-ConfigurationScript.ps1:</span><span class="sxs-lookup"><span data-stu-id="33121-206">New-ConfigurationScript.ps1:</span></span>

    Import-AzureRmAutomationDscConfiguration ` 
        -ResourceGroupName MY-AUTOMATION-RG –AutomationAccountName MY-AUTOMATION-ACCOUNT ` 
        -SourcePath C:\temp\AzureAutomationDsc\ISVBoxConfig.ps1 ` 
        -Published –Force

    $jobData = Start-AzureRmAutomationDscCompilationJob ` 
        -ResourceGroupName MY-AUTOMATION-RG –AutomationAccountName MY-AUTOMATION-ACCOUNT ` 
        -ConfigurationName ISVBoxConfig 

    $compilationJobId = $jobData.Id

    Get-AzureRmAutomationDscCompilationJob ` 
        -ResourceGroupName MY-AUTOMATION-RG –AutomationAccountName MY-AUTOMATION-ACCOUNT ` 
        -Id $compilationJobId

<span data-ttu-id="33121-207">Yeni bir düğüm yapılandırması bu adımları neden "Merhaba çekme sunucusuna yerleştirilen ISVBoxConfig.isvbox" adlı.</span><span class="sxs-lookup"><span data-stu-id="33121-207">These steps result in a new node configuration named “ISVBoxConfig.isvbox” being placed on hello pull server.</span></span>  <span data-ttu-id="33121-208">Merhaba düğüm yapılandırması adı "configurationName.nodeName" oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="33121-208">hello node configuration name is built as “configurationName.nodeName”.</span></span>

## <a name="step-5-creating-and-maintaining-package-metadata"></a><span data-ttu-id="33121-209">5. adım: Oluşturma ve paket meta verileri koruma</span><span class="sxs-lookup"><span data-stu-id="33121-209">Step 5: Creating and maintaining package metadata</span></span>
<span data-ttu-id="33121-210">Merhaba paket depoya yerleştirdiğiniz her paket için açıklayan bir nuspec gerekir.</span><span class="sxs-lookup"><span data-stu-id="33121-210">For each package that you put into hello package repository, you need a nuspec that describes it.</span></span>  <span data-ttu-id="33121-211">Bu nuspec derlenmiş ve NuGet sunucunuz depolanır.</span><span class="sxs-lookup"><span data-stu-id="33121-211">That nuspec must be compiled and stored in your NuGet server.</span></span> <span data-ttu-id="33121-212">Bu işlem açıklanan [burada](http://docs.nuget.org/create/creating-and-publishing-a-package).</span><span class="sxs-lookup"><span data-stu-id="33121-212">This process is described [here](http://docs.nuget.org/create/creating-and-publishing-a-package).</span></span>  <span data-ttu-id="33121-213">Bir NuGet sunucusu olarak MyGet.org kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33121-213">You can use MyGet.org as a NuGet server.</span></span>  <span data-ttu-id="33121-214">Bu hizmet satmak, ancak Başlatıcı ücretsizdir SKU'su vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-214">They sell this service, but have a starter SKU that’s free.</span></span>  <span data-ttu-id="33121-215">NuGet.org özel paketlerinizi için kendi NuGet sunucusu yükleme hakkında yönergeler bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33121-215">At NuGet.org you’ll find instructions on installing your own NuGet server for your private packages.</span></span>

## <a name="step-6-tying-it-all-together"></a><span data-ttu-id="33121-216">6. adım: hepsini bir araya getirmeye kadar</span><span class="sxs-lookup"><span data-stu-id="33121-216">Step 6: Tying it all together</span></span>
<span data-ttu-id="33121-217">Sürüm QA geçirir ve onaylandıktan dağıtımı için hello paket oluşturuldu, her nuspec ve nupkg güncelleştirildi ve toohello NuGet sunucu dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="33121-217">Each time a version passes QA and is approved for deployment, hello package is created, nuspec and nupkg updated and deployed toohello NuGet server.</span></span>  <span data-ttu-id="33121-218">Ayrıca, başlangıç yapılandırması (yukarıdaki adım 4) güncelleştirilmiş tooagree hello yeni sürüm numarasına sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-218">In addition, hello configuration (Step 4 above) must be updated tooagree with hello new version number.</span></span>  <span data-ttu-id="33121-219">Toohello çekme sunucusuna gönderilen ve derlenmiş gerekir.</span><span class="sxs-lookup"><span data-stu-id="33121-219">It must be sent toohello pull server and compiled.</span></span>  <span data-ttu-id="33121-220">Bu noktadan itibaren bu yapılandırma toopull hello güncelleştirmesi bağlıdır ve yüklemeniz toohello VM'ler olduğu.</span><span class="sxs-lookup"><span data-stu-id="33121-220">From that point on, it's up toohello VMs that depend on that configuration toopull hello update and install it.</span></span>  <span data-ttu-id="33121-221">Bu güncelleştirmelerden her birini basit - yalnızca bir çizgi veya iki PowerShell.</span><span class="sxs-lookup"><span data-stu-id="33121-221">Each of these updates are simple - just a line or two of PowerShell.</span></span>  <span data-ttu-id="33121-222">Visual Studio Team Services Hello durumda bazıları bir yapı içinde birbirine zincirlenebilir derleme görevleri içinde kapsüllenir.</span><span class="sxs-lookup"><span data-stu-id="33121-222">In hello case of Visual Studio Team Services, some of them are encapsulated in build tasks that can be chained together in a build.</span></span>  <span data-ttu-id="33121-223">Bu [makale](https://www.visualstudio.com/en-us/docs/alm-devops-feature-index#continuous-delivery) daha fazla ayrıntı sağlar.</span><span class="sxs-lookup"><span data-stu-id="33121-223">This [article](https://www.visualstudio.com/en-us/docs/alm-devops-feature-index#continuous-delivery) provides more details.</span></span>  <span data-ttu-id="33121-224">Bu [GitHub deposuna](https://github.com/Microsoft/vso-agent-tasks) ayrıntıları hello çeşitli kullanılabilir yapı görevleri.</span><span class="sxs-lookup"><span data-stu-id="33121-224">This [GitHub repo](https://github.com/Microsoft/vso-agent-tasks) details hello various available build tasks.</span></span>

## <a name="notes"></a><span data-ttu-id="33121-225">Notlar</span><span class="sxs-lookup"><span data-stu-id="33121-225">Notes</span></span>
<span data-ttu-id="33121-226">Bu kullanım örnek hello Azure galerisinde genel bir Windows Server 2012 R2 görüntüsünden bir VM'den başlar.</span><span class="sxs-lookup"><span data-stu-id="33121-226">This usage example starts with a VM from a generic Windows Server 2012 R2 image from hello Azure gallery.</span></span>  <span data-ttu-id="33121-227">Depolanmış bir görüntüden başlatın ve hello DSC yapılandırması ile buradan ince ayar.</span><span class="sxs-lookup"><span data-stu-id="33121-227">You can start from any stored image and then tweak from there with hello DSC configuration.</span></span>  <span data-ttu-id="33121-228">Ancak, bir görüntüye baked yapılandırmasını değiştirme DSC kullanarak hello yapılandırmasını dinamik olarak güncelleştirilmesi daha çok daha zordur.</span><span class="sxs-lookup"><span data-stu-id="33121-228">However, changing configuration that is baked into an image is much harder than dynamically updating hello configuration using DSC.</span></span>

<span data-ttu-id="33121-229">Bu teknik ile Vm'leriniz toouse ARM şablonunu ve hello VM uzantısı toouse yok.</span><span class="sxs-lookup"><span data-stu-id="33121-229">You don’t have toouse an ARM template and hello VM extension toouse this technique with your VMs.</span></span>  <span data-ttu-id="33121-230">Ve Vm'lerinizi Azure toobe CD Yönetimi altında üzerinde toobe yok.</span><span class="sxs-lookup"><span data-stu-id="33121-230">And your VMs don’t have toobe on Azure toobe under CD management.</span></span>  <span data-ttu-id="33121-231">Tüm bu Chocolatey olması yüklü olduğundan ve hello çekme sunucunun olduğu bilmesi için hello LCM'yi hello VM üzerinde yapılandırılmış gerekli olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="33121-231">All that’s necessary is that Chocolatey be installed and hello LCM configured on hello VM so it knows where hello pull server is.</span></span>  

<span data-ttu-id="33121-232">Bir paketi üretim bir VM'de güncelleştirdiğinizde hello güncelleştirme yüklenirken doğal olarak, tootake döndürme dışında bu VM ihtiyacınız var.</span><span class="sxs-lookup"><span data-stu-id="33121-232">Of course, when you update a package on a VM that’s in production, you need tootake that VM out of rotation while hello update is installed.</span></span>  <span data-ttu-id="33121-233">Bunu nasıl yapacağınız yaygın olarak değişir.</span><span class="sxs-lookup"><span data-stu-id="33121-233">How you do this varies widely.</span></span>  <span data-ttu-id="33121-234">Örneğin, bir Azure yük dengeleyici arkasında bir VM ile özel araştırma ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="33121-234">For example, with a VM behind an Azure Load Balancer, you can add a Custom Probe.</span></span>  <span data-ttu-id="33121-235">Merhaba VM güncelleştirilirken bir 400 dönüş hello araştırma uç noktası vardır.</span><span class="sxs-lookup"><span data-stu-id="33121-235">While updating hello VM, have hello probe endpoint return a 400.</span></span>  <span data-ttu-id="33121-236">Hello ince ayar gerekli toocause bu değişikliği geri tooreturning bir 200 hello Güncelleştirme tamamlandıktan sonra ince ayar tooswitch hello olarak yapılandırmanızı içinde olabilir.</span><span class="sxs-lookup"><span data-stu-id="33121-236">hello tweak necessary toocause this change can be inside your configuration, as can hello tweak tooswitch it back tooreturning a 200 once hello update is complete.</span></span>

<span data-ttu-id="33121-237">Bu kullanım örneğin tam kaynak konusu [bu Visual Studio projesi](https://github.com/sebastus/ARM/tree/master/CDIaaSVM) github'da.</span><span class="sxs-lookup"><span data-stu-id="33121-237">Full source for this usage example is in [this Visual Studio project](https://github.com/sebastus/ARM/tree/master/CDIaaSVM) on GitHub.</span></span>

## <a name="related-articles"></a><span data-ttu-id="33121-238">İlgili makaleler</span><span class="sxs-lookup"><span data-stu-id="33121-238">Related Articles</span></span>
* [<span data-ttu-id="33121-239">Azure Otomasyonu DSC genel bakış</span><span class="sxs-lookup"><span data-stu-id="33121-239">Azure Automation DSC Overview</span></span>](automation-dsc-overview.md)
* [<span data-ttu-id="33121-240">Azure Otomasyonu DSC cmdlet'leri</span><span class="sxs-lookup"><span data-stu-id="33121-240">Azure Automation DSC cmdlets</span></span>](https://msdn.microsoft.com/library/mt244122.aspx)
* [<span data-ttu-id="33121-241">Azure Otomasyonu DSC tarafından Yönetim için hazırlama makineler</span><span class="sxs-lookup"><span data-stu-id="33121-241">Onboarding machines for management by Azure Automation DSC</span></span>](automation-dsc-onboarding.md)

