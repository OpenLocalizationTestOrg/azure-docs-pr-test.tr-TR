---
title: "Azure Automation’da ilk PowerShell İş Akışı runbook uygulamam | Microsoft Belgeleri"
description: "PowerShell İş Akışı kullanarak basit bir runbook oluşturma, test etme ve yayımlama adımlarını anlatan öğretici."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "powershell iş akışı, powershell iş akışı örnekleri, iş akışı powershell"
ms.assetid: 0002d7f7-e2b5-46e3-b5eb-4596b84fd526
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 739f7c0fe0cca03d80fa8b4bdadbf93b5da72a73
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-powershell-workflow-runbook"></a><span data-ttu-id="d081c-104">İlk PowerShell İş Akışı runbook uygulamam</span><span class="sxs-lookup"><span data-stu-id="d081c-104">My first PowerShell Workflow runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="d081c-105">Grafik</span><span class="sxs-lookup"><span data-stu-id="d081c-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="d081c-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="d081c-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="d081c-107">PowerShell İş Akışı</span><span class="sxs-lookup"><span data-stu-id="d081c-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="d081c-108">Bu öğretici, Azure Automation’da bir [PowerShell İş Akışı runbook](automation-runbook-types.md#powershell-workflow-runbooks) oluşturulmasını adım adım göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="d081c-108">This tutorial walks you through the creation of a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) in Azure Automation.</span></span> <span data-ttu-id="d081c-109">Runbook işi durumunun nasıl izleneceğini açıklarken test edip yayımlayacağımız basit bir runbook ile başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="d081c-109">We start with a simple runbook that we test and publish while explaining how to track the status of the runbook job.</span></span> <span data-ttu-id="d081c-110">Ardından, bir Azure sanal makinesini başlatmayı içeren bir örnekle, bu runbook’u gerçekten Azure kaynaklarını yönetmek üzere değiştireceğiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="d081c-111">Son olarak, runbook parametreleri ekleyerek runbook’u daha sağlam hale getireceğiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-111">Lastly we make the runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d081c-112">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="d081c-112">Prerequisites</span></span>
<span data-ttu-id="d081c-113">Bu öğreticiyi tamamlamak için aşağıdakiler gerekir:</span><span class="sxs-lookup"><span data-stu-id="d081c-113">To complete this tutorial, you will need the following:</span></span>

* <span data-ttu-id="d081c-114">Azure aboneliği.</span><span class="sxs-lookup"><span data-stu-id="d081c-114">Azure subscription.</span></span> <span data-ttu-id="d081c-115">Henüz bir aboneliğiniz yoksa [MSDN abone avantajlarınızı etkinleştirebilir](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) ya da <a href="/pricing/free-account/" target="_blank">[ücretsiz hesap için kaydolabilirsiniz](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="d081c-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="d081c-116">Runbook’u tutacak ve Azure kaynaklarında kimlik doğrulamasını yapacak bir [Automation hesabı](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="d081c-116">[Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="d081c-117">Bu hesabın sanal makineyi başlatma ve durdurma izni olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d081c-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="d081c-118">Azure sanal makinesi.</span><span class="sxs-lookup"><span data-stu-id="d081c-118">An Azure virtual machine.</span></span> <span data-ttu-id="d081c-119">Bu makineyi durdurup başlatacağımız için makinenin üretime yönelik bir VM olmaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d081c-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="d081c-120">1. Adım - Yeni runbook oluşturma</span><span class="sxs-lookup"><span data-stu-id="d081c-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="d081c-121">Çıktı olarak *Hello World* metnini veren basit bir runbook oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="d081c-121">We'll start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="d081c-122">Azure portalında, Otomasyon hesabınızı açın.</span><span class="sxs-lookup"><span data-stu-id="d081c-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="d081c-123">Automation hesabı sayfası size bu hesaptaki kaynakların hızlı bir görünümünü sağlar.</span><span class="sxs-lookup"><span data-stu-id="d081c-123">The Automation account page gives you a quick view of the resources in this account.</span></span> <span data-ttu-id="d081c-124">Birkaç varlığınız zaten olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d081c-124">You should already have some assets.</span></span> <span data-ttu-id="d081c-125">Bunların çoğu, yeni bir Automation hesabına otomatik olarak dahil edilen modüllerdir.</span><span class="sxs-lookup"><span data-stu-id="d081c-125">Most of those are the modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="d081c-126">Burada ayrıca [önkoşullarda](#prerequisites) belirtilen Kimlik Bilgileri varlığınız da bulunmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d081c-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="d081c-127">Runbook'ların listesini açmak için **Runbook'lar** kutucuğuna tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-127">Click on the **Runbooks** tile to open the list of runbooks.</span></span><br><br> <span data-ttu-id="d081c-128">![Runbook denetimi](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-128">![Runbooks control](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span></span>
3. <span data-ttu-id="d081c-129">**Runbook ekle** düğmesine ve ardından **Yeni bir runbook oluştur**’a tıklayarak yeni bir runbook oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d081c-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="d081c-130">Runbook’a *MyFirstRunbook-Workflow* adını verin.</span><span class="sxs-lookup"><span data-stu-id="d081c-130">Give the runbook the name *MyFirstRunbook-Workflow*.</span></span>
5. <span data-ttu-id="d081c-131">Bu örneğimizde, biz [PowerShell İş Akışı runbook’u](automation-runbook-types.md#powershell-workflow-runbooks) oluşturacağız, bu nedenle **Runbook türü** için **PowerShell İş Akışı**’nı seçin.</span><span class="sxs-lookup"><span data-stu-id="d081c-131">In this case, we're going to create a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) so select **Powershell Workflow** for **Runbook type**.</span></span><br><br> <span data-ttu-id="d081c-132">![Yeni runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-132">![New runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span></span>
6. <span data-ttu-id="d081c-133">Runbook’u oluşturmak için **Oluştur**’a tıklayın ve metin düzenleyicisini açın.</span><span class="sxs-lookup"><span data-stu-id="d081c-133">Click **Create** to create the runbook and open the textual editor.</span></span>

## <a name="step-2---add-code-to-the-runbook"></a><span data-ttu-id="d081c-134">2. Adım - Runbook'a kod ekleme</span><span class="sxs-lookup"><span data-stu-id="d081c-134">Step 2 - Add code to the runbook</span></span>
<span data-ttu-id="d081c-135">Kodu doğrudan runbook’a yazabilir veya Kitaplık denetiminde cmdlet’leri, runbook’ları ve varlıkları seçebilir ve ilgili parametrelerle bunların runbook’a eklenmesini sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d081c-135">You can either type code directly into the runbook, or you can select cmdlets, runbooks, and assets from the Library control and have them added to the runbook with any related parameters.</span></span> <span data-ttu-id="d081c-136">Bu kılavuzda doğrudan runbook'a yazacağız.</span><span class="sxs-lookup"><span data-stu-id="d081c-136">For this walkthrough, we'll type directly into the runbook.</span></span>

1. <span data-ttu-id="d081c-137">Runbook uygulamamız şu anda, yalnızca gerekli *iş akışı* anahtar sözcüğü, runbook uygulamamızın adın ve tüm iş akışını içerecek parantezleri içerir durumda boştur.</span><span class="sxs-lookup"><span data-stu-id="d081c-137">Our runbook is currently empty with only the required *workflow* keyword, the name of our runbook, and the braces that will encase the entire workflow.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   }
   ```
2. <span data-ttu-id="d081c-138">Ayraçlar arasına *Write-Output "Hello World."*</span><span class="sxs-lookup"><span data-stu-id="d081c-138">Type *Write-Output "Hello World."*</span></span> <span data-ttu-id="d081c-139">yazın.</span><span class="sxs-lookup"><span data-stu-id="d081c-139">between the braces.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   Write-Output "Hello World"
   }
   ```
3. <span data-ttu-id="d081c-140">**Kaydet**’e tıklayarak runbook’u kaydedin.</span><span class="sxs-lookup"><span data-stu-id="d081c-140">Save the runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="d081c-141">![Runbook’u kaydetme](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-141">![Save runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="d081c-142">3. Adım - Runbook'u test etme</span><span class="sxs-lookup"><span data-stu-id="d081c-142">Step 3 - Test the runbook</span></span>
<span data-ttu-id="d081c-143">Runbook’u üretimde kullanılabilir hale getirmek üzere yayımlamadan önce düzgün çalıştığından emin olmak için test etmek istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="d081c-143">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span> <span data-ttu-id="d081c-144">Bir runbook'u test ettiğinizde, bunun **Taslak** sürümünü çalıştırır ve çıktısını etkileşimli olarak görüntülersiniz.</span><span class="sxs-lookup"><span data-stu-id="d081c-144">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="d081c-145">Test bölmesini açmak için **Test bölmesi**’ne tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-145">Click **Test pane** to open the Test pane.</span></span><br><br> <span data-ttu-id="d081c-146">![Test bölmesi](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-146">![Test pane](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span></span>
2. <span data-ttu-id="d081c-147">Testi başlatmak için **Başlat**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-147">Click **Start** to start the test.</span></span> <span data-ttu-id="d081c-148">Etkinleştirilen tek seçenek bu olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d081c-148">This should be the only enabled option.</span></span>
3. <span data-ttu-id="d081c-149">Bir [runbook işi](automation-runbook-execution.md) oluşturulur ve durumu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d081c-149">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="d081c-150">İş durumu, bulutta bir runbook çalışanının kullanılabilir hale gelmesinin beklendiğini gösteren şekilde *Sırada* olarak başlar.</span><span class="sxs-lookup"><span data-stu-id="d081c-150">The job status will start as *Queued* indicating that it is waiting for a runbook worker in the cloud to come available.</span></span> <span data-ttu-id="d081c-151">Ardından, bir çalışan işi talep ettiğinde *Başlatılıyor* olarak ve runbook gerçekten çalışmaya başladığında *Çalışıyor* olarak değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="d081c-151">It will then move to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="d081c-152">Runbook işi tamamlandığında çıktısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d081c-152">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="d081c-153">Örneğimizde, *Hello World* metnini görmeliyiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-153">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="d081c-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span></span>
5. <span data-ttu-id="d081c-155">Tuvale geri dönmek için Test bölmesini kapatın.</span><span class="sxs-lookup"><span data-stu-id="d081c-155">Close the Test pane to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="d081c-156">4. Adım - Runbook’u yayımlama ve başlatma</span><span class="sxs-lookup"><span data-stu-id="d081c-156">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="d081c-157">Yeni oluşturduğumuz runbook hala Taslak modunda.</span><span class="sxs-lookup"><span data-stu-id="d081c-157">The runbook that we just created is still in Draft mode.</span></span> <span data-ttu-id="d081c-158">Runbook’un üretimde çalıştırılabilmesi için önce yayımlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d081c-158">We need to publish it before we can run it in production.</span></span> <span data-ttu-id="d081c-159">Bir runbook yayımladığınızda, Taslak sürümü mevcut Yayımlanmış sürümün üzerine yazarsınız.</span><span class="sxs-lookup"><span data-stu-id="d081c-159">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span> <span data-ttu-id="d081c-160">Örneğimizde, runbook’u henüz oluşturduğumuzdan, Yayımlanmış sürümümüz yok.</span><span class="sxs-lookup"><span data-stu-id="d081c-160">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="d081c-161">Runbook’u yayımlamak için **Yayımla**’ya tıklayın ve sorulduğunda **Evet**’e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-161">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="d081c-162">![Yayımlama](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-162">![Publish](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span></span>
2. <span data-ttu-id="d081c-163">Şimdi runbook'u **Runbook'lar** bölmesinde görüntülemek için sola kaydırırsanız, **Yazma Durumu** olarak **Yayımlandı** gösterilir.</span><span class="sxs-lookup"><span data-stu-id="d081c-163">If you scroll left to view the runbook in the **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="d081c-164">**MyFirstRunbook-Workflow** için bölmeyi görüntülemek üzere geri sağa kaydırın.</span><span class="sxs-lookup"><span data-stu-id="d081c-164">Scroll back to the right to view the pane for **MyFirstRunbook-Workflow**.</span></span>  
   <span data-ttu-id="d081c-165">Üst kısımdaki seçenekler runbook’u başlatmamıza, gelecekte bir zamanda başlatmak üzere zamanlamamıza ya da bir HTTP çağrısıyla başlatılabilmesi için [web kancası](automation-webhooks.md) oluşturmamıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="d081c-165">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="d081c-166">Yalnızca runbook'u başlatmak istiyoruz, bu nedenle **Başlat**’a ve ardından sorulduğunda **Evet**’e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-166">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="d081c-167">![Runbook’u başlatma](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-167">![Start runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span></span>
5. <span data-ttu-id="d081c-168">Yeni oluşturduğumuz runbook için bir iş bölmesi açıldı.</span><span class="sxs-lookup"><span data-stu-id="d081c-168">A job pane is opened for the runbook job that we just created.</span></span> <span data-ttu-id="d081c-169">Bu bölme kapatılabilir, ancak bu kez işin ilerleme durumunu izleyebilmek için açık bırakacağız.</span><span class="sxs-lookup"><span data-stu-id="d081c-169">We can close this pane, but in this case we'll leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="d081c-170">İş durumu **İş Özeti**’nde gösterilir ve runbook’u test ettiğimizde gördüğümüz durumların aynısıdır.</span><span class="sxs-lookup"><span data-stu-id="d081c-170">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br><br> <span data-ttu-id="d081c-171">![İş Özeti](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-171">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span></span>
7. <span data-ttu-id="d081c-172">Runbook durumu olarak *Tamamlandı* gösterilince **Çıktı**’ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-172">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="d081c-173">Çıktı bölmesi açılır ve *Hello World* metnimizi görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="d081c-173">The Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="d081c-174">![İş Özeti](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-174">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span></span>  
8. <span data-ttu-id="d081c-175">Çıktı bölmesini kapatın.</span><span class="sxs-lookup"><span data-stu-id="d081c-175">Close the Output pane.</span></span>
9. <span data-ttu-id="d081c-176">Runbook işine ait Akışlar bölmesini açmak için **Tüm Günlükler**’e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-176">Click **All Logs** to open the Streams pane for the runbook job.</span></span> <span data-ttu-id="d081c-177">Çıktı akışında yalnızca *Hello World* metnini görmeliyiz, ancak bu bölmede, runbook bunlara yazıyorsa Ayrıntılı ve Hata gibi runbook işine yönelik diğer akışlar da gösterilebilir.</span><span class="sxs-lookup"><span data-stu-id="d081c-177">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br><br> <span data-ttu-id="d081c-178">![İş Özeti](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-178">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span></span>
10. <span data-ttu-id="d081c-179">MyFirstRunbook bölmesine dönmek için Akışlar bölmesini ve İş bölmesini kapatın.</span><span class="sxs-lookup"><span data-stu-id="d081c-179">Close the Streams pane and the Job pane to return to the MyFirstRunbook pane.</span></span>
11. <span data-ttu-id="d081c-180">Bu runbook’a ait İşler bölmesini açmak için **İşler**’e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-180">Click **Jobs** to open the Jobs pane for this runbook.</span></span> <span data-ttu-id="d081c-181">Bu bölmede, bu runbook tarafından oluşturulan tüm işler listelenir.</span><span class="sxs-lookup"><span data-stu-id="d081c-181">This lists all of the jobs created by this runbook.</span></span> <span data-ttu-id="d081c-182">İşi yalnızca bir kez çalıştırdığımız için sadece bir işin listelendiğini görmeliyiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-182">We should only see one job listed since we only ran the job once.</span></span><br><br> <span data-ttu-id="d081c-183">![İşler](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-183">![Jobs](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span></span>
12. <span data-ttu-id="d081c-184">Runbook’u başlattığımızda, görüntülediğimiz iş bölmesini açmak için bu işe tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d081c-184">You can click on this job to open the same Job pane that we viewed when we started the runbook.</span></span> <span data-ttu-id="d081c-185">Böylece zaman içinde geri dönerek, belirli bir runbook için oluşturulan herhangi bir işin ayrıntılarını görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d081c-185">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="d081c-186">5. Adım- Azure kaynaklarını yönetmek için kimlik doğrulaması ekleme</span><span class="sxs-lookup"><span data-stu-id="d081c-186">Step 5 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="d081c-187">Runbook uygulamamızı test ettik ve yayımladık, ancak şu ana kadar faydalı bir şey yapmadı.</span><span class="sxs-lookup"><span data-stu-id="d081c-187">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="d081c-188">Bu runbook’un Azure kaynaklarını yönetmesini istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="d081c-188">We want to have it manage Azure resources.</span></span> <span data-ttu-id="d081c-189">Runbook‘un bunu gerçekleştirebilmesi için [önkoşullar](#prerequisites) bölümünde bahsedilen kimlik bilgilerini kullanarak kimlik doğrulaması yapması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d081c-189">It won't be able to do that though unless we have it authenticate using the credentials that are referred to in the [prerequisites](#prerequisites).</span></span> <span data-ttu-id="d081c-190">Bunun için **Add-AzureRmAccount** cmdlet'ini kullanıyoruz.</span><span class="sxs-lookup"><span data-stu-id="d081c-190">We do that with the **Add-AzureRMAccount** cmdlet.</span></span>

1. <span data-ttu-id="d081c-191">MyFirstRunbook İş Akışı bölmesinde **Düzenle**’ye tıklayarak metin düzenleyicisini açın.</span><span class="sxs-lookup"><span data-stu-id="d081c-191">Open the textual editor by clicking **Edit** on the MyFirstRunbook-Workflow pane.</span></span><br><br> <span data-ttu-id="d081c-192">![Runbook’u düzenleme](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-192">![Edit runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span></span>
2. <span data-ttu-id="d081c-193">**Write-Output** satırı artık gerekli değil, bu nedenle silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d081c-193">We don't need the **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="d081c-194">İmleci ayraçlar arasında boş bir satıra getirin.</span><span class="sxs-lookup"><span data-stu-id="d081c-194">Position the cursor on a blank line between the braces.</span></span>
4. <span data-ttu-id="d081c-195">Automation Farklı Çalıştır hesabınızla kimlik doğrulamasını işleyecek aşağıdaki kodu yazın veya kopyalayıp yapıştırın:</span><span class="sxs-lookup"><span data-stu-id="d081c-195">Type or copy and paste the following code that will handle the authentication with your Automation Run As account:</span></span>

   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
5. <span data-ttu-id="d081c-196">Runbook’u test edebilmemiz için **Test bölmesine** tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-196">Click **Test pane** so that we can test the runbook.</span></span>
6. <span data-ttu-id="d081c-197">Testi başlatmak için **Başlat**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-197">Click **Start** to start the test.</span></span> <span data-ttu-id="d081c-198">Tamamlandığında, hesabınızdaki temel bilgileri görüntüleyen bir aşağıdakine benzer bir çıktı almalısınız.</span><span class="sxs-lookup"><span data-stu-id="d081c-198">Once it completes, you should receive output similar to the following, displaying basic information from your account.</span></span> <span data-ttu-id="d081c-199">Böylece kimlik bilgisinin geçerli olduğunu doğrulanmış olur.</span><span class="sxs-lookup"><span data-stu-id="d081c-199">This confirms that the credential is valid.</span></span><br><br> <span data-ttu-id="d081c-200">![Kimlik Doğrulaması](media/automation-first-runbook-textual/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-200">![Authenticate](media/automation-first-runbook-textual/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-to-start-a-virtual-machine"></a><span data-ttu-id="d081c-201">6. Adım - Sanal makineyi başlatmak için kod ekleme</span><span class="sxs-lookup"><span data-stu-id="d081c-201">Step 6 - Add code to start a virtual machine</span></span>
<span data-ttu-id="d081c-202">Runbook uygulamamız Azure aboneliğimiz için kimlik doğrulaması yaptığına göre, kaynakları yönetebiliriz.</span><span class="sxs-lookup"><span data-stu-id="d081c-202">Now that our runbook is authenticating to our Azure subscription, we can manage resources.</span></span> <span data-ttu-id="d081c-203">Sanal makineyi başlatmak için bir komut ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-203">We add a command to start a virtual machine.</span></span> <span data-ttu-id="d081c-204">Azure aboneliğinizdeki herhangi bir sanal makineyi seçebilirsiniz, şimdilik bu adı runbook’a kod olarak ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-204">You can pick any virtual machine in your Azure subscription, and for now we will be hardcoding that name in the runbook.</span></span>

1. <span data-ttu-id="d081c-205">*Add-AzureRmAccount* ’un ardından, başlatılacak sanal makinenin adını ve Kaynak Grubu adını girip *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* yazın.</span><span class="sxs-lookup"><span data-stu-id="d081c-205">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing the name and Resource Group name of the virtual machine to start.</span></span>  

   ```
   workflow MyFirstRunbook-Workflow
   {
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   }
   ```
2. <span data-ttu-id="d081c-206">Runbook'u kaydedin ve ardından **Test bölmesi**’ne tıklayın böylece test edebiliriz.</span><span class="sxs-lookup"><span data-stu-id="d081c-206">Save the runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="d081c-207">Testi başlatmak için **Başlat**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-207">Click **Start** to start the test.</span></span> <span data-ttu-id="d081c-208">Tamamlandığında, sanal makinenin başlatıldığını kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="d081c-208">Once it completes, check that the virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-to-the-runbook"></a><span data-ttu-id="d081c-209">7. Adım - Runbook'a girdi parametresi ekleme</span><span class="sxs-lookup"><span data-stu-id="d081c-209">Step 7 - Add an input parameter to the runbook</span></span>
<span data-ttu-id="d081c-210">Runbook uygulamamız şu anda, runbook’a kod olarak eklediğimiz sanal makineyi başlatır, ancak runbook başlatılırken sanal makineyi belirtebilseydik daha kullanışlı olurdu.</span><span class="sxs-lookup"><span data-stu-id="d081c-210">Our runbook currently starts the virtual machine that we hardcoded in the runbook, but it would be more useful if we could specify the virtual machine when the runbook is started.</span></span> <span data-ttu-id="d081c-211">Şimdi bu işlevi sağlamak için runbook’a girdi parametreleri ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="d081c-211">We will now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="d081c-212">Runbook’a *VMName* ve *ResourceGroupName* parametrelerini ekleyin ve bu değişkenleri aşağıdaki örnekteki gibi **Start-AzureRmVM** cmdlet’i ile kullanın.</span><span class="sxs-lookup"><span data-stu-id="d081c-212">Add parameters for *VMName* and *ResourceGroupName* to the runbook and use these variables with the **Start-AzureRmVM** cmdlet as in the example below.</span></span>

   ```
   workflow MyFirstRunbook-Workflow
   {
    Param(
     [string]$VMName,
     [string]$ResourceGroupName
    )  
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   }
   ```
2. <span data-ttu-id="d081c-213">Runbook'u kaydedin ve Test bölmesini açın.</span><span class="sxs-lookup"><span data-stu-id="d081c-213">Save the runbook and open the Test pane.</span></span> <span data-ttu-id="d081c-214">Şimdi testte kullanılacak olan iki girdi değişkeni için değerleri sağlayabileceğinizi unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-214">Note that you can now provide values for the two input variables that will be used in the test.</span></span>
3. <span data-ttu-id="d081c-215">Test bölmesini kapatın.</span><span class="sxs-lookup"><span data-stu-id="d081c-215">Close the Test pane.</span></span>
4. <span data-ttu-id="d081c-216">Runbook’un yeni sürümünü yayımlamak için **Yayımla**’ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-216">Click **Publish** to publish the new version of the runbook.</span></span>
5. <span data-ttu-id="d081c-217">Önceki adımda başlattığınız sanal makineyi durdurun.</span><span class="sxs-lookup"><span data-stu-id="d081c-217">Stop the virtual machine that you started in the previous step.</span></span>
6. <span data-ttu-id="d081c-218">Runbook'u başlatmak için **Başlat**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d081c-218">Click **Start** to start the runbook.</span></span> <span data-ttu-id="d081c-219">Başlatacağınız sanal makinenin **VMName** ve **ResourceGroupName** bilgilerini yazın.</span><span class="sxs-lookup"><span data-stu-id="d081c-219">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br><br> <span data-ttu-id="d081c-220">![Runbook’u başlatma](media/automation-first-runbook-textual/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="d081c-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="d081c-221">Runbook tamamlandığında, sanal makinenin başladığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="d081c-221">When the runbook completes, check that the virtual machine was started.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="d081c-222">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="d081c-222">Next steps</span></span>
* <span data-ttu-id="d081c-223">Grafik runbook'ları kullanmaya başlamak için bkz. [İlk grafik runbook uygulamam](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="d081c-223">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="d081c-224">PowerShell runbook'ları kullanmaya başlamak için bkz. [İlk PowerShell runbook uygulamam](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="d081c-224">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="d081c-225">Runbook türleri, avantajları ve sınırlamaları hakkında daha fazla bilgi için, bkz. [Azure Automation runbook türleri](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="d081c-225">To learn more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="d081c-226">PowerShell betik desteği özelliği hakkında daha fazla bilgi için bkz. [Azure Automation’da Yerel PowerShell betik desteği](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="d081c-226">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
