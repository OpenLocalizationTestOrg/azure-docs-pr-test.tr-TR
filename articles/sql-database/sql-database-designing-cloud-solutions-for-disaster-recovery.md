---
title: "Azure SQL veritabanı kullanarak aaaDesign yüksek oranda kullanılabilir hizmet | Microsoft Docs"
description: "Uygulama tasarımı için Azure SQL veritabanı kullanarak yüksek oranda kullanılabilir hizmetler hakkında bilgi edinin."
keywords: "Bulut olağanüstü durum kurtarma, olağanüstü durum kurtarma çözümleri, uygulama veri yedekleme, coğrafi çoğaltma, iş sürekliliği planlama"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: e8a346ac-dd08-41e7-9685-46cebca04582
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 04/21/2017
ms.author: sashan
ms.openlocfilehash: 815f754ba7014cd8a1108a2d84c2a8f71d7030a5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-services-using-azure-sql-database"></a><span data-ttu-id="960e7-104">Azure SQL veritabanı kullanarak yüksek oranda kullanılabilir hizmetler tasarlama</span><span class="sxs-lookup"><span data-stu-id="960e7-104">Designing highly available services using Azure SQL Database</span></span>

<span data-ttu-id="960e7-105">Derleme ve Azure SQL veritabanı yüksek oranda kullanılabilir hizmetleri dağıtma, kullandığınız [yük devretme grupları ve etkin coğrafi çoğaltma](sql-database-geo-replication-overview.md) tooprovide esnekliği tooregional hataları ve geri dönülemez kesintiler ve etkinleştirme Hızlı Kurtarma toohello ikincil veritabanları.</span><span class="sxs-lookup"><span data-stu-id="960e7-105">When building and deploying highly available services on Azure SQL Database, you use [failover groups and active geo-replication](sql-database-geo-replication-overview.md) tooprovide resilience tooregional failures and catastrophic outages and enable fast recovery toohello secondary databases.</span></span> <span data-ttu-id="960e7-106">Bu makale üzerinde ortak uygulama düzenleri odaklanır ve hello avantajları ve dengelemeler her seçenekle hello uygulama dağıtımı gereksinimleri, hello hizmet düzeyi sözleşmesi hedefleme, bağlı olarak ele almaktadır trafiği gecikme ve maliyetlerin.</span><span class="sxs-lookup"><span data-stu-id="960e7-106">This article focuses on common application patterns and discusses hello benefits and trade-offs of each option depending on hello application deployment requirements, hello service level agreement you are targeting, traffic latency, and costs.</span></span> <span data-ttu-id="960e7-107">Esnek havuzlar etkin coğrafi çoğaltma hakkında daha fazla bilgi için bkz: [esnek havuz olağanüstü durum kurtarma stratejilerini](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="960e7-107">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

## <a name="design-pattern-1-active-passive-deployment-for-cloud-disaster-recovery-with-a-co-located-database"></a><span data-ttu-id="960e7-108">Tasarım deseni 1: Aktif-Pasif dağıtım birlikte bulunan bir veritabanı ile bulut olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="960e7-108">Design pattern 1: Active-passive deployment for cloud disaster recovery with a co-located database</span></span>
<span data-ttu-id="960e7-109">Bu seçenek ile Merhaba özellikleri aşağıdaki uygulamalar için uygundur:</span><span class="sxs-lookup"><span data-stu-id="960e7-109">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="960e7-110">Tek bir Azure bölgesindeki etkin örneği</span><span class="sxs-lookup"><span data-stu-id="960e7-110">Active instance in a single Azure region</span></span>
* <span data-ttu-id="960e7-111">Okuma-yazma (RW) erişim toodata güçlü bağımlılığı</span><span class="sxs-lookup"><span data-stu-id="960e7-111">Strong dependency on read-write (RW) access toodata</span></span>
* <span data-ttu-id="960e7-112">Merhaba web uygulaması hello veritabanı arasında çapraz bölge bağlantısı toolatency ve trafik maliyeti kabul edilebilir değil</span><span class="sxs-lookup"><span data-stu-id="960e7-112">Cross-region connectivity between hello web application and hello database is not acceptable due toolatency and traffic cost</span></span>    

<span data-ttu-id="960e7-113">Bu durumda, hello uygulama dağıtım topolojisi tüm uygulama bileşenleri etkilendiğini ve bir birim olarak toofailover gerektiğinde bölgesel afetler işlemek için optimize edilmiştir.</span><span class="sxs-lookup"><span data-stu-id="960e7-113">In this case, hello application deployment topology is optimized for handling regional disasters when all application components are impacted and need toofailover as a unit.</span></span> <span data-ttu-id="960e7-114">Coğrafi artıklık hello uygulama mantığını ve hello veritabanı çoğaltılmış tooanother bölge ancak hello normal koşullar altında hello uygulama iş yükü için kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="960e7-114">For geographic redundancy, hello application logic and hello database are replicated tooanother region but they are not used for hello application workload under hello normal conditions.</span></span> <span data-ttu-id="960e7-115">Merhaba ikincil bölge'Hello uygulamada yapılandırılan toouse SQL bağlantı dizesi toohello ikincil bir veritabanı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="960e7-115">hello application in hello secondary region should be configured toouse a SQL connection string toohello secondary database.</span></span> <span data-ttu-id="960e7-116">Trafik Yöneticisi toouse ayarlanmış [yük devretme yönlendirme yöntemini](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span><span class="sxs-lookup"><span data-stu-id="960e7-116">Traffic manager is set up toouse [failover routing method](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="960e7-117">[Azure trafik Yöneticisi](../traffic-manager/traffic-manager-overview.md) bu makalede yalnızca gösterim amacıyla kullanılmıştır.</span><span class="sxs-lookup"><span data-stu-id="960e7-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) is used throughout this article for illustration purposes only.</span></span> <span data-ttu-id="960e7-118">Yük devretme yönlendirme yöntemini destekleyen hiçbir yük dengeleme çözümü kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="960e7-118">You can use any load-balancing solution that supports failover routing method.</span></span>    
>

<span data-ttu-id="960e7-119">Aşağıdaki diyagramda hello kesinti önce bu yapılandırma görülmektedir.</span><span class="sxs-lookup"><span data-stu-id="960e7-119">hello following diagram shows this configuration before an outage.</span></span>

![SQL Database coğrafi çoğaltma yapılandırması.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-1.png)

<span data-ttu-id="960e7-122">Merhaba birincil bölgede kesinti sonrasında, hello SQL veritabanı hizmetinin hello birincil veritabanı erişilebilir değil ve hello otomatik yük devretme İlkesi hello parametrelere göre bir yük devretme toohello ikincil bir veritabanı tetikleyecek algılar.</span><span class="sxs-lookup"><span data-stu-id="960e7-122">After an outage in hello primary region, hello SQL Database service detects that hello primary database is not accessible and trigger a failover toohello secondary database based on hello parameters of hello automatic failover policy.</span></span> <span data-ttu-id="960e7-123">Uygulama SLA bağlı olarak, tooconfigure yetkisiz kullanım süresi hello kesinti hello algılanmasını ve hello yük devretme kendisi arasında bir karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="960e7-123">Depending on your application SLA, you can decide tooconfigure a grace period between hello detection of hello outage and hello failover itself.</span></span> <span data-ttu-id="960e7-124">Yetkisiz kullanım süresi yapılandırma burada hello kesinti yıkıcı ve kullanılabilirlik hello bölgede hızlı bir şekilde geri yüklenemez veri kaybı toohello durumlarda hello riskini azaltır.</span><span class="sxs-lookup"><span data-stu-id="960e7-124">Configuring a grace period reduces hello risk of data loss toohello cases where hello outage is catastrophic and availability in hello region cannot be quickly restored.</span></span> <span data-ttu-id="960e7-125">Yük devretme hello veritabanının Hello yük devretme grubu Tetikleyicileri hello önce hello uç nokta yük devretme hello trafik Yöneticisi tarafından başlatılır, Merhaba web uygulaması mümkün tooreconnect toohello veritabanı değil.</span><span class="sxs-lookup"><span data-stu-id="960e7-125">If hello endpoint failover is initiated by hello traffic manager before hello failover group triggers hello failover of hello database, hello web application is not able tooreconnect toohello database.</span></span> <span data-ttu-id="960e7-126">Merhaba veritabanı yük devretme tamamlandıktan hemen sonra hello uygulamanın girişimi tooreconnect otomatik olarak başarılı olur.</span><span class="sxs-lookup"><span data-stu-id="960e7-126">hello application’s attempt tooreconnect automatically succeeds as soon as hello database failover completes.</span></span> 

> [!NOTE]
> <span data-ttu-id="960e7-127">tooachieve tam olarak Merhaba uygulaması hello veritabanları ve yük devretme Eşgüdümlü, izleme yönteminizi insanlara ve el ile yük devretme hello web uygulama uç hello veritabanları ve kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-127">tooachieve fully coordinated failover of hello application and hello databases, you should devise your own monitoring method and use manual failover of hello web application endpoints and hello databases.</span></span>
>

<span data-ttu-id="960e7-128">Merhaba uygulamanın uç noktaları ve birlikte hello veritabanı Hello yük devretme işlemi tamamlandıktan sonra hello uygulama B hello bölgede hello kullanıcı isteklerini işleme yeniden başlar ve hello birincil veritabanı artık olduğundan hello veritabanıyla birlikte bulunan kalır Bölge b Bu senaryo diyagramı aşağıdaki hello gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="960e7-128">After hello failover of both hello application’s endpoints and hello database completes, hello application will re-start processing hello user requests in hello region B and will remain co-located with hello database because hello primary database is now in region B. This scenario is illustrated in hello following diagram.</span></span> <span data-ttu-id="960e7-129">Tüm diyagramlarındaki Kesiksiz çizgi etkin bağlantıları göstermek, noktalı çizgiler askıya alınmış bağlantıları gösterir ve eylem Tetikleyicileri Durma işareti gösterir.</span><span class="sxs-lookup"><span data-stu-id="960e7-129">In all diagrams, solid lines indicate active connections, dotted lines indicate suspended connections, and stop signs indicate action triggers.</span></span>

![Coğrafi çoğaltma: Yük devretme toosecondary veritabanı.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-2.png)

<span data-ttu-id="960e7-132">Merhaba ikincil bölge'de bir kesinti oluşursa, hello hello birincil ve ikincil veritabanı hello arasındaki çoğaltma bağlantısını askıya alındı ancak hello birincil veritabanı etkilenmez çünkü hello yük devretme tetiklenmez.</span><span class="sxs-lookup"><span data-stu-id="960e7-132">If an outage happens in hello secondary region, hello replication link between hello primary and hello secondary database is suspended but hello failover is not triggered because hello primary database is not impacted.</span></span> <span data-ttu-id="960e7-133">Merhaba uygulamanın kullanılabilirliğini bu durumda, değiştirilmez ancak Merhaba uygulaması gösterilen çalışır ve bu nedenle durumda yüksek risk art arda iki bölgeler başarısız.</span><span class="sxs-lookup"><span data-stu-id="960e7-133">hello application's availability is not changed in this case, but hello application operates exposed and therefore at higher risk in case both regions fail in succession.</span></span>

> [!NOTE]
> <span data-ttu-id="960e7-134">Olağanüstü durum kurtarma için uygulama sınırlı dağıtım tootwo bölgeleriyle hello yapılandırma öneririz.</span><span class="sxs-lookup"><span data-stu-id="960e7-134">For disaster recovery we recommend hello configuration with application deployment limited tootwo regions.</span></span> <span data-ttu-id="960e7-135">Bunun nedeni çoğu, Merhaba yalnızca iki bölgede Azure coğrafyalara sahip.</span><span class="sxs-lookup"><span data-stu-id="960e7-135">This is because most of hello Azure geographies have only two regions.</span></span> <span data-ttu-id="960e7-136">Bu yapılandırma, uygulamanızın hem bölgeler bir eşzamanlı geri dönülemez hatasından koruma sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="960e7-136">This configuration will not protect your application from a simultaneous catastrophic failure of both regions.</span></span>  <span data-ttu-id="960e7-137">Bu tür bir hatanın olası olayda, veritabanlarınızı üçüncü bölge kullanarak kurtarabilirsiniz [coğrafi geri yükleme işlemi](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="960e7-137">In an unlikely event of such a failure, you can recover your databases in a third region using [geo-restore operation](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span>
>

<span data-ttu-id="960e7-138">Merhaba kesinti azaltıldığından sonra hello ikincil veritabanı otomatik olarak hello birincil ile yeniden eşitler.</span><span class="sxs-lookup"><span data-stu-id="960e7-138">Once hello outage is mitigated, hello secondary database will automatically re-synchronize with hello primary.</span></span> <span data-ttu-id="960e7-139">Eşitleme sırasında hello birincil performansını hello eşitlenen toobe gereken veri miktarı bağlı olarak biraz etkilenebilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-139">During synchronization, performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="960e7-140">Merhaba Aşağıdaki diyagramda bir kesinti hello ikincil bölgede gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="960e7-140">hello following diagram illustrates an outage in hello secondary region.</span></span>

![İkincil veritabanının birincil ile eşitlenmiş.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-3.png)

<span data-ttu-id="960e7-143">başlangıç anahtarı **avantajları** bu tasarım modeli şunlardır:</span><span class="sxs-lookup"><span data-stu-id="960e7-143">hello key **advantages** of this design pattern are:</span></span>

* <span data-ttu-id="960e7-144">Merhaba aynı web herhangi bir bölgeye özgü yapılandırma ve hiçbir ek mantık tooreact toohello yük devretme olmayan dağıtılan tooboth bölgelerde uygulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="960e7-144">hello same web application is deployed tooboth regions without any region-specific configuration and no additional logic tooreact toohello failover.</span></span> 
* <span data-ttu-id="960e7-145">Yük devretme Merhaba web uygulaması olarak Hello uygulamanızın performansı etkilenmez ve hello veritabanı birlikte bulunan her zaman.</span><span class="sxs-lookup"><span data-stu-id="960e7-145">hello application's performance is not impacted by failover as hello web application and hello database are always co-located.</span></span>

<span data-ttu-id="960e7-146">Merhaba ana **kolaylığını** Merhaba yedekli uygulaması olan hello ikincil bölge örneğinde yalnızca olağanüstü durum kurtarma için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="960e7-146">hello main **tradeoff** is that hello redundant application instance in hello secondary region is only used for disaster recovery.</span></span>

## <a name="design-pattern-2-active-active-deployment-for-application-load-balancing"></a><span data-ttu-id="960e7-147">Tasarım deseni 2: uygulama Yük Dengeleme için etkin-etkin dağıtım</span><span class="sxs-lookup"><span data-stu-id="960e7-147">Design pattern 2: Active-active deployment for application load balancing</span></span>
<span data-ttu-id="960e7-148">Bu bulut olağanüstü durum kurtarma seçeneği ile Merhaba özellikleri aşağıdaki uygulamalar için uygundur:</span><span class="sxs-lookup"><span data-stu-id="960e7-148">This cloud disaster recovery option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="960e7-149">Veritabanı yüksek oranını toowrites okur</span><span class="sxs-lookup"><span data-stu-id="960e7-149">High ratio of database reads toowrites</span></span>
* <span data-ttu-id="960e7-150">Veritabanı hello yazma gecikmesi için hello son kullanıcı deneyimi daha önemli okuma gecikmesi</span><span class="sxs-lookup"><span data-stu-id="960e7-150">Database read latency is more critical for hello end-user experience than hello write latency</span></span> 
* <span data-ttu-id="960e7-151">Farklı bir bağlantı dizesi kullanarak, salt okunur mantığı okuma-yazma mantığından ayrılabilir</span><span class="sxs-lookup"><span data-stu-id="960e7-151">Read-only logic can be separated from read-write logic by using a different connection string</span></span>
* <span data-ttu-id="960e7-152">Salt okunur mantığı hello en son güncelleştirmeleri ile tam olarak eşitlenmekte olan veriler üzerinde bağlı değildir</span><span class="sxs-lookup"><span data-stu-id="960e7-152">Read-only logic does not depend on data being fully synchronized with hello latest updates</span></span>  

<span data-ttu-id="960e7-153">Bu özelliklere uygulamalarınız varsa, yük de farklı bölgelerdeki birden çok uygulama örnekleri arasında hello son kullanıcı bağlantıları Dengeleme önemli ölçüde artırabilir hello genel son kullanıcı deneyimi.</span><span class="sxs-lookup"><span data-stu-id="960e7-153">If your applications have these characteristics, load balancing hello end-user connections across multiple application instances in different regions can substantially improve hello overall end-user experience.</span></span> <span data-ttu-id="960e7-154">İki hello bölgelerinin DR çifti hello seçilmelidir ve hello yük devretme grubu bu bölgede hello veritabanları içermelidir.</span><span class="sxs-lookup"><span data-stu-id="960e7-154">Two of hello regions should be selected as hello DR pair and hello failover group should include hello databases in these regions.</span></span> <span data-ttu-id="960e7-155">tooimplement yük dengeleyici her bölge etkin hello uygulama örneğini hello okuma-yazma (RW) bağlı mantığı toohello okuma-yazma dinleyicisi uç noktası ile Merhaba yük devretme grubunun olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-155">tooimplement load-balancing, each region should have an active instance of hello application with hello read-write (RW) logic connected toohello read-write listener endpoint of hello failover group.</span></span> <span data-ttu-id="960e7-156">Merhaba birincil veritabanı kesinti tarafından etkilenip bu hello yük devretme otomatik olarak başlatılacak garanti.</span><span class="sxs-lookup"><span data-stu-id="960e7-156">It will guarantee that hello failover will be automatically initiated if hello primary database is impacted by an outage.</span></span> <span data-ttu-id="960e7-157">Merhaba salt okunur mantığı (RO) Merhaba web uygulaması, doğrudan bu bölgede toohello veritabanı bağlanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-157">hello read-only logic (RO) in hello web application should connect directly toohello database in that region.</span></span> <span data-ttu-id="960e7-158">Trafik Yöneticisi toouse ayarlanmalıdır [performans yönlendirme](../traffic-manager/traffic-manager-configure-performance-routing-method.md) ile [uç nokta izleme](../traffic-manager/traffic-manager-monitoring.md) her bir uygulama örneği için etkinleştirilmiş.</span><span class="sxs-lookup"><span data-stu-id="960e7-158">Traffic manager should be set up toouse [performance routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for each application instance.</span></span>

<span data-ttu-id="960e7-159">#1 deseniyle olduğu gibi benzer bir izleme uygulaması dağıtmayı düşünmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="960e7-159">As in pattern #1, you should consider deploying a similar monitoring application.</span></span> <span data-ttu-id="960e7-160">Ancak #1 deseniyle farklı olarak, uygulama izleme hello hello uç nokta yük devretme tetiklemek için sorumlu olmaz.</span><span class="sxs-lookup"><span data-stu-id="960e7-160">But unlike pattern #1, hello monitoring application will not be responsible for triggering hello end-point failover.</span></span>

> [!NOTE]
> <span data-ttu-id="960e7-161">Bu desen birden fazla ikincil veritabanı kullanıyor, ancak yalnızca ikincil bölge b'de hello yük devretme için kullanılacak ve hello yük devretme grubunun bir parçası olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-161">While this pattern uses more than one secondary database, only hello secondary in Region B  would be used for failover and should be part of hello failover group.</span></span>
>

<span data-ttu-id="960e7-162">Trafik Yöneticisi performansı yönlendirme toodirect hello kullanıcı bağlantıları toohello uygulama örneği yakın toohello kullanıcının coğrafi konum için yapılandırılmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-162">Traffic manager should be configured for performance routing toodirect hello user connections toohello application instance closest toohello user's geographic location.</span></span> <span data-ttu-id="960e7-163">Aşağıdaki diyagramda hello kesinti önce bu yapılandırma gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="960e7-163">hello following diagram illustrates this configuration before an outage.</span></span>

![Hiçbir kesinti: performans yönlendirme toonearest uygulama.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-1.png)

<span data-ttu-id="960e7-166">A hello bölgede bir veritabanı kesinti algılanırsa, hello yük devretme grubu b bölgede ikincil bölge A toohello hello birincil veritabanı yük devretme otomatik olarak başlatır Okuma-yazma bağlantıları hello web uygulamasında değil etkilenecek şekilde hello okuma-yazma dinleyicisi uç nokta tooregion B da otomatik olarak güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="960e7-166">If a database outage is detected in hello region A, hello failover group will automatically initiate failover of hello primary database in region A toohello secondary in region B. It will also automatically update hello read-write listener endpoint tooregion B so read-write connections in hello web application will not be impacted.</span></span> <span data-ttu-id="960e7-167">Merhaba trafik Yöneticisi hello çevrimdışı son nokta hello yönlendirme tablosundan dışlayacak ancak Yönlendirme hello son kullanıcı trafiği toohello kalan çevrimiçi örnekleri devam eder.</span><span class="sxs-lookup"><span data-stu-id="960e7-167">hello traffic manager will exclude hello offline end-point from hello routing table but will continue routing hello end-user traffic toohello remaining online instances.</span></span> <span data-ttu-id="960e7-168">her zaman toohello veritabanı hello işaret edecek şekilde hello salt okunur SQL bağlantı dizelerini etkilenecek değil aynı bölgede.</span><span class="sxs-lookup"><span data-stu-id="960e7-168">hello read-only SQL connection strings will not be impacted as they always point toohello database in hello same region.</span></span> 

<span data-ttu-id="960e7-169">Aşağıdaki diyagramda hello hello yeni yapılandırmayı hello yük devretme sonrasında göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="960e7-169">hello following diagram illustrates hello new configuration after hello failover.</span></span>

![Yük devretme sonrasında yapılandırması.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-2.png)

<span data-ttu-id="960e7-172">Merhaba ikincil bölgeler birinde kesinti durumunda, hello trafik Yöneticisi otomatik olarak hello çevrimdışı uç noktası bu bölgede hello yönlendirme tablosundan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="960e7-172">In case of an outage in one of hello secondary regions, hello traffic manager will automatically remove hello offline end-point in that region from hello routing table.</span></span> <span data-ttu-id="960e7-173">Merhaba çoğaltma kanal toohello ikincil veritabanı bu bölgede askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="960e7-173">hello replication channel toohello secondary database in that region will be suspended.</span></span> <span data-ttu-id="960e7-174">Merhaba kalan bölgeleri Bu senaryoda ek kullanıcı trafiği aldığından hello kesintisi sırasında hello uygulamanızın performansı etkilenir.</span><span class="sxs-lookup"><span data-stu-id="960e7-174">Because hello remaining regions get additional user traffic in this scenario, hello application's performance will be impacted during hello outage.</span></span> <span data-ttu-id="960e7-175">Merhaba kesinti azaltıldığından sonra hello hello etkilenen bölgede ikincil veritabanı hemen hello birincil ile eşitlenir.</span><span class="sxs-lookup"><span data-stu-id="960e7-175">Once hello outage is mitigated, hello secondary database in hello impacted region will be immediately synchronized with hello primary.</span></span> <span data-ttu-id="960e7-176">Merhaba sırasında hello birincil eşitleme performansını eşitlenen toobe gereken veri miktarı hello bağlı olarak biraz etkilenebilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-176">During hello synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="960e7-177">B. bölgede bir kesinti diyagramı aşağıdaki hello gösterir</span><span class="sxs-lookup"><span data-stu-id="960e7-177">hello following diagram illustrates an outage in region B.</span></span>

![Kesinti ikincil bölge içinde.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-3.png)

<span data-ttu-id="960e7-180">başlangıç anahtarı **avantajı** bu düzeni birden fazla ikincil kopya tooachieve hello en iyi son kullanıcı performans arasında hello uygulama iş yükü ölçeklendirebilirsiniz tasarımdır.</span><span class="sxs-lookup"><span data-stu-id="960e7-180">hello key **advantage** of this design pattern is that you can scale hello application workload across multiple secondaries tooachieve hello optimal end-user performance.</span></span> <span data-ttu-id="960e7-181">Merhaba **dengelerin** bu seçeneği şunlardır:</span><span class="sxs-lookup"><span data-stu-id="960e7-181">hello **tradeoffs** of this option are:</span></span>

* <span data-ttu-id="960e7-182">Okuma-yazma bağlantıları hello uygulama örnekleri ile veritabanı arasında değişen gecikme süresi ve maliyet gerekir</span><span class="sxs-lookup"><span data-stu-id="960e7-182">Read-write connections between hello application instances and database have varying latency and cost</span></span>
* <span data-ttu-id="960e7-183">Merhaba kesintisi sırasında uygulama performansı etkilenir</span><span class="sxs-lookup"><span data-stu-id="960e7-183">Application performance is impacted during hello outage</span></span>

> [!NOTE]
> <span data-ttu-id="960e7-184">Benzer bir yaklaşım kullanılabilir toooffload özelleştirilmiş raporlama işleri, iş zekası araçları veya yedekleme gibi iş yükleri.</span><span class="sxs-lookup"><span data-stu-id="960e7-184">A similar approach can be used toooffload specialized workloads such as reporting jobs, business intelligence tools, or backups.</span></span> <span data-ttu-id="960e7-185">Genellikle, bu iş yükleri önemli veritabanı kaynaklarını tüketebilir bu nedenle, hello birini ikincil veritabanları için hello performans düzeyi eşleşen toohello beklenen iş yükü ile atamanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-185">Typically, these workloads consume significant database resources therefore it is recommended that you designate one of hello secondary databases for them with hello performance level matched toohello anticipated workload.</span></span>
>

## <a name="design-pattern-3-active-passive-deployment-for-data-preservation"></a><span data-ttu-id="960e7-186">Tasarım deseni 3: Aktif-Pasif dağıtımı için veri koruma</span><span class="sxs-lookup"><span data-stu-id="960e7-186">Design pattern 3: Active-passive deployment for data preservation</span></span>
<span data-ttu-id="960e7-187">Bu seçenek ile Merhaba özellikleri aşağıdaki uygulamalar için uygundur:</span><span class="sxs-lookup"><span data-stu-id="960e7-187">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="960e7-188">Tüm veri kayıplarını yüksek iş sorununa neden olur.</span><span class="sxs-lookup"><span data-stu-id="960e7-188">Any data loss is high business risk.</span></span> <span data-ttu-id="960e7-189">Merhaba kesinti yıkıcı ise hello veritabanı yük devretme yalnızca son çare olarak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-189">hello database failover can only be used as a last resort if hello outage is catastrophic.</span></span>
* <span data-ttu-id="960e7-190">Merhaba uygulaması işlemlerinin salt okunur ve okuma-yazma modlarını destekler ve "salt okunur modda" bir süre çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-190">hello application supports read-only and read-write modes of operations and can operate in "read-only mode" for a period of time.</span></span>

<span data-ttu-id="960e7-191">Merhaba okuma-yazma bağlantı zaman aşımı hataları alma başlattığınızda bu modelinde Merhaba uygulaması yalnızca tooread moda geçer.</span><span class="sxs-lookup"><span data-stu-id="960e7-191">In this pattern, hello application switches tooread-only mode when hello read-write connections start getting time-out errors.</span></span> <span data-ttu-id="960e7-192">Merhaba Web uygulaması dağıtılan tooboth bölgeleri ve bağlantı toohello okuma-yazma dinleyicisi bitiş noktası ve farklı bir bağlantı toohello salt okunur dinleyicisi uç noktası içerir.</span><span class="sxs-lookup"><span data-stu-id="960e7-192">hello Web Application is deployed tooboth regions and include a connection toohello read-write listener endpoint and different connection toohello read-only listener endpoint.</span></span> <span data-ttu-id="960e7-193">Merhaba trafik Yöneticisi toouse ayarlanmalıdır [yük devretme yönlendirme](../traffic-manager/traffic-manager-configure-failover-routing-method.md) ile [uç nokta izleme](../traffic-manager/traffic-manager-monitoring.md) her bölgede hello uygulama uç noktası için etkinleştirilmiş.</span><span class="sxs-lookup"><span data-stu-id="960e7-193">hello Traffic manager should be set up toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for hello application endpoint in each region.</span></span>

<span data-ttu-id="960e7-194">Aşağıdaki diyagramda hello kesinti önce bu yapılandırma gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="960e7-194">hello following diagram illustrates this configuration before an outage.</span></span>

![Yük devretme önce Aktif-Pasif dağıtımı.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-1.png)

<span data-ttu-id="960e7-197">Merhaba trafik Yöneticisi bir bağlantı hatası tooregion A algıladığında, bu otomatik olarak kullanıcı trafiği toohello uygulama örneği B. bölgede geçer Bu desen ile veri kaybı tooa yeterince yüksek değerli hello yetkisiz kullanım süresi örneğin 24 saat ayarladığınız önemlidir.</span><span class="sxs-lookup"><span data-stu-id="960e7-197">When hello traffic manager detects a connectivity failure tooregion A, it automatically switches user traffic toohello application instance in region B. With this pattern, it is important that you set hello grace period with data loss tooa sufficiently high value, e.g. 24 hours.</span></span> <span data-ttu-id="960e7-198">Bu süre içinde hello kesinti azaltıldığından varsa veri kaybı önlenmiş olur sağlayacaktır.</span><span class="sxs-lookup"><span data-stu-id="960e7-198">It will ensure that data loss is prevented if hello outage is mitigated within that time.</span></span> <span data-ttu-id="960e7-199">Hello B hello bölgede Web uygulaması etkinleştirildiğinde hello okuma-yazma işlemleri başarısız olmaya başlar.</span><span class="sxs-lookup"><span data-stu-id="960e7-199">When hello Web application in hello region B is activated hello read-write operations will start failing.</span></span> <span data-ttu-id="960e7-200">Bu noktada, toohello salt okunur moda geçer.</span><span class="sxs-lookup"><span data-stu-id="960e7-200">At that point, it should switch toohello read-only mode.</span></span> <span data-ttu-id="960e7-201">Bu mod hello istekleri otomatik olarak yönlendirilmiş toohello ikincil veritabanı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="960e7-201">In this mode hello requests will be automatically routed toohello secondary database.</span></span> <span data-ttu-id="960e7-202">Yıkıcı bir hata hello Hello durumda kesinti hello yetkisiz kullanım süresi içinde azaltılması gereken değil ve hello yük devretme grubu hello yük devretme tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="960e7-202">In hello case of a catastrophic failure hello outage will not be mitigated within hello grace period and hello failover group will trigger hello failover.</span></span> <span data-ttu-id="960e7-203">Sonra bu hello okuma-yazma dinleyicisi kullanılabilir olacağı ve hello çağrıları tooit başarısız durduracak.</span><span class="sxs-lookup"><span data-stu-id="960e7-203">After that hello read-write listener will become available and hello calls tooit will stop failing.</span></span> <span data-ttu-id="960e7-204">Bu diyagramda aşağıdaki hello tarafından gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="960e7-204">This is illustrated by hello following diagram.</span></span>

![Kesinti: Uygulama salt okunur modda.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-2.png)

<span data-ttu-id="960e7-207">Merhaba kesinti hello birincil bölgede hello yetkisiz kullanım süresi içinde azaltılan, trafik Yöneticisi bağlantı hello geri hello birincil bölgede algılar ve kullanıcı trafiğinin geri toohello uygulama örneği A. bölgede geçer Bu uygulama örneği sürdürür ve bölge A. hello birincil veritabanı kullanarak okuma-yazma modunda çalışır</span><span class="sxs-lookup"><span data-stu-id="960e7-207">If hello outage in hello primary region is mitigated within hello grace period, traffic manager detects hello restoration of connectivity in hello primary region and switches user traffic back toohello application instance in region A. That application instance resumes and operates in read-write mode using hello primary database in region A.</span></span>

<span data-ttu-id="960e7-208">Bölge B ve hello yük devretme grubu anahtarları hello salt okunur dinleyici tooregion A. hello trafik Yöneticisi B hello bölgede kesinti durumunda, hello uygulama uç noktası hello başarısızlığını algılar Bu kesinti hello son kullanıcı deneyimi olumsuz etkilemez ancak hello birincil veritabanı hello kesintisi sırasında sunulur.</span><span class="sxs-lookup"><span data-stu-id="960e7-208">In case of an outage in hello region B, hello traffic manager detects hello failure of hello application end-point in region B and hello failover group switches hello read-only listener tooregion A. This outage does not impact hello end-user experience but hello primary database will be exposed during hello outage.</span></span> <span data-ttu-id="960e7-209">Bu diyagramda aşağıdaki hello tarafından gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="960e7-209">This is illustrated by hello following diagram.</span></span>

![Kesinti: İkincil veritabanı.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-3.png)

<span data-ttu-id="960e7-212">Hello kesinti azaltıldığından sonra hello ikincil veritabanı hemen hello birincil ile eşitlenir ve hello salt okunur dinleyicisi anahtarlı geri toohello ikincil veritabanı bölgede b Eşitleme sırasında hello birincil performansını hello eşitlenen toobe gereken veri miktarı bağlı olarak biraz etkilenebilir.</span><span class="sxs-lookup"><span data-stu-id="960e7-212">Once hello outage is mitigated, hello secondary database is immediately synchronized with hello primary and hello read-only listener is switched back toohello secondary database in region B. During synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span>

<span data-ttu-id="960e7-213">Bu tasarım deseni vardır **avantajları**:</span><span class="sxs-lookup"><span data-stu-id="960e7-213">This design pattern has several **advantages**:</span></span>

* <span data-ttu-id="960e7-214">Merhaba geçici kesintileri sırasında veri kaybı ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="960e7-214">It avoids data loss during hello temporary outages.</span></span>
* <span data-ttu-id="960e7-215">Kapalı kalma süresi yalnızca nasıl hızlı bir şekilde trafik Yöneticisi yapılandırılabilir hello bağlantı hatası algılar üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="960e7-215">Downtime depends only on how quickly traffic manager detects hello connectivity failure, which is configurable.</span></span>

<span data-ttu-id="960e7-216">Merhaba **kolaylığını** değil:</span><span class="sxs-lookup"><span data-stu-id="960e7-216">hello **tradeoff** is:</span></span>

* <span data-ttu-id="960e7-217">Uygulamanın mümkün toooperate salt okunur modda olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="960e7-217">Application must be able toooperate in read-only mode.</span></span>

> [!NOTE]
> <span data-ttu-id="960e7-218">Bir kalıcı hizmet kesintisi hello bölgede olması durumunda, el ile veritabanı yük devretme etkinleştirmek ve hello veri kaybı kabul edin.</span><span class="sxs-lookup"><span data-stu-id="960e7-218">In case of a permanent service outage in hello region, you manually activate database failover and accept hello data loss.</span></span> <span data-ttu-id="960e7-219">Merhaba uygulaması hello ikincil bölge okuma-yazma erişimi toohello veritabanıyla işlevsel olacaktır.</span><span class="sxs-lookup"><span data-stu-id="960e7-219">hello application will be functional in hello secondary region with read-write access toohello database.</span></span>
>

## <a name="business-continuity-planning-choose-an-application-design-for-cloud-disaster-recovery"></a><span data-ttu-id="960e7-220">İş sürekliliği planlama: Bulut olağanüstü durum kurtarma için bir uygulama tasarımı seçin</span><span class="sxs-lookup"><span data-stu-id="960e7-220">Business continuity planning: Choose an application design for cloud disaster recovery</span></span>
<span data-ttu-id="960e7-221">Özel bulut olağanüstü durum kurtarma stratejiniz birleştirin veya bu tasarım desenleri toobest uygulamanızın ihtiyaçlarını karşılayan hello genişletin.</span><span class="sxs-lookup"><span data-stu-id="960e7-221">Your specific cloud disaster recovery strategy can combine or extend these design patterns toobest meet hello needs of your application.</span></span>  <span data-ttu-id="960e7-222">Daha önce belirtildiği gibi seçtiğiniz hello stratejisi toooffer tooyour müşteriler istediğiniz ve uygulama dağıtım topolojisi hello SLA hello üzerinde temel alır.</span><span class="sxs-lookup"><span data-stu-id="960e7-222">As mentioned earlier, hello strategy you choose is based on hello SLA you want toooffer tooyour customers and hello application deployment topology.</span></span> <span data-ttu-id="960e7-223">toohelp kararınızı Kılavuzu, aşağıdaki tablonun hello hello tahmini veri kaybı veya kurtarma noktası hedefi (RPO) ve tahmini kurtarma süresini (Ekle) göre hello seçimler karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="960e7-223">toohelp guide your decision, hello following table compares hello choices based on hello estimated data loss or recovery point objective (RPO) and estimated recovery time (ERT).</span></span>

| <span data-ttu-id="960e7-224">düzeni</span><span class="sxs-lookup"><span data-stu-id="960e7-224">Pattern</span></span> | <span data-ttu-id="960e7-225">RPO</span><span class="sxs-lookup"><span data-stu-id="960e7-225">RPO</span></span> | <span data-ttu-id="960e7-226">EKLE</span><span class="sxs-lookup"><span data-stu-id="960e7-226">ERT</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="960e7-227">Aktif-Pasif dağıtım birlikte bulunan veritabanı erişimi olan olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="960e7-227">Active-passive deployment for disaster recovery with co-located database access</span></span> |<span data-ttu-id="960e7-228">Okuma-yazma erişimi < 5 saniye</span><span class="sxs-lookup"><span data-stu-id="960e7-228">Read-write access < 5 sec</span></span> |<span data-ttu-id="960e7-229">Hata algılama süresi + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="960e7-229">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="960e7-230">Uygulama Yük Dengeleme için etkin-etkin dağıtım</span><span class="sxs-lookup"><span data-stu-id="960e7-230">Active-active deployment for application load balancing</span></span> |<span data-ttu-id="960e7-231">Okuma-yazma erişimi < 5 saniye</span><span class="sxs-lookup"><span data-stu-id="960e7-231">Read-write access < 5 sec</span></span> |<span data-ttu-id="960e7-232">Hata algılama süresi + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="960e7-232">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="960e7-233">Veri koruma için Aktif-Pasif dağıtımı</span><span class="sxs-lookup"><span data-stu-id="960e7-233">Active-passive deployment for data preservation</span></span> |<span data-ttu-id="960e7-234">Salt okunur erişim < 5 saniye</span><span class="sxs-lookup"><span data-stu-id="960e7-234">Read-only access < 5 sec</span></span> | <span data-ttu-id="960e7-235">Salt okunur erişim = 0</span><span class="sxs-lookup"><span data-stu-id="960e7-235">Read-only access = 0</span></span> |
||<span data-ttu-id="960e7-236">Okuma-yazma erişimi sıfır =</span><span class="sxs-lookup"><span data-stu-id="960e7-236">Read-write access = zero</span></span> | <span data-ttu-id="960e7-237">Okuma-yazma erişimi = hatası algılama zamanı + veri kaybı yetkisiz kullanım süresi</span><span class="sxs-lookup"><span data-stu-id="960e7-237">Read-write access = Failure detection time + grace period with data loss</span></span> |
|||

## <a name="next-steps"></a><span data-ttu-id="960e7-238">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="960e7-238">Next steps</span></span>
* <span data-ttu-id="960e7-239">Azure SQL veritabanı otomatik yedeklemeler hakkında toolearn bakın [SQL veritabanı otomatik yedeklemeler](sql-database-automated-backups.md)</span><span class="sxs-lookup"><span data-stu-id="960e7-239">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md)</span></span>
* <span data-ttu-id="960e7-240">İş sürekliliğine genel bakış ve senaryolar için bkz: [iş sürekliliğine genel bakış](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="960e7-240">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="960e7-241">Kurtarma için otomatik yedeklemeler kullanma hakkında toolearn bakın [bir veritabanı hello hizmeti tarafından başlatılan yedeklerden geri yükleme](sql-database-recovery-using-backups.md)</span><span class="sxs-lookup"><span data-stu-id="960e7-241">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md)</span></span>
* <span data-ttu-id="960e7-242">toolearn daha hızlı kurtarma seçenekleri hakkında bkz [aktif coğrafi çoğaltma](sql-database-geo-replication-overview.md)</span><span class="sxs-lookup"><span data-stu-id="960e7-242">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md)</span></span>  
* <span data-ttu-id="960e7-243">arşivleme için otomatik yedeklemeler kullanma hakkında toolearn bakın [veritabanı kopyalama](sql-database-copy.md)</span><span class="sxs-lookup"><span data-stu-id="960e7-243">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md)</span></span>
* <span data-ttu-id="960e7-244">Esnek havuzlar etkin coğrafi çoğaltma hakkında daha fazla bilgi için bkz: [esnek havuz olağanüstü durum kurtarma stratejilerini](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="960e7-244">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
