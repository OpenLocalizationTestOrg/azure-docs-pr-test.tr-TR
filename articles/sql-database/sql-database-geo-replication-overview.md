---
title: "aaaFailover grupları ve etkin coğrafi çoğaltma - Azure SQL veritabanı | Microsoft Docs"
description: "Aktif coğrafi çoğaltma otomatik yük devretme gruplarıyla toosetup 4 çoğaltmalarını veritabanınızın herhangi bir hello Azure veri merkezleri ve kesinti hello olayı içinde autoomatically yük devretme sağlar."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="38be4-103">Genel Bakış: Yük devretme grupları ve etkin coğrafi çoğaltma</span><span class="sxs-lookup"><span data-stu-id="38be4-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="38be4-104">Aktif coğrafi çoğaltma toofour okunabilir ikincil veritabanlarını hello içinde tooconfigure sağlar aynı veya farklı veri merkezi konumlarını (bölge).</span><span class="sxs-lookup"><span data-stu-id="38be4-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="38be4-105">İkincil veritabanları, yük devretme hello durumda bir veri merkezi kesintisi veya hello bağlanamama tooconnect toohello birincil veritabanının ve sorgulama için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="38be4-106">Merhaba yük devretme hello kullanıcı hello uygulama tarafından el ile başlatılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="38be4-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="38be4-107">Yük devretme sonrasında hello yeni birincil farklı bağlantı uç noktası vardır.</span><span class="sxs-lookup"><span data-stu-id="38be4-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="38be4-108">Aktif coğrafi çoğaltma, tüm hizmet katmanlarında tüm bölgelerde tüm veritabanları için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="38be4-109">Azure SQL veritabanı otomatik yük devretme grupları (Önizleme-) olan bir SQL veritabanı tasarlanmış özelliği tooautomatically coğrafi çoğaltma ilişkisi, bağlantı ve yük devretme ölçekte yönetme.</span><span class="sxs-lookup"><span data-stu-id="38be4-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="38be4-110">Bununla, hello müşteriler kazanç hello özelliği tooautomatically kurtarmak hello ikincil bölge içinde birden çok ilişkili veritabanlarını geri dönülemez bölgesel arızalara veya SQL veritabanı hizmetinin tam veya kısmi hello kaybına neden diğer planlanmamış olayları sonra Merhaba birincil bölge'de kullanılabilirliği.</span><span class="sxs-lookup"><span data-stu-id="38be4-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="38be4-111">Ayrıca, bunlar Merhaba, okunabilir ikincil veritabanları toooffload salt okunur iş yükleri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="38be4-112">Otomatik Yük devretme grupları birden çok veritabanı içerdiğinden hello birincil sunucuda yapılandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="38be4-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="38be4-113">Birincil ve ikincil sunucular hello olmalıdır aynı abonelik.</span><span class="sxs-lookup"><span data-stu-id="38be4-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="38be4-114">Otomatik Yük devretme grupları tüm veritabanlarının çoğaltma hello Grup tooonly bir ikincil sunucu farklı bir bölgede destekler.</span><span class="sxs-lookup"><span data-stu-id="38be4-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="38be4-115">Tüm bölgelerdeki too4 ikinciller yukarı etkin coğrafi çoğaltma, otomatik yük devretme grupları olmadan sağlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="38be4-116">Aktif coğrafi çoğaltma kullanıyorsanız ve nedeni, birincil veritabanı başarısız veya yalnızca çevrimdışına gereksinimlerini toobe yük devretme tooany ikincil veritabanlarınızın başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="38be4-117">Yük devretme hello ikincil veritabanları etkinleştirilmiş tooone olduğunda, diğer tüm ikinciller otomatik olarak bağlantılı toohello olan yeni birincil.</span><span class="sxs-lookup"><span data-stu-id="38be4-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="38be4-118">Otomatik Yük devretme kullanıyorsanız (Önizleme-) toomanage veritabanını kurtarma ve bir veya birkaç hello grubu otomatik yük devretme sonuçlarında hello veritabanlarında etkiler herhangi kesinti gruplandırır.</span><span class="sxs-lookup"><span data-stu-id="38be4-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="38be4-119">Uygulamanızın gereksinimlerine en iyi karşılayan hello otomatik yük devretme İlkesi yapılandırabilir veya devre dışı bırakmak ve el ile etkinleştirme kullanın.</span><span class="sxs-lookup"><span data-stu-id="38be4-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="38be4-120">Ayrıca, otomatik yük devretme grupları (Önizleme-) okuma-yazma sağlayın ve yük devretme işlemleri sırasında kalır salt okunur dinleyicisi uç noktalarının değişmedi.</span><span class="sxs-lookup"><span data-stu-id="38be4-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="38be4-121">El ile veya otomatik yük devretme etkinleştirme kullanıp, yük devretme tüm ikincil veritabanları hello Grup tooprimary geçer.</span><span class="sxs-lookup"><span data-stu-id="38be4-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="38be4-122">Merhaba veritabanı yük devretme tamamlandıktan sonra hello DNS kaydı otomatik olarak güncelleştirilen tooredirect hello uç noktalarının toohello yeni bölgedir.</span><span class="sxs-lookup"><span data-stu-id="38be4-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="38be4-123">Çoğaltma ve tek bir veritabanının yük devretmesi veya bir sunucuya veya aktif coğrafi çoğaltma kullanarak esnek havuzdaki veritabanları kümesi yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="38be4-124">Bu kullanarak yapabilirsiniz hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), veya hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="38be4-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="38be4-125">Yük devretme sonrasında hello yeni birincil sunucu ve veritabanı hello kimlik doğrulama gereksinimleri yapılandırılmış emin olun.</span><span class="sxs-lookup"><span data-stu-id="38be4-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="38be4-126">Ayrıntılar için bkz [olağanüstü durum kurtarma işleminden sonra SQL veritabanı güvenlik](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="38be4-127">Bu, her iki tooactive coğrafi çoğaltma ve otomatik yük devretme grupları (Önizleme-) uygulanır.</span><span class="sxs-lookup"><span data-stu-id="38be4-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="38be4-128">Aktif coğrafi çoğaltma yararlanır hello [her zaman açık](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) SQL Server tooasynchronously teknolojisini çoğaltmak Okunmuş kaydedilen anlık görüntü yalıtım (RCSI) kullanarak hello birincil veritabanı tooa ikincil veritabanı üzerinde yürütülen işlemler.</span><span class="sxs-lookup"><span data-stu-id="38be4-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="38be4-129">Otomatik Yük devretme grupları aktif coğrafi çoğaltma, ancak aynı zaman uyumsuz çoğaltma mekanizması kullanılan hello üstünde hello Grup semantiği sağlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="38be4-130">Herhangi bir noktada belirtilen sırada, hello ikincil veritabanı hello birincil veritabanı biraz olabilir, hello ikincil veri garanti toonever kısmi işlemler vardır.</span><span class="sxs-lookup"><span data-stu-id="38be4-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="38be4-131">Çapraz bölge artıklık uygulamaları tooquickly bozulmayı kalıcı kaybı veri merkezinin tamamı veya doğal afetler, geri dönülemez insan hataları veya kötü amaçlı davranışlara neden bir veri merkezinde bölümlerini etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="38be4-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="38be4-132">Merhaba belirli RPO veri bulunabilir [iş sürekliliği genel bakış](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="38be4-133">Merhaba aşağıdaki şekilde bir örneği aktif coğrafi çoğaltma yapılandırılmış ile Merhaba bölgede Kuzey Orta ABD birincil ve ikincil hello Orta Güney ABD bölgesinde gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="38be4-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![coğrafi çoğaltma ilişkisi](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="38be4-135">Merhaba ikincil veritabanlarıyla okunabilir olduğundan, bunlar raporlama işleri gibi kullanılan toooffload salt okunur iş yükleri olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="38be4-136">Aktif coğrafi çoğaltma kullanıyorsanız, olası toocreate hello ikincil veritabanı olan hello hello birincil, ancak aynı bölgede hello uygulamanın esnekliği toocatastrophic hatalarını artmaz.</span><span class="sxs-lookup"><span data-stu-id="38be4-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="38be4-137">Otomatik Yük devretme grupları (Önizleme-) kullanıyorsanız, ikincil veritabanınıza her zaman farklı bir bölgede oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="38be4-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="38be4-138">Ayrıca toodisaster kurtarma etkin coğrafi çoğaltma senaryoları aşağıdaki hello kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="38be4-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="38be4-139">**Veritabanı geçiş**: en düşük kapalı kalma süresi ile aktif coğrafi çoğaltma toomigrate çevrimiçi bir sunucu tooanother veritabanından kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="38be4-140">**Uygulama yükseltme**: uygulama yükseltmeler sırasında başarısız geri kopya olarak fazladan bir ikincil oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="38be4-141">veri merkezleri arasında veritabanı artıklığı ekleme tooachieve gerçek iş sürekliliği hello çözüm yalnızca bir parçası olur.</span><span class="sxs-lookup"><span data-stu-id="38be4-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="38be4-142">Yıkıcı bir hatadan kurtarma hello hizmeti oluşturan tüm bileşenleri ve bağımlı hizmetlerin gerektirir sonra bir uygulama (hizmeti) uçtan uca kurtarma.</span><span class="sxs-lookup"><span data-stu-id="38be4-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="38be4-143">Bu bileşenlerin örnekleri hello istemci yazılımı (örneğin, bir tarayıcı özel bir JavaScript ile), web ön uçları, depolama ve DNS içerir.</span><span class="sxs-lookup"><span data-stu-id="38be4-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="38be4-144">Tüm bileşenleri dayanıklı toohello aynı hatalarıdır ve hello kurtarma süresi hedefi, uygulamanızın içinde (RTO) kullanılabilir hale kritik öneme sahiptir.</span><span class="sxs-lookup"><span data-stu-id="38be4-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="38be4-145">Bu nedenle, tüm bağımlı hizmetlerin tooidentify gerekir ve hello garanti ve sağladıkları yetenekleri anladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="38be4-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="38be4-146">Ardından, bağımlı olduğu hello Hizmetleri yük devretmesi sırasında hizmetinizin hello yeterli adımları tooensure almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="38be4-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="38be4-147">Olağanüstü durum kurtarma çözümleri tasarlama hakkında daha fazla bilgi için bkz: [olağanüstü durum kurtarma'yı kullanarak etkin coğrafi çoğaltma için bulut çözümleri tasarlama](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="38be4-148">Aktif coğrafi çoğaltma özellikleri</span><span class="sxs-lookup"><span data-stu-id="38be4-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="38be4-149">Merhaba aktif coğrafi çoğaltma özelliği temel özelliklerini aşağıdaki hello sağlar:</span><span class="sxs-lookup"><span data-stu-id="38be4-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="38be4-150">**Otomatik olarak zaman uyumsuz çoğaltma**: tooan varolan veritabanı ekleyerek yalnızca ikincil bir veritabanı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="38be4-151">Merhaba ikincil herhangi bir Azure SQL veritabanı sunucusu oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="38be4-152">Bir kez oluşturduktan sonra hello ikincil veritabanı hello birincil veritabanından kopyalanan hello verilerle doldurulur.</span><span class="sxs-lookup"><span data-stu-id="38be4-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="38be4-153">Bu işlem, dengeli olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="38be4-153">This process is known as seeding.</span></span> <span data-ttu-id="38be4-154">İkincil veritabanı oluşturulan ve dağıtılan sonra toohello birincil veritabanı olan zaman uyumsuz olarak güncelleştirmeleri toohello ikincil veritabanı otomatik olarak çoğaltılıyor.</span><span class="sxs-lookup"><span data-stu-id="38be4-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="38be4-155">Zaman uyumsuz çoğaltma çoğaltılmış toohello ikincil veritabanı önce işlemleri hello birincil veritabanında yapıldığından anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="38be4-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="38be4-156">**Okunabilir ikincil veritabanları**: bir uygulama kullanarak salt okunur işlemler hello aynı veya farklı güvenlik sorumluları kullanılan hello birincil veritabanına erişmek için ikincil bir veritabanı erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="38be4-157">Merhaba ikincil veritabanlarıyla çalışır anlık görüntü yalıtımı modu tooensure çoğaltma (günlük yeniden yürütme) hello güncelleştirmelerinin hello birincil, ikincil hello sorgular tarafından Gecikmeli değil.</span><span class="sxs-lookup"><span data-stu-id="38be4-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="38be4-158">Merhaba hello ikincil veritabanında bir şema kilidi iste birincil gelen aldığından emin şema güncelleştirmeleri varsa hello günlük yeniden yürütme hello ikincil veritabanı üzerinde ertelendi.</span><span class="sxs-lookup"><span data-stu-id="38be4-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="38be4-159">**Birden çok okunabilir ikinciller**: iki veya daha fazla ikincil veritabanları artırmak artıklık ve hello birincil veritabanı ve uygulama için bir koruma düzeyi.</span><span class="sxs-lookup"><span data-stu-id="38be4-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="38be4-160">Birden fazla ikincil veritabanı yoksa, hello ikincil veritabanlarından birini başarısız olsa bile Merhaba uygulaması korumalı olarak kalır.</span><span class="sxs-lookup"><span data-stu-id="38be4-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="38be4-161">Yalnızca bir ikincil veritabanı yoktur ve bu başarısız olursa, Merhaba uygulaması sunulan yeni bir ikincil veritabanı oluşturulana kadar toohigher risk.</span><span class="sxs-lookup"><span data-stu-id="38be4-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="38be4-162">Aktif coğrafi çoğaltma toobuild genel olarak dağıtılmış bir uygulamayı kullanıyorsanız ve 4'ten fazla bölgelerdeki toodata tooprovide salt okunur erişim varsa, ikincil (zincirleme olarak bilinen işlem), ikincil oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="38be4-163">Bu şekilde veritabanı çoğaltma neredeyse sınırsız ölçeği elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="38be4-164">Ayrıca, zincirleme hello birincil veritabanı çoğaltmasını hello ek yükünü azaltır.</span><span class="sxs-lookup"><span data-stu-id="38be4-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="38be4-165">Merhaba dengelemeyi hello artan çoğaltma gecikmesi hello yaprak çoğu ikincil veritabanlarında ' dir.</span><span class="sxs-lookup"><span data-stu-id="38be4-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="38be4-166">.</span><span class="sxs-lookup"><span data-stu-id="38be4-166">.</span></span> 
   >

* <span data-ttu-id="38be4-167">**Esnek havuz veritabanlarının Destek**: aktif coğrafi çoğaltma, herhangi bir esnek havuzdaki herhangi bir veritabanı için yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="38be4-168">Merhaba ikincil veritabanını başka bir esnek havuzda olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="38be4-169">Normal veritabanları için hello ikincil bir esnek havuz olmalı ve bunun tersi de aynı hello hello hizmet katmanları olduğu sürece.</span><span class="sxs-lookup"><span data-stu-id="38be4-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="38be4-170">**Merhaba ikincil veritabanının yapılandırılabilir performans düzeyini**: ikincil bir veritabanı hello daha düşük performans düzeyine sahip birincil oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="38be4-171">Birincil ve ikincil veritabanları gerekli toohave hello aynı hizmet katmanı.</span><span class="sxs-lookup"><span data-stu-id="38be4-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="38be4-172">Bir yük devretme sonrasında önemli veri kaybı hello Hello artan çoğaltma gecikmesi artırır çünkü bu seçenek yüksek veritabanı yazma etkinliği ile uygulamalar için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="38be4-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="38be4-173">Merhaba kadar Yeni Yük devretme hello uygulamanızın performansı etkilenir sonra ek olarak, birincil yükseltilmiş tooa daha yüksek performans düzeyi.</span><span class="sxs-lookup"><span data-stu-id="38be4-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="38be4-174">Merhaba günlük GÇ yüzdesi grafik Azure Portal'daki sağlar en iyi yolu tooestimate hello en az düzeyde performans gerekli toosustain hello çoğaltma yükü hello ikincil düzeyini.</span><span class="sxs-lookup"><span data-stu-id="38be4-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="38be4-175">Örneğin, birincil veritabanı P6 ise (1000 DTU) ve kendi günlük GÇ yüzde %50 hello ikincil gereken toobe en az P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="38be4-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="38be4-176">Merhaba günlük GÇ kullanarak verileri de alabilirsiniz [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) veya [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) veritabanı görünümleri.</span><span class="sxs-lookup"><span data-stu-id="38be4-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="38be4-177">Merhaba SQL veritabanı performans düzeyleri hakkında daha fazla bilgi için bkz: [SQL Database seçenekleri ve performansı](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="38be4-178">**Kullanıcı tarafından denetlenen yük devretme ve yeniden çalışma**: ikincil bir veritabanı açıkça hello uygulama veya hello kullanıcı tarafından herhangi bir zamanda anahtarlı toohello birincil rolü olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="38be4-179">Gerçek kesinti hello sırasında "planlanmamış" seçeneği, hangi hemen ikincil toobe hello birincil yükseltir kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="38be4-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="38be4-180">Merhaba başarısız birincil kurtarır ve kullanılabilir olduğunda yeniden hello sistem otomatik olarak işaretleri hello ikincil olarak birincil kurtarıldı ve hello yeni birincil ile güncel duruma getirmek.</span><span class="sxs-lookup"><span data-stu-id="38be4-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="38be4-181">Merhaba en son değişiklikleri toohello ikincil çoğaltılmadan önce birincil başarısız olursa toohello zaman uyumsuz yapısı çoğaltma, çok küçük miktarda veri planlanmamış yük devretme işlemleri sırasında kaybolur.</span><span class="sxs-lookup"><span data-stu-id="38be4-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="38be4-182">Birden fazla ikincil kopya ile birincil devrettiğinde hello sistem hello çoğaltma ilişkileri otomatik olarak yeniden yapılandırır ve kullanıcı müdahalesi gerektirmeden birincil ikinciller toohello yeni kalan bağlantılar hello yükseltilmiş.</span><span class="sxs-lookup"><span data-stu-id="38be4-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="38be4-183">Merhaba yük devretme neden hello kesinti azaltıldığından sonra arzu tooreturn hello uygulama toohello birincil bölge olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="38be4-184">Merhaba yük devri komutu ile Merhaba çağrılır, toodo "seçeneği planlanan".</span><span class="sxs-lookup"><span data-stu-id="38be4-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="38be4-185">**Kimlik bilgileri ve güvenlik duvarı kuralları eşitlenmiş şekilde kalmasının**: kullanmanızı öneririz [veritabanı güvenlik duvarı kuralları](sql-database-firewall-configure.md) veritabanları için coğrafi olarak çoğaltılmış hello veritabanı tooensure ile bu kuralları çoğaltılabilir tüm ikincil veritabanlarına sahip, bu nedenle Merhaba birincil olarak aynı güvenlik duvarı kuralları hello.</span><span class="sxs-lookup"><span data-stu-id="38be4-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="38be4-186">Bu yaklaşım toomanually hem hello birincil ve ikincil veritabanlarını barındıran sunucular üzerinde güvenlik duvarı kuralları yapılandırıp müşteriler hello gereksinimini ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="38be4-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="38be4-187">Benzer şekilde, kullanarak [bulunan veritabanı kullanıcıları](sql-database-manage-logins.md) birincil ve ikincil veritabanları her zaman aynı kullanıcı kimlik bilgileri bir yük devretme sırasında; böylece herhangi kesinti hello sahip erişim verilerini sağlar oturumları ile son toomismatches ve parolalar.</span><span class="sxs-lookup"><span data-stu-id="38be4-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="38be4-188">Merhaba eklenmesi ile [Azure Active Directory](../active-directory/active-directory-whatis.md), müşteriler, kullanıcı, erişim tooboth birincil ve ikincil veritabanları yönetebilir ve hello ortadan gereken kimlik bilgilerini veritabanlarında tamamen yönetmek için.</span><span class="sxs-lookup"><span data-stu-id="38be4-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="38be4-189">Otomatik Yük devretme grubu özellikleri</span><span class="sxs-lookup"><span data-stu-id="38be4-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="38be4-190">Otomatik Yük devretme grupları özelliği, grup düzeyinde çoğaltma ve otomatik yük devretme destekleyerek aktif coğrafi çoğaltma, güçlü bir Özet sağlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="38be4-191">Ayrıca, hello ek dinleyicisi uç noktalarının sağlayarak yük devretme sonrasında hello gerekliliğini toochange hello SQL bağlantı dizesi kaldırır.</span><span class="sxs-lookup"><span data-stu-id="38be4-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="38be4-192">**Yük devretme grubu**: farklı bölgelerde (birincil ve ikincil sunucular) iki sunucu arasında bir veya daha çok yük devretme grupları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="38be4-193">Her grup tüm veya bazı birincil veritabanı hello birincil bölgede tooan kesilmesi nedeniyle kullanılamaz hale durumunda, bir birim olarak kurtarılan bir veya daha çok veritabanı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="38be4-194">**Birincil sunucu**: hello yük devretme grubundaki hello birincil veritabanı barındıran bir sunucu.</span><span class="sxs-lookup"><span data-stu-id="38be4-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="38be4-195">**İkincil sunucu**: hello yük devretme grubundaki hello ikincil veritabanı barındıran bir sunucu.</span><span class="sxs-lookup"><span data-stu-id="38be4-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="38be4-196">Merhaba ikincil sunucu hello olamaz hello birincil sunucu ile aynı bölgeye.</span><span class="sxs-lookup"><span data-stu-id="38be4-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="38be4-197">**Ekleme veritabanları toofailover grubu**: bir sunucu içindeki birden fazla veritabanı put veya hello aynı içinde bir esnek havuz yük devretme grubu.</span><span class="sxs-lookup"><span data-stu-id="38be4-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="38be4-198">Bir tek başına veritabanı toohello grubu eklerseniz, ikincil bir veritabanı otomatik olarak oluşturur kullanarak hello aynı sürüme ve performans düzeyi.</span><span class="sxs-lookup"><span data-stu-id="38be4-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="38be4-199">Merhaba birincil veritabanını bir esnek havuz ise, hello ikincil otomatik olarak hello esnek havuzda hello ile aynı oluşturulan adı.</span><span class="sxs-lookup"><span data-stu-id="38be4-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="38be4-200">İkincil bir veritabanı hello ikincil sunucuya zaten bir veritabanı eklerseniz, bu coğrafi çoğaltma hello grubu tarafından devralınır.</span><span class="sxs-lookup"><span data-stu-id="38be4-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="38be4-201">İkincil bir veritabanı hello yük devretme grubunun parçası olmayan bir sunucu zaten bir veritabanı eklerken, yeni ikincil hello ikincil sunucuya oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="38be4-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="38be4-202">**Yük devretme grubu okuma-yazma dinleyicisi**: DNS CNAME kaydı biçimlendirilmiş olarak  **&lt;yük devretme grup adı&gt;. database.windows.net** toohello geçerli birincil sunucu URL noktaları.</span><span class="sxs-lookup"><span data-stu-id="38be4-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="38be4-203">Okuma-yazma SQL uygulamaların hello sağlayan tootransparently hello birincil yük devretme sonrasında değiştiğinde toohello birincil veritabanı yeniden bağlanın.</span><span class="sxs-lookup"><span data-stu-id="38be4-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="38be4-204">**Yük devretme grubu salt okunur dinleyicisi**: DNS CNAME kaydı biçimlendirilmiş olarak  **&lt;yük devretme grup adı&gt;. secondary.database.windows.net** toohello ikincil sunucu URL'SİNİN işaret.</span><span class="sxs-lookup"><span data-stu-id="38be4-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="38be4-205">Tootransparently bağlanmak salt okunur SQL uygulamaların hello sağlayan hello kullanarak toohello ikincil veritabanını belirtilen yük dengeleyici kuralları.</span><span class="sxs-lookup"><span data-stu-id="38be4-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="38be4-206">İsteğe bağlı olarak, salt okunur hello istiyorsanız hello ikincil sunucu kullanılamadığında trafiği toobe otomatik olarak toohello birincil sunucu yeniden yönlendirilmiş belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="38be4-207">**Otomatik Yük devretme İlkesi**: varsayılan olarak, hello yük devretme grubu otomatik yük devretme İlkesi ile yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="38be4-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="38be4-208">Merhaba hatası algılandı hemen hello sistem yük devretmeyi tetikler.</span><span class="sxs-lookup"><span data-stu-id="38be4-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="38be4-209">Merhaba uygulaması toocontrol hello yük devretme iş akışını istiyorsanız, devre dışı otomatik yük devretme kapatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="38be4-210">**El ile yük devretme**: yük devretme el ile Merhaba otomatik yük devretme yapılandırması bağımsız olarak herhangi bir zamanda başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="38be4-211">Otomatik Yük devretme İlkesi yapılandırılmış el ile yük devretme değilse hello yük devretme grubundaki gerekli toorecover veritabanlarının olur.</span><span class="sxs-lookup"><span data-stu-id="38be4-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="38be4-212">(İle tam veri eşitlemesi) zorlanmış veya kolay yük devretme işlemi başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="38be4-213">Merhaba ikinci kullanılan toorelocate hello active server toohello birincil bölge olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="38be4-214">Yük devretme tamamlandığında hello DNS kayıtları otomatik olarak güncelleştirilen tooensure bağlantı toohello doğru sunucuyu belirtir.</span><span class="sxs-lookup"><span data-stu-id="38be4-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="38be4-215">**Veri kaybı yetkisiz kullanım süresi**: hello birincil ve ikincil veritabanları kullanarak eşitlenmiş olduğundan zaman uyumsuz çoğaltma hello yük devretme veri kaybına neden.</span><span class="sxs-lookup"><span data-stu-id="38be4-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="38be4-216">Uygulamanızın dayanıklılık toodata kaybı hello otomatik yük devretme İlkesi tooreflect özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="38be4-217">Yapılandırarak **GracePeriodWithDataLossHours**, hello sistem büyük olasılıkla tooresult veri kaybı hello yük devretmeyi başlatmadan önce bekleyeceği süreyi kontrol edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="38be4-218">Sistem algıladığında hello grubundaki hello veritabanlarının hala çevrimiçi olduğu (örneğin, hello kesinti yalnızca hello hizmet denetim düzlemi etkilenebilir) hello değer bağımsız olarak tam veri eşitlemesi (kolay yük devretme) ile Merhaba yük devretme hemen etkinleştirir tarafından belirlenen **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="38be4-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="38be4-219">Bu davranış hello Kurtarma sırasında veri kaybı olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="38be4-220">yalnızca kolay bir yük devretme olası olmadığında hello yetkisiz kullanım süresi etkinleşir.</span><span class="sxs-lookup"><span data-stu-id="38be4-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="38be4-221">Merhaba yetkisiz kullanım süresi dolmadan hello kesinti azaltılan, hello yük devretme etkinleştirilmedi.</span><span class="sxs-lookup"><span data-stu-id="38be4-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="38be4-222">**Birden çok yük devretme grubu**: hello için birden çok yük devretme grupları yapılandırabilirsiniz sunucuları toocontrol hello yerine ölçeğini aynı çifti.</span><span class="sxs-lookup"><span data-stu-id="38be4-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="38be4-223">Her grubu üzerinden bağımsız olarak başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="38be4-223">Each group fails over independently.</span></span> <span data-ttu-id="38be4-224">Çok kiracılı uygulamanızı esnek havuzlar kullanıyorsa, bu yetenek toomix birincil ve ikincil veritabanları her havuzda kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="38be4-225">Bu şekilde bir kesinti tooonly hello etkisini hello kiracılar yarısı azaltabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="38be4-226">Yüksek oranda kullanılabilir hizmet oluşturmanın en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="38be4-226">Best practices of building highly available service</span></span>

<span data-ttu-id="38be4-227">Azure SQL veritabanı hello müşteriler kullanan yüksek oranda kullanılabilir bir hizmet toobuild şu yönergeleri izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="38be4-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="38be4-228">**Yük devretme grup**: farklı bölgelerde (birincil ve ikincil sunucular) iki sunucu arasında bir veya daha çok yük devretme grupları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="38be4-229">Her grup tüm veya bazı birincil veritabanı hello birincil bölgede tooan kesilmesi nedeniyle kullanılamaz hale durumunda, bir birim olarak kurtarılan bir veya daha çok veritabanı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="38be4-230">Merhaba yük devretme grubu ikincil coğrafi çoğaltmalı veritabanı ile aynı olarak birincil hello hedefi hizmet hello oluşturur.</span><span class="sxs-lookup"><span data-stu-id="38be4-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="38be4-231">Aynı hizmet düzeyi hedefi olarak hello ile yapılandırılmış bir varolan coğrafi çoğaltma ilişkisi toohello yük devretme grubu yapma emin hello coğrafi-ikincil eklerseniz, birincil hello.</span><span class="sxs-lookup"><span data-stu-id="38be4-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="38be4-232">**OLTP iş yükü için okuma-yazma dinleyici kullanın**: OLTP işlemleri kullanım gerçekleştirirken  **&lt;yük devretme grup adı&gt;. database.windows.net** hello sunucusu URL'si ve hello bağlantılar olarak otomatik olarak yönlendirilmiş toohello birincil.</span><span class="sxs-lookup"><span data-stu-id="38be4-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="38be4-233">Bu URL hello yük devretme sonrasında değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="38be4-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="38be4-234">Not hello yük devretme hello istemci bağlantılarını yeniden yönlendirilen toohello hello istemci sonra yalnızca birincil DNS Önbellek yenileninceye yeni olması için DNS kaydı hello güncelleştirilmesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="38be4-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="38be4-235">**Salt okunur iş yükü için salt okunur bir dinleyici kullanın**: dayanıklı toocertain eskime durumu verilerinin olduğu mantıksal olarak yalıtılmış bir salt okunur yükünü varsa hello ikincil veritabanı hello uygulamada kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="38be4-236">Salt okunur oturumları kullanmak için  **&lt;yük devretme grup adı&gt;. secondary.database.windows.net** otomatik olarak yönlendirilmiş toohello ikincil hello sunucusu URL'si ve hello bağlantı olarak.</span><span class="sxs-lookup"><span data-stu-id="38be4-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="38be4-237">Bağlantı dizesinde amacı kullanarak okunur belirtmek ayrıca önerilir **ApplicationIntent ReadOnly =**.</span><span class="sxs-lookup"><span data-stu-id="38be4-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="38be4-238">**Performans düşüşünü için hazır**: SQL yük devretme karardır hello geri kalanından Merhaba uygulaması ya da kullanılan diğer hizmetlerin bağımsız.</span><span class="sxs-lookup"><span data-stu-id="38be4-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="38be4-239">Merhaba uygulaması "tek bir bölge ve bazı durumlarda başka bazı bileşenleri ile karışık".</span><span class="sxs-lookup"><span data-stu-id="38be4-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="38be4-240">tooavoid hello Bozulması hello gereksiz uygulama dağıtımı hello DR bölgede emin olun ve bu makalede hello yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="38be4-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="38be4-241">Not Merhaba uygulaması hello DR bölgede toouse farklı bir bağlantı dizesi yok.</span><span class="sxs-lookup"><span data-stu-id="38be4-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="38be4-242">**Veri kaybı hazırlama**: kesinti algılanırsa, sıfır veri kaybı toohello bizim bilgisi en iyi SQL otomatik olarak okuma-yazma yük devretmeyi tetikler.</span><span class="sxs-lookup"><span data-stu-id="38be4-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="38be4-243">Aksi halde, belirtilen tarafından hello süresi için bekler **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="38be4-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="38be4-244">Belirttiyseniz **GracePeriodWithDataLossHours**, veri kaybı hazırlıklı.</span><span class="sxs-lookup"><span data-stu-id="38be4-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="38be4-245">Genel olarak, kesintiler sırasında Azure kullanılabilirlik korur.</span><span class="sxs-lookup"><span data-stu-id="38be4-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="38be4-246">Veri kaybını göze alamayacağınız emin tooset olun **GracePeriodWithDataLossHours** 24 saat gibi tooa yeterli büyüklükte numarası.</span><span class="sxs-lookup"><span data-stu-id="38be4-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="38be4-247">Yükseltme veya bir birincil veritabanı önceki sürüme indirme</span><span class="sxs-lookup"><span data-stu-id="38be4-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="38be4-248">Yükseltme veya bir birincil veritabanı tooa farklı performans düzeyini düşürmek (Merhaba içinde aynı hizmet katmanını) olmadan tüm ikincil veritabanları bağlantısı kesiliyor.</span><span class="sxs-lookup"><span data-stu-id="38be4-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="38be4-249">Yükseltme yaparken, hello ikincil veritabanı yükseltmeniz ve ardından hello birincil yükseltmeniz önerilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="38be4-250">Önceki sürüme indirme zaman hello tersine: hello birincil ilk düşürmek ve hello ikincil düşürmek.</span><span class="sxs-lookup"><span data-stu-id="38be4-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="38be4-251">Bu öneri, yükseltme veya hello veritabanı tooa farklı hizmet katmanı düşürmek uygulanır.</span><span class="sxs-lookup"><span data-stu-id="38be4-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="38be4-252">Merhaba yük devretme grubu yapılandırmasının bir parçası ikincil veritabanı oluşturduysanız şu önerilen toodowngrade hello ikincil veritabanı değil.</span><span class="sxs-lookup"><span data-stu-id="38be4-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="38be4-253">Bu tooensure olan yük devretme etkinleştirildikten sonra veri katmanı normal iş yükünüzün yeterli kapasitesi tooprocess sahiptir.</span><span class="sxs-lookup"><span data-stu-id="38be4-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="38be4-254">Merhaba kritik verilerin kaybını önleme</span><span class="sxs-lookup"><span data-stu-id="38be4-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="38be4-255">Sürekli kopyalama toohello yüksek gecikme geniş ağlar, bir zaman uyumsuz çoğaltma mekanizması kullanır.</span><span class="sxs-lookup"><span data-stu-id="38be4-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="38be4-256">Zaman uyumsuz çoğaltma bir hata oluşursa bazı veri kaybı kaçınılmaz hale getirir.</span><span class="sxs-lookup"><span data-stu-id="38be4-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="38be4-257">Ancak, bazı uygulamalar, veri kaybı gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="38be4-258">tooprotect Bu kritik güncelleştirmeler, uygulama geliştiricisi hello çağırabilir [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) hello işlemi sonlandırdı hemen sonra sistem yordamı.</span><span class="sxs-lookup"><span data-stu-id="38be4-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="38be4-259">Çağırma **sp_wait_for_database_copy_sync** hello son kaydedilmiş işlemi kadar iş parçacığı çağırma blokları hello aktarılan toohello ikincil veritabanı.</span><span class="sxs-lookup"><span data-stu-id="38be4-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="38be4-260">Ancak, yeniden ve ikincil hello kaydedilen aktarılan hello işlemleri toobe için beklemez.</span><span class="sxs-lookup"><span data-stu-id="38be4-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="38be4-261">**sp_wait_for_database_copy_sync** kapsamlı tooa belirli sürekli kopyalama bağlantıdır.</span><span class="sxs-lookup"><span data-stu-id="38be4-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="38be4-262">Merhaba bağlantı hakları toohello birincil veritabanı ile herhangi bir kullanıcı, bu yordamı çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="38be4-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="38be4-263">**sp_wait_for_database_copy_sync** veri kaybı yük devretme sonrasında engeller, ancak okuma erişimi için tam eşitleme garanti değil.</span><span class="sxs-lookup"><span data-stu-id="38be4-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="38be4-264">Merhaba gecikme nedeniyle bir **sp_wait_for_database_copy_sync** yordam çağrısı önemli olabilir ve hello çağrısı hello aynı anda hello hello işlem günlüğü boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="38be4-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="38be4-265">Yük devretme grupları ve etkin coğrafi çoğaltma programlı olarak yönetme</span><span class="sxs-lookup"><span data-stu-id="38be4-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="38be4-266">Otomatik Yük devretme grupları (Önizleme-) ve etkin daha önce açıklandığı gibi coğrafi çoğaltma program aracılığıyla Azure PowerShell kullanılarak da yönetilebilir ve REST API hello.</span><span class="sxs-lookup"><span data-stu-id="38be4-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="38be4-267">Merhaba tabloları aşağıdaki komutlar kullanılabilir hello kümesi açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="38be4-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="38be4-268">**Azure Resource Manager API ve rol tabanlı güvenlik**: aktif coğrafi çoğaltma içeren bir dizi Azure Resource Manager API'leri hello dahil olmak üzere Yönetim için [Azure SQL Database REST API'sini](https://docs.microsoft.com/rest/api/sql/) ve [Azure PowerShell cmdlet'leri](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="38be4-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="38be4-269">Bu API'ları kaynak grupları hello kullanılmasını gerektirir ve rol tabanlı güvenlik (RBAC) desteği.</span><span class="sxs-lookup"><span data-stu-id="38be4-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="38be4-270">Nasıl tooimplement erişim rolleri ile ilgili daha fazla bilgi için bkz: [Azure rol tabanlı erişim denetimi](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="38be4-271">Aktif coğrafi çoğaltma pek çok yeni özelliği kullanarak yalnızca desteklenen [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) göre [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) ve [Azure SQL Database PowerShell cmdlet'leri](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="38be4-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="38be4-272">Merhaba [(Klasik) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) ve [Azure SQL Database (Klasik) cmdlet'leri](https://msdn.microsoft.com/library/azure/dn546723.aspx) bunu Azure Resource Manager tabanlı API'ler önerilir hello kullanarak geriye dönük uyumluluk için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="38be4-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="38be4-273">SQL veritabanı Transact-SQL kullanarak yük devretme kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="38be4-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="38be4-274">Komut</span><span class="sxs-lookup"><span data-stu-id="38be4-274">Command</span></span> | <span data-ttu-id="38be4-275">Açıklama</span><span class="sxs-lookup"><span data-stu-id="38be4-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="38be4-276">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="38be4-277">İkincil üzerinde Sunucu Ekle bağımsız değişkeni toocreate ikincil bir veritabanı için varolan bir veritabanını kullanın ve veri çoğaltma başlatır</span><span class="sxs-lookup"><span data-stu-id="38be4-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="38be4-278">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="38be4-279">Yük DEVRETME veya FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch ikincil veritabanı toobe birincil tooinitiate yük devretme kullanın</span><span class="sxs-lookup"><span data-stu-id="38be4-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="38be4-280">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="38be4-281">İkincil üzerinde SUNUCUSUNU Kaldır tooterminate bir SQL veritabanı ve hello belirtilen ikincil veritabanı arasında veri kopyalama kullanın.</span><span class="sxs-lookup"><span data-stu-id="38be4-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="38be4-282">sys.geo_replication_links (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="38be4-283">Hello Azure SQL Database mantıksal sunucusu üzerindeki her veritabanı için tüm yineleme bağlantıları hakkında bilgi döndürür.</span><span class="sxs-lookup"><span data-stu-id="38be4-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="38be4-284">sys.dm_geo_replication_link_status (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="38be4-285">Son çoğaltma saati, son çoğaltma gecikmesi ve hello çoğaltma bağlantısı belirli bir SQL veritabanı için ilgili diğer bilgileri alır hello.</span><span class="sxs-lookup"><span data-stu-id="38be4-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="38be4-286">sys.dm_operation_status (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="38be4-287">Merhaba hello çoğaltma bağlantılarının durumunu da dahil olmak üzere tüm veritabanı işlemleri için Hello durumunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="38be4-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="38be4-288">sp_wait_for_database_copy_sync (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="38be4-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="38be4-289">tüm kaydedilmiş işlemleri çoğaltılır ve hello etkin ikincil veritabanı tarafından onaylanan kadar hello uygulama toowait neden olur.</span><span class="sxs-lookup"><span data-stu-id="38be4-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="38be4-290">SQL veritabanı yük devretme PowerShell kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="38be4-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="38be4-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="38be4-291">Cmdlet</span></span> | <span data-ttu-id="38be4-292">Açıklama</span><span class="sxs-lookup"><span data-stu-id="38be4-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="38be4-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="38be4-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="38be4-294">Bir veya daha fazla veritabanı alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="38be4-295">AzureRmSqlDatabaseSecondary yeni</span><span class="sxs-lookup"><span data-stu-id="38be4-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="38be4-296">Var olan bir veritabanı için ikincil bir veritabanı oluşturur ve veri çoğaltma başlatır.</span><span class="sxs-lookup"><span data-stu-id="38be4-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="38be4-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="38be4-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="38be4-298">Bir ikincil veritabanı toobe birincil tooinitiate yük devretme geçer.</span><span class="sxs-lookup"><span data-stu-id="38be4-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="38be4-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="38be4-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="38be4-300">Bir SQL veritabanı ve hello belirtilen ikincil veritabanı arasında veri kopyalama sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="38be4-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="38be4-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="38be4-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="38be4-302">Bir Azure SQL Database ve bir kaynak grubu veya SQL Server arasındaki Hello coğrafi Çoğaltma bağlantılarını alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="38be4-303">AzureRmSqlDatabaseFailoverGroup yeni</span><span class="sxs-lookup"><span data-stu-id="38be4-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="38be4-304">Bu komut, bir yük devretme grubu oluşturur ve birincil ve ikincil sunucularda kaydeder</span><span class="sxs-lookup"><span data-stu-id="38be4-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="38be4-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="38be4-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="38be4-306">Merhaba yük devretme grubu hello sunucusundan kaldırır ve tüm ikincil veritabanları dahil hello grubunu siler</span><span class="sxs-lookup"><span data-stu-id="38be4-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="38be4-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="38be4-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="38be4-308">Merhaba yük devretme grubu yapılandırmasını alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="38be4-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="38be4-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="38be4-310">Merhaba yük devretme grubunun Hello yapılandırmasını değiştirir</span><span class="sxs-lookup"><span data-stu-id="38be4-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="38be4-311">Anahtar AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="38be4-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="38be4-312">Merhaba yük devretme grubu toohello ikincil sunucu Tetikleyicileri yük devretme</span><span class="sxs-lookup"><span data-stu-id="38be4-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="38be4-313">Örnek komut dosyaları için bkz: [Yapılandır ve yük devretme aktif coğrafi çoğaltma kullanarak tek bir veritabanı](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Yapılandır ve yük devretme aktif coğrafi çoğaltma kullanarak havuza alınmış bir veritabanı](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), ve [Yapılandır ve yük devretme bir tek veritabanı (Önizleme) için yük devretme grubu] (komut dosyaları/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="38be4-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="38be4-314">SQL veritabanı yük devretme Hello REST API kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="38be4-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="38be4-315">API</span><span class="sxs-lookup"><span data-stu-id="38be4-315">API</span></span> | <span data-ttu-id="38be4-316">Açıklama</span><span class="sxs-lookup"><span data-stu-id="38be4-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="38be4-317">Oluşturma veya güncelleştirme veritabanı (createMode = geri yükle)</span><span class="sxs-lookup"><span data-stu-id="38be4-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="38be4-318">Oluşturur, güncelleştirir veya bir birincil veya ikincil bir veritabanını geri yükler.</span><span class="sxs-lookup"><span data-stu-id="38be4-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="38be4-319">Get oluştur veya veritabanı durumunu güncelleştir</span><span class="sxs-lookup"><span data-stu-id="38be4-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="38be4-320">Oluşturma işlemi sırasında hello durumu döndürür.</span><span class="sxs-lookup"><span data-stu-id="38be4-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="38be4-321">İkincil veritabanının birincil (Planlı yük devretme) olarak ayarlayın</span><span class="sxs-lookup"><span data-stu-id="38be4-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="38be4-322">Hangi veritabanı çoğaltmasını birincil yapabilmesini hello geçerli birincil çoğaltma veritabanından göre ayarlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="38be4-323">İkincil veritabanının birincil (planlanmamış yük devretme) olarak ayarlayın</span><span class="sxs-lookup"><span data-stu-id="38be4-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="38be4-324">Hangi veritabanı çoğaltmasını birincil yapabilmesini hello geçerli birincil çoğaltma veritabanından göre ayarlar.</span><span class="sxs-lookup"><span data-stu-id="38be4-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="38be4-325">Bu işlem, veri kaybına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="38be4-326">Çoğaltma bağlantısı Al</span><span class="sxs-lookup"><span data-stu-id="38be4-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="38be4-327">Belirli çoğaltma bağlantısı belirli bir SQL veritabanında bir coğrafi çoğaltma ortaklığı alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="38be4-328">Merhaba sys.geo_replication_links katalog görünümünde görülebilir hello bilgi alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="38be4-329">Çoğaltma bağlantılarını - veritabanı göre listesi</span><span class="sxs-lookup"><span data-stu-id="38be4-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="38be4-330">Coğrafi çoğaltma ortaklığı belirli bir SQL veritabanında tüm çoğaltma bağlantılarını alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="38be4-331">Merhaba sys.geo_replication_links katalog görünümünde görülebilir hello bilgi alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="38be4-332">Çoğaltma bağlantısı Sil</span><span class="sxs-lookup"><span data-stu-id="38be4-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="38be4-333">Bir veritabanı yinelemesi siler.</span><span class="sxs-lookup"><span data-stu-id="38be4-333">Deletes a database replication link.</span></span> <span data-ttu-id="38be4-334">Yük devretme sırasında yapılamaz.</span><span class="sxs-lookup"><span data-stu-id="38be4-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="38be4-335">[Oluşturma veya güncelleştirme yük devretme grubu] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="38be4-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="38be4-336">Oluşturur veya bir yük devretme grubu güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="38be4-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="38be4-337">Yük devretme grubu Sil</span><span class="sxs-lookup"><span data-stu-id="38be4-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="38be4-338">Merhaba yük devretme grubu hello sunucusundan kaldırır</span><span class="sxs-lookup"><span data-stu-id="38be4-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="38be4-339">Yük devretme (planlanmış)</span><span class="sxs-lookup"><span data-stu-id="38be4-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="38be4-340">Merhaba geçerli birincil sunucu toothis sunucudan yöneltilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="38be4-341">Zorla yük devretme veri kaybı izin ver</span><span class="sxs-lookup"><span data-stu-id="38be4-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="38be4-342">üzerinden hello geçerli birincil sunucu toothis sunucusundan ails.</span><span class="sxs-lookup"><span data-stu-id="38be4-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="38be4-343">Bu işlem, veri kaybına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="38be4-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="38be4-344">Get yük devretme grubu</span><span class="sxs-lookup"><span data-stu-id="38be4-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="38be4-345">Bir yük devretme grubunu alır.</span><span class="sxs-lookup"><span data-stu-id="38be4-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="38be4-346">Sunucu tarafından listesi yük devretme grupları</span><span class="sxs-lookup"><span data-stu-id="38be4-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="38be4-347">Sunucu Hello yük devretme grupları listeler.</span><span class="sxs-lookup"><span data-stu-id="38be4-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="38be4-348">Yük devretme grubu güncelleştir</span><span class="sxs-lookup"><span data-stu-id="38be4-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="38be4-349">Bir yük devretme grubu güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="38be4-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="38be4-350">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="38be4-350">Next steps</span></span>
* <span data-ttu-id="38be4-351">Örnek komut dosyaları için bkz:</span><span class="sxs-lookup"><span data-stu-id="38be4-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="38be4-352">Yapılandırma ve yük devretme aktif coğrafi çoğaltma kullanarak tek bir veritabanı</span><span class="sxs-lookup"><span data-stu-id="38be4-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="38be4-353">Yapılandırma ve yük devretme aktif coğrafi çoğaltma kullanarak havuza alınmış bir veritabanı</span><span class="sxs-lookup"><span data-stu-id="38be4-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="38be4-354">Yapılandırma ve yük devretme yük devretme bir grup için tek bir veritabanına (Önizleme)</span><span class="sxs-lookup"><span data-stu-id="38be4-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="38be4-355">İş sürekliliğine genel bakış ve senaryolar için bkz: [iş sürekliliğine genel bakış](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="38be4-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="38be4-356">Azure SQL veritabanı otomatik yedeklemeler hakkında toolearn bkz [SQL veritabanı yedeklemeleri otomatik](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="38be4-357">Kurtarma için otomatik yedeklemeler kullanma hakkında toolearn bkz [bir veritabanını hello hizmeti tarafından başlatılan yedeklerden geri](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="38be4-358">Yeni birincil sunucu ve veritabanı için kimlik doğrulama gereksinimleri hakkında toolearn bkz [olağanüstü durum kurtarma işleminden sonra SQL veritabanı güvenlik](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="38be4-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

