---
title: "Yük devretme grupları ve etkin coğrafi çoğaltma - Azure SQL veritabanı | Microsoft Docs"
description: "Aktif coğrafi çoğaltma otomatik yük devretme gruplarıyla veritabanınızın herhangi bir Azure veri merkezleri ile autoomatically yük devretme bir kesinti durumunda 4 çoğaltmaları Kurulum olanak sağlar."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 9a2171f59c6192115dc1820e7f033fd783c9e077
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="90d7e-103">Genel Bakış: Yük devretme grupları ve etkin coğrafi çoğaltma</span><span class="sxs-lookup"><span data-stu-id="90d7e-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="90d7e-104">Aktif coğrafi çoğaltma, en fazla dört okunabilir ikincil veritabanları aynı veya farklı bir veri merkezi konumlarını (bölge) yapılandırmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-104">Active geo-replication enables you to configure up to four readable secondary databases in the same or different data center locations (regions).</span></span> <span data-ttu-id="90d7e-105">İkincil veritabanları, yük devretme veri merkezi kesintisinden veya birincil veritabanına bağlanamama söz konusu olduğunda ve sorgulama için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-105">Secondary databases are available for querying and for failover in the case of a data center outage or the inability to connect to the primary database.</span></span> <span data-ttu-id="90d7e-106">Yük devretme kullanıcı uygulama tarafından el ile başlatılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-106">The failover must be initiated manually by the application of the user.</span></span> <span data-ttu-id="90d7e-107">Yük devretme işleminden sonra yeni birincil farklı bağlantı uç noktası vardır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-107">After failover, the new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="90d7e-108">Aktif coğrafi çoğaltma, tüm hizmet katmanlarında tüm bölgelerde tüm veritabanları için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="90d7e-109">Azure SQL veritabanı otomatik yük devretme grupları (Önizleme-) coğrafi çoğaltma ilişkisi, bağlantı ve yük devretme ölçekte otomatik olarak yönetmek üzere tasarlanmış bir özelliktir SQL veritabanı.</span><span class="sxs-lookup"><span data-stu-id="90d7e-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed to automatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="90d7e-110">Bununla, müşterilerin otomatik olarak geri dönülemez bölgesel arızalara veya SQL veritabanı hizmetinin kullanılabilirlik tam veya kısmi kaybına neden diğer planlanmamış olayları sonra ikincil bölge içinde birden çok ilişkili veritabanlarını kurtarma olanağı elde birincil bölge.</span><span class="sxs-lookup"><span data-stu-id="90d7e-110">With it, the customers gain the ability to automatically recover multiple related databases in the secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of the SQL Database service’s availability in the primary region.</span></span> <span data-ttu-id="90d7e-111">Ayrıca, bunlar salt okunur iş yükleri boşaltmak için okunabilir ikincil veritabanları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-111">Additionally, they can use the readable secondary databases to offload read-only workloads.</span></span>  <span data-ttu-id="90d7e-112">Otomatik Yük devretme grupları birden çok veritabanı içerdiğinden birincil sunucuda yapılandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-112">Because auto-failover groups involve multiple databases they must be configured on the primary server.</span></span> <span data-ttu-id="90d7e-113">Birincil ve ikincil sunucular aynı abonelikte olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-113">Both primary and secondary servers must be in the same subscription.</span></span> <span data-ttu-id="90d7e-114">Otomatik Yük devretme grupları için farklı bir bölgede yalnızca bir ikincil sunucu grubundaki tüm veritabanlarının çoğaltma destekler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-114">Auto-failover groups support replication of all databases in the group to only one secondary server in a different region.</span></span> <span data-ttu-id="90d7e-115">Herhangi bir bölgede en fazla 4 ikincil etkin coğrafi çoğaltma, otomatik yük devretme grupları olmadan sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-115">Active geo-replication, without auto-failover groups, allows up to 4 secondaries in any region.</span></span>

<span data-ttu-id="90d7e-116">Aktif coğrafi çoğaltma kullanıyorsanız ve için birincil veritabanı başarısız olmasına neden veya çevrimdışı duruma gerekiyor, yük devretme ikincil veritabanlarınızı birini başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs to be taken offline, you can initiate failover to any of your secondary databases.</span></span> <span data-ttu-id="90d7e-117">Yük devretme ikincil veritabanlarıyla birine etkinleştirildiğinde, yeni birincil diğer tüm ikinciller otomatik olarak bağlanır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-117">When failover is activated to one of the secondary databases, all other secondaries are automatically linked to the new primary.</span></span> <span data-ttu-id="90d7e-118">Otomatik Yük devretme grupları (Önizleme-) veritabanı kurtarma ve bir veya birkaç Grup sonuçları veritabanlarında etkiler herhangi kesinti yönetmek için otomatik yük devretme kümesinde kullanıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="90d7e-118">If you are using auto-failover groups (in-preview) to manage database recovery and any outage that impacts one or several of the databases in the group results in automatic failover.</span></span> <span data-ttu-id="90d7e-119">Uygulamanızın gereksinimlerine en iyi karşılayan otomatik yük devretme İlkesi yapılandırabilir veya devre dışı bırakmak ve el ile etkinleştirme kullanın.</span><span class="sxs-lookup"><span data-stu-id="90d7e-119">You can configure the auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="90d7e-120">Ayrıca, otomatik yük devretme grupları (Önizleme-) okuma-yazma sağlayın ve yük devretme işlemleri sırasında kalır salt okunur dinleyicisi uç noktalarının değişmedi.</span><span class="sxs-lookup"><span data-stu-id="90d7e-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="90d7e-121">El ile veya otomatik yük devretme etkinleştirme kullanıp kullanmayacağınızı yük devretme için birincil gruptaki tüm ikincil veritabanları geçer.</span><span class="sxs-lookup"><span data-stu-id="90d7e-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in the group to primary.</span></span> <span data-ttu-id="90d7e-122">Veritabanı yük devretme tamamlandıktan sonra yeni bölge için uç noktalarının yönlendirmek için DNS kaydını otomatik olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-122">After the database failover is completed, the DNS record is automatically updated to redirect the end-points to the new region.</span></span>

<span data-ttu-id="90d7e-123">Çoğaltma ve tek bir veritabanının yük devretmesi veya bir sunucuya veya aktif coğrafi çoğaltma kullanarak esnek havuzdaki veritabanları kümesi yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="90d7e-124">Bu kullanarak yapabilirsiniz [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), veya [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="90d7e-124">You can do that using the [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or the [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="90d7e-125">Yük devretme işleminden sonra yeni birincil sunucu ve veritabanı için kimlik doğrulama gereksinimlerini yapılandırılmış emin olun.</span><span class="sxs-lookup"><span data-stu-id="90d7e-125">After failover, ensure the authentication requirements for your server and database are configured on the new primary.</span></span> <span data-ttu-id="90d7e-126">Ayrıntılar için bkz [olağanüstü durum kurtarma işleminden sonra SQL veritabanı güvenlik](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="90d7e-127">Bu, hem etkin coğrafi çoğaltma ve otomatik yük devretme gruplar (Önizleme-) için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-127">This applies both to active geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="90d7e-128">Aktif coğrafi çoğaltma yararlanır [her zaman açık](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) teknolojisini kullanarak bir ikincil veritabanının birincil veritabanı üzerinde yürütülen işlemler zaman uyumsuz olarak çoğaltmak için SQL Server'ın kaydedilen anlık görüntü yalıtım (RCSI) okuyun.</span><span class="sxs-lookup"><span data-stu-id="90d7e-128">Active geo-replication leverages the [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server to asynchronously replicate committed transactions on the primary database to a secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="90d7e-129">Otomatik Yük devretme grupları aktif coğrafi çoğaltma üstünde Grup semantiği sağlar ancak aynı zaman uyumsuz çoğaltma mekanizması kullanılır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-129">Auto-failover groups provide the group semantics on top of active geo-replication but the same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="90d7e-130">Herhangi bir noktada verilen ederken, ikincil veritabanı biraz birincil veritabanı olabilir, ikincil veri hiçbir zaman kısmi hareket olması garanti edilmez.</span><span class="sxs-lookup"><span data-stu-id="90d7e-130">While at any given point, the secondary database might be slightly behind the primary database, the secondary data is guaranteed to never have partial transactions.</span></span> <span data-ttu-id="90d7e-131">Çapraz bölge artıklık kalıcı kaybı veri merkezinin tamamı veya doğal afetler, geri dönülemez insan hataları veya kötü amaçlı davranışlara neden bir veri merkezinde bölümlerini hızla kurtarılır uygulamaları etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-131">Cross-region redundancy enables applications to quickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="90d7e-132">Belirli RPO verileri bulunabilir [iş sürekliliği genel bakış](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-132">The specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="90d7e-133">Aşağıdaki şekilde Orta Güney ABD bölgesinde birincil bölgede Kuzey Orta ABD ile yapılandırılmış ve ikincil etkin coğrafi çoğaltma örneği gösterir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-133">The following figure shows an example of active geo-replication configured with a primary in the North Central US region and secondary in the South Central US region.</span></span>

![coğrafi çoğaltma ilişkisi](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="90d7e-135">İkincil veritabanlarıyla okunabilir olmadığından, raporlama işleri gibi salt okunur iş yükleri boşaltmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-135">Because the secondary databases are readable, they can be used to offload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="90d7e-136">Aktif coğrafi çoğaltma kullanıyorsanız, birincil ile aynı bölgede ikincil veritabanını oluşturmak mümkündür, ancak uygulamanın esnekliği yıkıcı hatalarına artırmaz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-136">If you are using active geo-replication, it is possible to create the secondary database in the same region with the primary, but it does not increase the application's resilience to catastrophic failures.</span></span> <span data-ttu-id="90d7e-137">Otomatik Yük devretme grupları (Önizleme-) kullanıyorsanız, ikincil veritabanınıza her zaman farklı bir bölgede oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="90d7e-138">Ek olarak olağanüstü durum kurtarma etkin coğrafi çoğaltma aşağıdaki senaryolarda kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="90d7e-138">In addition to disaster recovery active geo-replication can be used in the following scenarios:</span></span>

* <span data-ttu-id="90d7e-139">**Veritabanı geçiş**: aktif coğrafi çoğaltma veritabanını başka bir çevrimiçi en düşük kapalı kalma süresi ile bir sunucudan geçirmek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-139">**Database migration**: You can use active geo-replication to migrate a database from one server to another online with minimum downtime.</span></span>
* <span data-ttu-id="90d7e-140">**Uygulama yükseltme**: uygulama yükseltmeler sırasında başarısız geri kopya olarak fazladan bir ikincil oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="90d7e-141">Gerçek iş sürekliliği elde etmek için veri merkezleri arasında veritabanı artıklığı ekleme yalnızca çözüm parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-141">To achieve real business continuity, adding database redundancy between datacenters is only part of the solution.</span></span> <span data-ttu-id="90d7e-142">Yıkıcı bir hatadan kurtarma hizmeti oluşturan tüm bileşenleri ve bağımlı hizmetlerin gerektirir sonra bir uygulama (hizmeti) uçtan uca kurtarma.</span><span class="sxs-lookup"><span data-stu-id="90d7e-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute the service and any dependent services.</span></span> <span data-ttu-id="90d7e-143">İstemci yazılımı (örneğin, bir tarayıcı özel bir JavaScript ile), web ön uçları, depolama ve DNS bu bileşenlerin örneklerindendir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-143">Examples of these components include the client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="90d7e-144">Tüm bileşenleri aynı hatalarına dayanıklı ve kurtarma süresi hedefi, uygulamanızın içinde (RTO) kullanılabilir hale kritik öneme sahiptir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-144">It is critical that all components are resilient to the same failures and become available within the recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="90d7e-145">Bu nedenle, tüm bağımlı hizmetlerin tanımlamak ve garanti ve sağladıkları yetenekleri anlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-145">Therefore, you need to identify all dependent services and understand the guarantees and capabilities they provide.</span></span> <span data-ttu-id="90d7e-146">Ardından, bağımlı olduğu hizmetlerin yük devretme sırasında hizmetinizin emin olmak için yeterli adımlar atmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-146">Then, you must take adequate steps to ensure that your service functions during the failover of the services on which it depends.</span></span> <span data-ttu-id="90d7e-147">Olağanüstü durum kurtarma çözümleri tasarlama hakkında daha fazla bilgi için bkz: [olağanüstü durum kurtarma'yı kullanarak etkin coğrafi çoğaltma için bulut çözümleri tasarlama](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="90d7e-148">Aktif coğrafi çoğaltma özellikleri</span><span class="sxs-lookup"><span data-stu-id="90d7e-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="90d7e-149">Aktif coğrafi çoğaltma özelliği aşağıdaki temel yetenekleri sağlar:</span><span class="sxs-lookup"><span data-stu-id="90d7e-149">The active geo-replication feature provides the following essential capabilities:</span></span>
* <span data-ttu-id="90d7e-150">**Otomatik olarak zaman uyumsuz çoğaltma**: varolan bir veritabanına ekleyerek yalnızca ikincil bir veritabanı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding to an existing database.</span></span> <span data-ttu-id="90d7e-151">İkincil herhangi bir Azure SQL veritabanı sunucusu oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-151">The secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="90d7e-152">Oluşturduktan sonra ikincil veritabanı birincil veritabanından kopyalanan verileri ile doldurulur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-152">Once created, the secondary database is populated with the data copied from the primary database.</span></span> <span data-ttu-id="90d7e-153">Bu işlem, dengeli olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-153">This process is known as seeding.</span></span> <span data-ttu-id="90d7e-154">İkincil veritabanı oluşturulan ve dağıtılan sonra birincil veritabanı güncelleştirmeleri zaman uyumsuz olarak ikincil veritabanını otomatik olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-154">After secondary database has been created and seeded, updates to the primary database are asynchronously replicated to the secondary database automatically.</span></span> <span data-ttu-id="90d7e-155">Zaman uyumsuz çoğaltma ikincil veritabanına çoğaltılırken işlemleri birincil veritabanında yapıldığından anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-155">Asynchronous replication means that transactions are committed on the primary database before they are replicated to the secondary database.</span></span> 
* <span data-ttu-id="90d7e-156">**Okunabilir ikincil veritabanları**: uygulamanın birincil veritabanına erişmek için kullanılan aynı veya farklı güvenlik sorumluları kullanarak salt okunur işlemleri için ikincil bir veritabanı erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using the same or different security principals used for accessing the primary database.</span></span> <span data-ttu-id="90d7e-157">Güncelleştirmeler (günlük yeniden yürütme) birincil çoğaltma ikincil sorgular tarafından ertelendi değil emin olmak için anlık görüntü yalıtım modunda ikincil veritabanlarıyla çalışır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-157">The secondary databases operate in snapshot isolation mode to ensure replication of the updates of the primary (log replay) is not delayed by queries executed on the secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="90d7e-158">İkincil bir şema kilidi gerektiren birincil sunucudan alma şema güncelleştirmesi olduğunda günlük yeniden yürütme ikincil veritabanını ertelendi.</span><span class="sxs-lookup"><span data-stu-id="90d7e-158">The log replay is delayed on the secondary database if there are schema updates that it is receiving from the Primary that require a schema lock on the secondary database.</span></span> 
   > 

* <span data-ttu-id="90d7e-159">**Birden çok okunabilir ikinciller**: iki veya daha fazla ikincil veritabanları artırmak artıklık ve birincil veritabanı ve uygulama için bir koruma düzeyi.</span><span class="sxs-lookup"><span data-stu-id="90d7e-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for the primary database and application.</span></span> <span data-ttu-id="90d7e-160">Birden fazla ikincil veritabanı yoksa, ikincil veritabanlarıyla biri başarısız olsa bile uygulama korumalı olarak kalır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-160">If multiple secondary databases exist, the application remains protected even if one of the secondary databases fails.</span></span> <span data-ttu-id="90d7e-161">Yeni bir ikincil veritabanı oluşturulana kadar yalnızca bir ikincil veritabanı yoktur ve bu başarısız olursa, uygulama için daha yüksek risk açıktır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-161">If there is only one secondary database, and it fails, the application is exposed to higher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="90d7e-162">Genel olarak dağıtılmış bir uygulama oluşturun ve 4'ten fazla bölgelerindeki veri salt okunur erişim sağlamak gereken etkin coğrafi çoğaltma kullanıyorsanız, ikincil (zincirleme olarak bilinen işlem), ikincil oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-162">If you are using active geo-replication to build a globally distributed application and need to provide read-only access to data in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="90d7e-163">Bu şekilde veritabanı çoğaltma neredeyse sınırsız ölçeği elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="90d7e-164">Ayrıca, zincirleme birincil veritabanından çoğaltma ek yükünü azaltır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-164">In addition, chaining reduces the overhead of replication from the primary database.</span></span> <span data-ttu-id="90d7e-165">Dengelemeyi yaprak çoğu ikincil veritabanları hakkında daha fazla çoğaltma gecikmesi ' dir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-165">The trade-off is the increased replication lag on the leaf-most secondary databases.</span></span> <span data-ttu-id="90d7e-166">.</span><span class="sxs-lookup"><span data-stu-id="90d7e-166">.</span></span> 
   >

* <span data-ttu-id="90d7e-167">**Esnek havuz veritabanlarının Destek**: aktif coğrafi çoğaltma, herhangi bir esnek havuzdaki herhangi bir veritabanı için yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="90d7e-168">İkincil veritabanını başka bir esnek havuzda olabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-168">The secondary database can be in another elastic pool.</span></span> <span data-ttu-id="90d7e-169">Hizmet katmanları aynı olduğu sürece normal veritabanları için ikincil bir esnek havuz tersi olabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-169">For regular databases, the secondary can be an elastic pool and vice versa as long as the service tiers are the same.</span></span> 
* <span data-ttu-id="90d7e-170">**İkincil veritabanını yapılandırılabilir performans düzeyini**: birincil daha düşük performans düzeyine sahip ikincil bir veritabanı oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-170">**Configurable performance level of the secondary database**: A secondary database can be created with lower performance level than the primary.</span></span> <span data-ttu-id="90d7e-171">Birincil ve ikincil veritabanları aynı hizmet katmanı için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-171">Both primary and secondary databases are required to have the same service tier.</span></span> <span data-ttu-id="90d7e-172">Artan çoğaltma gecikmesi, yük devretme sonrasında önemli veri kaybı riski artırır çünkü bu seçenek ile yüksek veritabanı yazma etkinliği uygulamalar için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="90d7e-172">This option is not recommended for applications with high database write activity because the increased replication lag increases the risk of substantial data loss after a failover.</span></span> <span data-ttu-id="90d7e-173">Ayrıca, yeni birincil daha yüksek bir performans düzeyine yükseltilene kadar yük devretme sonrasında uygulamanızın performansı etkilenir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-173">In addition, after failover the application’s performance is impacted until the new primary is upgraded to a higher performance level.</span></span> <span data-ttu-id="90d7e-174">Azure portalında günlük GÇ yüzdesi grafik ikincil çoğaltma yükü sürdürebilmek için gereken en düşük performans düzeyini tahmin etmek için en iyi yolu sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-174">The log IO percentage chart on Azure portal provides a good way to estimate the minimal performance level of the secondary that is required to sustain the replication load.</span></span> <span data-ttu-id="90d7e-175">Örneğin, birincil veritabanı P6 ise (1000 DTU) ve kendi günlük GÇ yüzde 50 ikincil en az olması gerekir % P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="90d7e-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% the secondary needs to be at least P4 (500 DTU).</span></span> <span data-ttu-id="90d7e-176">Kullanarak günlük GÇ verilerini de alabilirsiniz [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) veya [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) veritabanı görünümleri.</span><span class="sxs-lookup"><span data-stu-id="90d7e-176">You can also retrieve the log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="90d7e-177">SQL veritabanı performans düzeyleri hakkında daha fazla bilgi için bkz: [SQL Database seçenekleri ve performansı](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-177">For more information on the SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="90d7e-178">**Kullanıcı tarafından denetlenen yük devretme ve yeniden çalışma**: ikincil bir veritabanı açıkça birincil role herhangi bir zamanda uygulama veya kullanıcı tarafından değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-178">**User-controlled failover and failback**: A secondary database can explicitly be switched to the primary role at any time by the application or the user.</span></span> <span data-ttu-id="90d7e-179">Gerçek bir kesinti sırasında "planlanmamış" seçeneği, hangi hemen ikincil yükseltir birincil olarak kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-179">During a real outage the “unplanned” option should be used, which immediately promotes a secondary to be the primary.</span></span> <span data-ttu-id="90d7e-180">Başarısız birincil kurtarır ve yeniden kullanılabilir olduğunda, sistem otomatik olarak kurtarılan birincil ikincil olarak işaretler ve yeni birincil ile güncel duruma getirmek.</span><span class="sxs-lookup"><span data-stu-id="90d7e-180">When the failed primary recovers and is available again, the system automatically marks the recovered primary as a secondary and bring it up-to-date with the new primary.</span></span> <span data-ttu-id="90d7e-181">En son değişiklikleri ikincil çoğaltılmadan önce birincil başarısız olursa çoğaltma zaman uyumsuz yapısı nedeniyle, çok küçük miktarda veri planlanmamış yük devretme işlemleri sırasında kaybolur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-181">Due to the asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates the most recent changes to the secondary.</span></span> <span data-ttu-id="90d7e-182">Birden fazla ikincil kopya ile birincil devrettiğinde sistem otomatik olarak çoğaltma ilişkileri yeniden yapılandırır ve kullanıcı müdahalesi gerektirmeden yeni yükseltilen birincil kalan ikincil bağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-182">When a primary with multiple secondaries fails over, the system automatically reconfigures the replication relationships and links the remaining secondaries to the newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="90d7e-183">Yük devretme neden kesinti azaltıldığından sonra birincil bölge uygulamaya dönmek istenebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-183">After the outage that caused the failover is mitigated, it may be desirable to return the application to the primary region.</span></span> <span data-ttu-id="90d7e-184">Bunu yapmak için yük devretme komutunu ve "Planlanan" seçeneğiyle çağrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-184">To do that, the failover command should be invoked with the “planned” option.</span></span> 
* <span data-ttu-id="90d7e-185">**Kimlik bilgileri ve güvenlik duvarı kuralları eşitlenmiş şekilde kalmasının**: kullanmanızı öneririz [veritabanı güvenlik duvarı kuralları](sql-database-firewall-configure.md) tüm ikincil veritabanlarına sahip olmak için veritabanı ile bu kuralları çoğaltılabilir şekilde coğrafi olarak çoğaltılmış veritabanları için birincil olarak aynı güvenlik duvarı kuralları.</span><span class="sxs-lookup"><span data-stu-id="90d7e-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with the database to ensure all secondary databases have the same firewall rules as the primary.</span></span> <span data-ttu-id="90d7e-186">Bu yaklaşım, hem birincil ve ikincil veritabanlarını barındıran sunucular üzerinde güvenlik duvarı kurallarını el ile yapılandırıp müşteriler gereksinimini ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-186">This approach eliminates the need for customers to manually configure and maintain firewall rules on servers hosting both the primary and secondary databases.</span></span> <span data-ttu-id="90d7e-187">Benzer şekilde, kullanarak [bulunan veritabanı kullanıcıları](sql-database-manage-logins.md) için veri erişim birincil ve ikincil veritabanları her zaman aynı sağlar kullanıcı kimlik bilgileri bir yük devretme sırasında; böylece herhangi kesinti nedeniyle oturum açma bilgileri ve parolaları ile uyuşmuyor.</span><span class="sxs-lookup"><span data-stu-id="90d7e-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have the same user credentials so during a failover, there is no disruptions due to mismatches with logins and passwords.</span></span> <span data-ttu-id="90d7e-188">Eklenmesi ile [Azure Active Directory](../active-directory/active-directory-whatis.md), müşteriler, hem birincil hem de ikincil veritabanlarına kullanıcı erişimi yönetebilir ve yönetme ihtiyacını ortadan kimlik bilgileri veritabanlarında tamamen.</span><span class="sxs-lookup"><span data-stu-id="90d7e-188">With the addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access to both primary and secondary databases and eliminating the need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="90d7e-189">Otomatik Yük devretme grubu özellikleri</span><span class="sxs-lookup"><span data-stu-id="90d7e-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="90d7e-190">Otomatik Yük devretme grupları özelliği, grup düzeyinde çoğaltma ve otomatik yük devretme destekleyerek aktif coğrafi çoğaltma, güçlü bir Özet sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="90d7e-191">Ayrıca, ek dinleyicisi uç noktalarının sağlayarak yük devretme sonrasında SQL bağlantı dizesini değiştirmek için gerekliliğini kaldırır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-191">In addition, it removes the necessity to change the SQL connection string after failover by providing the additional listener end-points.</span></span> 

* <span data-ttu-id="90d7e-192">**Yük devretme grubu**: farklı bölgelerde (birincil ve ikincil sunucular) iki sunucu arasında bir veya daha çok yük devretme grupları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="90d7e-193">Her grup tüm veya bazı birincil veritabanı kesinti birincil bölge içinde nedeniyle kullanılamaz hale durumunda, bir birim olarak kurtarılan bir veya daha çok veritabanı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span>  
* <span data-ttu-id="90d7e-194">**Birincil sunucu**: yük devretme grubundaki birincil veritabanı barındıran bir sunucu.</span><span class="sxs-lookup"><span data-stu-id="90d7e-194">**Primary server**: A server that hosts the primary databases in the failover group.</span></span>
* <span data-ttu-id="90d7e-195">**İkincil sunucu**: yük devretme grubu ikincil veritabanları barındıran bir sunucu.</span><span class="sxs-lookup"><span data-stu-id="90d7e-195">**Secondary server**: A server that hosts the secondary databases in the failover group.</span></span> <span data-ttu-id="90d7e-196">İkincil sunucu, birincil sunucu ile aynı bölgede olamaz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-196">The secondary server cannot be in the same region as the primary server.</span></span>
* <span data-ttu-id="90d7e-197">**Yük devretme grubuna veritabanları ekleme**: birkaç veritabanını bir esnek havuz veya bir sunucu içinde aynı yük devretme grubuna koyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-197">**Adding databases to failover group**: You can put several databases within a server or within an elastic pool into the same failover group.</span></span> <span data-ttu-id="90d7e-198">Bir tek başına veritabanı grubuna eklerseniz, otomatik olarak performans düzeyinin ve aynı sürümü kullanan ikincil bir veritabanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-198">If you add a standalone database to the group, it automatically creates a secondary database using the same edition and performance level.</span></span> <span data-ttu-id="90d7e-199">Birincil veritabanını bir esnek havuz ise ikincil aynı ada sahip bir esnek havuzdaki otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-199">If the primary database is in an elastic pool, the secondary is automatically created in the elastic pool with the same name.</span></span> <span data-ttu-id="90d7e-200">İkincil bir veritabanı zaten ikincil sunucuya sahip bir veritabanı eklerseniz, bu coğrafi çoğaltma grubu tarafından devralınır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-200">If you add a database that already has a secondary database in the secondary server, that geo-replication is inherited by the group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="90d7e-201">İkincil bir veritabanı yük devretme grubunun parçası olmayan bir sunucu zaten bir veritabanı eklerken, yeni ikincil ikincil sunucuya oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-201">When adding a database that already has a secondary database in a server that is not part of the failover group, a new secondary is created in the secondary server.</span></span> 
   >

* <span data-ttu-id="90d7e-202">**Yük devretme grubu okuma-yazma dinleyicisi**: DNS CNAME kaydı biçimlendirilmiş olarak  **&lt;yük devretme grup adı&gt;. database.windows.net** geçerli birincil sunucu URL'si işaret eder.</span><span class="sxs-lookup"><span data-stu-id="90d7e-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points to the current primary server URL.</span></span> <span data-ttu-id="90d7e-203">Yük devretme sonrasında birincil değiştiğinde, birincil veritabanına bağlanmaktadır için okuma-yazma SQL uygulamaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-203">It allows the read-write SQL applications to transparently reconnect to the primary database when the primary changes after failover.</span></span> 
* <span data-ttu-id="90d7e-204">**Yük devretme grubu salt okunur dinleyicisi**: DNS CNAME kaydı biçimlendirilmiş olarak  **&lt;yük devretme grup adı&gt;. secondary.database.windows.net** ikincil sunucunun URL'sine işaret eder.</span><span class="sxs-lookup"><span data-stu-id="90d7e-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points to the secondary server’s URL.</span></span> <span data-ttu-id="90d7e-205">Saydam belirtilen yük dengeleyici kuralları kullanarak ikincil veritabanına bağlanmak salt okunur SQL uygulamaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-205">It allows the read-only SQL applications to transparently connect to the secondary database using the specified load-balancing rules.</span></span> <span data-ttu-id="90d7e-206">İsteğe bağlı olarak, salt okunur trafiğinin ikincil sunucu kullanılabilir olmadığında otomatik olarak birincil sunucuya yeniden yönlendirilmiş olmasını isteyip istemediğinizi belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-206">Optionally you can specify if you want the read-only traffic to be automatically re-directed to the primary server when the secondary server is not available.</span></span>
* <span data-ttu-id="90d7e-207">**Otomatik Yük devretme İlkesi**: varsayılan olarak, yük devretme grubu otomatik yük devretme İlkesi ile yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-207">**Automatic failover policy**: By default, the failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="90d7e-208">Hata algılandığında hemen sonra sistem yük devretmeyi tetikler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-208">The system triggers failover as soon as the failure is detected.</span></span> <span data-ttu-id="90d7e-209">Uygulama yük devretme iş akışını denetlemek istiyorsanız, devre dışı otomatik yük devretme kapatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-209">If you want to control the failover workflow from the application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="90d7e-210">**El ile yük devretme**: yük devretme el ile otomatik yük devretme yapılandırması bağımsız olarak herhangi bir zamanda başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-210">**Manual failover**: You can initiate failover manually at any time regardless of the automatic failover configuration.</span></span> <span data-ttu-id="90d7e-211">Otomatik Yük devretme İlkesi yapılandırılmış el ile yük devretme değilse yük devretme grubunda veritabanlarını kurtarmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-211">If automatic failover policy is not configured manual failover is required to recover databases in the failover group.</span></span> <span data-ttu-id="90d7e-212">(İle tam veri eşitlemesi) zorlanmış veya kolay yük devretme işlemi başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="90d7e-213">İkinci etkin sunucunun birincil bölge konumunu değiştirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-213">The latter could be used to relocate the active server to the primary region.</span></span> <span data-ttu-id="90d7e-214">Yük devretme tamamlandığında, DNS kayıtları doğru sunucu bağlantı sağlamak için otomatik olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-214">When failover is completed the DNS records are automatically updated to ensure connectivity to the correct server.</span></span>
* <span data-ttu-id="90d7e-215">**Veri kaybı yetkisiz kullanım süresi**: yük devretme veri kaybına neden olabilir zaman uyumsuz çoğaltma kullanılarak birincil ve ikincil veritabanları eşitlenmiş olduğundan.</span><span class="sxs-lookup"><span data-stu-id="90d7e-215">**Grace period with data loss**: Because the primary and secondary databases are synchronized using asynchronous replication the failover may result in data loss.</span></span> <span data-ttu-id="90d7e-216">Otomatik Yük devretme İlkesi uygulamanızın dayanıklılık veri kaybından yansıtacak şekilde özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-216">You can customize the automatic failover policy to reflect your application’s tolerance to data loss.</span></span> <span data-ttu-id="90d7e-217">Yapılandırarak **GracePeriodWithDataLossHours**, sistem sonuç veri kaybına büyük olasılıkla yük devretmeyi başlatmadan önce bekleyeceği süreyi kontrol edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-217">By configuring **GracePeriodWithDataLossHours**, you can control how long the system waits before initiating the failover that is likely to result data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="90d7e-218">Sistem algıladığında grubundaki veritabanı hala çevrimiçi olduğu (örneğin, kesinti yalnızca hizmet denetim düzlemi etkilenebilir) tarafındanayarlanandeğerbağımsızolaraktamverieşitlemesi(kolayyükdevretme)ileyükdevretmehemenetkinleştirir **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="90d7e-218">When system detects that the databases in the group are still online (for example, the outage only impacted the service control plane), it immediately activates the failover with full data synchronization (friendly failover) regardless of the value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="90d7e-219">Bu davranış, Kurtarma sırasında veri kaybı olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-219">This behavior ensures that there is no data loss during the recovery.</span></span> <span data-ttu-id="90d7e-220">Yalnızca kolay bir yük devretme mümkün değilse, yetkisiz kullanım süresi etkinleşir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-220">The grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="90d7e-221">Yetkisiz kullanım süresi dolmadan kesinti azaltılan, yük devretme etkinleştirilmedi.</span><span class="sxs-lookup"><span data-stu-id="90d7e-221">If the outage is mitigated before the grace period expires, the failover is not activated.</span></span>
   >

* <span data-ttu-id="90d7e-222">**Birden çok yük devretme grubu**: yük devretme işlemlerini ölçeğini denetlemek için birden çok yük devretme grubu sunucuları aynı çifti için yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-222">**Multiple failover groups**: You can configure multiple failover groups for the same pair of servers to control the scale of failovers.</span></span> <span data-ttu-id="90d7e-223">Her grubu üzerinden bağımsız olarak başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-223">Each group fails over independently.</span></span> <span data-ttu-id="90d7e-224">Çok kiracılı uygulamanızı esnek havuzlar kullanıyorsa, birincil ve ikincil veritabanları her havuzda karıştırmak için bu özelliği kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-224">If your multi-tenant application uses elastic pools, you can use this capability to mix primary and secondary databases in each pool.</span></span> <span data-ttu-id="90d7e-225">Bu şekilde bir kesinti etkisini yalnızca yarısı kiracılar için azaltabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-225">This way you can reduce the impact of an outage to only half of the tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="90d7e-226">Yüksek oranda kullanılabilir hizmet oluşturmanın en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="90d7e-226">Best practices of building highly available service</span></span>

<span data-ttu-id="90d7e-227">Müşteriler, Azure SQL veritabanı kullanan yüksek oranda kullanılabilir bir hizmet oluşturmak için bu yönergeleri izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="90d7e-227">To build a highly available service that uses Azure SQL database the customers should follow these guidelines:</span></span>
- <span data-ttu-id="90d7e-228">**Yük devretme grup**: farklı bölgelerde (birincil ve ikincil sunucular) iki sunucu arasında bir veya daha çok yük devretme grupları oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="90d7e-229">Her grup tüm veya bazı birincil veritabanı kesinti birincil bölge içinde nedeniyle kullanılamaz hale durumunda, bir birim olarak kurtarılan bir veya daha çok veritabanı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span> <span data-ttu-id="90d7e-230">Yük devretme grubu, birincil olarak aynı hizmet hedefi ile ikincil coğrafi çoğaltmalı veritabanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-230">The failover group creates geo-secondary database with the same service objective as the primary.</span></span> <span data-ttu-id="90d7e-231">Var olan bir coğrafi çoğaltma ilişkisinin yük devretme grubuna eklerseniz coğrafi ikincil ile aynı hizmet düzeyi hedefi birincil olarak yapılandırıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="90d7e-231">If you add an existing geo-replication relationship to the failover group make sure the geo-secondary is configured with the same service level objective as the primary.</span></span>
- <span data-ttu-id="90d7e-232">**OLTP iş yükü için okuma-yazma dinleyici kullanın**: OLTP işlemleri kullanım gerçekleştirirken  **&lt;yük devretme grup adı&gt;. database.windows.net** sunucusu URL'si ve bağlantıları olacaktır. otomatik olarak birincil yönlendirilmiş.</span><span class="sxs-lookup"><span data-stu-id="90d7e-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as the server URL and the connections will be automatically directed to the primary.</span></span> <span data-ttu-id="90d7e-233">Bu URL, yük devretme sonrasında değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="90d7e-233">This URL will not change after the failover.</span></span>  
<span data-ttu-id="90d7e-234">Not yük devretme, yalnızca istemci DNS önbelleğinde yenilendiğini sonra istemci bağlantıları için yeni birincil yönlendirilir ve DNS kaydı güncelleştirilmesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-234">Note the failover involves updating the DNS record so the client connections will be redirected to the new primary only after the client DNS cache is refreshed.</span></span>
- <span data-ttu-id="90d7e-235">**Salt okunur iş yükü için salt okunur bir dinleyici kullanın**: belirli veri eskime durumu için dayanıklı olan mantıksal olarak yalıtılmış bir salt okunur yükünü varsa, ikincil veritabanı uygulamada kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant to certain staleness of data, you can use the secondary database in the application.</span></span> <span data-ttu-id="90d7e-236">Salt okunur oturumları kullanmak için  **&lt;yük devretme grup adı&gt;. secondary.database.windows.net** sunucunun URL'sini ve bağlantı otomatik olarak ikincil yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as the server URL and the connection will be automatically directed to the secondary.</span></span> <span data-ttu-id="90d7e-237">Bağlantı dizesinde amacı kullanarak okunur belirtmek ayrıca önerilir **ApplicationIntent ReadOnly =**.</span><span class="sxs-lookup"><span data-stu-id="90d7e-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="90d7e-238">**Performans düşüşünü için hazır**: SQL yük devretme karardır uygulama ya da kullanılan diğer hizmetlerin geri kalanından bağımsız.</span><span class="sxs-lookup"><span data-stu-id="90d7e-238">**Be prepared for perf degradation**: SQL failover decision is independent from the rest of the application or other services used.</span></span> <span data-ttu-id="90d7e-239">Uygulama "tek bir bölge ve bazı durumlarda başka bazı bileşenleri ile karışık".</span><span class="sxs-lookup"><span data-stu-id="90d7e-239">The application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="90d7e-240">Düşüşünü önlemek için DR bölge olarak yedekli uygulama dağıtımında emin olun ve bu makaledeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="90d7e-240">To avoid the degradation, ensure the redundant application deployment in the DR region and follow the guidelines in this article.</span></span>  
<span data-ttu-id="90d7e-241">Not DR bölge uygulamada farklı bir bağlantı dizesi kullanmak mevcut değil.</span><span class="sxs-lookup"><span data-stu-id="90d7e-241">Note the application in the DR region does not have to use a different connection string.</span></span>  
- <span data-ttu-id="90d7e-242">**Veri kaybı hazırlama**: kesinti algılanırsa, sıfır veri kaybı için en iyisi bizim bilgi varsa SQL otomatik olarak okuma-yazma yük devretmeyi tetikler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss to the best of our knowledge.</span></span> <span data-ttu-id="90d7e-243">Aksi halde, belirtilen süre boyunca bekler **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="90d7e-243">Otherwise, it waits for the period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="90d7e-244">Belirttiyseniz **GracePeriodWithDataLossHours**, veri kaybı hazırlıklı.</span><span class="sxs-lookup"><span data-stu-id="90d7e-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="90d7e-245">Genel olarak, kesintiler sırasında Azure kullanılabilirlik korur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="90d7e-246">Veri kaybını göze alamıyorsanız, ayarladığınızdan emin olun **GracePeriodWithDataLossHours** 24 saat gibi yeterli büyüklükte bir sayı.</span><span class="sxs-lookup"><span data-stu-id="90d7e-246">If you cannot afford data loss, make sure to set **GracePeriodWithDataLossHours** to a sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="90d7e-247">Yükseltme veya bir birincil veritabanı önceki sürüme indirme</span><span class="sxs-lookup"><span data-stu-id="90d7e-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="90d7e-248">Yükseltme veya ikincil bir veritabanınız kesmeden birincil veritabanı farklı performans düzeyine (içinde aynı hizmet katmanı) düşürmek.</span><span class="sxs-lookup"><span data-stu-id="90d7e-248">You can upgrade or downgrade a primary database to a different performance level (within the same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="90d7e-249">Yükseltme yaparken, ikincil veritabanı yükseltmeniz ve ardından birincil yükseltmeniz önerilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-249">When upgrading, we recommend that you upgrade the secondary database first, and then upgrade the primary.</span></span> <span data-ttu-id="90d7e-250">Eski sürüme düşürmeyi, ters sırada: birincil ilk düşürmek ve ikincil düşürmek.</span><span class="sxs-lookup"><span data-stu-id="90d7e-250">When downgrading, reverse the order: downgrade the primary first, and then downgrade the secondary.</span></span> <span data-ttu-id="90d7e-251">Bu öneri, yükseltin veya farklı bir hizmet katmanı veritabanına düşürmek uygulanır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-251">When you upgrade or downgrade the database to a different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="90d7e-252">Yük devretme grubu yapılandırmasının bir parçası ikincil veritabanı oluşturduysanız, ikincil veritabanı düşürmek için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="90d7e-252">If you created secondary database as part of the failover group configuration it is not recommended to downgrade the secondary database.</span></span> <span data-ttu-id="90d7e-253">Bu, veri katmanı yük devretme etkinleştirildikten sonra normal iş yükünü işlemek için yeterli kapasiteye sahip emin olmaktır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-253">This is to ensure your data tier has sufficient capacity to process your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-the-loss-of-critical-data"></a><span data-ttu-id="90d7e-254">Önemli verilerin kaybını önleme</span><span class="sxs-lookup"><span data-stu-id="90d7e-254">Preventing the loss of critical data</span></span>
<span data-ttu-id="90d7e-255">Geniş alan ağları yüksek gecikme nedeniyle sürekli kopyalama bir zaman uyumsuz çoğaltma mekanizması kullanır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-255">Due to the high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="90d7e-256">Zaman uyumsuz çoğaltma bir hata oluşursa bazı veri kaybı kaçınılmaz hale getirir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="90d7e-257">Ancak, bazı uygulamalar, veri kaybı gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="90d7e-258">Bu kritik güncelleştirmeler korumak için uygulama geliştiricisi çağırabilirsiniz [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) işlemi sonlandırdı hemen sonra sistem yordamı.</span><span class="sxs-lookup"><span data-stu-id="90d7e-258">To protect these critical updates, an application developer can call the [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing the transaction.</span></span> <span data-ttu-id="90d7e-259">Çağırma **sp_wait_for_database_copy_sync** son kaydedilmiş işlem ikincil veritabanına gönderilene kadar çağıran iş parçacığı engeller.</span><span class="sxs-lookup"><span data-stu-id="90d7e-259">Calling **sp_wait_for_database_copy_sync** blocks the calling thread until the last committed transaction has been transmitted to the secondary database.</span></span> <span data-ttu-id="90d7e-260">Ancak, yeniden ve ikincil kaydedilen iletilen işlemler için beklemez.</span><span class="sxs-lookup"><span data-stu-id="90d7e-260">However, it does not wait for the transmitted transactions to be replayed and committed on the secondary.</span></span> <span data-ttu-id="90d7e-261">**sp_wait_for_database_copy_sync** belirli sürekli kopyalama bağlantısı kapsamlıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-261">**sp_wait_for_database_copy_sync** is scoped to a specific continuous copy link.</span></span> <span data-ttu-id="90d7e-262">Birincil veritabanına bağlantı haklarıyla herhangi bir kullanıcı, bu yordamı çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-262">Any user with the connection rights to the primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="90d7e-263">**sp_wait_for_database_copy_sync** veri kaybı yük devretme sonrasında engeller, ancak okuma erişimi için tam eşitleme garanti değil.</span><span class="sxs-lookup"><span data-stu-id="90d7e-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="90d7e-264">Nedeni gecikme bir **sp_wait_for_database_copy_sync** yordam çağrısı önemli olabilir ve çağrı aynı anda işlem günlüğü boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-264">The delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on the size of the transaction log at the time of the call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="90d7e-265">Yük devretme grupları ve etkin coğrafi çoğaltma programlı olarak yönetme</span><span class="sxs-lookup"><span data-stu-id="90d7e-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="90d7e-266">Otomatik Yük devretme grupları (Önizleme-) ve etkin daha önce açıklandığı gibi coğrafi çoğaltma program aracılığıyla Azure PowerShell ve REST API'si kullanılarak da yönetilebilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and the REST API.</span></span> <span data-ttu-id="90d7e-267">Aşağıdaki tablolar kullanılabilir komutlar kümesi açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-267">The following tables describe the set of commands available.</span></span>

<span data-ttu-id="90d7e-268">**Azure Resource Manager API ve rol tabanlı güvenlik**: aktif coğrafi çoğaltma içeren Azure Resource Manager API'leri bir dizi yönetim için de dahil olmak üzere [Azure SQL Database REST API'sini](https://docs.microsoft.com/rest/api/sql/) ve [Azure PowerShell cmdlet'leri](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="90d7e-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including the [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="90d7e-269">Bu API'ları kaynak gruplarının kullanımı gerektirir ve rol tabanlı güvenlik (RBAC) desteği.</span><span class="sxs-lookup"><span data-stu-id="90d7e-269">These APIs require the use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="90d7e-270">Erişim rolleri gerçekleştirme hakkında daha fazla bilgi için bkz: [Azure rol tabanlı erişim denetimi](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-270">For more information on how to implement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="90d7e-271">Aktif coğrafi çoğaltma pek çok yeni özelliği kullanarak yalnızca desteklenen [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) göre [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) ve [Azure SQL Database PowerShell cmdlet'leri](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="90d7e-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="90d7e-272">[(Klasik) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) ve [Azure SQL Database (Klasik) cmdlet'leri](https://msdn.microsoft.com/library/azure/dn546723.aspx) Azure Resource Manager tabanlı API'lerini kullanarak önerilir şekilde geriye dönük uyumluluk için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-272">The [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using the Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="90d7e-273">SQL veritabanı Transact-SQL kullanarak yük devretme kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="90d7e-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="90d7e-274">Komut</span><span class="sxs-lookup"><span data-stu-id="90d7e-274">Command</span></span> | <span data-ttu-id="90d7e-275">Açıklama</span><span class="sxs-lookup"><span data-stu-id="90d7e-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="90d7e-276">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="90d7e-277">Varolan bir veritabanını ve başlatır veri çoğaltma için ikincil bir veritabanı oluşturmak için ikincil üzerinde Sunucu Ekle bağımsız değişkenini kullanın</span><span class="sxs-lookup"><span data-stu-id="90d7e-277">Use ADD SECONDARY ON SERVER argument to create a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="90d7e-278">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="90d7e-279">Yük devretme başlatmak için birincil olarak ikincil bir veritabanı geçiş yapmak için yük DEVRETME veya FORCE_FAILOVER_ALLOW_DATA_LOSS kullanın</span><span class="sxs-lookup"><span data-stu-id="90d7e-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS to switch a secondary database to be primary to initiate failover</span></span> |
| [<span data-ttu-id="90d7e-280">ALTER DATABASE (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="90d7e-281">Bir SQL veritabanı ve belirtilen ikincil veritabanı arasında veri kopyalama sonlandırmak için ikincil üzerinde SUNUCUSUNU Kaldır kullanın.</span><span class="sxs-lookup"><span data-stu-id="90d7e-281">Use REMOVE SECONDARY ON SERVER to terminate a data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="90d7e-282">sys.geo_replication_links (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="90d7e-283">Azure SQL Database mantıksal sunucusunda her veritabanı için tüm yineleme bağlantıları hakkında bilgi verir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-283">Returns information about all existing replication links for each database on the Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="90d7e-284">sys.dm_geo_replication_link_status (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="90d7e-285">Belirli bir SQL veritabanı için son çoğaltma saati, son çoğaltma gecikmesi ve çoğaltma bağlantısı hakkında diğer bilgi alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-285">Gets the last replication time, last replication lag, and other information about the replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="90d7e-286">sys.dm_operation_status (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="90d7e-287">Çoğaltma bağlantılarının durumunu da dahil olmak üzere tüm veritabanı işlemleri için durumunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-287">Shows the status for all database operations including the status of the replication links.</span></span> |
| [<span data-ttu-id="90d7e-288">sp_wait_for_database_copy_sync (Azure SQL veritabanı)</span><span class="sxs-lookup"><span data-stu-id="90d7e-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="90d7e-289">tüm kaydedilmiş işlemleri çoğaltılır ve etkin ikincil veritabanı tarafından onaylanan kadar beklemeniz uygulamanın neden olur.</span><span class="sxs-lookup"><span data-stu-id="90d7e-289">causes the application to wait until all committed transactions are replicated and acknowledged by the active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="90d7e-290">SQL veritabanı yük devretme PowerShell kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="90d7e-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="90d7e-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="90d7e-291">Cmdlet</span></span> | <span data-ttu-id="90d7e-292">Açıklama</span><span class="sxs-lookup"><span data-stu-id="90d7e-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="90d7e-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="90d7e-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="90d7e-294">Bir veya daha fazla veritabanı alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="90d7e-295">AzureRmSqlDatabaseSecondary yeni</span><span class="sxs-lookup"><span data-stu-id="90d7e-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="90d7e-296">Var olan bir veritabanı için ikincil bir veritabanı oluşturur ve veri çoğaltma başlatır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="90d7e-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="90d7e-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="90d7e-298">Yük devretme başlatmak için birincil olarak ikincil bir veritabanı geçer.</span><span class="sxs-lookup"><span data-stu-id="90d7e-298">Switches a secondary database to be primary to initiate failover.</span></span> |
| [<span data-ttu-id="90d7e-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="90d7e-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="90d7e-300">Bir SQL veritabanı ve belirtilen ikincil veritabanı arasında veri kopyalama sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-300">Terminates data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="90d7e-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="90d7e-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="90d7e-302">Bir Azure SQL Database ve bir kaynak grubu veya SQL Server arasındaki coğrafi Çoğaltma bağlantılarını alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-302">Gets the geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="90d7e-303">AzureRmSqlDatabaseFailoverGroup yeni</span><span class="sxs-lookup"><span data-stu-id="90d7e-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="90d7e-304">Bu komut, bir yük devretme grubu oluşturur ve birincil ve ikincil sunucularda kaydeder</span><span class="sxs-lookup"><span data-stu-id="90d7e-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="90d7e-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="90d7e-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="90d7e-306">Yük devretme grubu sunucusundan kaldırır ve tüm siler ikincil veritabanları dahil grubu</span><span class="sxs-lookup"><span data-stu-id="90d7e-306">Removes the failover group from the server and deletes all secondary databases included the group</span></span> |
| [<span data-ttu-id="90d7e-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="90d7e-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="90d7e-308">Yük devretme grubu yapılandırmasını alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-308">Retrieves the failover group configuration</span></span> |
| [<span data-ttu-id="90d7e-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="90d7e-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="90d7e-310">Yük devretme grubunun yapılandırmasını değiştirir</span><span class="sxs-lookup"><span data-stu-id="90d7e-310">Modifies the configuration of the failover group</span></span> |
| [<span data-ttu-id="90d7e-311">Anahtar AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="90d7e-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="90d7e-312">İkincil sunucuya Yük devretme grubu Tetikleyicileri yük devretme</span><span class="sxs-lookup"><span data-stu-id="90d7e-312">Triggers failover of the failover group to the secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="90d7e-313">Örnek komut dosyaları için bkz: [Yapılandır ve yük devretme aktif coğrafi çoğaltma kullanarak tek bir veritabanı](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Yapılandır ve yük devretme aktif coğrafi çoğaltma kullanarak havuza alınmış bir veritabanı](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), ve [Yapılandır ve yük devretme bir tek veritabanı (Önizleme) için yük devretme grubu] (komut dosyaları/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="90d7e-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-the-rest-api"></a><span data-ttu-id="90d7e-314">SQL veritabanı yük devretme REST API kullanarak yönetme</span><span class="sxs-lookup"><span data-stu-id="90d7e-314">Manage SQL database failover using the REST API</span></span>
| <span data-ttu-id="90d7e-315">API</span><span class="sxs-lookup"><span data-stu-id="90d7e-315">API</span></span> | <span data-ttu-id="90d7e-316">Açıklama</span><span class="sxs-lookup"><span data-stu-id="90d7e-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="90d7e-317">Oluşturma veya güncelleştirme veritabanı (createMode = geri yükle)</span><span class="sxs-lookup"><span data-stu-id="90d7e-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="90d7e-318">Oluşturur, güncelleştirir veya bir birincil veya ikincil bir veritabanını geri yükler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="90d7e-319">Get oluştur veya veritabanı durumunu güncelleştir</span><span class="sxs-lookup"><span data-stu-id="90d7e-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="90d7e-320">Durum oluşturma işlemi sırasında döndürür.</span><span class="sxs-lookup"><span data-stu-id="90d7e-320">Returns the status during a create operation.</span></span> |
| [<span data-ttu-id="90d7e-321">İkincil veritabanının birincil (Planlı yük devretme) olarak ayarlayın</span><span class="sxs-lookup"><span data-stu-id="90d7e-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="90d7e-322">Hangi veritabanı çoğaltmasını birincil yapabilmesini geçerli birincil çoğaltma veritabanından göre ayarlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-322">Sets which replica database is primary by failing over from the current primary replica database.</span></span> |
| [<span data-ttu-id="90d7e-323">İkincil veritabanının birincil (planlanmamış yük devretme) olarak ayarlayın</span><span class="sxs-lookup"><span data-stu-id="90d7e-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="90d7e-324">Hangi veritabanı çoğaltmasını birincil yapabilmesini geçerli birincil çoğaltma veritabanından göre ayarlar.</span><span class="sxs-lookup"><span data-stu-id="90d7e-324">Sets which replica database is primary by failing over from the current primary replica database.</span></span> <span data-ttu-id="90d7e-325">Bu işlem, veri kaybına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="90d7e-326">Çoğaltma bağlantısı Al</span><span class="sxs-lookup"><span data-stu-id="90d7e-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="90d7e-327">Belirli çoğaltma bağlantısı belirli bir SQL veritabanında bir coğrafi çoğaltma ortaklığı alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="90d7e-328">Sys.geo_replication_links katalog görünümünde görünür bilgi alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-328">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="90d7e-329">Çoğaltma bağlantılarını - veritabanı göre listesi</span><span class="sxs-lookup"><span data-stu-id="90d7e-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="90d7e-330">Coğrafi çoğaltma ortaklığı belirli bir SQL veritabanında tüm çoğaltma bağlantılarını alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="90d7e-331">Sys.geo_replication_links katalog görünümünde görünür bilgi alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-331">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="90d7e-332">Çoğaltma bağlantısı Sil</span><span class="sxs-lookup"><span data-stu-id="90d7e-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="90d7e-333">Bir veritabanı yinelemesi siler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-333">Deletes a database replication link.</span></span> <span data-ttu-id="90d7e-334">Yük devretme sırasında yapılamaz.</span><span class="sxs-lookup"><span data-stu-id="90d7e-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="90d7e-335">[Oluşturma veya güncelleştirme yük devretme grubu] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="90d7e-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="90d7e-336">Oluşturur veya bir yük devretme grubu güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="90d7e-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="90d7e-337">Yük devretme grubu Sil</span><span class="sxs-lookup"><span data-stu-id="90d7e-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="90d7e-338">Yük devretme grubu sunucudan kaldırır</span><span class="sxs-lookup"><span data-stu-id="90d7e-338">Removes the failover group from the server</span></span> |
| [<span data-ttu-id="90d7e-339">Yük devretme (planlanmış)</span><span class="sxs-lookup"><span data-stu-id="90d7e-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="90d7e-340">Geçerli birincil sunucudan bu sunucuya yöneltilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-340">Fails over from the current primary server to this server.</span></span> |
| [<span data-ttu-id="90d7e-341">Zorla yük devretme veri kaybı izin ver</span><span class="sxs-lookup"><span data-stu-id="90d7e-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="90d7e-342">üzerinden bu sunucu için geçerli birincil sunucudan ails.</span><span class="sxs-lookup"><span data-stu-id="90d7e-342">ails over from the current primary server to this server.</span></span> <span data-ttu-id="90d7e-343">Bu işlem, veri kaybına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="90d7e-344">Get yük devretme grubu</span><span class="sxs-lookup"><span data-stu-id="90d7e-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="90d7e-345">Bir yük devretme grubunu alır.</span><span class="sxs-lookup"><span data-stu-id="90d7e-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="90d7e-346">Sunucu tarafından listesi yük devretme grupları</span><span class="sxs-lookup"><span data-stu-id="90d7e-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="90d7e-347">Bir sunucu yük devretme gruplarında listeler.</span><span class="sxs-lookup"><span data-stu-id="90d7e-347">Lists the failover groups in a server.</span></span> |
| [<span data-ttu-id="90d7e-348">Yük devretme grubu güncelleştir</span><span class="sxs-lookup"><span data-stu-id="90d7e-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="90d7e-349">Bir yük devretme grubu güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="90d7e-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="90d7e-350">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="90d7e-350">Next steps</span></span>
* <span data-ttu-id="90d7e-351">Örnek komut dosyaları için bkz:</span><span class="sxs-lookup"><span data-stu-id="90d7e-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="90d7e-352">Yapılandırma ve yük devretme aktif coğrafi çoğaltma kullanarak tek bir veritabanı</span><span class="sxs-lookup"><span data-stu-id="90d7e-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="90d7e-353">Yapılandırma ve yük devretme aktif coğrafi çoğaltma kullanarak havuza alınmış bir veritabanı</span><span class="sxs-lookup"><span data-stu-id="90d7e-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="90d7e-354">Yapılandırma ve yük devretme yük devretme bir grup için tek bir veritabanına (Önizleme)</span><span class="sxs-lookup"><span data-stu-id="90d7e-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="90d7e-355">İş sürekliliğine genel bakış ve senaryolar için bkz: [iş sürekliliğine genel bakış](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="90d7e-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="90d7e-356">Veritabanı Yedeklemeleri otomatik Azure SQL hakkında bilgi edinmek için bkz: [SQL veritabanı yedeklemeleri otomatik](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-356">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="90d7e-357">Kurtarma için otomatik yedeklemeler kullanma hakkında bilgi edinmek için bkz: [bir veritabanını hizmeti tarafından başlatılan yedeklerden geri](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-357">To learn about using automated backups for recovery, see [Restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="90d7e-358">Yeni birincil sunucu ve veritabanı için kimlik doğrulama gereksinimleri hakkında bilgi edinmek için [olağanüstü durum kurtarma işleminden sonra SQL veritabanı güvenlik](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="90d7e-358">To learn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

