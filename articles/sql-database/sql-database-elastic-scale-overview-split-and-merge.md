---
title: "ölçeklendirilen bulut veritabanları arasında aaaMoving verileri | Microsoft Docs"
description: "API toomanipulate parça ve esnek kullanarak bir kendi kendini barındıran hizmet aracılığıyla taşıma verilerine nasıl veritabanı açıklanmaktadır."
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 629dee06e22609e9b61edf93ba5c38d997132d8c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="8478e-103">Ölçeği genişletilen bulut veritabanları arasında veri taşıma</span><span class="sxs-lookup"><span data-stu-id="8478e-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="8478e-104">Bir hizmet geliştiricisi olarak yazılımlardır ve uygulamanızı inanılmaz isteğe bağlı aniden uğradığında tooaccommodate hello büyüme gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need tooaccommodate hello growth.</span></span> <span data-ttu-id="8478e-105">Bu nedenle daha fazla veritabanı (bölümler) ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8478e-105">So you add more databases (shards).</span></span> <span data-ttu-id="8478e-106">Nasıl hello veri bütünlüğü kesintiye uğratmadan hello veri toohello yeni veritabanları dağıtabilir?</span><span class="sxs-lookup"><span data-stu-id="8478e-106">How do you redistribute hello data toohello new databases without disrupting hello data integrity?</span></span> <span data-ttu-id="8478e-107">Kullanım hello **bölünmüş Birleştirme aracı** kısıtlanmış toomove verilerden veritabanları toohello yeni veritabanları.</span><span class="sxs-lookup"><span data-stu-id="8478e-107">Use hello **split-merge tool** toomove data from constrained databases toohello new databases.</span></span>  

<span data-ttu-id="8478e-108">Merhaba bölünmüş Birleştirme aracı bir Azure web hizmeti olarak çalışır.</span><span class="sxs-lookup"><span data-stu-id="8478e-108">hello split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="8478e-109">Bir yönetici veya Geliştirici farklı veritabanları (bölümler) arasında hello aracı toomove shardlets (bir parça verilerden) kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-109">An administrator or developer uses hello tool toomove shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="8478e-110">Merhaba aracı parça eşleme yönetim toomaintain hello hizmeti meta veri veritabanı kullanır ve tutarlı eşlemeleri emin olun.</span><span class="sxs-lookup"><span data-stu-id="8478e-110">hello tool uses shard map management toomaintain hello service metadata database, and ensure consistent mappings.</span></span>

![Genel Bakış][1]

## <a name="download"></a><span data-ttu-id="8478e-112">İndir</span><span class="sxs-lookup"><span data-stu-id="8478e-112">Download</span></span>
[<span data-ttu-id="8478e-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="8478e-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="8478e-114">Belgeler</span><span class="sxs-lookup"><span data-stu-id="8478e-114">Documentation</span></span>
1. [<span data-ttu-id="8478e-115">Esnek veritabanı bölünmüş Birleştirme aracı Öğreticisi</span><span class="sxs-lookup"><span data-stu-id="8478e-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="8478e-116">Bölünmüş birleştirme güvenlik yapılandırması</span><span class="sxs-lookup"><span data-stu-id="8478e-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="8478e-117">Bölünmüş birleştirme güvenlik konuları</span><span class="sxs-lookup"><span data-stu-id="8478e-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="8478e-118">Parça eşleme yönetimi</span><span class="sxs-lookup"><span data-stu-id="8478e-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="8478e-119">Varolan veritabanları tooscale kullanıma geçirme</span><span class="sxs-lookup"><span data-stu-id="8478e-119">Migrate existing databases tooscale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="8478e-120">Esnek veritabanı araçları</span><span class="sxs-lookup"><span data-stu-id="8478e-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="8478e-121">Esnek veritabanı araçlarını sözlüğü</span><span class="sxs-lookup"><span data-stu-id="8478e-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-hello-split-merge-tool"></a><span data-ttu-id="8478e-122">Merhaba bölünmüş Birleştirme aracı neden kullanılır?</span><span class="sxs-lookup"><span data-stu-id="8478e-122">Why use hello split-merge tool?</span></span>
<span data-ttu-id="8478e-123">**Esneklik**</span><span class="sxs-lookup"><span data-stu-id="8478e-123">**Flexibility**</span></span>

<span data-ttu-id="8478e-124">Uygulamaları tek bir Azure SQL DB veritabanı hello sınırları dışına esnek toostretch gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-124">Applications need toostretch flexibly beyond hello limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="8478e-125">Merhaba aracı toomove veri bütünlüğü korurken gerekli toonew veritabanları olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="8478e-125">Use hello tool toomove data as needed toonew databases while retaining integrity.</span></span>

<span data-ttu-id="8478e-126">**Bölünmüş toogrow**</span><span class="sxs-lookup"><span data-stu-id="8478e-126">**Split toogrow**</span></span> 

<span data-ttu-id="8478e-127">Genel tooincrease gereken kapasite toohandle Patlayıcı büyüme.</span><span class="sxs-lookup"><span data-stu-id="8478e-127">You need tooincrease overall capacity toohandle explosive growth.</span></span> <span data-ttu-id="8478e-128">toodo bu nedenle, oluşturma ek kapasite parçalama hello veri ve tarafından kapasite gereksinimleri karşılandıktan kadar artımlı olarak daha fazla veritabanı arasında dağıtma.</span><span class="sxs-lookup"><span data-stu-id="8478e-128">toodo so, create additional capacity by sharding hello data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="8478e-129">Bu, 'bölme' hello özelliğinin prime bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="8478e-129">This is a prime example of hello ‘split’ feature.</span></span> 

<span data-ttu-id="8478e-130">**Tooshrink birleştirme**</span><span class="sxs-lookup"><span data-stu-id="8478e-130">**Merge tooshrink**</span></span>

<span data-ttu-id="8478e-131">Kapasite toohello Mevsimlik yapısını iş Küçült.</span><span class="sxs-lookup"><span data-stu-id="8478e-131">Capacity needs shrink due toohello seasonal nature of a business.</span></span> <span data-ttu-id="8478e-132">İş yavaşlatır zaman toofewer ölçek birimleri ölçeklendirme hello araç sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-132">hello tool lets you scale down toofewer scale units when business slows.</span></span> <span data-ttu-id="8478e-133">Merhaba esnek ölçek bölme birleştirme hizmetine Hello 'merge' özelliği bu gereksinim kapsar.</span><span class="sxs-lookup"><span data-stu-id="8478e-133">hello ‘merge’ feature in hello Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="8478e-134">**Etkin noktalarına shardlets taşıyarak yönetme**</span><span class="sxs-lookup"><span data-stu-id="8478e-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="8478e-135">Veritabanı başına birden çok Kiracı ile üzerinde bazı parça toocapacity performans sorunlarını shardlets tooshards hello ayrılması yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-135">With multiple tenants per database, hello allocation of shardlets tooshards can lead toocapacity bottlenecks on some shards.</span></span> <span data-ttu-id="8478e-136">Bu, shardlets yeniden ayırma veya meşgul shardlets toonew veya daha az kullanılan parça taşımayı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8478e-136">This requires re-allocating shardlets or moving busy shardlets toonew or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="8478e-137">Kavramları ve anahtar özellikler</span><span class="sxs-lookup"><span data-stu-id="8478e-137">Concepts & key features</span></span>
<span data-ttu-id="8478e-138">**Müşteri barındırılan hizmetleri**</span><span class="sxs-lookup"><span data-stu-id="8478e-138">**Customer-hosted services**</span></span>

<span data-ttu-id="8478e-139">Merhaba bölünmüş birleştirme müşteri tarafından barındırılan bir hizmet olarak teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-139">hello split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="8478e-140">Dağıtmak ve Microsoft Azure aboneliğiniz hello hizmetini barındırır.</span><span class="sxs-lookup"><span data-stu-id="8478e-140">You must deploy and host hello service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="8478e-141">Nuget'ten yükleme hello paketi yapılandırma şablonu toocomplete belirli dağıtımınız için hello bilgilerle içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-141">hello package you download from NuGet contains a configuration template toocomplete with hello information for your specific deployment.</span></span> <span data-ttu-id="8478e-142">Merhaba bkz [bölünmüş birleştirme öğretici](sql-database-elastic-scale-configure-deploy-split-and-merge.md) Ayrıntılar için.</span><span class="sxs-lookup"><span data-stu-id="8478e-142">See hello [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="8478e-143">Azure aboneliğinizde Hello hizmeti çalışır olduğundan, denetlemek ve hello hizmet çoğu güvenlik özelliklerini yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="8478e-143">Since hello service runs in your Azure subscription, you can control and configure most security aspects of hello service.</span></span> <span data-ttu-id="8478e-144">Merhaba varsayılan şablon hello seçenekleri tooconfigure SSL, istemci sertifika tabanlı kimlik doğrulaması, şifreleme için depolanan kimlik bilgileri, kullanılan koruyarak DoS ve IP kısıtlamaları içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-144">hello default template includes hello options tooconfigure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="8478e-145">Belge aşağıdaki hello güvenlik yönünden hello hakkında daha fazla bilgi bulabilirsiniz [bölünmüş birleştirme Güvenlik Yapılandırması](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="8478e-145">You can find more information on hello security aspects in hello following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="8478e-146">Merhaba varsayılan hizmeti çalıştığında bir çalışan ve bir web rolü ile birlikte dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="8478e-146">hello default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="8478e-147">Her Azure Cloud Services hello A1 VM boyutu kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-147">Each uses hello A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="8478e-148">Merhaba paketini dağıtırken bu ayarları değiştiremezsiniz, ancak bir bulut hizmeti (hello Azure portalı) çalıştıran hello başarılı dağıtım sonrasında değiştirebilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-148">While you cannot modify these settings when deploying hello package, you could change them after a successful deployment in hello running cloud service, (through hello Azure portal).</span></span> <span data-ttu-id="8478e-149">Bu hello çalışan rolü birden çok tek bir örnek için teknik nedenlerle yapılandırılmamalıdır unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-149">Note that hello worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="8478e-150">**Parça eşleme tümleştirme**</span><span class="sxs-lookup"><span data-stu-id="8478e-150">**Shard map integration**</span></span>

<span data-ttu-id="8478e-151">Merhaba bölünmüş birleştirme hizmetine hello parça haritasını Merhaba uygulaması ile etkileşime girer.</span><span class="sxs-lookup"><span data-stu-id="8478e-151">hello split-merge service interacts with hello shard map of hello application.</span></span> <span data-ttu-id="8478e-152">Merhaba bölünmüş birleştirme hizmetine toosplit veya birleştirme aralıkları veya toomove shardlets arasında parça kullanırken, hello hizmet toodate hello parça harita otomatik olarak tutar.</span><span class="sxs-lookup"><span data-stu-id="8478e-152">When using hello split-merge service toosplit or merge ranges or toomove shardlets between shards, hello service automatically keeps hello shard map up toodate.</span></span> <span data-ttu-id="8478e-153">toodo bu nedenle, hello hizmet toohello parça eşleme Yöneticisi veritabanı hello uygulamasının bağlanır ve aralıkları ve eşlemeleri birleştirme/bölünmüş/taşıma isteği ilerleme durumunu korur.</span><span class="sxs-lookup"><span data-stu-id="8478e-153">toodo so, hello service connects toohello shard map manager database of hello application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="8478e-154">Bölünmüş birleştirme işlemleri yükleyecekseniz bu hello parça eşlenen her zaman sunar güncel bir görünüm sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-154">This ensures that hello shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="8478e-155">Bölme, birleştirme ve shardlet taşıma işlemleri hello kaynak parça toohello hedef parça shardlets toplu taşıyarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from hello source shard toohello target shard.</span></span> <span data-ttu-id="8478e-156">Merhaba shardlet taşıma işlemi hello shardlets konu toohello geçerli toplu işlem sırasında hello parça eşlemesinde çevrimdışı olarak işaretlenir ve hello kullanarak veri bağımlı yönlendirme bağlantılarında kullanılamadığından **OpenConnectionForKey** API.</span><span class="sxs-lookup"><span data-stu-id="8478e-156">During hello shardlet movement operation hello shardlets subject toohello current batch are marked as offline in hello shard map and are unavailable for data-dependent routing connections using hello **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="8478e-157">**Tutarlı shardlet bağlantıları**</span><span class="sxs-lookup"><span data-stu-id="8478e-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="8478e-158">Veri taşıma shardlets yeni toplu için başladığında, tüm parça eşleme sağlanan veri bağımlı yönlendirme bağlantıları toohello parça depolanmasını hello shardlet olan hello parça eşleme bu shardlets engellendi API'leri toohello kli ve sonraki bağlantılarından sırada Merhaba veri taşıma sipariş tooavoid tutarsızlığa sürüyor.</span><span class="sxs-lookup"><span data-stu-id="8478e-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections toohello shard storing hello shardlet are killed and subsequent connections from hello shard map APIs toohello these shardlets are blocked while hello data movement is in progress in order tooavoid inconsistencies.</span></span> <span data-ttu-id="8478e-159">Bağlantıları tooother shardlets aynı parça ayrıca sonlandırıldı, ancak yeniden başarılı olur hello üzerinde hemen üzerinde yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="8478e-159">Connections tooother shardlets on hello same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="8478e-160">Hello toplu taşındıktan sonra hello shardlets yeniden hello hedef parça için çevrimiçi olarak işaretlenir ve hello kaynak parça hello kaynak verileri kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="8478e-160">Once hello batch is moved, hello shardlets are marked online again for hello target shard and hello source data is removed from hello source shard.</span></span> <span data-ttu-id="8478e-161">Tüm shardlets taşınana kadar hello hizmeti her toplu işlemi için bu adımları geçer.</span><span class="sxs-lookup"><span data-stu-id="8478e-161">hello service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="8478e-162">Bu birleştirme/bölünmüş/taşıma işlemi tamamlamak hello hello sürecinde tooseveral bağlantı sonlandırma işlemleri götürür.</span><span class="sxs-lookup"><span data-stu-id="8478e-162">This will lead tooseveral connection kill operations during hello course of hello complete split/merge/move operation.</span></span>  

<span data-ttu-id="8478e-163">**Shardlet kullanılabilirlik yönetme**</span><span class="sxs-lookup"><span data-stu-id="8478e-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="8478e-164">Yukarıda açıklanan şekilde shardlets toohello geçerli toplu sonlandırılması hello bağlantı sınırlaması shardlets kullanılamazlık tooone toplu hello kapsamını aynı anda kısıtlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-164">Limiting hello connection killing toohello current batch of shardlets as discussed above restricts hello scope of unavailability tooone batch of shardlets at a time.</span></span> <span data-ttu-id="8478e-165">Bu bir yaklaşım hello tam parça bölme veya birleştirme işlemi hello sürecinde burada kendi shardlets için çevrimdışı kalarak tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-165">This is preferred over an approach where hello complete shard would remain offline for all its shardlets during hello course of a split or merge operation.</span></span> <span data-ttu-id="8478e-166">Merhaba aynı anda farklı shardlets toomove hello sayısı olarak tanımlanan bir toplu işin yapılandırma parametresi boyutudur.</span><span class="sxs-lookup"><span data-stu-id="8478e-166">hello size of a batch, defined as hello number of distinct shardlets toomove at a time, is a configuration parameter.</span></span> <span data-ttu-id="8478e-167">Her bölme ve birleştirme işleminin hello uygulamanın kullanılabilirliğini ve performansını gereksinimlerine bağlı olarak tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-167">It can be defined for each split and merge operation depending on hello application’s availability and performance needs.</span></span> <span data-ttu-id="8478e-168">Merhaba parça eşlemesinde kilitli hello aralık belirtilen hello toplu boyuttan büyük olabileceğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8478e-168">Note that hello range that is being locked in hello shard map may be larger than hello batch size specified.</span></span> <span data-ttu-id="8478e-169">Hello gerçek hello verilerdeki parçalama anahtar değerlerinin sayısı yaklaşık hello toplu iş boyutu eşleşen şekilde hello hizmet hello aralık boyutu Çekmeleri olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-169">This is because hello service picks hello range size such that hello actual number of sharding key values in hello data approximately matches hello batch size.</span></span> <span data-ttu-id="8478e-170">Önemli tooremember özellikle seyrek doldurulmuş parçalama tuşları budur.</span><span class="sxs-lookup"><span data-stu-id="8478e-170">This is important tooremember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="8478e-171">**Meta veri depolama**</span><span class="sxs-lookup"><span data-stu-id="8478e-171">**Metadata storage**</span></span>

<span data-ttu-id="8478e-172">Merhaba bölünmüş birleştirme hizmeti durumunu ve tookeep günlüklerini isteği işleme sırasında bir veritabanı toomaintain kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-172">hello split-merge service uses a database toomaintain its status and tookeep logs during request processing.</span></span> <span data-ttu-id="8478e-173">Merhaba kullanıcı kendi abonelikte bu veritabanı oluşturur ve hello bağlantı dizesi için hello yapılandırma dosyasındaki hello hizmet dağıtımı sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-173">hello user creates this database in their subscription and provides hello connection string for it in hello configuration file for hello service deployment.</span></span> <span data-ttu-id="8478e-174">Merhaba kullanıcının kuruluş yöneticileri aynı zamanda toothis bağlanmak veritabanı tooreview isteği ilerleme ve tooinvestigate ayrıntılı olası hataları ile ilgili bilgiler.</span><span class="sxs-lookup"><span data-stu-id="8478e-174">Administrators from hello user’s organization can also connect toothis database tooreview request progress and tooinvestigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="8478e-175">**Parçalama tanıma**</span><span class="sxs-lookup"><span data-stu-id="8478e-175">**Sharding-awareness**</span></span>

<span data-ttu-id="8478e-176">Merhaba bölünmüş birleştirme hizmetine (1) parçalı tabloları, (2) başvuru tabloları ve (3) normal tablolar arasında ayırır.</span><span class="sxs-lookup"><span data-stu-id="8478e-176">hello split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="8478e-177">bir birleştirme/bölünmüş/taşıma işlemi Hello semantiği hello kullanılan hello tablo türüne bağlıdır ve şu şekilde tanımlanır:</span><span class="sxs-lookup"><span data-stu-id="8478e-177">hello semantics of a split/merge/move operation depend on hello type of hello table used and are defined as follows:</span></span> 

* <span data-ttu-id="8478e-178">**Parçalı tabloları**: bölünmüş, birleştirme ve taşıma işlemlerini kaynak tootarget parça shardlets taşıyın.</span><span class="sxs-lookup"><span data-stu-id="8478e-178">**Sharded tables**: Split, merge, and move operations move shardlets from source tootarget shard.</span></span> <span data-ttu-id="8478e-179">Merhaba başarıyla tamamlandıktan sonra genel istek, bu shardlets artık mevcut hello kaynağında.</span><span class="sxs-lookup"><span data-stu-id="8478e-179">After successful completion of hello overall request, those shardlets are no longer present on hello source.</span></span> <span data-ttu-id="8478e-180">Merhaba hedef tabloları hello hedef parça üzerinde tooexist gerekir ve hello Hedef aralık önceki tooprocessing hello işleminin verilerde içermemelidir unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-180">Note that hello target tables need tooexist on hello target shard and must not contain data in hello target range prior tooprocessing of hello operation.</span></span> 
* <span data-ttu-id="8478e-181">**Başvuru tabloları**: başvuru tabloları, hello bölme, birleştirme ve işlemleri hello kaynak toohello hedef parça hello veri kopyalama taşıyın.</span><span class="sxs-lookup"><span data-stu-id="8478e-181">**Reference tables**: For reference tables, hello split, merge and move operations copy hello data from hello source toohello target shard.</span></span> <span data-ttu-id="8478e-182">Ancak, herhangi bir satır zaten bu tabloda hello hedefte varsa, hiçbir değişiklik hello hedef parça belirli bir tabloya ait üzerinde gerçekleşmesini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-182">Note, however, that no changes occur on hello target shard for a given table if any row is already present in this table on hello target.</span></span> <span data-ttu-id="8478e-183">Merhaba tablosu toobe işlenen tüm başvuru tablosu kopyalama işlemi tooget için boş sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8478e-183">hello table has toobe empty for any reference table copy operation tooget processed.</span></span>
* <span data-ttu-id="8478e-184">**Diğer tablolar**: diğer tablolarla hello kaynak ya da bir bölme ve birleştirme işleminin hello hedef üzerinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-184">**Other Tables**: Other tables can be present on either hello source or hello target of a split and merge operation.</span></span> <span data-ttu-id="8478e-185">Merhaba bölünmüş birleştirme hizmetine herhangi bir veri taşıma veya kopyalama işlemleri için bu tablolar yok sayar.</span><span class="sxs-lookup"><span data-stu-id="8478e-185">hello split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="8478e-186">Ancak, bunlar bu işlemleri kısıtlamaları durumunda olan etkileyebilir unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="8478e-187">başvuru parçalı tabloları karşılaştırması Hello bilgi hello tarafından sağlanan **SchemaInfo** hello parça eşleme API'leri.</span><span class="sxs-lookup"><span data-stu-id="8478e-187">hello information on reference vs. sharded tables is provided by hello **SchemaInfo** APIs on hello shard map.</span></span> <span data-ttu-id="8478e-188">Aşağıdaki örnek hello verilen parça eşleme Yöneticisi nesnesi smm bu API'leri hello kullanımını göstermektedir:</span><span class="sxs-lookup"><span data-stu-id="8478e-188">hello following example illustrates hello use of these APIs on a given shard map manager object smm:</span></span> 

    // Create hello schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="8478e-189">Merhaba tabloları 'bölge' ve 'ulus' başvuru tabloları tanımlanır ve birleştirme/bölünmüş/taşıma işlemleriyle kopyalanacak.</span><span class="sxs-lookup"><span data-stu-id="8478e-189">hello tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="8478e-190">sırayla 'Müşteri' ve 'Siparişler' parçalı tablo olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="8478e-191">C_CUSTKEY ve O_CUSTKEY hello parçalama anahtarı olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="8478e-191">C_CUSTKEY and O_CUSTKEY serve as hello sharding key.</span></span> 

<span data-ttu-id="8478e-192">**Bilgi tutarlılığı**</span><span class="sxs-lookup"><span data-stu-id="8478e-192">**Referential Integrity**</span></span>

<span data-ttu-id="8478e-193">Merhaba bölünmüş birleştirme hizmetine tabloları arasındaki bağımlılıkları analiz eder ve başvuru tabloları ve shardlets taşımak için yabancı anahtar birincil anahtar ilişkileri toostage hello işlem kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-193">hello split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships toostage hello operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="8478e-194">Genel olarak, shardlets bağımlılıklarını her yığın içindeki sırasına kopyalanır sonra başvuru tabloları ilk bağımlılık sırayla kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="8478e-195">Böylece Hello yeni veri ulaştığında hello hedef parça FK PK kısıtlamalar dikkate alınır, bu gereklidir.</span><span class="sxs-lookup"><span data-stu-id="8478e-195">This is necessary so that FK-PK constraints on hello target shard are honored as hello new data arrives.</span></span> 

<span data-ttu-id="8478e-196">**Parça eşleme tutarlılık ve nihai tamamlama**</span><span class="sxs-lookup"><span data-stu-id="8478e-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="8478e-197">Hataları varlığını Merhaba, hello bölünmüş birleştirme hizmet işlemleri herhangi kesinti sonra sürdürür ve toocomplete ilerleme isteklerine birinde amaçlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-197">In hello presence of failures, hello split-merge service resumes operations after any outage and aims toocomplete any in progress requests.</span></span> <span data-ttu-id="8478e-198">Ancak, kurtarılamaz durumlar olabilir, örneğin, hello hedef parça kaybolduğunda veya onarım tehlikeye.</span><span class="sxs-lookup"><span data-stu-id="8478e-198">However, there may be unrecoverable situations, e.g., when hello target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="8478e-199">Bu koşullar altında hello kaynak parça üzerinde tooreside toobe taşınmış olması bazı shardlets devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-199">Under those circumstances, some shardlets that were supposed toobe moved may continue tooreside on hello source shard.</span></span> <span data-ttu-id="8478e-200">Merhaba hizmet hello gerekli verileri başarıyla kopyalanan toohello hedef sonra shardlet eşlemeleri yalnızca güncelleştirilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-200">hello service ensures that shardlet mappings are only updated after hello necessary data has been successfully copied toohello target.</span></span> <span data-ttu-id="8478e-201">Shardlets yalnızca hello kaynağında tüm verilerini bırakıldı toohello hedef kopyalanır ve hello karşılık gelen eşlemeleri başarıyla güncelleştirdiniz silinir.</span><span class="sxs-lookup"><span data-stu-id="8478e-201">Shardlets are only deleted on hello source once all their data has been copied toohello target and hello corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="8478e-202">Merhaba aralık zaten hello hedef parça üzerinde çevrimiçi durumdayken hello silme işlemi hello arka planda gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="8478e-202">hello deletion operation happens in hello background while hello range is already online on hello target shard.</span></span> <span data-ttu-id="8478e-203">Merhaba bölünmüş birleştirme hizmeti her zaman hello parça eşlemesinde depolanan hello eşlemeleri doğruluk sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-203">hello split-merge service always ensures correctness of hello mappings stored in hello shard map.</span></span>

## <a name="hello-split-merge-user-interface"></a><span data-ttu-id="8478e-204">Merhaba bölünmüş birleştirme kullanıcı arabirimi</span><span class="sxs-lookup"><span data-stu-id="8478e-204">hello split-merge user interface</span></span>
<span data-ttu-id="8478e-205">Merhaba bölünmüş birleştirme hizmet paketi çalışan rolü ve bir web rolü içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-205">hello split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="8478e-206">Merhaba web rolü etkileşimli bir şekilde kullanılan toosubmit bölünmüş birleştirme isteği sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-206">hello web role is used toosubmit split-merge requests in an interactive way.</span></span> <span data-ttu-id="8478e-207">Merhaba kullanıcı arabirimi ana bileşenlerinin Hello aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="8478e-207">hello main components of hello user interface are as follows:</span></span>

* <span data-ttu-id="8478e-208">İşlem türü: Bu istek için hello hizmeti tarafından gerçekleştirilen işlem hello tür denetleyen radyo düğmesi hello işlemi türüdür.</span><span class="sxs-lookup"><span data-stu-id="8478e-208">Operation Type: hello operation type is a radio button that controls hello kind of operation performed by hello service for this request.</span></span> <span data-ttu-id="8478e-209">Merhaba bölme arasındaki seçin, birleştirme ve taşıma senaryoları.</span><span class="sxs-lookup"><span data-stu-id="8478e-209">You can choose between hello split, merge and move scenarios.</span></span> <span data-ttu-id="8478e-210">Ayrıca, daha önce gönderilen işlemi iptal edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="8478e-211">Bölünmüş kullanın, birleştirme ve aralığı parça eşlemeleri için istekleri taşıyın.</span><span class="sxs-lookup"><span data-stu-id="8478e-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="8478e-212">Liste parça yalnızca destek taşıma işlemleri eşler.</span><span class="sxs-lookup"><span data-stu-id="8478e-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="8478e-213">Parça eşleyin: İstek parametreleri kapak bilgi hello parça eşleme ve hello veritabanı parça haritanızı barındırma hello sonraki bölümü.</span><span class="sxs-lookup"><span data-stu-id="8478e-213">Shard Map: hello next section of request parameters cover information about hello shard map and hello database hosting your shard map.</span></span> <span data-ttu-id="8478e-214">Özellikle, tooprovide hello hello Azure SQL veritabanı sunucusunun adını ve veritabanı hello shardmap barındırma gerekir, kimlik bilgileri tooconnect toohello parça veritabanı eşleme ve son olarak hello parça eşleme adını hello.</span><span class="sxs-lookup"><span data-stu-id="8478e-214">In particular, you need tooprovide hello name of hello Azure SQL Database server and database hosting hello shardmap, credentials tooconnect toohello shard map database, and finally hello name of hello shard map.</span></span> <span data-ttu-id="8478e-215">Şu anda hello işlemi yalnızca tek bir kimlik bilgileri kümesi kabul eder.</span><span class="sxs-lookup"><span data-stu-id="8478e-215">Currently, hello operation only accepts a single set of credentials.</span></span> <span data-ttu-id="8478e-216">Bu kimlik bilgileri toohave yeterli izinlere ihtiyacınız tooperform hello parça toohello kullanıcı verilerine yanı sıra toohello parça eşleme değiştirir.</span><span class="sxs-lookup"><span data-stu-id="8478e-216">These credentials need toohave sufficient permissions tooperform changes toohello shard map as well as toohello user data on hello shards.</span></span>
* <span data-ttu-id="8478e-217">Kaynak (bölme ve birleştirme) aralığı: bölme ve birleştirme işlemi, düşük ve yüksek anahtarı kullanarak bir aralık işler.</span><span class="sxs-lookup"><span data-stu-id="8478e-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="8478e-218">toospecify bir sınırsız yüksek anahtar değeri, onay ile bir işlem, "yüksek anahtar max" onay kutusunu hello ve hello yüksek anahtar alanı boş bırakın.</span><span class="sxs-lookup"><span data-stu-id="8478e-218">toospecify an operation with an unbounded high key value, check hello “High key is max” check box and leave hello high key field empty.</span></span> <span data-ttu-id="8478e-219">Belirttiğiniz hello aralık anahtar değerleri gerek tooprecisely eşleşmiyor bir eşleme ve kendi sınırları içinde parça eşlemenizi yapın.</span><span class="sxs-lookup"><span data-stu-id="8478e-219">hello range key values that you specify do not need tooprecisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="8478e-220">Tüm aralığı sınırları hiç belirtmezseniz hello hizmet hello en yakın aralığı sizin için otomatik olarak Infer.</span><span class="sxs-lookup"><span data-stu-id="8478e-220">If you do not specify any range boundaries at all hello service will infer hello closest range for you automatically.</span></span> <span data-ttu-id="8478e-221">Verilen parça eşlemesinde hello GetMappings.ps1 PowerShell komut dosyası tooretrieve hello geçerli eşlemelerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-221">You can use hello GetMappings.ps1 PowerShell script tooretrieve hello current mappings in a given shard map.</span></span>
* <span data-ttu-id="8478e-222">Bölünmüş kaynak davranış (bölme): bölünmüş işlemleri için başlangıç noktası toosplit hello kaynak aralığı tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-222">Split Source Behavior (split): For split operations, define hello point toosplit hello source range.</span></span> <span data-ttu-id="8478e-223">Bunun için toooccur hello bölmek istediğiniz yere hello parçalama anahtarı sağlayarak.</span><span class="sxs-lookup"><span data-stu-id="8478e-223">You do this by providing hello sharding key where you want hello split toooccur.</span></span> <span data-ttu-id="8478e-224">Kullanım hello radyo düğmesi hello (anahtar bölme hello hariç) aralığı toomove alt kısmı hello isteyip istemediğiniz veya hello üst kısmındaki toomove (Merhaba bölünmüş anahtar dahil) isteyip istemediğinizi belirtin.</span><span class="sxs-lookup"><span data-stu-id="8478e-224">Use hello radio button specify whether you want hello lower part of hello range (excluding hello split key) toomove, or whether you want hello upper part toomove (including hello split key).</span></span>
* <span data-ttu-id="8478e-225">Kaynak Shardlet (taşıma): işlemleri bölme sonucunda farklı taşımak veya bir aralık toodescribe hello kaynağı gerektirmeyen gibi işlemleri birleştirme.</span><span class="sxs-lookup"><span data-stu-id="8478e-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range toodescribe hello source.</span></span> <span data-ttu-id="8478e-226">Taşıma için bir kaynak yalnızca toomove planlama hello parçalama anahtar değeri tarafından tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-226">A source for move is simply identified by hello sharding key value that you plan toomove.</span></span>
* <span data-ttu-id="8478e-227">Hedef parça (bölme): bölme işlemi hello kaynağında hello bilgileri girdikten sonra istediğiniz hello veri toobe kopyalanan tooby sağlayan hello Azure SQL veritabanı sunucusu ve veritabanı adını hello hedef toodefine gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-227">Target Shard (split): Once you have provided hello information on hello source of your split operation, you need toodefine where you want hello data toobe copied tooby providing hello Azure SQL Db server and database name for hello target.</span></span>
* <span data-ttu-id="8478e-228">Hedef aralık (merge): birleştirme işlemleri shardlets tooan varolan parça taşıyın.</span><span class="sxs-lookup"><span data-stu-id="8478e-228">Target Range (merge): Merge operations move shardlets tooan existing shard.</span></span> <span data-ttu-id="8478e-229">Merhaba aralığı sınırları toomerge ile istediğiniz hello varolan aralığın sağlayarak hello varolan parça tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-229">You identify hello existing shard by providing hello range boundaries of hello existing range that you want toomerge with.</span></span>
* <span data-ttu-id="8478e-230">Toplu iş boyutu: hello toplu iş boyutu denetimleri çevrimdışı hello veri taşıma sırasında zaman gidecek shardlets sayısı hello.</span><span class="sxs-lookup"><span data-stu-id="8478e-230">Batch Size: hello batch size controls hello number of shardlets that will go offline at a time during hello data movement.</span></span> <span data-ttu-id="8478e-231">Burada shardlets için kapalı kalma süresi hassas toolong dönemlerini olduğunda küçük değerler kullanabilirsiniz bir tamsayı değeri budur.</span><span class="sxs-lookup"><span data-stu-id="8478e-231">This is an integer value where you can use smaller values when you are sensitive toolong periods of downtime for shardlets.</span></span> <span data-ttu-id="8478e-232">Daha büyük değerler verilen shardlet hello saati artıracaktır çevrimdışı ancak performansı iyileştirebilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-232">Larger values will increase hello time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="8478e-233">İşlem kimliği (İptal): artık gerekli olmadığında devam eden bir işlem varsa, hello işlemi bu alandaki işlem Kimliğini sağlayarak iptal edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel hello operation by providing its operation ID in this field.</span></span> <span data-ttu-id="8478e-234">Merhaba istek durumu tablosundan hello işlem kimliği alabilirsiniz (Bölüm 8.1 bakın) veya hello istek gönderildiği hello web tarayıcısında hello çıktısından.</span><span class="sxs-lookup"><span data-stu-id="8478e-234">You can retrieve hello operation ID from hello request status table (see Section 8.1) or from hello output in hello web browser where you submitted hello request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="8478e-235">Gereksinimler ve sınırlamalar</span><span class="sxs-lookup"><span data-stu-id="8478e-235">Requirements and Limitations</span></span>
<span data-ttu-id="8478e-236">Merhaba geçerli hello bölünmüş birleştirme hizmetine uygulamasıdır konu toohello aşağıdaki gereksinimler ve sınırlamalar:</span><span class="sxs-lookup"><span data-stu-id="8478e-236">hello current implementation of hello split-merge service is subject toohello following requirements and limitations:</span></span> 

* <span data-ttu-id="8478e-237">Merhaba parça tooexist gerekir ve bu parça üzerinde bir bölme birleştirme işlemi gerçekleştirilmeden önce hello parça eşlemesinde kayıtlı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-237">hello shards need tooexist and be registered in hello shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="8478e-238">Merhaba hizmet tablolar veya başka bir veritabanı nesneleri işlemlerinin bir parçası olarak otomatik olarak oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="8478e-238">hello service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="8478e-239">Tüm parçalı tablo için şema hello ve başvuru tabloları deyişle hello hedef parça önceki tooany birleştirme/bölünmüş/taşıma işlemi üzerinde tooexist gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-239">This means that hello schema for all sharded tables and reference tables need tooexist on hello target shard prior tooany split/merge/move operation.</span></span> <span data-ttu-id="8478e-240">Parçalı tablolar özellikle gerekli toobe yeni shardlets bir birleştirme/bölünmüş/taşıma işlemi tarafından eklenen toobe nerede hello aralıktaki boş değildir.</span><span class="sxs-lookup"><span data-stu-id="8478e-240">Sharded tables in particular are required toobe empty in hello range where new shardlets are toobe added by a split/merge/move operation.</span></span> <span data-ttu-id="8478e-241">Aksi takdirde hello işlemi hello hedef parça hello ilk tutarlılık denetimi başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="8478e-241">Otherwise, hello operation will fail hello initial consistency check on hello target shard.</span></span> <span data-ttu-id="8478e-242">Ayrıca şekilde tooother eşzamanlı yazma işlemlerinin hello başvuru tabloları ile not hello başvuru tablosu boş ise, başvuru verileri yalnızca kopyalanır ve hiçbir tutarlılık olduğunu güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="8478e-242">Also note that reference data is only copied if hello reference table is empty and that there are no consistency guarantees with regard tooother concurrent write operations on hello reference tables.</span></span> <span data-ttu-id="8478e-243">Bu öneririz: bölünmüş/birleştirme işlemleri çalışırken, başka bir yazma işlemleri toohello başvuru tabloları değişiklikleri yapın.</span><span class="sxs-lookup"><span data-stu-id="8478e-243">We recommend this: when running split/merge operations, no other write operations make changes toohello reference tables.</span></span>
* <span data-ttu-id="8478e-244">Merhaba hizmeti bir benzersiz dizin veya hello parçalama anahtar tooimprove performansı ve güvenilirliği büyük shardlets içeren anahtar tarafından oluşturulan satır kimliği kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-244">hello service relies on row identity established by a unique index or key that includes hello sharding key tooimprove performance and reliability for large shardlets.</span></span> <span data-ttu-id="8478e-245">Bu değerden yalnızca hello parçalama anahtar bile daha hassas bir ayrıntı düzeyi en hello hizmet toomove verileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-245">This allows hello service toomove data at an even finer granularity than just hello sharding key value.</span></span> <span data-ttu-id="8478e-246">Bu tooreduce hello maksimum günlük alanının ve hello işlemi sırasında gerekli kilitler yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="8478e-246">This helps tooreduce hello maximum amount of log space and locks that are required during hello operation.</span></span> <span data-ttu-id="8478e-247">Benzersiz bir dizin veya birincil anahtar toouse istiyorsanız, belirli bir tablodaki hello parçalama anahtarı da dahil olmak üzere bu tabloyu birleştirme/bölünmüş/taşıma istekleriyle oluşturmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="8478e-247">Consider creating a unique index or a primary key including hello sharding key on a given table if you want toouse that table with split/merge/move requests.</span></span> <span data-ttu-id="8478e-248">Performans nedenleriyle hello parçalama anahtar hello başında sütununda hello anahtar veya hello dizin olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-248">For performance reasons, hello sharding key should be hello leading column in hello key or hello index.</span></span>
* <span data-ttu-id="8478e-249">İstek işleme Hello sürecinde bazı shardlet veriler hem hello kaynak ve hedef parça hello mevcut olabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-249">During hello course of request processing, some shardlet data may be present both on hello source and hello target shard.</span></span> <span data-ttu-id="8478e-250">Merhaba shardlet taşıma sırasında gerekli tooprotect hatalarına karşı budur.</span><span class="sxs-lookup"><span data-stu-id="8478e-250">This is necessary tooprotect against failures during hello shardlet movement.</span></span> <span data-ttu-id="8478e-251">Merhaba bölünmüş birleştirme hello parça eşleme ile tümleştirilmesi hello veri bağımlı yönlendirme API'lerini kullanarak aracılığıyla bağlantıları hello sağlar **OpenConnectionForKey** yöntemi hello parça haritaya tutarsız bir ara durum göremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-251">hello integration of split-merge with hello shard map ensures that connections through hello data dependent routing APIs using hello **OpenConnectionForKey** method on hello shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="8478e-252">Ancak, ne zaman bağlanan toohello kaynak ya da hello hedef parça hello kullanmadan **OpenConnectionForKey** yöntemi, tutarsız Ara durumlar olabilir görünür birleştirme/bölünmüş/taşıma isteği yükleyecekseniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-252">However, when connecting toohello source or hello target shards without using hello **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="8478e-253">Bu bağlantıları, kısmi veya yinelenen sonuçları hello zamanlama veya hello parça arka plandaki hello bağlantı bağlı olarak gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-253">These connections may show partial or duplicate results depending on hello timing or hello shard underlying hello connection.</span></span> <span data-ttu-id="8478e-254">Bu sınırlama, şu anda esnek ölçek çok-Shard-sorgular tarafından yapılan hello bağlantılar içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-254">This limitation currently includes hello connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="8478e-255">Hello hello bölünmüş birleştirme hizmet için meta veri veritabanı farklı rolleri arasında paylaşılmayan gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-255">hello metadata database for hello split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="8478e-256">Örneğin, hazırlamada çalışan hello bölünmüş birleştirme hizmeti rolü toopoint tooa farklı meta veri veritabanından hello üretim rol daha gerekir.</span><span class="sxs-lookup"><span data-stu-id="8478e-256">For example, a role of hello split-merge service running in staging needs toopoint tooa different metadata database than hello production role.</span></span>

## <a name="billing"></a><span data-ttu-id="8478e-257">Faturalandırma</span><span class="sxs-lookup"><span data-stu-id="8478e-257">Billing</span></span>
<span data-ttu-id="8478e-258">Merhaba bölünmüş birleştirme hizmeti Microsoft Azure aboneliğiniz bulut hizmetinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8478e-258">hello split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="8478e-259">Bu nedenle hello hizmeti tooyour örneği ücretleri bulut Hizmetleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8478e-259">Therefore charges for cloud services apply tooyour instance of hello service.</span></span> <span data-ttu-id="8478e-260">Birleştirme/bölünmüş/taşıma işlemleri sık gerçekleştirmediğiniz sürece, bölünmüş birleştirme bulut hizmetini silin öneririz.</span><span class="sxs-lookup"><span data-stu-id="8478e-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="8478e-261">Çalışan maliyetlerini kaydeder veya Bulut hizmeti örnekleri dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="8478e-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="8478e-262">Yeniden dağıtın ve tooperform ihtiyaç duyduğunuzda taşımalarına runnable yapılandırmanızı Başlat bölme veya birleştirme işlemleri.</span><span class="sxs-lookup"><span data-stu-id="8478e-262">You can re-deploy and start your readily runnable configuration whenever you need tooperform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="8478e-263">İzleme</span><span class="sxs-lookup"><span data-stu-id="8478e-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="8478e-264">Durum tabloları</span><span class="sxs-lookup"><span data-stu-id="8478e-264">Status tables</span></span>
<span data-ttu-id="8478e-265">Merhaba bölünmüş birleştirme hello hizmetidir **RequestStatus** tamamlanmış ve devam eden isteklerinin izleme hello meta veri deposu veritabanı tablosunda.</span><span class="sxs-lookup"><span data-stu-id="8478e-265">hello split-merge Service provides hello **RequestStatus** table in hello metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="8478e-266">Merhaba tablo hello bölünmüş birleştirme hizmetine gönderilen toothis örneğini bırakıldı her bölme birleştirme isteği için bir satır listeler.</span><span class="sxs-lookup"><span data-stu-id="8478e-266">hello table lists a row for each split-merge request that has been submitted toothis instance of hello split-merge service.</span></span> <span data-ttu-id="8478e-267">Her istek için bilgisinden hello sağlar:</span><span class="sxs-lookup"><span data-stu-id="8478e-267">It gives hello following information for each request:</span></span>

* <span data-ttu-id="8478e-268">**Zaman damgası**: Merhaba saat ve tarih zaman hello isteği başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="8478e-268">**Timestamp**: hello time and date when hello request was started.</span></span>
* <span data-ttu-id="8478e-269">**Operationıd**: hello isteği benzersiz olarak tanımlayan bir GUID.</span><span class="sxs-lookup"><span data-stu-id="8478e-269">**OperationId**: A GUID that uniquely identifies hello request.</span></span> <span data-ttu-id="8478e-270">Bu istek kullanılan toocancel hello işlemi hala devam eden de olabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-270">This request can also be used toocancel hello operation while it is still ongoing.</span></span>
* <span data-ttu-id="8478e-271">**Durum**: Merhaba hello isteğin geçerli durumu.</span><span class="sxs-lookup"><span data-stu-id="8478e-271">**Status**: hello current state of hello request.</span></span> <span data-ttu-id="8478e-272">Devam eden istekler için Ayrıca hangi hello isteğidir geçerli aşama hello listeler.</span><span class="sxs-lookup"><span data-stu-id="8478e-272">For ongoing requests, it also lists hello current phase in which hello request is.</span></span>
* <span data-ttu-id="8478e-273">**CancelRequest**: hello isteği iptal olup olmadığını belirten bir bayrak.</span><span class="sxs-lookup"><span data-stu-id="8478e-273">**CancelRequest**: A flag that indicates whether hello request has been cancelled.</span></span>
* <span data-ttu-id="8478e-274">**İlerleme**: hello işleminin tamamlanma yüzdesi tahmin.</span><span class="sxs-lookup"><span data-stu-id="8478e-274">**Progress**: A percentage estimate of completion for hello operation.</span></span> <span data-ttu-id="8478e-275">Bir değeri 50 hello işlemi yaklaşık %50 tamamlanmış olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8478e-275">A value of 50 indicates that hello operation is approximately 50% complete.</span></span>
* <span data-ttu-id="8478e-276">**Ayrıntılar**: ayrıntılı ilerleme raporu sağlar XML değeri.</span><span class="sxs-lookup"><span data-stu-id="8478e-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="8478e-277">satır kümeleri kaynak tootarget kopyalanır gibi hello İlerleme raporu düzenli olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-277">hello progress report is periodically updated as sets of rows are copied from source tootarget.</span></span> <span data-ttu-id="8478e-278">Hataları veya özel durumları durumunda bu sütun ayrıca hello hatayla ilgili daha ayrıntılı bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-278">In case of failures or exceptions, this column also includes more detailed information about hello failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="8478e-279">Azure Tanılama</span><span class="sxs-lookup"><span data-stu-id="8478e-279">Azure Diagnostics</span></span>
<span data-ttu-id="8478e-280">Merhaba bölünmüş birleştirme hizmeti Azure Tanılama izleme ve tanılama için Azure SDK 2.5 üzerinde temel kullanır.</span><span class="sxs-lookup"><span data-stu-id="8478e-280">hello split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="8478e-281">Burada açıklandığı gibi hello Tanılama yapılandırmasını kontrol: [Azure Cloud Services ve sanal makineleri etkinleştirme tanılamada](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="8478e-281">You control hello diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="8478e-282">Merhaba yükleme paketini içeren iki tanılama yapılandırması - hello web rolü, diğeri hello çalışan rolü için için.</span><span class="sxs-lookup"><span data-stu-id="8478e-282">hello download package includes two diagnostics configurations - one for hello web role and one for hello worker role.</span></span> <span data-ttu-id="8478e-283">Merhaba hizmet için bu tanılama yapılandırmalar hello kılavuzluğu izleyin [Microsoft Azure bulut hizmeti temel bilgileri](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="8478e-283">These diagnostics configurations for hello service follow hello guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="8478e-284">Merhaba tanımları toolog performans sayaçları, IIS günlükleri, Windows olay günlüklerini ve bölünmüş birleştirme uygulama olay günlükleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8478e-284">It includes hello definitions toolog Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="8478e-285">Tanılama dağıtma</span><span class="sxs-lookup"><span data-stu-id="8478e-285">Deploy Diagnostics</span></span>
<span data-ttu-id="8478e-286">tooenable izleme ve tanılama hello web ve çalışan rolleri Azure PowerShell kullanarak komutları aşağıdaki hello çalıştırmak hello NuGet paketi tarafından sağlanan hello tanılama Yapılandırması'nı kullanarak:</span><span class="sxs-lookup"><span data-stu-id="8478e-286">tooenable monitoring and diagnostics using hello diagnostic configuration for hello web and worker roles provided by hello NuGet package, run hello following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="8478e-287">Hakkında daha fazla bilgi bulabilirsiniz tooconfigure ve burada tanılama ayarlarını dağıtma: [Azure Cloud Services ve sanal makineleri etkinleştirme tanılamada](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="8478e-287">You can find more information on how tooconfigure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="8478e-288">Tanılama alma</span><span class="sxs-lookup"><span data-stu-id="8478e-288">Retrieve diagnostics</span></span>
<span data-ttu-id="8478e-289">Visual Studio Sunucu Gezgini hello hello hello Sunucu Gezgini ağacının Azure bölümü, tanılama kolayca erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-289">You can easily access your diagnostics from hello Visual Studio Server Explorer in hello Azure part of hello Server Explorer tree.</span></span> <span data-ttu-id="8478e-290">Visual Studio örneğini açın ve hello menü çubuğunda Görünüm ve Server Explorer'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8478e-290">Open a Visual Studio instance, and in hello menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="8478e-291">Hello Azure simgesi tooconnect tooyour Azure aboneliğine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-291">Click hello Azure icon tooconnect tooyour Azure subscription.</span></span> <span data-ttu-id="8478e-292">Ardından gidin tooAzure depolama -> -> <your storage account> -> tabloları WADLogsTable ->.</span><span class="sxs-lookup"><span data-stu-id="8478e-292">Then navigate tooAzure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="8478e-293">Daha fazla bilgi için bkz: [Sunucu Gezgini ile depolama kaynaklarını gözatma](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="8478e-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="8478e-295">Merhaba yukarıdaki hello şekilde vurgulanmış WADLogsTable içeren hello ayrıntılı hello bölünmüş birleştirme hizmetin uygulama günlüğündeki olaylar.</span><span class="sxs-lookup"><span data-stu-id="8478e-295">hello WADLogsTable highlighted in hello figure above contains hello detailed events from hello split-merge service’s application log.</span></span> <span data-ttu-id="8478e-296">İndirilen hello bu hello varsayılan yapılandırmasını Not paketi doğru Üretim dağıtımı sağlamıştır.</span><span class="sxs-lookup"><span data-stu-id="8478e-296">Note that hello default configuration of hello downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="8478e-297">Bu nedenle, günlükleri ve sayaçları hello hizmet örneklerinin alınır hello büyük (5 dakika) aralığıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-297">Therefore hello interval at which logs and counters are pulled from hello service instances is large (5 minutes).</span></span> <span data-ttu-id="8478e-298">Test ve geliştirme için hello tanılama ayarları hello web veya çalışan rolü tooyour hello ayarlayarak alt hello aralığı gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8478e-298">For test and development, lower hello interval by adjusting hello diagnostics settings of hello web or hello worker role tooyour needs.</span></span> <span data-ttu-id="8478e-299">Merhaba rolünde hello Visual Studio Sunucu Gezgini (yukarıya bakın) sağ tıklayın ve sonra hello aktarım süresi hello iletişim hello tanılama yapılandırma ayarlarını değiştirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="8478e-299">Right-click on hello role in hello Visual Studio Server Explorer (see above) and then adjust hello Transfer Period in hello dialog for hello Diagnostics configuration settings:</span></span> 

![Yapılandırma][3]

## <a name="performance"></a><span data-ttu-id="8478e-301">Performans</span><span class="sxs-lookup"><span data-stu-id="8478e-301">Performance</span></span>
<span data-ttu-id="8478e-302">Genel olarak, daha iyi performans hello yüksek, Azure SQL veritabanında daha fazla kullanıcı hizmet katmanları beklenen toobe ' dir.</span><span class="sxs-lookup"><span data-stu-id="8478e-302">In general, better performance is toobe expected from hello higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="8478e-303">Merhaba daha yüksek hizmet katmanları için daha yüksek g/ç, CPU ve bellek ayırmaları hello toplu kopyalama yararlanabilir ve bölünmüş birleştirme hizmeti kullanan hello operations silin.</span><span class="sxs-lookup"><span data-stu-id="8478e-303">Higher IO, CPU and memory allocations for hello higher service tiers benefit hello bulk copy and delete operations that hello split-merge service uses.</span></span> <span data-ttu-id="8478e-304">Bu nedenle, bu veritabanları için yalnızca hello hizmet katmanına bir tanımlanan, sınırlı süre artırın.</span><span class="sxs-lookup"><span data-stu-id="8478e-304">For that reason, increase hello service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="8478e-305">Merhaba hizmeti de doğrulama sorguları normal işlemlerinin bir parçası olarak gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="8478e-305">hello service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="8478e-306">Bu doğrulama sorgular hello hedef aralığındaki verileri beklenmeyen varlığını denetlemek ve herhangi bir birleştirme/bölünmüş/taşıma işlemi ile tutarlı bir durumdan başladığından emin olmak.</span><span class="sxs-lookup"><span data-stu-id="8478e-306">These validation queries check for unexpected presence of data in hello target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="8478e-307">Merhaba kapsamını hello işlemi ve hello istek tanımının bir parçası olarak sağlanan hello toplu iş boyutu tarafından tanımlanan parçalama anahtar aralıklarına üzerinden tüm bu sorguları çalışır.</span><span class="sxs-lookup"><span data-stu-id="8478e-307">These queries all work over sharding key ranges defined by hello scope of hello operation and hello batch size provided as part of hello request definition.</span></span> <span data-ttu-id="8478e-308">Dizin başında sütun hello gibi hello parçalama anahtara sahip mevcut olduğunda bu sorguları en iyi şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8478e-308">These queries perform best when an index is present that has hello sharding key as hello leading column.</span></span> 

<span data-ttu-id="8478e-309">Ayrıca, bir Benzersizlik özelliği hello parçalama anahtarla hello başında sütun olarak hello hizmet toouse günlük alanının ve bellek açısından kaynak tüketimini sınırlandırır en iyi duruma getirilmiş bir yaklaşım izin verir.</span><span class="sxs-lookup"><span data-stu-id="8478e-309">In addition, a uniqueness property with hello sharding key as hello leading column will allow hello service toouse an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="8478e-310">Gerekli toomove büyük veri boyutları (genellikle yukarıdaki 1 GB) bu benzersizlik özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="8478e-310">This uniqueness property is required toomove large data sizes (typically above 1GB).</span></span> 

## <a name="how-tooupgrade"></a><span data-ttu-id="8478e-311">Nasıl tooupgrade</span><span class="sxs-lookup"><span data-stu-id="8478e-311">How tooupgrade</span></span>
1. <span data-ttu-id="8478e-312">Merhaba adımları [bölünmüş birleştirme hizmet dağıtma](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="8478e-312">Follow hello steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="8478e-313">Bulut hizmet yapılandırma dosyası, bölünmüş birleştirme dağıtım tooreflect hello yeni yapılandırma parametrelerini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="8478e-313">Change your cloud service configuration file for your split-merge deployment tooreflect hello new configuration parameters.</span></span> <span data-ttu-id="8478e-314">Yeni gerekli parametre hello hello sertifika şifreleme için kullanılan hakkındaki bilgilerdir.</span><span class="sxs-lookup"><span data-stu-id="8478e-314">A new required parameter is hello information about hello certificate used for encryption.</span></span> <span data-ttu-id="8478e-315">Kolay bir yolu toodo toocompare hello yeni yapılandırma şablon dosyasından hello indirme varolan yapılandırmanızı karşı budur.</span><span class="sxs-lookup"><span data-stu-id="8478e-315">An easy way toodo this is toocompare hello new configuration template file from hello download against your existing configuration.</span></span> <span data-ttu-id="8478e-316">"DataEncryptionPrimaryCertificateThumbprint" ve "DataEncryptionPrimary" Merhaba web ve çalışan rolü hello için hello ayarlarını eklediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="8478e-316">Make sure you add hello settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both hello web and hello worker role.</span></span>
3. <span data-ttu-id="8478e-317">Merhaba güncelleştirme tooAzure dağıtmadan önce tüm çalışmakta bölünmüş birleştirme işlemlerinin tamamlandığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="8478e-317">Before deploying hello update tooAzure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="8478e-318">Bu, devam eden istekleri için hello bölünmüş birleştirme meta veri veritabanındaki hello RequestStatus ve PendingWorkflows tabloları sorgulayarak kolayca yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8478e-318">You can easily do this by querying hello RequestStatus and PendingWorkflows tables in hello split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="8478e-319">Mevcut bulut hizmeti dağıtımınız için bölünmüş birleştirme hello yeni paket Azure aboneliğinizle ve güncelleştirilmiş hizmet yapılandırma dosyanızı güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="8478e-319">Update your existing cloud service deployment for split-merge in your Azure subscription with hello new package and your updated service configuration file.</span></span>

<span data-ttu-id="8478e-320">Bölünmüş birleştirme tooupgrade tooprovision yeni bir meta veri veritabanı gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8478e-320">You do not need tooprovision a new metadata database for split-merge tooupgrade.</span></span> <span data-ttu-id="8478e-321">Merhaba yeni sürümü, var olan meta veri veritabanı toohello yeni sürümü otomatik olarak yükseltir.</span><span class="sxs-lookup"><span data-stu-id="8478e-321">hello new version will automatically upgrade your existing metadata database toohello new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="8478e-322">En iyi yöntemler ve sorun giderme</span><span class="sxs-lookup"><span data-stu-id="8478e-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="8478e-323">Birden fazla parça hello test Kiracı en önemli birleştirme/bölünmüş/taşıma işletim çalışma ve test Kiracı tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8478e-323">Define a test tenant and exercise your most important split/merge/move operations with hello test tenant across several shards.</span></span> <span data-ttu-id="8478e-324">Tüm meta veriler parça eşlemesinde doğru şekilde tanımlandığından ve hello işlemleri kısıtlamaları veya yabancı anahtarlar ihlal etmemek emin olun.</span><span class="sxs-lookup"><span data-stu-id="8478e-324">Ensure that all metadata is defined correctly in your shard map and that hello operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="8478e-325">Canlı hello test Kiracı veri boyutu hello maksimum veri boyutu en büyük kiracınızın, değil karşılaşmadan veri boyutu tooensure ilgili sorunlar.</span><span class="sxs-lookup"><span data-stu-id="8478e-325">Keep hello test tenant data size above hello maximum data size of your largest tenant tooensure you are not encountering data size related issues.</span></span> <span data-ttu-id="8478e-326">Bu, tek bir kiracı geçici toomove sürdüğünü hello zamanında bir üst sınır değerlendirmenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="8478e-326">This helps you assess an upper bound on hello time it takes toomove a single tenant around.</span></span> 
* <span data-ttu-id="8478e-327">Şemanızı silme izin verdiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="8478e-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="8478e-328">Merhaba veri başarıyla kopyalanan toohello hedef silindikten sonra hello bölünmüş birleştirme hizmetine hello özelliği tooremove hello kaynak parça verilerden gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8478e-328">hello split-merge service requires hello ability tooremove data from hello source shard once hello data has been successfully copied toohello target.</span></span> <span data-ttu-id="8478e-329">Örneğin, **Tetikleyicileri silme** hello hizmetin hello veri hello kaynağında silmesini önlemek ve işlemleri toofail neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="8478e-329">For example, **delete triggers** can prevent hello service from deleting hello data on hello source and may cause operations toofail.</span></span>
* <span data-ttu-id="8478e-330">Merhaba parçalama anahtar hello başında sütun birincil anahtar veya benzersiz dizin tanımı içinde olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8478e-330">hello sharding key should be hello leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="8478e-331">Doğrulama sorguları, bölme veya birleştirme hello hello için en iyi performans sağlar ve her zaman parçalama anahtar aralıklarına üzerinde çalışan hello gerçek veri taşıma ve silme işlemleri.</span><span class="sxs-lookup"><span data-stu-id="8478e-331">That ensures hello best performance for hello split or merge validation queries, and for hello actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="8478e-332">Bölünmüş birleştirme hizmetinizi veritabanlarınızı bulunduğu hello bölgeye ve veri merkezi içinde bir arada.</span><span class="sxs-lookup"><span data-stu-id="8478e-332">Collocate your split-merge service in hello region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

