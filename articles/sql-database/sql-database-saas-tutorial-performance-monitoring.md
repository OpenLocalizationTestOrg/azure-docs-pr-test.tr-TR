---
title: "bir çok kiracılı SaaS uygulamasında birçok Azure SQL veritabanı performansını aaaMonitor | Microsoft Docs"
description: "İzleme ve veritabanları ve hello Azure SQL veritabanı Wingtip SaaS uygulama havuzlarında performansını yönetme"
keywords: "sql veritabanı öğreticisi"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="89f8b-104">Merhaba Wingtip SaaS uygulama performansını izleme</span><span class="sxs-lookup"><span data-stu-id="89f8b-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="89f8b-105">Bu öğretici kapsamında, SaaS uygulamalarında kullanılan birkaç önemli performans yönetim senaryolarını ele alınan dizelerle.</span><span class="sxs-lookup"><span data-stu-id="89f8b-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="89f8b-106">Tüm Kiracı veritabanları arasında bir yük Oluşturucu toosimulate etkinlik kullanıldığında hello yerleşik izleme ve uyarma özelliklerini SQL veritabanı ve esnek havuzlar gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="89f8b-107">Merhaba Wingtip SaaS uygulaması her salonundan (Kiracı) kendi veritabanına sahip olduğu bir kiracı tek veri modeli kullanır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="89f8b-108">Birçok SaaS uygulamaları gibi öngörülemeyen ve kullanımın Kiracı İş yükü düzeni hello beklenen.</span><span class="sxs-lookup"><span data-stu-id="89f8b-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="89f8b-109">Diğer bir deyişle, bilet satışı herhangi bir zamanda gerçekleşebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="89f8b-110">tootake bu modelinin avantajı, tipik veritabanı kullanım, Kiracı veritabanları esnek veritabanı havuzları halinde dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="89f8b-111">Esnek havuzlar kaynakları birçok veritabanı arasında paylaşarak bir çözüm hello maliyetini en iyi duruma getirme.</span><span class="sxs-lookup"><span data-stu-id="89f8b-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="89f8b-112">Bu tür deseni önemli toomonitor veritabanıdır ve yükler havuzu kaynak kullanım tooensure makul havuzlardaki dengeli.</span><span class="sxs-lookup"><span data-stu-id="89f8b-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="89f8b-113">Tek veritabanlarını yeterli kaynaklara sahip olduğunuzdan ve havuzları değil basarsa tooensure etmeniz kendi [eDTU](sql-database-what-is-a-dtu.md) sınırlar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="89f8b-114">Bu öğretici yolları toomonitor inceler ve veritabanları ve havuzları, yönetmek ve nasıl yanıt toovariations iş yükü de tootake düzeltme eylemi.</span><span class="sxs-lookup"><span data-stu-id="89f8b-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="89f8b-115">Bu öğreticide şunların nasıl yapıldığını öğrenirsiniz:</span><span class="sxs-lookup"><span data-stu-id="89f8b-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="89f8b-116">Sağlanan yük Oluşturucu çalıştırarak hello Kiracı veritabanı kullanımı benzetimi</span><span class="sxs-lookup"><span data-stu-id="89f8b-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="89f8b-117">Yük toohello artış yanıt olarak İzleyicisi Merhaba Kiracı veritabanları</span><span class="sxs-lookup"><span data-stu-id="89f8b-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="89f8b-118">Merhaba yanıt toohello artan veritabanı yük esnek havuzda ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="89f8b-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="89f8b-119">İkinci bir esnek havuz tooload Bakiye veritabanı etkinliklerini sağlama</span><span class="sxs-lookup"><span data-stu-id="89f8b-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="89f8b-120">Bu öğretici, Önkoşullar aşağıdaki yapma emin hello tamamlanır toocomplete:</span><span class="sxs-lookup"><span data-stu-id="89f8b-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="89f8b-121">Merhaba Wingtip SaaS uygulaması dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="89f8b-122">beş dakikadan kısa toodeploy bakın [dağıtma ve Merhaba Wingtip SaaS uygulaması keşfedin.](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="89f8b-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="89f8b-123">Azure PowerShell’in yüklendiğinden.</span><span class="sxs-lookup"><span data-stu-id="89f8b-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="89f8b-124">Ayrıntılar için bkz. [Azure PowerShell’i kullanmaya başlama](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="89f8b-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="89f8b-125">Giriş tooSaaS performans yönetim desenleri</span><span class="sxs-lookup"><span data-stu-id="89f8b-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="89f8b-126">Veritabanı performansı yönetme derleme ve performans verilerini çözümleme ve ardından uygulamanız için bir kabul edilebilir yanıt süresi parametreleri toomaintain ayarlayarak toothis veri tepki oluşur.</span><span class="sxs-lookup"><span data-stu-id="89f8b-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="89f8b-127">Birden çok kiracıya barındırdığında, esnek veritabanı havuzları uygun maliyetli şekilde tooprovide olan ve öngörülemeyen iş yükleri ile grubu için kaynaklar yönetin.</span><span class="sxs-lookup"><span data-stu-id="89f8b-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="89f8b-128">Bazı iş yükü düzenlerinde iki S3 veritabanı bile tek bir havuzda yönetilebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![medya](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="89f8b-130">Havuzları ve havuzları hello veritabanlarında performansı kabul edilebilir aralık içinde kalırlar izlenen tooensure olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="89f8b-131">Merhaba havuzu yapılandırma toomeet hello gereksinimlerini hello hello havuz Edtu hello için uygun olduğundan emin olduktan tüm veritabanlarının toplam iş yükü ince ayar genel iş yükü.</span><span class="sxs-lookup"><span data-stu-id="89f8b-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="89f8b-132">Hello veritabanı başına min ve veritabanı başına maksimum eDTU değerleri tooappropriate değerleri, belirli bir uygulama gereksinimleri ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89f8b-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="89f8b-133">Uygulama performansı stratejileri</span><span class="sxs-lookup"><span data-stu-id="89f8b-133">Performance management strategies</span></span>

* <span data-ttu-id="89f8b-134">toomanually performansı izleyebilir, sahip tooavoid çok en etkili**veritabanları veya havuzları dışında normal aralıkları parazit durumlarda tetikleyen uyarıları ayarlama**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="89f8b-135">bir havuzu hello performans düzeyini toorespond tooshort terim dalgalanmalara hello **havuz eDTU düzeyi ölçeklendirilmiş yukarı veya aşağı**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="89f8b-136">Bu dalgalanmayı normal veya öngörülebilir bir temelinde oluşursa **hello havuzu ölçeklendirme olabilir zamanlanmış toooccur otomatik olarak**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="89f8b-137">Örneğin, iş yükünüzün hafif olduğunu bildiğiniz gece veya hafta sonları gibi zamanlarda ölçeği azaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="89f8b-138">toorespond toolonger terim dalgalanmaları veya değişiklikler hello veritabanları, sayısı **tek veritabanlarını diğer havuzlara taşınabilir**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="89f8b-139">toorespond tooshort terim artırır *tek tek* veritabanı yük **tek veritabanlarını dışında bir havuzu alınır ve bir bireysel performans düzeyi atanan**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="89f8b-140">Merhaba yükü daha azdır sonra hello veritabanı sonra toohello havuzu döndürülebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="89f8b-141">Bu önceden bilindiğinde veritabanları pre-emptively tooensure hello veritabanı her zaman gerekli hello kaynakları ve tooavoid etkisi hello havuzunda diğer veritabanlarında sahip taşınabilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="89f8b-142">Bu gereksinim tahmin edilebilir, popüler bir olay için bilet satış sağladığından yaşayan salonundan gibi ise, bu yönetim davranış hello uygulamasına tümleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="89f8b-143">Merhaba [Azure portal](https://portal.azure.com) yerleşik izleme ve çoğu kaynaklardaki uyarı sağlar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="89f8b-144">SQL Veritabanı için veritabanı ve havuzlarda izleme ve uyarı özellikleri kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="89f8b-145">Küçük sayıda kaynağı için uygun toouse, ancak birçok kaynaklarla çalışırken çok uygun değil izleme ve uyarma bu yerleşik kaynak özgü olduğundan.</span><span class="sxs-lookup"><span data-stu-id="89f8b-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="89f8b-146">Burada çalıştığınız birçok reources ile yüksek hacimli senaryolar için [günlük analizi (OMS)](sql-database-saas-tutorial-log-analytics.md) kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="89f8b-147">Verilmiş tanılama günlüklerini ve günlük analizi çalışma alanındaki toplanan telemetri üzerinden analytics sağlayan ayrı bir Azure hizmet budur.</span><span class="sxs-lookup"><span data-stu-id="89f8b-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="89f8b-148">Günlük analizi birçok Hizmetleri'nden telemetri toplamak ve kullanılan tooquery olması ve Uyarıları ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89f8b-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="89f8b-149">Merhaba Wingtip uygulama kaynak koduna ve komut dosyaları alma</span><span class="sxs-lookup"><span data-stu-id="89f8b-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="89f8b-150">Merhaba Wingtip SaaS komut dosyaları ve uygulama kaynak koduna hello kullanılabilir [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github depo.</span><span class="sxs-lookup"><span data-stu-id="89f8b-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="89f8b-151">[Adımları toodownload hello Wingtip SaaS betikleri](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="89f8b-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="89f8b-152">Ek kiracılar sağlama</span><span class="sxs-lookup"><span data-stu-id="89f8b-152">Provision additional tenants</span></span>

<span data-ttu-id="89f8b-153">Havuzlar yalnızca iki S3 veritabanları ile düşük maliyetli olabilirler, ancak etkili ortalaması hello hale hello havuzu hello daha düşük maliyetli olan daha fazla veritabanlarını hello.</span><span class="sxs-lookup"><span data-stu-id="89f8b-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="89f8b-154">Performans izleme ve yönetiminin ölçeklenerek nasıl çalıştığını anlamak için bu öğreticide en az 20 veritabanınızın dağıtılmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="89f8b-155">Önceki bir öğreticide kiracılar toplu zaten sağlanan varsa, toohello atlayın [tüm Kiracı veritabanları benzetim kullanımı](#simulate-usage-on-all-tenant-databases) bölümü.</span><span class="sxs-lookup"><span data-stu-id="89f8b-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="89f8b-156">Aç... \\Öğrenme modülleri\\performans izleme ve Yönetim\\*Demo PerformanceMonitoringAndManagement.ps1* hello içinde *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="89f8b-157">Bu öğretici sırasında birkaç senaryo çalıştıracağından bu betiği açık tutun.</span><span class="sxs-lookup"><span data-stu-id="89f8b-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="89f8b-158">**$DemoScenario** = **1**, **Kiracı grubu sağlama** değerini ayarlayın</span><span class="sxs-lookup"><span data-stu-id="89f8b-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="89f8b-159">Tuşuna **F5** toorun hello komut dosyası.</span><span class="sxs-lookup"><span data-stu-id="89f8b-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="89f8b-160">Merhaba betik 17 kiracılar beş dakikadan daha kısa bir süre içinde dağıtır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="89f8b-161">Merhaba *yeni TenantBatch* komut dosyası kullanan bir iç içe ya da bağlantılı dizi [Resource Manager](../azure-resource-manager/index.md) hello veritabanını kopyalar, varsayılan kiracılar, toplu oluşturmak şablonlar **basetenantdb** hello katalog sunucusu toocreate hello yeni Kiracı veritabanlarını, ardından bu hello kataloğunda kaydeder ve son olarak bunları hello Kiracı adı ve salonundan türü ile başlatır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="89f8b-162">Bu, yeni bir kiracı hello uygulama hazırlar hello işlemleriyle tutarlıdır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="89f8b-163">Çok yapılan değişiklikler*basetenantdb* uygulanan tooany yeni kiracılar bundan sonra sağlanmış olan.</span><span class="sxs-lookup"><span data-stu-id="89f8b-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="89f8b-164">Merhaba bkz [şema yönetimi öğretici](sql-database-saas-tutorial-schema-management.md) toomake şema nasıl değiştiğini çok toosee*varolan* Kiracı veritabanları (Merhaba dahil olmak üzere *basetenantdb* veritabanı).</span><span class="sxs-lookup"><span data-stu-id="89f8b-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="89f8b-165">Tüm kiracı veritabanlarındaki kullanımın benzetimini gerçekleştirme</span><span class="sxs-lookup"><span data-stu-id="89f8b-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="89f8b-166">Merhaba *Demo PerformanceMonitoringAndManagement.ps1* tüm Kiracı veritabanları karşı çalışan bir iş yükünü benzetim sağlanan komut dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="89f8b-167">Merhaba yük hello kullanılabilir yük senaryolardan biri, kullanılarak oluşturulur:</span><span class="sxs-lookup"><span data-stu-id="89f8b-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="89f8b-168">Tanıtım</span><span class="sxs-lookup"><span data-stu-id="89f8b-168">Demo</span></span> | <span data-ttu-id="89f8b-169">Senaryo</span><span class="sxs-lookup"><span data-stu-id="89f8b-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="89f8b-170">2</span><span class="sxs-lookup"><span data-stu-id="89f8b-170">2</span></span> | <span data-ttu-id="89f8b-171">Normal yoğunlukta yük (yaklaşık 40 DTU) oluşturma</span><span class="sxs-lookup"><span data-stu-id="89f8b-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="89f8b-172">3</span><span class="sxs-lookup"><span data-stu-id="89f8b-172">3</span></span> | <span data-ttu-id="89f8b-173">Veritabanı başına daha uzun ve daha sık artışla yük oluşturma</span><span class="sxs-lookup"><span data-stu-id="89f8b-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="89f8b-174">4</span><span class="sxs-lookup"><span data-stu-id="89f8b-174">4</span></span> | <span data-ttu-id="89f8b-175">Veritabanı başına daha yüksek DTU veri bloğu (yaklaşık 80 DTU) ile yük oluşturma</span><span class="sxs-lookup"><span data-stu-id="89f8b-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="89f8b-176">5</span><span class="sxs-lookup"><span data-stu-id="89f8b-176">5</span></span> | <span data-ttu-id="89f8b-177">Tek bir kiracı üzerinde normal yük ve yoğun yük oluşturma (yaklaşık 95 DTU)</span><span class="sxs-lookup"><span data-stu-id="89f8b-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="89f8b-178">6</span><span class="sxs-lookup"><span data-stu-id="89f8b-178">6</span></span> | <span data-ttu-id="89f8b-179">Birden çok havuzda dengesiz yük oluşturma</span><span class="sxs-lookup"><span data-stu-id="89f8b-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="89f8b-180">Merhaba yük Oluşturucu geçerlidir bir *yapay* yalnızca CPU yükü tooevery Kiracı veritabanı.</span><span class="sxs-lookup"><span data-stu-id="89f8b-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="89f8b-181">Merhaba Oluşturucu hello yük oluşturan bir saklı yordam düzenli aralıklarla çağrıları her Kiracı veritabanı için bir iş başlatılır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="89f8b-182">Merhaba yük düzeyleri (Edtu'lar), süre ve aralıklarını öngörülemeyen Kiracı etkinlik benzetimi tüm veritabanları arasında farklılık gösterir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="89f8b-183">Aç... \\Öğrenme modülleri\\performans izleme ve Yönetim\\*Demo PerformanceMonitoringAndManagement.ps1* hello içinde *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="89f8b-184">Bu öğretici sırasında birkaç senaryo çalıştıracağından bu betiği açık tutun.</span><span class="sxs-lookup"><span data-stu-id="89f8b-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="89f8b-185">Ayarlama **$DemoScenario** = **2**, *Generate normal yoğunluğu yük*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="89f8b-186">Tuşuna **F5** tooapply yük tooall Kiracı veritabanlarınızda.</span><span class="sxs-lookup"><span data-stu-id="89f8b-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="89f8b-187">Wingtip bir SaaS uygulaması ve bir SaaS uygulaması hello gerçek yükünü genellikle durumlarıyla ve tahmin edilemez.</span><span class="sxs-lookup"><span data-stu-id="89f8b-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="89f8b-188">toosimulate bu rastgele yük dağıtılmış tüm kiracılar arasında hello yük üreteci oluşturur.</span><span class="sxs-lookup"><span data-stu-id="89f8b-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="89f8b-189">Birkaç dakika hello yük düzeni tooemerge, böylece bölümleri aşağıdaki hello toomonitor hello yük denemeden önce 3-5 dakika hello yük oluşturucuyu çalıştırmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="89f8b-190">Merhaba yük Oluşturucu yerel PowerShell oturumunuzda işleri bir dizi olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="89f8b-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="89f8b-191">Merhaba tutmak *Demo PerformanceMonitoringAndManagement.ps1* sekmesi açık!</span><span class="sxs-lookup"><span data-stu-id="89f8b-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="89f8b-192">Merhaba sekmesini kapatın veya makinenizi askıya alma, hello yük Oluşturucu durdurur.</span><span class="sxs-lookup"><span data-stu-id="89f8b-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="89f8b-193">Merhaba yük Oluşturucu kaldığı bir *iş çağırma* ürettiği burada hello Oluşturucu başlatıldıktan sonra sağlanan yeni kiracılar yük durumu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="89f8b-194">Kullanım *Ctrl-C* toostop yeni işler ve çıkış hello betik çağırma.</span><span class="sxs-lookup"><span data-stu-id="89f8b-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="89f8b-195">Merhaba yük Oluşturucu toorun, ancak yalnızca var olan kiracılar devam eder.</span><span class="sxs-lookup"><span data-stu-id="89f8b-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="89f8b-196">Hello Azure portal kullanarak kaynak kullanımını izleme</span><span class="sxs-lookup"><span data-stu-id="89f8b-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="89f8b-197">Merhaba sonuçlarından uygulanmakta, yük toomonitor hello kaynak kullanımı hello Kiracı veritabanları içeren hello portal toohello havuzu açın:</span><span class="sxs-lookup"><span data-stu-id="89f8b-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="89f8b-198">Açık hello [Azure portal](https://portal.azure.com) ve toohello Gözat *tenants1 -&lt;kullanıcı&gt;*  sunucu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="89f8b-199">Aşağı kaydırıp elastik havuzları bulun ve **Pool1**’e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="89f8b-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="89f8b-200">Bu havuz şu ana kadar oluşturulan tüm hello Kiracı veritabanlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="89f8b-201">Merhaba gözlemlemek **esnek Havuz izleme** ve **esnek veritabanı izleme** grafik.</span><span class="sxs-lookup"><span data-stu-id="89f8b-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="89f8b-202">Merhaba havuzunun kaynak kullanımı hello toplama veritabanı kullanımı hello havuzdaki tüm veritabanları için ' dir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="89f8b-203">Merhaba veritabanı grafik hello beş yeni veritabanları gösterir:</span><span class="sxs-lookup"><span data-stu-id="89f8b-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="89f8b-204">Merhaba havuzunda ek veritabanları olduğundan üst beş Merhaba, hello havuzu kullanımı hello üst beş veritabanları grafikte yansıtılmaz etkinliğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="89f8b-205">Ek ayrıntılar için tıklatın **veritabanı kaynak kullanımını**:</span><span class="sxs-lookup"><span data-stu-id="89f8b-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="89f8b-206">Merhaba havuzunda performans uyarıları ayarlayın</span><span class="sxs-lookup"><span data-stu-id="89f8b-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="89f8b-207">Bir uyarı üzerinde tetikler hello havuzu Ayarla \>şekilde % 75 kullanımı:</span><span class="sxs-lookup"><span data-stu-id="89f8b-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="89f8b-208">Açık *Pool1* (Merhaba üzerinde *tenants1 -\<kullanıcı\>*  sunucu) hello içinde [Azure portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="89f8b-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="89f8b-209">**Uyarı Kuralları**ve ardından **+ Uyarı ekle**’ye tıklayın:</span><span class="sxs-lookup"><span data-stu-id="89f8b-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![uyarı ekle](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="89f8b-211">**Yüksek DTU** gibi bir ad belirtin,</span><span class="sxs-lookup"><span data-stu-id="89f8b-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="89f8b-212">Hello aşağıdaki değerleri ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="89f8b-212">Set hello following values:</span></span>
   * <span data-ttu-id="89f8b-213">**Ölçüm = eDTU yüzdesi**</span><span class="sxs-lookup"><span data-stu-id="89f8b-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="89f8b-214">**Koşul = büyüktür**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="89f8b-215">**Eşik = 75**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="89f8b-216">**Son 30 dakika hello dönem =**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="89f8b-217">Bir e-posta adresi toohello ekleme *ek yönetici email(s)* kutusuna ve tıklatın **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![uyarı ayarlama](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="89f8b-219">Meşgul bir havuzun ölçeğini artırma</span><span class="sxs-lookup"><span data-stu-id="89f8b-219">Scale up a busy pool</span></span>

<span data-ttu-id="89f8b-220">Merhaba toplama yük düzeyi hello havuzu maxes ve % 100 eDTU kullanımı ulaştığında bir havuzu toohello noktasında artarsa, potansiyel olarak yavaşlamasını sorgusu yanıt sürelerini hello havuzdaki tüm veritabanları için tek tek veritabanı performansı etkilenir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="89f8b-221">**Kısa vadeli**, hello havuzu tooprovide ek kaynakları ölçekleme veya veritabanlarını hello havuzundan kaldırılıyor göz önünde bulundurun (tooother havuzları taşıma veya hello havuzu tooa tek başına hizmet katmanı dışında).</span><span class="sxs-lookup"><span data-stu-id="89f8b-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="89f8b-222">**Uzun vadeli**, sorguları en iyi duruma getirme göz önünde bulundurun veya dizin kullanım tooimprove veritabanı performansı.</span><span class="sxs-lookup"><span data-stu-id="89f8b-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="89f8b-223">% 100 eDTU kullanımı erişmeden önce hello bağlı olarak, en iyi yöntem tooscale uygulamanın duyarlılık tooperformance havuzu oluşturmak verir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="89f8b-224">Bir uyarı toowarn kullanın, önceden.</span><span class="sxs-lookup"><span data-stu-id="89f8b-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="89f8b-225">Merhaba Oluşturucu tarafından üretilen artan hello yük tarafından meşgul havuzu benzetimini yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="89f8b-226">Merhaba veritabanları tooburst daha sık ve uzun, artan hello toplama yük hello havuzunda hello gereksinimleri veritabanlarını tek tek hello değiştirmeden neden oluyor.</span><span class="sxs-lookup"><span data-stu-id="89f8b-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="89f8b-227">Merhaba kuyruğunu ölçeklendirme hello portal veya PowerShell kolayca yapılır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="89f8b-228">Bu alıştırmada hello portal kullanır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="89f8b-229">Ayarlama *$DemoScenario* = **3**, _Generate yük uzun ve daha sık WINS'e veritabanı başına ile_ tooincrease hello hello toplama yükünü yoğunluğunu Her veritabanı tarafından istenen hello yoğun yük değiştirmeden hello havuzu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="89f8b-230">Tuşuna **F5** tooapply yük tooall Kiracı veritabanlarınızda.</span><span class="sxs-lookup"><span data-stu-id="89f8b-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="89f8b-231">Çok Git**Pool1** hello Azure Portalı'nda.</span><span class="sxs-lookup"><span data-stu-id="89f8b-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="89f8b-232">İzleyici hello havuz eDTU kullanımı hello üst grafik artar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="89f8b-233">Merhaba yeni yüksek yük tookick, birkaç dakika sürer ancak toohit max kullanımı Başlat hello havuzu hızlı bir şekilde görmeniz gerekir ve hello yeni modele hello yük steadies gibi hızlı bir şekilde hello havuzu overloads.</span><span class="sxs-lookup"><span data-stu-id="89f8b-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="89f8b-234">Merhaba havuzu yukarı tooscale tıklatın **havuzu yapılandırma** hello hello üstündeki **Pool1** sayfası.</span><span class="sxs-lookup"><span data-stu-id="89f8b-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="89f8b-235">Merhaba ayarlamak **havuz eDTU** çok ayarı**100**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="89f8b-236">Merhaba havuz eDTU değiştirme (olan hala veritabanı başına maksimum 50 eDTU) hello veritabanı başına ayarlarını değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="89f8b-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="89f8b-237">Merhaba sağ tarafında hello hello veritabanı başına ayarlarını görebilir **havuzu yapılandırma** sayfası.</span><span class="sxs-lookup"><span data-stu-id="89f8b-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="89f8b-238">Tıklatın **kaydetmek** toosubmit hello isteği tooscale hello havuzu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="89f8b-239">Çok dön**Pool1** > **genel bakış** izleme grafikleri tooview hello.</span><span class="sxs-lookup"><span data-stu-id="89f8b-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="89f8b-240">(Süre için çalıştırana kadar birkaç veritabanları ve rastgele bir yük, her zaman kolay toosee conclusively olmasa da) ile daha fazla kaynak hello havuzu sağlama hello etkisini izleyin.</span><span class="sxs-lookup"><span data-stu-id="89f8b-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="89f8b-241">Hello grafikleri ayı göz önünde % 100 hello üst bakarken artık grafik 100 Edtu'lar temsil eder, hello üzerinde daha düşük grafik % 100 hala 50 Edtu'lar hello olarak en fazla veritabanı başına olsa da yine 50 Edtu'lar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="89f8b-242">Veritabanları çevrimiçi ve tam olarak hello işlemi boyunca kullanılabilir olmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="89f8b-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="89f8b-243">Her veritabanı hazır toobe hello yeni havuz eDTU ile etkin olarak hello en son şu anda tüm etkin bağlantılar kesilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="89f8b-244">Uygulama kodu bırakılan tooretry bağlantıları, her zaman yazılması ve hello ölçeği artırılmış havuzunda toohello veritabanı yeniden bağlanır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="89f8b-245">Havuzları arasında Yük Dengelemesi</span><span class="sxs-lookup"><span data-stu-id="89f8b-245">Load balance between pools</span></span>

<span data-ttu-id="89f8b-246">Bir alternatif tooscaling hello havuzu yukarı ikinci bir havuzu oluşturun ve içine veritabanlarını taşımak gibi toobalance hello iki havuzları arasında hello yükleyin.</span><span class="sxs-lookup"><span data-stu-id="89f8b-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="89f8b-247">Merhaba hello aynı sunucuya ilk toodo bu hello yeni havuz üzerinde oluşturulması gerekir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="89f8b-248">Merhaba, [Azure portal](https://portal.azure.com)açın hello **tenants1 -&lt;kullanıcı&gt;**  sunucu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="89f8b-249">Tıklatın **+ yeni havuz** toocreate hello geçerli sunucudaki bir havuzu.</span><span class="sxs-lookup"><span data-stu-id="89f8b-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="89f8b-250">Merhaba üzerinde **esnek veritabanı havuzu** şablonu:</span><span class="sxs-lookup"><span data-stu-id="89f8b-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="89f8b-251">Ayarlama **adı** çok*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="89f8b-252">Fiyatlandırma katmanı olarak hello bırakın **standart havuz**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="89f8b-253">**Havuzu yapılandır**'a tıklayın,</span><span class="sxs-lookup"><span data-stu-id="89f8b-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="89f8b-254">Ayarlama **havuz eDTU** çok*50 eDTU*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="89f8b-255">Tıklatın **eklemek veritabanları** toosee çok eklenebilir hello sunucuda veritabanlarının listesini*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="89f8b-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="89f8b-256">Tüm 10 veritabanları toomove bu toohello yeni havuzu seçin ve ardından **seçin**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="89f8b-257">Merhaba yük Oluşturucu çalışır durumda, hello hizmeti performans profilinizi hello varsayılan 50 eDTU boyutundan daha büyük bir havuzu gerektirir ve bir 100 eDTU ayarı ile başlayan önerir zaten bilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![Öneri](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="89f8b-259">Bu öğretici için hello varsayılan 50 Edtu bırakın ve tıklatın **seçin** yeniden.</span><span class="sxs-lookup"><span data-stu-id="89f8b-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="89f8b-260">Seçin **Tamam** toocreate hello yeni havuz ve toomove hello seçili veritabanları içine.</span><span class="sxs-lookup"><span data-stu-id="89f8b-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="89f8b-261">Merhaba havuzu oluşturma ve hello veritabanlarını taşıma birkaç dakika sürer.</span><span class="sxs-lookup"><span data-stu-id="89f8b-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="89f8b-262">Veritabanları, hello kadar çok son şu anda çevrimiçi ve tam olarak erişilebilir kalırlar taşınırken, bu noktada açık olan bağlantıları kapanır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="89f8b-263">Bazı yeniden deneme mantığı sahip olduğu sürece, istemciler daha sonra hello yeni havuz toohello veritabanına bağlanır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="89f8b-264">Çok Gözat**Pool2** (Merhaba üzerinde *tenants1* sunucu) tooopen hello havuzu ve kendi performansını izleyebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="89f8b-265">Göremiyorsanız, hello yeni havuz toocomplete sağlama için bekleyin.</span><span class="sxs-lookup"><span data-stu-id="89f8b-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="89f8b-266">Artık kaynak kullanımının gördüğünüz *Pool1* bıraktı ve *Pool2* şimdi benzer şekilde yüklenir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="89f8b-267">Tek bir veritabanının performansını yönetme</span><span class="sxs-lookup"><span data-stu-id="89f8b-267">Manage performance of a single database</span></span>

<span data-ttu-id="89f8b-268">Bir havuzdaki tek veritabanı hello havuzu yapılandırmasına bağlı olarak uzun süreli yüksek yük karşılaşırsa toodominate hello kaynakları hello havuzunda eğilimindedir ve diğer veritabanlarına etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="89f8b-269">Merhaba etkinlik süre için büyük olasılıkla toocontinue ise, hello veritabanı geçici olarak hello havuzu dışında taşınabilir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="89f8b-270">Bu hello veritabanı toohave hello gerekir ve diğer veritabanlarına hello yalıtır ek kaynakları sağlar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="89f8b-271">Bu alıştırmada, Contoso birlikte bilet satış popüler birlikte için olduğunuzda yüksek yük yaşayan Hall hello etkisini taklit eder.</span><span class="sxs-lookup"><span data-stu-id="89f8b-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="89f8b-272">Açık hello... \\ *Demo PerformanceMonitoringAndManagement.ps1* komut dosyası.</span><span class="sxs-lookup"><span data-stu-id="89f8b-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="89f8b-273">**$DemoScenario = 5, Tek bir kiracı üzerinde normal yük ve yoğun yük oluşturma (yaklaşık 95 DTU)** ayarını yapın.</span><span class="sxs-lookup"><span data-stu-id="89f8b-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="89f8b-274">**$SingleTenantDatabaseName = contosoconcerthall** değerini ayarlayın</span><span class="sxs-lookup"><span data-stu-id="89f8b-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="89f8b-275">Merhaba komut dosyasını kullanarak yürütme **F5**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="89f8b-276">Merhaba, [Azure portal](https://portal.azure.com) açmak **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="89f8b-277">Merhaba incelemek **esnek Havuz izleme** grafik ve artan hello havuz eDTU kullanımı için bakın.</span><span class="sxs-lookup"><span data-stu-id="89f8b-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="89f8b-278">Veya iki dakika sonra hello daha yüksek yük içinde tookick başlamanız gerekir ve hızlı bir şekilde hello havuzu kullanımı % 100 isabetler görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="89f8b-279">Merhaba incelemek **esnek veritabanı izleme** hello yeni veritabanları hello son bir saat gösteren görüntü.</span><span class="sxs-lookup"><span data-stu-id="89f8b-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="89f8b-280">Merhaba *contosoconcerthall* veritabanı yakında görünmelidir hello beş yeni veritabanları biri olarak.</span><span class="sxs-lookup"><span data-stu-id="89f8b-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="89f8b-281">**Merhaba esnek veritabanı izleme'yi tıklatın** **grafik** ve hello açar **veritabanı kaynak kullanımını** burada izleyebilirsiniz hello veritabanları hiçbirini sayfası.</span><span class="sxs-lookup"><span data-stu-id="89f8b-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="89f8b-282">Bu hello hello görüntü ayırmanıza olanak tanır *contosoconcerthall* veritabanı.</span><span class="sxs-lookup"><span data-stu-id="89f8b-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="89f8b-283">Veritabanları Hello listeden tıklatın **contosoconcerthall**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="89f8b-284">Tıklatın **fiyatlandırma Katmanı (Ölçek Dtu'lar)** tooopen hello **performansını yapılandırın** hello veritabanı için bir tek başına performans düzeyi ayarlayabileceğiniz sayfa.</span><span class="sxs-lookup"><span data-stu-id="89f8b-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="89f8b-285">Tıklatın hello üzerinde **standart** sekmesinde hello standart katmanındaki tooopen hello ölçeklendirme seçeneği.</span><span class="sxs-lookup"><span data-stu-id="89f8b-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="89f8b-286">Merhaba slayt **DTU kaydırıcı** tooright tooselect **100** Dtu'lar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="89f8b-287">Bu toohello hizmet hedefi, karşılık gelen Not **S3**.</span><span class="sxs-lookup"><span data-stu-id="89f8b-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="89f8b-288">Tıklatın **Uygula** toomove hello hello havuzu veritabanından ve onu bir *standart S3* veritabanı.</span><span class="sxs-lookup"><span data-stu-id="89f8b-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="89f8b-289">Ölçeklendirme sonra tamamlayın, hello contosoconcerthall veritabanı İzleyicisi Merhaba etkisi ve Pool1 hello esnek havuzu ve veritabanı dikey pencereleri üzerinde.</span><span class="sxs-lookup"><span data-stu-id="89f8b-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="89f8b-290">Merhaba yüksek yük hello contosoconcerthall veritabanında subsides sonra kısa süre içinde bu toohello havuzu tooreduce döndürmelidir, maliyeti.</span><span class="sxs-lookup"><span data-stu-id="89f8b-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="89f8b-291">Belirsiz ise, ayarladığınız uyarı hello veritabanında, ne zaman olacağını tetiklemek DTU kullanımını hello veritabanı başına düştüğünde hello havuzunda maks.</span><span class="sxs-lookup"><span data-stu-id="89f8b-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="89f8b-292">Veritabanını havuza taşıma işlemi 5. alıştırmada açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="89f8b-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="89f8b-293">Diğer Performans Yönetimi Düzenleri</span><span class="sxs-lookup"><span data-stu-id="89f8b-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="89f8b-294">**Önleyici ölçeklendirme** alıştırmada burada incelediniz nasıl tooscale yalıtılmış bir veritabanı, sizin için hangi veritabanı toolook biliyorduk hello yukarıdaki.</span><span class="sxs-lookup"><span data-stu-id="89f8b-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="89f8b-295">Contoso birlikte Hall Hello yönetimini hello yaklaşan bilet satış Wingtips haberdar, hello veritabanı dışında hello havuzu pre-emptively taşınmış.</span><span class="sxs-lookup"><span data-stu-id="89f8b-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="89f8b-296">Aksi takdirde, bu büyük olasılıkla bir uyarı hello havuzu veya hello veritabanı toospot neler için şunlar gerekir.</span><span class="sxs-lookup"><span data-stu-id="89f8b-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="89f8b-297">Bu konuda toolearn hello gelen hello havuzu düşürülmüş performansını şikayetçi içindeki diğer kiracılar istemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="89f8b-298">Ve hello Kiracı ne kadar süreyle hello havuzu bir Azure Otomasyonu runbook toomove hello veritabanından ayarlayın ve ardından içinde tanımlanmış bir zamanlamaya göre yeniden ek kaynaklar gerekir tahmin edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="89f8b-299">**Kiracı Self Servis ölçeklendirme** ölçeklendirme hello yönetim API'si kolayca adında bir görev olduğundan, kolayca hello özelliği Kiracı kullanıma yönelik uygulamanız tooscale Kiracı veritabanı oluşturmak ve SaaS hizmetiniz bir özellik olarak sunar.</span><span class="sxs-lookup"><span data-stu-id="89f8b-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="89f8b-300">Örneğin, belki de doğrudan bağlı yukarı ve aşağı Ölçeklendirmesi self-administer kiracılar izin tootheir faturalama!</span><span class="sxs-lookup"><span data-stu-id="89f8b-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="89f8b-301">**Bir havuz üzerinde zamanlama toomatch kullanım desenlerini yukarı ve aşağı ölçeklendirme**</span><span class="sxs-lookup"><span data-stu-id="89f8b-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="89f8b-302">Toplam Kiracı kullanım tahmin edilebilir kullanım desenlerini aşağıdaki durumlarda, bir zamanlamaya göre yukarı ve aşağı olarak Azure Otomasyonu tooscale bir havuz kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="89f8b-303">Örneğin, kaynak gereksinimlerinde düşüş olduğunu bildiğiniz hafta içi günlerinde havuz ölçeğini akşam 6’dan sonra azaltıp sabah 6’dan önce yeniden artırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89f8b-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="89f8b-304">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="89f8b-304">Next steps</span></span>

<span data-ttu-id="89f8b-305">Bu öğreticide şunların nasıl yapıldığını öğrenirsiniz:</span><span class="sxs-lookup"><span data-stu-id="89f8b-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="89f8b-306">Sağlanan yük Oluşturucu çalıştırarak hello Kiracı veritabanı kullanımı benzetimi</span><span class="sxs-lookup"><span data-stu-id="89f8b-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="89f8b-307">Yük toohello artış yanıt olarak İzleyicisi Merhaba Kiracı veritabanları</span><span class="sxs-lookup"><span data-stu-id="89f8b-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="89f8b-308">Merhaba yanıt toohello artan veritabanı yük esnek havuzda ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="89f8b-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="89f8b-309">İkinci bir esnek havuz tooload Bakiye hello veritabanı etkinliklerini sağlama</span><span class="sxs-lookup"><span data-stu-id="89f8b-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="89f8b-310">Tek bir kiracıyı geri yükleme öğreticisi</span><span class="sxs-lookup"><span data-stu-id="89f8b-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="89f8b-311">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="89f8b-311">Additional resources</span></span>

* <span data-ttu-id="89f8b-312">Ek [hello Wingtip SaaS uygulama dağıtımı sırasında yapı öğreticileri](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="89f8b-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="89f8b-313">SQL Elastik havuzları</span><span class="sxs-lookup"><span data-stu-id="89f8b-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="89f8b-314">Azure otomasyonu</span><span class="sxs-lookup"><span data-stu-id="89f8b-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="89f8b-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Log Analytics ayarlama ve kullanma öğreticisi</span><span class="sxs-lookup"><span data-stu-id="89f8b-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>
