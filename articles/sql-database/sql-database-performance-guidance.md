---
title: "aaaAzure SQL veritabanı performans Kılavuzu ayarlama | Microsoft Docs"
description: "Bu makalede, uygulamanız için hangi hizmet katmanı toochoose belirlemenize yardımcı olabilir. Ayrıca, uygulama tooget hello Azure SQL veritabanından en yolları tootune önerir."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="1cd9d-104">Azure SQL veritabanında performans ayarlama</span><span class="sxs-lookup"><span data-stu-id="1cd9d-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="1cd9d-105">Azure SQL veritabanı sağlar [önerileri](sql-database-advisor.md) veritabanınızın tooimprove performansını kullanabilir veya Azure SQL veritabanı sağlayabilirsiniz [tooyour uygulama otomatik olarak uyum](sql-database-automatic-tuning.md) ve değişiklikleri uygulayın Bu, İş yükünüzün performansını artırır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="1cd9d-106">Size herhangi bir geçerli önerimiz yok ve performans sorunlarını çözümlenmedi, yöntemleri tooimprove performanslarını aşağıdaki hello kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="1cd9d-107">Artırmak [hizmet katmanları](sql-database-service-tiers.md) ve daha fazla kaynak tooyour veritabanı sağlayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="1cd9d-108">Uygulamanızı ayarlama ve performansı artırabilir bazı en iyi uygulamalar uygulayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="1cd9d-109">Dizinler ve toomore verimli bir şekilde verilerle çalışma sorgular değiştirerek Hello veritabanı ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="1cd9d-110">El ile uygulanan yöntemleri toodecide gerekenleri çünkü bunlar [hizmet katmanları](sql-database-service-tiers.md) seçmeniz veya toorewrite uygulama veya veritabanı kod gerekir ve hello değişiklikleri deply.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="1cd9d-111">Veritabanınızın artan performans katmanı</span><span class="sxs-lookup"><span data-stu-id="1cd9d-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="1cd9d-112">Azure SQL veritabanı sunan dört [hizmet katmanları](sql-database-service-tiers.md) , arasından seçim yapabilirsiniz: temel, standart, Premium ve Premium RS (performans veritabanı işleme birimleri içinde ölçülen veya [Dtu'lar](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="1cd9d-113">Her hizmet katmanında kesinlikle SQL veritabanınız kullanabilirsiniz ve bu hizmet düzeyi için tahmin edilebilir performans garanti hello kaynakları yalıtır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="1cd9d-114">Bu makalede, uygulamanız için hello hizmet katmanı seçmenize yardımcı olacak yönergeler sağlıyoruz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="1cd9d-115">Ayrıca, uygulama tooget hello Azure SQL veritabanından en ince ayar yolları aşağıdakiler ele.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="1cd9d-116">Bu makalede tek veritabanları Azure SQL Database performans rehberi odaklanır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="1cd9d-117">Performans rehberi için bkz: ilgili tooelastic havuzlarını [esnek havuzlar için fiyat ve performans konuları](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="1cd9d-118">Ancak, bu makale toodatabases esnek havuzdaki önerileri ayarlama hello çoğunu uygulamak ve benzer performans avantajlarından yararlanabilmek unutmayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="1cd9d-119">**Temel**: hello temel hizmet katmanı teklifleri iyi bir performans öngörülebilirlik her veritabanı için saat üzerinden saat.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="1cd9d-120">Temel bir veritabanında yeterli kaynakları birden çok eşzamanlı istek yok küçük bir veritabanında iyi bir performans desteklemez.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="1cd9d-121">Temel Hizmet katmanını kullandığınızda tipik kullanım örnekleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="1cd9d-122">**Yalnızca Azure SQL veritabanı ile çalışmaya Başlarken**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="1cd9d-123">Genellikle geliştirme olan uygulamalar, yüksek performans düzeyleri gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="1cd9d-124">Veritabanı geliştirme veya sınama, düşük fiyat noktada için ideal bir ortam temel veritabanlarıdır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="1cd9d-125">**Tek bir kullanıcıyla bir veritabanına sahip**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-125">**You have a database with a single user**.</span></span> <span data-ttu-id="1cd9d-126">Tek bir kullanıcı genellikle bir veritabanıyla ilişkilendirin uygulamaları yüksek tutarlılık ve performans gereksinimlerini yok.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="1cd9d-127">Bu uygulamalar hello temel hizmet katmanı için bir aday değildir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="1cd9d-128">**Standart**: hello standart hizmet katmanı performansı öngörülebilirlik sunar ve çalışma grubu ve web uygulamaları gibi birden çok eş zamanlı istekleri veritabanları için iyi bir performans sağlar.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="1cd9d-129">Bir standart hizmet katmanı veritabanı seçtiğinizde, veritabanı uygulamanızı tahmin edilebilir performans üzerinde boyutlandırabilirsiniz dakika üzerinden dakika.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="1cd9d-130">**Birden çok eşzamanlı istek veritabanınızı sahip**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="1cd9d-131">Genellikle aynı anda birden fazla kullanıcı hizmet uygulamaları, daha yüksek performans düzeyleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="1cd9d-132">Örneğin, birden çok eşzamanlı sorguyu destekler düşük toomedium g/ç trafiği gereksinimlerin çalışma grubu veya web uygulamaları hello standart hizmet katmanı için iyi bir aday değildir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="1cd9d-133">**Premium**: hello Premium Hizmet katmanını tahmin edilebilir performans sunar ikinci olarak, her Premium veritabanı için üzerinden ikinci.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="1cd9d-134">Merhaba Premium Hizmet katmanını seçtiğinizde, bu veritabanı için hello yoğun yük temel veritabanı uygulamanızı boyutlandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="1cd9d-135">Merhaba planı performans farkı küçük sorguları tootake gecikme süresine duyarlı işlemleri beklenenden uzun neden olabilir durumlarda kaldırır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="1cd9d-136">Bu model hello geliştirme ve ürün doğrulama döngüleri toomake güçlü deyimleri en yüksek kaynak gereksinimleri, performans farkı veya sorgu gecikmesi hakkında gereken uygulamalar için büyük ölçüde basitleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="1cd9d-137">Çoğu Premium Hizmet katmanını kullanım örnekleri, bir veya daha fazla şu özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="1cd9d-138">**Yüksek yoğun yük**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-138">**High peak load**.</span></span> <span data-ttu-id="1cd9d-139">Önemli ölçüde CPU, bellek veya giriş/çıkış (g/ç) toocomplete gerektiren bir uygulama işlemlerini ayrılmış, yüksek performans düzeyi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="1cd9d-140">Örneğin, tooconsume bilinen bir veritabanı uzun bir süre için birkaç CPU çekirdekleri işlemdir hello Premium Hizmet katmanını aday.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="1cd9d-141">**Çok sayıda eşzamanlı istek**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-141">**Many concurrent requests**.</span></span> <span data-ttu-id="1cd9d-142">Bir Web sitesi, hizmet veren bir yüksek trafik hacmi olduğunda bazı veritabanı çok sayıda eşzamanlı istek, örneğin, hizmet uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="1cd9d-143">Temel ve standart hizmet katmanları hello veritabanı başına eşzamanlı istek sayısını sınırlayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="1cd9d-144">Daha fazla bağlantı gerektiren uygulamalar toochoose bir uygun ayırma boyutu toohandle hello istekleri sayısı üst sınırını gerekli gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="1cd9d-145">**Düşük gecikme süresi**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-145">**Low latency**.</span></span> <span data-ttu-id="1cd9d-146">Bazı uygulamalar tooguarantee hello veritabanından yanıt en az sürede gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="1cd9d-147">Belirli bir saklı yordam daha geniş bir müşteri işleminin bir parçası çağrılırsa, en fazla 20 milisaniye cinsinden hello süresinin yüzde 99'return bu çağrısından gereksinim toohave sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="1cd9d-148">Bu tür bir uygulama avantajları hello Premium hizmet katmanından, toomake gücünün bu hello gerekli emin kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="1cd9d-149">**Premium RS**: Premium RS katmanı hello gerektirmez g/ç açısından yoğun iş yükleri yüksek kullanılabilirlik garantilerinden hello için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="1cd9d-150">Örnekler, yüksek performanslı iş yükleri veya hello veritabanı kaydının hello sistem olduğu analitik bir iş yükü test edilmesini içerir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="1cd9d-151">SQL veritabanınız için gereksinim duyduğunuz hello hizmet düzeyi her kaynak boyutu için hello yoğun yük gereksinimlerine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="1cd9d-152">Bazı uygulamaları tek bir kaynak Önemsiz miktarını kullanır, ancak diğer kaynaklar için önemli gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="1cd9d-153">Hizmet katmanı özellikleri ve sınırları</span><span class="sxs-lookup"><span data-stu-id="1cd9d-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="1cd9d-154">Her bir hizmet katmanına hello esneklik toopay yalnızca gereksinim duyduğunuz hello kapasitesi alacak şekilde hello performans düzeyi ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="1cd9d-155">Yapabilecekleriniz [kapasite ayarlamak](sql-database-service-tiers.md), yukarı veya aşağı, iş yükü değişiklikleri olarak.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="1cd9d-156">Örneğin, veritabanının yükünüzü hello geri Okul alışveriş sezonu sırasında yüksekse, Temmuz Eylül aracılığıyla belirlenen bir süre için hello veritabanı için hello performans düzeyi artırabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="1cd9d-157">Yoğun sezonu sona erdiğinde azaltabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="1cd9d-158">İşinizin, bulut ortamı toohello mevsimselliğin en iyi duruma getirme tarafından ödeme en aza indirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="1cd9d-159">Bu model de iyi yazılım ürün yayın döngüsü boyunca çalışır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="1cd9d-160">Test çalışmasını ve test bitirdiğinizde kapasiteyi yayın sırasında test takımı kapasite ayırabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="1cd9d-161">Gereksinim ve nadiren kullanabilecek ayrılmış kaynakları harcama kaçının bir kapasite isteği modelde kapasiteyi ücret ödersiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="1cd9d-162">Neden katmanları hizmet?</span><span class="sxs-lookup"><span data-stu-id="1cd9d-162">Why service tiers?</span></span>
<span data-ttu-id="1cd9d-163">Her veritabanı iş yükü değişebilir hizmet katmanları hello amacı tooprovide performans öngörülebilirlik çeşitli performans düzeyleri olsa da.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="1cd9d-164">Büyük ölçekli veritabanı kaynak gereksinimleri müşterilerle daha ayrılmış bir bilgisayar ortamda çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="1cd9d-165">Uygulamanızı ayarlama</span><span class="sxs-lookup"><span data-stu-id="1cd9d-165">Tune your application</span></span>
<span data-ttu-id="1cd9d-166">Geleneksel şirket içi SQL Server ' ilk kapasite planlaması hello işlemi genellikle uygulama üretimde çalışan hello işleminden ayrılır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="1cd9d-167">Donanım ve Ürün lisans ilk satın ve performans ayarlama daha sonra yapılır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="1cd9d-168">Azure SQL veritabanı kullandığınızda, bu uygulamayı çalıştıran ve bu ayar bir fikir toointerweave hello işlemidir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="1cd9d-169">İsteğe bağlı kapasite için ödeme hello modeli ile bir uygulama için hangi sıklıkta yanlış Gelecekteki büyümeyi planları tahmin üzerinde temel donanımda işleminin yerine şimdi, gerekli uygulama toouse hello minimum kaynaklarınızı ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="1cd9d-170">Bazı müşteriler değil tootune bir uygulama seçin ve bunun yerine toooverprovision donanım kaynakları seçin.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="1cd9d-171">Toochange meşgul bir süre içinde önemli uygulama istemiyorsanız, bu yaklaşım iyi bir fikir olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="1cd9d-172">Ancak, Azure SQL veritabanı'nda hello hizmet katmanları kullandığınızda, bir uygulama ayarı kaynak gereksinimlerini ve daha düşük aylık faturaları en aza indirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="1cd9d-173">Uygulama özellikleri</span><span class="sxs-lookup"><span data-stu-id="1cd9d-173">Application characteristics</span></span>
<span data-ttu-id="1cd9d-174">Azure SQL Database hizmet katmanları tasarlanmış tooimprove performans kararlılık ve öngörülebilirlik için bir uygulama olsa da, bazı en iyi uygulamalar, uygulama toobetter faydalanan bir performans düzeyinde hello kaynakları ince ayar yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="1cd9d-175">Birçok uygulama yalnızca göre önemli performans artışları sahip olsa da tooa geçiş daha yüksek performans düzeyi veya hizmet katmanı, bazı uygulamalar gerek toobenefit hizmetinin daha yüksek bir düzeyinden ayarlama ek.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="1cd9d-176">Performansı artırmak için bu özelliklere sahip uygulamalar için ek uygulama ayarlamayı göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="1cd9d-177">**Yavaş performansı nedeniyle "chatty" davranışı uygulamaları**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="1cd9d-178">Chatty uygulamaları hassas toonetwork gecikme aşırı veri erişim işlemleri yapın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="1cd9d-179">Bu tür uygulamalar tooreduce hello veri erişim işlemleri toohello SQL veritabanı sayısı toomodify gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="1cd9d-180">Örneğin, geçici sorguları toplu işleme veya toostored yordamları hello sorgular taşıma gibi teknikler kullanılarak uygulama performansını iyileştirebilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="1cd9d-181">Daha fazla bilgi için bkz: [Toplu sorguları](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="1cd9d-182">**Tüm tek makine tarafından desteklenen yoğun bir iş yükü veritabanlarıyla**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="1cd9d-183">Hello kaynakları hello yüksek Premium performans düzeyinin aşan veritabanları hello iş yükünü ölçeklendirme yararlı.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="1cd9d-184">Daha fazla bilgi için bkz: [veritabanları arası parçalama](#cross-database-sharding) ve [işlevsel bölümleme](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="1cd9d-185">**Yetersiz sorguları uygulamaları**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="1cd9d-186">Uygulamalar, özellikle de sorguları kötü düzenlediniz hello veri erişim katmanı, daha yüksek bir performans düzeyinden yararlanabilir değil.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="1cd9d-187">Bu, WHERE yan tümcesi eksik, dizinleri eksik olan veya istatistikleri eski sorguları içerir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="1cd9d-188">Bu uygulamalar standart sorgu teknikleri performans ayarlama yarar.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="1cd9d-189">Daha fazla bilgi için bkz: [eksik dizinler](#identifying-and-adding-missing-indexes) ve [ayarlama ve ipucu sorgu](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="1cd9d-190">**Yetersiz veri uygulamaları erişim tasarım**.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="1cd9d-191">Devralınan veri erişim eşzamanlılık sorunları, örneğin kilitlenmenin, uygulamaları daha yüksek bir performans düzeyinden yararlı değildir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="1cd9d-192">Gidiş dönüş hello Azure SQL veritabanı hello istemci tarafında önbelleğe alma verileri tarafından hello Azure önbellek hizmeti ile karşı veya başka bir önbelleğe alma teknolojisi azaltmayı deneyin.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="1cd9d-193">Bkz: [uygulama katmanı önbelleğe alma](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="1cd9d-194">Veritabanınızı ayarlama</span><span class="sxs-lookup"><span data-stu-id="1cd9d-194">Tune your database</span></span>
<span data-ttu-id="1cd9d-195">Bu bölümde, uygulamanız için tootune Azure SQL veritabanı toogain hello en iyi performansı kullanın ve en düşük olası performans düzeyinde hello çalıştırmak bazı teknikleri ele.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="1cd9d-196">Başkalarının belirli tooAzure SQL veritabanı olan ancak bu teknikler bazıları geleneksel SQL Server en iyi yöntemler ayarlama eşleşmesi.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="1cd9d-197">Bazı durumlarda, bir veritabanı toofind alanları toofurther ayarlama için tüketilen hello kaynakları inceleyin ve Azure SQL veritabanında geleneksel SQL Server teknikleri toowork genişletir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="1cd9d-198">Azure portalını kullanarak performans sorunlarını belirle</span><span class="sxs-lookup"><span data-stu-id="1cd9d-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="1cd9d-199">Araçları hello Azure Portalı'nda aşağıdaki hello çözümlemek ve SQL veritabanı ile performans sorunlarını gidermenize yardımcı olabilir:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="1cd9d-200">Sorgu Performansı Öngörüleri</span><span class="sxs-lookup"><span data-stu-id="1cd9d-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="1cd9d-201">SQL Veritabanı Danışmanı</span><span class="sxs-lookup"><span data-stu-id="1cd9d-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="1cd9d-202">Hello Azure portal sahip hem de bu araçları hakkında daha fazla bilgi ve nasıl toouse bunları.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="1cd9d-203">tooefficiently tanılamak ve doğru sorunları hello araçları hello Azure Portalı'nda ilk deneyin önerilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="1cd9d-204">Eksik dizinler ve özel durumlarda sorgu ayarlama için ardından, aşağıdakiler ele yaklaşımlar ayarlama hello el ile kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="1cd9d-205">Üzerinde Azure SQL veritabanı sorunlarını tanımlama hakkında daha fazla bilgi bulmak [performans izleme](sql-database-single-database-monitor.md) makalesi.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="1cd9d-206">Tanımlama ve eksik dizinler ekleme</span><span class="sxs-lookup"><span data-stu-id="1cd9d-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="1cd9d-207">Ortak bir OLTP veritabanı performans sorunu toohello fiziksel veritabanı tasarım ilişkilendirir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="1cd9d-208">Genellikle, veritabanı şemalarını tasarlanır ve ölçekli (ya da yükleme veya veri birimi) sınamadan geliyordu.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="1cd9d-209">Ne yazık ki, bir sorgu planı hello performansını bir küçük ölçekte kabul edilebilir ancak üretim düzeyinde veri birimlerini önemli ölçüde düşürebilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="1cd9d-210">Merhaba en yaygın bu sorunu hello eksikliği uygun dizinleri toosatisfy filtre ya da başka kısıtlamalar sorguda kaynağıdır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="1cd9d-211">Dizin arama yeterli genellikle, bir tablo olarak eksik dizinler bildirimleri taramasını.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="1cd9d-212">Bir arama yeterli, bu örnekte, bir tarama hello seçili sorgu planı kullanır:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Eksik dizinler içeren bir sorgu planı](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="1cd9d-214">Azure SQL veritabanı Bul ve koşullar dizin düzeltme ortak eksik yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="1cd9d-215">Azure SQL veritabanına yerleşik Dmv'leri içinde bir dizin önemli ölçüde hello tahmini maliyet toorun bir sorgu azaltabilir sorgu derlemelerinin arayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="1cd9d-216">Sorgu yürütme sırasında her sorgu planı ne sıklıkta yürütülen SQL veritabanı izler ve burada bu dizin mevcut olan bir sorgu planı ve hello yürütme hello arasındaki boşluğu tasarlandı parçaları hello tahmini.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="1cd9d-217">Genel iş yükü maliyet veritabanı ve onun gerçek iş yükü için hangi değişikliklerin tooyour fiziksel veritabanı tasarım iyileştirebilir bu Dmv'leri tooquickly tahmin kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="1cd9d-218">Bu sorgu tooevaluate olası dizinleri eksik kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="1cd9d-219">Bu örnekte, bu önerisine hello sorgu sonuçlandı:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="1cd9d-220">Oluşturulduktan sonra aynı SELECT deyimi bir tarama yerine bir arama kullanan ve hello planı daha verimli bir şekilde yürütür farklı bir plan seçer:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Düzeltilmiş dizinleri içeren bir sorgu planı](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="1cd9d-222">Merhaba anahtar Insight bu hello paylaşılan g/ç kapasitesi, ticari sistem daha kısıtlı bir adanmış sunucu makine,.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="1cd9d-223">Gereksiz g/ç tootake en büyük avantajlarından hello DTU hello sistemdeki her hello Azure SQL Database hizmet katmanlarına yönelik performans düzeyinin en aza üzerinde bir premium yoktur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="1cd9d-224">Önemli ölçüde uygun fiziksel veritabanı tasarım seçenekleri tek tek sorgular için hello gecikme süresini artırmak, Ölçek birimi işlenen eş zamanlı isteklerin hello verimini artırmak ve hello maliyetleri gerekli toosatisfy hello sorgu en aza.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="1cd9d-225">Dizin Dmv'leri eksik hello hakkında daha fazla bilgi için bkz: [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="1cd9d-226">Sorgu ayarlama ve ipuçları</span><span class="sxs-lookup"><span data-stu-id="1cd9d-226">Query tuning and hinting</span></span>
<span data-ttu-id="1cd9d-227">Azure SQL veritabanında Hello sorgu iyileştiricisi benzer toohello geleneksel SQL Server sorgu iyileştiricisi ' dir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="1cd9d-228">Sorgular ve hello sorgu iyileştiricisi modeli sınırlamalar da akıl anlama hello ayarlama hello en iyi yöntemler çoğunu tooAzure SQL veritabanı uygulayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="1cd9d-229">Azure SQL Database sorguları ayarlamak, birleşik kaynak taleplerini azaltma hello ek bir avantaja alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="1cd9d-230">Daha düşük bir performans düzeyinde çalışabildiğinden uygulamanızı karıncalı gösteren eşdeğer bir daha düşük bir maliyetle mümkün toorun olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="1cd9d-231">SQL Server'da ortak ve tooAzure SQL veritabanı da geçerli nasıl hello sorgu iyileştiricisi "sızar" parametreleri örneğidir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="1cd9d-232">Derleme sırasında daha uygun bir sorgu planı oluşturabilir olmadığını hello sorgu iyileştiricisi hello geçerli bir parametre toodetermine değerini değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="1cd9d-233">Bu stratejinin önemli ölçüde daha hızlı bir şekilde bilinen parametre değerlerini derlenmiş bir planı tooa sorgu planı genellikle açabilir ancak şu anda imperfectly her ikisi de çalıştığını SQL Server ve Azure SQL veritabanı.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="1cd9d-234">Bazen hello parametresi sniffed değil ve bazen hello parametresi sniffed ancak hello oluşturulan plan hello tam bir iş yükü parametre değerleri kümesi için yetersiz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="1cd9d-235">Microsoft hedefi daha bilinçli olarak belirtin ve parametre algılaması hello varsayılan davranışı geçersiz kılma sorgulama ipuçlarını (yönergeleri) içerir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="1cd9d-236">Genellikle, ipuçlarını kullanırsanız, belirli bir müşteri iş yükü için kusurlu hello varsayılan SQL Server veya Azure SQL veritabanı davranış olduğu durumlar düzeltebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="1cd9d-237">hello Sorgu işlemcisi hem performans ve kaynak gereksinimleri için uygun olmayan bir planı nasıl oluşturacağınız Hello sonraki örnek gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="1cd9d-238">Bu örnek bir sorgu ipucu kullanırsanız, SQL veritabanınız için sorgu çalıştırma zaman ve kaynak gereksinimlerini azaltmak de gösterir:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="1cd9d-239">Merhaba Kurulum kodu, veri dağıtımı eğri bir tablo oluşturur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="1cd9d-240">Merhaba en iyi sorgu planı farklı hangi parametresini seçili temel.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="1cd9d-241">Ne yazık ki, önbelleğe alma davranışı hello planı her zaman hello sorgu hello en yaygın parametre değerine göre yeniden derleyin değil.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="1cd9d-242">Bu nedenle, önbelleğe alınan ve hatta farklı bir plan daha iyi bir plan seçim ortalama olabilir birden fazla değer için kullanılan bir yetersiz planı toobe için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="1cd9d-243">Daha sonra özel sorgu ipucu varsa ancak bu, aynı olan iki saklı yordamlar hello sorgu planı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="1cd9d-244">**Örneğin, bölüm 1**</span><span class="sxs-lookup"><span data-stu-id="1cd9d-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="1cd9d-245">**Örneğin, bölüm 2**</span><span class="sxs-lookup"><span data-stu-id="1cd9d-245">**Example, part 2**</span></span>

<span data-ttu-id="1cd9d-246">(Merhaba sonuçları telemetri verilerini kaynaklanan hello ayrı; böylece hello örnek 2 parçası başlamadan önce en az 10 dakika bekleyin öneririz.)</span><span class="sxs-lookup"><span data-stu-id="1cd9d-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="1cd9d-247">Bu örnekte her bir parçasını toorun parametreli INSERT deyiminin 1.000 kez çalışır (toogenerate yeterli yük toouse sınama veri kümesi olarak).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="1cd9d-248">Saklı yordamlar yürütüldüğünde, hello Sorgu işlemcisi toohello yordamı (parametre "algılaması"), ilk derleme sırasında geçirilen hello parametre değeri inceler.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="1cd9d-249">Merhaba işlemci hello elde edilen planı önbelleğe alır ve hello parametre değeri farklı olsa bile sonraki etkinleştirmeleri için kullanır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="1cd9d-250">tüm durumlarda Hello en iyi planı kullanılmayabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="1cd9d-251">Bazen tooguide hello iyileştirici toopick zaman hello sorgu önce derlenen gelen hello belirli talebi yerine hello ortalama çalışması için daha iyi bir plan gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="1cd9d-252">Bu örnekte, tüm satırları toofind hello parametreyle eşleşen her değeri okuyan bir "tarama" planı hello ilk planı oluşturur:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Bir tarama planı kullanarak ayarlama sorgulama](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="1cd9d-254">Biz hello değeri 1 kullanılarak hello yordamı yürütülen çünkü hello elde edilen planı başlangıç değeri 1'için en iyi ancak hello tablosundaki diğer tüm değerler için yetersiz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="1cd9d-255">Her plan rastgele hello planda daha yavaş çalışır ve daha fazla kaynak kullandığı için toopick olsaydı istiyor Hello sonuç olası değil.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="1cd9d-256">Merhaba test ile çalıştırırsanız `SET STATISTICS IO` çok ayarlamak`ON`, bu örnekte hello mantıksal tarama iş hello arka planda gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="1cd9d-257">1,148 okuma (Merhaba ortalama tooreturn yalnızca bir satır durumda verimsiz) hello plan tarafından yapılan olduğunu görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Mantıksal bir tarama kullanarak ayarlama sorgulama](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="1cd9d-259">Merhaba örneği Hello ikinci bölümü hello derleme işlemi sırasında bir sorgu ipucu tootell hello iyileştirici toouse belirli bir değeri kullanır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="1cd9d-260">Bu durumda, hello parametre olarak geçirilen hello Sorgu işlemcisi tooignore hello değeri zorlar ve bunun yerine tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="1cd9d-261">Bu hello ortalama sıklığını (Eğme yoksayar) hello tablosunda yok tooa değeri ifade eder.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="1cd9d-262">Merhaba elde edilen planı daha hızlıdır ve bölüm bu örnek 1 ortalama olarak hello planı'den daha az kaynak kullanan bir arama tabanlı planı şöyledir:</span><span class="sxs-lookup"><span data-stu-id="1cd9d-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Bir sorgu ipucunu kullanarak sorguyu ayarlamayı](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="1cd9d-264">Merhaba hello aslında görebilirsiniz **sys.resource_stats** tablosu (Merhaba test ve ne zaman hello veri hello tablo doldurur yürütme hello zamandan bir gecikme olur).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="1cd9d-265">Bu örnek, hello 22:25:00 zaman penceresi sırasında yürütülen bölüm 1 ve 2. Bölüm 22:35: 00'dan yürütüldü.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="1cd9d-266">Merhaba önceki zaman penceresi daha fazla kaynak (nedeniyle plan Verimlilik geliştirmeleri) sonraki bir hello daha konusu zaman penceresi kullanılır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Sorgu ayarlama örneği sonuçları](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="1cd9d-268">Bu örnekte Hello birim özellikle küçük olsa da, yetersiz parametreleri hello etkisini özellikle büyük veritabanları üzerinde önemli olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="1cd9d-269">aşırı durumlarda Hello fark hızlı durumlarda saniye ile yavaş durumlarda saat arasında olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="1cd9d-270">İnceleyebilirsiniz **sys.resource_stats** toodetermine olup hello kaynak testi için başka bir test daha az veya daha fazla kaynak kullanır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="1cd9d-271">Veri karşılaştırdığınızda, böylece hello olmadıkları hello zamanlama testleri ayrı hello aynı 5 dakikalık penceresinde **sys.resource_stats** görünümü.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="1cd9d-272">Merhaba hello alıştırma toominimize hello toplam miktarı, kullanılan kaynakların ve toominimize hello yoğun kaynakları değil hedefidir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="1cd9d-273">Genellikle, bir gecikme için kod parçasını iyileştirme Ayrıca kaynak tüketimini azaltır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="1cd9d-274">Tooan uygulama hello değişiklikler gereklidir ve hello değişiklikler sorgulama ipuçlarını hello uygulamada kullanabilecek birinin hello müşteri deneyimini olumsuz etkilemez emin olun.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="1cd9d-275">Bir iş yükü sorgularını yineleme kümesi varsa, genellikle bu algılama toocapture yapar ve hello en düşük kaynak boyutu birimi gerekli toohost hello veritabanı sürücüleri olduğundan planı seçenekleriniz, hello en iyi hale getirme doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="1cd9d-276">Bazen, doğrulama sonra bunlar değil düşürülmüş olduğundan emin olun toohelp hello planları yeniden gözden geçirin.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="1cd9d-277">Hakkında daha fazla bilgiyi [sorgulama ipuçlarını (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="1cd9d-278">Veritabanları arası parçalama</span><span class="sxs-lookup"><span data-stu-id="1cd9d-278">Cross-database sharding</span></span>
<span data-ttu-id="1cd9d-279">Azure SQL veritabanı ticari donanım üzerinde çalıştığından, tek bir veritabanı için kapasite limitlerini hello geleneksel şirket içi SQL Server yüklemesi için daha düşük.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="1cd9d-280">Merhaba işlemlerini tek bir Azure SQL veritabanı veritabanında hello sınırları içinde uygun olmayan bazı müşteriler birden fazla veritabanı parçalama teknikleri toospread veritabanı işlemleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="1cd9d-281">Azure SQL veritabanı'nda parçalama teknikleri kullanan çoğu müşteri verilerini tek bir boyuttaki birden çok veritabanı arasında bölün.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="1cd9d-282">Bu yaklaşım, OLTP uygulamalar genellikle tooonly bir satır veya tooa küçük grup hello şema satır uygulamak işlemleri gerçekleştirmek toounderstand gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="1cd9d-283">SQL veritabanı artık bir kitaplık tooassist parçalama ile sağlar.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="1cd9d-284">Daha fazla bilgi için bkz: [esnek veritabanı istemci kitaplığına genel bakış](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="1cd9d-285">Bir veritabanında müşteri adı, sipariş ve (SQL Server ile birlikte gelen geleneksel örnek Northwind veritabanı hello gibi) sipariş ayrıntılarını varsa, örneğin, size bu verileri birden çok veritabanlarına hello müşteriyle gruplandırarak bölebilir ilgili sipariş ve Sipariş Ayrıntısı bilgi.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="1cd9d-286">Merhaba müşterinin verileri tek bir veritabanında kalır garanti edebilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="1cd9d-287">Merhaba uygulaması hello yük birden çok veritabanı arasında etkili bir şekilde yayılmak veritabanları arasında farklı müşterilere ayırırsınız.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="1cd9d-288">Parçalama ile müşteriler yalnızca hello en fazla veritabanı boyut sınırına önleyebilirsiniz ancak Azure SQL veritabanı da işlenebilecek içine tek tek her veritabanı uygun sürece hello farklı performans düzeylerini hello sınırlardan önemli ölçüde daha büyük iş yüklerini kendi DTU.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="1cd9d-289">Veritabanı parçalama bir çözüm için hello birleşik kaynak kapasitesini azaltmaz ancak birden fazla veritabanı yayılır çok büyük çözümlerde destekleyen en son derece etkili olur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="1cd9d-290">Her veritabanı bir farklı performans düzeyi toosupport çok büyük, yüksek kaynak gereksinimleri "etkin" veritabanları adresindeki çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="1cd9d-291">İşlev bölümlendirme</span><span class="sxs-lookup"><span data-stu-id="1cd9d-291">Functional partitioning</span></span>
<span data-ttu-id="1cd9d-292">SQL Server kullanıcıları genellikle tek bir veritabanında birçok işlevini birleştirin.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="1cd9d-293">Örneğin, bir uygulama bir mağaza için mantığı toomanage Envanter varsa, bu veritabanı izleme satınalma siparişi, saklı yordamları ve ayın son bildirdikleri yönetmek dizinlenmiş veya gerçekleştirilmiş görünümler stok ile ilişkili mantığı sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="1cd9d-294">Bu teknik daha kolay tooadminister hello veritabanı yedekleme gibi işlemleri için kolaylaştırır, ancak aynı zamanda bir uygulamanın tüm işlevlerinin, toosize hello donanım toohandle hello yoğun yük gerektirir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="1cd9d-295">Azure SQL veritabanı genişleme mimarisinde kullanmak iyi bir fikir toosplit farklı işlevler farklı veritabanlarına bir uygulama olur.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="1cd9d-296">Bu yöntemi kullanarak, her uygulama bağımsız olarak ölçekler.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="1cd9d-297">Hello Yöneticisi uygulama yoğun olur (ve hello veritabanını artış üzerindeki yükü hello gibi), her işlevin bağımsız performans düzeyleri hello uygulamada seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="1cd9d-298">Bu mimari ile Merhaba sınırı, bir uygulama birden fazla makine arasında hello yük yayıldığı için tek Emtia makine işleyebileceğinden daha büyük olamaz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="1cd9d-299">Toplu sorguları</span><span class="sxs-lookup"><span data-stu-id="1cd9d-299">Batch queries</span></span>
<span data-ttu-id="1cd9d-300">Yüksek hacimli kullanarak veri erişim uygulamalar için sık, geçici sorgulama, yanıt süresini önemli miktarda hello uygulama katmanı ve hello Azure SQL veritabanı katmanı arasındaki ağ iletişimi harcanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="1cd9d-301">Bile her ikisi de hello zaman aynı veri merkezinde, hello ağ gecikmesi hello iki arasında çok sayıda veri erişim işlemleri tarafından büyütülmüş hello uygulama ve Azure SQL veritabanı arasındadır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="1cd9d-302">tooreduce hello ağ gidiş dönüşleri hello veri erişim işlemleri, hello seçeneği tooeither toplu hello geçici sorgular veya toocompile kullanmayı bunları saklı yordamlar.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="1cd9d-303">Merhaba geçici sorguları toplu, tek seyahat tooAzure SQL veritabanı bir büyük toplu olarak birden çok sorgu gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="1cd9d-304">Saklı yordamdaki geçici sorgular derleme varsa bunları toplu olarak aynı neden hello elde.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="1cd9d-305">Saklı yordam ayrıca hello kullanabilmeniz için Azure SQL veritabanında hello sorgu planları önbelleğe alma hello olasılığını artırmak yararı hello verir kullanarak yeniden saklı yordamı.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="1cd9d-306">Bazı uygulamalar yazma yoğunluklu.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-306">Some applications are write-intensive.</span></span> <span data-ttu-id="1cd9d-307">Bazen toobatch birlikte yazılma dikkate alarak bir veritabanı hello toplam g/ç yükünü azaltabilir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="1cd9d-308">Genellikle, bu saklı yordamları ve geçici toplu otomatik tamamlama işlemlerini yerine açık işlemleri kullanmanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="1cd9d-309">Kullanabileceğiniz farklı teknikleri değerlendirme için bkz: [teknikleri Azure SQL veritabanı uygulamaları için toplu işleme](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="1cd9d-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="1cd9d-310">Toplu işleme için kendi iş yükü toofind hello sağ modeli deneme.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="1cd9d-311">Bir model olabilir emin toounderstand olması biraz farklı işlem tutarlılığı garanti altına alır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="1cd9d-312">Kaynak kullanımını en aza indiren hello sağ iş yükü bulma tutarlılık ve performans dengelemeler doğru bileşimini hello bulma gerektirir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="1cd9d-313">Uygulama katmanı önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="1cd9d-313">Application-tier caching</span></span>
<span data-ttu-id="1cd9d-314">Bazı veritabanı uygulamaları okuma yoğun iş yükleri vardır.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="1cd9d-315">Katmanlar önbelleğe alma hello veritabanında hello yük ve potansiyel olarak hello performans düzeyi gerekli toosupport bir veritabanını Azure SQL veritabanı kullanarak azaltmak.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="1cd9d-316">İle [Azure Redis önbelleği](https://azure.microsoft.com/services/cache/), okuma ağır iş yükü varsa, bir kez hello veri okuma (ya da belki nasıl yapılandırıldığına bağlı olarak bir kez uygulama katmanı makine başına,), SQL veritabanınızın dışındaki verileri depolamak ve.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="1cd9d-317">Bu şekilde tooreduce veritabanı Yükü (CPU ve okuma g/ç), ancak işlem tutarlılığı üzerinde bir etkisi hello önbellekten okunan hello verileri eşitlenmemiş hello veritabanındaki hello verilerle olabileceğinden.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="1cd9d-318">Birçok uygulamada belirli bir düzeyde tutarsızlık kabul edilebilir olmasına rağmen tüm iş yükleri için geçerli değildir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="1cd9d-319">Bir uygulama katmanı önbelleğe alma stratejisi uygulamadan önce herhangi bir uygulama gereksinimi tam olarak anlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1cd9d-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1cd9d-320">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="1cd9d-320">Next steps</span></span>
* <span data-ttu-id="1cd9d-321">Hizmet katmanları hakkında daha fazla bilgi için bkz: [SQL Database seçenekleri ve performansı](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="1cd9d-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="1cd9d-322">Esnek havuzları hakkında daha fazla bilgi için bkz: [Azure bir esnek havuz nedir?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="1cd9d-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="1cd9d-323">Performans ve esnek havuzları hakkında daha fazla bilgi için bkz: [zaman tooconsider bir esnek havuz](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="1cd9d-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

