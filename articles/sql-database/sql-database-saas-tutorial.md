---
title: "Dağıtma ve Azure SQL Database kullanan çok kiracılı Wingtip SaaS uygulama keşfetme | Microsoft Docs"
description: "Dağıtma ve Azure SQL veritabanı kullanarak SaaS desenleri gösteren Wingtip SaaS çok kiracılı uygulama keşfedin."
keywords: "sql veritabanı öğreticisi"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="d3651-104">Dağıtma ve Azure SQL veritabanı - Wingtip SaaS kullanan çok kiracılı uygulama keşfedin</span><span class="sxs-lookup"><span data-stu-id="d3651-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="d3651-105">Bu öğreticide dağıtın ve Wingtip SaaS uygulamasına keşfedin.</span><span class="sxs-lookup"><span data-stu-id="d3651-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="d3651-106">Uygulama, birden fazla kiracıya hizmet vermek için SaaS uygulama düzeni olan kiracı başına veritabanı kullanır.</span><span class="sxs-lookup"><span data-stu-id="d3651-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="d3651-107">Uygulama, etkinleştirme SaaS senaryoları basitleştirmek Azure SQL veritabanı özelliklerini göstermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="d3651-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="d3651-108">Aşağıdaki *Azure'a Dağıt* düğmesine tıkladıktan beş dakika sonra, bulutta çalışır durumda olan ve SQL Veritabanı’nı kullanan çok kiracılı bir SaaS uygulamanız olur.</span><span class="sxs-lookup"><span data-stu-id="d3651-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="d3651-109">Uygulama, her bir SQL esnek havuza tüm dağıtılan kendi veritabanına sahip üç örnek kiracıları ile dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="d3651-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="d3651-110">Uygulama keşfedin ve tek tek uygulama bileşenleri ile çalışmak için tam erişim vererek Azure aboneliğinize dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="d3651-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="d3651-111">Uygulama kaynak kodu ve yönetim komut dosyaları WingtipSaaS GitHub depo kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="d3651-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="d3651-112">Bu öğreticide şunları öğrenirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d3651-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="d3651-113">Wingtip SaaS uygulamasına dağıtma</span><span class="sxs-lookup"><span data-stu-id="d3651-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="d3651-114">Uygulama kaynak koduna ve yönetim komut dosyaları nereden</span><span class="sxs-lookup"><span data-stu-id="d3651-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="d3651-115">Uygulamayı oluşturan sunucular, havuzlar ve veritabanları hakkında bilgi</span><span class="sxs-lookup"><span data-stu-id="d3651-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="d3651-116">Kiracıların kendi veri ile nasıl eşlendiğini *Kataloğu*</span><span class="sxs-lookup"><span data-stu-id="d3651-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="d3651-117">Yeni bir kiracı sağlama</span><span class="sxs-lookup"><span data-stu-id="d3651-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="d3651-118">Uygulamasında Kiracı Etkinlik izleme</span><span class="sxs-lookup"><span data-stu-id="d3651-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="d3651-119">Çeşitli SaaS tasarım ve yönetim düzenlerini keşfetmek için bu ilk dağıtımı temel alan bir [dizi ilgili öğretici](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d3651-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="d3651-120">Öğreticilerde ilerlerken, sağlanan betikleri ayrıntılı şekilde inceleyin ve farklı SaaS düzenlerinin nasıl uygulandığını araştırın.</span><span class="sxs-lookup"><span data-stu-id="d3651-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="d3651-121">SaaS uygulamalarının geliştirilmesini basitleştiren birçok SQL Veritabanı özelliğinin nasıl uygulandığını ayrıntılı olarak anlamak için öğreticilerdeki betiklerde adım adım ilerleyin.</span><span class="sxs-lookup"><span data-stu-id="d3651-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d3651-122">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="d3651-122">Prerequisites</span></span>

<span data-ttu-id="d3651-123">Bu öğreticiyi tamamlamak için aşağıdaki ön koşulların karşılandığından emin olun:</span><span class="sxs-lookup"><span data-stu-id="d3651-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="d3651-124">Azure PowerShell’in yüklendiğinden.</span><span class="sxs-lookup"><span data-stu-id="d3651-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="d3651-125">Ayrıntılar için bkz. [Azure PowerShell’i kullanmaya başlama](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="d3651-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="d3651-126">Wingtip SaaS uygulamasına dağıtmak</span><span class="sxs-lookup"><span data-stu-id="d3651-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="d3651-127">Wingtip dağıtmak SaaS uygulama:</span><span class="sxs-lookup"><span data-stu-id="d3651-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="d3651-128">Tıklatarak **Azure'a Dağıt** düğme Wingtip SaaS dağıtım şablonu için Azure Portalı'nı açar.</span><span class="sxs-lookup"><span data-stu-id="d3651-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="d3651-129">Şablonu iki parametre değerlerini gerektirir; Yeni bir kaynak grubu için bir ad ve bu dağıtım Wingtip SaaS uygulamasının diğer dağıtımlardan ayıran bir kullanıcı adı.</span><span class="sxs-lookup"><span data-stu-id="d3651-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="d3651-130">Sonraki adım, bu değerleri ayarlamak için Ayrıntılar sağlar.</span><span class="sxs-lookup"><span data-stu-id="d3651-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="d3651-131">Bunları daha sonra bir yapılandırma dosyasına girmeniz gerekir çünkü kullanın, tam değerlerini not emin olun.</span><span class="sxs-lookup"><span data-stu-id="d3651-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="d3651-132">Dağıtım için gerekli parametre değerlerini girin:</span><span class="sxs-lookup"><span data-stu-id="d3651-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="d3651-133">Gösterim amaçları doğrultusunda bazı kimlik doğrulama işlemlerinin ve sunucu güvenlik duvarlarının güvenliği kasıtlı olarak kaldırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="d3651-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="d3651-134">**Yeni bir kaynak grubu oluşturma**ve mevcut kaynak grupları, sunucular veya havuzları kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="d3651-135">Bu uygulama ya da oluşturur, herhangi bir kaynağa üretim için kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="d3651-136">İlgili faturalandırmayı durdurmak için uygulamayla işiniz bittiğinde bu kaynak grubunu silin.</span><span class="sxs-lookup"><span data-stu-id="d3651-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="d3651-137">**Kaynak grubu** - seçin **Yeni Oluştur** ve sağlayan bir **adı** kaynak grubu için.</span><span class="sxs-lookup"><span data-stu-id="d3651-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="d3651-138">Seçin bir **konumu** aşağı açılan listeden.</span><span class="sxs-lookup"><span data-stu-id="d3651-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="d3651-139">**Kullanıcı** -bazı kaynaklar genel benzersiz adlar gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d3651-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="d3651-140">Benzersizlik emin olmak için dağıttığınız her uygulama sağlamasına Wingtip uygulama herhangi başka bir dağıtım tarafından oluşturulan kaynaklardan oluşturma kaynakları ayırt etmek için bir değer.</span><span class="sxs-lookup"><span data-stu-id="d3651-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="d3651-141">Adınız ve soyadınızın baş harfleri ile bir sayı gibi kısa bir **Kullanıcı** adının (örneğin, *bg1*) tercih edilmesi ve ardından bunun kaynak grubu adında (örneğin, *wingtip-bg1*) kullanılması önerilir.</span><span class="sxs-lookup"><span data-stu-id="d3651-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="d3651-142">**Kullanıcı** parametresi yalnızca harf, rakam ve kısa çizgi (boşluksuz) içerebilir.</span><span class="sxs-lookup"><span data-stu-id="d3651-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="d3651-143">İlk ve son karakteri bir harf ya da sayı olmalıdır (tümünün küçük harf olması önerilir).</span><span class="sxs-lookup"><span data-stu-id="d3651-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="d3651-144">**Uygulamayı dağıtın**.</span><span class="sxs-lookup"><span data-stu-id="d3651-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="d3651-145">Hüküm ve koşulları kabul için tıklatın.</span><span class="sxs-lookup"><span data-stu-id="d3651-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="d3651-146">**Satın al**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="d3651-147">**Bildirimler**’e (arama kutusunun sağındaki zil simgesi) tıklayarak dağıtım durumunu izleyin.</span><span class="sxs-lookup"><span data-stu-id="d3651-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="d3651-148">Wingtip SaaS uygulama dağıtma yaklaşık beş dakika sürer.</span><span class="sxs-lookup"><span data-stu-id="d3651-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![dağıtım başarılı](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="d3651-150">Karşıdan yükleme ve Wingtip SaaS betikleri Engellemeyi Kaldır</span><span class="sxs-lookup"><span data-stu-id="d3651-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="d3651-151">Uygulama dağıtımı sırasında kaynak kodu ve yönetim komut dosyaları indirin.</span><span class="sxs-lookup"><span data-stu-id="d3651-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d3651-152">ZIP dosyaları bir dış kaynaktan yüklediğiniz ve açtığınız zaman yürütülebilir içeriği (komut dosyaları, DLL'ler) Windows tarafından engellenmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="d3651-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="d3651-153">Komut dosyaları zip dosyasından çıkarılırken, .zip dosyasını ayıklanıyor önce engellemesini kaldırmak için aşağıdaki adımları izleyin.</span><span class="sxs-lookup"><span data-stu-id="d3651-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="d3651-154">Bu komut dosyalarını çalıştırma izni sağlar.</span><span class="sxs-lookup"><span data-stu-id="d3651-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="d3651-155">Gözat [Wingtip SaaS github deposuna](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="d3651-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="d3651-156">Tıklatın **Kopyala veya indir**.</span><span class="sxs-lookup"><span data-stu-id="d3651-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="d3651-157">Tıklatın **ZIP'i indir** ve dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="d3651-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="d3651-158">Sağ **WingtipSaaS-master.zip** dosyasını bulun ve seçin **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="d3651-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="d3651-159">Üzerinde **genel** sekmesine **Engellemeyi Kaldır**, tıklatıp **Uygula**.</span><span class="sxs-lookup"><span data-stu-id="d3651-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="d3651-160">**Tamam** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-160">Click **OK**.</span></span>
1. <span data-ttu-id="d3651-161">Dosyaları ayıklayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-161">Extract the files.</span></span>

<span data-ttu-id="d3651-162">Komut dosyaları içinde bulunur *... \\WingtipSaaS ana\\öğrenme modülleri* klasör.</span><span class="sxs-lookup"><span data-stu-id="d3651-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="d3651-163">Bu dağıtım için yapılandırma dosyasını güncelleştir</span><span class="sxs-lookup"><span data-stu-id="d3651-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="d3651-164">Herhangi bir betiği çalıştırmadan önce ayarlayın *kaynak grubu* ve *kullanıcı* değerler **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="d3651-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="d3651-165">Dağıtım sırasında ayarlanan değerleri için bu değişkenleri ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="d3651-166">*PowerShell ISE*’de ...\\Öğrenme Modülleri\\*UserConfig.psm1*’i açın</span><span class="sxs-lookup"><span data-stu-id="d3651-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="d3651-167">Güncelleştirme *ResourceGroupName* ve *adı* (10 ve 11 yalnızca satırlarındaki) dağıtımınız belirli değerleri içeren.</span><span class="sxs-lookup"><span data-stu-id="d3651-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="d3651-168">Değişiklikleri kaydedin!</span><span class="sxs-lookup"><span data-stu-id="d3651-168">Save the changes!</span></span>

<span data-ttu-id="d3651-169">Bu ayarı burada basitçe, her komut dosyası bu dağıtım özgü değerleri güncelleştirmek zorunda kalmaktan tutar.</span><span class="sxs-lookup"><span data-stu-id="d3651-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="d3651-170">Uygulamayı çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d3651-170">Run the application</span></span>

<span data-ttu-id="d3651-171">Uygulama, etkinliklerin düzenlendiği konser salonları, caz kulüpleri, spor kulüpleri gibi mekanları gösterir.</span><span class="sxs-lookup"><span data-stu-id="d3651-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="d3651-172">Görebildikleri olayları listelemek ve bilet satabilir kolay bir yol için müşterinin (veya) Wingtip platformun kaydedin.</span><span class="sxs-lookup"><span data-stu-id="d3651-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="d3651-173">Her mekan, etkinliklerini yönetmek ve bilet satmak için diğer kiracılardan bağımsız ve ayrı olan kişiselleştirilmiş bir web uygulaması alır.</span><span class="sxs-lookup"><span data-stu-id="d3651-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="d3651-174">Her bir kiracı perde arkasında SQL esnek havuza dağıtılan bir SQL veritabanı alır.</span><span class="sxs-lookup"><span data-stu-id="d3651-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="d3651-175">Merkezi bir **Olay Hub’ı**, dağıtımınıza özel kiracı URL’lerinin bir listesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="d3651-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="d3651-176">Açık _olay hub'ı_ web tarayıcınızda: http://events.wtp.&lt; Kullanıcı&gt;. trafficmanager.net (dağıtımınızın kullanıcı adıyla değiştirin):</span><span class="sxs-lookup"><span data-stu-id="d3651-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![olay hub’ı](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="d3651-178">*Olay Hub’ında* **Fabrikam Caz Kulübü**’ne tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d3651-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Olaylar](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="d3651-180">Gelen istekleri, uygulamanın kullandığı dağıtımını denetlemek için [ *Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="d3651-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="d3651-181">Kiracıya özel olan etkinlikler sayfası, kiracı adlarının URL’lere dahil edilmesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d3651-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="d3651-182">Tüm kiracı URL’leri, özel *Kullanıcı* değerinizi içerir ve şu biçimi takip eder: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="d3651-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="d3651-183">Etkinlikler uygulaması, kiracı adını URL’den ayrıştırır ve [*parça eşleme yönetimini*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management) kullanarak bir kataloğa erişim sağlayacak anahtar oluşturmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="d3651-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="d3651-184">Katalog kiracının veritabanı konumu için anahtar eşler.</span><span class="sxs-lookup"><span data-stu-id="d3651-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="d3651-185">**Olay hub'ı** URL'lerin listesini sağlamak üzere her bir veritabanı ile ilişkili kiracının adını almak için genişletilmiş meta veri Kataloğu'nda kullanır.</span><span class="sxs-lookup"><span data-stu-id="d3651-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="d3651-186">Üretim ortamında, [*şirket internet etki alanının*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) trafik yöneticisi profilini göstermesi için genellikle bir CNAME DNS kaydı oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="d3651-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="d3651-187">Kiracı veritabanları üzerinde yük oluşturmaya başlama</span><span class="sxs-lookup"><span data-stu-id="d3651-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="d3651-188">Uygulamanın dağıtıldığı, şimdi uygulamaya koyun!</span><span class="sxs-lookup"><span data-stu-id="d3651-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="d3651-189">*Demo LoadGenerator* PowerShell komut dosyasını tüm Kiracı veritabanları karşı çalışan bir iş yükünü başlatır.</span><span class="sxs-lookup"><span data-stu-id="d3651-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="d3651-190">Birçok SaaS uygulamalarını gerçek Yük genellikle durumlarıyla ve tahmin edilemez.</span><span class="sxs-lookup"><span data-stu-id="d3651-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="d3651-191">Bu tür yük benzetimini yapmak için tüm kiracılar, rastgele aralıklarla gerçekleşen her bir kiracı üzerinde rastgele WINS'e ile dağıtılmış bir yük üreteci oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d3651-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="d3651-192">Bu nedenle çıkmaya yük düzeni için birkaç dakika sürer, böylece yük izleme önce en az üç veya dört dakika çalıştırmak Oluşturucu izin vermek en iyisidir.</span><span class="sxs-lookup"><span data-stu-id="d3651-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="d3651-193">İçinde *PowerShell ISE*açın... \\Öğrenme modülleri\\yardımcı programları\\*Demo LoadGenerator.ps1* komut dosyası.</span><span class="sxs-lookup"><span data-stu-id="d3651-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="d3651-194">Betiği çalıştırmak ve yük oluşturucuyu başlatmak için **F5**’e basın (şimdilik varsayılan parametre değerlerini bırakın).</span><span class="sxs-lookup"><span data-stu-id="d3651-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d3651-195">Diğer komut dosyalarını çalıştırmak için yeni bir PowerShell ISE penceresi açın.</span><span class="sxs-lookup"><span data-stu-id="d3651-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="d3651-196">Yük oluşturucu, yerel PowerShell oturumunuzda bir dizi iş çalıştırıyor.</span><span class="sxs-lookup"><span data-stu-id="d3651-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="d3651-197">*Demo LoadGenerator.ps1* betik devreye bir ön plan görev artı arka plan yük oluşturma işleri bir dizi olarak çalışan gerçek yük Oluşturucu betik kapalı.</span><span class="sxs-lookup"><span data-stu-id="d3651-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="d3651-198">Bir yük Oluşturucu işi ve kataloğa kayıtlı her veritabanı için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="d3651-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="d3651-199">PowerShell oturumu kapatma tüm işleri durdurur şekilde işleri yerel PowerShell oturumunuzda çalışır.</span><span class="sxs-lookup"><span data-stu-id="d3651-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="d3651-200">Makinenizi askıya alırsanız yük oluşturma duraklatıldı ve, makineyi uyandırmak devam edecek.</span><span class="sxs-lookup"><span data-stu-id="d3651-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="d3651-201">Yük Oluşturucu yük oluşturma işleri her bir kiracı için çağırır. sonra ön plan görev, sonradan sağlanan yeni kiracılar için ek arka plan işleri başladığı bir işi çağırma durumda kalır.</span><span class="sxs-lookup"><span data-stu-id="d3651-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="d3651-202">Kullanabileceğiniz *Ctrl-C* veya basın *durdurmak* ön plan görevi Durdur düğmesine, ancak varolan arka plan işleri her veritabanı oluşturma devam edecek.</span><span class="sxs-lookup"><span data-stu-id="d3651-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="d3651-203">Gerekiyorsa izlemek ve arka plan işleri denetlemek, kullanma *Get-Job*, *Receive-Job* ve *işini durdurmayı*.</span><span class="sxs-lookup"><span data-stu-id="d3651-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="d3651-204">Ön plan Görev yürütülürken başka betikleri çalıştırmak için aynı PowerShell oturumunda kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="d3651-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="d3651-205">Diğer komut dosyalarını çalıştırmak için yeni bir PowerShell ISE penceresi açın.</span><span class="sxs-lookup"><span data-stu-id="d3651-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="d3651-206">Yük Oluşturucu oturumu yeniden başlatmak istiyorsanız, örneğin farklı parametrelerle ön plan görev durdurabilir ve yeniden çalıştırın *Demo LoadGenerator.ps1* komut dosyası.</span><span class="sxs-lookup"><span data-stu-id="d3651-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="d3651-207">Yeniden çalıştırmayı *Demo LoadGenerator.ps1* herhangi şu anda çalışan işler ve işleri geçerli parametrelerini kullanarak yeni bir dizi devreye Oluşturucu yeniden başlatır ilk durdurur.</span><span class="sxs-lookup"><span data-stu-id="d3651-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="d3651-208">Şimdilik, iş çağırma durumda çalışan yük Oluşturucu bırakın.</span><span class="sxs-lookup"><span data-stu-id="d3651-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="d3651-209">Yeni bir kiracı sağlama</span><span class="sxs-lookup"><span data-stu-id="d3651-209">Provision a new tenant</span></span>

<span data-ttu-id="d3651-210">İlk üç örnek kiracılar oluşturur, ancak bu dağıtılmış uygulamanın nasıl etkilediğini görmek için başka bir kiracı oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="d3651-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="d3651-211">Wingtip SaaS sağlama kiracılar iş akışı içinde ayrıntılı [sağlamak ve kataloğu Öğreticisi](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="d3651-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="d3651-212">Bu adımda, yeni bir kiracı hızla oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d3651-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="d3651-213">*PowerShell ISE’de* ...\\Öğrenme Modülleri\Sağlama ve Kataloğa Kaydetme\\*Demo-ProvisionAndCatalog.ps1*’i açın.</span><span class="sxs-lookup"><span data-stu-id="d3651-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="d3651-214">Tuşuna **F5** komut dosyasını çalıştırmak için (şu an için varsayılan değerleri bırakın).</span><span class="sxs-lookup"><span data-stu-id="d3651-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="d3651-215">Birçok Wingtip SaaS komut *$PSScriptRoot* diğer komut dosyalarında işlevleri çağırmak için klasörleri gezinme izin vermek için.</span><span class="sxs-lookup"><span data-stu-id="d3651-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="d3651-216">Tuşuna basarak komut çalıştırıldığında bu değişken yalnızca hesaplanan **F5**.</span><span class="sxs-lookup"><span data-stu-id="d3651-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="d3651-217">Vurgulama ve bir seçim çalıştıran (**F8**) neden hataları, bu nedenle basın **F5** betikleri çalışırken.</span><span class="sxs-lookup"><span data-stu-id="d3651-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="d3651-218">Yeni bir kiracı veritabanı bir SQL esnek havuzu oluşturulur, başlatılmış ve kataloğa kayıtlı.</span><span class="sxs-lookup"><span data-stu-id="d3651-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="d3651-219">Yeni Kiracı bilet satış başarılı sağladıktan sonra *olayları* sitesi tarayıcınızda görüntülenir:</span><span class="sxs-lookup"><span data-stu-id="d3651-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Yeni kiracı](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="d3651-221">Yenileme *olay hub'ı* ve yeni Kiracı şimdi listede görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d3651-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="d3651-222">Sunucuları, havuzları ve kiracı veritabanlarını öğrenme</span><span class="sxs-lookup"><span data-stu-id="d3651-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="d3651-223">Bir yük kiracılar koleksiyonu karşı çalışan başladıktan, dağıtılan kaynakların bazıları bakalım:</span><span class="sxs-lookup"><span data-stu-id="d3651-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="d3651-224">İçinde [Azure portal](http://portal.azure.com)SQL sunucuları listesine göz atın ve Aç **katalog -&lt;kullanıcı&gt;**  sunucu.</span><span class="sxs-lookup"><span data-stu-id="d3651-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="d3651-225">Katalog sunucusu iki veritabanı içerir.</span><span class="sxs-lookup"><span data-stu-id="d3651-225">The catalog server contains two databases.</span></span> <span data-ttu-id="d3651-226">**Tenantcatalog**ve **basetenantdb** (boş bir *altın* veya yeni kiracılar oluşturmak için kopyalanan şablon veritabanı).</span><span class="sxs-lookup"><span data-stu-id="d3651-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![veritabanları](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="d3651-228">SQL sunucu listesine geri gidin ve açmak **tenants1 -&lt;kullanıcı&gt;**  Kiracı veritabanlarını barındıran sunucu.</span><span class="sxs-lookup"><span data-stu-id="d3651-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="d3651-229">Her Kiracı veritabanı bir _esnek standart_ 50 eDTU standart havuzdaki veritabanı.</span><span class="sxs-lookup"><span data-stu-id="d3651-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="d3651-230">Ayrıca fark bir _kırmızı Akçaağaç yarış_ veritabanı, daha önce sağlanan Kiracı veritabanı.</span><span class="sxs-lookup"><span data-stu-id="d3651-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![sunucu](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="d3651-232">Havuzu izleme</span><span class="sxs-lookup"><span data-stu-id="d3651-232">Monitor the pool</span></span>

<span data-ttu-id="d3651-233">Yük oluşturucu birkaç dakikadır çalışıyorsa havuz ve veritabanlarında yerleşik olarak bulunan izleme olanaklarının bazılarını incelemeye başlamak için yeteri kadar verinin bulunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d3651-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="d3651-234">Sunucuya Gözat **tenants1 -&lt;kullanıcı&gt;**, tıklatıp **Pool1** (yük oluşturucuyu çalışan bir saat için aşağıdaki grafiklerde) havuz için kaynak kullanımı görüntülemek için:</span><span class="sxs-lookup"><span data-stu-id="d3651-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![havuzu izleme](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="d3651-236">Bu iki grafik, elastik havuzların ve SQL Veritabanı’nın SaaS uygulaması iş yükleri için ne kadar uygun olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="d3651-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="d3651-237">Her biri 40 eDTU’ya kadar geçiş yapabilen dört veritabanı, 50 eDTU havuzunda kolayca desteklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="d3651-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="d3651-238">Tek başına veritabanı olarak sağlanan varsa, her bir S2 olması gerekiyor yaptıkları (WINS'e desteklemek için 50 DTU).</span><span class="sxs-lookup"><span data-stu-id="d3651-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="d3651-239">4 tek başına S2 veritabanları maliyetini yaklaşık 3 kez fiyat havuzunun olacaktır ve havuzunun hala yeterli boş alan çok daha fazla veritabanı için vardır.</span><span class="sxs-lookup"><span data-stu-id="d3651-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="d3651-240">Gerçek dünya durumlarda, SQL veritabanı müşteriler 200 eDTU havuzu 500 veritabanlarında kadar şu anda çalışmıyor.</span><span class="sxs-lookup"><span data-stu-id="d3651-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="d3651-241">Daha fazla bilgi için [Performans izleme öğreticisini](sql-database-saas-tutorial-performance-monitoring.md) inceleyin.</span><span class="sxs-lookup"><span data-stu-id="d3651-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="d3651-242">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="d3651-242">Next steps</span></span>

<span data-ttu-id="d3651-243">Bu öğreticide şunları öğrendiniz:</span><span class="sxs-lookup"><span data-stu-id="d3651-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="d3651-244">Wingtip SaaS uygulamasına dağıtma</span><span class="sxs-lookup"><span data-stu-id="d3651-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="d3651-245">Uygulamayı oluşturan sunucular, havuzlar ve veritabanları hakkında bilgi</span><span class="sxs-lookup"><span data-stu-id="d3651-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="d3651-246">*Katalog* aracılığıyla kiracılar ve verilerinin eşleşmesi</span><span class="sxs-lookup"><span data-stu-id="d3651-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="d3651-247">Yeni kiracılar sağlama</span><span class="sxs-lookup"><span data-stu-id="d3651-247">How to provision new tenants</span></span>
> * <span data-ttu-id="d3651-248">Kiracı etkinliğini izlemek için havuz kullanımını görüntüleme</span><span class="sxs-lookup"><span data-stu-id="d3651-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="d3651-249">İlgili faturalandırmayı durdurmak için örnek kaynakları silme</span><span class="sxs-lookup"><span data-stu-id="d3651-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="d3651-250">Şimdi [Sağlama ve kataloğa kaydetme öğreticisini](sql-database-saas-tutorial-provision-and-catalog.md) inceleyin</span><span class="sxs-lookup"><span data-stu-id="d3651-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="d3651-251">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="d3651-251">Additional resources</span></span>

* <span data-ttu-id="d3651-252">Ek [Wingtip SaaS uygulamasının yapı öğreticileri](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="d3651-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="d3651-253">Elastik havuzlar hakkında bilgi edinmek için bkz. [*Azure SQL elastik havuzu nedir?*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="d3651-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="d3651-254">Esnek işler hakkında bilgi edinmek için bkz. [*Genişletilmiş bulut veritabanlarını yönetme*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span><span class="sxs-lookup"><span data-stu-id="d3651-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="d3651-255">Çok kiracılı SaaS uygulamaları hakkında bilgi edinmek için bkz. [*Çok kiracılı SaaS uygulamaları için tasarım düzenleri*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span><span class="sxs-lookup"><span data-stu-id="d3651-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
