---
title: "Bulut veritabanları arasında aaaDistributed işlemleri"
description: "Azure SQL Database esnek veritabanı işlemleri genel bakış"
services: sql-database
documentationcenter: 
author: torsteng
manager: jhubbard
editor: torsteng
ms.assetid: e14df7a3-7788-4cfb-bcd1-7ad6433ef1f9
ms.service: sql-database
ms.custom: scale out apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: sql-database
ms.date: 05/27/2016
ms.author: torsteng
ms.openlocfilehash: 9a18f2749108d337bf115b3dc21dd0c7828dd9c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-transactions-across-cloud-databases"></a><span data-ttu-id="19f37-103">Bulut veritabanlarında dağıtılmış işlemler</span><span class="sxs-lookup"><span data-stu-id="19f37-103">Distributed transactions across cloud databases</span></span>
<span data-ttu-id="19f37-104">Esnek veritabanı işlemleri için Azure SQL veritabanı (SQL DB) SQL DB birkaç veritabanlarında span toorun işlemleri izin verin.</span><span class="sxs-lookup"><span data-stu-id="19f37-104">Elastic database transactions for Azure SQL Database (SQL DB) allow you toorun transactions that span several databases in SQL DB.</span></span> <span data-ttu-id="19f37-105">Esnek veritabanı işlemleri için SQL DB ADO .NET kullanarak .NET uygulamaları için kullanılabilir ve hello kullanarak hello tanıdık programlama deneyimiyle tümleştirmenize [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) sınıfları.</span><span class="sxs-lookup"><span data-stu-id="19f37-105">Elastic database transactions for SQL DB are available for .NET applications using ADO .NET and integrate with hello familiar programming experience using hello [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) classes.</span></span> <span data-ttu-id="19f37-106">tooget hello kitaplığı bkz [.NET Framework 4.6.1 (Web Yükleyicisi)](https://www.microsoft.com/download/details.aspx?id=49981).</span><span class="sxs-lookup"><span data-stu-id="19f37-106">tooget hello library, see [.NET Framework 4.6.1 (Web Installer)](https://www.microsoft.com/download/details.aspx?id=49981).</span></span>

<span data-ttu-id="19f37-107">Şirket içinde böyle bir senaryo, Microsoft Dağıtılmış İşlem Düzenleyicisi (MSDTC) çalıştıran genellikle gereklidir.</span><span class="sxs-lookup"><span data-stu-id="19f37-107">On premises, such a scenario usually required running Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="19f37-108">MSDTC Azure hizmet olarak Platform uygulama için kullanılabilir olmadığından, hello özelliği toocoordinate dağıtılmış işlemler artık doğrudan bütünleştirilmiştir SQL Veritabanına.</span><span class="sxs-lookup"><span data-stu-id="19f37-108">Since MSDTC is not available for Platform-as-a-Service application in Azure, hello ability toocoordinate distributed transactions has now been directly integrated into SQL DB.</span></span> <span data-ttu-id="19f37-109">Uygulamaları tooany SQL veritabanı toolaunch dağıtılmış işlemleri bağlanabilir ve hello veritabanlarından birini saydam hello dağıtılmış işlem hello aşağıdaki şekilde gösterildiği gibi koordine.</span><span class="sxs-lookup"><span data-stu-id="19f37-109">Applications can connect tooany SQL Database toolaunch distributed transactions, and one of hello databases will transparently coordinate hello distributed transaction, as shown in hello following figure.</span></span> 

  ![<span data-ttu-id="19f37-110">Dağıtılmış işlemler Azure SQL Database esnek veritabanı işlemleri kullanma</span><span class="sxs-lookup"><span data-stu-id="19f37-110">Distributed transactions with Azure SQL Database using elastic database transactions</span></span> ][1]

## <a name="common-scenarios"></a><span data-ttu-id="19f37-111">Genel senaryolar</span><span class="sxs-lookup"><span data-stu-id="19f37-111">Common scenarios</span></span>
<span data-ttu-id="19f37-112">Esnek veritabanı işlemleri için SQL DB birkaç farklı SQL veritabanlarında depolanan uygulamaları toomake atomik değişiklikleri toodata etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="19f37-112">Elastic database transactions for SQL DB enable applications toomake atomic changes toodata stored in several different SQL Databases.</span></span> <span data-ttu-id="19f37-113">C# ve .NET istemci-tarafı geliştirme deneyimlerinde Hello Önizleme odaklanır.</span><span class="sxs-lookup"><span data-stu-id="19f37-113">hello preview focuses on client-side development experiences in C# and .NET.</span></span> <span data-ttu-id="19f37-114">T-SQL kullanarak bir sunucu tarafı deneyimi daha sonraki bir zamana planlanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="19f37-114">A server-side experience using T-SQL is planned for a later time.</span></span>  
<span data-ttu-id="19f37-115">Esnek veritabanı işlemleri hedefleri hello senaryolar:</span><span class="sxs-lookup"><span data-stu-id="19f37-115">Elastic database transactions targets hello following scenarios:</span></span>

* <span data-ttu-id="19f37-116">Azure çok veritabanı uygulamalarında: farklı veri türleri farklı veritabanlarında bulunan şekilde bu senaryoyla veri dikey SQL DB birkaç veritabanlarında genelinde bölümlenmiş.</span><span class="sxs-lookup"><span data-stu-id="19f37-116">Multi-database applications in Azure: With this scenario, data is vertically partitioned across several databases in SQL DB such that different kinds of data reside on different databases.</span></span> <span data-ttu-id="19f37-117">Bazı işlemler iki veya daha fazla veritabanlarında tutulur değişiklikleri toodata gerektirir.</span><span class="sxs-lookup"><span data-stu-id="19f37-117">Some operations require changes toodata which is kept in two or more databases.</span></span> <span data-ttu-id="19f37-118">Merhaba uygulaması veritabanları arasında esnek veritabanı işlemleri toocoordinate hello değişiklikleri kullanır ve kararlılık emin olun.</span><span class="sxs-lookup"><span data-stu-id="19f37-118">hello application uses elastic database transactions toocoordinate hello changes across databases and ensure atomicity.</span></span>
* <span data-ttu-id="19f37-119">Azure parçalı veritabanı uygulamalarında: Bu senaryo ile Merhaba veri katmanı hello kullanan [esnek veritabanı istemci Kitaplığı](sql-database-elastic-database-client-library.md) ya da SQL DB içinde birçok veritabanı arasında self parçalama toohorizontally bölüm hello verileri.</span><span class="sxs-lookup"><span data-stu-id="19f37-119">Sharded database applications in Azure: With this scenario, hello data tier uses hello [Elastic Database client library](sql-database-elastic-database-client-library.md) or self-sharding toohorizontally partition hello data across many databases in SQL DB.</span></span> <span data-ttu-id="19f37-120">Bir belirgin kullanım durumu değişiklikleri kiracılar span hello gerek tooperform atomik değişiklikleri parçalı bir çok kiracılı uygulama için durumdur.</span><span class="sxs-lookup"><span data-stu-id="19f37-120">One prominent use case is hello need tooperform atomic changes for a sharded multi-tenant application when changes span tenants.</span></span> <span data-ttu-id="19f37-121">Örneği için bir kiracı tooanother, her iki bulunan farklı veritabanlarında bir aktarımı düşünün.</span><span class="sxs-lookup"><span data-stu-id="19f37-121">Think for instance of a transfer from one tenant tooanother, both residing on different databases.</span></span> <span data-ttu-id="19f37-122">Hangi sırayla genellikle bazı atomik işlemleri gereksinimlerini toostretch hello için kullanılan birkaç veritabanları arasında aynı Kiracı gelir büyük bir kiracı için hassas parçalama tooaccommodate kapasite gereksinimlerini buna ikinci bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="19f37-122">A second case is fine-grained sharding tooaccommodate capacity needs for a large tenant which in turn typically implies that some atomic operations needs toostretch across several databases used for hello same tenant.</span></span> <span data-ttu-id="19f37-123">Veritabanları arasında çoğaltılan atomik güncelleştirmeleri tooreference veri buna üçüncü bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="19f37-123">A third case is atomic updates tooreference data that are replicated across databases.</span></span> <span data-ttu-id="19f37-124">Bu satırlar boyunca atomik, hizmetteki, işlemleri şimdi hello Önizleme kullanarak birçok veritabanı arasında Eşgüdümlü.</span><span class="sxs-lookup"><span data-stu-id="19f37-124">Atomic, transacted, operations along these lines can now be coordinated across several databases using hello preview.</span></span>
  <span data-ttu-id="19f37-125">Esnek veritabanı işlemleri veritabanları arasında iki aşamalı yürütme tooensure işlem kararlılık kullanın.</span><span class="sxs-lookup"><span data-stu-id="19f37-125">Elastic database transactions use two-phase commit tooensure transaction atomicity across databases.</span></span> <span data-ttu-id="19f37-126">Tek bir işlem içinde her defasında 100'den az veritabanları gerektiren işlemler için iyi bir tercihtir olur.</span><span class="sxs-lookup"><span data-stu-id="19f37-126">It is a good fit for transactions that involve less than 100 databases at a time within a single transaction.</span></span> <span data-ttu-id="19f37-127">Bu sınırlamaları uygulanmaz ancak bir performans ve esnek veritabanı işlemleri toosuffer başarı oranları bu sınırları aşıldığında beklemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="19f37-127">These limits are not enforced, but one should expect performance and success rates for elastic database transactions toosuffer when exceeding these limits.</span></span>

## <a name="installation-and-migration"></a><span data-ttu-id="19f37-128">Yükleme ve yükseltme</span><span class="sxs-lookup"><span data-stu-id="19f37-128">Installation and migration</span></span>
<span data-ttu-id="19f37-129">SQL veritabanına esnek veritabanı işlemleri için Hello özellikleri güncelleştirmeleri toohello .NET kitaplıkları System.Data.dll ve System.Transactions.dll sağlanır.</span><span class="sxs-lookup"><span data-stu-id="19f37-129">hello capabilities for elastic database transactions in SQL DB are provided through updates toohello .NET libraries System.Data.dll and System.Transactions.dll.</span></span> <span data-ttu-id="19f37-130">Merhaba DLL'leri bu iki aşamalı yürütme gerektiğinde kullanılır olun tooensure Atom oranı.</span><span class="sxs-lookup"><span data-stu-id="19f37-130">hello DLLs ensure that two-phase commit is used where necessary tooensure atomicity.</span></span> <span data-ttu-id="19f37-131">Esnek veritabanı işlemleri kullanarak toostart geliştirme uygulamaları yükleme [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) veya sonraki bir sürümü.</span><span class="sxs-lookup"><span data-stu-id="19f37-131">toostart developing applications using elastic database transactions, install [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) or a later version.</span></span> <span data-ttu-id="19f37-132">Merhaba .NET framework'ün daha eski bir sürümünde çalışan, işlemleri toopromote tooa dağıtılmış işlem başarısız olur ve bir özel durum oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="19f37-132">When running on an earlier version of hello .NET framework, transactions will fail toopromote tooa distributed transaction and an exception will be raised.</span></span>

<span data-ttu-id="19f37-133">Yükleme sonrasında, bağlantıları tooSQL DB içinde System.Transactions hello dağıtılmış işlem API'leri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="19f37-133">After installation, you can use hello distributed transaction APIs in System.Transactions with connections tooSQL DB.</span></span> <span data-ttu-id="19f37-134">Bu API'leri kullanarak mevcut MSDTC uygulamalarınız varsa, yalnızca .NET 4.6 için mevcut uygulamalarınızı hello 4.6.1 yükledikten sonra yeniden Framework.</span><span class="sxs-lookup"><span data-stu-id="19f37-134">If you have existing MSDTC applications using these APIs, simply rebuild your existing applications for .NET 4.6 after installing hello 4.6.1 Framework.</span></span> <span data-ttu-id="19f37-135">Projelerinizi .NET 4.6 hedefliyorsanız, bunlar güncelleştirilmiş hello DLL'lerden hello yeni Framework sürümünü ve dağıtılmış işlem API çağrıları DB şimdi başarılı olur bağlantıları tooSQL ile birlikte otomatik olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="19f37-135">If your projects target .NET 4.6, they will automatically use hello updated DLLs from hello new Framework version and distributed transaction API calls in combination with connections tooSQL DB will now succeed.</span></span>

<span data-ttu-id="19f37-136">Esnek veritabanı işlem MSDTC yüklemek gerekmez unutmayın.</span><span class="sxs-lookup"><span data-stu-id="19f37-136">Remember that elastic database transactions do not require installing MSDTC.</span></span> <span data-ttu-id="19f37-137">Bunun yerine, esnek veritabanı işlemleri doğrudan tarafından ve SQL DB içinde yönetilir.</span><span class="sxs-lookup"><span data-stu-id="19f37-137">Instead, elastic database transactions are directly managed by and within SQL DB.</span></span> <span data-ttu-id="19f37-138">MSDTC dağıtımını değil SQL DB ile gerekli toouse dağıtılmış işlemler olduğundan bu bulut senaryolarında önemli ölçüde basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="19f37-138">This significantly simplifies cloud scenarios since a deployment of MSDTC is not necessary toouse distributed transactions with SQL DB.</span></span> <span data-ttu-id="19f37-139">4. Bölüm nasıl toodeploy esnek veritabanı işlemleri hello bulut uygulamaları tooAzure birlikte .NET framework gerekli ve daha ayrıntılı olarak açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="19f37-139">Section 4 explains in more detail how toodeploy elastic database transactions and hello required .NET framework together with your cloud applications tooAzure.</span></span>

## <a name="development-experience"></a><span data-ttu-id="19f37-140">Geliştirme deneyimi</span><span class="sxs-lookup"><span data-stu-id="19f37-140">Development experience</span></span>
### <a name="multi-database-applications"></a><span data-ttu-id="19f37-141">Birden çok veritabanı uygulamaları</span><span class="sxs-lookup"><span data-stu-id="19f37-141">Multi-database applications</span></span>
<span data-ttu-id="19f37-142">Merhaba aşağıdaki örnek kod hello tanıdık programlama deneyimi ile .NET System.Transactions kullanır.</span><span class="sxs-lookup"><span data-stu-id="19f37-142">hello following sample code uses hello familiar programming experience with .NET System.Transactions.</span></span> <span data-ttu-id="19f37-143">Merhaba TransactionScope sınıfı .NET ortam bir işlemde oluşturur.</span><span class="sxs-lookup"><span data-stu-id="19f37-143">hello TransactionScope class establishes an ambient transaction in .NET.</span></span> <span data-ttu-id="19f37-144">("Ortam işlem" bulunan hello geçerli iş parçacığı biridir.) Tüm bağlantılar TransactionScope Hello içinde açılmış hello işlemde katılın.</span><span class="sxs-lookup"><span data-stu-id="19f37-144">(An “ambient transaction” is one that lives in hello current thread.) All connections opened within hello TransactionScope participate in hello transaction.</span></span> <span data-ttu-id="19f37-145">Farklı veritabanlarına katılırsanız, hello işlem otomatik olarak yükseltilmiş tooa dağıtılmış bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="19f37-145">If different databases participate, hello transaction is automatically elevated tooa distributed transaction.</span></span> <span data-ttu-id="19f37-146">Merhaba hello işlem sonucunu bir yürütme hello kapsam toocomplete tooindicate ayarlayarak denetlenir.</span><span class="sxs-lookup"><span data-stu-id="19f37-146">hello outcome of hello transaction is controlled by setting hello scope toocomplete tooindicate a commit.</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = new SqlConnection(connStrDb1))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = new SqlConnection(connStrDb2))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T2 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }

### <a name="sharded-database-applications"></a><span data-ttu-id="19f37-147">Parçalı veritabanı uygulamaları</span><span class="sxs-lookup"><span data-stu-id="19f37-147">Sharded database applications</span></span>
<span data-ttu-id="19f37-148">Esnek veritabanı işlemleri SQL DB için de destek kullandığınız hello esnek veritabanı istemci kitaplığı tooopen bağlantılarının hello OpenConnectionForKey yöntemi için genişletilmiş veri dağıtılmış işlemler Eşgüdümleme katmanı.</span><span class="sxs-lookup"><span data-stu-id="19f37-148">Elastic database transactions for SQL DB also support coordinating distributed transactions where you use hello OpenConnectionForKey method of hello elastic database client library tooopen connections for a scaled out data tier.</span></span> <span data-ttu-id="19f37-149">Burada, tooguarantee işlemsel tutarlılık için değişiklikleri birkaç farklı parçalama anahtar değerleri arasında gerektirmelidir.</span><span class="sxs-lookup"><span data-stu-id="19f37-149">Consider cases where you need tooguarantee transactional consistency for changes across several different sharding key values.</span></span> <span data-ttu-id="19f37-150">Merhaba farklı parçalama anahtar değerleri barındırma bağlantıları toohello parça OpenConnectionForKey kullanarak aracılı.</span><span class="sxs-lookup"><span data-stu-id="19f37-150">Connections toohello shards hosting hello different sharding key values are brokered using OpenConnectionForKey.</span></span> <span data-ttu-id="19f37-151">İşlem Güvenceleri sağlayarak bir dağıtılmış işlem gerektirir, hello genel durumda toodifferent parça hello bağlantıları olabilir.</span><span class="sxs-lookup"><span data-stu-id="19f37-151">In hello general case, hello connections can be toodifferent shards such that ensuring transactional guarantees requires a distributed transaction.</span></span> <span data-ttu-id="19f37-152">Aşağıdaki kod örneği hello bu yaklaşım gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="19f37-152">hello following code sample illustrates this approach.</span></span> <span data-ttu-id="19f37-153">Bu, shardmap adlı bir değişken bir parça eşleme hello esnek veritabanı istemci Kitaplığı'ndan kullanılan toorepresent olduğunu varsayar:</span><span class="sxs-lookup"><span data-stu-id="19f37-153">It assumes that a variable called shardmap is used toorepresent a shard map from hello elastic database client library:</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = shardmap.OpenConnectionForKey(tenantId1, credentialsStr))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = shardmap.OpenConnectionForKey(tenantId2, credentialsStr))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T1 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }


## <a name="net-installation-for-azure-cloud-services"></a><span data-ttu-id="19f37-154">.NET yüklemesi için Azure bulut Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="19f37-154">.NET installation for Azure Cloud Services</span></span>
<span data-ttu-id="19f37-155">Azure birkaç teklifleri toohost .NET uygulamalarını sağlar.</span><span class="sxs-lookup"><span data-stu-id="19f37-155">Azure provides several offerings toohost .NET applications.</span></span> <span data-ttu-id="19f37-156">Merhaba farklı teklifleri karşılaştırması kullanılabilir [Azure App Service, Cloud Services ve sanal makineler karşılaştırması](../app-service-web/choose-web-site-cloud-service-vm.md).</span><span class="sxs-lookup"><span data-stu-id="19f37-156">A comparison of hello different offerings is available in [Azure App Service, Cloud Services, and Virtual Machines comparison](../app-service-web/choose-web-site-cloud-service-vm.md).</span></span> <span data-ttu-id="19f37-157">Merhaba konuk işletim sistemi hello sunumun .NET 4.6.1 esnek işlemleri için gerekli küçükse, tooupgrade hello konuk işletim sistemi too4.6.1 gerekir.</span><span class="sxs-lookup"><span data-stu-id="19f37-157">If hello guest OS of hello offering is smaller than .NET 4.6.1 required for elastic transactions, you need tooupgrade hello guest OS too4.6.1.</span></span> 

<span data-ttu-id="19f37-158">Azure uygulama hizmetleri için toohello konuk işletim sistemi tarafından şu anda desteklenmiyor yükseltir.</span><span class="sxs-lookup"><span data-stu-id="19f37-158">For Azure App Services, upgrades toohello guest OS are currently not supported.</span></span> <span data-ttu-id="19f37-159">Azure Virtual Machines için yalnızca VM hello oturum ve hello en son .NET framework için hello yükleyiciyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="19f37-159">For Azure Virtual Machines, simply log into hello VM and run hello installer for hello latest .NET framework.</span></span> <span data-ttu-id="19f37-160">Azure bulut Hizmetleri için hello başlangıç görevleri, dağıtımınızın içine yeni bir .NET sürümünü tooinclude hello yüklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="19f37-160">For Azure Cloud Services, you need tooinclude hello installation of a newer .NET version into hello startup tasks of your deployment.</span></span> <span data-ttu-id="19f37-161">Merhaba kavramlar ve adımlar konusunda belgelenir [bir bulut hizmet rolü .NET yükleme](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="19f37-161">hello concepts and steps are documented in [Install .NET on a Cloud Service Role](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span></span>  

<span data-ttu-id="19f37-162">.NET 4.6.1 hello Azure bulut Hizmetleri işlem .NET 4.6 yükleyici hello daha önyükleme sırasında daha fazla geçici depolama alanı gerektirebilir için yükleyici hello unutmayın.</span><span class="sxs-lookup"><span data-stu-id="19f37-162">Note that hello installer for .NET 4.6.1 may require more temporary storage during hello bootstrapping process on Azure cloud services than hello installer for .NET 4.6.</span></span> <span data-ttu-id="19f37-163">tooensure başarılı bir yükleme, tooincrease geçici depolama için Azure bulut hizmetinize ServiceDefinition.csdef dosyanızda hello LocalResources bölümü ve hello ortam ayarları, başlangıç görevinin hello aşağıda gösterildiği gibi gereksinim Örnek:</span><span class="sxs-lookup"><span data-stu-id="19f37-163">tooensure a successful installation, you need tooincrease temporary storage for your Azure cloud service in your ServiceDefinition.csdef file in hello LocalResources section and hello environment settings of your startup task, as shown in hello following sample:</span></span>

    <LocalResources>
    ...
        <LocalStorage name="TEMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
        <LocalStorage name="TMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
    </LocalResources>
    <Startup>
        <Task commandLine="install.cmd" executionContext="elevated" taskType="simple">
            <Environment>
        ...
                <Variable name="TEMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TEMP']/@path" />
                </Variable>
                <Variable name="TMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TMP']/@path" />
                </Variable>
            </Environment>
        </Task>
    </Startup>

## <a name="transactions-across-multiple-servers"></a><span data-ttu-id="19f37-164">Birden çok sunucudaki işlemleri</span><span class="sxs-lookup"><span data-stu-id="19f37-164">Transactions across multiple servers</span></span>
<span data-ttu-id="19f37-165">Esnek veritabanı işlemleri, Azure SQL veritabanında mantıksal farklı sunucular arasında desteklenir.</span><span class="sxs-lookup"><span data-stu-id="19f37-165">Elastic database transactions are supported across different logical servers in Azure SQL Database.</span></span> <span data-ttu-id="19f37-166">Mantıksal sunucu sınırları işlemler arası olduğunda, hello Katılımcı sunucular önce karşılıklı iletişim ilişkisi girdiğiniz toobe gerekir.</span><span class="sxs-lookup"><span data-stu-id="19f37-166">When transactions cross logical server boundaries, hello participating servers first need toobe entered into a mutual communication relationship.</span></span> <span data-ttu-id="19f37-167">Merhaba iletişimi ilişki kurulduktan sonra iki sunucu veritabanlarından esnek hareketlerle katılabilir hello hiçbirinde herhangi bir veritabanı diğer sunucu hello.</span><span class="sxs-lookup"><span data-stu-id="19f37-167">Once hello communication relationship has been established, any database in any of hello two servers can participate in elastic transactions with databases from hello other server.</span></span> <span data-ttu-id="19f37-168">İkiden fazla mantıksal sunucularının genişleme işlemleri ile iletişim ilişkisi herhangi bir mantıksal sunucu çifti için yerinde toobe gerekir.</span><span class="sxs-lookup"><span data-stu-id="19f37-168">With transactions spanning more than two logical servers, a communication relationship needs toobe in place for any pair of logical servers.</span></span>

<span data-ttu-id="19f37-169">Esnek veritabanı işlemleri için PowerShell cmdlet'leri toomanage sunucular arası iletişim ilişki aşağıdaki hello kullan:</span><span class="sxs-lookup"><span data-stu-id="19f37-169">Use hello following PowerShell cmdlets toomanage cross-server communication relationships for elastic database transactions:</span></span>

* <span data-ttu-id="19f37-170">**AzureRmSqlServerCommunicationLink yeni**: Bu cmdlet toocreate Azure SQL DB mantıksal iki sunucu arasında yeni bir iletişim ilişki kullanın.</span><span class="sxs-lookup"><span data-stu-id="19f37-170">**New-AzureRmSqlServerCommunicationLink**: Use this cmdlet toocreate a new communication relationship between two logical servers in Azure SQL DB.</span></span> <span data-ttu-id="19f37-171">Merhaba her iki sunucuyu hello hareketlerle diğer sunucu başlatabilirsiniz yani simetrik ilişkidir.</span><span class="sxs-lookup"><span data-stu-id="19f37-171">hello relationship is symmetric which means both servers can initiate transactions with hello other server.</span></span>
* <span data-ttu-id="19f37-172">**Get-AzureRmSqlServerCommunicationLink**: Bu cmdlet tooretrieve mevcut iletişimi kullanan ilişkileri ve özellikleri.</span><span class="sxs-lookup"><span data-stu-id="19f37-172">**Get-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooretrieve existing communication relationships and their properties.</span></span>
* <span data-ttu-id="19f37-173">**Remove-AzureRmSqlServerCommunicationLink**: Bu cmdlet tooremove var olan bir iletişim ilişkisinin kullanın.</span><span class="sxs-lookup"><span data-stu-id="19f37-173">**Remove-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooremove an existing communication relationship.</span></span> 

## <a name="monitoring-transaction-status"></a><span data-ttu-id="19f37-174">İşlem durumunu izleme</span><span class="sxs-lookup"><span data-stu-id="19f37-174">Monitoring transaction status</span></span>
<span data-ttu-id="19f37-175">SQL DB toomonitor durumunu ve ilerlemesini, devam eden esnek veritabanı işlem içinde dinamik yönetim görünümlerini (Dmv'leri) kullanın.</span><span class="sxs-lookup"><span data-stu-id="19f37-175">Use Dynamic Management Views (DMVs) in SQL DB toomonitor status and progress of your ongoing elastic database transactions.</span></span> <span data-ttu-id="19f37-176">Tüm Dmv'leri ilgili tootransactions SQL DB dağıtılmış işlemlere ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="19f37-176">All DMVs related tootransactions are relevant for distributed transactions in SQL DB.</span></span> <span data-ttu-id="19f37-177">Merhaba karşılık gelen listesi Dmv'leri burada bulabilirsiniz: [işlem ilgili dinamik yönetim görünümlerini ve işlevleri (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span><span class="sxs-lookup"><span data-stu-id="19f37-177">You can find hello corresponding list of DMVs here: [Transaction Related Dynamic Management Views and Functions (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span></span>

<span data-ttu-id="19f37-178">Bu Dmv'leri özellikle yararlı olur:</span><span class="sxs-lookup"><span data-stu-id="19f37-178">These DMVs are particularly useful:</span></span>

* <span data-ttu-id="19f37-179">**sys.DM\_tran\_etkin\_işlemleri**: geçerli durumda etkin işlemlerin ve durumlarını listeler.</span><span class="sxs-lookup"><span data-stu-id="19f37-179">**sys.dm\_tran\_active\_transactions**: Lists currently active transactions and their status.</span></span> <span data-ttu-id="19f37-180">Merhaba UOW (iş birimi) sütun toohello ait hello farklı alt işlemleri belirlemek aynı dağıtılmış işlem.</span><span class="sxs-lookup"><span data-stu-id="19f37-180">hello UOW (Unit Of Work) column can identify hello different child transactions that belong toohello same distributed transaction.</span></span> <span data-ttu-id="19f37-181">Tüm işlemler aynı dağıtılmış işlem taşımak hello dahilinde hello aynı UOW değeri.</span><span class="sxs-lookup"><span data-stu-id="19f37-181">All transactions within hello same distributed transaction carry hello same UOW value.</span></span> <span data-ttu-id="19f37-182">Merhaba bkz [DMV belgelerine](https://msdn.microsoft.com/library/ms174302.aspx) daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="19f37-182">See hello [DMV documentation](https://msdn.microsoft.com/library/ms174302.aspx) for more details.</span></span>
* <span data-ttu-id="19f37-183">**sys.DM\_tran\_veritabanı\_işlemleri**: hello günlüğünde hello hareketinin yerleştirme gibi işlemleri hakkında ek bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="19f37-183">**sys.dm\_tran\_database\_transactions**: Provides additional information about transactions, such as placement of hello transaction in hello log.</span></span> <span data-ttu-id="19f37-184">Merhaba bkz [DMV belgelerine](https://msdn.microsoft.com/library/ms186957.aspx) daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="19f37-184">See hello [DMV documentation](https://msdn.microsoft.com/library/ms186957.aspx) for more details.</span></span>
* <span data-ttu-id="19f37-185">**sys.DM\_tran\_kilitleri**: şu anda devam eden işlemler tarafından tutulan hello kilitleri hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="19f37-185">**sys.dm\_tran\_locks**: Provides information about hello locks that are currently held by ongoing transactions.</span></span> <span data-ttu-id="19f37-186">Merhaba bkz [DMV belgelerine](https://msdn.microsoft.com/library/ms190345.aspx) daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="19f37-186">See hello [DMV documentation](https://msdn.microsoft.com/library/ms190345.aspx) for more details.</span></span>

## <a name="limitations"></a><span data-ttu-id="19f37-187">Sınırlamalar</span><span class="sxs-lookup"><span data-stu-id="19f37-187">Limitations</span></span>
<span data-ttu-id="19f37-188">sınırlamalar şu anda aşağıdaki hello tooelastic veritabanı işlemleri SQL veritabanına uygulayın:</span><span class="sxs-lookup"><span data-stu-id="19f37-188">hello following limitations currently apply tooelastic database transactions in SQL DB:</span></span>

* <span data-ttu-id="19f37-189">Yalnızca işlemleri SQL DB veritabanları arasında desteklenir.</span><span class="sxs-lookup"><span data-stu-id="19f37-189">Only transactions across databases in SQL DB are supported.</span></span> <span data-ttu-id="19f37-190">Diğer [X / açmak XA](https://en.wikipedia.org/wiki/X/Open_XA) kaynak sağlayıcıları ve veritabanları SQL DB dışına esnek veritabanı işlemleri katılmak olamaz.</span><span class="sxs-lookup"><span data-stu-id="19f37-190">Other [X/Open XA](https://en.wikipedia.org/wiki/X/Open_XA) resource providers and databases outside of SQL DB cannot participate in elastic database transactions.</span></span> <span data-ttu-id="19f37-191">Esnek veritabanı işlemleri arasında şirket içinde SQL Server ve Azure SQL veritabanları uzatma edilemez olduğunu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="19f37-191">That means that elastic database transactions cannot stretch across on premises SQL Server and Azure SQL Databases.</span></span> <span data-ttu-id="19f37-192">Şirket içi dağıtılmış işlemler için toouse MSDTC devam edin.</span><span class="sxs-lookup"><span data-stu-id="19f37-192">For distributed transactions on premises, continue toouse MSDTC.</span></span> 
* <span data-ttu-id="19f37-193">Yalnızca istemci Eşgüdümlü işlemleri bir .NET uygulamasında desteklenir.</span><span class="sxs-lookup"><span data-stu-id="19f37-193">Only client-coordinated transactions from a .NET application are supported.</span></span> <span data-ttu-id="19f37-194">T-SQL BEGIN TRANSACTION dağıtılmış gibi sunucu tarafı desteği, planlanmış, ancak henüz kullanılamıyor.</span><span class="sxs-lookup"><span data-stu-id="19f37-194">Server-side support for T-SQL such as BEGIN DISTRIBUTED TRANSACTION is planned, but not yet available.</span></span> 
* <span data-ttu-id="19f37-195">WCF hizmetleri üzerinden işlemleri desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="19f37-195">Transactions across WCF services are not supported.</span></span> <span data-ttu-id="19f37-196">Örneğin, bir işlem yürüten bir WCF Hizmeti yöntemine sahip.</span><span class="sxs-lookup"><span data-stu-id="19f37-196">For example, you have a WCF service method that executes a transaction.</span></span> <span data-ttu-id="19f37-197">Merhaba çağrısı bir işlem kapsamı içinde kapsayan başarısız olur olarak bir [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span><span class="sxs-lookup"><span data-stu-id="19f37-197">Enclosing hello call within a transaction scope will fail as a [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span></span>

## <a name="next-steps"></a><span data-ttu-id="19f37-198">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="19f37-198">Next steps</span></span>
<span data-ttu-id="19f37-199">Sorular için lütfen hello üzerinde toous ulaşmak [SQL veritabanı Forumu](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) ve özellik istekleri için lütfen toohello eklemesini [SQL veritabanı geri bildirim Forumunda](https://feedback.azure.com/forums/217321-sql-database/).</span><span class="sxs-lookup"><span data-stu-id="19f37-199">For questions, please reach out toous on hello [SQL Database forum](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) and for feature requests, please add them toohello [SQL Database feedback forum](https://feedback.azure.com/forums/217321-sql-database/).</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-transactions-overview/distributed-transactions.png



