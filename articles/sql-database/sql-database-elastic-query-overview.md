---
title: "aaaAzure SQL Database esnek sorgu genel bakış | Microsoft Docs"
description: "Merhaba esnek sorgu özelliğine genel bakış"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="aea9c-103">Azure SQL Database esnek sorgu genel bakış (Önizleme)</span><span class="sxs-lookup"><span data-stu-id="aea9c-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="aea9c-104">Merhaba esnek sorgu özelliği (Önizleme) toorun Azure SQL veritabanında birden çok veritabanı yayılan bir Transact-SQL sorgusu sağlar.</span><span class="sxs-lookup"><span data-stu-id="aea9c-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="aea9c-105">Tooperform arası veritabanı sorguları tooaccess uzak tablolar ve tooconnect Microsoft ve üçüncü taraf araçları (Excel, Powerbı, Tableau, vb.) tooquery veri katmanlarıyla birden fazla veritabanı üzerinden sağlar.</span><span class="sxs-lookup"><span data-stu-id="aea9c-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="aea9c-106">Bu özelliği kullanarak SQL veritabanında sorguları toolarge veri katmanlarını ölçeğini ve iş zekası (BI) raporlarında hello sonuçlarını görselleştirme.</span><span class="sxs-lookup"><span data-stu-id="aea9c-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="aea9c-107">Esnek sorgular neden kullanılır?</span><span class="sxs-lookup"><span data-stu-id="aea9c-107">Why use elastic queries?</span></span>

<span data-ttu-id="aea9c-108">**Azure SQL Veritabanı**</span><span class="sxs-lookup"><span data-stu-id="aea9c-108">**Azure SQL Database**</span></span>

<span data-ttu-id="aea9c-109">Azure SQL veritabanlarında tamamen T-SQL sorgulama.</span><span class="sxs-lookup"><span data-stu-id="aea9c-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="aea9c-110">Bu, uzak veritabanlarına salt okunur sorgulamaya izin verir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="aea9c-111">Bu, üç ve dört part adları veya bağlantılı sunucu tooSQL DB kullanan SQL Server müşteriler toomigrate uygulamalar şirket içinde geçerli bir seçenek sağlar.</span><span class="sxs-lookup"><span data-stu-id="aea9c-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="aea9c-112">**Standart katmanda kullanılabilir**</span><span class="sxs-lookup"><span data-stu-id="aea9c-112">**Available on standard tier**</span></span>

<span data-ttu-id="aea9c-113">Esnek sorgu toplama toohello Premium performans katmanı standart performans katmanında hello desteklenir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="aea9c-114">Daha düşük performans katmanı için performans sınırlamaları üzerinde Önizleme sınırlamaları Hello bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="aea9c-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="aea9c-115">**Anında iletme tooremote veritabanları**</span><span class="sxs-lookup"><span data-stu-id="aea9c-115">**Push tooremote databases**</span></span>

<span data-ttu-id="aea9c-116">Esnek sorgular SQL parametreleri toohello uzak veritabanları yürütme için şimdi gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="aea9c-117">**Saklı yordam yürütme**</span><span class="sxs-lookup"><span data-stu-id="aea9c-117">**Stored procedure execution**</span></span>

<span data-ttu-id="aea9c-118">Uzak saklı yordam çağrıları ya da uzak işlevleri kullanarak yürütme [sp\_yürütme \_uzak](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="aea9c-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="aea9c-119">**Esneklik**</span><span class="sxs-lookup"><span data-stu-id="aea9c-119">**Flexibility**</span></span>

<span data-ttu-id="aea9c-120">Esnek sorgu ile dış tablolar şimdi tooremote tabloları farklı şema veya tablo adı ile başvurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="aea9c-121">Esnek sorgu senaryoları</span><span class="sxs-lookup"><span data-stu-id="aea9c-121">Elastic query scenarios</span></span>

<span data-ttu-id="aea9c-122">Merhaba, burada birden çok veritabanı tek bir genel sonuç satırları katkıda senaryoları sorgulama toofacilitate hedefidir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="aea9c-123">Merhaba sorgu ya da hello kullanıcı veya uygulama tarafından doğrudan birleştirilebilen ya da dolaylı olarak bağlantılı toohello veritabanı olan araçları üzerinden.</span><span class="sxs-lookup"><span data-stu-id="aea9c-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="aea9c-124">Bu rapor, ticari BI veya veri tümleştirme araçları kullanarak oluştururken özellikle yararlı olacaktır — ya da değiştirilemez herhangi bir uygulama.</span><span class="sxs-lookup"><span data-stu-id="aea9c-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="aea9c-125">Esnek bir sorgu ile Merhaba tanıdık SQL Server bağlantı deneyimi Excel, Powerbı, Tableau veya Cognos gibi araçları kullanarak birden fazla veritabanı üzerinden sorgulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="aea9c-126">Esnek bir sorgu SQL Server Management Studio veya Visual Studio tarafından verilen sorguları aracılığıyla veritabanlarının tooan tüm koleksiyon kolay erişim sağlar ve veritabanları arası Entity Framework veya diğer ORM ortamları sorgulanmasını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="aea9c-127">Şekil 1, burada varolan izin ver bulut uygulaması bir senaryo gösterir (Merhaba kullanan [esnek veritabanı istemci Kitaplığı](sql-database-elastic-database-client-library.md)) derlemeleri ölçeklendirilmiş veri katmanı ve esnek sorgu veritabanları arası raporlaması için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="aea9c-128">**Şekil 1** ölçeklendirilmiş veri katmanını kullanılan esnek sorgu</span><span class="sxs-lookup"><span data-stu-id="aea9c-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Ölçeklendirilen veri katmanını kullanılan esnek sorgu][1]

<span data-ttu-id="aea9c-130">Müşteri senaryoları için esnek sorgu topolojileri aşağıdaki hello tarafından belirlenir:</span><span class="sxs-lookup"><span data-stu-id="aea9c-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="aea9c-131">**Dikey bölümleme - veritabanları arası sorguları** (topoloji 1): hello veri bölümlenmiş dikey olarak bir veri katmanı bulunan veritabanlarının sayısına arasında.</span><span class="sxs-lookup"><span data-stu-id="aea9c-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="aea9c-132">Genellikle, farklı veritabanlarını tabloları farklı kümesi bulunur.</span><span class="sxs-lookup"><span data-stu-id="aea9c-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="aea9c-133">Bu hello şema farklı veritabanlarında farklı olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="aea9c-134">Örneğin, tüm hesap ilişkili tabloları ikinci bir veritabanı üzerinde çalışırken tüm tablolar için stok bir veritabanında ' dir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="aea9c-135">Bu topoloji ile ortak kullanım durumları bir tooquery arasında veya birden fazla veritabanı tablolarında üzerinden toocompile raporları gerektirir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="aea9c-136">**Yatay bölümleme - parçalama** (topolojisi 2): verileri yatay olarak bölümlenmiş bir genişletilmiş veri toodistribute satırlarda katmanı.</span><span class="sxs-lookup"><span data-stu-id="aea9c-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="aea9c-137">Bu yaklaşımda, hello şema tüm katılan veritabanları aynıdır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="aea9c-138">Bu yaklaşım, "parçalama" olarak da adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="aea9c-139">Parçalama gerçekleştirilebilir ve (1) hello esnek veritabanı araçları kitaplıkları veya (2) self-parçalama kullanılarak yönetilebilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="aea9c-140">Esnek bir sorgu fazla parça kullanılan tooquery veya derleme raporlar değildir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="aea9c-141">Esnek sorgu hello işleme çoğunu hello veri katmanını burada gerçekleştirilebilir zaman raporlama senaryoları için en iyi şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="aea9c-142">Raporlama yoğun iş yükleri veya veri depolama senaryolarında ile daha karmaşık sorgular için de kullanmayı [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="aea9c-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="aea9c-143">Dikey bölümleme - veritabanları arası sorguları</span><span class="sxs-lookup"><span data-stu-id="aea9c-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="aea9c-144">kodlama, toobegin bkz [(dikey bölümleme) veritabanları arası sorgusu ile çalışmaya başlama](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="aea9c-145">Esnek bir sorgu, bir SQL veritabanı kullanılabilir tooother SQL veritabanlarında bulunan kullanılan toomake veriler olabilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="aea9c-146">Bu, tüm diğer uzak SQL veritabanında bir veritabanı toorefer tootables sorgularından sağlar.</span><span class="sxs-lookup"><span data-stu-id="aea9c-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="aea9c-147">Merhaba ilk toodefine her uzak veritabanı için dış veri kaynağına adımdır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="aea9c-148">Merhaba dış veri kaynağına hello yerel veritabanı hello Uzak veritabanı üzerinde bulunan toogain erişim tootables istediğiniz tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="aea9c-149">Hiçbir değişiklik hello Uzak veritabanı üzerinde gereklidir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="aea9c-150">Farklı veritabanlarına farklı şemalar sahip olduğu dikey bölümleme için tipik senaryolar, esnek sorgular kullanılan tooimplement erişim tooreference verileri gibi ortak kullanım durumları kullanılabilir ve veritabanları arası sorgulama.</span><span class="sxs-lookup"><span data-stu-id="aea9c-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="aea9c-151">ALTER ANY dış veri KAYNAĞINA iznine sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="aea9c-152">Bu izni hello ALTER DATABASE iznine dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="aea9c-153">ALTER ANY dış veri kaynağı, veri kaynağı arka plandaki gerekli toorefer toohello izinlerdir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="aea9c-154">**Başvuru verileri**: hello topoloji başvuru veri yönetimi için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="aea9c-155">Merhaba aşağıdaki şekilde, başvuru verilerinde bulunan iki tabloları (T1 ve T2) adanmış bir veritabanında tutulur.</span><span class="sxs-lookup"><span data-stu-id="aea9c-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="aea9c-156">Esnek bir sorgu kullanarak, artık tabloları T1 ve T2 uzaktan diğer veritabanlarından hello şekilde gösterildiği gibi erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="aea9c-157">Başvuru tabloları küçük ya da uzak sorguları başvuru tablosu varsa 1 topolojisini kullan seçmeli koşullar vardır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="aea9c-158">**Şekil 2** dikey bölümleme - esnek sorgu tooquery başvuru verileri kullanma</span><span class="sxs-lookup"><span data-stu-id="aea9c-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Dikey bölümleme - esnek sorgu tooquery başvuru verileri kullanma][3]

<span data-ttu-id="aea9c-160">**Veritabanları arası sorgulama**: esnek sorgular birkaç SQL veritabanları arasında sorgulama gerektiren etkinleştir kullanım örnekleri.</span><span class="sxs-lookup"><span data-stu-id="aea9c-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="aea9c-161">Şekil 3, dört farklı veritabanları gösterir: CRM, Envanter, İK ve ürünler.</span><span class="sxs-lookup"><span data-stu-id="aea9c-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="aea9c-162">Tooone erişim hello veritabanlarından birini gerçekleştirilen sorgular ayrıca veya tüm diğer veritabanlarına hello.</span><span class="sxs-lookup"><span data-stu-id="aea9c-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="aea9c-163">Esnek bir sorgu kullanarak, her bir hello dört veritabanı birkaç basit DDL deyimleri çalıştırarak bu durumda, veritabanınızı yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="aea9c-164">Bu tek seferlik yapılandırma sonra erişim tooa uzak tablo T-SQL sorgularınızı veya BI araçları tooa yerel tabloya başvuran olarak kadar basittir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="aea9c-165">Merhaba uzak sorgular büyük sonuç döndürmezse bu yaklaşım önerilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="aea9c-166">**Şekil 3** dikey bölümleme - çeşitli veritabanları arasında esnek sorgu tooquery kullanma</span><span class="sxs-lookup"><span data-stu-id="aea9c-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Dikey bölümleme - çeşitli veritabanları arasında esnek sorgu tooquery kullanma][4]

<span data-ttu-id="aea9c-168">Merhaba aşağıdaki adımları yapılandırmak erişim tooa tabloda bulunan hello olan uzak SQL veritabanlarında aynı gerektiren dikey bölümleme senaryolar için esnek veritabanı sorguları şeması:</span><span class="sxs-lookup"><span data-stu-id="aea9c-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="aea9c-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="aea9c-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="aea9c-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="aea9c-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="aea9c-171">[CREATE/DROP dış veri KAYNAĞINA](https://msdn.microsoft.com/library/dn935022.aspx) gelen veriKaynağım'a türü **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="aea9c-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="aea9c-172">[CREATE/DROP dış tablo](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="aea9c-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="aea9c-173">Merhaba DDL deyimleri çalıştırdıktan sonra dizinindeymiş gibi yerel bir tabloya hello uzak tablo "mytable" erişebilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="aea9c-174">Azure SQL veritabanı otomatik olarak bir bağlantı toohello Uzak veritabanı açar, isteğiniz hello Uzak veritabanı üzerinde işler ve hello sonuçlar döndürür.</span><span class="sxs-lookup"><span data-stu-id="aea9c-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="aea9c-175">Yatay bölümleme - parçalama</span><span class="sxs-lookup"><span data-stu-id="aea9c-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="aea9c-176">Veri katmanı gerektiren esnek sorgu tooperform bir parçalı, yani, yatay olarak bölümlenmiş, raporlama görevlerini kullanarak bir [esnek veritabanı parça eşleme](sql-database-elastic-scale-shard-map-management.md) hello veri katmanı toorepresent hello veritabanları.</span><span class="sxs-lookup"><span data-stu-id="aea9c-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="aea9c-177">Genellikle, yalnızca bir tek parça eşleme Bu senaryoda kullanılan ve esnek sorgu özellikleri (baş düğüm) ile ayrılmış bir veritabanı sorguları raporlama hello giriş noktası olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="aea9c-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="aea9c-178">Bu adanmış veritabanı erişimi toohello parça eşleme gerekir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="aea9c-179">Şekil 4, bu topoloji ve yapılandırmasıyla hello esnek sorgu veritabanı ve parça eşleme ile gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="aea9c-180">Merhaba veritabanları hello veri katmanındaki tüm Azure SQL veritabanı sürümü veya sürümü olabilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="aea9c-181">Merhaba esnek veritabanı istemci kitaplığı ve parça eşlemeleri oluşturma hakkında daha fazla bilgi için bkz: [parça eşleme Yönetim](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="aea9c-182">**Şekil 4** yatay bölümleme - parçalı veriler katmanları raporlama için esnek sorgu kullanma</span><span class="sxs-lookup"><span data-stu-id="aea9c-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Yatay bölümleme - parçalı veriler katmanları raporlama için esnek sorgu kullanma][5]

> [!NOTE]
> <span data-ttu-id="aea9c-184">Esnek sorgu veritabanı (baş düğüm) ayrı veritabanı olabilir veya hello olabilir aynı ana bilgisayar hello parça eşlenen veritabanı.</span><span class="sxs-lookup"><span data-stu-id="aea9c-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="aea9c-185">Seçtiğiniz herhangi bir yapılandırma emin olun, veritabanının bu hizmet ve performans katmanı yeterince toohandle beklenen hello oturum açma/sorgu isteği miktarıdır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="aea9c-186">Merhaba aşağıdaki adımları bulunan tablo erişim tooa kümesi gerektiren yatay bölümleme senaryoları için esnek veritabanı sorgularını (genellikle) birkaç uzak SQL veritabanlarında yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="aea9c-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="aea9c-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="aea9c-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="aea9c-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="aea9c-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="aea9c-189">Oluşturma bir [parça eşleme](sql-database-elastic-scale-shard-map-management.md) hello esnek veritabanı istemci kitaplığı kullanılarak, veri katmanı temsil eden.</span><span class="sxs-lookup"><span data-stu-id="aea9c-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="aea9c-190">[CREATE/DROP dış veri KAYNAĞINA](https://msdn.microsoft.com/library/dn935022.aspx) gelen veriKaynağım'a türü **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="aea9c-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="aea9c-191">[CREATE/DROP dış tablo](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="aea9c-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="aea9c-192">Bu adımları gerçekleştirdikten sonra dizinindeymiş gibi yerel bir tabloya hello yatay olarak bölümlenmiş tabloda "mytable" erişebilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="aea9c-193">Azure SQL veritabanı otomatik olarak birden çok paralel bağlantıları toohello Uzak veritabanı hello tabloları fiziksel olarak nerede depolandığı açar, hello uzak veritabanlarında hello isteklerini işler ve hello sonuçlar döndürür.</span><span class="sxs-lookup"><span data-stu-id="aea9c-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="aea9c-194">Merhaba yatay bölümleme senaryo bulunabilir için gereken hello adımları hakkında daha fazla bilgi [yatay bölümleme için esnek sorgu](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="aea9c-195">kodlama, toobegin bkz [yatay (parçalama) bölümleme için esnek sorgu ile çalışmaya başlama](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="aea9c-196">T-SQL sorgulama</span><span class="sxs-lookup"><span data-stu-id="aea9c-196">T-SQL querying</span></span>
<span data-ttu-id="aea9c-197">Dış veri kaynakları ve dış tablolarınızı tanımladıktan sonra dış tablolara tanımlandığı normal SQL Server bağlantı dizelerini tooconnect toohello veritabanları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="aea9c-198">Ardından T-SQL deyimlerini dış tablolar üzerindeki bu bağlantıda özetlenen hello kısıtlamalarla çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="aea9c-199">Daha fazla bilgi ve örnekler T-SQL sorgularını hello belgelerine konuları bulabilirsiniz [yatay bölümleme](sql-database-elastic-query-horizontal-partitioning.md) ve [dikey bölümleme](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="aea9c-200">Bağlantı için araçları</span><span class="sxs-lookup"><span data-stu-id="aea9c-200">Connectivity for tools</span></span>
<span data-ttu-id="aea9c-201">Uygulama ve dış tablolar BI veya veri tümleştirme araçları toodatabases normal SQL Server bağlantı dizelerini tooconnect kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="aea9c-202">SQL Server, aracı için bir veri kaynağı olarak desteklendiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="aea9c-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="aea9c-203">Aracınızı toowith bağlanmak herhangi bir SQL Server veritabanı ile yalnızca yaptığınız gibi bağlandıktan sonra toohello esnek sorgu veritabanı ve hello dış tablolarda veritabanının bakın.</span><span class="sxs-lookup"><span data-stu-id="aea9c-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="aea9c-204">Esnek sorgularıyla Azure Active Directory'yi kullanarak kimlik doğrulaması şu anda desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="aea9c-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="aea9c-205">Maliyet</span><span class="sxs-lookup"><span data-stu-id="aea9c-205">Cost</span></span>
<span data-ttu-id="aea9c-206">Esnek sorgu Azure SQL veritabanı veritabanları hello maliyetini dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="aea9c-207">Uzak veritabanlarınızı nerede farklı veri merkezinde esnek sorgu endpoint hello daha topolojileri desteklenir, ancak uzak veritabanlarından veri çıkışı normal ücretlendirilirsiniz Not [Azure oranları](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="aea9c-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="aea9c-208">Önizleme sınırlamaları</span><span class="sxs-lookup"><span data-stu-id="aea9c-208">Preview limitations</span></span>
* <span data-ttu-id="aea9c-209">İlk esnek sorgunuzu çalıştıran alabilir tooa hello standart performans katmanı üzerinde birkaç dakika.</span><span class="sxs-lookup"><span data-stu-id="aea9c-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="aea9c-210">Gerekli tooload hello esnek sorgu işlevi zamandır; Performans yüklenirken daha yüksek performans katmanlarıyla artırır.</span><span class="sxs-lookup"><span data-stu-id="aea9c-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="aea9c-211">Dış veri kaynakları veya dış tablolara SSMS veya SSDT komut dosyası yazma henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="aea9c-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="aea9c-212">İçeri/dışarı aktarma SQL DB için dış veri kaynakları ve dış tablolar henüz desteklemiyor.</span><span class="sxs-lookup"><span data-stu-id="aea9c-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="aea9c-213">Toouse içeri/dışarı aktarma gerekiyorsa, dışarı aktarmadan önce bu nesneleri bırakın ve sonra bunları aldıktan sonra yeniden oluşturun.</span><span class="sxs-lookup"><span data-stu-id="aea9c-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="aea9c-214">Esnek sorgu şu anda yalnızca salt okunur erişim tooexternal tabloları destekler.</span><span class="sxs-lookup"><span data-stu-id="aea9c-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="aea9c-215">Ancak, T-SQL işlevlerini hello veritabanında hello dış tablo tanımlandığı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="aea9c-216">Bu, örn., geçici sonuçları devam ettirmek için kullanarak, örn., seçin < column_list > < local_table > ya da toodefine tooexternal tabloları başvuran hello esnek sorgu veritabanı üzerinde saklı yordamları yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="aea9c-217">Dış tablo tanımlarında nvarchar(max) hariç LOB türleri desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="aea9c-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="aea9c-218">Geçici bir çözüm olarak, nvarchar(max) hello LOB türünü çevirir hello Uzak veritabanı üzerinde bir görünüm oluşturun, hello temel tablo yerine hello görünüm üzerinden, dış tablo tanımlayabilir ve ardından onu geri hello özgün LOB sorgularınızda türe.</span><span class="sxs-lookup"><span data-stu-id="aea9c-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="aea9c-219">Sütun istatistikleri dış tablolara şu anda desteklenmemektedir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="aea9c-220">Tablo istatistikleri desteklenir, ancak el ile oluşturulan toobe gerekir.</span><span class="sxs-lookup"><span data-stu-id="aea9c-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="aea9c-221">Geri Bildirim</span><span class="sxs-lookup"><span data-stu-id="aea9c-221">Feedback</span></span>
<span data-ttu-id="aea9c-222">Lütfen deneyiminizi geribildirim esnek sorgularıyla bizimle Disqus aşağıdaki hello MSDN Forumları veya Stackoverflow paylaşın.</span><span class="sxs-lookup"><span data-stu-id="aea9c-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="aea9c-223">Merhaba hizmet (kusurları, pürüzleri, özellik boşluklar) hakkındaki görüşlerinizi her türlü ilginizi duyuyoruz.</span><span class="sxs-lookup"><span data-stu-id="aea9c-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="aea9c-224">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="aea9c-224">Next steps</span></span>

* <span data-ttu-id="aea9c-225">Dikey bölümleme öğretici için bkz: [(dikey bölümleme) veritabanları arası sorgusu ile çalışmaya başlama](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="aea9c-226">Dikey olarak bölümlenmiş verilere ilişkin söz dizimi ve örnek sorgular için bkz: [dikey sorgulama bölümlenmiş veri)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="aea9c-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="aea9c-227">Yatay bölümleme (parçalama) bir öğretici için bkz: [yatay (parçalama) bölümleme için esnek sorgu ile çalışmaya başlama](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="aea9c-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="aea9c-228">Yatay olarak bölümlenmiş verilere ilişkin söz dizimi ve örnek sorgular için bkz: [yatay sorgulama bölümlenmiş veri)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="aea9c-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="aea9c-229">Bkz: [sp\_yürütme \_uzak](https://msdn.microsoft.com/library/mt703714) tek uzaktan Azure SQL veritabanı ya da yatay bölümleme düzenindeki parça olarak hizmet veren bir veritabanları kümesi üzerinde bir Transact-SQL deyimini yürütür bir saklı yordam için.</span><span class="sxs-lookup"><span data-stu-id="aea9c-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
