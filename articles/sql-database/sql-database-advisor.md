---
title: "Performans önerileri - Azure SQL veritabanı | Microsoft Docs"
description: "Azure SQL veritabanı geçerli sorgu performansını artırmak, SQL veritabanları için öneriler sağlar."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 357a25a665894c86ddb0f93beeb4dd59d8837489
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="10d00-103">Performans önerileri</span><span class="sxs-lookup"><span data-stu-id="10d00-103">Performance recommendations</span></span>

<span data-ttu-id="10d00-104">Azure SQL veritabanı öğrenir ve uygulamanız ile uyum ve SQL veritabanlarının performansını en üst düzeye çıkarmak için özelleştirilmiş önerileri olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="10d00-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you to maximize the performance of your SQL databases.</span></span> <span data-ttu-id="10d00-105">Performansınızı SQL veritabanı kullanım geçmişiniz çözümleyerek sürekli olarak değerlendirildiği.</span><span class="sxs-lookup"><span data-stu-id="10d00-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="10d00-106">Sağlanan öneriler, bir veritabanı benzersiz iş yükü deseni temel alınarak ve kendi performansını iyileştirmeye yardımcı olmak.</span><span class="sxs-lookup"><span data-stu-id="10d00-106">The recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="10d00-107">Önerileri kullanarak önerilen veritabanınızda 'Otomatik ayarı' seçeneğini etkinleştirerek yoludur.</span><span class="sxs-lookup"><span data-stu-id="10d00-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="10d00-108">Ayrıntılar için bkz [otomatik ayarlama](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="10d00-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="10d00-109">Dizin önerileri oluşturma</span><span class="sxs-lookup"><span data-stu-id="10d00-109">Create index recommendations</span></span>
<span data-ttu-id="10d00-110">Azure SQL veritabanı sürekli olarak yürütülmekte olan sorguları izler ve performansının artırılmasına dizinleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="10d00-110">Azure SQL Database continuously monitors the queries being executed and identifies the indexes that could improve the performance.</span></span> <span data-ttu-id="10d00-111">Yeterli güvenirlik derlendikten sonra belirli bir dizin eksik, yeni bir **Create Index** öneri oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="10d00-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="10d00-112">Azure SQL veritabanı performans kazancı dizini tamamlanışında sunacağı tahminlerle güven oluşturur.</span><span class="sxs-lookup"><span data-stu-id="10d00-112">Azure SQL Database builds confidence by estimating performance gain the index would bring through time.</span></span> <span data-ttu-id="10d00-113">Tahmini performans kazancını bağlı olarak öneriler yüksek, Orta veya düşük kategorilere ayrılır.</span><span class="sxs-lookup"><span data-stu-id="10d00-113">Depending on the estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="10d00-114">Önerileri kullanarak oluşturulan dizinleri her zaman auto_created dizinler işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="10d00-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="10d00-115">Hangi dizinleri auto_created sys.indexes Sergi bakarak görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="10d00-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="10d00-116">Otomatik olarak oluşturulan dizinleri ALTER/yeniden adlandırma komutları engelleme.</span><span class="sxs-lookup"><span data-stu-id="10d00-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="10d00-117">Bir otomatik olarak dizin üzerinde oluşturulan sahip sütun bırakma çalışırsanız, komut gönderir ve otomatik olarak dizini oluşturulan komutuyla bırakılır.</span><span class="sxs-lookup"><span data-stu-id="10d00-117">If you try to drop the column that has an auto created index over it, the command passes and the auto created index is dropped with the command as well.</span></span> <span data-ttu-id="10d00-118">Normal dizin dizini sütunlar üzerinde ALTER/RENAME komutu engellenebilir.</span><span class="sxs-lookup"><span data-stu-id="10d00-118">Regular indexes would block the ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="10d00-119">Create Index öneri uygulandıktan sonra Azure SQL Database sorguları performans taban çizgisi performansı ile karşılaştırın.</span><span class="sxs-lookup"><span data-stu-id="10d00-119">Once the create index recommendation is applied, Azure SQL Database will compare performance of the queries with the baseline performance.</span></span> <span data-ttu-id="10d00-120">Yeni dizin performans geliştirmeleri geldiyseniz öneri başarılı olarak işaretlenir ve etkisi raporu kullanılabilir olacaktır.</span><span class="sxs-lookup"><span data-stu-id="10d00-120">If new index brought improvements in the performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="10d00-121">Dizini avantajları getirmek kaydetmedi durumda otomatik olarak döndürülecek.</span><span class="sxs-lookup"><span data-stu-id="10d00-121">In case the index didn’t bring the benefits, it will be automatically reverted.</span></span> <span data-ttu-id="10d00-122">Önerileri kullanarak yalnızca veritabanı performansını artırır, böylece Azure SQL veritabanı sağlar.</span><span class="sxs-lookup"><span data-stu-id="10d00-122">This way Azure SQL Database ensures that using recommendations will only improve the database performance.</span></span>

<span data-ttu-id="10d00-123">Tüm **Create Index** önerisi bir geri alma veritabanı veya havuz DTU kullanımı son 20 dakika veya depolama kullanımı % 90 olup olmadığını % 80 ise öneri uygulama izin vermiyor İlkesi yok.</span><span class="sxs-lookup"><span data-stu-id="10d00-123">Any **Create index** recommendation has a back off policy that won’t allow applying the recommendation if the database or pool DTU usage was above 80% in last 20 minutes or if the storage is above 90% of usage.</span></span> <span data-ttu-id="10d00-124">Bu durumda, öneri Ertelenen.</span><span class="sxs-lookup"><span data-stu-id="10d00-124">In this case, the recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="10d00-125">Dizin kaldırma önerileri</span><span class="sxs-lookup"><span data-stu-id="10d00-125">Drop index recommendations</span></span>
<span data-ttu-id="10d00-126">Eksik bir dizin algılama yanı sıra, Azure SQL veritabanı sürekli varolan dizinleri performansını analiz eder.</span><span class="sxs-lookup"><span data-stu-id="10d00-126">In addition to detecting a missing index, Azure SQL Database continuously analyzes the performance of existing indexes.</span></span> <span data-ttu-id="10d00-127">Dizin kullanılmazsa, Azure SQL veritabanı bırakmadan öneririz.</span><span class="sxs-lookup"><span data-stu-id="10d00-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="10d00-128">Bir dizini bırakmadan iki durumda da önerilir:</span><span class="sxs-lookup"><span data-stu-id="10d00-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="10d00-129">Dizin (aynı dizine ve sütun, bölüm şeması ve filtreleri dahil) başka bir dizin yinelemesi</span><span class="sxs-lookup"><span data-stu-id="10d00-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="10d00-130">Dizin uzun süren bir süre (93 gün) için kullanılmaz</span><span class="sxs-lookup"><span data-stu-id="10d00-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="10d00-131">Dizin kaldırma önerileri de uygulama sonra doğrulama geçer.</span><span class="sxs-lookup"><span data-stu-id="10d00-131">Drop index recommendations also go through the verification after implementation.</span></span> <span data-ttu-id="10d00-132">Performans artarsa etkisi raporu kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="10d00-132">If the performance is improved the impact report will be available.</span></span> <span data-ttu-id="10d00-133">Bir performans düşüşü algılanırsa durumda öneri geri alınacak.</span><span class="sxs-lookup"><span data-stu-id="10d00-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="10d00-134">Sorguları önerileri Parametreleştirme</span><span class="sxs-lookup"><span data-stu-id="10d00-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="10d00-135">**Sorguları Parametreleştirme** önerileri sürekli son yukarı ile aynı sorgu yürütme planı derlenir bir veya daha fazla sorgular varsa görünür.</span><span class="sxs-lookup"><span data-stu-id="10d00-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with the same query execution plan.</span></span> <span data-ttu-id="10d00-136">Bu durum, önbelleğe alınmış ve gelecekteki performansı artırma ve kaynak kullanımını azaltarak yeniden sorgu planlarını sağlayacak zorlanmış parametrelemeyi uygulamak için bir fırsat yukarı açar.</span><span class="sxs-lookup"><span data-stu-id="10d00-136">This condition opens up an opportunity to apply forced parameterization, which will allow query plans to be cached and reused in the future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="10d00-137">SQL Server karşı başlangıçta verilen her sorgu yürütme planı oluşturmak için derlenmesi gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="10d00-137">Every query issued against SQL Server initially needs to be compiled to generate an execution plan.</span></span> <span data-ttu-id="10d00-138">Oluşturulan her plan planı önbelleğe eklenir ve ek derleme gereksinimini önbelleğinden Bu planın aynı sorgu sonraki yürütmelerde yeniden kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="10d00-138">Each generated plan is added to the plan cache and subsequent executions of the same query can reuse this plan from the cache, eliminating the need for additional compilation.</span></span> 

<span data-ttu-id="10d00-139">Parametreli olmayan değerler, sorguları göndermek uygulamalar, nerede farklı parametre değerleri ile gibi her bir sorgu için yürütme planı yeniden derlenir performans yükü için yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="10d00-139">Applications that send queries, which include non-parameterized values, can lead to a performance overhead, where for every such query with different parameter values the execution plan is compiled again.</span></span> <span data-ttu-id="10d00-140">Çoğu durumda aynı sorguları farklı parametresiyle aynı yürütme planları değerlerini oluşturmak, ancak bu planlar plan önbelleğinin hala ayrı olarak eklenir.</span><span class="sxs-lookup"><span data-stu-id="10d00-140">In many cases the same queries with different parameter values generate the same execution plans, but these plans are still separately added to the plan cache.</span></span> <span data-ttu-id="10d00-141">Yeniden derlenmesi yürütme planları veritabanı kaynaklarını kullanmak için sorgu süresini artırmak ve planları önbellekten çıkarılmasına neden plan önbelleğinin taşması.</span><span class="sxs-lookup"><span data-stu-id="10d00-141">Recompiling execution plans use database resources, increase the query duration time and overflow the plan cache causing plans to be evicted from the cache.</span></span> <span data-ttu-id="10d00-142">Bu davranış, SQL Server veritabanı zorlanmış parametrelemeyi seçeneğini ayarlayarak değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="10d00-142">This behavior of SQL Server can be altered by setting the forced parameterization option on the database.</span></span> 

<span data-ttu-id="10d00-143">(Öneri gibi uygulandıysa) Bu öneri etkisini tahmin etmenize yardımcı olmak için gerçek CPU kullanımı ve tahmini CPU kullanımı arasında bir karşılaştırma sağlanır.</span><span class="sxs-lookup"><span data-stu-id="10d00-143">To help you estimate the impact of this recommendation, you are provided with a comparison between the actual CPU usage and the projected CPU usage (as if the recommendation was applied).</span></span> <span data-ttu-id="10d00-144">CPU tasarrufu ek olarak, sorgu süresi derlemede harcanan süre için azaltır.</span><span class="sxs-lookup"><span data-stu-id="10d00-144">In addition to CPU savings, your query duration decreases for the time spent in compilation.</span></span> <span data-ttu-id="10d00-145">Ayrıca olacaktır daha az ek yükü plan önbelleğinde önbelleğinde kalır ve yeniden kullanılabilir planları çoğunluğu izin verme.</span><span class="sxs-lookup"><span data-stu-id="10d00-145">There will also be much less overhead on plan cache, allowing majority of the plans to stay in cache and be reused.</span></span> <span data-ttu-id="10d00-146">Tıklayarak hızla ve kolayca Bu öneri uygulayabilirsiniz **Uygula** komutu.</span><span class="sxs-lookup"><span data-stu-id="10d00-146">You can apply this recommendation quickly and easily by clicking on the **Apply** command.</span></span> 

<span data-ttu-id="10d00-147">Bu öneriyi uyguladığınızda, yaklaşık 24 saat boyunca sürer izleme işlemi başlatır ve veritabanı yükünüzü dakika içinde zorlanmış parametrelemeyi olanağı sağlar.</span><span class="sxs-lookup"><span data-stu-id="10d00-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts the monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="10d00-148">Bu süre, 24 saat önce ve öneri uygulandıktan sonra veritabanınız CPU kullanımını gösteren doğrulama raporunu görmeye olacaktır.</span><span class="sxs-lookup"><span data-stu-id="10d00-148">After this period, you will be able to see the validation report that shows CPU usage of your database 24 hours before and after the recommendation has been applied.</span></span> <span data-ttu-id="10d00-149">SQL veritabanı Danışmanı performans regresyon algılandı, otomatik olarak uygulanan öneri döner bir güvenlik mekanizması vardır.</span><span class="sxs-lookup"><span data-stu-id="10d00-149">SQL Database Advisor has a safety mechanism that automatically reverts the applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="10d00-150">Şema sorunları önerileri Düzelt</span><span class="sxs-lookup"><span data-stu-id="10d00-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="10d00-151">**Şema sorunları giderin** önerileri SQL veritabanı hizmetinin Azure SQL veritabanınızda gerçekleştiği şema ile ilgili SQL hataları sayısındaki bir anomali bildirimler olduğunda görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="10d00-151">**Fix schema issues** recommendations appear when the SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="10d00-152">Bu öneri, genellikle veritabanınızı bir saat içinde birden çok şema ile ilgili hataları (geçersiz sütun adı, geçersiz nesne adı, vb.) karşılaştığında görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="10d00-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="10d00-153">"Şema" SQL Sorgu tanımını ve veritabanı şeması tanımı hizalanmadıysa zaman meydana söz dizimi hataları SQL Server'daki sınıfının sorunlardır.</span><span class="sxs-lookup"><span data-stu-id="10d00-153">“Schema issues” are a class of syntax errors in SQL Server that happen when the definition of the SQL query and the definition of the database schema are not aligned.</span></span> <span data-ttu-id="10d00-154">Örneğin, bir sorgu tarafından beklenen sütun eksik olabilir hedef tablodaki veya tersi.</span><span class="sxs-lookup"><span data-stu-id="10d00-154">For example, one of the columns expected by the query may be missing in the target table, or vice versa.</span></span> 

<span data-ttu-id="10d00-155">Azure SQL veritabanı hizmetinin Azure SQL veritabanınızda gerçekleştiği şema ile ilgili SQL hataları sayısındaki bir anomali bildirimler "şema sorunu düzeltin" öneri görünür.</span><span class="sxs-lookup"><span data-stu-id="10d00-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="10d00-156">Aşağıdaki tabloda şema sorunlarıyla ilgili hataları gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="10d00-156">The following table shows the errors that are related to schema issues:</span></span>

| <span data-ttu-id="10d00-157">SQL hata kodu</span><span class="sxs-lookup"><span data-stu-id="10d00-157">SQL Error Code</span></span> | <span data-ttu-id="10d00-158">İleti</span><span class="sxs-lookup"><span data-stu-id="10d00-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="10d00-159">201</span><span class="sxs-lookup"><span data-stu-id="10d00-159">201</span></span> |<span data-ttu-id="10d00-160">Yordamı veya işlevi '*'parametresini beklemektedir'*', hangi değil sağlandı.</span><span class="sxs-lookup"><span data-stu-id="10d00-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="10d00-161">207</span><span class="sxs-lookup"><span data-stu-id="10d00-161">207</span></span> |<span data-ttu-id="10d00-162">Geçersiz sütun adı ' *'.</span><span class="sxs-lookup"><span data-stu-id="10d00-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="10d00-163">208</span><span class="sxs-lookup"><span data-stu-id="10d00-163">208</span></span> |<span data-ttu-id="10d00-164">Geçersiz nesne adı ' *'.</span><span class="sxs-lookup"><span data-stu-id="10d00-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="10d00-165">213</span><span class="sxs-lookup"><span data-stu-id="10d00-165">213</span></span> |<span data-ttu-id="10d00-166">Sütun adı veya numarası sağlanan değerlerin tablo tanımı eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="10d00-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="10d00-167">2812</span><span class="sxs-lookup"><span data-stu-id="10d00-167">2812</span></span> |<span data-ttu-id="10d00-168">Saklı yordamı bulunamadı. ' *'.</span><span class="sxs-lookup"><span data-stu-id="10d00-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="10d00-169">8144</span><span class="sxs-lookup"><span data-stu-id="10d00-169">8144</span></span> |<span data-ttu-id="10d00-170">Yordam veya işlev * belirtilen çok fazla bağımsız değişkenlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="10d00-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="10d00-171">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="10d00-171">Next steps</span></span>
<span data-ttu-id="10d00-172">Önerilerinizi izleyebilir ve bunları performansı iyileştirmek için uygulanmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="10d00-172">Monitor your recommendations and continue to apply them to refine performance.</span></span> <span data-ttu-id="10d00-173">Veritabanı iş yüklerini, dinamik ve sürekli olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="10d00-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="10d00-174">SQL veritabanı Danışmanı izlemek ve veritabanınızın performansı artırmak öneriler sunmak devam eder.</span><span class="sxs-lookup"><span data-stu-id="10d00-174">SQL Database advisor continues to monitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="10d00-175">Bkz: [performans önerileri Azure portalında](sql-database-advisor-portal.md) performans önerileri Azure portalında kullanma adımları için.</span><span class="sxs-lookup"><span data-stu-id="10d00-175">See [Performance recommendations in the Azure portal](sql-database-advisor-portal.md) for steps on how to use performance recommendations in the Azure portal.</span></span>
* <span data-ttu-id="10d00-176">Bkz: [sorgu performansı öngörüleri](sql-database-query-performance.md) hakkında bilgi edinin ve üst sorgularınızı performans etkisini görüntülemek için.</span><span class="sxs-lookup"><span data-stu-id="10d00-176">See [Query Performance Insights](sql-database-query-performance.md) to learn about and view the performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="10d00-177">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="10d00-177">Additional resources</span></span>
* [<span data-ttu-id="10d00-178">Sorgu deposu</span><span class="sxs-lookup"><span data-stu-id="10d00-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="10d00-179">DİZİN OLUŞTURMA</span><span class="sxs-lookup"><span data-stu-id="10d00-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="10d00-180">Rol tabanlı erişim denetimi</span><span class="sxs-lookup"><span data-stu-id="10d00-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)

