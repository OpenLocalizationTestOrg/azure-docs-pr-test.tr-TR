---
title: "aaaAzure SQL veritabanı güvenlik duvarı kuralları | Microsoft Docs"
description: "Nasıl tooconfigure bir SQL veritabanı sunucusu ve veritabanı düzeyi güvenlik duvarı kuralları toomanage erişim güvenlik duvarıyla öğrenin."
keywords: "veritabanı güvenlik duvarı"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="d94c3-104">Azure SQL veritabanı sunucusu ve veritabanı düzeyi güvenlik duvarı kuralları</span><span class="sxs-lookup"><span data-stu-id="d94c3-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="d94c3-105">Microsoft Azure SQL Veritabanı, Azure ile diğer İnternet tabanlı uygulamalar için ilişkisel veritabanı hizmeti sunar.</span><span class="sxs-lookup"><span data-stu-id="d94c3-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="d94c3-106">toohelp verilerinizi korumaya, hangi bilgisayarların izniniz belirtmediğiniz sürece tüm erişim tooyour veritabanı sunucusu güvenlik duvarları engellemek.</span><span class="sxs-lookup"><span data-stu-id="d94c3-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="d94c3-107">Merhaba Güvenlik Duvarı'nı her istek IP adresi kaynaklanan hello üzerinde dayalı erişim toodatabases verir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="d94c3-108">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="d94c3-108">Overview</span></span>

<span data-ttu-id="d94c3-109">Başlangıçta, tüm Transact-SQL tooyour Azure SQL Server'a erişim hello güvenlik duvarı tarafından engellendi.</span><span class="sxs-lookup"><span data-stu-id="d94c3-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="d94c3-110">Azure SQL sunucunuzun toobegin tooyour Azure SQL Server'a erişim sağlayan bir veya daha fazla sunucu düzeyinde güvenlik duvarı kuralları belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="d94c3-111">Merhaba güvenlik duvarı kuralları toospecify Internet izin verilen hello hangi IP adres aralıkları ve Azure uygulamalarını tooconnect tooyour Azure SQL server olup deneyebilirsiniz kullanın.</span><span class="sxs-lookup"><span data-stu-id="d94c3-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="d94c3-112">tooselectively grant erişim toojust Azure SQL sunucunuza hello veritabanlarında biri, hello gerekli veritabanı için veritabanı düzeyi kuralı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="d94c3-113">IP adresi aralığından hello sunucu düzeyinde güvenlik duvarı kuralında belirtilen ve hello istemcinin IP adresini hello hello veritabanı düzeyi kuralda belirtilen hello aralığında olduğundan emin olmak hello dışındadır hello veritabanı güvenlik duvarı kuralı için bir IP adresi aralığı belirtin.</span><span class="sxs-lookup"><span data-stu-id="d94c3-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="d94c3-114">Internet bağlantısı saldırılara karşı hello ve Azure SQL server veya SQL veritabanı ulaşabilir önce Azure ilk hello güvenlik duvarı üzerinden hello Aşağıdaki diyagramda gösterildiği gibi geçmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="d94c3-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![Güvenlik duvarı yapılandırmasını açıklayan diyagram.][1]

* <span data-ttu-id="d94c3-116">**Sunucu düzeyinde güvenlik duvarı kuralları:** bu kurallar istemcileri tooaccess tüm Azure SQL server'ınızdaki etkinleştirmek için diğer bir deyişle, içindeki tüm hello veritabanları aynı mantıksal sunucu hello.</span><span class="sxs-lookup"><span data-stu-id="d94c3-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="d94c3-117">Bu kurallar hello depolanan **ana** veritabanı.</span><span class="sxs-lookup"><span data-stu-id="d94c3-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="d94c3-118">Sunucu düzeyinde güvenlik duvarı kuralları hello portalını kullanarak veya Transact-SQL deyimi kullanarak yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="d94c3-119">Hello Azure portal veya PowerShell kullanarak toocreate sunucu düzeyinde güvenlik duvarı kuralları hello abonelik sahibi veya abonelik Katılımcısı olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="d94c3-120">toocreate Transact-SQL kullanarak sunucu düzeyinde güvenlik duvarı kuralı, toohello SQL veritabanı örneğinde hello sunucu düzeyinde asıl oturum açma veya (yani bir sunucu düzeyinde güvenlik duvarı kuralı önce oluşturulmalıdır hello Azure Active Directory yönetici olarak bağlamanız gerekir bir kullanıcı tarafından Azure düzeyi izinleri ile).</span><span class="sxs-lookup"><span data-stu-id="d94c3-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="d94c3-121">**Veritabanı düzeyi güvenlik duvarı kuralları:** tooaccess istemcileri (güvenli) veritabanları hello içinde aynı belirli kurallar etkinleştirmek mantıksal sunucu.</span><span class="sxs-lookup"><span data-stu-id="d94c3-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="d94c3-122">Her veritabanı için bu kurallar oluşturabilirsiniz (Merhaba dahil olmak üzere **ana** database0) ve hello tek tek veritabanlarında depolanır.</span><span class="sxs-lookup"><span data-stu-id="d94c3-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="d94c3-123">Veritabanı düzeyinde güvenlik duvarı kuralları yalnızca Transact-SQL deyimi kullanarak yapılandırılabilir ve yalnızca yapılandırdıktan sonra ilk sunucu düzeyinde güvenlik duvarı hello.</span><span class="sxs-lookup"><span data-stu-id="d94c3-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="d94c3-124">Merhaba sunucu düzeyinde güvenlik duvarı kuralında belirtilen dış hello aralığı hello veritabanı düzeyinde güvenlik duvarı kuralında bir IP adresi aralığı belirtirseniz, yalnızca hello veritabanı düzeyi aralığındaki IP adreslerine sahip istemciler hello veritabanına erişebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="d94c3-125">Bir veritabanı için en fazla 128 veritabanı düzeyinde güvenlik duvarı kuralınız olabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="d94c3-126">Ana ve kullanıcı veritabanları için veritabanı düzeyinde güvenlik duvarı kuralları yalnızca oluşturulur ve Transact-SQL yönetilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="d94c3-127">Makale ve bakın hello örnekte daha sonra bu veritabanı düzeyinde güvenlik duvarı kuralları yapılandırma hakkında daha fazla bilgi için bkz [sp_set_database_firewall_rule (Azure SQL veritabanları)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="d94c3-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="d94c3-128">**Öneri:** Microsoft önerir veritabanı düzeyinde güvenlik duvarı kurallarını kullanarak her olası tooenhance güvenlik ve toomake veritabanınızı daha taşınabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="d94c3-129">Merhaba sahip birçok veritabanı varsa aynı erişim gereksinimlerini ve her veritabanı ayrı ayrı yapılandırma toospend zaman istemiyorsanız ve Yöneticiler için sunucu düzeyinde güvenlik duvarı kuralları kullanın.</span><span class="sxs-lookup"><span data-stu-id="d94c3-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="d94c3-130">İş sürekliliği hello bağlamda taşınabilir veritabanları hakkında daha fazla bilgi için bkz: [olağanüstü durum kurtarma için kimlik doğrulama gereksinimleri](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="d94c3-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="d94c3-131">Merhaba Internet ' bağlanma</span><span class="sxs-lookup"><span data-stu-id="d94c3-131">Connecting from hello Internet</span></span>

<span data-ttu-id="d94c3-132">Bir bilgisayar tooconnect tooyour veritabanı hello Internet sunucusundan denediğinde hello Güvenlik Duvarı'nı ilk IP adresi hello hello bağlantı isteğinde hello veritabanı için veritabanı düzeyinde güvenlik duvarı kuralları karşı hello isteğinin kaynaklandığı hello denetler:</span><span class="sxs-lookup"><span data-stu-id="d94c3-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="d94c3-133">Başlangıç IP adresi hello isteğinin hello veritabanı düzeyinde güvenlik duvarı kurallarında belirtilen hello aralıkları biri içinde ise, hello bağlantı toohello hello kuralı içeren bir SQL veritabanında verilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="d94c3-134">Başlangıç IP adresi hello isteğinin hello veritabanı düzeyinde güvenlik duvarı kuralında belirtilen hello aralıkları biri içinde değilse, hello sunucu düzeyinde güvenlik duvarı kuralları denetlenir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="d94c3-135">Başlangıç IP adresi hello isteğinin hello sunucu düzeyinde güvenlik duvarı kurallarında belirtilen hello aralıkları biri içinde ise, hello bağlantısı verilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="d94c3-136">Sunucu düzeyinde güvenlik duvarı kuralları tooall SQL veritabanları hello Azure SQL server üzerinde uygulanır.</span><span class="sxs-lookup"><span data-stu-id="d94c3-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="d94c3-137">Başlangıç IP adresi hello isteğinin içinde değilse hello aralıkları hello veritabanı düzeyi hiçbirinde belirtilen veya sunucu düzeyinde güvenlik duvarı kuralları, hello bağlantı isteği başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="d94c3-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="d94c3-138">tooaccess Azure SQL veritabanı, yerel bilgisayarınızdan olun ağ ve yerel bilgisayar hello güvenlik duvarının TCP bağlantı noktası 1433 giden iletişime olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="d94c3-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="d94c3-139">Azure'dan bağlanma</span><span class="sxs-lookup"><span data-stu-id="d94c3-139">Connecting from Azure</span></span>
<span data-ttu-id="d94c3-140">Azure tooconnect tooyour Azure SQL server'ı Azure bağlantıları tooallow uygulamalardan etkinleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="d94c3-141">Tooconnect tooyour veritabanı sunucusu bir uygulamadan Azure girişiminde bulunduğunda hello Güvenlik Duvarı'nı Azure bağlantılarına izin verildiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="d94c3-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="d94c3-142">Başlangıç ve bitiş adresi eşit too0.0.0.0 ile ayarlama Güvenlik Duvarı'nı bu bağlantılarına izin verilip verilmeyeceğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="d94c3-143">Merhaba bağlantı denemesi izin verilmiyorsa hello isteği hello Azure SQL Database sunucusu ulaşmaz.</span><span class="sxs-lookup"><span data-stu-id="d94c3-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d94c3-144">Bu seçenek, diğer müşterilerden hello abonelikleri Azure dahil olmak üzere bağlantılarından gelen tüm bağlantıları hello güvenlik duvarı tooallow yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="d94c3-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="d94c3-145">Yetkili kullanıcıların ne zaman bu seçeneğin belirlenmesi ve emin olun, oturum açma kullanıcı izinlerini erişim tooonly sınırlayın.</span><span class="sxs-lookup"><span data-stu-id="d94c3-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="d94c3-146">Güvenlik duvarı kuralları oluşturmayı ve yönetmeyi</span><span class="sxs-lookup"><span data-stu-id="d94c3-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="d94c3-147">Merhaba ilk sunucu düzeyinde güvenlik duvarı ayarı hello kullanılarak oluşturulabilir [Azure portal](https://portal.azure.com/) veya program aracılığıyla kullanarak [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), veya hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="d94c3-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="d94c3-148">Sunucu düzeyinde sonraki güvenlik duvarı kuralları ise bu yöntemler kullanılarak ve Transact-SQL aracılığıyla oluşturulup yönetilebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="d94c3-149">Veritabanı düzeyinde güvenlik duvarı kuralları yalnızca oluşturulabilir ve Transact-SQL kullanılarak yönetilebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="d94c3-150">tooimprove performans, sunucu düzeyinde güvenlik duvarı kuralları hello veritabanı düzeyinde geçici olarak önbelleğe alınır.</span><span class="sxs-lookup"><span data-stu-id="d94c3-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="d94c3-151">toorefresh hello önbellek, bkz: [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="d94c3-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="d94c3-152">Kullanabileceğiniz [SQL veritabanı denetimi](sql-database-auditing.md) tooaudit sunucu ve veritabanı düzeyi güvenlik duvarı değişikliklerinin.</span><span class="sxs-lookup"><span data-stu-id="d94c3-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="d94c3-153">Azure portalına</span><span class="sxs-lookup"><span data-stu-id="d94c3-153">Azure portal</span></span>

<span data-ttu-id="d94c3-154">tooset bir sunucu düzeyinde güvenlik duvarı kuralı hello Azure portal, Azure veritabanı mantıksal sunucunuz için Azure SQL veritabanı veya hello genel bakış sayfasında ya da toohello Genel Bakış sayfasına gidebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d94c3-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="d94c3-155">Bir öğretici için bkz: [hello Azure portal oluşturma bir DB kullanarak](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d94c3-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="d94c3-156">**Veritabanı genel bakış sayfasında**</span><span class="sxs-lookup"><span data-stu-id="d94c3-156">**From database overview page**</span></span>

1. <span data-ttu-id="d94c3-157">tooset hello veritabanı genel bakış sayfasında, sunucu düzeyinde güvenlik duvarı kural'ı tıklatın **ayarlayın sunucu Güvenlik Duvarı** hello görüntü aşağıdaki gösterildiği gibi hello araç çubuğunda: Merhaba **Güvenlik Duvarı ayarları** hello SQL için sayfası Veritabanı sunucusu açar.</span><span class="sxs-lookup"><span data-stu-id="d94c3-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![sunucu güvenlik duvarı kuralı](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="d94c3-159">Tıklatın **istemci IP'si Ekle** hello bilgisayarın hello araç tooadd hello IP adresine kullanmakta olduğunuz ve ardından **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="d94c3-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="d94c3-160">Geçerli IP adresiniz için bir sunucu düzeyi güvenlik duvarı kuralı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d94c3-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![sunucu güvenlik duvarı kuralı ayarla](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="d94c3-162">**Server genel bakış sayfasında**</span><span class="sxs-lookup"><span data-stu-id="d94c3-162">**From server overview page**</span></span>

<span data-ttu-id="d94c3-163">Merhaba hello tam olarak gösteren, sunucu açılır genel bakış sayfasında tam sunucu adını (gibi **mynewserver20170403.database.windows.net**) ve diğer yapılandırmalar için seçenekler sağlar.</span><span class="sxs-lookup"><span data-stu-id="d94c3-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="d94c3-164">tooset server genel bakış sayfasında, sunucu düzeyi kuraldan tıklatın **Güvenlik Duvarı** görüntü aşağıdaki hello gösterdi gibi ayarları altında hello sol menüde:</span><span class="sxs-lookup"><span data-stu-id="d94c3-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![mantıksal sunucusuna genel bakış](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="d94c3-166">Tıklatın **istemci IP'si Ekle** hello bilgisayarın hello araç tooadd hello IP adresine kullanmakta olduğunuz ve ardından **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="d94c3-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="d94c3-167">Geçerli IP adresiniz için bir sunucu düzeyi güvenlik duvarı kuralı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="d94c3-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![sunucu güvenlik duvarı kuralı ayarla](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="d94c3-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="d94c3-169">Transact-SQL</span></span>
| <span data-ttu-id="d94c3-170">Katalog Görünümü veya Saklı Yordam</span><span class="sxs-lookup"><span data-stu-id="d94c3-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="d94c3-171">Düzey</span><span class="sxs-lookup"><span data-stu-id="d94c3-171">Level</span></span> | <span data-ttu-id="d94c3-172">Açıklama</span><span class="sxs-lookup"><span data-stu-id="d94c3-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="d94c3-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="d94c3-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="d94c3-174">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-174">Server</span></span> |<span data-ttu-id="d94c3-175">Merhaba geçerli sunucu düzeyinde güvenlik duvarı kurallarını görüntüler</span><span class="sxs-lookup"><span data-stu-id="d94c3-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="d94c3-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="d94c3-177">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-177">Server</span></span> |<span data-ttu-id="d94c3-178">Sunucu düzeyinde güvenlik duvarı kuralları oluşturur veya güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="d94c3-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="d94c3-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="d94c3-180">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-180">Server</span></span> |<span data-ttu-id="d94c3-181">Sunucu düzeyinde güvenlik duvarı kurallarını kaldırır</span><span class="sxs-lookup"><span data-stu-id="d94c3-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="d94c3-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="d94c3-183">Database</span><span class="sxs-lookup"><span data-stu-id="d94c3-183">Database</span></span> |<span data-ttu-id="d94c3-184">Merhaba geçerli veritabanı düzeyinde güvenlik duvarı kurallarını görüntüler</span><span class="sxs-lookup"><span data-stu-id="d94c3-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="d94c3-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="d94c3-186">Database</span><span class="sxs-lookup"><span data-stu-id="d94c3-186">Database</span></span> |<span data-ttu-id="d94c3-187">Oluşturur veya güncelleştirir hello veritabanı düzeyinde güvenlik duvarı kuralları</span><span class="sxs-lookup"><span data-stu-id="d94c3-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="d94c3-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="d94c3-189">Veritabanları</span><span class="sxs-lookup"><span data-stu-id="d94c3-189">Databases</span></span> |<span data-ttu-id="d94c3-190">Veritabanı düzeyinde güvenlik duvarı kurallarını kaldırır</span><span class="sxs-lookup"><span data-stu-id="d94c3-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="d94c3-191">Merhaba aşağıdaki örneklerde hello varolan kuralları gözden geçirin, bir IP adresi aralığı Contoso hello sunucuda etkinleştirmek ve bir güvenlik duvarı kuralını siler:</span><span class="sxs-lookup"><span data-stu-id="d94c3-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="d94c3-192">Daha sonra bir güvenlik duvarı kuralı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d94c3-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="d94c3-193">toodelete bir sunucu düzeyinde güvenlik duvarı kuralı hello sp_delete_firewall_rule saklı yordamını yürütün.</span><span class="sxs-lookup"><span data-stu-id="d94c3-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="d94c3-194">Merhaba aşağıdaki örnek ContosoFirewallRule adlı hello kuralını siler:</span><span class="sxs-lookup"><span data-stu-id="d94c3-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="d94c3-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="d94c3-195">Azure PowerShell</span></span>
| <span data-ttu-id="d94c3-196">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="d94c3-196">Cmdlet</span></span> | <span data-ttu-id="d94c3-197">Düzey</span><span class="sxs-lookup"><span data-stu-id="d94c3-197">Level</span></span> | <span data-ttu-id="d94c3-198">Açıklama</span><span class="sxs-lookup"><span data-stu-id="d94c3-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="d94c3-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="d94c3-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="d94c3-200">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-200">Server</span></span> |<span data-ttu-id="d94c3-201">Merhaba geçerli sunucu düzeyinde güvenlik duvarı kurallarını döndürür</span><span class="sxs-lookup"><span data-stu-id="d94c3-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="d94c3-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="d94c3-203">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-203">Server</span></span> |<span data-ttu-id="d94c3-204">Sunucu düzeyinde yeni bir güvenlik duvarı kuralı oluşturur</span><span class="sxs-lookup"><span data-stu-id="d94c3-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="d94c3-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="d94c3-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="d94c3-206">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-206">Server</span></span> |<span data-ttu-id="d94c3-207">Mevcut bir sunucu düzeyinde güvenlik duvarı kuralı Hello özelliklerini güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="d94c3-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="d94c3-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="d94c3-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="d94c3-209">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-209">Server</span></span> |<span data-ttu-id="d94c3-210">Sunucu düzeyinde güvenlik duvarı kurallarını kaldırır</span><span class="sxs-lookup"><span data-stu-id="d94c3-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="d94c3-211">Aşağıdaki örnek hello PowerShell kullanarak bir sunucu düzeyinde güvenlik duvarı kuralı ayarlar:</span><span class="sxs-lookup"><span data-stu-id="d94c3-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="d94c3-212">PowerShell ilişkin örnekler için hızlı başlangıç hello bağlamda bkz [oluşturma DB - PowerShell](sql-database-get-started-powershell.md) ve [tek bir veritabanı oluşturabilirsiniz ve PowerShell kullanarak bir güvenlik duvarı kuralı yapılandırma](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="d94c3-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="d94c3-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="d94c3-213">Azure CLI</span></span>
| <span data-ttu-id="d94c3-214">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="d94c3-214">Cmdlet</span></span> | <span data-ttu-id="d94c3-215">Düzey</span><span class="sxs-lookup"><span data-stu-id="d94c3-215">Level</span></span> | <span data-ttu-id="d94c3-216">Açıklama</span><span class="sxs-lookup"><span data-stu-id="d94c3-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="d94c3-217">az sql server güvenlik duvarı oluşturma</span><span class="sxs-lookup"><span data-stu-id="d94c3-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="d94c3-218">Merhaba girilen IP adresi aralığından hello sunucusunda bir güvenlik duvarı kuralı tooallow erişim tooall SQL veritabanları oluşturur.</span><span class="sxs-lookup"><span data-stu-id="d94c3-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="d94c3-219">az sql server güvenlik duvarı Sil</span><span class="sxs-lookup"><span data-stu-id="d94c3-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="d94c3-220">Bir güvenlik duvarı kuralını siler.</span><span class="sxs-lookup"><span data-stu-id="d94c3-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="d94c3-221">az sql server güvenlik duvarı listesi</span><span class="sxs-lookup"><span data-stu-id="d94c3-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="d94c3-222">Merhaba güvenlik duvarı kuralları listeler.</span><span class="sxs-lookup"><span data-stu-id="d94c3-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="d94c3-223">az sql server güvenlik duvarı kuralı Göster</span><span class="sxs-lookup"><span data-stu-id="d94c3-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="d94c3-224">Bir güvenlik duvarı kuralı Hello ayrıntılarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="d94c3-225">SQL server güvenlik duvarı kuralı güncelleştirmesi ax</span><span class="sxs-lookup"><span data-stu-id="d94c3-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="d94c3-226">Bir güvenlik duvarı kuralı güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-226">Updates a firewall rule.</span></span>

<span data-ttu-id="d94c3-227">Aşağıdaki örnek hello hello Azure CLI kullanarak bir sunucu düzeyinde güvenlik duvarı kuralı ayarlar:</span><span class="sxs-lookup"><span data-stu-id="d94c3-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="d94c3-228">Bir Azure CLI örneği hızlı bir başlangıç için hello bağlamda bkz [oluşturma Çiftazalanbakiye - Azure CLI](sql-database-get-started-cli.md) ve [tek bir veritabanı oluşturabilirsiniz ve hello Azure CLI kullanarak bir güvenlik duvarı kuralı yapılandırma](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="d94c3-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="d94c3-229">REST API</span><span class="sxs-lookup"><span data-stu-id="d94c3-229">REST API</span></span>
| <span data-ttu-id="d94c3-230">API</span><span class="sxs-lookup"><span data-stu-id="d94c3-230">API</span></span> | <span data-ttu-id="d94c3-231">Düzey</span><span class="sxs-lookup"><span data-stu-id="d94c3-231">Level</span></span> | <span data-ttu-id="d94c3-232">Açıklama</span><span class="sxs-lookup"><span data-stu-id="d94c3-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="d94c3-233">Güvenlik Duvarı Kurallarını Listele</span><span class="sxs-lookup"><span data-stu-id="d94c3-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="d94c3-234">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-234">Server</span></span> |<span data-ttu-id="d94c3-235">Merhaba geçerli sunucu düzeyinde güvenlik duvarı kurallarını görüntüler</span><span class="sxs-lookup"><span data-stu-id="d94c3-235">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-236">Güvenlik Duvarı Kuralı Oluştur</span><span class="sxs-lookup"><span data-stu-id="d94c3-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="d94c3-237">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-237">Server</span></span> |<span data-ttu-id="d94c3-238">Sunucu düzeyinde güvenlik duvarı kuralları oluşturur veya güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="d94c3-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="d94c3-239">Güvenlik Duvarı Kuralı Ayarla</span><span class="sxs-lookup"><span data-stu-id="d94c3-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="d94c3-240">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-240">Server</span></span> |<span data-ttu-id="d94c3-241">Mevcut bir sunucu düzeyinde güvenlik duvarı kuralı Hello özelliklerini güncelleştirir</span><span class="sxs-lookup"><span data-stu-id="d94c3-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="d94c3-242">Güvenlik Duvarı Kuralını Sil</span><span class="sxs-lookup"><span data-stu-id="d94c3-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="d94c3-243">Sunucu</span><span class="sxs-lookup"><span data-stu-id="d94c3-243">Server</span></span> |<span data-ttu-id="d94c3-244">Sunucu düzeyinde güvenlik duvarı kurallarını kaldırır</span><span class="sxs-lookup"><span data-stu-id="d94c3-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="d94c3-245">Sunucu düzeyinde güvenlik duvarı kuralı veritabanı düzeyinde güvenlik duvarı kuralı karşılaştırması</span><span class="sxs-lookup"><span data-stu-id="d94c3-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="d94c3-246">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-246">Q.</span></span> <span data-ttu-id="d94c3-247">Bir veritabanının kullanıcıları başka bir veritabanından tamamen yalıtılmış olması gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="d94c3-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="d94c3-248">Yanıt Evet ise, veritabanı düzeyinde güvenlik duvarı kurallarını kullanarak erişim izni.</span><span class="sxs-lookup"><span data-stu-id="d94c3-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="d94c3-249">Bu, savunma hello derinliğini azaltma tooall veritabanları hello güvenlik duvarı üzerinden erişime sunucu düzeyinde güvenlik duvarı kurallarını kullanarak önler.</span><span class="sxs-lookup"><span data-stu-id="d94c3-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="d94c3-250">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-250">Q.</span></span> <span data-ttu-id="d94c3-251">Başlangıç IP adresi'nın kullanıcılar tooall veritabanlarına erişim?</span><span class="sxs-lookup"><span data-stu-id="d94c3-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="d94c3-252">Sunucu düzeyinde güvenlik duvarı kuralları tooreduce hello sayısı güvenlik duvarı kuralları yapılandırmalısınız kullanın.</span><span class="sxs-lookup"><span data-stu-id="d94c3-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="d94c3-253">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-253">Q.</span></span> <span data-ttu-id="d94c3-254">Hello kişi ya da yalnızca hello güvenlik duvarı kuralları yapılandırma takım aracılığıyla Azure portalı, PowerShell hello veya REST API hello erişimi var mı?</span><span class="sxs-lookup"><span data-stu-id="d94c3-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="d94c3-255">Sunucu düzeyinde güvenlik duvarı kuralları kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="d94c3-256">Veritabanı düzeyinde güvenlik duvarı kuralları yalnızca Transact-SQL kullanılarak yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="d94c3-257">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-257">Q.</span></span> <span data-ttu-id="d94c3-258">Merhaba kişi veya hello güvenlik duvarı kuralları yapılandırma takım hello veritabanı düzeyinde üst düzey iznine sahip yasaklanmış?</span><span class="sxs-lookup"><span data-stu-id="d94c3-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="d94c3-259">Sunucu düzeyinde güvenlik duvarı kurallarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="d94c3-259">Use server-level firewall rules.</span></span> <span data-ttu-id="d94c3-260">Transact-SQL kullanarak veritabanı düzeyinde güvenlik duvarı kuralları yapılandırma en azından `CONTROL DATABASE` hello veritabanı düzeyinde izni.</span><span class="sxs-lookup"><span data-stu-id="d94c3-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="d94c3-261">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-261">Q.</span></span> <span data-ttu-id="d94c3-262">Hello kişi yapılandırma veya hello güvenlik duvarı kuralları, Denetim takım güvenlik duvarı kuralları çoğu için merkezi olarak yönetmek mi (belki de 100s) veritabanlarının?</span><span class="sxs-lookup"><span data-stu-id="d94c3-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="d94c3-263">Bu seçim, gereksinimleri ve ortam bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="d94c3-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="d94c3-264">Sunucu düzeyinde güvenlik duvarı kuralları daha kolay tooconfigure olabilir, ancak komut dosyası kuralları veritabanı düzeyi hello yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d94c3-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="d94c3-265">Ve sunucu düzeyinde güvenlik duvarı kuralları kullansanız bile, tooaudit hello veritabanı güvenlik duvarı kuralları, toosee gerekebilir kullanıcılarla `CONTROL` izni hello veritabanında veritabanı düzeyinde güvenlik duvarı kuralları oluşturdunuz.</span><span class="sxs-lookup"><span data-stu-id="d94c3-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="d94c3-266">Q.</span><span class="sxs-lookup"><span data-stu-id="d94c3-266">Q.</span></span> <span data-ttu-id="d94c3-267">Her iki sunucu ve veritabanı düzeyi güvenlik duvarı kuralları bir karışımını kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="d94c3-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="d94c3-268">Evet.</span><span class="sxs-lookup"><span data-stu-id="d94c3-268">Yes.</span></span> <span data-ttu-id="d94c3-269">Yöneticiler gibi bazı kullanıcıların sunucu düzeyinde güvenlik duvarı kuralları gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="d94c3-270">Kullanıcıların bir veritabanı uygulamasının gibi diğer kullanıcıların veritabanı düzeyinde güvenlik duvarı kuralları gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="d94c3-271">Merhaba veritabanı güvenlik duvarı sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="d94c3-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="d94c3-272">Merhaba beklediğiniz gibi erişim toohello Microsoft Azure SQL veritabanı hizmetinin davranıyor değil, aşağıdaki noktaları göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="d94c3-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="d94c3-273">**Yerel güvenlik duvarı yapılandırmasını:** bilgisayarınızı Azure SQL veritabanı erişmeden önce TCP bağlantı noktası 1433 için bilgisayarınızda toocreate bir güvenlik duvarı özel durumu gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="d94c3-274">Hello Azure bulut sınır içinde bağlantıları yapıyorsanız, tooopen ek bağlantı noktaları olabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="d94c3-275">Merhaba daha fazla bilgi için bkz **SQL Database: içinde vs dışındaki** bölümünü [ADO.NET 4.5 ve SQL veritabanı için 1433 dışındaki bağlantı noktaları](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="d94c3-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="d94c3-276">**Ağ adresi çevirisi (NAT):** son tooNAT, SQL veritabanı, bilgisayar IP yapılandırma ayarları'nda gösterilen başlangıç IP adresi farklı, bilgisayar tooconnect tooAzure tarafından kullanılan başlangıç IP adresi.</span><span class="sxs-lookup"><span data-stu-id="d94c3-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="d94c3-277">Bilgisayarınız tooview başlangıç IP adresi tooconnect tooAzure kullanarak toohello Portalı'nda oturum açın ve toohello gidin **yapılandırma** veritabanınızı barındıran hello sunucu sekmesinde.</span><span class="sxs-lookup"><span data-stu-id="d94c3-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="d94c3-278">Merhaba altında **izin verilen IP adreslerini** hello bölümünde **geçerli istemci IP adresi** görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="d94c3-279">Tıklatın **Ekle** toohello **izin verilen IP adreslerini** tooallow bu bilgisayar tooaccess hello sunucusu.</span><span class="sxs-lookup"><span data-stu-id="d94c3-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="d94c3-280">**Değişiklikleri toohello izin verilenler listesine etkili olmamıştır değil:** için beş dakikalık bir gecikmeyle toohello Azure SQL veritabanı güvenlik duvarı yapılandırması tootake etkili değişiklikler kadar olabilir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="d94c3-281">**Merhaba oturum açma yetkisi yok veya hatalı bir parolanın kullanıldı:** bir oturum açma izinleri hello Azure SQL veritabanı sunucusunda yok veya kullanılan hello parola yanlış hello bağlantı toohello Azure SQL veritabanı sunucusu reddedildi.</span><span class="sxs-lookup"><span data-stu-id="d94c3-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="d94c3-282">Bir güvenlik duvarı ayarı oluşturma istemciler yalnızca bir fırsat tooattempt tooyour sunucusuyla bağlantı kuruluyor sağlar; her istemci hello gerekli güvenlik kimlik bilgilerini sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d94c3-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="d94c3-283">Oturumları hazırlama hakkında daha fazla bilgi için bkz. Azure SQL Veritabanında Veritabanı, Oturum ve Kullanıcıları Yönetme.</span><span class="sxs-lookup"><span data-stu-id="d94c3-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="d94c3-284">**Dinamik IP adresi:** dinamik IP adresleme ile Internet bağlantınız varsa ve hello güvenlik duvarı üzerinden alma sorun yaşıyorsanız, çözümleri aşağıdaki hello birini deneyebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d94c3-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="d94c3-285">Başlangıç IP adresi aralığı, Internet servis sağlayıcısı (ISS) erişim hello Azure SQL veritabanı sunucusunu tooyour istemci bilgisayarlara atanan isteyin ve sonra başlangıç IP adresi aralığı bir güvenlik duvarı kuralı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d94c3-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="d94c3-286">Statik IP bunun yerine istemci bilgisayarlarınız için adresleme alın ve ardından güvenlik duvarı kuralları hello IP adreslerini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d94c3-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d94c3-287">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="d94c3-287">Next steps</span></span>

- <span data-ttu-id="d94c3-288">Hızlı bir başlangıç bir veritabanı ve sunucu düzeyinde güvenlik duvarı kuralı oluşturma hakkında bilgi için bkz: [bir Azure SQL veritabanı oluşturma](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d94c3-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="d94c3-289">Açık kaynak ya da üçüncü taraf uygulamalar bağlanan tooan Azure SQL veritabanında Yardım için bkz. [istemcisi hızlı başlangıç kod örnekleri tooSQL veritabanı](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="d94c3-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="d94c3-290">Merhaba tooopen gerekebilir ek bağlantı noktaları hakkında bilgi için bkz: **SQL veritabanı: içinde vs dışındaki** bölümünü [ADO.NET 4.5 ve SQL veritabanı için 1433 dışındaki bağlantı noktaları](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="d94c3-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="d94c3-291">Azure SQL Database güvenliğine genel bakış için bkz: [veritabanınızın güvenliğini sağlama](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="d94c3-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
