---
title: "aaaRolling uygulama yükseltmelerini - Azure SQL veritabanı | Microsoft Docs"
description: "Bilgi nasıl toouse Azure SQL Database coğrafi çoğaltma toosupport çevrimiçi yükseltmeler bulut uygulamanızın."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 58f42859-1e37-463c-a3d8-a3ca2e867148
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/16/2016
ms.author: sashan
ms.openlocfilehash: 18c56300916d129bff141624cc5c416b500408d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="managing-rolling-upgrades-of-cloud-applications-using-sql-database-active-geo-replication"></a><span data-ttu-id="5a2c8-103">SQL veritabanı etkin coğrafi çoğaltma'yı kullanarak bulut uygulamalarının yükseltmelerini yönetme</span><span class="sxs-lookup"><span data-stu-id="5a2c8-103">Managing rolling upgrades of cloud applications using SQL Database active geo-replication</span></span>
> [!NOTE]
> <span data-ttu-id="5a2c8-104">[Aktif coğrafi çoğaltma](sql-database-geo-replication-overview.md) tüm katmanlar tüm veritabanları için kullanıma sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-104">[Active geo-replication](sql-database-geo-replication-overview.md) is now available for all databases in all tiers.</span></span>
> 

<span data-ttu-id="5a2c8-105">Bilgi nasıl toouse [coğrafi çoğaltma](sql-database-geo-replication-overview.md) SQL veritabanı tooenable çalışırken bulut uygulamanızın yükseltme.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-105">Learn how toouse [geo-replication](sql-database-geo-replication-overview.md) in SQL Database tooenable rolling upgrades of your cloud application.</span></span> <span data-ttu-id="5a2c8-106">Yükseltme benzer bir işlem olduğundan, iş sürekliliği planlama ve tasarım parçası olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-106">Because upgrade is a disruptive operation, it should be part of your business continuity planning and design.</span></span> <span data-ttu-id="5a2c8-107">Biz yönetme hello iki farklı yöntemleri arayın bu makalede yükseltme işlemine ve hello avantajları ve dengelemeler her seçenekle tartışın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-107">In this article we look at two different methods of orchestrating hello upgrade process, and discuss hello benefits and trade-offs of each option.</span></span> <span data-ttu-id="5a2c8-108">Web sitesi bağlı tooa tek bir veritabanı, veri katmanı olarak oluşan basit bir uygulama, bu makalenin Hello amacıyla kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-108">For hello purposes of this article we will use a simple application that consists of a web site connected tooa single database as its data tier.</span></span> <span data-ttu-id="5a2c8-109">Amacımız hello son kullanıcı deneyimi üzerinde önemli bir etkisi olmadan hello uygulama tooversion 2 tooupgrade sürüm 1 ' dir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-109">Our goal is tooupgrade version 1 of hello application tooversion 2 without any significant impact on hello end-user experience.</span></span> 

<span data-ttu-id="5a2c8-110">Merhaba yükseltme seçenekleri değerlendirirken Etkenler aşağıdaki hello düşünmelisiniz:</span><span class="sxs-lookup"><span data-stu-id="5a2c8-110">When evaluating hello upgrade options you should consider hello following factors:</span></span>

* <span data-ttu-id="5a2c8-111">Yükseltme sırasında uygulama kullanılabilirliği üzerindeki etkisini.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-111">Impact on application availability during upgrades.</span></span> <span data-ttu-id="5a2c8-112">Ne kadar süreyle hello uygulama işlevi sınırlı düşürülmüş veya olabilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-112">How long hello application function may be limited or degraded.</span></span>
* <span data-ttu-id="5a2c8-113">Özelliği tooroll yükseltmenin başarısız olması durumunda yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-113">Ability tooroll back in case of an upgrade failure.</span></span>
* <span data-ttu-id="5a2c8-114">Güvenlik Açığı hello yükseltme sırasında ilgisiz geri dönülemez bir hata oluşursa, hello uygulamasının.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-114">Vulnerability of hello application if an unrelated catastrophic failure occurs during hello upgrade.</span></span>
* <span data-ttu-id="5a2c8-115">Maliyet toplam dolar.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-115">Total dollar cost.</span></span>  <span data-ttu-id="5a2c8-116">Bu ek artıklık ve artımlı maliyetleri hello yükseltme işlemi tarafından kullanılan hello geçici bileşenleri içerir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-116">This includes additional redundancy and incremental costs of hello temporary components  used by hello upgrade process.</span></span> 

## <a name="upgrading-applications-that-rely-on-database-backups-for-disaster-recovery"></a><span data-ttu-id="5a2c8-117">Olağanüstü durum kurtarma için veritabanı yedeklemeleri kullanan uygulamalar yükseltme</span><span class="sxs-lookup"><span data-stu-id="5a2c8-117">Upgrading applications that rely on database backups for disaster recovery</span></span>
<span data-ttu-id="5a2c8-118">Uygulamanızın üzerinde otomatik veritabanı yedeklemeyi kullanır ve olağanüstü durum kurtarma için coğrafi geri yükleme kullanıyorsa, bu genellikle dağıtılan tooa tek Azure bölgedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-118">If your application relies on automatic database backups and uses geo-restore for disaster recovery, it is usually deployed tooa single Azure region.</span></span> <span data-ttu-id="5a2c8-119">Bu durumda hello yükseltme işlemi, tüm uygulama bileşenleri yedekleme dağıtımını hello yükseltme katılan oluşturma içerir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-119">In this case hello upgrade process involves creating a backup deployment of all application components involved in hello upgrade.</span></span> <span data-ttu-id="5a2c8-120">toominimize hello son kullanıcı kesintisi hello yük devretme profiliyle Azure trafik Yöneticisi (WATM) özelliğinden yararlanır.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-120">toominimize hello end-user disruption you will leverage Azure Traffic Manager (WATM) with hello failover profile.</span></span>  <span data-ttu-id="5a2c8-121">Aşağıdaki diyagramda hello hello işletimsel ortamı önceki toohello yükseltme işlemi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-121">hello following diagram illustrates hello operational environment prior toohello upgrade process.</span></span> <span data-ttu-id="5a2c8-122">uç nokta hello <i>contoso 1.azurewebsites.net</i> toobe yükseltilmesi gerekiyor hello uygulamasının üretim yuvasını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-122">hello endpoint <i>contoso-1.azurewebsites.net</i> represents a production slot of hello application that needs toobe upgraded.</span></span> <span data-ttu-id="5a2c8-123">tooenable hello özelliği tooroll geri Merhaba yükseltme, tam olarak eşitlenen bir kopyasını hello uygulama ile bir aşama yuva oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-123">tooenable hello ability tooroll back hello upgrade, you need create a stage slot with a fully synchronized copy of hello application.</span></span> <span data-ttu-id="5a2c8-124">Merhaba aşağıdaki adımları hello yükseltme için gerekli tooprepare Merhaba uygulaması şunlardır:</span><span class="sxs-lookup"><span data-stu-id="5a2c8-124">hello following steps are required tooprepare hello application for hello upgrade:</span></span>

1. <span data-ttu-id="5a2c8-125">Merhaba yükseltme için hazırlamak yuva oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-125">Create a stage slot for hello upgrade.</span></span> <span data-ttu-id="5a2c8-126">ikincil bir veritabanı (1) oluşturmak ve hello özdeş bir web sitesinde dağıtan toodo aynı Azure bölgesi.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-126">toodo that create a secondary database (1) and deploy an identical web site in hello same Azure region.</span></span> <span data-ttu-id="5a2c8-127">İşlem dengeli hello tamamlanırsa hello ikincil toosee izleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-127">Monitor hello secondary toosee if hello seeding process is completed.</span></span>
2. <span data-ttu-id="5a2c8-128">WATM'ye ile bir yük devretme profili <i>contoso 1.azurewebsites.net</i> çevrimiçi uç noktası olarak ve <i>contoso 2.azurewebsites.net</i> çevrimdışı olarak.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-128">Create a failover profile in WATM with <i>contoso-1.azurewebsites.net</i> as online endpoint and <i>contoso-2.azurewebsites.net</i> as offline.</span></span> 

> [!NOTE]
> <span data-ttu-id="5a2c8-129">Not hello hazırlık adımları Merhaba uygulaması hello üretim yuvasına etkilemez ve tam erişim modunda çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-129">Note hello preparation steps will not impact hello application in hello production slot and it can function in full access mode.</span></span>
>  

![SQL veritabanı Git çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option1-1.png)

<span data-ttu-id="5a2c8-132">Merhaba hazırlık adımları tamamladıktan sonra hello uygulama hello gerçek yükseltme için hazır.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-132">Once hello preparation steps are completed hello application is ready for hello actual upgrade.</span></span> <span data-ttu-id="5a2c8-133">Aşağıdaki diyagramda hello hello yükseltme işleminde hello adımlar gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-133">hello following diagram illustrates hello steps involved in hello upgrade process.</span></span> 

1. <span data-ttu-id="5a2c8-134">Merhaba birincil veritabanı hello üretim yuvası yalnızca tooread modunda (3) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-134">Set hello primary database in hello production slot tooread-only mode (3).</span></span> <span data-ttu-id="5a2c8-135">Bu durum, bu hello güvenli olduğunu garanti edemez üretim hello uygulama (V1) örneğini kalacak salt okunur böylece hello farklılıklara hello V1 ve V2 veritabanı örnekleri arasında önleme hello yükseltme sırasında.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-135">This will guarantee that hello production instance of hello application (V1) will remain read-only during hello upgrade thus preventing hello data divergence between hello V1 and V2 database instances.</span></span>  
2. <span data-ttu-id="5a2c8-136">Merhaba planlanan sonlandırma modu (4) kullanılarak hello ikincil veritabanı bağlantısını kesin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-136">Disconnect hello secondary database using hello planned termination mode (4).</span></span> <span data-ttu-id="5a2c8-137">Merhaba birincil veritabanı tam olarak eşitlenen bağımsız bir kopyasını oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-137">It will create a fully synchronized independent copy of hello primary database.</span></span> <span data-ttu-id="5a2c8-138">Bu veritabanı yükseltilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-138">This database will be upgraded.</span></span>
3. <span data-ttu-id="5a2c8-139">Hello birincil veritabanı tooread yazma modunu ve hello aşama yuvası (5) hello yükseltme betiğini çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-139">Turn hello primary database tooread-write mode and run hello upgrade script in hello stage slot  (5).</span></span>     

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option1-2.png)

<span data-ttu-id="5a2c8-142">Merhaba yükseltmesi başarıyla tamamlandı, hazır tooswitch Merhaba son kullanıcıların aşamalı toohello kopyalama hello uygulaması sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-142">If hello upgrade completed successfully you are now ready tooswitch hello end users toohello staged copy hello application.</span></span> <span data-ttu-id="5a2c8-143">Merhaba üretim yuvasına hello uygulamasının artık hale gelir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-143">It will now become hello production slot of hello application.</span></span>  <span data-ttu-id="5a2c8-144">Bu diyagramda aşağıdaki hello üzerinde gösterildiği gibi birkaç adım içerir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-144">This involves a few more steps as illustrated on hello following diagram.</span></span>

1. <span data-ttu-id="5a2c8-145">Merhaba çevrimiçi endpoint hello WATM profilinde çok geçiş<i>contoso 2.azurewebsites.net</i>, hangi noktaları toohello V2 sürüm hello web sitesinin (6).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-145">Switch hello online endpoint in hello WATM profile too<i>contoso-2.azurewebsites.net</i>, which points toohello V2 version of hello web site (6).</span></span> <span data-ttu-id="5a2c8-146">Şimdi hello V2 uygulama hello üretim yuvasıyla haline gelir ve hello son kullanıcı trafiğidir yönlendirilmiş tooit.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-146">It now becomes hello production slot with hello V2 application and hello end-user traffic is directed tooit.</span></span>  
2. <span data-ttu-id="5a2c8-147">Güvenli bir şekilde şekilde hello V1 uygulama bileşenleri artık ihtiyacınız varsa bunları (7) kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-147">If you no longer need hello V1 application components so you can safely remove them (7).</span></span>   

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option1-3.png)

<span data-ttu-id="5a2c8-150">Merhaba yükseltme işlemi başarısız olursa, örneğin hello yükseltme komut dosyası, tooan hata nedeniyle hello aşama yuvası sayılacağı tehlikeye.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-150">If hello upgrade process is unsuccessful, for example due tooan error in hello upgrade script, hello stage slot should be considered compromised.</span></span> <span data-ttu-id="5a2c8-151">tooroll hello uygulama toohello yükseltme öncesi durumu hello üretim yuvası toofull erişim hello uygulamada yalnızca geri yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-151">tooroll back hello application toohello pre-upgrade state you simply revert hello application in hello production slot toofull access.</span></span> <span data-ttu-id="5a2c8-152">Merhaba adımlar hello sonraki diyagramda gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-152">hello steps involved are shown on hello next diagram.</span></span>    

1. <span data-ttu-id="5a2c8-153">Merhaba veritabanı kopyası tooread-yazma modunda (8) olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-153">Set hello database copy tooread-write mode (8).</span></span> <span data-ttu-id="5a2c8-154">Bu geri yükler hello üretim yuvasındaki işlevsel olarak tam V1 hello.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-154">This will restore hello full V1 functionally in hello production slot.</span></span>
2. <span data-ttu-id="5a2c8-155">Merhaba kök neden analizi yapmak ve tehlikeye hello bileşenleri hello aşama yuva (9) kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-155">Perform hello root cause analysis and remove hello compromised components in hello stage slot (9).</span></span> 

<span data-ttu-id="5a2c8-156">Bu noktada Merhaba uygulaması tam olarak işlevsel ve hello yükseltme adımları yinelenebilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-156">At this point hello application is fully functional and hello upgrade steps can be repeated.</span></span>

> [!NOTE]
> <span data-ttu-id="5a2c8-157">zaten çok noktaları gibi hello geri alma WATM profilinde değişiklik gerektirmez<i>contoso 1.azurewebsites.net</i> etkin uç nokta hello gibi.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-157">hello rollback does not require changes in WATM profile as it already points too<i>contoso-1.azurewebsites.net</i> as hello active endpoint.</span></span>
> 
> 

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option1-4.png)

<span data-ttu-id="5a2c8-160">başlangıç anahtarı **avantajı** bu uygulamanın basit adımları kümesini kullanarak tek bir bölgedeki yükseltebilirsiniz seçeneğidir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-160">hello key **advantage** of this option is that you can upgrade an application in a single region using a set of simple steps.</span></span> <span data-ttu-id="5a2c8-161">Merhaba dolar hello yükseltme nispeten düşük maliyetidir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-161">hello dollar cost of hello upgrade is relatively low.</span></span> <span data-ttu-id="5a2c8-162">Merhaba ana **kolaylığını** olduğundan, hello yükseltme hello kurtarma toohello yükseltme öncesi durumu sırasında yıkıcı bir hata oluşursa, içeren farklı bir bölgeye ve geri yükleme hello veritabanından hello uygulamasının yeniden dağıtımı coğrafi geri yükleme kullanarak yedekleme.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-162">hello main **tradeoff** is that if a catastrophic failure occurs during hello upgrade hello recovery toohello pre-upgrade state will involve re-deployment of hello application in a different region and restoring hello database from backup using geo-restore.</span></span> <span data-ttu-id="5a2c8-163">Bu işlem, önemli kapalı kalma sürelerine neden olur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-163">This process will result in significant downtime.</span></span>   

## <a name="upgrading-applications-that-rely-on-database-geo-replication-for-disaster-recovery"></a><span data-ttu-id="5a2c8-164">Olağanüstü durum kurtarma için veritabanı coğrafi çoğaltma kullanan uygulamalar yükseltme</span><span class="sxs-lookup"><span data-stu-id="5a2c8-164">Upgrading applications that rely on database geo-replication for disaster recovery</span></span>
<span data-ttu-id="5a2c8-165">Coğrafi çoğaltma iş sürekliliği için uygulamanızı yararlanır, etkin bir birincil bölge dağıtım ve yedekleme bölge bekleme bir dağıtımda sahip farklı bölgelere dağıtılan tooat en az iki olur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-165">If your application leverages geo-replication for business continuity, it is deployed  tooat least two different regions with an active deployment in Primary region and a standby deployment in Backup region.</span></span> <span data-ttu-id="5a2c8-166">Ayrıca toohello Etkenler daha önce hello yükseltme işlemi, güvence altına almalıdır belirtildiği:</span><span class="sxs-lookup"><span data-stu-id="5a2c8-166">In addition toohello factors mentioned earlier, hello upgrade process must guarantee that:</span></span>

* <span data-ttu-id="5a2c8-167">Merhaba uygulaması hello yükseltme işlemi sırasında her zaman geri dönülemez hatalarından korumalı olarak kalır</span><span class="sxs-lookup"><span data-stu-id="5a2c8-167">hello application remains protected from catastrophic failures at all times during hello upgrade process</span></span>
* <span data-ttu-id="5a2c8-168">Merhaba coğrafi olarak yedekli hello uygulama bileşenlerinin hello active bileşenleri ile paralel yükseltilir</span><span class="sxs-lookup"><span data-stu-id="5a2c8-168">hello geo-redundant components of hello application are upgraded in parallel with hello active components</span></span>

<span data-ttu-id="5a2c8-169">tooachieve hello yük devretme kullanarak Azure trafik Yöneticisi (WATM) özelliğinden yararlanır bu hedefleri tane aktif, üç yedekleme uç noktaları ile profil.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-169">tooachieve these goals you will leverage Azure Traffic Manager (WATM) using hello failover profile with one active and three backup endpoints.</span></span>  <span data-ttu-id="5a2c8-170">Aşağıdaki diyagramda hello hello işletimsel ortamı önceki toohello yükseltme işlemi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-170">hello following diagram illustrates hello operational environment prior toohello upgrade process.</span></span> <span data-ttu-id="5a2c8-171">Merhaba web siteleri <i>contoso 1.azurewebsites.net</i> ve <i>contoso dr.azurewebsites.net</i> üretim yuvasına hello uygulamasının tam coğrafi artıklık ile temsil eder.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-171">hello web sites <i>contoso-1.azurewebsites.net</i> and <i>contoso-dr.azurewebsites.net</i> represent a production slot of hello application with full geographic redundancy.</span></span> <span data-ttu-id="5a2c8-172">tooenable hello özelliği tooroll geri Merhaba yükseltme, tam olarak eşitlenen bir kopyasını hello uygulama ile bir aşama yuva oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-172">tooenable hello ability tooroll back hello upgrade, you need create a stage slot with a fully synchronized copy of hello application.</span></span> <span data-ttu-id="5a2c8-173">Merhaba yükseltme işlemi sırasında yıkıcı bir hata oluşması durumunda Merhaba uygulaması hızla kurtarabilirsiniz tooensure gerektiğinden, hello aşama yuvası toobe coğrafi olarak yedekli de gerekir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-173">Because you need tooensure that hello application can quickly recover in case a catastrophic failure occurs during hello upgrade process, hello stage slot needs toobe geo-redundant as well.</span></span> <span data-ttu-id="5a2c8-174">Merhaba aşağıdaki adımları hello yükseltme için gerekli tooprepare Merhaba uygulaması şunlardır:</span><span class="sxs-lookup"><span data-stu-id="5a2c8-174">hello following steps are required tooprepare hello application for hello upgrade:</span></span>

1. <span data-ttu-id="5a2c8-175">Merhaba yükseltme için hazırlamak yuva oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-175">Create a stage slot for hello upgrade.</span></span> <span data-ttu-id="5a2c8-176">ikincil bir veritabanı (1) oluşturmak ve hello hello web sitesinde özdeş bir kopyasını dağıtan toodo aynı Azure bölgesi.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-176">toodo that create a secondary database (1) and deploy an identical copy of hello web site in hello same Azure region.</span></span> <span data-ttu-id="5a2c8-177">İşlem dengeli hello tamamlanırsa hello ikincil toosee izleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-177">Monitor hello secondary toosee if hello seeding process is completed.</span></span>
2. <span data-ttu-id="5a2c8-178">Coğrafi çoğaltma tarafından hello aşama yuvasında coğrafi olarak yedekli ikincil bir veritabanı oluşturmak hello ikincil veritabanı toohello yedekleme bölge (denir "coğrafi çoğaltma zincirleme").</span><span class="sxs-lookup"><span data-stu-id="5a2c8-178">Create a geo-redundant secondary database in hello stage slot by geo-replicating hello secondary database toohello backup region (this is called "chained geo-replication").</span></span> <span data-ttu-id="5a2c8-179">İşlem dengeli hello tamamlanmış (3) ise hello yedekleme ikincil toosee izleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-179">Monitor hello backup secondary toosee if hello seeding process is completed (3).</span></span>
3. <span data-ttu-id="5a2c8-180">Merhaba yedekleme bölgede hello web sitesi yedek bir kopyasını oluşturun ve onu toohello coğrafi olarak yedekli ikincil (4) bağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-180">Create a standby copy of hello web site in hello backup region and link it toohello geo-redundant secondary (4).</span></span>  
4. <span data-ttu-id="5a2c8-181">Merhaba ek uç noktaları ekleme <i>contoso 2.azurewebsites.net</i> ve <i>contoso 3.azurewebsites.net</i> toohello yük devretme profilinde WATM çevrimdışı uç noktalar (5) olarak.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-181">Add hello additional endpoints <i>contoso-2.azurewebsites.net</i> and <i>contoso-3.azurewebsites.net</i> toohello failover profile in WATM as offline endpoints (5).</span></span> 

> [!NOTE]
> <span data-ttu-id="5a2c8-182">Not hello hazırlık adımları Merhaba uygulaması hello üretim yuvasına etkilemez ve tam erişim modunda çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-182">Note hello preparation steps will not impact hello application in hello production slot and it can function in full access mode.</span></span>
> 
> 

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option2-1.png)

<span data-ttu-id="5a2c8-185">Hello hazırlık adımları tamamlandığında, hello aşama yuvası hello yükseltme için hazır olur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-185">Once hello preparation steps are completed, hello stage slot is ready for hello upgrade.</span></span> <span data-ttu-id="5a2c8-186">Aşağıdaki diyagramda hello hello yükseltme adımları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-186">hello following diagram illustrates hello upgrade steps.</span></span>

1. <span data-ttu-id="5a2c8-187">Merhaba birincil veritabanı hello üretim yuvası yalnızca tooread modunda (6) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-187">Set hello primary database in hello production slot tooread-only mode (6).</span></span> <span data-ttu-id="5a2c8-188">Bu durum, bu hello güvenli olduğunu garanti edemez üretim hello uygulama (V1) örneğini kalacak salt okunur böylece hello farklılıklara hello V1 ve V2 veritabanı örnekleri arasında önleme hello yükseltme sırasında.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-188">This will guarantee that hello production instance of hello application (V1) will remain read-only during hello upgrade thus preventing hello data divergence between hello V1 and V2 database instances.</span></span>  
2. <span data-ttu-id="5a2c8-189">Merhaba ikincil veritabanı bağlantısını hello planlanan sonlandırma modu (7) hello kullanarak aynı bölge.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-189">Disconnect hello secondary database in hello same region using hello planned termination mode (7).</span></span> <span data-ttu-id="5a2c8-190">Birincil hello sonlandırma sonra otomatik olarak olacak hello birincil veritabanı tam olarak eşitlenen bağımsız bir kopyasını oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-190">It will create a fully synchronized independent copy of hello primary database, which will automatically become a primary after hello termination.</span></span> <span data-ttu-id="5a2c8-191">Bu veritabanı yükseltilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-191">This database will be upgraded.</span></span>
3. <span data-ttu-id="5a2c8-192">Merhaba birincil veritabanı hello aşama yuvası tooread-yazma modunda açın ve hello yükseltme komut dosyası (8) çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-192">Turn hello primary database in hello stage slot tooread-write mode and run hello upgrade script (8).</span></span>    

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option2-2.png)

<span data-ttu-id="5a2c8-195">Merhaba yükseltmesi başarıyla tamamlandı, artık hazır tooswitch hello son kullanıcıların toohello V2 hello uygulama sürümü bulunur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-195">If hello upgrade completed successfully you are now ready tooswitch hello end users toohello V2 version of hello application.</span></span> <span data-ttu-id="5a2c8-196">Aşağıdaki diyagramda hello hello adımlar gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-196">hello following diagram illustrates hello steps involved.</span></span>

1. <span data-ttu-id="5a2c8-197">Merhaba etkin uç nokta hello WATM profilinde çok geçiş<i>contoso 2.azurewebsites.net</i>, şimdi hello web sitesinin (9) toohello V2 sürümünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-197">Switch hello active endpoint in hello WATM profile too<i>contoso-2.azurewebsites.net</i>, which now points toohello V2 version of hello web site (9).</span></span> <span data-ttu-id="5a2c8-198">Şimdi hello V2 uygulama üretim yuvasıyla haline gelir ve yönlendirilmiş tooit son kullanıcı trafiğidir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-198">It now becomes a production slot with hello V2 application and end-user traffic is directed tooit.</span></span> 
2. <span data-ttu-id="5a2c8-199">Güvenli bir şekilde şekilde hello V1 uygulama artık ihtiyacınız varsa onu (10 ve 11) kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-199">If you no longer need hello V1 application so you can safely remove it (10 and 11).</span></span>  

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option2-3.png)

<span data-ttu-id="5a2c8-202">Merhaba yükseltme işlemi başarısız olursa, örneğin hello yükseltme komut dosyası, tooan hata nedeniyle hello aşama yuvası sayılacağı tehlikeye.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-202">If hello upgrade process is unsuccessful, for example due tooan error in hello upgrade script, hello stage slot should be considered compromised.</span></span> <span data-ttu-id="5a2c8-203">tooroll hello uygulama toohello yükseltme öncesi durumu yalnızca tam erişimi olan hello üretim yuvasındaki toousing Merhaba uygulaması geri yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-203">tooroll back hello application toohello pre-upgrade state you simply revert toousing hello application in hello production slot with full access.</span></span> <span data-ttu-id="5a2c8-204">Merhaba adımlar hello sonraki diyagramda gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-204">hello steps involved are shown on hello next diagram.</span></span>    

1. <span data-ttu-id="5a2c8-205">Set hello birincil veritabanı kopyası hello üretim yuvası tooread-yazma modunda (12).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-205">Set hello primary database copy in hello production slot tooread-write mode (12).</span></span> <span data-ttu-id="5a2c8-206">Bu geri yükler hello üretim yuvasındaki işlevsel olarak tam V1 hello.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-206">This will restore hello full V1 functionally in hello production slot.</span></span>
2. <span data-ttu-id="5a2c8-207">Merhaba kök neden analizi yapmak ve tehlikeye hello bileşenleri hello aşama yuvada (13 ve 14) kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-207">Perform hello root cause analysis and remove hello compromised components in hello stage slot (13 and 14).</span></span> 

<span data-ttu-id="5a2c8-208">Bu noktada Merhaba uygulaması tam olarak işlevsel ve hello yükseltme adımları yinelenebilir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-208">At this point hello application is fully functional and hello upgrade steps can be repeated.</span></span>

> [!NOTE]
> <span data-ttu-id="5a2c8-209">zaten çok noktaları gibi hello geri alma WATM profilinde değişiklik gerektirmez <i>contoso 1.azurewebsites.net</i> etkin uç nokta hello gibi.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-209">hello rollback does not require changes in WATM profile as it already points too <i>contoso-1.azurewebsites.net</i> as hello active endpoint.</span></span>
> 
> 

![SQL Database coğrafi çoğaltma yapılandırması.](media/sql-database-manage-application-rolling-upgrade/Option2-4.png)

<span data-ttu-id="5a2c8-212">başlangıç anahtarı **avantajı** bu hello uygulama ve onun coğrafi olarak yedekli kopyalama paralel hello yükseltme sırasında iş sürekliliği ödün vermeden yükseltebilirsiniz, seçeneğidir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-212">hello key **advantage** of this option is that you can upgrade both hello application and its geo-redundant copy in parallel without compromising your business continuity during hello upgrade.</span></span> <span data-ttu-id="5a2c8-213">Merhaba ana **kolaylığını** her uygulama bileşeninin çift artıklığı gerektirir ve bu nedenle daha yüksek dolar maliyet oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-213">hello main **tradeoff** is that it requires double redundancy of each application component and therefore incurs higher dollar cost.</span></span> <span data-ttu-id="5a2c8-214">Ayrıca, daha karmaşık bir iş akışı içerir.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-214">It also involves a more complicated workflow.</span></span> 

## <a name="summary"></a><span data-ttu-id="5a2c8-215">Özet</span><span class="sxs-lookup"><span data-stu-id="5a2c8-215">Summary</span></span>
<span data-ttu-id="5a2c8-216">Merhaba makalesinde açıklanan hello iki yükseltme yöntemleri maliyet karmaşıklığı ve hello dolar içinde farklılık gösterir ancak her ikisi de hello son kullanıcı sınırlı yalnızca tooread işlemleri olduğunda hello süresini en aza indirerek üzerinde odaklanın.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-216">hello two upgrade methods described in hello article differ in complexity and hello dollar cost but they both focus on minimizing hello time when hello end user is limited tooread-only operations.</span></span> <span data-ttu-id="5a2c8-217">Bu süre doğrudan hello yükseltme komut dosyası hello süreye göre tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-217">That time is directly defined by hello duration of hello upgrade script.</span></span> <span data-ttu-id="5a2c8-218">Merhaba veritabanı boyutuna bağlı değildir, hello hizmet katmanı, size, seçerseniz, hello web sitesi yapılandırması ve kolayca denetleyemezsiniz diğer etkenlere bağlı.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-218">It does not depend on hello database size, hello service tier you chose, hello web site configuration and other factors that you cannot easily control.</span></span> <span data-ttu-id="5a2c8-219">Tüm hello hazırlık adımları hello yükseltme adımları ayrılmış Merhaba üretim uygulaması etkilemeden yapılabilir Bunun nedeni.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-219">This is because all hello preparation steps are decoupled from hello upgrade steps and can be done without impacting hello production application.</span></span> <span data-ttu-id="5a2c8-220">Merhaba yükseltme komut dosyası Hello verimliliğini yükseltmeler sırasında hello son kullanıcı deneyimini belirleyen hello anahtar faktördür.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-220">hello efficiency of hello upgrade script is hello key factor that determines hello end-user experience during upgrades.</span></span> <span data-ttu-id="5a2c8-221">Bu nedenle, artırabilir hello en iyi hello yükseltme komut dosyası olarak verimli hale çabalarınız odaklanan yoludur.</span><span class="sxs-lookup"><span data-stu-id="5a2c8-221">So hello best way you can improve it is by focusing your efforts on making hello upgrade script as efficient as possible.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="5a2c8-222">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="5a2c8-222">Next steps</span></span>
* <span data-ttu-id="5a2c8-223">İş sürekliliğine genel bakış ve senaryolar için bkz: [iş sürekliliğine genel bakış](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-223">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="5a2c8-224">Azure SQL veritabanı otomatik yedeklemeler hakkında toolearn bkz [SQL veritabanı yedeklemeleri otomatik](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-224">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="5a2c8-225">Kurtarma için otomatik yedeklemeler kullanma hakkında toolearn bkz [bir veritabanını otomatik yedeklerden geri](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-225">toolearn about using automated backups for recovery, see [restore a database from automated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="5a2c8-226">toolearn daha hızlı kurtarma seçenekleri hakkında bkz [aktif coğrafi çoğaltma](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5a2c8-226">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>


