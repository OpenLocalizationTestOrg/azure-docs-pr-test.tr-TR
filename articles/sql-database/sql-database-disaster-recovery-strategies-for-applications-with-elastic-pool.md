---
title: "aaaDesign olağanüstü durum kurtarma çözümleri - Azure SQL veritabanı | Microsoft Docs"
description: "Bilgi nasıl toodesign bulut çözümünüzü hello sağ yük düzeni seçerek olağanüstü durum kurtarma."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 9d9eca7570c7a01c992d0b33d449721709b471c3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="8c9d7-103">SQL Database esnek havuzları kullanan uygulamalar için olağanüstü durum kurtarma stratejileri</span><span class="sxs-lookup"><span data-stu-id="8c9d7-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="8c9d7-104">Merhaba yıllar içinde biz bulut Hizmetleri kusursuz değildir ve geri dönülemez olaylar gerçekleşir öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-104">Over hello years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="8c9d7-105">Bu olaylar gerçekleştiğinde SQL veritabanı, uygulamanızın iş sürekliliği hello çeşitli özellikleri tooprovide sağlar.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-105">SQL Database provides several capabilities tooprovide for hello business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="8c9d7-106">[Esnek havuzlar](sql-database-elastic-pool.md) ve tek veritabanlarını desteklemek hello olağanüstü durum kurtarma özellikleri aynı türde.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support hello same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="8c9d7-107">Esnek havuz için bu makalede birkaç DR stratejilerini açıklar. Bu SQL veritabanını iş sürekliliği özelliklerden yararlanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="8c9d7-108">Bu makalede kurallı SaaS ISV uygulama düzeni aşağıdaki hello kullanır:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-108">This article uses hello following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="8c9d7-109"><i>Modern bulut tabanlı web uygulamasının her son kullanıcı için bir SQL veritabanı sağlar. Merhaba ISV birçok müşteri vardır ve bu nedenle Kiracı veritabanları olarak bilinen birçok veritabanı kullanır. Merhaba Kiracı veritabanları genellikle öngörülemeyen etkinlik desenlerini sahip olduğundan hello ISV bir esnek havuz toomake hello veritabanı maliyeti çok tahmin edilebilir uzun süreler boyunca kullanır. Merhaba kullanıcı etkinliği ani zaman hello esnek havuz da hello performans yönetimini basitleştirir. Ayrıca toohello Kiracı veritabanları Merhaba uygulaması birkaç veritabanlarını da kullanan toomanage kullanıcı profilleri, güvenlik, kullanım desenlerini vb. topla. Merhaba tek tek kiracılar kullanılabilirliğini bütün olarak hello uygulamanın kullanılabilirliğini etkilemez. Ancak, hello kullanılabilirliğini ve performansını yönetim veritabanları hello uygulamanın işlevi için kritik öneme sahiptir ve hello yönetim veritabanları çevrimdışı hello tüm uygulama olduğunda çevrimdışı olur.</i></span><span class="sxs-lookup"><span data-stu-id="8c9d7-109"><i>A modern cloud-based web application provisions one SQL database for each end user. hello ISV has many customers and therefore uses many databases, known as tenant databases. Because hello tenant databases typically have unpredictable activity patterns, hello ISV uses an elastic pool toomake hello database cost very predictable over extended periods of time. hello elastic pool also simplifies hello performance management when hello user activity spikes. In addition toohello tenant databases hello application also uses several databases toomanage user profiles, security, collect usage patterns etc. Availability of hello individual tenants does not impact hello application’s availability as whole. However, hello availability and performance of management databases is critical for hello application’s function and if hello management databases are offline hello entire application is offline.</i></span></span>  

<span data-ttu-id="8c9d7-110">Bu makalede maliyet hassas başlangıç uygulamaları tooones sıkı kullanılabilirlik gereksinimleri olan senaryolarından aralığını kapsayan DR stratejiler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications tooones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="8c9d7-111">Senaryo 1.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-111">Scenario 1.</span></span> <span data-ttu-id="8c9d7-112">Hassas başlangıç maliyeti</span><span class="sxs-lookup"><span data-stu-id="8c9d7-112">Cost sensitive startup</span></span>
<span data-ttu-id="8c9d7-113"><i>Bir başlangıç iş 'M ve son derece hassas maliyet bildirimi.  Toosimplify dağıtımını ve yönetimini Merhaba uygulaması istediğiniz ve tek tek müşteriler için sınırlı bir SLA olabilir. Ancak bir bütün hiçbir zaman çevrimdışı olduğu gibi tooensure Merhaba uygulaması istiyorum.</i></span><span class="sxs-lookup"><span data-stu-id="8c9d7-113"><i>I am a startup business and am extremely cost sensitive.  I want toosimplify deployment and management of hello application and I can have a limited SLA for individual customers. But I want tooensure hello application as a whole is never offline.</i></span></span>

<span data-ttu-id="8c9d7-114">toosatisfy hello Basitlik gereksinim hello Azure bölgesi tercih ettiğiniz bir esnek havuzda içine tüm Kiracı veritabanları dağıtmak ve yönetim veritabanları coğrafi olarak çoğaltılmış tek veritabanları olarak dağıtın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-114">toosatisfy hello simplicity requirement, deploy all tenant databases into one elastic pool in hello Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="8c9d7-115">İçin Hello olağanüstü durum kurtarma kiracıların coğrafi hiçbir ek ücret gelen geri yükleme, kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-115">For hello disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="8c9d7-116">tooensure hello kullanılabilirliğini yönetim veritabanları, coğrafi replicate bunları hello otomatik yük devretme grubu (içinde-önizleme) (1. adım) kullanılarak tooanother bölge.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-116">tooensure hello availability of hello management databases, geo-replicate them tooanother region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="8c9d7-117">Merhaba devam eden hello olağanüstü durum kurtarma yapılandırması bu senaryoda eşit toohello toplam sahip olma maliyeti hello ikincil veritabanlarıyla maliyetidir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-117">hello ongoing cost of hello disaster recovery configuration in this scenario is equal toohello total cost of hello secondary databases.</span></span> <span data-ttu-id="8c9d7-118">Bu yapılandırma hello sonraki diyagramda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-118">This configuration is illustrated on hello next diagram.</span></span>

![Şekil 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="8c9d7-120">Merhaba birincil bölgede bir kesinti oluşursa, Kurtarma adımları toobring uygulamanızı çevrimiçi hello sonraki diyagram tarafından gösterilen hello.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-120">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated by hello next diagram.</span></span>

* <span data-ttu-id="8c9d7-121">Merhaba yük devretme grubu otomatik yük devretme hello yönetim veritabanı toohello DR bölgesinin başlatır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-121">hello failover group initiates automatic failover of hello management database toohello DR region.</span></span> <span data-ttu-id="8c9d7-122">Merhaba uygulaması otomatik olarak yeniden bağlanan toohello yeni birincil ve tüm yeni hesaplar ve Kiracı veritabanları hello DR bölgede oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-122">hello application is automatically reconnected toohello new primary and all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="8c9d7-123">Merhaba mevcut müşteriler geçici olarak devre dışı verilerini bakın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-123">hello existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="8c9d7-124">Merhaba ile Merhaba esnek havuz oluşturma aynı yapılandırmaya hello özgün havuz (2).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-124">Create hello elastic pool with hello same configuration as hello original pool (2).</span></span>
* <span data-ttu-id="8c9d7-125">Coğrafi geri yükleme toocreate kopyalarını hello Kiracı veritabanı (3) kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-125">Use geo-restore toocreate copies of hello tenant databases (3).</span></span> <span data-ttu-id="8c9d7-126">Merhaba tek tek geri yüklemeler hello son kullanıcı bağlantılar tarafından tetikleme göz önünde bulundurun veya başka bir uygulamaya özgü Öncelik düzenini kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-126">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="8c9d7-127">Bu noktada, uygulamanızın hello DR bölgede tekrar çevrimiçi değil, ancak bazı müşteriler kendi verilere erişirken gecikme olur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-127">At this point your application is back online in hello DR region, but some customers experience delay when accessing their data.</span></span>

![Şekil 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="8c9d7-129">Merhaba kesinti geçici varsa, tüm hello veritabanı geri yüklemeler hello DR bölgede tam önce o hello birincil bölge Azure tarafından kurtarılan mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-129">If hello outage was temporary, it is possible that hello primary region is recovered by Azure before all hello database restores are complete in hello DR region.</span></span> <span data-ttu-id="8c9d7-130">Bu durumda, taşıma hello uygulama arka toohello birincil bölge yönetirler.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-130">In this case, orchestrate moving hello application back toohello primary region.</span></span> <span data-ttu-id="8c9d7-131">Merhaba işlem hello sonraki diyagramda gösterildiği hello tedbirleri alır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-131">hello process takes hello steps illustrated on hello next diagram.</span></span>

* <span data-ttu-id="8c9d7-132">Tüm bekleyen coğrafi geri yükleme istekleri iptal edin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="8c9d7-133">Merhaba yönetim veritabanları toohello birincil bölge üzerinde (5) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-133">Fail over hello management databases toohello primary region (5).</span></span> <span data-ttu-id="8c9d7-134">Merhaba bölgenin kurtarma işleminden sonra hello eski ana otomatik olarak ikincil hale getirildi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-134">After hello region’s recovery, hello old primaries have automatically become secondaries.</span></span> <span data-ttu-id="8c9d7-135">Şimdi bunların rolleri yeniden geçin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="8c9d7-136">Merhaba uygulamanın bağlantı dizesi toopoint geri toohello birincil bölge değiştirin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-136">Change hello application's connection string toopoint back toohello primary region.</span></span> <span data-ttu-id="8c9d7-137">Şimdi tüm yeni hesaplarını ve Kiracı veritabanları hello birincil bölgede oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-137">Now all new accounts and tenant databases are created in hello primary region.</span></span> <span data-ttu-id="8c9d7-138">Bazı var olan müşteriler geçici olarak devre dışı verilerini bakın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="8c9d7-139">Tüm veritabanları hello DR bölgede (6) değiştirilemez hello DR havuzu yalnızca tooread tooensure ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-139">Set all databases in hello DR pool tooread-only tooensure they cannot be modified in hello DR region (6).</span></span> 
* <span data-ttu-id="8c9d7-140">Her bir veritabanı hello hello kurtarma bu yana değişti DR havuzu içinde yeniden adlandırın veya hello karşılık gelen veritabanlarını hello birincil havuzunda (7) silin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-140">For each database in hello DR pool that has changed since hello recovery, rename or delete hello corresponding databases in hello primary pool (7).</span></span> 
* <span data-ttu-id="8c9d7-141">Kopya hello hello DR toohello birincil havuzu (8) veritabanlarından güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-141">Copy hello updated databases from hello DR pool toohello primary pool (8).</span></span> 
* <span data-ttu-id="8c9d7-142">Merhaba DR havuzu (9) Sil</span><span class="sxs-lookup"><span data-stu-id="8c9d7-142">Delete hello DR pool (9)</span></span>

<span data-ttu-id="8c9d7-143">Bu noktada, uygulamanız tüm Kiracı veritabanları ile kullanılabilir hello birincil havuzunda hello birincil bölgede çevrimiçidir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-143">At this point your application is online in hello primary region with all tenant databases available in hello primary pool.</span></span>

![Şekil 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="8c9d7-145">başlangıç anahtarı **yararlı** bu strateji düşük devam eden veri katmanı artıklığı maliyetidir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-145">hello key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="8c9d7-146">Yedeklemeleri hello hiçbir ek ücret ödemeden hiçbir uygulama yeniden yazma ile SQL veritabanı hizmeti tarafından otomatik olarak alınır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-146">Backups are taken automatically by hello SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="8c9d7-147">Merhaba maliyet hello esnek veritabanları yalnızca geri yüklendiğinde oluşur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-147">hello cost is incurred only when hello elastic databases are restored.</span></span> <span data-ttu-id="8c9d7-148">Merhaba **dengelemeyi** hello tam kurtarma tüm Kiracı veritabanlarının önemli zaman gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-148">hello **trade-off** is that hello complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="8c9d7-149">Merhaba süre hello DR başlatmak geri yüklemeler toplam sayısı hello bağlıdır bölge ve hello toplam boyutunu veritabanlarını Kiracı.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-149">hello length of time depends on hello total number of restores you initiate in hello DR region and overall size of hello tenant databases.</span></span> <span data-ttu-id="8c9d7-150">Bazı kiracılar geri yüklemeler diğerlerine göre daha öncelikli olsa bile, rekabet halinde olduğunuz hello hizmet istemlerde ve toominimize kısıtlar tüm hello ile aynı bölgede başlatılan diğer geri yüklemeler hello hello hello mevcut müşterilerin veritabanlarında genel etkisi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-150">Even if you prioritize some tenants' restores over others, you are competing with all hello other restores that are initiated in hello same region as hello service arbitrates and throttles toominimize hello overall impact on hello existing customers' databases.</span></span> <span data-ttu-id="8c9d7-151">Ayrıca, Hello yeni esnek havuz hello DR bölgede oluşturulana kadar hello Kiracı veritabanlarının hello kurtarma başlatamıyor.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-151">In addition, hello recovery of hello tenant databases cannot start until hello new elastic pool in hello DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="8c9d7-152">Senaryo 2.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-152">Scenario 2.</span></span> <span data-ttu-id="8c9d7-153">Katmanlı hizmetiyle olgun uygulama</span><span class="sxs-lookup"><span data-stu-id="8c9d7-153">Mature application with tiered service</span></span>
<span data-ttu-id="8c9d7-154"><i>Katmanlı hizmet teklifleri ve deneme müşteriler ve müşterilerin ödeme için farklı SLA ile olgun bir SaaS uygulaması ben. Merhaba deneme müşteriler için mümkün olduğunca maliyet tooreduce hello sahibim. Deneme müşteriler kapalı kalma süresi alabilir ancak kendi olasılığını tooreduce istiyorum. Müşteriler ödeme hello için kapalı kalma süresi uçuş sorununa neden olur. Toomake ödeyen müşteri her zaman mümkün tooaccess olmasını istediğiniz şekilde verilerini.</i></span><span class="sxs-lookup"><span data-stu-id="8c9d7-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For hello trial customers, I have tooreduce hello cost as much as possible. Trial customers can take downtime but I want tooreduce its likelihood. For hello paying customers, any downtime is a flight risk. So I want toomake sure that paying customers are always able tooaccess their data.</i></span></span> 

<span data-ttu-id="8c9d7-155">Bu senaryo, ayrı hello deneme kiracılardan toosupport ayrı esnek havuzları halinde koyarak kiracılar Ücretli.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-155">toosupport this scenario, separate hello trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="8c9d7-156">Merhaba deneme müşterilerin Kiracı ve alt SLA daha uzun bir kurtarma süresi ile başına alt eDTU sahip.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-156">hello trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="8c9d7-157">Merhaba ödeyen Kiracı ve daha yüksek bir SLA başına daha yüksek eDTU ile bir havuzdaki müşterilerdir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-157">hello paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="8c9d7-158">tooguarantee hello düşük kurtarma süresini, coğrafi olarak çoğaltılmış hello ödeyen müşterilerin Kiracı veritabanları.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-158">tooguarantee hello lowest recovery time, hello paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="8c9d7-159">Bu yapılandırma hello sonraki diyagramda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-159">This configuration is illustrated on hello next diagram.</span></span> 

![Şekil 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="8c9d7-161">Tek bir coğrafi olarak çoğaltılmış veritabanı için (1) kullandığınız şekilde hello ilk senaryoda olduğu gibi hello yönetim veritabanları oldukça etkindir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-161">As in hello first scenario, hello management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="8c9d7-162">Bu yeni kullanıcı aboneliklerini, profil güncelleştirmeleri ve diğer yönetim işlemleri için hello tahmin edilebilir performans sağlar.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-162">This ensures hello predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="8c9d7-163">Merhaba hello ana hello yönetim veritabanlarının bulunduğu bölge hello birincil bölge ve hello ikinciller hello yönetim veritabanlarının bulunduğu hello bölge hello DR bölgesi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-163">hello region in which hello primaries of hello management databases reside is hello primary region and hello region in which hello secondaries of hello management databases reside is hello DR region.</span></span>

<span data-ttu-id="8c9d7-164">Merhaba ödeyen müşteri Kiracı veritabanı etkin veritabanları "Merhaba birincil bölge içinde sağlanan havuzu Ücretli" Merhaba sahip.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-164">hello paying customers’ tenant databases have active databases in hello “paid” pool provisioned in hello primary region.</span></span> <span data-ttu-id="8c9d7-165">İkincil bir havuzu hello hello DR bölgede aynı ad ile sağlayın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-165">Provision a secondary pool with hello same name in hello DR region.</span></span> <span data-ttu-id="8c9d7-166">Her bir kiracı toohello coğrafi olarak çoğaltılmış ikincil havuzu (2) değil.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-166">Each tenant is geo-replicated toohello secondary pool (2).</span></span> <span data-ttu-id="8c9d7-167">Bu, yük devretme kullanarak tüm Kiracı veritabanlarını Hızlı Kurtarma sağlar.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="8c9d7-168">Uygulamanızı çevrimiçi hello birincil bölgede hello kurtarma adımları toobring bir kesinti oluşursa hello sonraki şemada gösterilmiştir:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-168">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated in hello next diagram:</span></span>

![Şekil 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="8c9d7-170">Hemen hello yönetim veritabanları toohello DR bölge (3) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-170">Immediately fail over hello management databases toohello DR region (3).</span></span>
* <span data-ttu-id="8c9d7-171">Merhaba uygulamanın bağlantı dizesi toopoint toohello DR bölge değiştirin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-171">Change hello application’s connection string toopoint toohello DR region.</span></span> <span data-ttu-id="8c9d7-172">Şimdi tüm yeni hesaplarını ve Kiracı veritabanları hello DR bölgede oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-172">Now all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="8c9d7-173">Merhaba varolan deneme müşteriler geçici olarak devre dışı verilerini bakın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-173">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="8c9d7-174">Yük devretme kiracının veritabanları toohello hello DR bölge tooimmediately havuzunda Ücretli hello kullanılabilirliklerini (4) geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-174">Fail over hello paid tenant's databases toohello pool in hello DR region tooimmediately restore their availability (4).</span></span> <span data-ttu-id="8c9d7-175">Merhaba yük devretme hızlı meta veri düzeyi değişikliği olduğundan, burada hello bireysel yük devretme isteğe bağlı hello son kullanıcı bağlantılar tarafından tetiklenen bir iyileştirme göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-175">Since hello failover is a quick metadata level change, consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="8c9d7-176">Yalnızca gerekli hello kapasite tooprocess hello değişikliği bunlar sırasında ikincil kopya, olan günlükleri hello ikincil veritabanlarıyla hemen artırmak için hello havuz kapasitesi ikincil havuz eDTU boyutu hello birincil alt varsa şimdi tooaccommodate hello tam iş yükünü tüm kiracılar (5).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-176">If your secondary pool eDTU size was lower than hello primary because hello secondary databases only required hello capacity tooprocess hello change logs while they were secondaries, immediately increase hello pool capacity now tooaccommodate hello full workload of all tenants (5).</span></span> 
* <span data-ttu-id="8c9d7-177">İle aynı ad ve aynı hello hello Hello yeni esnek havuz oluşturma hello DR bölgede hello deneme müşterilerin veritabanları (6) için yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-177">Create hello new elastic pool with hello same name and hello same configuration in hello DR region for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="8c9d7-178">Merhaba deneme müşterilerin havuzu oluşturulduktan sonra coğrafi geri yükleme toorestore hello tek tek deneme Kiracı veritabanları hello yeni havuza (7) kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-178">Once hello trial customers’ pool is created, use geo-restore toorestore hello individual trial tenant databases into hello new pool (7).</span></span> <span data-ttu-id="8c9d7-179">Merhaba tek tek geri yüklemeler hello son kullanıcı bağlantılar tarafından tetikleme göz önünde bulundurun veya başka bir uygulamaya özgü Öncelik düzenini kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-179">Consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="8c9d7-180">Bu noktada, uygulamanızın hello DR bölgede tekrar çevrimiçi değil.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-180">At this point your application is back online in hello DR region.</span></span> <span data-ttu-id="8c9d7-181">Tüm ödeyen müşteri erişimi tootheir verileri hello deneme müşteriler kendi verilere erişirken gecikme olur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-181">All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="8c9d7-182">Ne zaman hello birincil bölge kurtarılan Azure tarafından *sonra* Merhaba uygulaması bu bölgede Merhaba uygulaması çalıştıran devam edebilirsiniz hello DR bölgede geri veya toofail geri toohello birincil bölge karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-182">When hello primary region is recovered by Azure *after* you have restored hello application in hello DR region you can continue running hello application in that region or you can decide toofail back toohello primary region.</span></span> <span data-ttu-id="8c9d7-183">Merhaba birincil bölge kurtarıldığında *önce* hello yük devretme işlemi tamamlandığında, sonradan başarısız olan hemen göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-183">If hello primary region is recovered *before* hello failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="8c9d7-184">Merhaba geri dönme hello sonraki diyagramda gösterildiği hello adımları gerçekleştirir:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-184">hello failback takes hello steps illustrated in hello next diagram:</span></span> 

![Şekil 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="8c9d7-186">Tüm bekleyen coğrafi geri yükleme istekleri iptal edin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="8c9d7-187">Merhaba yönetim veritabanları (8) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-187">Fail over hello management databases (8).</span></span> <span data-ttu-id="8c9d7-188">Merhaba bölgenin kurtarma işleminden sonra hello eski birincil otomatik hale hello ikincil.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-188">After hello region’s recovery, hello old primary automatically become hello secondary.</span></span> <span data-ttu-id="8c9d7-189">Bu duruma şimdi yeniden birincil hello.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-189">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="8c9d7-190">Kiracı veritabanı (9) Ücretli hello başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-190">Fail over hello paid tenant databases (9).</span></span> <span data-ttu-id="8c9d7-191">Benzer şekilde, hello bölgenin kurtarma işleminden sonra hello eski ana otomatik olarak hello ikinciller haline gelir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-191">Similarly, after hello region’s recovery, hello old primaries automatically become hello secondaries.</span></span> <span data-ttu-id="8c9d7-192">Şimdi hello ana yeniden olduklarında.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-192">Now they become hello primaries again.</span></span> 
* <span data-ttu-id="8c9d7-193">Set hello hello DR bölge yalnızca tooread (10) değiştirilmiştir deneme veritabanları geri.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-193">Set hello restored trial databases that have changed in hello DR region tooread-only (10).</span></span>
* <span data-ttu-id="8c9d7-194">Her veritabanı hello kurtarma beri değiştirilen hello deneme müşteriler DR havuzunda yeniden adlandırın veya hello karşılık gelen veritabanı hello deneme müşteriler birincil havuzunda (11) silin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-194">For each database in hello trial customers DR pool that changed since hello recovery, rename or delete hello corresponding database in hello trial customers primary pool (11).</span></span> 
* <span data-ttu-id="8c9d7-195">Kopya hello hello DR toohello birincil havuzu (12) veritabanlarından güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-195">Copy hello updated databases from hello DR pool toohello primary pool (12).</span></span> 
* <span data-ttu-id="8c9d7-196">Merhaba DR havuzu (13) Sil</span><span class="sxs-lookup"><span data-stu-id="8c9d7-196">Delete hello DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="8c9d7-197">Merhaba yük devretme işlemi zaman uyumsuzdur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-197">hello failover operation is asynchronous.</span></span> <span data-ttu-id="8c9d7-198">toominimize hello kurtarma süresini en az 20 veritabanları toplu olarak hello Kiracı veritabanı yük devretme komutu yürütün önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-198">toominimize hello recovery time it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="8c9d7-199">başlangıç anahtarı **yararlı** bu strateji onu hello yüksek SLA müşteriler ödeme Merhaba sağlamasıdır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-199">hello key **benefit** of this strategy is that it provides hello highest SLA for hello paying customers.</span></span> <span data-ttu-id="8c9d7-200">Ayrıca, hello deneme DR havuzu oluşturulduktan hemen hello yeni denemeler engeli garanti eder.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-200">It also guarantees that hello new trials are unblocked as soon as hello trial DR pool is created.</span></span> <span data-ttu-id="8c9d7-201">Merhaba **dengelemeyi** müşteriler Ücretli bu kurulumu hello toplam maliyeti hello Kiracı veritabanı tarafından hello ikincil DR havuzu için hello maliyetini artırır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-201">hello **trade-off** is that this setup increases hello total cost of hello tenant databases by hello cost of hello secondary DR pool for paid customers.</span></span> <span data-ttu-id="8c9d7-202">Ayrıca, farklı bir boyut Hello ikincil havuzu varsa, hello hello DR bölgede havuzu yükseltme tamamlanana kadar hello ödeyen müşteriler yük devretme sonrasında düşük performans yaşar.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-202">In addition, if hello secondary pool has a different size, hello paying customers experience lower performance after failover until hello pool upgrade in hello DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="8c9d7-203">Senaryo 3.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-203">Scenario 3.</span></span> <span data-ttu-id="8c9d7-204">Katmanlı hizmetiyle coğrafi olarak dağıtılmış uygulama</span><span class="sxs-lookup"><span data-stu-id="8c9d7-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="8c9d7-205"><i>Katmanlı hizmet teklifleri ile olgun bir SaaS uygulaması var. Toooffer müşteriler Ücretli çok agresif bir SLA toomy istediğiniz ve hatta kısa kesinti müşteri memnuniyetsizliği neden olabileceğinden kesintiler durumunda etkisi hello riskini en aza bildirimi. Müşteriler ödeme o hello her zaman verilerine erişmeye önemlidir. Merhaba denemeler ücretsizdir ve bir SLA hello deneme süresi boyunca önerilmez.</i></span><span class="sxs-lookup"><span data-stu-id="8c9d7-205"><i>I have a mature SaaS application with tiered service offers. I want toooffer a very aggressive SLA toomy paid customers and minimize hello risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that hello paying customers can always access their data. hello trials are free and an SLA is not offered during hello trial period. </i></span></span> 

<span data-ttu-id="8c9d7-206">toosupport bu senaryo, üç ayrı esnek havuzu kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-206">toosupport this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="8c9d7-207">Sağlama iki eşit boyutu havuzlarıyla iki farklı bölgelerde toocontain hello veritabanında başına yüksek Edtu müşterilerin Kiracı veritabanı Ücretli.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-207">Provision two equal size pools with high eDTUs per database in two different regions toocontain hello paid customers' tenant databases.</span></span> <span data-ttu-id="8c9d7-208">Merhaba deneme kiracıları içeren hello üçüncü havuzu hello iki bölgede birinde sağlanması ve veritabanı başına alt Edtu olabilir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-208">hello third pool containing hello trial tenants can have lower eDTUs per database and be provisioned in one of hello two regions.</span></span>

<span data-ttu-id="8c9d7-209">tooguarantee hello düşük kurtarma süresini kesintiler sırasında her iki hello bölgelerinin hello birincil veritabanlarının % 50 ile coğrafi olarak çoğaltılmış hello ödeyen müşterilerin Kiracı veritabanları.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-209">tooguarantee hello lowest recovery time during outages, hello paying customers' tenant databases are geo-replicated with 50% of hello primary databases in each of hello two regions.</span></span> <span data-ttu-id="8c9d7-210">Benzer şekilde, her bölge hello ikincil veritabanlarıyla % 50'si vardır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-210">Similarly, each region has 50% of hello secondary databases.</span></span> <span data-ttu-id="8c9d7-211">Bu şekilde, bir bölge çevrimdışıysa, müşterilerin veritabanları Ücretli hello % 50'yalnızca etkilenen ve üzerinden toofail sahip.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-211">This way, if a region is offline, only 50% of hello paid customers' databases are impacted and have toofail over.</span></span> <span data-ttu-id="8c9d7-212">Merhaba diğer veritabanlarına değişmeden kalır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-212">hello other databases remain intact.</span></span> <span data-ttu-id="8c9d7-213">Bu yapılandırma hello Aşağıdaki diyagramda gösterilmiştir:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-213">This configuration is illustrated in hello following diagram:</span></span>

![Şekil 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="8c9d7-215">Bu nedenle Hello önceki senaryolarda hello yönetim veritabanları oldukça etkin olarak bunları olarak tek coğrafi olarak çoğaltılmış veritabanları (1) yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-215">As in hello previous scenarios, hello management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="8c9d7-216">Bu hello yeni kullanıcı aboneliklerini, profil güncelleştirmeleri ve diğer yönetim işlemleri hello tahmin edilebilir performans sağlar.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-216">This ensures hello predictable performance of hello new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="8c9d7-217">Bölge A hello birincil hello yönetim veritabanları için bölgedir ve hello bölge B hello yönetim veritabanlarını kurtarmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-217">Region A is hello primary region for hello management databases and hello region B is used for recovery of hello management databases.</span></span>

<span data-ttu-id="8c9d7-218">coğrafi olarak çoğaltılmış Hello ödeyen müşterilerin Kiracı veritabanları aynı zamanda, ancak ana ve ikincil bir bölge ve bölge B (2) arasında bölme.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-218">hello paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="8c9d7-219">Bu şekilde toohello hello Kiracı birincil veritabanı hello kesintisi etkilenen başarısız diğer bölgeye ve kullanılabilir hale gelir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-219">This way, hello tenant primary databases impacted by hello outage can fail over toohello other region and become available.</span></span> <span data-ttu-id="8c9d7-220">diğer yarısı hello Kiracı veritabanları olan değil etkilenebilir hiç hello.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-220">hello other half of hello tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="8c9d7-221">A. bölgede bir kesinti oluşursa hello sonraki diyagram hello kurtarma adımları tootake gösterir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-221">hello next diagram illustrates hello recovery steps tootake if  an outage occurs in region A.</span></span>

![Şekil 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="8c9d7-223">Hemen hello yönetim veritabanları tooregion B (3) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-223">Immediately fail over hello management databases tooregion B (3).</span></span>
* <span data-ttu-id="8c9d7-224">Merhaba uygulamanın bağlantı dizesi toopoint toohello yönetim veritabanlarında bölge B. değiştirme hello yönetim veritabanları toomake hello yeni hesaplar ve Kiracı veritabanları B bölgede oluşturulur ve hello varolan Kiracı veritabanları var. bulunduğunda emin değiştirme olarak iyi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-224">Change hello application’s connection string toopoint toohello management databases in region B. Modify hello management databases toomake sure hello new accounts and tenant databases are created in region B and hello existing tenant databases are found there as well.</span></span> <span data-ttu-id="8c9d7-225">Merhaba varolan deneme müşteriler geçici olarak devre dışı verilerini bakın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-225">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="8c9d7-226">Ücretli hello kiracının veritabanları toopool 2 bölge B tooimmediately Restore üzerinden kullanılabilirliklerini (4) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-226">Fail over hello paid tenant's databases toopool 2 in region B tooimmediately restore their availability (4).</span></span> <span data-ttu-id="8c9d7-227">Merhaba yük devretme hızlı meta veri düzeyi değişikliği olduğundan, burada hello bireysel yük devretme isteğe bağlı hello son kullanıcı bağlantılar tarafından tetiklenen bir iyileştirme düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-227">Since hello failover is a quick metadata level change, you may consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="8c9d7-228">Bu yana 2 havuzuna yalnızca birincil veritabanlarını içeren artık hello havuzu artar toplam iş yükündeki hello ve hemen eDTU boyutuna (5) artırabilir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-228">Since now pool 2 contains only primary databases, hello total workload in hello pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="8c9d7-229">İle aynı ad ve aynı hello hello Hello yeni esnek havuz oluşturma hello bölgede B hello deneme müşterilerin veritabanları (6) için yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-229">Create hello new elastic pool with hello same name and hello same configuration in hello region B for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="8c9d7-230">Merhaba havuzu (7) hello havuza kullanım coğrafi geri yükleme toorestore hello tek tek deneme Kiracı veritabanı oluşturulduktan sonra.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-230">Once hello pool is created use geo-restore toorestore hello individual trial tenant database into hello pool (7).</span></span> <span data-ttu-id="8c9d7-231">Merhaba tek tek geri yüklemeler hello son kullanıcı bağlantılar tarafından tetikleme göz önünde bulundurun veya başka bir uygulamaya özgü Öncelik düzenini kullanın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-231">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9d7-232">Merhaba yük devretme işlemi zaman uyumsuzdur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-232">hello failover operation is asynchronous.</span></span> <span data-ttu-id="8c9d7-233">toominimize hello kurtarma süresini en az 20 veritabanları toplu olarak hello Kiracı veritabanı yük devretme komutu yürütün önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-233">toominimize hello recovery time, it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="8c9d7-234">Bu noktada uygulamanız B. bölgede tekrar çevrimiçi değil Tüm ödeyen müşteri erişimi tootheir verileri hello deneme müşteriler kendi verilere erişirken gecikme olur.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-234">At this point your application is back online in region B. All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="8c9d7-235">Bölge A kurtarıldığında deneme müşteriler veya geri dönme toousing hello deneme müşteriler havuzu A. bölgede toouse bölge B istiyorsanız toodecide gerekir Tek bir ölçüt hello % deneme Kiracı veritabanlarının hello kurtarma beri değiştirilmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-235">When region A is recovered you need toodecide if you want toouse region B for trial customers or failback toousing hello trial customers pool in region A. One criteria could be hello % of trial tenant databases modified since hello recovery.</span></span> <span data-ttu-id="8c9d7-236">Bu karar bağımsız olarak toore Bakiye Ücretli hello kiracılar iki havuzları arasında gerekir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-236">Regardless of that decision, you need toore-balance hello paid tenants between two pools.</span></span> <span data-ttu-id="8c9d7-237">Merhaba deneme Kiracı veritabanlarını geri tooregion A. başarısız olduğunda hello sonraki diyagram hello işlemini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-237">hello next diagram illustrates hello process when hello trial tenant databases fail back tooregion A.</span></span>  

![Şekil 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="8c9d7-239">Tüm bekleyen coğrafi geri yükleme istekleri tootrial DR havuzu iptal edin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-239">Cancel all outstanding geo-restore requests tootrial DR pool.</span></span>   
* <span data-ttu-id="8c9d7-240">Merhaba yönetim veritabanı (8) başarısız.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-240">Fail over hello management database (8).</span></span> <span data-ttu-id="8c9d7-241">Merhaba bölgenin kurtarma işleminden sonra hello eski birincil hello ikincil otomatik hale geldi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-241">After hello region’s recovery, hello old primary automatically became hello secondary.</span></span> <span data-ttu-id="8c9d7-242">Bu duruma şimdi yeniden birincil hello.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-242">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="8c9d7-243">1 ve başlatma geri toopool yük devretme tootheir ikinciller (9) hangi Ücretli Kiracı veritabanları başarısız seçin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-243">Select which paid tenant databases fail back toopool 1 and initiate failover tootheir secondaries (9).</span></span> <span data-ttu-id="8c9d7-244">Merhaba bölgenin kurtarma işleminden sonra 1 havuzdaki tüm veritabanları otomatik olarak ikincil hale geldi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-244">After hello region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="8c9d7-245">Şimdi bunların % 50 ana yeniden haline gelir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="8c9d7-246">Havuz 2 toohello özgün eDTU (10) Hello boyutunu azaltın.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-246">Reduce hello size of pool 2 toohello original eDTU (10).</span></span>
* <span data-ttu-id="8c9d7-247">Tüm kümesi B yalnızca tooread (11) hello bölgede deneme veritabanlarını geri.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-247">Set all restored trial databases in hello region B tooread-only (11).</span></span>
* <span data-ttu-id="8c9d7-248">Her veritabanı havuzundaki hello kurtarma bu yana değişen hello deneme DR için yeniden adlandırın veya hello karşılık gelen veritabanı hello deneme birincil havuzunda (12) silin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-248">For each database in hello trial DR pool that has changed since hello recovery, rename or delete hello corresponding database in hello trial primary pool (12).</span></span> 
* <span data-ttu-id="8c9d7-249">Kopya hello hello DR toohello birincil havuzu (13) veritabanlarından güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-249">Copy hello updated databases from hello DR pool toohello primary pool (13).</span></span> 
* <span data-ttu-id="8c9d7-250">Merhaba DR havuzu (14) Sil</span><span class="sxs-lookup"><span data-stu-id="8c9d7-250">Delete hello DR pool (14)</span></span> 

<span data-ttu-id="8c9d7-251">başlangıç anahtarı **avantajları** bu stratejisi şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-251">hello key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="8c9d7-252">Bu, kesinti hello Kiracı veritabanları % 50'den fazla etkisi olamaz sağlar çünkü müşterilerin ödeme Merhaba hello en agresif SLA destekler.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-252">It supports hello most aggressive SLA for hello paying customers because it ensures that an outage cannot impact more than 50% of hello tenant databases.</span></span> 
* <span data-ttu-id="8c9d7-253">Merhaba izi DR havuzu hello Kurtarma sırasında oluşturulan hemen hello yeni denemeler engeli güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-253">It guarantees that hello new trials are unblocked as soon as hello trail DR pool is created during hello recovery.</span></span> 
* <span data-ttu-id="8c9d7-254">Merhaba havuz kapasitesi 1 havuzundaki ikincil veritabanlarıyla % 50 olarak daha verimli kullanılmasına izin verir ve 2 havuzuna garanti edilir toobe hello birincil veritabanları daha az etkin.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-254">It allows more efficient use of hello pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed toobe less active than hello primary databases.</span></span>

<span data-ttu-id="8c9d7-255">Merhaba ana **dengelemeler** şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8c9d7-255">hello main **trade-offs** are:</span></span>

* <span data-ttu-id="8c9d7-256">Merhaba yönetim veritabanları hello birincil karşı yürütülen gibi hello CRUD işlemleri hello yönetim veritabanlarında hello bağlı olan son kullanıcıların tooregion A hello bağlı olan son kullanıcıların tooregion B için için daha düşük gecikme süresine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-256">hello CRUD operations against hello management databases have lower latency for hello end users connected tooregion A than for hello end users connected tooregion B as they are executed against hello primary of hello management databases.</span></span>
* <span data-ttu-id="8c9d7-257">Daha karmaşık bir tasarım hello yönetim veritabanının gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-257">It requires more complex design of hello management database.</span></span> <span data-ttu-id="8c9d7-258">Örneğin, her bir kiracı kaydı yük devretme ve yeniden çalışma sırasında değiştirilmiş toobe gereken bir konum etiketi yok.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-258">For example, each tenant record has a location tag that needs toobe changed during failover and failback.</span></span>  
* <span data-ttu-id="8c9d7-259">Hello B bölgede havuzu yükseltme tamamlanana kadar müşteriler ödeme hello normalden daha düşük performans düşebilir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-259">hello paying customers may experience lower performance than usual until hello pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="8c9d7-260">Özet</span><span class="sxs-lookup"><span data-stu-id="8c9d7-260">Summary</span></span>
<span data-ttu-id="8c9d7-261">Bu makalede bir SaaS ISV çok kiracılı uygulama tarafından kullanılan hello veritabanı katmanı için hello olağanüstü durum kurtarma stratejileri odaklanır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-261">This article focuses on hello disaster recovery strategies for hello database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="8c9d7-262">Merhaba seçtiğiniz stratejisi hello iş modeli, hello SLA gibi hello uygulamanızın hello gereksinimlerine bağlıdır toooffer tooyour müşterilerin, bütçe kısıtlaması vs. Bilinçli karar böylece her stratejisi anahatları hello avantajları ve dengelemeyi açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-262">hello strategy you choose is based on hello needs of hello application, such as hello business model, hello SLA you want toooffer tooyour customers, budget constraint etc. Each described strategy outlines hello benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="8c9d7-263">Ayrıca, büyük olasılıkla belirli uygulamanızı Azure diğer bileşenleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="8c9d7-264">Böylece, iş sürekliliği Kılavuzu gözden geçirebilir ve bunlarla hello veritabanı katmanı hello kurtarılması düzenlemek.</span><span class="sxs-lookup"><span data-stu-id="8c9d7-264">So you review their business continuity guidance and orchestrate hello recovery of hello database tier with them.</span></span> <span data-ttu-id="8c9d7-265">Azure, veritabanı uygulamalarında kurtarılması yönetme hakkında daha fazla toolearn başvurmak çok[tasarlama bulut çözümleri olağanüstü durum kurtarma için](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-265">toolearn more about managing recovery of database applications in Azure, refer too[Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="8c9d7-266">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="8c9d7-266">Next steps</span></span>
* <span data-ttu-id="8c9d7-267">Azure SQL veritabanı otomatik yedeklemeler hakkında toolearn bkz [SQL veritabanı yedeklemeleri otomatik](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-267">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="8c9d7-268">İş sürekliliğine genel bakış ve senaryolar için bkz: [iş sürekliliğine genel bakış](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="8c9d7-269">Kurtarma için otomatik yedeklemeler kullanma hakkında toolearn bkz [bir veritabanını hello hizmeti tarafından başlatılan yedeklerden geri](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-269">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="8c9d7-270">toolearn daha hızlı kurtarma seçenekleri hakkında bkz [aktif coğrafi çoğaltma](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-270">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="8c9d7-271">arşivleme için otomatik yedeklemeler kullanma hakkında toolearn bkz [veritabanı kopyalama](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="8c9d7-271">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

