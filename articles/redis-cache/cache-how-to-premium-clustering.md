---
title: "Redis Premium Azure Redis önbelleği için kümeleri yapılandırma | Microsoft Docs"
description: "Oluşturma ve Azure Redis önbelleği örnekleri için Premium katman kümeleme Redis yönetme hakkında bilgi edinin"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 86a4a605dbb3b11924c14ff42238009742f72898
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-configure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="ac865-103">Redis Premium Azure Redis önbelleği için kümeleri yapılandırma</span><span class="sxs-lookup"><span data-stu-id="ac865-103">How to configure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="ac865-104">Azure Redis önbelleği, önbellek boyutunu ve özelliklerini, kümeleme, sürdürme ve sanal ağ desteği gibi Premium katmanı özellikleri dahil olmak üzere seçimi esneklik sağlayan farklı önbellek teklifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="ac865-104">Azure Redis Cache has different cache offerings, which provide flexibility in the choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="ac865-105">Bu makalede, premium Azure Redis önbelleği örneği içinde kümelemeyi yapılandırmayı açıklar.</span><span class="sxs-lookup"><span data-stu-id="ac865-105">This article describes how to configure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="ac865-106">Diğer premium önbellek özellikleri hakkında daha fazla bilgi için bkz: [Azure Redis önbelleği Premium katmanına giriş](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="ac865-106">For information on other premium cache features, see [Introduction to the Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="ac865-107">Redis kümesi nedir?</span><span class="sxs-lookup"><span data-stu-id="ac865-107">What is Redis Cluster?</span></span>
<span data-ttu-id="ac865-108">Azure Redis önbelleği Redis kümesi olarak sunar [Redis içinde uygulanan](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="ac865-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="ac865-109">Redis kümesi ile aşağıdaki faydaları alın:</span><span class="sxs-lookup"><span data-stu-id="ac865-109">With Redis Cluster, you get the following benefits:</span></span> 

* <span data-ttu-id="ac865-110">Otomatik olarak birden çok düğüm arasında veri kümenizi bölme yeteneği.</span><span class="sxs-lookup"><span data-stu-id="ac865-110">The ability to automatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="ac865-111">İşlemlerini alt düğümlerin devam etme olanağı hataları yaşıyor veya kümenin geri kalanı ile iletişim kuramıyor.</span><span class="sxs-lookup"><span data-stu-id="ac865-111">The ability to continue operations when a subset of the nodes is experiencing failures or are unable to communicate with the rest of the cluster.</span></span> 
* <span data-ttu-id="ac865-112">Daha fazla verimlilik: verimliliğini artırır doğrusal olarak parça sayısı arttıkça.</span><span class="sxs-lookup"><span data-stu-id="ac865-112">More throughput: Throughput increases linearly as you increase the number of shards.</span></span> 
* <span data-ttu-id="ac865-113">Daha fazla bellek boyutu: parça sayısı arttıkça doğrusal olarak artırır.</span><span class="sxs-lookup"><span data-stu-id="ac865-113">More memory size: Increases linearly as you increase the number of shards.</span></span>  

<span data-ttu-id="ac865-114">Boyut, işleme ve premium önbelleklere sahip bant genişliği hakkında daha fazla bilgi için bkz: [hangi Redis önbelleği teklifini ve boyutunu kullanmalıyım?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="ac865-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="ac865-115">Azure'da Redis kümesi her parça çoğaltma birincil/çoğaltma çiftiyle çoğaltma Azure Redis önbelleği hizmeti tarafından yönetildiği sahip olduğu birincil/çoğaltma modeli olarak sunulur.</span><span class="sxs-lookup"><span data-stu-id="ac865-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where the replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="ac865-116">Kümeleme</span><span class="sxs-lookup"><span data-stu-id="ac865-116">Clustering</span></span>
<span data-ttu-id="ac865-117">Kümeleme üzerinde etkindir **yeni Redis önbelleği** dikey önbellek oluşturma sırasında.</span><span class="sxs-lookup"><span data-stu-id="ac865-117">Clustering is enabled on the **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="ac865-118">Kümeleme yapılandırılır **Redis küme** dikey.</span><span class="sxs-lookup"><span data-stu-id="ac865-118">Clustering is configured on the **Redis Cluster** blade.</span></span>

![Kümeleme][redis-cache-clustering]

<span data-ttu-id="ac865-120">Küme içindeki en fazla 10 parça olabilir.</span><span class="sxs-lookup"><span data-stu-id="ac865-120">You can have up to 10 shards in the cluster.</span></span> <span data-ttu-id="ac865-121">Tıklatın **etkin** kaydırıcısını kaydırın ve 1 ile 10 arasında bir sayı yazın **parça sayısı** tıklatıp **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="ac865-121">Click **Enabled** and slide the slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="ac865-122">Her parça Azure tarafından yönetilen bir birincil/çoğaltma önbelleği çifti ve fiyatlandırma katmanı seçili önbellek boyutu parça sayısı çarparak önbelleğinin toplam boyutu hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="ac865-122">Each shard is a primary/replica cache pair managed by Azure, and the total size of the cache is calculated by multiplying the number of shards by the cache size selected in the pricing tier.</span></span> 

![Kümeleme][redis-cache-clustering-selected]

<span data-ttu-id="ac865-124">Önbellek oluşturulduktan sonra buna bağlanmak ve yalnızca kümelenmiş olmayan bir önbellek ister ve Redis kullanın veri önbelleği parça genelinde dağıtır.</span><span class="sxs-lookup"><span data-stu-id="ac865-124">Once the cache is created you connect to it and use it just like a non-clustered cache, and Redis distributes the data throughout the Cache shards.</span></span> <span data-ttu-id="ac865-125">Tanılama ise [etkin](cache-how-to-monitor.md#enable-cache-diagnostics), ölçümleri her parça için ayrı ayrı yakalanır ve olabilir [görüntülenen](cache-how-to-monitor.md) Redis önbelleği dikey penceresinde.</span><span class="sxs-lookup"><span data-stu-id="ac865-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in the Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="ac865-126">Kümeleme yapılandırıldığında, istemci uygulamanız gereken bazı küçük farklar vardır.</span><span class="sxs-lookup"><span data-stu-id="ac865-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="ac865-127">Daha fazla bilgi için bkz: [kümeleme kullanmak üzere istemci Uygulamam herhangi bir değişiklik yapmanız gerekiyor mu?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="ac865-127">For more information, see [Do I need to make any changes to my client application to use clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="ac865-128">Örnek kod StackExchange.Redis istemcisi ile kümeleme ile çalışma hakkında bkz [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) kısmı [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) örnek.</span><span class="sxs-lookup"><span data-stu-id="ac865-128">For sample code on working with clustering with the StackExchange.Redis client, see the [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of the [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-the-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="ac865-129">Üzerinde çalışan bir küme boyutunu değiştirme premium önbelleği</span><span class="sxs-lookup"><span data-stu-id="ac865-129">Change the cluster size on a running premium cache</span></span>
<span data-ttu-id="ac865-130">Üzerinde çalışan bir küme boyutunu değiştirmek için etkin, kümeleme ile premium Önbelleği'ni tıklatın **Redis küme boyutu** gelen **kaynak menü**.</span><span class="sxs-lookup"><span data-stu-id="ac865-130">To change the cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from the **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="ac865-131">Azure Redis önbelleği Premium katmanına genel kullanılabilirlik yayımlanan olsa da, Redis küme boyutu özelliği şu anda önizlemede değil.</span><span class="sxs-lookup"><span data-stu-id="ac865-131">While the Azure Redis Cache Premium tier has been released to General Availability, the Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Küme boyutu redis][redis-cache-redis-cluster-size]

<span data-ttu-id="ac865-133">Küme boyutunu değiştirmek için kaydırıcıyı kullanın veya 1 ile 10 arasında bir sayı yazın **parça sayısı** metin kutusu ve tıklatın **Tamam** kaydetmek için.</span><span class="sxs-lookup"><span data-stu-id="ac865-133">To change the cluster size, use the slider or type a number between 1 and 10 in the **Shard count** text box and click **OK** to save.</span></span>

> [!NOTE]
> <span data-ttu-id="ac865-134">Küme ölçeklendirme çalıştıran [geçirme](https://redis.io/commands/migrate) pahalı bir komuttur, komutu, bu nedenle düşük etkili için göz önünde bulundurun yoğun olmayan saatlerde bu işlem çalıştırılmadan.</span><span class="sxs-lookup"><span data-stu-id="ac865-134">Scaling a cluster runs the [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="ac865-135">Geçiş işlemi sırasında bir ani artış sunucu iş yükü görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="ac865-135">During the migration process, you will see a spike in server load.</span></span> <span data-ttu-id="ac865-136">Bir küme ölçeklendirme uzun işlemi çalışıyor ve geçen süre miktarı anahtar sayısı ve bu anahtarla ilişkili değerler boyutunu bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="ac865-136">Scaling a cluster is a long running process and the amount of time taken depends on the number of keys and size of the values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="ac865-137">Kümeleme SSS</span><span class="sxs-lookup"><span data-stu-id="ac865-137">Clustering FAQ</span></span>
<span data-ttu-id="ac865-138">Aşağıdaki listede, Azure Redis önbelleği kümeleri hakkında sık sorulan soruların yanıtlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="ac865-138">The following list contains answers to commonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="ac865-139">Herhangi bir değişiklik kümeleme kullanmak üzere istemci uygulamam gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="ac865-139">Do I need to make any changes to my client application to use clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="ac865-140">Anahtarları bir kümede nasıl dağıtıldığını?</span><span class="sxs-lookup"><span data-stu-id="ac865-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="ac865-141">Oluşturabilmeniz için en büyük önbellek boyutu nedir?</span><span class="sxs-lookup"><span data-stu-id="ac865-141">What is the largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="ac865-142">Tüm Redis istemcileri kümeleme destekliyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="ac865-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="ac865-143">Kümeleme etkinleştirildiğinde nasıl my önbelleğine bağlayabilirim?</span><span class="sxs-lookup"><span data-stu-id="ac865-143">How do I connect to my cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="ac865-144">Doğrudan de benim önbellek tek tek parça için bağlanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-144">Can I directly connect to the individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="ac865-145">Önceden oluşturulmuş bir önbelleği için kümeleri yapılandırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="ac865-146">Bir temel veya standart önbelleği için kümeleri yapılandırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="ac865-147">Redis ASP.NET oturum durumu ve çıktı önbelleği sağlayıcılarıyla kümeleme kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-147">Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="ac865-148">StackExchange.Redis kullanırken TAŞIMA özel durumlar alıyorum ve kümeleme, ne yapmalıyım?</span><span class="sxs-lookup"><span data-stu-id="ac865-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering"></a><span data-ttu-id="ac865-149">Herhangi bir değişiklik kümeleme kullanmak üzere istemci uygulamam gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="ac865-149">Do I need to make any changes to my client application to use clustering?</span></span>
* <span data-ttu-id="ac865-150">Yalnızca veritabanı 0 Kümeleme etkin olduğunda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="ac865-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="ac865-151">İstemci uygulamanız birden çok veritabanını kullanır ve okuma veya 0 dışında bir veritabanına yazma çalışırsa, aşağıdaki özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="ac865-151">If your client application uses multiple databases and it tries to read or write to a database other than 0, the following exception is thrown.</span></span> <span data-ttu-id="ac865-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch to database: 6`</span><span class="sxs-lookup"><span data-stu-id="ac865-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch to database: 6`</span></span>
  
  <span data-ttu-id="ac865-153">Daha fazla bilgi için bkz: [küme belirtimi Redis - uygulanan alt](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="ac865-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="ac865-154">Kullanıyorsanız [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), 1.0.481 kullanın veya sonraki bir sürümü.</span><span class="sxs-lookup"><span data-stu-id="ac865-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="ac865-155">Aynı kullanarak önbelleğe bağlanma [uç noktaları, bağlantı noktalarını ve anahtarları](cache-configure.md#properties) kümeleme özelliği etkinleştirilmiş sahip olmayan bir önbellek bağlanırken kullandığınız.</span><span class="sxs-lookup"><span data-stu-id="ac865-155">You connect to the cache using the same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting to a cache that does not have clustering enabled.</span></span> <span data-ttu-id="ac865-156">0 veritabanı tüm okuma ve yazma işlemleri yapılmalıdır yalnızca farktır.</span><span class="sxs-lookup"><span data-stu-id="ac865-156">The only difference is that all reads and writes must be done to database 0.</span></span>
  
  * <span data-ttu-id="ac865-157">Diğer istemciler farklı gereksinimlere sahip.</span><span class="sxs-lookup"><span data-stu-id="ac865-157">Other clients may have different requirements.</span></span> <span data-ttu-id="ac865-158">Bkz: [yapmak, tüm Redis istemcileri desteklemek kümeleme?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="ac865-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="ac865-159">Uygulamanızın tek bir komut toplu birden çok anahtar işlemleri kullanıyorsa, tüm anahtarları aynı parça içinde yer almalıdır.</span><span class="sxs-lookup"><span data-stu-id="ac865-159">If your application uses multiple key operations batched into a single command, all keys must be located in the same shard.</span></span> <span data-ttu-id="ac865-160">İçinde aynı parça anahtarlarını bulmak için bkz: [nasıl anahtarları dağıtılır bir kümede mi?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="ac865-160">To locate keys in the same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="ac865-161">Redis ASP.NET oturum durumu sağlayıcısı kullanıyorsanız 2.0.1 kullanmanız gerekir ya da daha yüksek.</span><span class="sxs-lookup"><span data-stu-id="ac865-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="ac865-162">Bkz: [Redis ASP.NET oturum durumu ve çıktı önbelleği sağlayıcılarıyla kümeleme kullanabilir miyim?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="ac865-162">See [Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="ac865-163">Anahtarları bir kümede nasıl dağıtıldığını?</span><span class="sxs-lookup"><span data-stu-id="ac865-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="ac865-164">Redis başına [anahtarları dağıtım modeli](http://redis.io/topics/cluster-spec#keys-distribution-model) belgelerine: anahtar alanı 16384 yuvaları ayrılır.</span><span class="sxs-lookup"><span data-stu-id="ac865-164">Per the Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: The key space is split into 16384 slots.</span></span> <span data-ttu-id="ac865-165">Her anahtar karma ve bir küme düğümüne dağıtılmış bu yuva atanmış.</span><span class="sxs-lookup"><span data-stu-id="ac865-165">Each key is hashed and assigned to one of these slots, which are distributed across the nodes of the cluster.</span></span> <span data-ttu-id="ac865-166">Birden çok anahtar karma etiketleri kullanarak aynı parça içinde bulunan emin olmak için hangi anahtarın parçası karma yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac865-166">You can configure which part of the key is hashed to ensure that multiple keys are located in the same shard using hash tags.</span></span>

* <span data-ttu-id="ac865-167">Anahtar, herhangi bir parçası olarak arasına alınmışsa karma etiketiyle - anahtarları `{` ve `}`, yalnızca bu anahtarın parçası anahtar karma yuvası belirlemek amacıyla karma haline getirilir.</span><span class="sxs-lookup"><span data-stu-id="ac865-167">Keys with a hash tag - if any part of the key is enclosed in `{` and `}`, only that part of the key is hashed for the purposes of determining the hash slot of a key.</span></span> <span data-ttu-id="ac865-168">Örneğin, aşağıdaki 3 anahtarlarını aynı parça içinde bulunur: `{key}1`, `{key}2`, ve `{key}3` beri yalnızca `key` adının bir parçası karma.</span><span class="sxs-lookup"><span data-stu-id="ac865-168">For example, the following 3 keys would be located in the same shard: `{key}1`, `{key}2`, and `{key}3` since only the `key` part of the name is hashed.</span></span> <span data-ttu-id="ac865-169">Anahtarları karma etiketi belirtimleri tam bir listesi için bkz: [anahtarları karma etiketleri](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="ac865-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="ac865-170">Anahtarları bir karma etiketi - tüm anahtar adı olmadan, karma oluşturma için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ac865-170">Keys without a hash tag - the entire key name is used for hashing.</span></span> <span data-ttu-id="ac865-171">Bu önbellek parça istatistiksel olarak bile dağıtımlarında sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="ac865-171">This results in a statistically even distribution across the shards of the cache.</span></span>

<span data-ttu-id="ac865-172">En iyi performans ve verimlilik için anahtarları eşit dağıtma öneririz.</span><span class="sxs-lookup"><span data-stu-id="ac865-172">For best performance and throughput, we recommend distributing the keys evenly.</span></span> <span data-ttu-id="ac865-173">Anahtarları ile kullanıyorsanız, anahtarları emin olmak için uygulamanın sorumluluğundadır karma etiketi eşit olarak dağıtılmış.</span><span class="sxs-lookup"><span data-stu-id="ac865-173">If you are using keys with a hash tag it is the application's responsibility to ensure the keys are distributed evenly.</span></span>

<span data-ttu-id="ac865-174">Daha fazla bilgi için bkz: [anahtarları dağıtım modeli](http://redis.io/topics/cluster-spec#keys-distribution-model), [küme Redis veri parçalama](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), ve [anahtarları karma etiketleri](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="ac865-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="ac865-175">Örnek kod Kümeleme ve anahtarları StackExchange.Redis istemcisi ile aynı parça bulma ile çalışma hakkında bkz [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) kısmı [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) örnek.</span><span class="sxs-lookup"><span data-stu-id="ac865-175">For sample code on working with clustering and locating keys in the same shard with the StackExchange.Redis client, see the [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of the [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-the-largest-cache-size-i-can-create"></a><span data-ttu-id="ac865-176">Oluşturabilmeniz için en büyük önbellek boyutu nedir?</span><span class="sxs-lookup"><span data-stu-id="ac865-176">What is the largest cache size I can create?</span></span>
<span data-ttu-id="ac865-177">En büyük premium önbellek boyutu 53 GB'dir.</span><span class="sxs-lookup"><span data-stu-id="ac865-177">The largest premium cache size is 53 GB.</span></span> <span data-ttu-id="ac865-178">En fazla 10 parça 530 GB en büyük boyutunu vermiş oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac865-178">You can create up to 10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="ac865-179">Daha büyük bir boyutu gerekiyorsa yapabilecekleriniz [daha fazla isteği](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="ac865-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="ac865-180">Daha fazla bilgi için bkz: [Azure Redis önbelleği fiyatlandırma](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="ac865-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="ac865-181">Tüm Redis istemcileri kümeleme destekliyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="ac865-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="ac865-182">Şu anda tüm istemcileri destek Redis kümeleme.</span><span class="sxs-lookup"><span data-stu-id="ac865-182">At the present time not all clients support Redis clustering.</span></span> <span data-ttu-id="ac865-183">StackExchange.Redis için destek biridir.</span><span class="sxs-lookup"><span data-stu-id="ac865-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="ac865-184">Diğer istemciler hakkında daha fazla bilgi için bkz: [kümeyle çalma](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) bölümünü [Redis küme Öğreticisi](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="ac865-184">For more information on other clients, see the [Playing with the cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of the [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="ac865-185">StackExchange.Redis istemcisi olarak kullanıyorsanız, en son sürümünü kullandığınızdan emin olun [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 veya düzgün çalışması için kümeleme sonrası.</span><span class="sxs-lookup"><span data-stu-id="ac865-185">If you are using StackExchange.Redis as your client, ensure you are using the latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering to work correctly.</span></span> <span data-ttu-id="ac865-186">Taşıma özel durumlar herhangi bir sorun varsa, bkz: [özel durumlar taşıma](#move-exceptions) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="ac865-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-to-my-cache-when-clustering-is-enabled"></a><span data-ttu-id="ac865-187">Kümeleme etkinleştirildiğinde nasıl my önbelleğine bağlayabilirim?</span><span class="sxs-lookup"><span data-stu-id="ac865-187">How do I connect to my cache when clustering is enabled?</span></span>
<span data-ttu-id="ac865-188">Aynı kullanarak önbelleğiniz bağlanabilir [uç noktaları](cache-configure.md#properties), [bağlantı noktalarını](cache-configure.md#properties), ve [anahtarları](cache-configure.md#access-keys) kümeleme özelliği etkinleştirilmiş sahip olmayan bir önbellek bağlanırken kullandığınız.</span><span class="sxs-lookup"><span data-stu-id="ac865-188">You can connect to your cache using the same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting to a cache that does not have clustering enabled.</span></span> <span data-ttu-id="ac865-189">Redis istemcinizden yönetmek zorunda kalmamak için arka uç kümeleme yönetir.</span><span class="sxs-lookup"><span data-stu-id="ac865-189">Redis manages the clustering on the backend so you don't have to manage it from your client.</span></span>

### <a name="can-i-directly-connect-to-the-individual-shards-of-my-cache"></a><span data-ttu-id="ac865-190">Doğrudan de benim önbellek tek tek parça için bağlanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-190">Can I directly connect to the individual shards of my cache?</span></span>
<span data-ttu-id="ac865-191">Bu resmi olarak desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="ac865-191">This is not officially supported.</span></span> <span data-ttu-id="ac865-192">İle denirse her parça topluca bir önbellek örneği olarak bilinen bir birincil/çoğaltma önbelleği çifti oluşur.</span><span class="sxs-lookup"><span data-stu-id="ac865-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="ac865-193">Redis-cli yardımcı programı kullanarak bu önbelleği örnekleri bağlanabileceği [kararsız](http://redis.io/download) github'da Redis deponun dalı.</span><span class="sxs-lookup"><span data-stu-id="ac865-193">You can connect to these cache instances using the redis-cli utility in the [unstable](http://redis.io/download) branch of the Redis repository at GitHub.</span></span> <span data-ttu-id="ac865-194">Bu sürüm ile başlatıldığında temel destek uygulayan `-c` geçin.</span><span class="sxs-lookup"><span data-stu-id="ac865-194">This version implements basic support when started with the `-c` switch.</span></span> <span data-ttu-id="ac865-195">Daha fazla bilgi için bkz: [kümeyle çalma](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) üzerinde [http://redis.io](http://redis.io) içinde [Redis küme Öğreticisi](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="ac865-195">For more information see [Playing with the cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in the [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="ac865-196">Ssl olmayan için aşağıdaki komutları kullanın.</span><span class="sxs-lookup"><span data-stu-id="ac865-196">For non-ssl, use the following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (to connect to instance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (to connect to instance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (to connect to instance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (to connect to instance N)

<span data-ttu-id="ac865-197">SSL için değiştirme `1300N` ile `1500N`.</span><span class="sxs-lookup"><span data-stu-id="ac865-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="ac865-198">Önceden oluşturulmuş bir önbelleği için kümeleri yapılandırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="ac865-199">Şu anda bir önbellek oluşturduğunuzda, kümeleme yalnızca etkinleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac865-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="ac865-200">Önbellek oluşturuldu, ancak premium önbelleği için kümeleri eklemek veya önbellek oluşturulduktan sonra bir premium önbellekten kümeleme kaldırmak sonra küme boyutunu değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac865-200">You can change the cluster size after the cache is created, but you can't add clustering to a premium cache or remove clustering from a premium cache after the cache is created.</span></span> <span data-ttu-id="ac865-201">Kümeleme özelliği etkinleştirilmiş ve yalnızca bir parça premium önbelleği premium önbelleği hiçbir Kümeleme ile aynı boyutta farklıdır.</span><span class="sxs-lookup"><span data-stu-id="ac865-201">A premium cache with clustering enabled and only one shard is different than a premium cache of the same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="ac865-202">Bir temel veya standart önbelleği için kümeleri yapılandırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="ac865-203">Kümeleme yalnızca premium önbellekler için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="ac865-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="ac865-204">Redis ASP.NET oturum durumu ve çıktı önbelleği sağlayıcılarıyla kümeleme kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="ac865-204">Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="ac865-205">**Çıkış önbelleği sağlayıcısı redis** -gerekli herhangi bir değişiklik.</span><span class="sxs-lookup"><span data-stu-id="ac865-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="ac865-206">**Redis oturum durumu sağlayıcısı** - kümeleme, kullanılacak kullanmalısınız [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 ya da daha yüksek veya farklı bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="ac865-206">**Redis Session State provider** - to use clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="ac865-207">Önemli bir değişiklik budur; Daha fazla bilgi için bkz: [v2.0.0 sonu değişiklik ayrıntıları](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="ac865-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="ac865-208">StackExchange.Redis kullanırken TAŞIMA özel durumlar alıyorum ve kümeleme, ne yapmalıyım?</span><span class="sxs-lookup"><span data-stu-id="ac865-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="ac865-209">StackExchange.Redis kullanıyorsanız ve alma `MOVE` kümeleme, kullanırken özel durumlar emin olun, kullandığınız [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) veya sonraki bir sürümü.</span><span class="sxs-lookup"><span data-stu-id="ac865-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="ac865-210">StackExchange.Redis kullanmak için .NET uygulamaları yapılandırma ile ilgili yönergeler için bkz: [önbellek istemcilerini yapılandırma](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="ac865-210">For instructions on configuring your .NET applications to use StackExchange.Redis, see [Configure the cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ac865-211">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="ac865-211">Next steps</span></span>
<span data-ttu-id="ac865-212">Daha fazla premium önbellek özelliklerinin nasıl kullanılacağını öğrenin.</span><span class="sxs-lookup"><span data-stu-id="ac865-212">Learn how to use more premium cache features.</span></span>

* [<span data-ttu-id="ac865-213">Azure Redis önbelleği Premium katmanına giriş</span><span class="sxs-lookup"><span data-stu-id="ac865-213">Introduction to the Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







