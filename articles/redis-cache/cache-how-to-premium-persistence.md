---
title: "Premium Azure Redis önbelleği için aaaHow tooconfigure veri kalıcılığını"
description: "Bilgi nasıl tooconfigure ve Premium katmanı Azure Redis önbelleği örnekleri veri kalıcılığını yönetme"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="2430b-103">Nasıl tooconfigure veri kalıcılığını Premium Azure Redis önbelleği</span><span class="sxs-lookup"><span data-stu-id="2430b-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="2430b-104">Azure Redis önbelleği önbellek boyutu ve özelliklerin Premium katmanı özellikleri kümeleme, sürdürme ve sanal ağ desteği gibi hello seçimi esneklik sağlayan farklı önbellek teklifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="2430b-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="2430b-105">Nasıl tooconfigure kalıcılığı bir premium, Azure Redis önbelleği bu makalede örneği.</span><span class="sxs-lookup"><span data-stu-id="2430b-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="2430b-106">Diğer premium önbellek özellikleri hakkında daha fazla bilgi için bkz: [giriş toohello Azure Redis önbelleği Premium katmanına](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="2430b-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="2430b-107">Veri kalıcılığını nedir?</span><span class="sxs-lookup"><span data-stu-id="2430b-107">What is data persistence?</span></span>
<span data-ttu-id="2430b-108">[Redis kalıcılığı](https://redis.io/topics/persistence) Redis içinde depolanan toopersist verileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="2430b-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="2430b-109">Ayrıca, anlık görüntülerini almak ve bir donanım hatası durumunda yükleyebilir hello verileri yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="2430b-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="2430b-110">Bu temel üzerinde büyük bir avantaj veya burada tüm veri hello standart katmanı bellekte depolanır ve ön bellek düğümleri aşağı nerede arıza durumunda olası veri kaybı olabilir.</span><span class="sxs-lookup"><span data-stu-id="2430b-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="2430b-111">Azure Redis önbelleği Redis kalıcılığı modelleri aşağıdaki hello kullanarak sunar:</span><span class="sxs-lookup"><span data-stu-id="2430b-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="2430b-112">**RDB kalıcılığı** -zaman RDB (Redis veritabanı) Kalıcılık yapılandırılır, Azure Redis önbelleği devam ediyorsa, bir anlık görüntüsünü hello Redis Önbelleği'nde ikili biçimi toodisk yapılandırılabilir bir yedekleme sıklığı dayalı bir Redis.</span><span class="sxs-lookup"><span data-stu-id="2430b-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="2430b-113">Merhaba birincil ve çoğaltma önbelleği devre dışı bırakan geri dönülemez bir olay meydana gelirse, hello önbellek hello en son anlık görüntü kullanılarak düzenlenir.</span><span class="sxs-lookup"><span data-stu-id="2430b-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="2430b-114">Merhaba hakkında daha fazla bilgi [avantajları](https://redis.io/topics/persistence#rdb-advantages) ve [dezavantajları](https://redis.io/topics/persistence#rdb-disadvantages) RDB Kalıcılık biri.</span><span class="sxs-lookup"><span data-stu-id="2430b-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="2430b-115">**AOF kalıcılığı** -zaman AOF (yalnızca dosya ekleme) Kalıcılık yapılandırılır, Azure Redis önbelleği en az bir kez bir Azure depolama hesabıyla saniyede kaydedilen her yazma işlemi tooa günlüğüne kaydeder.</span><span class="sxs-lookup"><span data-stu-id="2430b-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="2430b-116">Merhaba birincil ve çoğaltma önbelleği devre dışı bırakan geri dönülemez bir olay meydana gelirse, hello önbellek depolanan hello yazma işlemleri kullanarak yeniden düzenlenir.</span><span class="sxs-lookup"><span data-stu-id="2430b-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="2430b-117">Merhaba hakkında daha fazla bilgi [avantajları](https://redis.io/topics/persistence#aof-advantages) ve [dezavantajları](https://redis.io/topics/persistence#aof-disadvantages) AOF Kalıcılık biri.</span><span class="sxs-lookup"><span data-stu-id="2430b-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="2430b-118">Kalıcılık hello yapılandırılmış **yeni Redis önbelleği** dikey önbellek oluşturma sırasında ve hello **kaynak menü** için varolan premium önbelleğe alır.</span><span class="sxs-lookup"><span data-stu-id="2430b-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="2430b-119">Premium fiyatlandırma katmanına seçildikten sonra tıklatın **Redis kalıcılığı**.</span><span class="sxs-lookup"><span data-stu-id="2430b-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Redis kalıcılığı][redis-cache-persistence]

<span data-ttu-id="2430b-121">Merhaba hello sonraki bölümdeki adımları açıklayan nasıl tooconfigure Redis kalıcılığı yeni premium önbelleğiniz üzerinde.</span><span class="sxs-lookup"><span data-stu-id="2430b-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="2430b-122">Redis kalıcılığı yapılandırıldıktan sonra tıklatın **oluşturma** yeni premium ile Redis kalıcılığı önbellek toocreate.</span><span class="sxs-lookup"><span data-stu-id="2430b-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="2430b-123">Redis kalıcılığı etkinleştir</span><span class="sxs-lookup"><span data-stu-id="2430b-123">Enable Redis persistence</span></span>

<span data-ttu-id="2430b-124">Redis kalıcılığı hello üzerinde etkin **Redis veri kalıcılığını** ya da seçerek dikey **RDB** veya **AOF** Kalıcılık.</span><span class="sxs-lookup"><span data-stu-id="2430b-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="2430b-125">Yeni önbellekler için bu dikey penceresinde hello önceki bölümde açıklandığı gibi hello önbelleği oluşturma işlemi sırasında erişilir.</span><span class="sxs-lookup"><span data-stu-id="2430b-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="2430b-126">Varolan önbellekler için hello **Redis veri kalıcılığını** dikey penceresinde hello erişilen **kaynak menü** önbelleğiniz için.</span><span class="sxs-lookup"><span data-stu-id="2430b-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Ayarları redis][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="2430b-128">RDB kalıcılığı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="2430b-128">Configure RDB persistence</span></span>

<span data-ttu-id="2430b-129">tooenable RDB Kalıcılık tıklatın **RDB**.</span><span class="sxs-lookup"><span data-stu-id="2430b-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="2430b-130">daha önce etkinleştirilmiş premium önbellekteki toodisable RDB Kalıcılık tıklatın **devre dışı**.</span><span class="sxs-lookup"><span data-stu-id="2430b-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis RDB kalıcılığı][redis-cache-rdb-persistence]

<span data-ttu-id="2430b-132">tooconfigure hello yedekleme aralığını, select bir **yedekleme sıklığı** hello aşağı açılan listeden.</span><span class="sxs-lookup"><span data-stu-id="2430b-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="2430b-133">Seçenekleri **15 dakika**, **30 dakika**, **60 dakika**, **6 saat**, **12 saat**ve **24 saat**.</span><span class="sxs-lookup"><span data-stu-id="2430b-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="2430b-134">Bu aralık hello önceki yedekleme işlemi başarıyla tamamlandıktan sonra sona erdiğinde yeni bir yedekleme başlatılır sayım başlatır.</span><span class="sxs-lookup"><span data-stu-id="2430b-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="2430b-135">Tıklatın **depolama hesabı** tooselect depolama hesabı toouse hello ve her iki hello seçin **birincil anahtar** veya **ikincil anahtar** toouse hello gelen **depolama Anahtar** açılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="2430b-136">Hello bir depolama hesabı seçmeniz gerekir hello önbellek, aynı bölgede ve **Premium depolama** hesabı, premium depolama daha yüksek verimlilik olduğundan önerilir.</span><span class="sxs-lookup"><span data-stu-id="2430b-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="2430b-137">Merhaba depolama anahtarı Kalıcılık hesabınız için yeniden oluşturulursa hello hello istediğiniz anahtarı yeniden yapılandırmanız gerekir **depolama anahtarı** açılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="2430b-138">Tıklatın **Tamam** toosave hello kalıcılığı yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="2430b-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="2430b-139">Merhaba yedekleme sıklığı aralığı geçtikten sonra hello sonraki yedekleme (veya ilk yedek yeni önbellekler için) başlatılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="2430b-140">AOF kalıcılığı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="2430b-140">Configure AOF persistence</span></span>

<span data-ttu-id="2430b-141">tooenable AOF Kalıcılık tıklatın **AOF**.</span><span class="sxs-lookup"><span data-stu-id="2430b-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="2430b-142">daha önce etkinleştirilmiş premium önbellekteki toodisable AOF Kalıcılık tıklatın **devre dışı**.</span><span class="sxs-lookup"><span data-stu-id="2430b-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis AOF kalıcılığı][redis-cache-aof-persistence]

<span data-ttu-id="2430b-144">tooconfigure AOF kalıcılığı belirtin bir **ilk depolama hesabı**.</span><span class="sxs-lookup"><span data-stu-id="2430b-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="2430b-145">Bu depolama hesabını hello olmalıdır hello önbellek, aynı bölgede ve **Premium depolama** hesabı, premium depolama daha yüksek verimlilik olduğundan önerilir.</span><span class="sxs-lookup"><span data-stu-id="2430b-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="2430b-146">Adlı bir ek depolama alanı hesabı isteğe bağlı olarak yapılandırabilirsiniz **ikinci depolama hesabı**.</span><span class="sxs-lookup"><span data-stu-id="2430b-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="2430b-147">İkinci bir depolama hesabı yapılandırdıysanız, hello yazma toohello çoğaltma önbelleği yazılır toothis ikinci depolama hesabı.</span><span class="sxs-lookup"><span data-stu-id="2430b-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="2430b-148">Her yapılandırılan depolama hesabı için her iki hello seçin **birincil anahtar** veya **ikincil anahtar** hello gelen toouse **depolama anahtarı** açılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="2430b-149">Merhaba depolama anahtarı Kalıcılık hesabınız için yeniden oluşturulursa hello hello istediğiniz anahtarı yeniden yapılandırmanız gerekir **depolama anahtarı** açılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="2430b-150">AOF Kalıcılık etkinleştirildiğinde, işlemleri toohello önbelleği, depolama hesabı (veya ikinci bir depolama hesabı yapılandırdıysanız hesapları) tasarlanmış toohello kaydedilir yazma.</span><span class="sxs-lookup"><span data-stu-id="2430b-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="2430b-151">Yıkıcı bir hatadan Hello olayında hem aşağı alır birincil hello ve çoğaltma önbelleği hello saklı AOF günlüktür toorebuild hello önbellek kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2430b-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="2430b-152">Kalıcılık SSS</span><span class="sxs-lookup"><span data-stu-id="2430b-152">Persistence FAQ</span></span>
<span data-ttu-id="2430b-153">Merhaba aşağıdaki listede Azure Redis önbelleği Kalıcılık hakkında sorular yanıtlar toocommonly içerir.</span><span class="sxs-lookup"><span data-stu-id="2430b-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="2430b-154">Önceden oluşturulmuş önbellekteki Kalıcılık etkinleştirebilirim?</span><span class="sxs-lookup"><span data-stu-id="2430b-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="2430b-155">Merhaba adresindeki AOF ve RDB Kalıcılık etkinleştirebilmeniz için aynı anda?</span><span class="sxs-lookup"><span data-stu-id="2430b-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="2430b-156">Hangi Kalıcılık modeli seçmem gerekir?</span><span class="sxs-lookup"><span data-stu-id="2430b-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="2430b-157">Tooa farklı boyutu ölçeği ve bir yedekleme işlemi ölçeklendirme hello önce yaptığınız geri ne olur?</span><span class="sxs-lookup"><span data-stu-id="2430b-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="2430b-158">RDB kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="2430b-158">RDB persistence</span></span>
* [<span data-ttu-id="2430b-159">Merhaba RDB yedekleme sıklığı, hello önbellek oluşturduktan sonra değiştirebilir miyim?</span><span class="sxs-lookup"><span data-stu-id="2430b-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="2430b-160">Neden 60 dakikada bir RDB yedekleme sıklığını varsa var 60 dakikadan uzun yedeklemeler arasında?</span><span class="sxs-lookup"><span data-stu-id="2430b-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="2430b-161">Yeni bir yedekleme yapılan toohello eski RDB yedeklemelerin ne olur?</span><span class="sxs-lookup"><span data-stu-id="2430b-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="2430b-162">AOF kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="2430b-162">AOF persistence</span></span>
* [<span data-ttu-id="2430b-163">İkinci bir depolama hesabı ne zaman kullanmalıyım?</span><span class="sxs-lookup"><span data-stu-id="2430b-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="2430b-164">AOF Kalıcılık etkileyen boyunca, gecikme veya my önbelleğinin performansını mu?</span><span class="sxs-lookup"><span data-stu-id="2430b-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="2430b-165">Merhaba ikinci depolama hesabı nasıl kaldırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="2430b-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="2430b-166">Bir yeniden yazma nedir ve my önbellek nasıl etkiler?</span><span class="sxs-lookup"><span data-stu-id="2430b-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="2430b-167">Ne ı etkin AOF bir önbellek ölçeklendirme beklemeniz gerekir?</span><span class="sxs-lookup"><span data-stu-id="2430b-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="2430b-168">AOF verilerimi depolama nasıl düzenlenir?</span><span class="sxs-lookup"><span data-stu-id="2430b-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="2430b-169">Önceden oluşturulmuş önbellekteki Kalıcılık etkinleştirebilirim?</span><span class="sxs-lookup"><span data-stu-id="2430b-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="2430b-170">Evet, Redis kalıcılığı önbellek oluşturmada ve varolan premium önbelleklere yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="2430b-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="2430b-171">Merhaba adresindeki AOF ve RDB Kalıcılık etkinleştirebilmeniz için aynı anda?</span><span class="sxs-lookup"><span data-stu-id="2430b-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="2430b-172">Hayır, yalnızca RDB veya AOF, ancak ikisini hello adresindeki etkinleştirebilirsiniz aynı anda.</span><span class="sxs-lookup"><span data-stu-id="2430b-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="2430b-173">Hangi Kalıcılık modeli seçmem gerekir?</span><span class="sxs-lookup"><span data-stu-id="2430b-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="2430b-174">Üzerinde üretilen işi bazı etkisi her yazma tooa günlük AOF Kalıcılık kaydeder, RDB ile karşılaştırıldığında üzerinde hello bağlı olarak yedeklemeler kaydedileceği Kalıcılık yedekleme aralığını performansı üzerinde en az etkiyle yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="2430b-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="2430b-175">Birincil amacınız toominimize veri kaybı ve önbelleğiniz için işleme düşüş işleyebilir AOF Kalıcılık belirleyin.</span><span class="sxs-lookup"><span data-stu-id="2430b-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="2430b-176">RDB Kalıcılık önbelleğiniz üzerinde toomaintain en iyi verimlilik istiyor ancak hala veri kurtarma için bir mekanizma istiyorsanız seçin.</span><span class="sxs-lookup"><span data-stu-id="2430b-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="2430b-177">Merhaba hakkında daha fazla bilgi [avantajları](https://redis.io/topics/persistence#rdb-advantages) ve [dezavantajları](https://redis.io/topics/persistence#rdb-disadvantages) RDB Kalıcılık biri.</span><span class="sxs-lookup"><span data-stu-id="2430b-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="2430b-178">Merhaba hakkında daha fazla bilgi [avantajları](https://redis.io/topics/persistence#aof-advantages) ve [dezavantajları](https://redis.io/topics/persistence#aof-disadvantages) AOF Kalıcılık biri.</span><span class="sxs-lookup"><span data-stu-id="2430b-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="2430b-179">AOF Kalıcılık kullanırken performans hakkında daha fazla bilgi için bkz: [mu AOF Kalıcılık etkileyen boyunca, gecikme veya my önbelleğinin performansını?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="2430b-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="2430b-180">Tooa farklı boyutu ölçeği ve bir yedekleme işlemi ölçeklendirme hello önce yaptığınız geri ne olur?</span><span class="sxs-lookup"><span data-stu-id="2430b-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="2430b-181">RDB ve AOF kalıcılığını:</span><span class="sxs-lookup"><span data-stu-id="2430b-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="2430b-182">Tooa daha büyük boyutu ölçeği, üzerinde etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="2430b-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="2430b-183">Tooa daha küçük boyutu ölçeği ve özel bir sahip [veritabanları](cache-configure.md#databases) ayarı hello büyük [veritabanları sınırı](cache-configure.md#databases) yeni boyutunuz için bu veritabanlarını verileri geri değil.</span><span class="sxs-lookup"><span data-stu-id="2430b-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="2430b-184">Daha fazla bilgi için bkz: [olan ölçeklendirme sırasında etkilenen ayarı my özel veritabanlarını?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="2430b-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="2430b-185">Tooa daha küçük boyutu ölçeği ve hello hello son yedekleme, anahtarlardan hello verilerin tümü çıkarılacak hello geri yükleme işlemi sırasında daha küçük boyutu toohold içinde yeterli alan yok, genellikle hello kullanarak [allkeys lru](http://redis.io/topics/lru-cache) çıkarma ilke.</span><span class="sxs-lookup"><span data-stu-id="2430b-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="2430b-186">Merhaba RDB yedekleme sıklığı, hello önbellek oluşturduktan sonra değiştirebilir miyim?</span><span class="sxs-lookup"><span data-stu-id="2430b-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="2430b-187">Evet, hello yedekleme sıklığı hello üzerinde RDB kalıcılığı için değiştirebileceğiniz **Redis veri kalıcılığını** dikey.</span><span class="sxs-lookup"><span data-stu-id="2430b-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="2430b-188">Yönergeler için bkz: [yapılandırma Redis kalıcılığı](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="2430b-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="2430b-189">Neden 60 dakikada bir RDB yedekleme sıklığını varsa var 60 dakikadan uzun yedeklemeler arasında?</span><span class="sxs-lookup"><span data-stu-id="2430b-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="2430b-190">Merhaba RDB Kalıcılık yedekleme sıklığı aralığını Hello önceki yedekleme işlemi başarıyla tamamlanana kadar başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="2430b-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="2430b-191">Merhaba sonra 75 dakika hello önceki yedekleme çalıştırmadıkça hello yedekleme sıklığı 60 dakikadır ve tam bir yedekleme işlemi 15 dakika toosuccessfully alır, hello sonraki yedekleme başlatılamıyor.</span><span class="sxs-lookup"><span data-stu-id="2430b-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="2430b-192">Yeni bir yedekleme yapılan toohello eski RDB yedeklemelerin ne olur?</span><span class="sxs-lookup"><span data-stu-id="2430b-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="2430b-193">Merhaba en son biri hariç tüm RDB Kalıcılık yedeklemeleri otomatik olarak silinir.</span><span class="sxs-lookup"><span data-stu-id="2430b-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="2430b-194">Bu silme işleminin hemen olmayabilir ancak eski yedeklemeler süresiz olarak kalıcı değildir.</span><span class="sxs-lookup"><span data-stu-id="2430b-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="2430b-195">İkinci bir depolama hesabı ne zaman kullanmalıyım?</span><span class="sxs-lookup"><span data-stu-id="2430b-195">When should I use a second storage account?</span></span>

<span data-ttu-id="2430b-196">Merhaba önbellekteki beklenen ayarlama işlemleri daha yüksek olan düşünüyorsanız olduğunda AOF kalıcılığını ikinci bir depolama hesabı kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2430b-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="2430b-197">Merhaba ikincil depolama hesabı ayarlama önbelleğiniz depolama bant genişliği sınırlarına ulaşma değil sağlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="2430b-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="2430b-198">AOF Kalıcılık etkileyen boyunca, gecikme veya my önbelleğinin performansını mu?</span><span class="sxs-lookup"><span data-stu-id="2430b-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="2430b-199">AOF Kalıcılık hello önbellek en yüksek yük altında olduğunda bu verimliliği yaklaşık % 15-20 oranında etkiler (CPU ve sunucu yükü hem % 90'altında).</span><span class="sxs-lookup"><span data-stu-id="2430b-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="2430b-200">Olmamalıdır gecikmesi sorunları hello önbellek bu sınırlar içinde olduğunda.</span><span class="sxs-lookup"><span data-stu-id="2430b-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="2430b-201">Ancak, hello önbellek bu sınırlamaları daha erken etkin AOF ile tamamlayacaktır.</span><span class="sxs-lookup"><span data-stu-id="2430b-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="2430b-202">Merhaba ikinci depolama hesabı nasıl kaldırabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="2430b-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="2430b-203">Merhaba toobe hello aynı hello ilk depolama hesabı olarak ikinci depolama hesabı ayarlayarak hello AOF Kalıcılık ikincil depolama hesabı kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2430b-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="2430b-204">Yönergeler için bkz: [yapılandırma AOF kalıcılığı](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="2430b-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="2430b-205">Bir yeniden yazma nedir ve my önbellek nasıl etkiler?</span><span class="sxs-lookup"><span data-stu-id="2430b-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="2430b-206">Merhaba AOF dosya yeterince büyük hale geldiğinde yeniden hello önbelleği sıraya alındı otomatik olarak.</span><span class="sxs-lookup"><span data-stu-id="2430b-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="2430b-207">Merhaba yeniden yazma işlemlerini en az sayıda hello hello AOF dosyasıyla toocreate geçerli veri kümesi hello yeniden boyutlandırır.</span><span class="sxs-lookup"><span data-stu-id="2430b-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="2430b-208">Yeniden yazdırmaya sırasında tooreach performans sınırlarını er özellikle büyük veri kümeleriyle ilgilenirken bekler.</span><span class="sxs-lookup"><span data-stu-id="2430b-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="2430b-209">Genellikle hello AOF dosya büyük hale gelir, ancak önemli miktarda zaman zaman gerçekleşeceğini olacak şekilde yeniden yazdırmaya daha az oluşur.</span><span class="sxs-lookup"><span data-stu-id="2430b-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="2430b-210">Ne ı etkin AOF bir önbellek ölçeklendirme beklemeniz gerekir?</span><span class="sxs-lookup"><span data-stu-id="2430b-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="2430b-211">Merhaba AOF dosya hello sırasındaki ölçeklendirme önemli ölçüde büyükse hello ölçek işlemi tootake ölçeklendirme tamamlandıktan sonra onu hello dosya yeniden beri beklenenden daha uzun bekler.</span><span class="sxs-lookup"><span data-stu-id="2430b-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="2430b-212">Ölçeklendirme ile ilgili daha fazla bilgi için bkz: [tooa farklı boyutu ölçeği ve bir yedekleme işlemi ölçeklendirme hello önce yaptığınız geri ne olur?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="2430b-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="2430b-213">AOF verilerimi depolama nasıl düzenlenir?</span><span class="sxs-lookup"><span data-stu-id="2430b-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="2430b-214">AOF dosyalarında depolanan verileri hello veri toostorage kaydetme düğüm tooincrease performansı başına birden çok sayfa bloblarını ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="2430b-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="2430b-215">Merhaba aşağıdaki tabloda her fiyatlandırma katmanının için kaç tane sayfa bloblarını kullanılan görüntüler:</span><span class="sxs-lookup"><span data-stu-id="2430b-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="2430b-216">Premium katman</span><span class="sxs-lookup"><span data-stu-id="2430b-216">Premium tier</span></span> | <span data-ttu-id="2430b-217">Bloblar</span><span class="sxs-lookup"><span data-stu-id="2430b-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="2430b-218">P1</span><span class="sxs-lookup"><span data-stu-id="2430b-218">P1</span></span>           | <span data-ttu-id="2430b-219">parça başına 4</span><span class="sxs-lookup"><span data-stu-id="2430b-219">4 per shard</span></span>    |
| <span data-ttu-id="2430b-220">P2</span><span class="sxs-lookup"><span data-stu-id="2430b-220">P2</span></span>           | <span data-ttu-id="2430b-221">parça başına 8</span><span class="sxs-lookup"><span data-stu-id="2430b-221">8 per shard</span></span>    |
| <span data-ttu-id="2430b-222">P3</span><span class="sxs-lookup"><span data-stu-id="2430b-222">P3</span></span>           | <span data-ttu-id="2430b-223">parça başına 16</span><span class="sxs-lookup"><span data-stu-id="2430b-223">16 per shard</span></span>   |
| <span data-ttu-id="2430b-224">P4</span><span class="sxs-lookup"><span data-stu-id="2430b-224">P4</span></span>           | <span data-ttu-id="2430b-225">parça başına 20</span><span class="sxs-lookup"><span data-stu-id="2430b-225">20 per shard</span></span>   |

<span data-ttu-id="2430b-226">Kümeleme etkinleştirildiğinde, her parça hello önbelleğinde hello önceki tabloda belirtildiği gibi sayfa BLOB'ları, kendi kümesi vardır.</span><span class="sxs-lookup"><span data-stu-id="2430b-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="2430b-227">Örneğin, üç parça P2 önbellekle AOF dosya 24 sayfa blobları (8 BLOB'lar ile 3 parça parça başına) dağıtır.</span><span class="sxs-lookup"><span data-stu-id="2430b-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="2430b-228">Bir yeniden yazma sonra depoda AOF dosyaları iki kümesi yok.</span><span class="sxs-lookup"><span data-stu-id="2430b-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="2430b-229">Yeniden yazdırmaya hello arka planda oluşur ve toohello ikinci kümesi ekleme toohello önbellek hello yeniden yazma sırasında gönderilen ayarlama işlemleri sırasında toohello ilk dosyaları kümesini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2430b-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="2430b-230">Bir yedekleme hatası durumunda yeniden yazdırmaya sırasında geçici olarak depolanır, ancak bir yeniden yazma tamamlandıktan sonra hemen silinir.</span><span class="sxs-lookup"><span data-stu-id="2430b-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="2430b-231">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="2430b-231">Next steps</span></span>
<span data-ttu-id="2430b-232">Toouse daha premium özellikleri nasıl önbelleğe alma hakkında bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="2430b-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="2430b-233">Giriş toohello Azure Redis önbelleği Premium katmanına</span><span class="sxs-lookup"><span data-stu-id="2430b-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png
