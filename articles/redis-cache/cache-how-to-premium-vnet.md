---
title: "Premium Azure Redis önbelleği için sanal ağ yapılandırma | Microsoft Docs"
description: "Oluşturma ve Premium katmanı Azure Redis önbelleği örnekleri için sanal ağ desteğini yönetme hakkında bilgi edinin"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 8b1e43a0-a70e-41e6-8994-0ac246d8bf7f
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 05/15/2017
ms.author: sdanie
ms.openlocfilehash: 59d46990e02c0719d2b4df01e216a97fd649c509
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="how-to-configure-virtual-network-support-for-a-premium-azure-redis-cache"></a><span data-ttu-id="770d5-103">Premium Azure Redis önbelleği için sanal ağ desteğini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="770d5-103">How to configure Virtual Network Support for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="770d5-104">Azure Redis önbelleği, önbellek boyutunu ve özelliklerini, kümeleme, sürdürme ve sanal ağ desteği gibi Premium katmanı özellikleri dahil olmak üzere seçimi esneklik sağlayan farklı önbellek teklifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="770d5-104">Azure Redis Cache has different cache offerings, which provide flexibility in the choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="770d5-105">Bir sanal ağ bulutta özel bir ağdır.</span><span class="sxs-lookup"><span data-stu-id="770d5-105">A VNet is a private network in the cloud.</span></span> <span data-ttu-id="770d5-106">Bir Azure Redis önbelleği örneğine sahip bir VNet yapılandırıldığında, genel olarak adreslenebilir değildir ve yalnızca sanal makineler ve sanal ağ içinden uygulamalardan erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-106">When an Azure Redis Cache instance is configured with a VNet, it is not publicly addressable and can only be accessed from virtual machines and applications within the VNet.</span></span> <span data-ttu-id="770d5-107">Bu makalede, premium Azure Redis önbelleği örneği için sanal ağ desteğini yapılandırma açıklar.</span><span class="sxs-lookup"><span data-stu-id="770d5-107">This article describes how to configure virtual network support for a premium Azure Redis Cache instance.</span></span>

> [!NOTE]
> <span data-ttu-id="770d5-108">Azure Redis önbelleği destekleyen her iki Klasik ve Resource Manager sanal ağlar.</span><span class="sxs-lookup"><span data-stu-id="770d5-108">Azure Redis Cache supports both classic and Resource Manager VNets.</span></span>
> 
> 

<span data-ttu-id="770d5-109">Diğer premium önbellek özellikleri hakkında daha fazla bilgi için bkz: [Azure Redis önbelleği Premium katmanına giriş](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="770d5-109">For information on other premium cache features, see [Introduction to the Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="why-vnet"></a><span data-ttu-id="770d5-110">Neden VNet?</span><span class="sxs-lookup"><span data-stu-id="770d5-110">Why VNet?</span></span>
<span data-ttu-id="770d5-111">[Azure sanal ağı (VNet)](https://azure.microsoft.com/services/virtual-network/) Gelişmiş Güvenlik ve yalıtım, Azure Redis önbelleği yanı sıra alt ağlar, erişim denetimi ilkeleri için dağıtım sağlar ve diğer özellikleri daha da fazla erişimi kısıtlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="770d5-111">[Azure Virtual Network (VNet)](https://azure.microsoft.com/services/virtual-network/) deployment provides enhanced security and isolation for your Azure Redis Cache, as well as subnets, access control policies, and other features to further restrict access.</span></span>

## <a name="virtual-network-support"></a><span data-ttu-id="770d5-112">Sanal ağ desteği</span><span class="sxs-lookup"><span data-stu-id="770d5-112">Virtual network support</span></span>
<span data-ttu-id="770d5-113">Sanal ağ (VNet) desteği üzerinde yapılandırılmış **yeni Redis önbelleği** dikey önbellek oluşturma sırasında.</span><span class="sxs-lookup"><span data-stu-id="770d5-113">Virtual Network (VNet) support is configured on the **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="770d5-114">Premium fiyatlandırma katmanına seçtikten sonra aynı abonelik ve konum önbelleğiniz olarak bir sanal ağı seçerek Redis VNet tümleştirme yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="770d5-114">Once you have selected a premium pricing tier, you can configure Redis VNet integration by selecting a VNet that is in the same subscription and location as your cache.</span></span> <span data-ttu-id="770d5-115">Yeni bir VNet kullanmak için önce içindeki adımları izleyerek oluşturun [Azure portalını kullanarak bir sanal ağ oluşturma](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) veya [Azure portalını kullanarak bir sanal ağ (Klasik) oluşturmak](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) ve daha sonra geri dönüp **yeni Redis önbelleği** oluşturmak ve premium önbelleğiniz yapılandırmak için dikey.</span><span class="sxs-lookup"><span data-stu-id="770d5-115">To use a new VNet, create it first by following the steps in [Create a virtual network using the Azure portal](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) or [Create a virtual network (classic) by using the Azure portal](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) and then return to the **New Redis Cache** blade to create and configure your premium cache.</span></span>

<span data-ttu-id="770d5-116">VNet yeni önbelleğiniz için yapılandırmak için tıklatın **sanal ağ** üzerinde **yeni Redis önbelleği** dikey ve istenen VNet aşağı açılan listeden seçin.</span><span class="sxs-lookup"><span data-stu-id="770d5-116">To configure the VNet for your new cache, click **Virtual Network** on the **New Redis Cache** blade, and select the desired VNet from the drop-down list.</span></span>

![Sanal ağ][redis-cache-vnet]

<span data-ttu-id="770d5-118">İstenen alt ağ üzerinden seçin **alt** aşağı açılan listesinde ve istenen belirtin **statik IP adresi**.</span><span class="sxs-lookup"><span data-stu-id="770d5-118">Select the desired subnet from the **Subnet** drop-down list, and specify the desired **Static IP address**.</span></span> <span data-ttu-id="770d5-119">Klasik bir VNet kullanıyorsanız **statik IP adresi** alan isteğe bağlıdır ve belirtilmemişse, bir seçilen alt ağından seçilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-119">If you are using a classic VNet the **Static IP address** field is optional, and if none is specified, one is chosen from the selected subnet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="770d5-120">Bir Azure Redis önbelleği için Resource Manager Vnet'i dağıtırken, önbellek Azure Redis önbelleği örnekleri dışında başka kaynaklar içeren özel bir alt ağda olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="770d5-120">When deploying an Azure Redis Cache to a Resource Manager VNet, the cache must be in a dedicated subnet that contains no other resources except for Azure Redis Cache instances.</span></span> <span data-ttu-id="770d5-121">Bir Azure Redis önbelleği bir alt ağı için Resource Manager Vnet'i dağıtmak için bir girişimde diğer kaynakları içeren, dağıtım başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="770d5-121">If an attempt is made to deploy an Azure Redis Cache to a Resource Manager VNet to a subnet that contains other resources, the deployment fails.</span></span>
> 
> 

![Sanal ağ][redis-cache-vnet-ip]

> [!IMPORTANT]
> <span data-ttu-id="770d5-123">Her alt ağ içindeki bazı IP adreslerini Azure ayırır ve bu adresleri kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="770d5-123">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="770d5-124">Alt ağlar ilk ve son IP adreslerini Azure Hizmetleri için kullanılan üç daha fazla adres birlikte Protokolü uyum için ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="770d5-124">The first and last IP addresses of the subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="770d5-125">Daha fazla bilgi için bkz: [bu alt ağ içindeki IP adresleri kullanma kısıtlamaları vardır?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="770d5-125">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>
> 
> <span data-ttu-id="770d5-126">Azure sanal ağ altyapısı tarafından kullanılan IP adreslerinin yanı sıra, her Redis örnek parça her alt ağ kullanan iki IP adresi ve yük dengeleyici için bir ek IP adresi.</span><span class="sxs-lookup"><span data-stu-id="770d5-126">In addition to the IP addresses used by the Azure VNET infrastructure, each Redis instance in the subnet uses two IP addresses per shard and one additional IP address for the load balancer.</span></span> <span data-ttu-id="770d5-127">Kümelenmemiş bir önbellek, bir parça olduğu kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-127">A non-clustered cache is considered to have one shard.</span></span>
> 
> 

<span data-ttu-id="770d5-128">Önbellek oluşturulduktan sonra sanal ağ yapılandırması tıklayarak görüntüleyebilirsiniz **sanal ağ** gelen **kaynak menü**.</span><span class="sxs-lookup"><span data-stu-id="770d5-128">After the cache is created, you can view the configuration for the VNet by clicking **Virtual Network** from the **Resource menu**.</span></span>

![Sanal ağ][redis-cache-vnet-info]

<span data-ttu-id="770d5-130">Bir sanal ağ kullanırken, Azure Redis önbelleği örneğine bağlanmak için aşağıdaki örnekte gösterildiği gibi bağlantı dizesindeki önbelleğiniz ana bilgisayar adını belirtin:</span><span class="sxs-lookup"><span data-stu-id="770d5-130">To connect to your Azure Redis cache instance when using a VNet, specify the host name of your cache in the connection string as shown in the following example:</span></span>

    private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
    {
        return ConnectionMultiplexer.Connect("contoso5premium.redis.cache.windows.net,abortConnect=false,ssl=true,password=password");
    });

    public static ConnectionMultiplexer Connection
    {
        get
        {
            return lazyConnection.Value;
        }
    }

## <a name="azure-redis-cache-vnet-faq"></a><span data-ttu-id="770d5-131">Azure Redis önbelleği sanal ağ ile ilgili SSS</span><span class="sxs-lookup"><span data-stu-id="770d5-131">Azure Redis Cache VNet FAQ</span></span>
<span data-ttu-id="770d5-132">Aşağıdaki listede, Azure Redis önbelleği ölçeklendirme hakkında sık sorulan soruların yanıtlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="770d5-132">The following list contains answers to commonly asked questions about the Azure Redis Cache scaling.</span></span>

* [<span data-ttu-id="770d5-133">Azure Redis önbelleği ve Vnet ile ilgili bazı ortak yetersizliğini sorunları nelerdir?</span><span class="sxs-lookup"><span data-stu-id="770d5-133">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>](#what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets)
* [<span data-ttu-id="770d5-134">My önbelleği sanal ağ içinde çalıştığını nasıl doğrulayabilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="770d5-134">How can I verify that my cache is working in a VNET?</span></span>](#how-can-i-verify-that-my-cache-is-working-in-a-vnet)
* [<span data-ttu-id="770d5-135">Sanal ağlar ile standart ya da temel bir önbellek kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="770d5-135">Can I use VNets with a standard or basic cache?</span></span>](#can-i-use-vnets-with-a-standard-or-basic-cache)
* [<span data-ttu-id="770d5-136">Neden Redis önbelleği oluşturma bazı alt ağların ancak diğer başarısız oluyor?</span><span class="sxs-lookup"><span data-stu-id="770d5-136">Why does creating a Redis cache fail in some subnets but not others?</span></span>](#why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others)
* [<span data-ttu-id="770d5-137">Alt ağ adres alanı gereksinimleri nelerdir?</span><span class="sxs-lookup"><span data-stu-id="770d5-137">What are the subnet address space requirements?</span></span>](#what-are-the-subnet-address-space-requirements)
* [<span data-ttu-id="770d5-138">Tüm önbellek özellikleri, bir VNET önbelleğinde barındırdığında çalışıyor mu?</span><span class="sxs-lookup"><span data-stu-id="770d5-138">Do all cache features work when hosting a cache in a VNET?</span></span>](#do-all-cache-features-work-when-hosting-a-cache-in-a-vnet)

## <a name="what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets"></a><span data-ttu-id="770d5-139">Azure Redis önbelleği ve Vnet ile ilgili bazı ortak yetersizliğini sorunları nelerdir?</span><span class="sxs-lookup"><span data-stu-id="770d5-139">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>
<span data-ttu-id="770d5-140">Azure Redis önbelleği sanal ağ içinde barındırıldığında, aşağıdaki tablolarda bağlantı noktaları kullanılır.</span><span class="sxs-lookup"><span data-stu-id="770d5-140">When Azure Redis Cache is hosted in a VNet, the ports in the following tables are used.</span></span> 

>[!IMPORTANT]
><span data-ttu-id="770d5-141">Aşağıdaki tablolarda bağlantı noktaları engellenirse, önbellek düzgün çalışmayabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-141">If the ports in the following tables are blocked, the cache may not function correctly.</span></span> <span data-ttu-id="770d5-142">Bir veya daha fazla engellenen Bu bağlantı noktalarına sahip en yaygın yetersizliğini Azure Redis Önbelleği'nde bir sanal ağ kullanırken bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="770d5-142">Having one or more of these ports blocked is the most common misconfiguration issue when using Azure Redis Cache in a VNet.</span></span>
> 
> 

- [<span data-ttu-id="770d5-143">Giden bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="770d5-143">Outbound port requirements</span></span>](#outbound-port-requirements)
- [<span data-ttu-id="770d5-144">Gelen bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="770d5-144">Inbound port requirements</span></span>](#inbound-port-requirements)

### <a name="outbound-port-requirements"></a><span data-ttu-id="770d5-145">Giden bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="770d5-145">Outbound port requirements</span></span>

<span data-ttu-id="770d5-146">Yedi giden bağlantı noktası gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="770d5-146">There are seven outbound port requirements.</span></span>

- <span data-ttu-id="770d5-147">İstenen, tüm giden bağlantıları Internet üzerinden yapılan, istemcinin denetim cihaz şirket içi.</span><span class="sxs-lookup"><span data-stu-id="770d5-147">If desired, all outbound connections to the internet can be made through a client's on-premises auditing device.</span></span>
- <span data-ttu-id="770d5-148">Üç bağlantı noktalarının Azure Storage ve Azure DNS hizmeti Azure uç noktaları için trafiği yönlendirmek.</span><span class="sxs-lookup"><span data-stu-id="770d5-148">Three of the ports route traffic to Azure endpoints servicing Azure Storage and Azure DNS.</span></span>
- <span data-ttu-id="770d5-149">Kalan bağlantı noktası aralıklarını ve iç Redis alt ağ iletişimleri için.</span><span class="sxs-lookup"><span data-stu-id="770d5-149">The remaining port ranges and for internal Redis subnet communications.</span></span> <span data-ttu-id="770d5-150">Hiçbir alt ağ NSG kuralları iç Redis alt ağ iletişimleri için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="770d5-150">No subnet NSG rules are required for internal Redis subnet communications.</span></span>

| <span data-ttu-id="770d5-151">Bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="770d5-151">Port(s)</span></span> | <span data-ttu-id="770d5-152">Yön</span><span class="sxs-lookup"><span data-stu-id="770d5-152">Direction</span></span> | <span data-ttu-id="770d5-153">Aktarım Protokolü</span><span class="sxs-lookup"><span data-stu-id="770d5-153">Transport Protocol</span></span> | <span data-ttu-id="770d5-154">Amaç</span><span class="sxs-lookup"><span data-stu-id="770d5-154">Purpose</span></span> | <span data-ttu-id="770d5-155">Yerel IP</span><span class="sxs-lookup"><span data-stu-id="770d5-155">Local IP</span></span> | <span data-ttu-id="770d5-156">Uzak IP</span><span class="sxs-lookup"><span data-stu-id="770d5-156">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="770d5-157">80, 443</span><span class="sxs-lookup"><span data-stu-id="770d5-157">80, 443</span></span> |<span data-ttu-id="770d5-158">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-158">Outbound</span></span> |<span data-ttu-id="770d5-159">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-159">TCP</span></span> |<span data-ttu-id="770d5-160">Bağımlılıklar üzerinde Azure depolama/PKI (Internet) redis</span><span class="sxs-lookup"><span data-stu-id="770d5-160">Redis dependencies on Azure Storage/PKI (Internet)</span></span> | <span data-ttu-id="770d5-161">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-161">(Redis subnet)</span></span> |* |
| <span data-ttu-id="770d5-162">53</span><span class="sxs-lookup"><span data-stu-id="770d5-162">53</span></span> |<span data-ttu-id="770d5-163">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-163">Outbound</span></span> |<span data-ttu-id="770d5-164">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="770d5-164">TCP/UDP</span></span> |<span data-ttu-id="770d5-165">DNS (Internet/VNet) bağımlılıkları redis</span><span class="sxs-lookup"><span data-stu-id="770d5-165">Redis dependencies on DNS (Internet/VNet)</span></span> | <span data-ttu-id="770d5-166">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-166">(Redis subnet)</span></span> |* |
| <span data-ttu-id="770d5-167">8443</span><span class="sxs-lookup"><span data-stu-id="770d5-167">8443</span></span> |<span data-ttu-id="770d5-168">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-168">Outbound</span></span> |<span data-ttu-id="770d5-169">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-169">TCP</span></span> |<span data-ttu-id="770d5-170">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-170">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-171">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-171">(Redis subnet)</span></span> | <span data-ttu-id="770d5-172">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-172">(Redis subnet)</span></span> |
| <span data-ttu-id="770d5-173">10221-10231</span><span class="sxs-lookup"><span data-stu-id="770d5-173">10221-10231</span></span> |<span data-ttu-id="770d5-174">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-174">Outbound</span></span> |<span data-ttu-id="770d5-175">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-175">TCP</span></span> |<span data-ttu-id="770d5-176">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-176">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-177">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-177">(Redis subnet)</span></span> | <span data-ttu-id="770d5-178">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-178">(Redis subnet)</span></span> |
| <span data-ttu-id="770d5-179">20226</span><span class="sxs-lookup"><span data-stu-id="770d5-179">20226</span></span> |<span data-ttu-id="770d5-180">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-180">Outbound</span></span> |<span data-ttu-id="770d5-181">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-181">TCP</span></span> |<span data-ttu-id="770d5-182">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-182">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-183">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-183">(Redis subnet)</span></span> |<span data-ttu-id="770d5-184">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-184">(Redis subnet)</span></span> |
| <span data-ttu-id="770d5-185">13000-13999</span><span class="sxs-lookup"><span data-stu-id="770d5-185">13000-13999</span></span> |<span data-ttu-id="770d5-186">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-186">Outbound</span></span> |<span data-ttu-id="770d5-187">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-187">TCP</span></span> |<span data-ttu-id="770d5-188">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-188">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-189">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-189">(Redis subnet)</span></span> |<span data-ttu-id="770d5-190">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-190">(Redis subnet)</span></span> |
| <span data-ttu-id="770d5-191">15000-15999</span><span class="sxs-lookup"><span data-stu-id="770d5-191">15000-15999</span></span> |<span data-ttu-id="770d5-192">Giden</span><span class="sxs-lookup"><span data-stu-id="770d5-192">Outbound</span></span> |<span data-ttu-id="770d5-193">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-193">TCP</span></span> |<span data-ttu-id="770d5-194">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-194">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-195">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-195">(Redis subnet)</span></span> |<span data-ttu-id="770d5-196">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-196">(Redis subnet)</span></span> |


### <a name="inbound-port-requirements"></a><span data-ttu-id="770d5-197">Gelen bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="770d5-197">Inbound port requirements</span></span>

<span data-ttu-id="770d5-198">Sekiz gelen bağlantı noktası aralığı gereksinimi yoktur.</span><span class="sxs-lookup"><span data-stu-id="770d5-198">There are eight inbound port range requirements.</span></span> <span data-ttu-id="770d5-199">Bu aralıklardaki gelen istekleri aynı VNET içinde barındırılan diğer hizmetlerden gelen veya Redis alt ağ iletişimleri için iç.</span><span class="sxs-lookup"><span data-stu-id="770d5-199">Inbound requests in these ranges are either inbound from other services hosted in the same VNET or internal to the Redis subnet communications.</span></span>

| <span data-ttu-id="770d5-200">Bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="770d5-200">Port(s)</span></span> | <span data-ttu-id="770d5-201">Yön</span><span class="sxs-lookup"><span data-stu-id="770d5-201">Direction</span></span> | <span data-ttu-id="770d5-202">Aktarım Protokolü</span><span class="sxs-lookup"><span data-stu-id="770d5-202">Transport Protocol</span></span> | <span data-ttu-id="770d5-203">Amaç</span><span class="sxs-lookup"><span data-stu-id="770d5-203">Purpose</span></span> | <span data-ttu-id="770d5-204">Yerel IP</span><span class="sxs-lookup"><span data-stu-id="770d5-204">Local IP</span></span> | <span data-ttu-id="770d5-205">Uzak IP</span><span class="sxs-lookup"><span data-stu-id="770d5-205">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="770d5-206">6379, 6380</span><span class="sxs-lookup"><span data-stu-id="770d5-206">6379, 6380</span></span> |<span data-ttu-id="770d5-207">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-207">Inbound</span></span> |<span data-ttu-id="770d5-208">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-208">TCP</span></span> |<span data-ttu-id="770d5-209">İstemci iletişimi için Redis, Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="770d5-209">Client communication to Redis, Azure load balancing</span></span> | <span data-ttu-id="770d5-210">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-210">(Redis subnet)</span></span> |<span data-ttu-id="770d5-211">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="770d5-211">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-212">8443</span><span class="sxs-lookup"><span data-stu-id="770d5-212">8443</span></span> |<span data-ttu-id="770d5-213">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-213">Inbound</span></span> |<span data-ttu-id="770d5-214">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-214">TCP</span></span> |<span data-ttu-id="770d5-215">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-215">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-216">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-216">(Redis subnet)</span></span> |<span data-ttu-id="770d5-217">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-217">(Redis subnet)</span></span> |
| <span data-ttu-id="770d5-218">8500</span><span class="sxs-lookup"><span data-stu-id="770d5-218">8500</span></span> |<span data-ttu-id="770d5-219">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-219">Inbound</span></span> |<span data-ttu-id="770d5-220">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="770d5-220">TCP/UDP</span></span> |<span data-ttu-id="770d5-221">Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="770d5-221">Azure load balancing</span></span> | <span data-ttu-id="770d5-222">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-222">(Redis subnet)</span></span> |<span data-ttu-id="770d5-223">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="770d5-223">Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-224">10221-10231</span><span class="sxs-lookup"><span data-stu-id="770d5-224">10221-10231</span></span> |<span data-ttu-id="770d5-225">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-225">Inbound</span></span> |<span data-ttu-id="770d5-226">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-226">TCP</span></span> |<span data-ttu-id="770d5-227">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-227">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-228">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-228">(Redis subnet)</span></span> |<span data-ttu-id="770d5-229">(Redis. alt ağ), Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="770d5-229">(Redis subnet), Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-230">13000-13999</span><span class="sxs-lookup"><span data-stu-id="770d5-230">13000-13999</span></span> |<span data-ttu-id="770d5-231">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-231">Inbound</span></span> |<span data-ttu-id="770d5-232">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-232">TCP</span></span> |<span data-ttu-id="770d5-233">İstemci iletişimi Redis kümelerine, Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="770d5-233">Client communication to Redis Clusters, Azure load balancing</span></span> | <span data-ttu-id="770d5-234">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-234">(Redis subnet)</span></span> |<span data-ttu-id="770d5-235">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="770d5-235">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-236">15000-15999</span><span class="sxs-lookup"><span data-stu-id="770d5-236">15000-15999</span></span> |<span data-ttu-id="770d5-237">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-237">Inbound</span></span> |<span data-ttu-id="770d5-238">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-238">TCP</span></span> |<span data-ttu-id="770d5-239">İstemci iletişimi Redis kümeleri için Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="770d5-239">Client communication to Redis Clusters, Azure load Balancing</span></span> | <span data-ttu-id="770d5-240">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-240">(Redis subnet)</span></span> |<span data-ttu-id="770d5-241">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="770d5-241">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-242">16001</span><span class="sxs-lookup"><span data-stu-id="770d5-242">16001</span></span> |<span data-ttu-id="770d5-243">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-243">Inbound</span></span> |<span data-ttu-id="770d5-244">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="770d5-244">TCP/UDP</span></span> |<span data-ttu-id="770d5-245">Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="770d5-245">Azure load balancing</span></span> | <span data-ttu-id="770d5-246">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-246">(Redis subnet)</span></span> |<span data-ttu-id="770d5-247">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="770d5-247">Azure Load Balancer</span></span> |
| <span data-ttu-id="770d5-248">20226</span><span class="sxs-lookup"><span data-stu-id="770d5-248">20226</span></span> |<span data-ttu-id="770d5-249">Gelen</span><span class="sxs-lookup"><span data-stu-id="770d5-249">Inbound</span></span> |<span data-ttu-id="770d5-250">TCP</span><span class="sxs-lookup"><span data-stu-id="770d5-250">TCP</span></span> |<span data-ttu-id="770d5-251">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="770d5-251">Internal communications for Redis</span></span> | <span data-ttu-id="770d5-252">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-252">(Redis subnet)</span></span> |<span data-ttu-id="770d5-253">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="770d5-253">(Redis subnet)</span></span> |

### <a name="additional-vnet-network-connectivity-requirements"></a><span data-ttu-id="770d5-254">Ek sanal ağ bağlantı gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="770d5-254">Additional VNET network connectivity requirements</span></span>

<span data-ttu-id="770d5-255">Azure Redis önbelleği sanal bir ağa başlangıçta karşılanır değil için ağ bağlantı gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="770d5-255">There are network connectivity requirements for Azure Redis Cache that may not be initially met in a virtual network.</span></span> <span data-ttu-id="770d5-256">Azure Redis önbelleği sanal ağ içindeki kullanıldığında düzgün çalışması için tüm aşağıdaki öğeleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="770d5-256">Azure Redis Cache requires all the following items to function properly when used within a virtual network.</span></span>

* <span data-ttu-id="770d5-257">Azure depolama uç noktaları dünya çapında giden ağ bağlantısı.</span><span class="sxs-lookup"><span data-stu-id="770d5-257">Outbound network connectivity to Azure Storage endpoints worldwide.</span></span> <span data-ttu-id="770d5-258">Bu depolama uç noktaları bulunan yanı sıra, Azure Redis önbelleği örneği aynı bölgede bulunan uç noktaları içerir **diğer** Azure bölgeleri.</span><span class="sxs-lookup"><span data-stu-id="770d5-258">This includes endpoints located in the same region as the Azure Redis Cache instance, as well as storage endpoints located in **other** Azure regions.</span></span> <span data-ttu-id="770d5-259">Azure depolama uç noktaları çözmek aşağıdaki DNS etki alanı altında: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, ve *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="770d5-259">Azure Storage endpoints resolve under the following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, and *file.core.windows.net*.</span></span> 
* <span data-ttu-id="770d5-260">Giden ağ bağlantısı *ocsp.msocsp.com*, *mscrl.microsoft.com*, ve *crl.microsoft.com*. Bu bağlantılar, SSL işlevleri desteklemek için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="770d5-260">Outbound network connectivity to *ocsp.msocsp.com*, *mscrl.microsoft.com*, and *crl.microsoft.com*. This connectivity is needed to support SSL functionality.</span></span>
* <span data-ttu-id="770d5-261">Sanal ağ için DNS yapılandırmasını tüm uç noktaları ve önceki noktaların belirtilen etki alanları çözme yeteneğinin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="770d5-261">The DNS configuration for the virtual network must be capable of resolving all of the endpoints and domains mentioned in the earlier points.</span></span> <span data-ttu-id="770d5-262">Geçerli bir DNS altyapısının yapılandırılmış ve sanal ağ için tutulan sağlayarak bu DNS gereksinimleri karşılanabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-262">These DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for the virtual network.</span></span>
* <span data-ttu-id="770d5-263">Aşağıdaki DNS etki alanı altında çözmek aşağıdaki Azure izleme uç noktaları, giden ağ bağlantısı: shoebox2-black.shoebox2.metrics.nsatc.net, Kuzey-prod2.prod2.metrics.nsatc.net azglobal-black.azglobal.metrics.nsatc.net , shoebox2-red.shoebox2.metrics.nsatc.net, Doğu-prod2.prod2.metrics.nsatc.net azglobal-red.azglobal.metrics.nsatc.net.</span><span class="sxs-lookup"><span data-stu-id="770d5-263">Outbound network connectivity to the following Azure Monitoring endpoints, which resolve under the following DNS domains: shoebox2-black.shoebox2.metrics.nsatc.net, north-prod2.prod2.metrics.nsatc.net, azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, east-prod2.prod2.metrics.nsatc.net, azglobal-red.azglobal.metrics.nsatc.net.</span></span>

### <a name="how-can-i-verify-that-my-cache-is-working-in-a-vnet"></a><span data-ttu-id="770d5-264">My önbelleği sanal ağ içinde çalıştığını nasıl doğrulayabilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="770d5-264">How can I verify that my cache is working in a VNET?</span></span>

>[!IMPORTANT]
><span data-ttu-id="770d5-265">Sanal ağ içinde barındırılan bir Azure Redis önbelleği örneğine bağlanırken, önbellek istemcileri herhangi bir sınama uygulamalarını veya tanılama ping araçları dahil olmak üzere aynı VNET'i olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="770d5-265">When connecting to an Azure Redis Cache instance that is hosted in a VNET, your cache clients must be in the same VNET, including any test applications or diagnostic pinging tools.</span></span>
>
>

<span data-ttu-id="770d5-266">Bağlantı noktası gereksinimleri önceki bölümde açıklandığı gibi yapılandırıldıktan sonra önbelleğiniz aşağıdaki adımları gerçekleştirerek çalışıp çalışmadığını doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="770d5-266">Once the port requirements are configured as described in the previous section, you can verify that your cache is working by performing the following steps.</span></span>

- <span data-ttu-id="770d5-267">[Yeniden başlatma](cache-administration.md#reboot) tüm önbellek düğümleri.</span><span class="sxs-lookup"><span data-stu-id="770d5-267">[Reboot](cache-administration.md#reboot) all of the cache nodes.</span></span> <span data-ttu-id="770d5-268">Tüm gerekli önbellek bağımlılıklarını ulaşılamıyor varsa (açıklandığı gibi [gelen bağlantı noktası gereksinimleri](cache-how-to-premium-vnet.md#inbound-port-requirements) ve [giden bağlantı noktası gereksinimleri](cache-how-to-premium-vnet.md#outbound-port-requirements)), Önbelleği başarıyla yeniden yükleyemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="770d5-268">If all of the required cache dependencies can't be reached (as documented in [Inbound port requirements](cache-how-to-premium-vnet.md#inbound-port-requirements) and [Outbound port requirements](cache-how-to-premium-vnet.md#outbound-port-requirements)), the cache won't be able to restart successfully.</span></span>
- <span data-ttu-id="770d5-269">Ön bellek düğümleri (Azure Portalı'nda önbellek durumu tarafından belirlendiği şekilde) yeniden başlattıktan sonra aşağıdaki testleri gerçekleştirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="770d5-269">Once the cache nodes have restarted (as reported by the cache status in the Azure portal), you can perform the following tests:</span></span>
  - <span data-ttu-id="770d5-270">Önbellek uç noktası (bağlantı noktası 6380 kullanarak) önbelleği olarak aynı sanal ağ içindeki bir makineden ping kullanarak [tcping](https://www.elifulkerson.com/projects/tcping.php).</span><span class="sxs-lookup"><span data-stu-id="770d5-270">ping the cache endpoint (using port 6380) from a machine that is within the same VNET as the cache, using [tcping](https://www.elifulkerson.com/projects/tcping.php).</span></span> <span data-ttu-id="770d5-271">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="770d5-271">For example:</span></span>
    
    `tcping.exe contosocache.redis.cache.windows.net 6380`
    
    <span data-ttu-id="770d5-272">Varsa `tcping` aracı raporları bağlantı noktasının açık olduğundan, önbellek VNET içindeki istemcilerinden gelen bağlantı için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-272">If the `tcping` tool reports that the port is open, the cache is available for connection from clients in the VNET.</span></span>

  - <span data-ttu-id="770d5-273">Test etmek için başka bir test önbellek istemcisi oluşturmak için yoldur (basit bir olabilir konsol uygulaması StackExchange.Redis kullanarak), önbelleğe bağlanır ve ekler ve bazı öğeler önbellekten alır.</span><span class="sxs-lookup"><span data-stu-id="770d5-273">Another way to test is to create a test cache client (which could be a simple console application using StackExchange.Redis) that connects to the cache and adds and retrieves some items from the cache.</span></span> <span data-ttu-id="770d5-274">Örnek istemci uygulaması önbelleği olarak aynı sanal ağda ve çalıştırın, önbellek bağlantısını doğrulamak için bir VM üzerine yükleyin.</span><span class="sxs-lookup"><span data-stu-id="770d5-274">Install the sample client application onto a VM that is in the same VNET as the cache and run it to verify connectivity to the cache.</span></span>


### <a name="can-i-use-vnets-with-a-standard-or-basic-cache"></a><span data-ttu-id="770d5-275">Sanal ağlar ile standart ya da temel bir önbellek kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="770d5-275">Can I use VNets with a standard or basic cache?</span></span>
<span data-ttu-id="770d5-276">Sanal ağlar yalnızca premium önbelleklere ile kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-276">VNets can only be used with premium caches.</span></span>

### <a name="why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others"></a><span data-ttu-id="770d5-277">Neden Redis önbelleği oluşturma bazı alt ağların ancak diğer başarısız oluyor?</span><span class="sxs-lookup"><span data-stu-id="770d5-277">Why does creating a Redis cache fail in some subnets but not others?</span></span>
<span data-ttu-id="770d5-278">Bir Azure Redis önbelleği için Resource Manager Vnet'i dağıtıyorsanız, önbelleği başka bir kaynak türünü içeren özel bir alt ağda olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="770d5-278">If you are deploying an Azure Redis Cache to a Resource Manager VNet, the cache must be in a dedicated subnet that contains no other resource type.</span></span> <span data-ttu-id="770d5-279">Bir Resource Manager Vnet'i alt ağa bir Azure Redis önbelleği dağıtmak için bir girişimde diğer kaynakları içeren, dağıtım başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="770d5-279">If an attempt is made to deploy an Azure Redis Cache to a Resource Manager VNet subnet that contains other resources, the deployment fails.</span></span> <span data-ttu-id="770d5-280">Yeni Redis önbelleği oluşturmadan önce alt ağ içindeki mevcut kaynakların silmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="770d5-280">You must delete the existing resources inside the subnet before you can create a new Redis cache.</span></span>

<span data-ttu-id="770d5-281">Kullanılabilir yeterli IP adresine sahip olduğu sürece, birden çok tür kaynak klasik bir Vnet'e dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="770d5-281">You can deploy multiple types of resources to a classic VNet as long as you have enough IP addresses available.</span></span>

### <a name="what-are-the-subnet-address-space-requirements"></a><span data-ttu-id="770d5-282">Alt ağ adres alanı gereksinimleri nelerdir?</span><span class="sxs-lookup"><span data-stu-id="770d5-282">What are the subnet address space requirements?</span></span>
<span data-ttu-id="770d5-283">Her alt ağ içindeki bazı IP adreslerini Azure ayırır ve bu adresleri kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="770d5-283">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="770d5-284">Alt ağlar ilk ve son IP adreslerini Azure Hizmetleri için kullanılan üç daha fazla adres birlikte Protokolü uyum için ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="770d5-284">The first and last IP addresses of the subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="770d5-285">Daha fazla bilgi için bkz: [bu alt ağ içindeki IP adresleri kullanma kısıtlamaları vardır?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="770d5-285">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>

<span data-ttu-id="770d5-286">Azure sanal ağ altyapısı tarafından kullanılan IP adreslerinin yanı sıra, her Redis örnek parça her alt ağ kullanan iki IP adresi ve yük dengeleyici için bir ek IP adresi.</span><span class="sxs-lookup"><span data-stu-id="770d5-286">In addition to the IP addresses used by the Azure VNET infrastructure, each Redis instance in the subnet uses two IP addresses per shard and one additional IP address for the load balancer.</span></span> <span data-ttu-id="770d5-287">Kümelenmemiş bir önbellek, bir parça olduğu kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-287">A non-clustered cache is considered to have one shard.</span></span>

### <a name="do-all-cache-features-work-when-hosting-a-cache-in-a-vnet"></a><span data-ttu-id="770d5-288">Tüm önbellek özellikleri, bir VNET önbelleğinde barındırdığında çalışıyor mu?</span><span class="sxs-lookup"><span data-stu-id="770d5-288">Do all cache features work when hosting a cache in a VNET?</span></span>
<span data-ttu-id="770d5-289">Önbelleğinizi VNET parçası olduğunda, yalnızca sanal ağ istemcilerinde önbelleğe erişebilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-289">When your cache is part of a VNET, only clients in the VNET can access the cache.</span></span> <span data-ttu-id="770d5-290">Sonuç olarak, aşağıdaki önbellek yönetim özellikleri şu anda çalışmıyor.</span><span class="sxs-lookup"><span data-stu-id="770d5-290">As a result, the following cache management features don't work at this time.</span></span>

* <span data-ttu-id="770d5-291">Konsol redis - Redis konsol sanal ağ dışında olan yerel tarayıcınızda çalıştığından, önbelleğiniz bağlanamıyor.</span><span class="sxs-lookup"><span data-stu-id="770d5-291">Redis Console - Because Redis Console runs in your local browser, which is outside the VNET, it can't connect to your cache.</span></span>

## <a name="use-expressroute-with-azure-redis-cache"></a><span data-ttu-id="770d5-292">ExpressRoute ile Azure Redis önbelleğini kullanma</span><span class="sxs-lookup"><span data-stu-id="770d5-292">Use ExpressRoute with Azure Redis Cache</span></span>
<span data-ttu-id="770d5-293">Müşteriler bağlanabileceği bir [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) böylece Azure için kendi şirket içi ağ genişletme sanal ağ altyapılarını devresine.</span><span class="sxs-lookup"><span data-stu-id="770d5-293">Customers can connect an [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) circuit to their virtual network infrastructure, thus extending their on-premises network to Azure.</span></span> 

<span data-ttu-id="770d5-294">Varsayılan olarak, yeni oluşturulan bir expressroute bağlantı hattı zorlamalı tünel gerçekleştirmez (varsayılan yol tanıtım 0.0.0.0/0) bir VNET üzerinde.</span><span class="sxs-lookup"><span data-stu-id="770d5-294">By default, a newly created ExpressRoute circuit does not perform forced tunneling (advertisement of a default route, 0.0.0.0/0) on a VNET.</span></span> <span data-ttu-id="770d5-295">Sonuç olarak, giden Internet bağlantısı sanal ağdan doğrudan izin verilir ve istemci uygulamaları Azure Redis önbelleği dahil olmak üzere diğer Azure uç noktaları için bağlantı kuramaz.</span><span class="sxs-lookup"><span data-stu-id="770d5-295">As a result, outbound Internet connectivity is allowed directly from the VNET and client applications are able to connect to other Azure endpoints including Azure Redis Cache.</span></span>

<span data-ttu-id="770d5-296">Ancak ortak bir müşteri yapılandırması kullanmaktır zorlanan tünel (varsayılan rota tanıtma) yerine şirket içi giden Internet akışına zorlar.</span><span class="sxs-lookup"><span data-stu-id="770d5-296">However a common customer configuration is to use forced tunneling (advertise a default route) which forces outbound Internet traffic to instead flow on-premises.</span></span> <span data-ttu-id="770d5-297">Bu trafik akışı giden trafik ise, Azure Redis önbelleği ile bağlantısını keser. ardından Azure Redis önbelleği örneği bağımlılıklarını ile iletişim kurabildiğinden değil, şirket içi engellendi.</span><span class="sxs-lookup"><span data-stu-id="770d5-297">This traffic flow breaks connectivity with Azure Redis Cache if the outbound traffic is then blocked on-premises such that the Azure Redis Cache instance is not able to communicate with its dependencies.</span></span>

<span data-ttu-id="770d5-298">Azure Redis önbelleği içeren alt ağda bir (veya daha fazla) kullanıcı tanımlı yollar (Udr'ler) tanımlamak için kullanılan çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="770d5-298">The solution is to define one (or more) user-defined routes (UDRs) on the subnet that contains the Azure Redis Cache.</span></span> <span data-ttu-id="770d5-299">Bir UDR yerine varsayılan yol uyulacaktır alt özel yollar tanımlar.</span><span class="sxs-lookup"><span data-stu-id="770d5-299">A UDR defines subnet-specific routes that will be honored instead of the default route.</span></span>

<span data-ttu-id="770d5-300">Mümkünse, aşağıdaki yapılandırmayı kullanmak için önerilir:</span><span class="sxs-lookup"><span data-stu-id="770d5-300">If possible, it is recommended to use the following configuration:</span></span>

* <span data-ttu-id="770d5-301">ExpressRoute yapılandırma 0.0.0.0/0 tanıtır ve varsayılan olarak tüm giden trafiği şirket içi zorlamalı tünel oluşturur.</span><span class="sxs-lookup"><span data-stu-id="770d5-301">The ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="770d5-302">Azure Redis önbelleği içeren alt ağa uygulanan UDR genel internet'e TCP/IP'yi trafiği için bir çalışma rotayla 0.0.0.0/0 tanımlar; Örneğin sonraki atlama türü 'İnternet' olarak ayarlanıyor.</span><span class="sxs-lookup"><span data-stu-id="770d5-302">The UDR applied to the subnet containing the Azure Redis Cache defines 0.0.0.0/0 with a working route for TCP/IP traffic to the public internet; for example by setting the next hop type to 'Internet'.</span></span>

<span data-ttu-id="770d5-303">Bu adımları etkilerini, alt düzey UDR tünel, zorunlu ExpressRoute böylece Azure Redis Önbelleği'nden giden Internet erişimi sağlama öncelikli olacağını ' dir.</span><span class="sxs-lookup"><span data-stu-id="770d5-303">The combined effect of these steps is that the subnet level UDR takes precedence over the ExpressRoute forced tunneling, thus ensuring outbound Internet access from the Azure Redis Cache.</span></span>

<span data-ttu-id="770d5-304">ExpressRoute kullanarak bir şirket içi uygulamasından Azure Redis önbelleği örneğine bağlanmayı performans nedenleriyle (en iyi performans Azure Redis önbelleği istemcileri Azure Redis önbelleği ile aynı bölgede olması gerekir) nedeniyle tipik kullanım bir senaryo değildir.</span><span class="sxs-lookup"><span data-stu-id="770d5-304">Connecting to an Azure Redis Cache instance from an on-premises application using ExpressRoute is not a typical usage scenario due to performance reasons (for best performance Azure Redis Cache clients should be in the same region as the Azure Redis Cache).</span></span>

>[!IMPORTANT] 
><span data-ttu-id="770d5-305">Bir UDR tanımlanan rotalar **gerekir** ExpressRoute yapılandırma tarafından tanıtılan rotaları önceliklidir için belirli olabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-305">The routes defined in a UDR **must** be specific enough to take precedence over any routes advertised by the ExpressRoute configuration.</span></span> <span data-ttu-id="770d5-306">Aşağıdaki örnek geniş 0.0.0.0/0 adres aralığını kullanır ve bu nedenle olası yanlışlıkla daha belirli adres aralıkları kullanarak Yol tanıtımlarını tarafından geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="770d5-306">The following example uses the broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>

>[!WARNING]  
><span data-ttu-id="770d5-307">Azure Redis önbelleği ile ExpressRoute yapılandırmaları desteklenmez, **yanlış arası-özel eşleme yoluna ortak eşleme yolu yolları tanıtma**.</span><span class="sxs-lookup"><span data-stu-id="770d5-307">Azure Redis Cache is not supported with ExpressRoute configurations that **incorrectly cross-advertise routes from the public peering path to the private peering path**.</span></span> <span data-ttu-id="770d5-308">Yapılandırılmış, ortak eşleme sahip ExpressRoute yapılandırmaları çok sayıda Microsoft Azure IP adres aralıkları için Microsoft'tan Yol tanıtımlarını alırsınız.</span><span class="sxs-lookup"><span data-stu-id="770d5-308">ExpressRoute configurations that have public peering configured, receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="770d5-309">Bu adres aralıklarını yanlış cross-özel eşleme yoluna üzerinde tanıtılan varsa, tüm giden ağ paketlerinin Azure Redis önbelleği örneğinin alt ağdan hatalı zorla bir müşterinin şirket içi ağ altyapısına tünelli sonucudur .</span><span class="sxs-lookup"><span data-stu-id="770d5-309">If these address ranges are incorrectly cross-advertised on the private peering path, the result is that all outbound network packets from the Azure Redis Cache instance's subnet are incorrectly force-tunneled to a customer's on-premises network infrastructure.</span></span> <span data-ttu-id="770d5-310">Bu ağ akışı Azure Redis önbelleği keser.</span><span class="sxs-lookup"><span data-stu-id="770d5-310">This network flow breaks Azure Redis Cache.</span></span> <span data-ttu-id="770d5-311">Bu sorun için çözüm ortak eşleme yolu arası reklam yolları özel eşleme yoluna önlemektir.</span><span class="sxs-lookup"><span data-stu-id="770d5-311">The solution to this problem is to stop cross-advertising routes from the public peering path to the private peering path.</span></span>


<span data-ttu-id="770d5-312">Kullanıcı tanımlı yollar hakkında arka plan bilgileri kullanılabilir bu [genel bakış](../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="770d5-312">Background information on user-defined routes is available in this [overview](../virtual-network/virtual-networks-udr-overview.md).</span></span>

<span data-ttu-id="770d5-313">ExpressRoute hakkında daha fazla bilgi için bkz: [ExpressRoute teknik genel bakış](../expressroute/expressroute-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="770d5-313">For more information about ExpressRoute, see [ExpressRoute technical overview](../expressroute/expressroute-introduction.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="770d5-314">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="770d5-314">Next steps</span></span>
<span data-ttu-id="770d5-315">Daha fazla premium önbellek özelliklerinin nasıl kullanılacağını öğrenin.</span><span class="sxs-lookup"><span data-stu-id="770d5-315">Learn how to use more premium cache features.</span></span>

* [<span data-ttu-id="770d5-316">Azure Redis önbelleği Premium katmanına giriş</span><span class="sxs-lookup"><span data-stu-id="770d5-316">Introduction to the Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-vnet]: ./media/cache-how-to-premium-vnet/redis-cache-vnet.png

[redis-cache-vnet-ip]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-ip.png

[redis-cache-vnet-info]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-info.png

