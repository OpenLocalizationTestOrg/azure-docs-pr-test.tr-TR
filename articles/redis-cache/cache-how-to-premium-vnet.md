---
title: "Premium Azure Redis önbelleği için bir sanal ağ aaaConfigure | Microsoft Docs"
description: "Bilgi nasıl toocreate ve Premium katmanı Azure Redis önbelleği örnekleri için sanal ağ desteğini yönetme"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 8b1e43a0-a70e-41e6-8994-0ac246d8bf7f
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 05/15/2017
ms.author: sdanie
ms.openlocfilehash: fab715f4d9365ee4c2f8b89d2e2e58768c25b671
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-virtual-network-support-for-a-premium-azure-redis-cache"></a><span data-ttu-id="4ab7d-103">Sanal ağ tooconfigure destek nasıl Premium Azure Redis önbelleği için</span><span class="sxs-lookup"><span data-stu-id="4ab7d-103">How tooconfigure Virtual Network Support for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="4ab7d-104">Azure Redis önbelleği önbellek boyutu ve özelliklerin Premium katmanı özellikleri kümeleme, sürdürme ve sanal ağ desteği gibi hello seçimi esneklik sağlayan farklı önbellek teklifleri vardır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="4ab7d-105">Bir VNet hello bulutta özel bir ağdır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-105">A VNet is a private network in hello cloud.</span></span> <span data-ttu-id="4ab7d-106">Bir Azure Redis önbelleği örneğine sahip bir VNet yapılandırıldığında, genel olarak adreslenebilir değildir ve yalnızca sanal makineler ve uygulamalardan hello VNet içinde erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-106">When an Azure Redis Cache instance is configured with a VNet, it is not publicly addressable and can only be accessed from virtual machines and applications within hello VNet.</span></span> <span data-ttu-id="4ab7d-107">Bu makalede nasıl tooconfigure sanal ağı desteklemek için bir premium Azure Redis önbelleği örneği açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-107">This article describes how tooconfigure virtual network support for a premium Azure Redis Cache instance.</span></span>

> [!NOTE]
> <span data-ttu-id="4ab7d-108">Azure Redis önbelleği destekleyen her iki Klasik ve Resource Manager sanal ağlar.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-108">Azure Redis Cache supports both classic and Resource Manager VNets.</span></span>
> 
> 

<span data-ttu-id="4ab7d-109">Diğer premium önbellek özellikleri hakkında daha fazla bilgi için bkz: [giriş toohello Azure Redis önbelleği Premium katmanına](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="4ab7d-109">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="why-vnet"></a><span data-ttu-id="4ab7d-110">Neden VNet?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-110">Why VNet?</span></span>
<span data-ttu-id="4ab7d-111">[Azure sanal ağı (VNet)](https://azure.microsoft.com/services/virtual-network/) Gelişmiş Güvenlik ve yalıtım, Azure Redis önbelleği yanı sıra alt ağlar, erişim denetimi ilkeleri için dağıtım sağlar ve diğer özellikleri toofurther erişimi kısıtlayın.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-111">[Azure Virtual Network (VNet)](https://azure.microsoft.com/services/virtual-network/) deployment provides enhanced security and isolation for your Azure Redis Cache, as well as subnets, access control policies, and other features toofurther restrict access.</span></span>

## <a name="virtual-network-support"></a><span data-ttu-id="4ab7d-112">Sanal ağ desteği</span><span class="sxs-lookup"><span data-stu-id="4ab7d-112">Virtual network support</span></span>
<span data-ttu-id="4ab7d-113">Sanal ağ (VNet) desteği üzerinde hello yapılandırılmış **yeni Redis önbelleği** dikey önbellek oluşturma sırasında.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-113">Virtual Network (VNet) support is configured on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="4ab7d-114">Premium fiyatlandırma katmanına seçtikten sonra hello olan bir VNet seçerek Redis VNet tümleştirme yapılandırabilirsiniz aynı abonelikte ve konumda önbelleğiniz olarak.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-114">Once you have selected a premium pricing tier, you can configure Redis VNet integration by selecting a VNet that is in hello same subscription and location as your cache.</span></span> <span data-ttu-id="4ab7d-115">toouse yeni bir VNet oluşturun ilk hello adımları izleyerek [hello Azure portal kullanarak bir sanal ağ oluşturma](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) veya [hello Azure portal kullanarak bir sanal ağ (Klasik) oluşturmak](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) ve toohello döndürür **Yeni Redis önbelleği** dikey toocreate ve premium önbelleğiniz yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-115">toouse a new VNet, create it first by following hello steps in [Create a virtual network using hello Azure portal](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) or [Create a virtual network (classic) by using hello Azure portal](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) and then return toohello **New Redis Cache** blade toocreate and configure your premium cache.</span></span>

<span data-ttu-id="4ab7d-116">Yeni önbelleğiniz için tooconfigure hello VNet tıklatın **sanal ağ** hello üzerinde **yeni Redis önbelleği** dikey penceresinde ve select hello hello aşağı açılan listeden VNet istenen.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-116">tooconfigure hello VNet for your new cache, click **Virtual Network** on hello **New Redis Cache** blade, and select hello desired VNet from hello drop-down list.</span></span>

![Sanal ağ][redis-cache-vnet]

<span data-ttu-id="4ab7d-118">Select hello istenen alt ağ hello üzerinden **alt** aşağı açılan listesinde ve istenen hello belirtin **statik IP adresi**.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-118">Select hello desired subnet from hello **Subnet** drop-down list, and specify hello desired **Static IP address**.</span></span> <span data-ttu-id="4ab7d-119">Klasik bir VNet hello kullanıyorsanız **statik IP adresi** alan isteğe bağlıdır ve belirtilmemişse, biri seçili hello alt ağdan seçilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-119">If you are using a classic VNet hello **Static IP address** field is optional, and if none is specified, one is chosen from hello selected subnet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4ab7d-120">Azure Redis önbelleği tooa Resource Manager Vnet'i dağıtırken hello önbellek Azure Redis önbelleği örnekleri dışında başka kaynaklar içeren özel bir alt ağda olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-120">When deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resources except for Azure Redis Cache instances.</span></span> <span data-ttu-id="4ab7d-121">Azure Redis önbelleği tooa içeren diğer kaynaklar, hello dağıtım Resource Manager Vnet'i tooa alt girişimde toodeploy başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-121">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet tooa subnet that contains other resources, hello deployment fails.</span></span>
> 
> 

![Sanal ağ][redis-cache-vnet-ip]

> [!IMPORTANT]
> <span data-ttu-id="4ab7d-123">Her alt ağ içindeki bazı IP adreslerini Azure ayırır ve bu adresleri kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-123">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="4ab7d-124">Merhaba ilk ve son IP adresleri hello alt Azure Hizmetleri için kullanılan üç daha fazla adres birlikte Protokolü uyum için ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-124">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="4ab7d-125">Daha fazla bilgi için bkz: [bu alt ağ içindeki IP adresleri kullanma kısıtlamaları vardır?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-125">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>
> 
> <span data-ttu-id="4ab7d-126">Hello Azure sanal ağ altyapısı tarafından kullanılan ek toohello IP adresleri, her Redis örnek parça her hello alt ağ kullanan iki IP adresi ve hello yük dengeleyici için bir ek IP adresi.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-126">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="4ab7d-127">Kümelenmemiş bir önbellek toohave bir parça olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-127">A non-clustered cache is considered toohave one shard.</span></span>
> 
> 

<span data-ttu-id="4ab7d-128">Merhaba önbellek oluşturulduktan sonra tıklayarak hello VNet hello yapılandırmasını görüntüleyebilirsiniz **sanal ağ** hello gelen **kaynak menü**.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-128">After hello cache is created, you can view hello configuration for hello VNet by clicking **Virtual Network** from hello **Resource menu**.</span></span>

![Sanal ağ][redis-cache-vnet-info]

<span data-ttu-id="4ab7d-130">bir sanal ağ kullanırken tooconnect tooyour Azure Redis önbelleği örneği hello ana bilgisayar adını belirtin önbelleğiniz hello bağlantı dizesinde hello aşağıdaki örnekte gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="4ab7d-130">tooconnect tooyour Azure Redis cache instance when using a VNet, specify hello host name of your cache in hello connection string as shown in hello following example:</span></span>

    private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
    {
        return ConnectionMultiplexer.Connect("contoso5premium.redis.cache.windows.net,abortConnect=false,ssl=true,password=password");
    });

    public static ConnectionMultiplexer Connection
    {
        get
        {
            return lazyConnection.Value;
        }
    }

## <a name="azure-redis-cache-vnet-faq"></a><span data-ttu-id="4ab7d-131">Azure Redis önbelleği sanal ağ ile ilgili SSS</span><span class="sxs-lookup"><span data-stu-id="4ab7d-131">Azure Redis Cache VNet FAQ</span></span>
<span data-ttu-id="4ab7d-132">liste aşağıdaki hello hello Azure Redis önbelleği ölçeklendirme hakkında sorular yanıtlar toocommonly içerir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-132">hello following list contains answers toocommonly asked questions about hello Azure Redis Cache scaling.</span></span>

* [<span data-ttu-id="4ab7d-133">Azure Redis önbelleği ve Vnet ile ilgili bazı ortak yetersizliğini sorunları nelerdir?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-133">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>](#what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets)
* [<span data-ttu-id="4ab7d-134">My önbelleği sanal ağ içinde çalıştığını nasıl doğrulayabilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-134">How can I verify that my cache is working in a VNET?</span></span>](#how-can-i-verify-that-my-cache-is-working-in-a-vnet)
* [<span data-ttu-id="4ab7d-135">Sanal ağlar ile standart ya da temel bir önbellek kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-135">Can I use VNets with a standard or basic cache?</span></span>](#can-i-use-vnets-with-a-standard-or-basic-cache)
* [<span data-ttu-id="4ab7d-136">Neden Redis önbelleği oluşturma bazı alt ağların ancak diğer başarısız oluyor?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-136">Why does creating a Redis cache fail in some subnets but not others?</span></span>](#why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others)
* [<span data-ttu-id="4ab7d-137">Merhaba alt ağ adres alanı gereksinimleri nelerdir?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-137">What are hello subnet address space requirements?</span></span>](#what-are-the-subnet-address-space-requirements)
* [<span data-ttu-id="4ab7d-138">Tüm önbellek özellikleri, bir VNET önbelleğinde barındırdığında çalışıyor mu?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-138">Do all cache features work when hosting a cache in a VNET?</span></span>](#do-all-cache-features-work-when-hosting-a-cache-in-a-vnet)

## <a name="what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets"></a><span data-ttu-id="4ab7d-139">Azure Redis önbelleği ve Vnet ile ilgili bazı ortak yetersizliğini sorunları nelerdir?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-139">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>
<span data-ttu-id="4ab7d-140">Azure Redis önbelleği sanal ağ içinde barındırıldığında, tablolar aşağıdaki hello hello bağlantı noktaları kullanılır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-140">When Azure Redis Cache is hosted in a VNet, hello ports in hello following tables are used.</span></span> 

>[!IMPORTANT]
><span data-ttu-id="4ab7d-141">Tabloları aşağıdaki hello Hello bağlantı noktaları engellenirse hello önbellek düzgün çalışmayabilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-141">If hello ports in hello following tables are blocked, hello cache may not function correctly.</span></span> <span data-ttu-id="4ab7d-142">Bir veya daha fazla engellenen Bu bağlantı noktalarına sahip hello en yaygın yetersizliğini Azure Redis Önbelleği'nde bir sanal ağ kullanırken bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-142">Having one or more of these ports blocked is hello most common misconfiguration issue when using Azure Redis Cache in a VNet.</span></span>
> 
> 

- [<span data-ttu-id="4ab7d-143">Giden bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="4ab7d-143">Outbound port requirements</span></span>](#outbound-port-requirements)
- [<span data-ttu-id="4ab7d-144">Gelen bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="4ab7d-144">Inbound port requirements</span></span>](#inbound-port-requirements)

### <a name="outbound-port-requirements"></a><span data-ttu-id="4ab7d-145">Giden bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="4ab7d-145">Outbound port requirements</span></span>

<span data-ttu-id="4ab7d-146">Yedi giden bağlantı noktası gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-146">There are seven outbound port requirements.</span></span>

- <span data-ttu-id="4ab7d-147">İsterseniz, internet üzerinden bir istemciye ait yapılabilmesi için tüm giden bağlantılar toohello denetim cihaz şirket içi.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-147">If desired, all outbound connections toohello internet can be made through a client's on-premises auditing device.</span></span>
- <span data-ttu-id="4ab7d-148">Üç hello bağlantı noktalarının Azure Storage ve Azure DNS hizmeti trafiğini tooAzure uç noktaları rota.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-148">Three of hello ports route traffic tooAzure endpoints servicing Azure Storage and Azure DNS.</span></span>
- <span data-ttu-id="4ab7d-149">bağlantı noktası aralıkları kalan hello ve iç Redis alt ağ iletişimleri için.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-149">hello remaining port ranges and for internal Redis subnet communications.</span></span> <span data-ttu-id="4ab7d-150">Hiçbir alt ağ NSG kuralları iç Redis alt ağ iletişimleri için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-150">No subnet NSG rules are required for internal Redis subnet communications.</span></span>

| <span data-ttu-id="4ab7d-151">Bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="4ab7d-151">Port(s)</span></span> | <span data-ttu-id="4ab7d-152">Yön</span><span class="sxs-lookup"><span data-stu-id="4ab7d-152">Direction</span></span> | <span data-ttu-id="4ab7d-153">Aktarım Protokolü</span><span class="sxs-lookup"><span data-stu-id="4ab7d-153">Transport Protocol</span></span> | <span data-ttu-id="4ab7d-154">Amaç</span><span class="sxs-lookup"><span data-stu-id="4ab7d-154">Purpose</span></span> | <span data-ttu-id="4ab7d-155">Yerel IP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-155">Local IP</span></span> | <span data-ttu-id="4ab7d-156">Uzak IP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-156">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="4ab7d-157">80, 443</span><span class="sxs-lookup"><span data-stu-id="4ab7d-157">80, 443</span></span> |<span data-ttu-id="4ab7d-158">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-158">Outbound</span></span> |<span data-ttu-id="4ab7d-159">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-159">TCP</span></span> |<span data-ttu-id="4ab7d-160">Bağımlılıklar üzerinde Azure depolama/PKI (Internet) redis</span><span class="sxs-lookup"><span data-stu-id="4ab7d-160">Redis dependencies on Azure Storage/PKI (Internet)</span></span> | <span data-ttu-id="4ab7d-161">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-161">(Redis subnet)</span></span> |* |
| <span data-ttu-id="4ab7d-162">53</span><span class="sxs-lookup"><span data-stu-id="4ab7d-162">53</span></span> |<span data-ttu-id="4ab7d-163">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-163">Outbound</span></span> |<span data-ttu-id="4ab7d-164">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-164">TCP/UDP</span></span> |<span data-ttu-id="4ab7d-165">DNS (Internet/VNet) bağımlılıkları redis</span><span class="sxs-lookup"><span data-stu-id="4ab7d-165">Redis dependencies on DNS (Internet/VNet)</span></span> | <span data-ttu-id="4ab7d-166">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-166">(Redis subnet)</span></span> |* |
| <span data-ttu-id="4ab7d-167">8443</span><span class="sxs-lookup"><span data-stu-id="4ab7d-167">8443</span></span> |<span data-ttu-id="4ab7d-168">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-168">Outbound</span></span> |<span data-ttu-id="4ab7d-169">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-169">TCP</span></span> |<span data-ttu-id="4ab7d-170">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-170">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-171">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-171">(Redis subnet)</span></span> | <span data-ttu-id="4ab7d-172">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-172">(Redis subnet)</span></span> |
| <span data-ttu-id="4ab7d-173">10221-10231</span><span class="sxs-lookup"><span data-stu-id="4ab7d-173">10221-10231</span></span> |<span data-ttu-id="4ab7d-174">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-174">Outbound</span></span> |<span data-ttu-id="4ab7d-175">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-175">TCP</span></span> |<span data-ttu-id="4ab7d-176">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-176">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-177">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-177">(Redis subnet)</span></span> | <span data-ttu-id="4ab7d-178">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-178">(Redis subnet)</span></span> |
| <span data-ttu-id="4ab7d-179">20226</span><span class="sxs-lookup"><span data-stu-id="4ab7d-179">20226</span></span> |<span data-ttu-id="4ab7d-180">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-180">Outbound</span></span> |<span data-ttu-id="4ab7d-181">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-181">TCP</span></span> |<span data-ttu-id="4ab7d-182">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-182">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-183">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-183">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-184">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-184">(Redis subnet)</span></span> |
| <span data-ttu-id="4ab7d-185">13000-13999</span><span class="sxs-lookup"><span data-stu-id="4ab7d-185">13000-13999</span></span> |<span data-ttu-id="4ab7d-186">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-186">Outbound</span></span> |<span data-ttu-id="4ab7d-187">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-187">TCP</span></span> |<span data-ttu-id="4ab7d-188">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-188">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-189">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-189">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-190">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-190">(Redis subnet)</span></span> |
| <span data-ttu-id="4ab7d-191">15000-15999</span><span class="sxs-lookup"><span data-stu-id="4ab7d-191">15000-15999</span></span> |<span data-ttu-id="4ab7d-192">Giden</span><span class="sxs-lookup"><span data-stu-id="4ab7d-192">Outbound</span></span> |<span data-ttu-id="4ab7d-193">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-193">TCP</span></span> |<span data-ttu-id="4ab7d-194">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-194">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-195">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-195">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-196">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-196">(Redis subnet)</span></span> |


### <a name="inbound-port-requirements"></a><span data-ttu-id="4ab7d-197">Gelen bağlantı noktası gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="4ab7d-197">Inbound port requirements</span></span>

<span data-ttu-id="4ab7d-198">Sekiz gelen bağlantı noktası aralığı gereksinimi yoktur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-198">There are eight inbound port range requirements.</span></span> <span data-ttu-id="4ab7d-199">Bu aralıklardaki gelen istekleri olan ya da hello barındırılan diğer hizmetlerden gelen aynı sanal ağ veya iç toohello Redis alt ağ iletişimleri.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-199">Inbound requests in these ranges are either inbound from other services hosted in hello same VNET or internal toohello Redis subnet communications.</span></span>

| <span data-ttu-id="4ab7d-200">Bağlantı noktaları</span><span class="sxs-lookup"><span data-stu-id="4ab7d-200">Port(s)</span></span> | <span data-ttu-id="4ab7d-201">Yön</span><span class="sxs-lookup"><span data-stu-id="4ab7d-201">Direction</span></span> | <span data-ttu-id="4ab7d-202">Aktarım Protokolü</span><span class="sxs-lookup"><span data-stu-id="4ab7d-202">Transport Protocol</span></span> | <span data-ttu-id="4ab7d-203">Amaç</span><span class="sxs-lookup"><span data-stu-id="4ab7d-203">Purpose</span></span> | <span data-ttu-id="4ab7d-204">Yerel IP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-204">Local IP</span></span> | <span data-ttu-id="4ab7d-205">Uzak IP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-205">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="4ab7d-206">6379, 6380</span><span class="sxs-lookup"><span data-stu-id="4ab7d-206">6379, 6380</span></span> |<span data-ttu-id="4ab7d-207">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-207">Inbound</span></span> |<span data-ttu-id="4ab7d-208">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-208">TCP</span></span> |<span data-ttu-id="4ab7d-209">İstemci iletişimi tooRedis, Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4ab7d-209">Client communication tooRedis, Azure load balancing</span></span> | <span data-ttu-id="4ab7d-210">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-210">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-211">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="4ab7d-211">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-212">8443</span><span class="sxs-lookup"><span data-stu-id="4ab7d-212">8443</span></span> |<span data-ttu-id="4ab7d-213">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-213">Inbound</span></span> |<span data-ttu-id="4ab7d-214">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-214">TCP</span></span> |<span data-ttu-id="4ab7d-215">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-215">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-216">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-216">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-217">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-217">(Redis subnet)</span></span> |
| <span data-ttu-id="4ab7d-218">8500</span><span class="sxs-lookup"><span data-stu-id="4ab7d-218">8500</span></span> |<span data-ttu-id="4ab7d-219">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-219">Inbound</span></span> |<span data-ttu-id="4ab7d-220">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-220">TCP/UDP</span></span> |<span data-ttu-id="4ab7d-221">Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4ab7d-221">Azure load balancing</span></span> | <span data-ttu-id="4ab7d-222">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-222">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-223">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="4ab7d-223">Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-224">10221-10231</span><span class="sxs-lookup"><span data-stu-id="4ab7d-224">10221-10231</span></span> |<span data-ttu-id="4ab7d-225">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-225">Inbound</span></span> |<span data-ttu-id="4ab7d-226">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-226">TCP</span></span> |<span data-ttu-id="4ab7d-227">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-227">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-228">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-228">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-229">(Redis. alt ağ), Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="4ab7d-229">(Redis subnet), Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-230">13000-13999</span><span class="sxs-lookup"><span data-stu-id="4ab7d-230">13000-13999</span></span> |<span data-ttu-id="4ab7d-231">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-231">Inbound</span></span> |<span data-ttu-id="4ab7d-232">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-232">TCP</span></span> |<span data-ttu-id="4ab7d-233">İstemci iletişimi tooRedis kümeleri, Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4ab7d-233">Client communication tooRedis Clusters, Azure load balancing</span></span> | <span data-ttu-id="4ab7d-234">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-234">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-235">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="4ab7d-235">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-236">15000-15999</span><span class="sxs-lookup"><span data-stu-id="4ab7d-236">15000-15999</span></span> |<span data-ttu-id="4ab7d-237">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-237">Inbound</span></span> |<span data-ttu-id="4ab7d-238">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-238">TCP</span></span> |<span data-ttu-id="4ab7d-239">İstemci iletişimi tooRedis kümeleri, Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4ab7d-239">Client communication tooRedis Clusters, Azure load Balancing</span></span> | <span data-ttu-id="4ab7d-240">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-240">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-241">Sanal ağ, Azure yük dengeleyici</span><span class="sxs-lookup"><span data-stu-id="4ab7d-241">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-242">16001</span><span class="sxs-lookup"><span data-stu-id="4ab7d-242">16001</span></span> |<span data-ttu-id="4ab7d-243">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-243">Inbound</span></span> |<span data-ttu-id="4ab7d-244">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-244">TCP/UDP</span></span> |<span data-ttu-id="4ab7d-245">Azure Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4ab7d-245">Azure load balancing</span></span> | <span data-ttu-id="4ab7d-246">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-246">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-247">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="4ab7d-247">Azure Load Balancer</span></span> |
| <span data-ttu-id="4ab7d-248">20226</span><span class="sxs-lookup"><span data-stu-id="4ab7d-248">20226</span></span> |<span data-ttu-id="4ab7d-249">Gelen</span><span class="sxs-lookup"><span data-stu-id="4ab7d-249">Inbound</span></span> |<span data-ttu-id="4ab7d-250">TCP</span><span class="sxs-lookup"><span data-stu-id="4ab7d-250">TCP</span></span> |<span data-ttu-id="4ab7d-251">Redis iç iletişiminde</span><span class="sxs-lookup"><span data-stu-id="4ab7d-251">Internal communications for Redis</span></span> | <span data-ttu-id="4ab7d-252">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-252">(Redis subnet)</span></span> |<span data-ttu-id="4ab7d-253">(Alt ağ redis)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-253">(Redis subnet)</span></span> |

### <a name="additional-vnet-network-connectivity-requirements"></a><span data-ttu-id="4ab7d-254">Ek sanal ağ bağlantı gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="4ab7d-254">Additional VNET network connectivity requirements</span></span>

<span data-ttu-id="4ab7d-255">Azure Redis önbelleği sanal bir ağa başlangıçta karşılanır değil için ağ bağlantı gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-255">There are network connectivity requirements for Azure Redis Cache that may not be initially met in a virtual network.</span></span> <span data-ttu-id="4ab7d-256">Azure Redis önbelleği tüm düzgün bir şekilde bir sanal ağ içindeki kullanıldığında öğeleri toofunction aşağıdaki hello gerektirir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-256">Azure Redis Cache requires all hello following items toofunction properly when used within a virtual network.</span></span>

* <span data-ttu-id="4ab7d-257">Giden ağ bağlantısı tooAzure depolama uç noktaları dünya çapında.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-257">Outbound network connectivity tooAzure Storage endpoints worldwide.</span></span> <span data-ttu-id="4ab7d-258">Bu uç noktaları hello bulunan içerir bulunan depolama uç noktaları yanı sıra hello Azure Redis önbelleği örneği aynı bölgede **diğer** Azure bölgeleri.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-258">This includes endpoints located in hello same region as hello Azure Redis Cache instance, as well as storage endpoints located in **other** Azure regions.</span></span> <span data-ttu-id="4ab7d-259">Azure depolama uç noktaları çözmek DNS etki alanı aşağıdaki hello altında: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*ve *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-259">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, and *file.core.windows.net*.</span></span> 
* <span data-ttu-id="4ab7d-260">Giden çok ağ bağlantısı*ocsp.msocsp.com*, *mscrl.microsoft.com*, ve *crl.microsoft.com*. Bu bağlantı, gerekli toosupport SSL işlevdir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-260">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com*, and *crl.microsoft.com*. This connectivity is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="4ab7d-261">Merhaba hello sanal ağ için DNS yapılandırmasını hello bitiş noktalarının tümü çözme yeteneğine sahip olmalı ve etki alanları belirtilen hello önceki noktaları.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-261">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span> <span data-ttu-id="4ab7d-262">Geçerli bir DNS altyapısının yapılandırılmış ve sanal ağ için hello saklanır sağlayarak bu DNS gereksinimleri karşılanabilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-262">These DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>
* <span data-ttu-id="4ab7d-263">DNS etki alanı aşağıdaki hello altında çözmek Azure Monitoring uç aşağıdaki giden ağ bağlantısı toohello: shoebox2 black.shoebox2.metrics.nsatc.net, Kuzey-prod2.prod2.metrics.nsatc.net azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, Doğu-prod2.prod2.metrics.nsatc.net azglobal-red.azglobal.metrics.nsatc.net.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-263">Outbound network connectivity toohello following Azure Monitoring endpoints, which resolve under hello following DNS domains: shoebox2-black.shoebox2.metrics.nsatc.net, north-prod2.prod2.metrics.nsatc.net, azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, east-prod2.prod2.metrics.nsatc.net, azglobal-red.azglobal.metrics.nsatc.net.</span></span>

### <a name="how-can-i-verify-that-my-cache-is-working-in-a-vnet"></a><span data-ttu-id="4ab7d-264">My önbelleği sanal ağ içinde çalıştığını nasıl doğrulayabilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-264">How can I verify that my cache is working in a VNET?</span></span>

>[!IMPORTANT]
><span data-ttu-id="4ab7d-265">Sanal ağ içinde barındırılan tooan Azure Redis önbelleği örneğine bağlanırken, istemciler olmalıdır önbelleğiniz herhangi bir sınama uygulamalarını veya tanılama ping araçları dahil olmak üzere aynı sanal hello.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-265">When connecting tooan Azure Redis Cache instance that is hosted in a VNET, your cache clients must be in hello same VNET, including any test applications or diagnostic pinging tools.</span></span>
>
>

<span data-ttu-id="4ab7d-266">Başlangıç bağlantı noktası gereksinimleri hello önceki bölümde açıklandığı gibi yapılandırıldıktan sonra önbelleğiniz hello aşağıdaki adımları gerçekleştirerek çalışıp çalışmadığını doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-266">Once hello port requirements are configured as described in hello previous section, you can verify that your cache is working by performing hello following steps.</span></span>

- <span data-ttu-id="4ab7d-267">[Yeniden başlatma](cache-administration.md#reboot) tüm hello önbelleğe düğümleri.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-267">[Reboot](cache-administration.md#reboot) all of hello cache nodes.</span></span> <span data-ttu-id="4ab7d-268">Tüm hello önbellek bağımlılıkları ulaşılamıyor gerekirse (açıklandığı gibi [gelen bağlantı noktası gereksinimleri](cache-how-to-premium-vnet.md#inbound-port-requirements) ve [giden bağlantı noktası gereksinimleri](cache-how-to-premium-vnet.md#outbound-port-requirements)), hello önbellek olmayacak mümkün toorestart başarıyla.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-268">If all of hello required cache dependencies can't be reached (as documented in [Inbound port requirements](cache-how-to-premium-vnet.md#inbound-port-requirements) and [Outbound port requirements](cache-how-to-premium-vnet.md#outbound-port-requirements)), hello cache won't be able toorestart successfully.</span></span>
- <span data-ttu-id="4ab7d-269">Merhaba önbellek düğümleri (Merhaba önbellek durumu hello Azure portal tarafından belirlendiği şekilde) yeniden başlattıktan sonra testleri aşağıdaki hello gerçekleştirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="4ab7d-269">Once hello cache nodes have restarted (as reported by hello cache status in hello Azure portal), you can perform hello following tests:</span></span>
  - <span data-ttu-id="4ab7d-270">(bağlantı noktası 6380 kullanarak) hello önbellek son nokta hello içinde olan bir makineden ping hello olarak aynı sanal ağ kullanılarak önbelleğe [tcping](https://www.elifulkerson.com/projects/tcping.php).</span><span class="sxs-lookup"><span data-stu-id="4ab7d-270">ping hello cache endpoint (using port 6380) from a machine that is within hello same VNET as hello cache, using [tcping](https://www.elifulkerson.com/projects/tcping.php).</span></span> <span data-ttu-id="4ab7d-271">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="4ab7d-271">For example:</span></span>
    
    `tcping.exe contosocache.redis.cache.windows.net 6380`
    
    <span data-ttu-id="4ab7d-272">Merhaba, `tcping` aracı raporları hello bağlantı açıksa, hello önbellek hello VNET istemcilerinden gelen bağlantı için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-272">If hello `tcping` tool reports that hello port is open, hello cache is available for connection from clients in hello VNET.</span></span>

  - <span data-ttu-id="4ab7d-273">Toocreate test önbellek istemcisi başka bir şekilde tootest olduğu (basit bir olabilir StackExchange.Redis kullanarak konsol uygulaması) toohello önbellek bağlanır ve ekler ve bazı öğeler hello önbellekten alır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-273">Another way tootest is toocreate a test cache client (which could be a simple console application using StackExchange.Redis) that connects toohello cache and adds and retrieves some items from hello cache.</span></span> <span data-ttu-id="4ab7d-274">Merhaba örnek istemci uygulaması olan bir VM üzerine yükleme hello önbelleği olarak aynı sanal ağı hello ve tooverify bağlantı toohello önbellek çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-274">Install hello sample client application onto a VM that is in hello same VNET as hello cache and run it tooverify connectivity toohello cache.</span></span>


### <a name="can-i-use-vnets-with-a-standard-or-basic-cache"></a><span data-ttu-id="4ab7d-275">Sanal ağlar ile standart ya da temel bir önbellek kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-275">Can I use VNets with a standard or basic cache?</span></span>
<span data-ttu-id="4ab7d-276">Sanal ağlar yalnızca premium önbelleklere ile kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-276">VNets can only be used with premium caches.</span></span>

### <a name="why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others"></a><span data-ttu-id="4ab7d-277">Neden Redis önbelleği oluşturma bazı alt ağların ancak diğer başarısız oluyor?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-277">Why does creating a Redis cache fail in some subnets but not others?</span></span>
<span data-ttu-id="4ab7d-278">Azure Redis önbelleği tooa Resource Manager Vnet'i dağıtıyorsanız, hello önbelleği başka bir kaynak türünü içeren özel bir alt ağda olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-278">If you are deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resource type.</span></span> <span data-ttu-id="4ab7d-279">Azure Redis önbelleği tooa içeren diğer kaynaklar, hello dağıtım Resource Manager Vnet'i alt girişimde toodeploy başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-279">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet subnet that contains other resources, hello deployment fails.</span></span> <span data-ttu-id="4ab7d-280">Yeni Redis önbelleği oluşturabilmeniz için önce hello alt ağ içindeki hello mevcut kaynakların silmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-280">You must delete hello existing resources inside hello subnet before you can create a new Redis cache.</span></span>

<span data-ttu-id="4ab7d-281">Birden çok tür dağıtabilirsiniz yeterli IP olduğu sürece kaynakları tooa Klasik VNet kullanılabilir giderir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-281">You can deploy multiple types of resources tooa classic VNet as long as you have enough IP addresses available.</span></span>

### <a name="what-are-hello-subnet-address-space-requirements"></a><span data-ttu-id="4ab7d-282">Merhaba alt ağ adres alanı gereksinimleri nelerdir?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-282">What are hello subnet address space requirements?</span></span>
<span data-ttu-id="4ab7d-283">Her alt ağ içindeki bazı IP adreslerini Azure ayırır ve bu adresleri kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-283">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="4ab7d-284">Merhaba ilk ve son IP adresleri hello alt Azure Hizmetleri için kullanılan üç daha fazla adres birlikte Protokolü uyum için ayrılmıştır.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-284">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="4ab7d-285">Daha fazla bilgi için bkz: [bu alt ağ içindeki IP adresleri kullanma kısıtlamaları vardır?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="4ab7d-285">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>

<span data-ttu-id="4ab7d-286">Hello Azure sanal ağ altyapısı tarafından kullanılan ek toohello IP adresleri, her Redis örnek parça her hello alt ağ kullanan iki IP adresi ve hello yük dengeleyici için bir ek IP adresi.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-286">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="4ab7d-287">Kümelenmemiş bir önbellek toohave bir parça olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-287">A non-clustered cache is considered toohave one shard.</span></span>

### <a name="do-all-cache-features-work-when-hosting-a-cache-in-a-vnet"></a><span data-ttu-id="4ab7d-288">Tüm önbellek özellikleri, bir VNET önbelleğinde barındırdığında çalışıyor mu?</span><span class="sxs-lookup"><span data-stu-id="4ab7d-288">Do all cache features work when hosting a cache in a VNET?</span></span>
<span data-ttu-id="4ab7d-289">Önbelleğinizi VNET parçası olduğunda, yalnızca hello VNET istemcilerinde hello önbelleğe erişebilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-289">When your cache is part of a VNET, only clients in hello VNET can access hello cache.</span></span> <span data-ttu-id="4ab7d-290">Sonuç olarak, hello aşağıdaki önbellek yönetim özellikleri şu anda çalışmıyor.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-290">As a result, hello following cache management features don't work at this time.</span></span>

* <span data-ttu-id="4ab7d-291">Konsol redis - VNET hello dışında olan yerel tarayıcınızda Redis Konsolu çalıştıran tooyour önbellek bağlanılamıyor.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-291">Redis Console - Because Redis Console runs in your local browser, which is outside hello VNET, it can't connect tooyour cache.</span></span>

## <a name="use-expressroute-with-azure-redis-cache"></a><span data-ttu-id="4ab7d-292">ExpressRoute ile Azure Redis önbelleğini kullanma</span><span class="sxs-lookup"><span data-stu-id="4ab7d-292">Use ExpressRoute with Azure Redis Cache</span></span>
<span data-ttu-id="4ab7d-293">Müşteriler bağlanabileceği bir [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) hattı tootheir sanal ağ altyapısı, böylece kendi şirket içi ağ tooAzure genişletme.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-293">Customers can connect an [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span> 

<span data-ttu-id="4ab7d-294">Varsayılan olarak, yeni oluşturulan bir expressroute bağlantı hattı zorlamalı tünel gerçekleştirmez (varsayılan yol tanıtım 0.0.0.0/0) bir VNET üzerinde.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-294">By default, a newly created ExpressRoute circuit does not perform forced tunneling (advertisement of a default route, 0.0.0.0/0) on a VNET.</span></span> <span data-ttu-id="4ab7d-295">Sonuç olarak, doğrudan hello VNET ' giden Internet bağlantısına izin verilen ve istemci uygulamalardır mümkün tooconnect tooother Azure uç noktaları Azure Redis önbelleği dahil olmak üzere.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-295">As a result, outbound Internet connectivity is allowed directly from hello VNET and client applications are able tooconnect tooother Azure endpoints including Azure Redis Cache.</span></span>

<span data-ttu-id="4ab7d-296">Ancak bir ortak müşteri zorlanan tünel toouse yapılandırmasıdır (varsayılan rota tanıtma) giden Internet trafiği tooinstead akış içi zorlar.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-296">However a common customer configuration is toouse forced tunneling (advertise a default route) which forces outbound Internet traffic tooinstead flow on-premises.</span></span> <span data-ttu-id="4ab7d-297">Bu trafik akışı hello giden trafiği ise, Azure Redis önbelleği ile bağlantısını keser. ardından hello Azure Redis önbelleği örneği mümkün toocommunicate bağımlılıklarını ile değil, şirket içi engellendi.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-297">This traffic flow breaks connectivity with Azure Redis Cache if hello outbound traffic is then blocked on-premises such that hello Azure Redis Cache instance is not able toocommunicate with its dependencies.</span></span>

<span data-ttu-id="4ab7d-298">Merhaba, toodefine bir (veya daha fazla) kullanıcı tanımlı yollar (Udr'ler) hello Azure Redis önbelleği içeren hello alt ağdaki çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-298">hello solution is toodefine one (or more) user-defined routes (UDRs) on hello subnet that contains hello Azure Redis Cache.</span></span> <span data-ttu-id="4ab7d-299">Bir UDR hello varsayılan yol yerine uyulacaktır alt özel yollar tanımlar.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-299">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="4ab7d-300">Mümkünse, bu yapılandırma aşağıdaki toouse hello önerilir:</span><span class="sxs-lookup"><span data-stu-id="4ab7d-300">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="4ab7d-301">Merhaba ExpressRoute yapılandırma 0.0.0.0/0 tanıtır ve varsayılan olarak tüm giden trafiği şirket içi zorlamalı tünel oluşturur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-301">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="4ab7d-302">Merhaba hello Azure Redis önbelleği içeren uygulanan UDR toohello alt tanımlar 0.0.0.0/0 TCP/IP'yi trafiği toohello için bir çalışma rota ile ortak Internet; Örneğin ayarı hello tarafından türü too'Internet sonraki atlama '.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-302">hello UDR applied toohello subnet containing hello Azure Redis Cache defines 0.0.0.0/0 with a working route for TCP/IP traffic toohello public internet; for example by setting hello next hop type too'Internet'.</span></span>

<span data-ttu-id="4ab7d-303">Merhaba birleşik bu adımları hello alt düzey UDR hello zorlanan tünel, ExpressRoute böylece hello Azure Redis önbelleği giden Internet erişim sağlamaya göre öncelik kazanır etkisidir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-303">hello combined effect of these steps is that hello subnet level UDR takes precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello Azure Redis Cache.</span></span>

<span data-ttu-id="4ab7d-304">ExpressRoute kullanarak şirket içi uygulama bağlanan tooan Azure Redis önbelleği örneği tipik kullanım senaryosu tooperformance nedenlerden dolayı değil (Azure Redis önbelleği en iyi performans için istemcileri hello olmalıdır hello Azure Redis önbelleği ile aynı bölgeye).</span><span class="sxs-lookup"><span data-stu-id="4ab7d-304">Connecting tooan Azure Redis Cache instance from an on-premises application using ExpressRoute is not a typical usage scenario due tooperformance reasons (for best performance Azure Redis Cache clients should be in hello same region as hello Azure Redis Cache).</span></span>

>[!IMPORTANT] 
><span data-ttu-id="4ab7d-305">Merhaba UDR içinde tanımlanan yollar **gerekir** hello ExpressRoute yapılandırma tarafından tanıtılan rotaları üzerinden yeterince spesifik tootake öncelik olması.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-305">hello routes defined in a UDR **must** be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="4ab7d-306">Merhaba aşağıdaki örnek hello geniş 0.0.0.0/0 adres aralığını kullanır ve bu nedenle olası yanlışlıkla daha belirli adres aralıkları kullanarak Yol tanıtımlarını tarafından geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-306">hello following example uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>

>[!WARNING]  
><span data-ttu-id="4ab7d-307">Azure Redis önbelleği ile ExpressRoute yapılandırmaları desteklenmez, **yanlış cross-hello ortak eşleme yolu toohello özel eşleme yolu yolları tanıtma**.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-307">Azure Redis Cache is not supported with ExpressRoute configurations that **incorrectly cross-advertise routes from hello public peering path toohello private peering path**.</span></span> <span data-ttu-id="4ab7d-308">Yapılandırılmış, ortak eşleme sahip ExpressRoute yapılandırmaları çok sayıda Microsoft Azure IP adres aralıkları için Microsoft'tan Yol tanıtımlarını alırsınız.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-308">ExpressRoute configurations that have public peering configured, receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="4ab7d-309">Bu adres aralıklarını yanlış cross-hello özel eşleme yoluna tanıtılan varsa, hello sonuç tüm giden ağ paketlerinin hello Azure Redis önbelleği örneğinin alt ağdan hatalı zorlamalı tünel tooa müşterinin şirket içi ağ olmasıdır Altyapı.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-309">If these address ranges are incorrectly cross-advertised on hello private peering path, hello result is that all outbound network packets from hello Azure Redis Cache instance's subnet are incorrectly force-tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="4ab7d-310">Bu ağ akışı Azure Redis önbelleği keser.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-310">This network flow breaks Azure Redis Cache.</span></span> <span data-ttu-id="4ab7d-311">Merhaba ortak eşleme yolu toohello özel eşleme yolu toostop arası reklam yolları Hello çözüm toothis sorunudur.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-311">hello solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>


<span data-ttu-id="4ab7d-312">Kullanıcı tanımlı yollar hakkında arka plan bilgileri kullanılabilir bu [genel bakış](../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4ab7d-312">Background information on user-defined routes is available in this [overview](../virtual-network/virtual-networks-udr-overview.md).</span></span>

<span data-ttu-id="4ab7d-313">ExpressRoute hakkında daha fazla bilgi için bkz: [ExpressRoute teknik genel bakış](../expressroute/expressroute-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="4ab7d-313">For more information about ExpressRoute, see [ExpressRoute technical overview](../expressroute/expressroute-introduction.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="4ab7d-314">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="4ab7d-314">Next steps</span></span>
<span data-ttu-id="4ab7d-315">Toouse daha premium özellikleri nasıl önbelleğe alma hakkında bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="4ab7d-315">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="4ab7d-316">Giriş toohello Azure Redis önbelleği Premium katmanına</span><span class="sxs-lookup"><span data-stu-id="4ab7d-316">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-vnet]: ./media/cache-how-to-premium-vnet/redis-cache-vnet.png

[redis-cache-vnet-ip]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-ip.png

[redis-cache-vnet-info]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-info.png

