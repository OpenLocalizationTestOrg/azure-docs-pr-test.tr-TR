---
title: "aaaAsymmetric yönlendirme | Microsoft Docs"
description: "Bu makalede, bir müşteri, birden çok bağlantılar tooa hedef olan bir ağda asimetrik yönlendirme ile yüz hello sorunlar açıklanmaktadır."
documentationcenter: na
services: expressroute
author: osamazia
manager: carmonm
editor: 
ms.assetid: a754bff9-95c9-44b5-9796-377fc21e8322
ms.service: expressroute
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/10/2016
ms.author: osamam
ms.openlocfilehash: 01a16242437a3674dcfe27b074911a829a6c1abd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="asymmetric-routing-with-multiple-network-paths"></a><span data-ttu-id="bc178-103">Birden çok ağ yoluyla Asimetrik yönlendirme</span><span class="sxs-lookup"><span data-stu-id="bc178-103">Asymmetric routing with multiple network paths</span></span>
<span data-ttu-id="bc178-104">Bu makalede, ağ kaynağı ile hedef arasında birden çok yol varsa iletme ve döndürme ağ trafiğinin nasıl farklı rotalar izleyebileceği açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="bc178-104">This article explains how forward and return network traffic might take different routes when multiple paths are available between network source and destination.</span></span>

<span data-ttu-id="bc178-105">Buna ait önemli toounderstand iki kavramları toounderstand asimetrik yönlendirme.</span><span class="sxs-lookup"><span data-stu-id="bc178-105">It's important toounderstand two concepts toounderstand asymmetric routing.</span></span> <span data-ttu-id="bc178-106">Birden çok ağ yolunu hello etkisini biridir.</span><span class="sxs-lookup"><span data-stu-id="bc178-106">One is hello effect of multiple network paths.</span></span> <span data-ttu-id="bc178-107">Merhaba başka bir güvenlik duvarı gibi cihazların durumunu kalmasını nasıl ' dir.</span><span class="sxs-lookup"><span data-stu-id="bc178-107">hello other is how devices, like a firewall, keep state.</span></span> <span data-ttu-id="bc178-108">Bu tür cihazlara durum bilgisi olan cihazlar denir.</span><span class="sxs-lookup"><span data-stu-id="bc178-108">These types of devices are called stateful devices.</span></span> <span data-ttu-id="bc178-109">Bu iki faktör bileşimini hello durum bilgisi olan aygıt trafiği hello aygıtla kendisini kaynaklanan algılamadı için hangi ağ trafiği durum bilgisi olan bir cihaz tarafından bırakılan senaryolar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="bc178-109">A combination of these two factors creates scenarios in which network traffic is dropped by a stateful device because hello stateful device didn't detect that traffic originated with hello device itself.</span></span>

## <a name="multiple-network-paths"></a><span data-ttu-id="bc178-110">Birden çok ağ yolu</span><span class="sxs-lookup"><span data-stu-id="bc178-110">Multiple network paths</span></span>
<span data-ttu-id="bc178-111">Internet üzerinden kendi Internet servis sağlayıcısı hello Internet gelen tüm trafiği tooand geçen bir bağlantı toohello hello yalnızca aynı yol bir kurumsal ağ içinde olduğunda.</span><span class="sxs-lookup"><span data-stu-id="bc178-111">When an enterprise network has only one link toohello Internet through their Internet service provider, all traffic tooand from hello Internet travels hello same path.</span></span> <span data-ttu-id="bc178-112">Genellikle, şirketler birden çok bağlantı hatları yedekli yollar, tooimprove ağ açık kalma süresi satın alın.</span><span class="sxs-lookup"><span data-stu-id="bc178-112">Often, companies purchase multiple circuits, as redundant paths, tooimprove network uptime.</span></span> <span data-ttu-id="bc178-113">Bu durumda, bir bağlantı ve hello toohello Internet hello ağının dışından trafiğinin giden mümkündür Döndür trafiği farklı bir bağlantı aracılığıyla gider.</span><span class="sxs-lookup"><span data-stu-id="bc178-113">When this happens, it's possible that traffic that goes outside of hello network, toohello Internet, goes through one link, and hello return traffic goes through a different link.</span></span> <span data-ttu-id="bc178-114">Bu duruma yaygın olarak asimetrik yönlendirme adı verilir.</span><span class="sxs-lookup"><span data-stu-id="bc178-114">This is commonly known as asymmetric routing.</span></span> <span data-ttu-id="bc178-115">Yönlendirme asimetrik, geriye doğru ağ trafiğini hello özgün akıştan farklı bir yol alır.</span><span class="sxs-lookup"><span data-stu-id="bc178-115">In asymmetric routing, reverse network traffic takes a different path from hello original flow.</span></span>

![Birden çok yola sahip ağ](./media/expressroute-asymmetric-routing/AsymmetricRouting3.png)

<span data-ttu-id="bc178-117">Öncelikle hello Internet üzerinde oluşur ancak asimetrik de Yönlendirme birden fazla yol tooother birleşimlerini geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="bc178-117">Although it primarily occurs on hello Internet, asymmetric routing also applies tooother combinations of multiple paths.</span></span> <span data-ttu-id="bc178-118">Bu, örneğin, tooan Internet yolu ve toohello Git özel bir yol geçerlidir aynı hedef ve toohello Git toomultiple özel yollar aynı hedef.</span><span class="sxs-lookup"><span data-stu-id="bc178-118">It applies, for example, both tooan Internet path and a private path that go toohello same destination, and toomultiple private paths that go toohello same destination.</span></span>

<span data-ttu-id="bc178-119">Merhaba şekilde, kaynak toodestination boyunca her yönlendirici hello en iyi yolu tooreach bir hedef hesaplar.</span><span class="sxs-lookup"><span data-stu-id="bc178-119">Each router along hello way, from source toodestination, computes hello best path tooreach a destination.</span></span> <span data-ttu-id="bc178-120">Merhaba yönlendiricinin belirleme olası en iyi yolu, iki ana etmenlere dayanır:</span><span class="sxs-lookup"><span data-stu-id="bc178-120">hello router's determination of best possible path is based on two main factors:</span></span>

* <span data-ttu-id="bc178-121">Dış ağlar arası yönlendirme, Sınır Ağ Geçidi Protokolü (BGP) olarak bilinen bir yönlendirme protokolüne bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="bc178-121">Routing between external networks is based on a routing protocol, Border Gateway Protocol (BGP).</span></span> <span data-ttu-id="bc178-122">BGP reklamları Komşuları alır ve adımları toodetermine hello en iyi yolu hedeflenen toohello hedef bir dizi aracılığıyla çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="bc178-122">BGP takes advertisements from neighbors and runs them through a series of steps toodetermine hello best path toohello intended destination.</span></span> <span data-ttu-id="bc178-123">Bu, kendi yönlendirme tablosunda hello en iyi yolunu depolar.</span><span class="sxs-lookup"><span data-stu-id="bc178-123">It stores hello best path in its routing table.</span></span>
* <span data-ttu-id="bc178-124">bir rota ile ilişkili bir alt ağ maskesi uzunluğunu Hello yönlendirme yollarının etkiler.</span><span class="sxs-lookup"><span data-stu-id="bc178-124">hello length of a subnet mask associated with a route influences routing paths.</span></span> <span data-ttu-id="bc178-125">Yönlendirici alırsa, aynı IP adresi için birden çok tanıtım hello ancak daha belirli bir yolu olarak kabul olduğundan farklı bir alt ağ maskeleriyle hello yönlendirici daha uzun bir alt ağ maskesi hello reklamla tercih eder..</span><span class="sxs-lookup"><span data-stu-id="bc178-125">If a router receives multiple advertisements for hello same IP address but with different subnet masks, hello router prefers hello advertisement with a longer subnet mask because it's considered a more specific route.</span></span>

## <a name="stateful-devices"></a><span data-ttu-id="bc178-126">Durum bilgisi olan cihazlar</span><span class="sxs-lookup"><span data-stu-id="bc178-126">Stateful devices</span></span>
<span data-ttu-id="bc178-127">Yönlendirici yönlendirme amaçları için bir paketin hello IP üstbilgisi arayın.</span><span class="sxs-lookup"><span data-stu-id="bc178-127">Routers look at hello IP header of a packet for routing purposes.</span></span> <span data-ttu-id="bc178-128">Bazı aygıtlar hello paketin içinde bile daha derin arayın.</span><span class="sxs-lookup"><span data-stu-id="bc178-128">Some devices look even deeper inside hello packet.</span></span> <span data-ttu-id="bc178-129">Bu cihazlar, genellikle Katman4 (İletim Denetimi Protokolü veya TCP ya da Kullanıcı Veri Birimi Protokolü veya UDP) ve hatta Katman7 (Uygulama Katmanı) üst bilgilerine bakar.</span><span class="sxs-lookup"><span data-stu-id="bc178-129">Typically, these devices look at Layer4 (Transmission Control Protocol, or TCP; or User Datagram Protocol, or UDP), or even Layer7 (Application Layer) headers.</span></span> <span data-ttu-id="bc178-130">Bu tür cihazlar, güvenlik cihazları ya da bant genişliği iyileştirme cihazlarıdır.</span><span class="sxs-lookup"><span data-stu-id="bc178-130">These kinds of devices are either security devices or bandwidth-optimization devices.</span></span> 

<span data-ttu-id="bc178-131">Durum bilgisi olan cihazlar için tipik bir örnek güvenlik duvarıdır.</span><span class="sxs-lookup"><span data-stu-id="bc178-131">A firewall is a common example of a stateful device.</span></span> <span data-ttu-id="bc178-132">Bir güvenlik duvarı sağlar veya paket toopass protokolü, TCP/UDP bağlantı noktası ve URL üstbilgileri gibi çeşitli alanlara göre arabirimlerinden aracılığıyla reddeder.</span><span class="sxs-lookup"><span data-stu-id="bc178-132">A firewall allows or denies a packet toopass through its interfaces based on various fields such as protocol, TCP/UDP port, and URL headers.</span></span> <span data-ttu-id="bc178-133">Bu düzeyde bir paket incelemesi işleme yükünü hello aygıtta ağır koyar.</span><span class="sxs-lookup"><span data-stu-id="bc178-133">This level of packet inspection puts a heavy processing load on hello device.</span></span> <span data-ttu-id="bc178-134">tooimprove performans hello Güvenlik Duvarı'nı bir akış hello ilk paket olup olmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="bc178-134">tooimprove performance, hello firewall inspects hello first packet of a flow.</span></span> <span data-ttu-id="bc178-135">Merhaba paket tooproceed izin veriyorsa, kendi durumu tablosunda hello akış bilgisini tutar.</span><span class="sxs-lookup"><span data-stu-id="bc178-135">If it allows hello packet tooproceed, it keeps hello flow information in its state table.</span></span> <span data-ttu-id="bc178-136">Tüm sonraki paketlere ilgili toothis akışı hello ilk belirleme göre verilir.</span><span class="sxs-lookup"><span data-stu-id="bc178-136">All subsequent packets related toothis flow are allowed based on hello initial determination.</span></span> <span data-ttu-id="bc178-137">Var olan bir akış parçası olan bir paket hello güvenlik duvarında gelen.</span><span class="sxs-lookup"><span data-stu-id="bc178-137">A packet that is part of an existing flow might arrive at hello firewall.</span></span> <span data-ttu-id="bc178-138">Merhaba güvenlik duvarı ilgili önceki durum bilgisi varsa, hello güvenlik duvarı hello paket bırakır.</span><span class="sxs-lookup"><span data-stu-id="bc178-138">If hello firewall has no prior state information about it, hello firewall drops hello packet.</span></span>

## <a name="asymmetric-routing-with-expressroute"></a><span data-ttu-id="bc178-139">ExpressRoute ile asimetrik yönlendirme</span><span class="sxs-lookup"><span data-stu-id="bc178-139">Asymmetric routing with ExpressRoute</span></span>
<span data-ttu-id="bc178-140">Azure ExpressRoute aracılığıyla tooMicrosoft bağlandığınızda, ağ değişikliklerinizi bu ister:</span><span class="sxs-lookup"><span data-stu-id="bc178-140">When you connect tooMicrosoft through Azure ExpressRoute, your network changes like this:</span></span>

* <span data-ttu-id="bc178-141">Birden çok bağlantılar tooMicrosoft sahip.</span><span class="sxs-lookup"><span data-stu-id="bc178-141">You have multiple links tooMicrosoft.</span></span> <span data-ttu-id="bc178-142">Bir bağlantı, varolan bir Internet bağlantısı ve ExpressRoute aracılığıyla hello diğer şeklindedir.</span><span class="sxs-lookup"><span data-stu-id="bc178-142">One link is your existing Internet connection, and hello other is via ExpressRoute.</span></span> <span data-ttu-id="bc178-143">Bazı trafiği tooMicrosoft hello Internet Git ancak ExpressRoute aracılığıyla veya tersi geri dönün.</span><span class="sxs-lookup"><span data-stu-id="bc178-143">Some traffic tooMicrosoft might go through hello Internet but come back via ExpressRoute, or vice versa.</span></span>
* <span data-ttu-id="bc178-144">ExpressRoute üzerinden daha belirli IP adresleri alırsınız.</span><span class="sxs-lookup"><span data-stu-id="bc178-144">You receive more specific IP addresses via ExpressRoute.</span></span> <span data-ttu-id="bc178-145">Bu nedenle, ExpressRoute aracılığıyla sunulan hizmetler için ağ tooMicrosoft gelen trafik için yönlendiriciler ExpressRoute her zaman tercih.</span><span class="sxs-lookup"><span data-stu-id="bc178-145">So, for traffic from your network tooMicrosoft for services offered via ExpressRoute, routers always prefer ExpressRoute.</span></span>

<span data-ttu-id="bc178-146">Bu iki değişiklikten sahip bir ağda toounderstand hello etkisi şimdi bazı senaryoları göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="bc178-146">toounderstand hello effect these two changes have on a network, let’s consider some scenarios.</span></span> <span data-ttu-id="bc178-147">Örneğin, yalnızca bir bağlantı hattı toohello Internet sahip ve hello Internet üzerinden tüm Microsoft hizmetlerini kullanma.</span><span class="sxs-lookup"><span data-stu-id="bc178-147">As an example, you have only one circuit toohello Internet and you consume all Microsoft services via hello Internet.</span></span> <span data-ttu-id="bc178-148">Merhaba, ağ tooMicrosoft ve geri ilişkilerinden geçen trafiğinden hello aynı Internet bağlantısı ve hello güvenlik duvarı üzerinden geçer.</span><span class="sxs-lookup"><span data-stu-id="bc178-148">hello traffic from your network tooMicrosoft and back traverses hello same Internet link and passes through hello firewall.</span></span> <span data-ttu-id="bc178-149">Merhaba ilk paket görür ve hello akış hello durumu tabloda bulunduğundan paketlere izin verilmesi dönüş gibi hello güvenlik duvarı kayıtları akış hello.</span><span class="sxs-lookup"><span data-stu-id="bc178-149">hello firewall records hello flow as it sees hello first packet and return packets are allowed because hello flow exists in hello state table.</span></span>

![ExpressRoute ile asimetrik yönlendirme](./media/expressroute-asymmetric-routing/AsymmetricRouting1.png)

<span data-ttu-id="bc178-151">Ardından, ExpressRoute hizmetini açıyorsunuz ve Microsoft tarafından ExpressRoute üzerinden sunulan hizmetleri tüketiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="bc178-151">Then, you turn on ExpressRoute and consume services offered by Microsoft over ExpressRoute.</span></span> <span data-ttu-id="bc178-152">Tüm diğer Microsoft hizmetlerinden hello Internet kullanılır.</span><span class="sxs-lookup"><span data-stu-id="bc178-152">All other services from Microsoft are consumed over hello Internet.</span></span> <span data-ttu-id="bc178-153">Bağlı tooExpressRoute olduğundan, sınırında ayrı bir Güvenlik Duvarı'nı dağıtın.</span><span class="sxs-lookup"><span data-stu-id="bc178-153">You deploy a separate firewall at your edge that is connected tooExpressRoute.</span></span> <span data-ttu-id="bc178-154">Microsoft, belirli hizmetleri için ExpressRoute daha belirli önekleri tooyour ağ tanıtır.</span><span class="sxs-lookup"><span data-stu-id="bc178-154">Microsoft advertises more specific prefixes tooyour network over ExpressRoute for specific services.</span></span> <span data-ttu-id="bc178-155">Yönlendirme altyapınızı ExpressRoute bu önekler için tercih edilen yol hello olarak seçer.</span><span class="sxs-lookup"><span data-stu-id="bc178-155">Your routing infrastructure chooses ExpressRoute as hello preferred path for those prefixes.</span></span> <span data-ttu-id="bc178-156">Size, ortak IP adresleri tooMicrosoft ExpressRoute reklam değil, Microsoft ortak IP adreslerinizi hello Internet üzerinden iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="bc178-156">If you are not advertising your public IP addresses tooMicrosoft over ExpressRoute, Microsoft communicates with your public IP addresses via hello Internet.</span></span> <span data-ttu-id="bc178-157">ExpressRoute ağ tooMicrosoft iletme trafiğinden kullanır ve Microsoft ters trafiğinden hello Internet kullanır.</span><span class="sxs-lookup"><span data-stu-id="bc178-157">Forward traffic from your network tooMicrosoft uses ExpressRoute, and reverse traffic from Microsoft uses hello Internet.</span></span> <span data-ttu-id="bc178-158">Merhaba hello sınır güvenlik duvarında hello durumu tabloda bulamazsa bir akışı için bir yanıt paketi gördüğünde hello dönüş trafiği bırakır.</span><span class="sxs-lookup"><span data-stu-id="bc178-158">When hello firewall at hello edge sees a response packet for a flow that it does not find in hello state table, it drops hello return traffic.</span></span>

<span data-ttu-id="bc178-159">Aynı ağ adresi çevirisi (NAT) havuz hello Internet ve ExpressRoute için toouse hello seçerseniz, ağınızdaki özel IP adresleri hello istemcilerle benzer sorunlar görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="bc178-159">If you choose toouse hello same network address translation (NAT) pool for ExpressRoute and for hello Internet, you'll see similar issues with hello clients in your network on private IP addresses.</span></span> <span data-ttu-id="bc178-160">Bu hizmetler için IP adreslerini ExpressRoute aracılığıyla bildirilmeyeceğini olduğundan Windows Update gibi hizmetler için istekleri hello Internet gidin.</span><span class="sxs-lookup"><span data-stu-id="bc178-160">Requests for services like Windows Update go via hello Internet because IP addresses for these services are not advertised via ExpressRoute.</span></span> <span data-ttu-id="bc178-161">Ancak, hello dönüş trafik ExpressRoute aracılığıyla gelir.</span><span class="sxs-lookup"><span data-stu-id="bc178-161">However, hello return traffic comes back via ExpressRoute.</span></span> <span data-ttu-id="bc178-162">Microsoft IP adresi ile alırsa, aynı alt ağ maskesi hello Internet gelen ve ExpressRoute hello hello Internet ExpressRoute tercih eder.</span><span class="sxs-lookup"><span data-stu-id="bc178-162">If Microsoft receives an IP address with hello same subnet mask from hello Internet and ExpressRoute, it prefers ExpressRoute over hello Internet.</span></span> <span data-ttu-id="bc178-163">Bir güvenlik duvarı veya ağ kenarı ve ExpressRoute karşılıklı başka bir durum bilgisi olan aygıt hello akışı hakkında önceki hiçbir bilgi varsa, toothat akış ait karşılama paketleri bırakır.</span><span class="sxs-lookup"><span data-stu-id="bc178-163">If a firewall or another stateful device that is on your network edge and facing ExpressRoute has no prior information about hello flow, it drops hello packets that belong toothat flow.</span></span>

## <a name="asymmetric-routing-solutions"></a><span data-ttu-id="bc178-164">Asimetrik yönlendirme çözümleri</span><span class="sxs-lookup"><span data-stu-id="bc178-164">Asymmetric routing solutions</span></span>
<span data-ttu-id="bc178-165">Asimetrik yönlendirme iki ana seçeneğiniz toosolve hello sorunu var.</span><span class="sxs-lookup"><span data-stu-id="bc178-165">You have two main options toosolve hello problem of asymmetric routing.</span></span> <span data-ttu-id="bc178-166">Yönlendirme aracılığıyla biridir ve hello diğer kaynak tabanlı NAT (SNAT) kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="bc178-166">One is through routing, and hello other is by using source-based NAT (SNAT).</span></span>

### <a name="routing"></a><span data-ttu-id="bc178-167">Yönlendirme</span><span class="sxs-lookup"><span data-stu-id="bc178-167">Routing</span></span>
<span data-ttu-id="bc178-168">Ortak IP adreslerinizi tanıtılan tooappropriate geniş alan ağı (WAN) bağlantıları olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="bc178-168">Ensure that your public IP addresses are advertised tooappropriate wide area network (WAN) links.</span></span> <span data-ttu-id="bc178-169">Toouse hello Internet kimlik doğrulama trafiği ve ExpressRoute için posta trafiği için isterseniz, örneğin, Active Directory Federasyon Hizmetleri (AD FS) genel IP adreslerinizi ExpressRoute bildirilmeyecek.</span><span class="sxs-lookup"><span data-stu-id="bc178-169">For example, if you want toouse hello Internet for authentication traffic and ExpressRoute for your mail traffic, you should not advertise your Active Directory Federation Services (AD FS) public IP addresses over ExpressRoute.</span></span> <span data-ttu-id="bc178-170">Benzer şekilde, mutlaka değil tooexpose şirket içi bir yönlendirici hello AD FS sunucu tooIP adreslerini ExpressRoute alır.</span><span class="sxs-lookup"><span data-stu-id="bc178-170">Similarly, be sure not tooexpose an on-premises AD FS server tooIP addresses that hello router receives over ExpressRoute.</span></span> <span data-ttu-id="bc178-171">ExpressRoute hello tercih edilen yol için kimlik doğrulama trafiğini tooMicrosoft yaparsınız ExpressRoute alınan yollar daha özeldir.</span><span class="sxs-lookup"><span data-stu-id="bc178-171">Routes received over ExpressRoute are more specific so they make ExpressRoute hello preferred path for authentication traffic tooMicrosoft.</span></span> <span data-ttu-id="bc178-172">Bu durum asimetrik yönlendirmeye yol açar.</span><span class="sxs-lookup"><span data-stu-id="bc178-172">This causes asymmetric routing.</span></span>

<span data-ttu-id="bc178-173">Kimlik doğrulaması için toouse ExpressRoute istiyorsanız NAT olmadan ExpressRoute üzerinden AD FS genel IP adresleri reklam emin olun</span><span class="sxs-lookup"><span data-stu-id="bc178-173">If you want toouse ExpressRoute for authentication, make sure that you are advertising AD FS public IP addresses over ExpressRoute without NAT.</span></span> <span data-ttu-id="bc178-174">Bu şekilde, Microsoft'tan kaynaklanan ve tooan giden trafik ExpressRoute üzerinde AD FS sunucu gider şirket içi.</span><span class="sxs-lookup"><span data-stu-id="bc178-174">This way, traffic that originates from Microsoft and goes tooan on-premises AD FS server goes over ExpressRoute.</span></span> <span data-ttu-id="bc178-175">Merhaba Internet hello tercih edilen yol olduğundan müşteri tooMicrosoft dönüş trafiğinden ExpressRoute kullanır.</span><span class="sxs-lookup"><span data-stu-id="bc178-175">Return traffic from customer tooMicrosoft uses ExpressRoute because it's hello preferred route over hello Internet.</span></span>

### <a name="source-based-nat"></a><span data-ttu-id="bc178-176">Kaynak tabanlı NAT</span><span class="sxs-lookup"><span data-stu-id="bc178-176">Source-based NAT</span></span>
<span data-ttu-id="bc178-177">Asimetrik yönlendirme sorunlarını çözmenin bir başka yolu da SNAT kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="bc178-177">Another way of solving asymmetric routing issues is by using SNAT.</span></span> <span data-ttu-id="bc178-178">Toouse hello Internet bu tür iletişim için düşündüğünüz çünkü Örneğin, bir şirket içi Basit Posta Aktarım Protokolü (SMTP) sunucusunun hello ortak IP adresi ExpressRoute tanıtılan değil.</span><span class="sxs-lookup"><span data-stu-id="bc178-178">For example, you have not advertised hello public IP address of an on-premises Simple Mail Transfer Protocol (SMTP) server over ExpressRoute because you intend toouse hello Internet for this type of communication.</span></span> <span data-ttu-id="bc178-179">Microsoft ile kaynaklanan ve tooyour girer bir istek hello Internet SMTP sunucusu arasında çapraz geçiş şirket içi.</span><span class="sxs-lookup"><span data-stu-id="bc178-179">A request that originates with Microsoft and then goes tooyour on-premises SMTP server traverses hello Internet.</span></span> <span data-ttu-id="bc178-180">Gelen istek tooan iç IP adresi, SNAT hello.</span><span class="sxs-lookup"><span data-stu-id="bc178-180">You SNAT hello incoming request tooan internal IP address.</span></span> <span data-ttu-id="bc178-181">Merhaba SMTP sunucusu ters trafik (kullanacağınız için NAT) toohello sınır güvenlik duvarı yerine ExpressRoute aracılığıyla gider.</span><span class="sxs-lookup"><span data-stu-id="bc178-181">Reverse traffic from hello SMTP server goes toohello edge firewall (which you use for NAT) instead of through ExpressRoute.</span></span> <span data-ttu-id="bc178-182">Merhaba dönüş trafiği geri hello Internet gider.</span><span class="sxs-lookup"><span data-stu-id="bc178-182">hello return traffic goes back via hello Internet.</span></span>

![Kaynak tabanlı NAT ağ yapılandırması](./media/expressroute-asymmetric-routing/AsymmetricRouting2.png)

## <a name="asymmetric-routing-detection"></a><span data-ttu-id="bc178-184">Asimetrik yönlendirmenin algılanması</span><span class="sxs-lookup"><span data-stu-id="bc178-184">Asymmetric routing detection</span></span>
<span data-ttu-id="bc178-185">İzleme yolu hello en iyi şekilde toomake ağ trafiğinizi beklenen hello yolu yaptıran emin olur.</span><span class="sxs-lookup"><span data-stu-id="bc178-185">Traceroute is hello best way toomake sure that your network traffic is traversing hello expected path.</span></span> <span data-ttu-id="bc178-186">Trafik, şirket içi SMTP sunucusu tooMicrosoft tootake hello Internet yolunun bekliyorsanız, hello izleme yolu hello SMTP sunucusu tooOffice 365 beklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="bc178-186">If you expect traffic from your on-premises SMTP server tooMicrosoft tootake hello Internet path, hello expected traceroute is from hello SMTP server tooOffice 365.</span></span> <span data-ttu-id="bc178-187">Merhaba sonuç trafik ağınıza hello Internet doğru ve ExpressRoute doğru değil gerçekten ayrılıyor doğrular.</span><span class="sxs-lookup"><span data-stu-id="bc178-187">hello result validates that traffic is indeed leaving your network toward hello Internet and not toward ExpressRoute.</span></span>

