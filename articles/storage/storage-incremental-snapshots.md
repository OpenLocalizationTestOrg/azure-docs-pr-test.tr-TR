---
title: "aaaUse artımlı anlık görüntüleri yedekleme ve kurtarma yönetilmeyen Azure VM disklerinin | Microsoft Docs"
description: "Yedekleme ve kurtarma artımlı anlık görüntülerini kullanarak Azure sanal makine disklerinizi için özel bir çözüm oluşturun."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: 3524b987-bd65-4e35-83e7-fbc2136643e5
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: aungoo
ms.openlocfilehash: 6d3e6d78e953f77a1028ac35dcde1ef046dbc3bb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="back-up-azure-unmanaged-vm-disks-with-incremental-snapshots"></a><span data-ttu-id="181e9-103">Artımlı anlık görüntüleri ile Azure yönetilmeyen VM diskleri yedekleyin</span><span class="sxs-lookup"><span data-stu-id="181e9-103">Back up Azure unmanaged VM disks with incremental snapshots</span></span>
## <a name="overview"></a><span data-ttu-id="181e9-104">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="181e9-104">Overview</span></span>
<span data-ttu-id="181e9-105">Azure Storage blobları tootake anlık görüntülerini hello yeteneği sağlar.</span><span class="sxs-lookup"><span data-stu-id="181e9-105">Azure Storage provides hello capability tootake snapshots of blobs.</span></span> <span data-ttu-id="181e9-106">Anlık görüntüler zamandaki o noktada hello blob durumu yakalayın.</span><span class="sxs-lookup"><span data-stu-id="181e9-106">Snapshots capture hello blob state at that point in time.</span></span> <span data-ttu-id="181e9-107">Bu makalede, biz anlık görüntülerini kullanarak sanal makine disklerinin yedeklerini nasıl koruyabilirsiniz bir senaryoyu açıklar.</span><span class="sxs-lookup"><span data-stu-id="181e9-107">In this article, we will describe a scenario of how you can maintain backups of virtual machine disks using snapshots.</span></span> <span data-ttu-id="181e9-108">Değil toouse seçtiğinizde, bu yöntemi kullanabilirsiniz Azure yedekleme ve kurtarma hizmeti ve istek toocreate, sanal makine diskleriniz için özel bir yedekleme stratejisi.</span><span class="sxs-lookup"><span data-stu-id="181e9-108">You can use this methodology when you choose not toouse Azure Backup and Recovery Service, and wish toocreate a custom backup strategy for your virtual machine disks.</span></span>

<span data-ttu-id="181e9-109">Azure virtual machine diskleri sayfa blobları Azure storage'da olarak depolanır.</span><span class="sxs-lookup"><span data-stu-id="181e9-109">Azure virtual machine disks are stored as page blobs in Azure Storage.</span></span> <span data-ttu-id="181e9-110">Bu makalede sanal makine disklerini yedekleme stratejisi hakkında varsayılır olduğundan, biz toosnapshots sayfa bloblarını hello bağlamında başvuran.</span><span class="sxs-lookup"><span data-stu-id="181e9-110">Since we are talking about backup strategy for virtual machine disks in this article, we will be referring toosnapshots in hello context of page blobs.</span></span> <span data-ttu-id="181e9-111">Anlık görüntüler hakkında daha fazla toolearn başvurmak çok[Blob anlık görüntüsünün oluşturulmasına](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span><span class="sxs-lookup"><span data-stu-id="181e9-111">toolearn more about snapshots, refer too[Creating a Snapshot of a Blob](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span></span>

## <a name="what-is-a-snapshot"></a><span data-ttu-id="181e9-112">Bir anlık görüntü nedir?</span><span class="sxs-lookup"><span data-stu-id="181e9-112">What is a snapshot?</span></span>
<span data-ttu-id="181e9-113">Bir blob anlık bir noktada zamanında yakalanan bir blob, salt okunur bir sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="181e9-113">A blob snapshot is a read-only version of a blob that is captured at a point in time.</span></span> <span data-ttu-id="181e9-114">Bir anlık görüntü oluşturulduktan sonra okumak, kopyalanan, veya silinmiş, ancak değişiklik.</span><span class="sxs-lookup"><span data-stu-id="181e9-114">Once a snapshot has been created, it can be read, copied, or deleted, but not modified.</span></span> <span data-ttu-id="181e9-115">Bir anda göründüğü gibi anlık bir blob yukarı şekilde tooback sağlar.</span><span class="sxs-lookup"><span data-stu-id="181e9-115">Snapshots provide a way tooback up a blob as it appears at a moment in time.</span></span> <span data-ttu-id="181e9-116">Sürüm 2015-04-05 REST kadar hello özelliği toocopy tam anlık görüntüleri içeriyor.</span><span class="sxs-lookup"><span data-stu-id="181e9-116">Until REST version 2015-04-05 you had hello ability toocopy full snapshots.</span></span> <span data-ttu-id="181e9-117">Ayrıca hello REST sürüm 2015-07-08 ve üstü ile, artımlı anlık görüntüleri kopyalayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="181e9-117">With hello REST version 2015-07-08 and above, you can also copy incremental snapshots.</span></span>

## <a name="full-snapshot-copy"></a><span data-ttu-id="181e9-118">Tam anlık görüntü kopyalama</span><span class="sxs-lookup"><span data-stu-id="181e9-118">Full snapshot copy</span></span>
<span data-ttu-id="181e9-119">Anlık görüntü olabilir tooanother depolama hesabı hello temel blobu blob tookeep yedeklerini kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="181e9-119">Snapshots can be copied tooanother storage account as a blob tookeep backups of hello base blob.</span></span> <span data-ttu-id="181e9-120">Merhaba blob tooan geri yüklemeyi gibi kendi temel blob üzerinden bir anlık görüntü kopyalayabilirsiniz önceki sürümü.</span><span class="sxs-lookup"><span data-stu-id="181e9-120">You can also copy a snapshot over its base blob, which is like restoring hello blob tooan earlier version.</span></span> <span data-ttu-id="181e9-121">Bir anlık görüntü bir depolama hesabı tooanother kopyalandığında, aynı hello temel sayfa blob'u olarak boşluk hello dolduracaktır.</span><span class="sxs-lookup"><span data-stu-id="181e9-121">When a snapshot is copied from one storage account tooanother, it will occupy hello same space as hello base page blob.</span></span> <span data-ttu-id="181e9-122">Bu nedenle, bir depolama hesabı tooanother tüm anlık görüntüleri kopyalama yavaş olacaktır ve ayrıca çok fazla alan hello hedef depolama hesabındaki tüketir.</span><span class="sxs-lookup"><span data-stu-id="181e9-122">Therefore, copying whole snapshots from one storage account tooanother will be slow and will also consume lot of space in hello target storage account.</span></span>

> [!NOTE]
> <span data-ttu-id="181e9-123">Merhaba temel blob tooanother hedef kopyalarsanız, hello blob hello anlık görüntüleri onunla birlikte kopyalanmaz.</span><span class="sxs-lookup"><span data-stu-id="181e9-123">If you copy hello base blob tooanother destination, hello snapshots of hello blob are not copied along with it.</span></span> <span data-ttu-id="181e9-124">Benzer şekilde, bir kopya ile temel bir blob üzerine hello temel blob ile ilişkili anlık görüntüleri etkilenmez ve temel blob adı altında olduğu gibi kalır.</span><span class="sxs-lookup"><span data-stu-id="181e9-124">Similarly, if you overwrite a base blob with a copy, snapshots associated with hello base blob are not affected and stay intact under base blob name.</span></span>
> 
> 

### <a name="back-up-disks-using-snapshots"></a><span data-ttu-id="181e9-125">Diskleri anlık görüntülerini kullanarak yedekleme</span><span class="sxs-lookup"><span data-stu-id="181e9-125">Back up disks using snapshots</span></span>
<span data-ttu-id="181e9-126">Sanal makine diskleriniz için bir yedekleme stratejisi da hello disk ya da sayfa blob düzenli anlık görüntülerini almak ve bunları gibi araçları kullanarak tooanother depolama hesabı kopyalayın [kopyalama Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) işlemi veya [AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="181e9-126">As a backup strategy for your virtual machine disks, you can take periodic snapshots of hello disk or page blob, and copy them tooanother storage account using tools like [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) operation or [AzCopy](storage-use-azcopy.md).</span></span> <span data-ttu-id="181e9-127">Bir anlık görüntü tooa hedef sayfa blob'u farklı bir adla kopyalayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="181e9-127">You can copy a snapshot tooa destination page blob with a different name.</span></span> <span data-ttu-id="181e9-128">Merhaba elde edilen hedef sayfa blobu yazılabilir sayfa blobu ve anlık görüntü olmayan ' dir.</span><span class="sxs-lookup"><span data-stu-id="181e9-128">hello resulting destination page blob is a writeable page blob and not a snapshot.</span></span> <span data-ttu-id="181e9-129">Bu makalenin sonraki bölümlerinde biz adımları tootake anlık görüntülerini kullanarak sanal makine disklerinin yedeklerini anlatmaktadır.</span><span class="sxs-lookup"><span data-stu-id="181e9-129">Later in this article we will describe steps tootake backups of virtual machine disks using snapshots.</span></span>

### <a name="restore-disks-using-snapshots"></a><span data-ttu-id="181e9-130">Anlık görüntülerini kullanarak disklerini geri yükle</span><span class="sxs-lookup"><span data-stu-id="181e9-130">Restore disks using snapshots</span></span>
<span data-ttu-id="181e9-131">Disk tooa önceki kararlı sürümünü hello yedekleme anlık görüntülerinin birinde yakalanan zaman toorestore olduğunda, bir anlık görüntü hello temel sayfa blobu kopyalayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="181e9-131">When it is time toorestore your disk tooa previous stable version captured in one of hello backup snapshots, you can copy a snapshot over hello base page blob.</span></span> <span data-ttu-id="181e9-132">Yükseltilen toohello temel sayfa blobu Hello anlık görüntü olduktan sonra anlık görüntü kalır hello ancak kaynağı, hem okuma ve yazılabilir bir kopya ile üzerine yazılır.</span><span class="sxs-lookup"><span data-stu-id="181e9-132">After hello snapshot is promoted toohello base page blob, hello snapshot remains, but its source is overwritten with a copy that can be both read and written.</span></span> <span data-ttu-id="181e9-133">Bu makalenin sonraki bölümlerinde biz adımları toorestore kendi anlık görüntüsünü diskinizden önceki bir sürümünü anlatmaktadır.</span><span class="sxs-lookup"><span data-stu-id="181e9-133">Later in this article we will describe steps toorestore a previous version of your disk from its snapshot.</span></span>

### <a name="implementing-full-snapshot-copy"></a><span data-ttu-id="181e9-134">Tam anlık görüntü kopyalama uygulama</span><span class="sxs-lookup"><span data-stu-id="181e9-134">Implementing full snapshot copy</span></span>
<span data-ttu-id="181e9-135">Merhaba aşağıdakileri yaparak tam anlık görüntü kopyalama uygulayabilir,</span><span class="sxs-lookup"><span data-stu-id="181e9-135">You can implement a full snapshot copy by doing hello following,</span></span>

* <span data-ttu-id="181e9-136">İlk olarak, hello temel blob hello kullanarak bir anlık görüntüsünü [anlık görüntü Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) işlemi.</span><span class="sxs-lookup"><span data-stu-id="181e9-136">First, take a snapshot of hello base blob using hello [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) operation.</span></span>
* <span data-ttu-id="181e9-137">Ardından, kopyalama hello anlık görüntü tooa hedef depolama hesabı kullanılarak [kopyalama Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span><span class="sxs-lookup"><span data-stu-id="181e9-137">Then, copy hello snapshot tooa target storage account using [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span>
* <span data-ttu-id="181e9-138">Bu işlem toomaintain yedek kopyalarını temel blob yineleyin.</span><span class="sxs-lookup"><span data-stu-id="181e9-138">Repeat this process toomaintain backup copies of your base blob.</span></span>

## <a name="incremental-snapshot-copy"></a><span data-ttu-id="181e9-139">Artımlı anlık görüntü kopyalama</span><span class="sxs-lookup"><span data-stu-id="181e9-139">Incremental snapshot copy</span></span>
<span data-ttu-id="181e9-140">Merhaba yeni özellik [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) API'si, bir çok daha iyi şekilde tooback sayfa BLOB'ları veya diskleri hello anlık görüntüleri yedekleme sağlar.</span><span class="sxs-lookup"><span data-stu-id="181e9-140">hello new feature in [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) API provides a much better way tooback up hello snapshots of your page blobs or disks.</span></span> <span data-ttu-id="181e9-141">Merhaba API hello temel blob ve hello anlık görüntüleri değişiklikleri hello listesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="181e9-141">hello API returns hello list of changes between hello base blob and hello snapshots.</span></span> <span data-ttu-id="181e9-142">Bu hello hello yedekleme hesabında kullanılan depolama alanı miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="181e9-142">This reduces hello amount of storage space used on hello backup account.</span></span> <span data-ttu-id="181e9-143">Merhaba API standart depolama yanı sıra Premium depolama üzerinde sayfa bloblarını destekler.</span><span class="sxs-lookup"><span data-stu-id="181e9-143">hello API supports page blobs on Premium Storage as well as Standard Storage.</span></span> <span data-ttu-id="181e9-144">Bu API kullanarak Azure VM'ler için daha hızlı ve verimli yedekleme çözümleri şimdi oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="181e9-144">Using this API, you can now build faster and efficient backup solutions for Azure VMs.</span></span> <span data-ttu-id="181e9-145">Bu hello REST sürüm 2015-07-08 ile kullanılabilir ve daha yüksek olur.</span><span class="sxs-lookup"><span data-stu-id="181e9-145">This will be available with hello REST version 2015-07-08 and higher.</span></span>

<span data-ttu-id="181e9-146">Artımlı anlık görüntü kopyalama toocopy gelen bir depolama hesabı tooanother hello arasındaki farkı verir,</span><span class="sxs-lookup"><span data-stu-id="181e9-146">Incremental Snapshot Copy allows you toocopy from one storage account tooanother hello difference between,</span></span>

* <span data-ttu-id="181e9-147">Temel blob ve onun anlık görüntü veya</span><span class="sxs-lookup"><span data-stu-id="181e9-147">Base blob and its Snapshot OR</span></span>
* <span data-ttu-id="181e9-148">Merhaba temel BLOB iki tüm anlık görüntüleri</span><span class="sxs-lookup"><span data-stu-id="181e9-148">Any two snapshots of hello base blob</span></span>

<span data-ttu-id="181e9-149">Aşağıdaki koşullar hello karşılandığından sağlanan</span><span class="sxs-lookup"><span data-stu-id="181e9-149">Provided hello following conditions are met,</span></span>

* <span data-ttu-id="181e9-150">Merhaba blob Oca 1 2016 veya sonraki bir sürümünde oluşturulmuş.</span><span class="sxs-lookup"><span data-stu-id="181e9-150">hello blob was created on Jan-1-2016 or later.</span></span>
* <span data-ttu-id="181e9-151">Merhaba blob ile üzerine [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) veya [kopyalama Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) arasında iki anlık görüntüler.</span><span class="sxs-lookup"><span data-stu-id="181e9-151">hello blob was not overwritten with [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) or [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) between two snapshots.</span></span>

<span data-ttu-id="181e9-152">**Not**: Bu özellik Premium ve standart Azure sayfa BLOB'ları için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="181e9-152">**Note**: This feature is available for Premium and Standard Azure Page Blobs.</span></span>

<span data-ttu-id="181e9-153">Bir depolama hesabı tooanother hello anlık görüntü kopyalama anlık görüntüleri kullanan özel bir yedekleme stratejisi olduğunda çok yavaş olabilir ve çok miktarda depolama alanı kullanır.</span><span class="sxs-lookup"><span data-stu-id="181e9-153">When you have a custom backup strategy that uses snapshots, copying hello snapshots from one storage account tooanother can be very slow and consumes a lot of storage space.</span></span> <span data-ttu-id="181e9-154">Merhaba tüm anlık görüntü tooa yedekleme depolama hesabı kopyalamak yerine art arda gelen anlık görüntüleri tooa yedekleme sayfa blobu hello birbirinden yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="181e9-154">Instead of copying hello entire snapshot tooa backup storage account, you can write hello difference between consecutive snapshots tooa backup page blob.</span></span> <span data-ttu-id="181e9-155">Bu şekilde hello zaman toocopy ve alan toostore yedeklemelerini önemli ölçüde azaltılır.</span><span class="sxs-lookup"><span data-stu-id="181e9-155">This way, hello time toocopy and space toostore backups is substantially reduced.</span></span>

### <a name="implementing-incremental-snapshot-copy"></a><span data-ttu-id="181e9-156">Uygulama artımlı anlık görüntü kopyalama</span><span class="sxs-lookup"><span data-stu-id="181e9-156">Implementing Incremental Snapshot Copy</span></span>
<span data-ttu-id="181e9-157">Merhaba aşağıdakileri yaparak artımlı anlık görüntü kopyalama uygulayabilir,</span><span class="sxs-lookup"><span data-stu-id="181e9-157">You can implement incremental snapshot copy by doing hello following,</span></span>

* <span data-ttu-id="181e9-158">Temel blob hello kullanmanın bir anlık görüntüsünü [anlık görüntü Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx).</span><span class="sxs-lookup"><span data-stu-id="181e9-158">Take a snapshot of hello base blob using [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx).</span></span>
* <span data-ttu-id="181e9-159">Kopya hello anlık görüntü toohello hedef yedekleme depolama hesabı kullanılarak [kopyalama Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span><span class="sxs-lookup"><span data-stu-id="181e9-159">Copy hello snapshot toohello target backup storage account using [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span> <span data-ttu-id="181e9-160">Bu hello yedekleme sayfa blobu olacaktır.</span><span class="sxs-lookup"><span data-stu-id="181e9-160">This will be hello backup page blob.</span></span> <span data-ttu-id="181e9-161">Bu yedekleme sayfa blobu bir anlık görüntüsünü ve yedekleme hesabında depolayın.</span><span class="sxs-lookup"><span data-stu-id="181e9-161">Take a snapshot of this backup page blob and store in backup account.</span></span>
* <span data-ttu-id="181e9-162">Merhaba temel BLOB anlık görüntü Blob kullanarak başka bir anlık görüntü alın.</span><span class="sxs-lookup"><span data-stu-id="181e9-162">Take another snapshot of hello base blob using Snapshot Blob.</span></span>
* <span data-ttu-id="181e9-163">Temel blob kullanmanın ilk ve ikinci anlık görüntüleri Hello birbirinden alma [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx).</span><span class="sxs-lookup"><span data-stu-id="181e9-163">Get hello difference between first and second snapshots of base blob using  [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx).</span></span> <span data-ttu-id="181e9-164">Merhaba yeni parametresini kullanın **prevsnapshot** toospecify hello tooget hello farkı hello anlık görüntüsünü DateTime değeri.</span><span class="sxs-lookup"><span data-stu-id="181e9-164">Use hello new parameter **prevsnapshot** toospecify hello DateTime value of hello snapshot you want tooget hello difference with.</span></span> <span data-ttu-id="181e9-165">Bu parametre mevcut olduğunda hello REST yanıt hedef anlık görüntüsü ile Temizle sayfalar dahil olmak üzere önceki anlık arasında değiştirilen hello sayfalar içerir.</span><span class="sxs-lookup"><span data-stu-id="181e9-165">When this parameter is present, hello REST response will include only hello pages that were changed between target snapshot and previous snapshot including clear pages.</span></span>
* <span data-ttu-id="181e9-166">Kullanım [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) tooapply bu değişiklikleri toohello yedekleme sayfa blobu.</span><span class="sxs-lookup"><span data-stu-id="181e9-166">Use [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) tooapply these changes toohello backup page blob.</span></span>
* <span data-ttu-id="181e9-167">Son olarak, hello yedekleme sayfa blobu bir anlık görüntüsünü ve hello yedekleme depolama hesabında saklayın.</span><span class="sxs-lookup"><span data-stu-id="181e9-167">Finally, take a snapshot of hello backup page blob and store it in hello backup storage account.</span></span>

<span data-ttu-id="181e9-168">Merhaba sonraki bölümde, biz daha ayrıntılı olarak artımlı anlık görüntü kopyalama kullanarak diskleri yedeklerini nasıl koruyabilirsiniz anlatmaktadır</span><span class="sxs-lookup"><span data-stu-id="181e9-168">In hello next section, we will describe in more detail how you can maintain backups of disks using Incremental Snapshot Copy</span></span>

## <a name="scenario"></a><span data-ttu-id="181e9-169">Senaryo</span><span class="sxs-lookup"><span data-stu-id="181e9-169">Scenario</span></span>
<span data-ttu-id="181e9-170">Bu bölümde biz anlık görüntülerini kullanarak sanal makine disklerini için özel bir yedekleme stratejisi içeren bir senaryo açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="181e9-170">In this section we will describe a scenario that involves a custom backup strategy for virtual machine disks using snapshots.</span></span>

<span data-ttu-id="181e9-171">DS serisi Azure VM'ye bağlı premium depolama P30 diskle göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="181e9-171">Consider a DS-series Azure VM with a premium storage P30 disk attached.</span></span> <span data-ttu-id="181e9-172">adlı hello P30 diske *mypremiumdisk* adlı bir premium depolama hesabında depolanan *mypremiumaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-172">hello P30 disk called *mypremiumdisk* is stored in a premium storage account called *mypremiumaccount*.</span></span> <span data-ttu-id="181e9-173">Standart depolama hesabı olarak adlandırılan *mybackupstdaccount* hello yedeğini depolamak için kullanılacak *mypremiumdisk*.</span><span class="sxs-lookup"><span data-stu-id="181e9-173">A standard storage account called *mybackupstdaccount* will be used for storing hello backup of *mypremiumdisk*.</span></span> <span data-ttu-id="181e9-174">Tookeep bir anlık görüntü isteriz, *mypremiumdisk* 12 saatte bir.</span><span class="sxs-lookup"><span data-stu-id="181e9-174">We would like tookeep a snapshot of *mypremiumdisk* every 12 hours.</span></span>

<span data-ttu-id="181e9-175">Depolama hesabı ve diskleri oluşturma hakkında daha fazla toolearn başvurmak çok[Azure storage hesapları hakkında](storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="181e9-175">toolearn about creating storage account and disks, refer too[About Azure storage accounts](storage-create-storage-account.md).</span></span>

<span data-ttu-id="181e9-176">Azure VM'lerin yedeklenmesi hakkında toolearn başvurmak çok[planlama Azure VM yedeklemeleri](../backup/backup-azure-vms-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="181e9-176">toolearn about backing up Azure VMs, refer too[Plan Azure VM backups](../backup/backup-azure-vms-introduction.md).</span></span>

## <a name="steps-toomaintain-backups-of-a-disk-using-incremental-snapshots"></a><span data-ttu-id="181e9-177">Artımlı anlık görüntülerini kullanarak bir disk adımları toomaintain yedekleri</span><span class="sxs-lookup"><span data-stu-id="181e9-177">Steps toomaintain backups of a disk using incremental snapshots</span></span>
<span data-ttu-id="181e9-178">Merhaba aşağıda açıklanan adımları anlık görüntülerini uygulayacaktır *mypremiumdisk* ve hello yedeklemelerin sürdürmek *mybackupstdaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-178">hello steps described below will take snapshots of *mypremiumdisk* and maintain hello backups in *mybackupstdaccount*.</span></span> <span data-ttu-id="181e9-179">Merhaba yedekleme adlı bir standart sayfa blob'u olacaktır *mybackupstdpageblob*.</span><span class="sxs-lookup"><span data-stu-id="181e9-179">hello backup will be a standard page blob called *mybackupstdpageblob*.</span></span> <span data-ttu-id="181e9-180">Merhaba yedekleme sayfa blobu her zaman aynı durum hello son anlık görüntüsü olarak hello yansıtılacaktır *mypremiumdisk*.</span><span class="sxs-lookup"><span data-stu-id="181e9-180">hello backup page blob will always reflect hello same state as hello last snapshot of *mypremiumdisk*.</span></span>

1. <span data-ttu-id="181e9-181">İlk olarak hello yedekleme sayfa blobu, premium depolama diski oluşturun.</span><span class="sxs-lookup"><span data-stu-id="181e9-181">First, create hello backup page blob for your premium storage disk.</span></span> <span data-ttu-id="181e9-182">toodo Bu, Al anlık görüntüsü *mypremiumdisk* adlı *mypremiumdisk_ss1*.</span><span class="sxs-lookup"><span data-stu-id="181e9-182">toodo this, take a snapshot of *mypremiumdisk* called *mypremiumdisk_ss1*.</span></span>
2. <span data-ttu-id="181e9-183">Bu anlık görüntü toomybackupstdaccount adlı bir sayfa blob'u olarak kopyalamak *mybackupstdpageblob*.</span><span class="sxs-lookup"><span data-stu-id="181e9-183">Copy this snapshot toomybackupstdaccount as a page blob called *mybackupstdpageblob*.</span></span>
3. <span data-ttu-id="181e9-184">Bir anlık görüntüsünü *mybackupstdpageblob* adlı *mybackupstdpageblob_ss1*kullanarak [anlık görüntü Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) içinde depolamak ve *mybackupstdaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-184">Take a snapshot of *mybackupstdpageblob* called *mybackupstdpageblob_ss1*, using [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) and store it in *mybackupstdaccount*.</span></span>
4. <span data-ttu-id="181e9-185">Merhaba Yedekleme penceresi sırasında başka bir anlık görüntüsünü oluşturmak *mypremiumdisk*, deyin *mypremiumdisk_ss2*, içinde depolamak ve *mypremiumaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-185">During hello backup window, create another snapshot of *mypremiumdisk*, say *mypremiumdisk_ss2*, and store it in *mypremiumaccount*.</span></span>
5. <span data-ttu-id="181e9-186">Merhaba artımlı değişiklikler hello iki anlık görüntüler arasında almak *mypremiumdisk_ss2* ve *mypremiumdisk_ss1*kullanarak [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) üzerinde  *mypremiumdisk_ss2* ile **prevsnapshot** parametre toohello zaman damgasını *mypremiumdisk_ss1*.</span><span class="sxs-lookup"><span data-stu-id="181e9-186">Get hello incremental changes between hello two snapshots, *mypremiumdisk_ss2* and *mypremiumdisk_ss1*, using [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) on *mypremiumdisk_ss2* with **prevsnapshot** parameter set toohello timestamp of *mypremiumdisk_ss1*.</span></span> <span data-ttu-id="181e9-187">Bu artımlı değişiklikler toohello yedekleme sayfa blobu yazma *mybackupstdpageblob* içinde *mybackupstdaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-187">Write these incremental changes toohello backup page blob *mybackupstdpageblob* in *mybackupstdaccount*.</span></span> <span data-ttu-id="181e9-188">Merhaba artımlı değişiklikler silinen aralık varsa hello yedekleme sayfa blobundan temizlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="181e9-188">If there are deleted ranges in hello incremental changes, they must be cleared from hello backup page blob.</span></span> <span data-ttu-id="181e9-189">Kullanım [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) toowrite artımlı değişiklikler toohello yedekleme sayfa blobu.</span><span class="sxs-lookup"><span data-stu-id="181e9-189">Use [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) toowrite incremental changes toohello backup page blob.</span></span>
6. <span data-ttu-id="181e9-190">Merhaba yedekleme sayfa blobu bir anlık görüntüsünü *mybackupstdpageblob*adlı *mybackupstdpageblob_ss2*.</span><span class="sxs-lookup"><span data-stu-id="181e9-190">Take a snapshot of hello backup page blob *mybackupstdpageblob*, called *mybackupstdpageblob_ss2*.</span></span> <span data-ttu-id="181e9-191">Merhaba önceki anlık görüntüyü silmek *mypremiumdisk_ss1* premium depolama hesabından.</span><span class="sxs-lookup"><span data-stu-id="181e9-191">Delete hello previous snapshot *mypremiumdisk_ss1* from premium storage account.</span></span>
7. <span data-ttu-id="181e9-192">Her yedekleme penceresi 4-6 adımlarını yineleyin.</span><span class="sxs-lookup"><span data-stu-id="181e9-192">Repeat steps 4-6 every backup window.</span></span> <span data-ttu-id="181e9-193">Bu şekilde, yedeklerini bulundurabilirsiniz *mypremiumdisk* bir standart depolama hesabı.</span><span class="sxs-lookup"><span data-stu-id="181e9-193">In this way, you can maintain backups of *mypremiumdisk* in a standard storage account.</span></span>

![Artımlı anlık görüntülerini kullanarak diski yedeklemeniz](./media/storage-incremental-snapshots/storage-incremental-snapshots-1.png)

## <a name="steps-toorestore-a-disk-from-snapshots"></a><span data-ttu-id="181e9-195">Adımları toorestore bir diskten anlık görüntüler</span><span class="sxs-lookup"><span data-stu-id="181e9-195">Steps toorestore a disk from snapshots</span></span>
<span data-ttu-id="181e9-196">Merhaba aşağıda açıklanan adımları premium disk geri *mypremiumdisk* önceki hello yedekleme depolama hesabından anlık görüntü tooan *mybackupstdaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-196">hello steps described below will restore premium disk, *mypremiumdisk* tooan earlier snapshot from hello backup storage account *mybackupstdaccount*.</span></span>

1. <span data-ttu-id="181e9-197">Toorestore hello premium disk için istediğiniz zaman Hello noktası belirleyin.</span><span class="sxs-lookup"><span data-stu-id="181e9-197">Identify hello point in time you wish toorestore hello premium disk to.</span></span> <span data-ttu-id="181e9-198">Anlık görüntü düşünelim *mybackupstdpageblob_ss2*, hello yedekleme depolama hesabında depolanan *mybackupstdaccount*.</span><span class="sxs-lookup"><span data-stu-id="181e9-198">Let's say that is snapshot *mybackupstdpageblob_ss2*, which is stored in hello backup storage account *mybackupstdaccount*.</span></span>
2. <span data-ttu-id="181e9-199">Merhaba anlık görüntü mybackupstdaccount içinde Yükselt *mybackupstdpageblob_ss2* hello yeni yedekleme temel sayfa blobu olarak *mybackupstdpageblobrestored*.</span><span class="sxs-lookup"><span data-stu-id="181e9-199">In mybackupstdaccount, promote hello snapshot *mybackupstdpageblob_ss2* as hello new backup base page blob *mybackupstdpageblobrestored*.</span></span>
3. <span data-ttu-id="181e9-200">Adlı bu geri yüklenen yedekleme sayfa blobu bir anlık görüntüsünü *mybackupstdpageblobrestored_ss1*.</span><span class="sxs-lookup"><span data-stu-id="181e9-200">Take a snapshot of this restored backup page blob, called *mybackupstdpageblobrestored_ss1*.</span></span>
4. <span data-ttu-id="181e9-201">Kopya geri hello sayfa blobu *mybackupstdpageblobrestored* gelen *mybackupstdaccount* çok*mypremiumaccount* hello yeni premium disk olarak  *mypremiumdiskrestored*.</span><span class="sxs-lookup"><span data-stu-id="181e9-201">Copy hello restored page blob *mybackupstdpageblobrestored* from *mybackupstdaccount* too*mypremiumaccount* as hello new premium disk *mypremiumdiskrestored*.</span></span>
5. <span data-ttu-id="181e9-202">Bir anlık görüntüsünü *mypremiumdiskrestored*adlı *mypremiumdiskrestored_ss1* gelecekteki artımlı yedekleme yapmak için.</span><span class="sxs-lookup"><span data-stu-id="181e9-202">Take a snapshot of *mypremiumdiskrestored*, called *mypremiumdiskrestored_ss1* for making future incremental backups.</span></span>
6. <span data-ttu-id="181e9-203">Noktası hello DS serisi VM geri toohello disk *mypremiumdiskrestored* ve hello eski ayırma *mypremiumdisk* hello VM gelen.</span><span class="sxs-lookup"><span data-stu-id="181e9-203">Point hello DS series VM toohello restored disk *mypremiumdiskrestored* and detach hello old *mypremiumdisk* from hello VM.</span></span>
7. <span data-ttu-id="181e9-204">Geri hello disk için önceki bölümde açıklanan hello yedekleme işlemine başlamak *mypremiumdiskrestored*, hello kullanarak *mybackupstdpageblobrestored* hello yedekleme sayfa blobu olarak.</span><span class="sxs-lookup"><span data-stu-id="181e9-204">Begin hello Backup process described in previous section for hello restored disk *mypremiumdiskrestored*, using hello *mybackupstdpageblobrestored* as hello backup page blob.</span></span>

![Disk anlık görüntülerden geri yükleme](./media/storage-incremental-snapshots/storage-incremental-snapshots-2.png)

## <a name="next-steps"></a><span data-ttu-id="181e9-206">Sonraki Adımlar</span><span class="sxs-lookup"><span data-stu-id="181e9-206">Next Steps</span></span>
<span data-ttu-id="181e9-207">Bir blob anlık görüntülerini oluşturma ve aşağıdaki hello bağlantıları kullanarak VM yedekleme altyapınızı planlama hakkında daha fazla bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="181e9-207">Learn more about creating snapshots of a blob and planning your VM backup infrastructure using hello links below.</span></span>

* [<span data-ttu-id="181e9-208">Bir BLOB bir anlık görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="181e9-208">Creating a Snapshot of a Blob</span></span>](https://msdn.microsoft.com/library/azure/hh488361.aspx)
* [<span data-ttu-id="181e9-209">VM yedekleme altyapınızı planlama</span><span class="sxs-lookup"><span data-stu-id="181e9-209">Plan your VM Backup Infrastructure</span></span>](../backup/backup-azure-vms-introduction.md)

