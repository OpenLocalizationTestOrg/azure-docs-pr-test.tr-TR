---
title: "Azure Iaas diskler için yedekleme ve olağanüstü durum kurtarma | Microsoft Docs"
description: "Bu makalede, biz yedekleme ve olağanüstü durum kurtarma (DR) Iaas sanal makineleri (VM'ler) için planlama açıklanacaktır ve Azure diskleri. Bu belge hem yönetilen hem de yönetilmeyen diskler kapsar"
services: storage
cloud: Azure
documentationcenter: na
author: luywang
manager: kavithag
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/19/2017
ms.author: luywang
ms.openlocfilehash: 03d38bc3383b5fd39eca5ca67c315b34b98f0c39
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="backup-and-disaster-recovery-for-azure-iaas-disks"></a><span data-ttu-id="4e699-104">Azure Iaas diskler için yedekleme ve olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="4e699-104">Backup and disaster recovery for Azure IaaS disks</span></span>

<span data-ttu-id="4e699-105">Bu makalede, biz yedekleme ve olağanüstü durum kurtarma (DR) Iaas sanal makineleri (VM'ler) için planlama açıklanacaktır ve Azure diskleri.</span><span class="sxs-lookup"><span data-stu-id="4e699-105">In this article, we will explain how to plan for Backup and Disaster Recovery (DR) of IaaS virtual machines (VMs) and Disks in Azure.</span></span> <span data-ttu-id="4e699-106">Bu belge, yönetilen ve yönetilmeyen diskleri kapsar.</span><span class="sxs-lookup"><span data-stu-id="4e699-106">This document covers both Managed and Unmanaged Disks.</span></span>

<span data-ttu-id="4e699-107">Biz öncelikle yerel arızaya karşı koruma sağlamak yardımcı olan yerleşik hata toleransı özellikleri hakkında Azure platformu konuşun.</span><span class="sxs-lookup"><span data-stu-id="4e699-107">We’ll first talk about the built-in fault tolerance capabilities in the Azure platform which help guard against local failures.</span></span> <span data-ttu-id="4e699-108">Biz sonra tam olarak yerleşik özellikleri tarafından kapsanan olağanüstü durum senaryolar bu belge tarafından gönderilen ana konu olduğu ele alacağız.</span><span class="sxs-lookup"><span data-stu-id="4e699-108">We’ll then discuss the disaster scenarios not fully covered by the built-in capabilities, which is the main topic addressed by this document.</span></span> <span data-ttu-id="4e699-109">Burada farklı yedekleme ve kurtarma konuları uygulayabilir iş yükü senaryoları bazı örnekleri de göstereceğiz.</span><span class="sxs-lookup"><span data-stu-id="4e699-109">We’ll also show several examples of workload scenarios where different Backup and DR considerations may apply.</span></span> <span data-ttu-id="4e699-110">Biz ardından olası çözümler için Iaas disklerini DR gözden geçirin.</span><span class="sxs-lookup"><span data-stu-id="4e699-110">We’ll then review possible solutions for DR of IaaS Disks.</span></span> 

## <a name="introduction"></a><span data-ttu-id="4e699-111">Giriş</span><span class="sxs-lookup"><span data-stu-id="4e699-111">Introduction</span></span>

<span data-ttu-id="4e699-112">Azure platformu yedeklik ve hataya dayanıklılık için çeşitli yöntemler oluşabilir yerelleştirilmiş donanım hatalarından müşterilerin korunmasına yardımcı olmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="4e699-112">The Azure platform uses various methods for redundancy and fault tolerance to help protect customers from localized hardware failures that can occur.</span></span> <span data-ttu-id="4e699-113">Bu sunucu üzerinde bir sanal disk için verilerin bir kısmını ya da bir SSD veya HDD hatalarının depolayan bir Azure depolama sunucu makinesindeki sorunlar yerel hataları içerebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-113">Local failures may include problems with an Azure storage server machine that stores part of the data for a virtual disk or failures of an SSD or HDD on that server.</span></span> <span data-ttu-id="4e699-114">Bu tür yalıtılmış donanım bileşeni arızalarına normal işlemler sırasında oluşabilir ve platform bu hatalarına dayanıklı olacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="4e699-114">Such isolated hardware component failures can happen during normal operations and the platform is designed to be resilient to these failures.</span></span> <span data-ttu-id="4e699-115">Ana afetler hataları veya depolama sunucuları veya tam bir veri merkezinde çok sayıda inaccessibility neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-115">Major disasters can result in failures or inaccessibility of a large numbers of storage servers or a whole datacenter.</span></span> <span data-ttu-id="4e699-116">VM'ler ve diskleri yerelleştirilmiş hatalarından normalde korunur, ancak İş yükünüzün VM ve diskleri etkileyebilecek bölge çapında geri dönülemez arızasına karşı (örneğin, büyük bir felaket) korumak ek adımlar gereklidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-116">While your VMs and disks are normally protected from localized failures, additional steps are necessary to protect your workload from region-wide catastrophic failures (such as a major disaster) that can affect your VM and disks.</span></span>

<span data-ttu-id="4e699-117">Platform hataları olasılığını ek olarak, müşteri uygulaması veya veri sorunlar oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-117">In addition to the possibility of platform failures, problems with the customer application or data can occur.</span></span> <span data-ttu-id="4e699-118">Örneğin, uygulamanızın yeni bir sürümünü yanlışlıkla verileri değiştirme sonu kalmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-118">For example, a new version of your application may inadvertently make a breaking change to the data.</span></span> <span data-ttu-id="4e699-119">Bu durumda, uygulama ve veri bilinen son iyi duruma içeren bir önceki sürüme geri isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-119">In that case, you may want to revert the application and the data to a prior version containing the last known good state.</span></span> <span data-ttu-id="4e699-120">Bu, düzenli yedeklemeler koruma gerektirir.</span><span class="sxs-lookup"><span data-stu-id="4e699-120">This requires maintaining regular backups.</span></span>

<span data-ttu-id="4e699-121">Bölgesel olağanüstü durum kurtarma için farklı bir bölgeye, Iaas VM diskleri yedekleme gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-121">For regional disaster recovery, you must backup your IaaS VM disks to a different region.</span></span> 

<span data-ttu-id="4e699-122">Şimdi biz yedekleme ve kurtarma seçeneklerini Ara önce yerelleştirilmiş hata işleme için birkaç yöntem kullanılabilir olduðunu.</span><span class="sxs-lookup"><span data-stu-id="4e699-122">Before we look at Backup and DR options, let’s recap a few methods available for handling localized failures.</span></span>

### <a name="azure-iaas-resiliency"></a><span data-ttu-id="4e699-123">Azure Iaas dayanıklılık</span><span class="sxs-lookup"><span data-stu-id="4e699-123">Azure IaaS Resiliency</span></span>

<span data-ttu-id="4e699-124">*Dayanıklılık* donanım bileşenleri ortaya normal hata toleransı başvuruyor.</span><span class="sxs-lookup"><span data-stu-id="4e699-124">*Resiliency* refers to the tolerance for normal failures that occur in hardware components.</span></span> <span data-ttu-id="4e699-125">Dayanıklılık, arızalardan kurtarmak ve çalışmaya devam yeteneğidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-125">Resiliency is the ability to recover from failures and continue to function.</span></span> <span data-ttu-id="4e699-126">Hataları önleme, ancak hataları kapalı kalma süresi veya veri kaybı önler şekilde yanıt verme hakkında değil.</span><span class="sxs-lookup"><span data-stu-id="4e699-126">It's not about avoiding failures, but responding to failures in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="4e699-127">Uygulamaya bir hatasının ardından tam çalışır bir duruma geri dönmek için dayanıklılık belirtilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-127">The goal of resiliency is to return the application to a fully functioning state following a failure.</span></span> <span data-ttu-id="4e699-128">Azure sanal makineleri ve diskleri için genel donanım hataları dayanıklı olacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="4e699-128">Azure Virtual Machines and Disks are designed to be resilient to common hardware faults.</span></span> <span data-ttu-id="4e699-129">Bize Azure Iaas platform bu dayanıklılık nasıl sağladığını adresindeki arayın.</span><span class="sxs-lookup"><span data-stu-id="4e699-129">Let us look at how the Azure IaaS platform provides this resiliency.</span></span>

<span data-ttu-id="4e699-130">Bir sanal makine çoğunlukla iki bölümden oluşur: (1) bir işlem sunucusu ve (2 kalıcı diskler.</span><span class="sxs-lookup"><span data-stu-id="4e699-130">A virtual machine consists mainly of two parts: (1) A compute server, and (2) the persistent disks.</span></span> <span data-ttu-id="4e699-131">Her ikisi de bir sanal makinenin hata toleransı etkiler.</span><span class="sxs-lookup"><span data-stu-id="4e699-131">Both affect the fault tolerance of a virtual machine.</span></span>

<span data-ttu-id="4e699-132">VM barındırıldığı Azure işlem ana bilgisayar sunucusu (Bu nadir) bir donanım hatası yaşarsa, Azure otomatik olarak VM başka bir sunucuya geri yüklemek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="4e699-132">If the Azure compute host server that houses your VM experiences a hardware failure (which is rare), Azure is designed to automatically restore the VM on another server.</span></span> <span data-ttu-id="4e699-133">Bu durumda, yeniden başlatma yaşar ve VM yedekleme bir süre sonra olacaktır.</span><span class="sxs-lookup"><span data-stu-id="4e699-133">If this happens, you will experience a reboot, and the VM will be back up after some time.</span></span> <span data-ttu-id="4e699-134">Azure otomatik olarak bu tür donanım hataları algılar ve VM müşteri olabildiğince çabuk kullanılabilir olacak sağlamaya yardımcı olmak için kurtarma yürütür.</span><span class="sxs-lookup"><span data-stu-id="4e699-134">Azure automatically detects such hardware failures and executes recoveries to help ensure the customer VM will be available as soon as possible.</span></span>

<span data-ttu-id="4e699-135">Iaas disklerini ilgili veri dayanıklılığı kalıcı depolama platform için kritik öneme sahiptir.</span><span class="sxs-lookup"><span data-stu-id="4e699-135">Regarding IaaS disks, durability of data is critical for the persistent storage platform.</span></span> <span data-ttu-id="4e699-136">Azure müşterilerin önemli iş uygulamaları Iaas'da çalışan sahip ve veri kalıcılığı üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-136">Azure customers have important business applications running on IaaS and they depend on the persistence of the data.</span></span> <span data-ttu-id="4e699-137">Bu üç yedek kopyaları Iaas diskleri için Azure tasarımları koruma yerel olarak depolanan verilerin yerel hatalarına karşı yüksek dayanıklılık sağlama.</span><span class="sxs-lookup"><span data-stu-id="4e699-137">Azure designs protection for these IaaS disks with three redundant copies of data stored locally, providing high durability against local failures.</span></span> <span data-ttu-id="4e699-138">Diskinizin tutan donanım bileşenleri biri başarısız olursa, disk isteklerini desteklemek için iki ek kopyalarını olduğundan, VM etkilenmez.</span><span class="sxs-lookup"><span data-stu-id="4e699-138">If one of the hardware components that holds your disk fails, your VM is not impacted because there are two additional copies to support disk requests.</span></span> <span data-ttu-id="4e699-139">Bir disk destekleyen iki farklı donanım bileşenleri (hangi çok nadir olur) aynı anda başarısız olsa bile düzgün çalışır.</span><span class="sxs-lookup"><span data-stu-id="4e699-139">It works fine even if two different hardware components supporting a disk fail at the same time (which would be very rare).</span></span> <span data-ttu-id="4e699-140">Üç kopyaları biri kullanılamaz hale gelirse biz her zaman üç çoğaltmaları bakımını sağlamak üzere Azure Storage hizmeti otomatik olarak arka planda verileri yeni bir kopyasını olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-140">To help ensure we always maintain three replicas, the Azure Storage service automatically spawns a new copy of data in the background if one of the three copies becomes unavailable.</span></span> <span data-ttu-id="4e699-141">Bu nedenle, bu hataya dayanıklılık için Azure disklerle RAID kullanmak için gerekli olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-141">Therefore, it should not be necessary to use RAID with Azure disks for fault tolerance.</span></span> <span data-ttu-id="4e699-142">Basit bir RAID 0 yapılandırma diskleri bölmek için gerekirse daha büyük birimleri oluşturmak yeterli olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-142">A simple RAID 0 configuration should be sufficient for striping the disks if necessary to create larger volumes.</span></span>

<span data-ttu-id="4e699-143">Bu mimari nedeniyle **Azure Kurumsal düzeyde tutarlı bir şekilde teslim Iaas için dayanıklılık diskleri, bir endüstri lideri ile sıfır % [değer yıllık hata oranı](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span><span class="sxs-lookup"><span data-stu-id="4e699-143">Because of this architecture, **Azure has consistently delivered enterprise-grade durability for IaaS disks, with an industry-leading ZERO % [Annualized Failure Rate](https://en.wikipedia.org/wiki/Annualized_failure_rate).**</span></span>

<span data-ttu-id="4e699-144">Yerelleştirilmiş donanım hataları işlem üzerinde barındıran veya depolama platform tarafından ele VM için geçici olarak kullanım dışı kalması sonucunda bazen olabilir. [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) VM kullanılabilirlik.</span><span class="sxs-lookup"><span data-stu-id="4e699-144">Localized hardware faults on the compute host or in the storage platform can sometimes result in temporary unavailability for the VM which is covered by the [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) for VM Availability.</span></span> <span data-ttu-id="4e699-145">Azure, endüstri lideri SLA Premium depolama diski kullanan tek VM örnekleri için de sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-145">Azure also provides an industry-leading SLA for single VM instances that use Premium Storage disks.</span></span>

<span data-ttu-id="4e699-146">Bir disk veya VM geçici kullanılamama nedeniyle kapalı kalma süresini uygulama iş yüklerini korumak için müşteriler yararlanabilirsiniz [kullanılabilirlik kümeleri](../../virtual-machines/windows/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-146">To safeguard application workloads from downtime due to the temporary unavailability of a disk or VM, customers can leverage [Availability Sets](../../virtual-machines/windows/manage-availability.md).</span></span> <span data-ttu-id="4e699-147">Bir kullanılabilirlik kümesinde iki veya daha fazla sanal makine uygulama için artıklık sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-147">Two or more virtual machines in an availability set provides redundancy for the application.</span></span> <span data-ttu-id="4e699-148">Azure daha sonra bu sanal makineleri ve diskleri ayrı hata etki alanlarında farklı güç, ağ ve sunucu bileşenleri ile oluşturur.</span><span class="sxs-lookup"><span data-stu-id="4e699-148">Azure then creates these VMs and disks in separate fault domains with different power, network, and server components.</span></span> <span data-ttu-id="4e699-149">Bu nedenle, yerelleştirilmiş donanım hataları genellikle kümedeki birden çok VM aynı anda uygulamanız için yüksek düzeyde kullanılabilirlik sağladığınızdan etkilemez.</span><span class="sxs-lookup"><span data-stu-id="4e699-149">Thus, localized hardware failures typically do not affect multiple VMs in the set at the same time, providing high availability for your application.</span></span> <span data-ttu-id="4e699-150">Yüksek kullanılabilirlik gerekli olduğunda kullanılabilirlik kümeleri kullanmak iyi bir uygulama olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-150">It is considered a good practice to use availability sets when high availability is required.</span></span> <span data-ttu-id="4e699-151">Daha fazla bilgi için aşağıdaki ayrıntılı olağanüstü durum kurtarma yönlerini bakın.</span><span class="sxs-lookup"><span data-stu-id="4e699-151">For more information, see the Disaster Recovery aspects detailed below.</span></span>

### <a name="backup-and-disaster-recovery"></a><span data-ttu-id="4e699-152">Yedekleme ve olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="4e699-152">Backup and Disaster Recovery</span></span>

<span data-ttu-id="4e699-153">Olağanüstü Durum Kurtarma (DR) olan kaynaklı nadir ancak büyük olayların kurtarabilirsiniz: tüm bölgeyi etkiler hizmet kesintisi gibi geçici olmayan, geniş ölçekli hataları.</span><span class="sxs-lookup"><span data-stu-id="4e699-153">Disaster recovery (DR) is the ability to recover from rare but major incidents: non-transient, wide-scale failures, such as service disruption that affects an entire region.</span></span> <span data-ttu-id="4e699-154">Olağanüstü durum kurtarma, veri yedekleme ve arşivleme içerir ve bir veritabanını yedekten geri yükleme gibi el ile müdahale içerebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-154">Disaster recovery includes data backup and archiving, and may include manual intervention, such as restoring a database from backup.</span></span>

<span data-ttu-id="4e699-155">Yerelleştirilmiş hata karşı yerleşik koruma Azure platformun VM'ler/diskleri büyük ölçekli kesintileri neden önemli afetler durumunda tam koruma.</span><span class="sxs-lookup"><span data-stu-id="4e699-155">The Azure platform’s built-in protection against localized failures may not fully protect the VMs/disks in the case of major disasters which can cause large-scale outages.</span></span> <span data-ttu-id="4e699-156">Bu bir hortum, deprem, yangın veya büyük ölçekli donanım birim hataları tarafından ziyaret bir veri merkezi gibi geri dönülemez olaylarını içerir.</span><span class="sxs-lookup"><span data-stu-id="4e699-156">This includes catastrophic events such as a data center being hit by a hurricane, earthquake, fire, or large scale hardware unit failures.</span></span> <span data-ttu-id="4e699-157">Ayrıca, uygulama veya veri sorunları nedeniyle hataları karşılaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-157">In addition, you may encounter failures due to application or data issues.</span></span>

<span data-ttu-id="4e699-158">Iaas iş yüklerinizi kesintilere karşı korunmasına yardımcı olmak için artıklık ve kurtarmayı etkinleştirmek için yedeklemeler için planlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-158">To help protect your IaaS workloads from outages, you should plan for redundancy and backups to enable recovery.</span></span> <span data-ttu-id="4e699-159">Olağanüstü durum kurtarma için artıklık ve yedekleme birincil sitesinden farklı bir coğrafi konumda planlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-159">For disaster recovery, you should plan redundancy and backup in a different geographic location away from the primary site.</span></span> <span data-ttu-id="4e699-160">Bu, yedekleme ilk olarak VM veya disklerin etkilenen aynı olayı tarafından etkilenmez sağlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="4e699-160">This helps ensure your backup is not affected by the same event that originally impacted the VM or disks.</span></span> <span data-ttu-id="4e699-161">Daha fazla bilgi için bkz: [olağanüstü durum kurtarma uygulamaları için Azure üzerinde oluşturulmuş](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span><span class="sxs-lookup"><span data-stu-id="4e699-161">For more information, see [Disaster Recovery for Applications built on Azure](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications).</span></span>

<span data-ttu-id="4e699-162">DR konularınızdan aşağıdaki açıları içerebilir:</span><span class="sxs-lookup"><span data-stu-id="4e699-162">Your DR considerations may include the following aspects:</span></span>

1. <span data-ttu-id="4e699-163">Yüksek kullanılabilirlik (HA) önemli bir kapalı kalma süresi olmadan sağlıklı bir durumda çalışmaya devam etmesini uygulama özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-163">High Availability (HA) is the ability of the application to continue running in a healthy state, without significant downtime.</span></span> <span data-ttu-id="4e699-164">"Sağlıklı durumuna göre" biz esnek bir uygulamasıdır ve kullanıcıların uygulamaya bağlanmak ve onlarla etkileşime anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="4e699-164">By "healthy state," we mean the application is responsive, and users can connect to the application and interact with it.</span></span> <span data-ttu-id="4e699-165">Belirli görev açısından kritik uygulamalar ve veritabanları bile platform hatası olduğunda her zaman kullanılabilir olması için gerekli olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-165">Certain mission-critical applications and databases may be required to be available always, even when there are failures in the platform.</span></span> <span data-ttu-id="4e699-166">Bu iş yükleri için artıklık verilerin yanı sıra uygulama için planlama gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-166">For these workloads, you may need to plan redundancy for the application as well as the data.</span></span>

2. <span data-ttu-id="4e699-167">Veri dayanıklılığı: Bazı durumlarda, olağanüstü durum oluşması durumunda verilerin korunduğundan ana göz önünde bulundurarak emin olmaktır.</span><span class="sxs-lookup"><span data-stu-id="4e699-167">Data Durability: In some cases, the main consideration is ensuring the data is preserved in the case of a disaster.</span></span> <span data-ttu-id="4e699-168">Bu nedenle, bir yedekleme verilerinizin farklı bir sitede gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-168">Therefore, you may need a backup of your data in a different site.</span></span> <span data-ttu-id="4e699-169">Bu tür iş yükleri için tam yedekleme uygulama ancak disklerin normal yedekleme için gerekmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-169">For such workloads, you may not need full redundancy for the application, but a regular backup of the disks.</span></span>

## <a name="backup-and-dr-scenarios"></a><span data-ttu-id="4e699-170">Yedekleme ve kurtarma senaryoları</span><span class="sxs-lookup"><span data-stu-id="4e699-170">Backup and DR Scenarios</span></span>

<span data-ttu-id="4e699-171">Uygulama iş yükü senaryoları için ve olağanüstü durum kurtarma planlama konuları, bazı tipik örnekler bakalım.</span><span class="sxs-lookup"><span data-stu-id="4e699-171">Let’s look at a few typical examples of application workload scenarios and the considerations for planning Disaster Recovery.</span></span>

### <a name="scenario-1-major-database-solutions"></a><span data-ttu-id="4e699-172">Senaryo 1: Birincil veritabanı çözümleri</span><span class="sxs-lookup"><span data-stu-id="4e699-172">Scenario 1: Major Database Solutions</span></span>

<span data-ttu-id="4e699-173">Bir üretim veritabanı sunucusuna SQL Server veya yüksek kullanılabilirlik destekleyebilir Oracle gibi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="4e699-173">Consider a production database server like SQL Server or Oracle that can support High Availability.</span></span> <span data-ttu-id="4e699-174">Kritik üretim uygulamaların ve kullanıcıların bu veritabanında bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-174">Critical production applications and users depend on this database.</span></span> <span data-ttu-id="4e699-175">Bu sistem için olağanüstü durum kurtarma planı aşağıdaki gereksinimleri desteklemesi gerekebilir:</span><span class="sxs-lookup"><span data-stu-id="4e699-175">The Disaster Recovery plan for this system may need to support the following requirements:</span></span>

1. <span data-ttu-id="4e699-176">Verilerin korunan ve kurtarılabilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-176">Data must be protected and recoverable.</span></span>
2.  <span data-ttu-id="4e699-177">Sunucusunun kullanılabilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-177">Server must be available for use.</span></span>

<span data-ttu-id="4e699-178">Bu, yedek olarak farklı bir bölgede veritabanının bir kopyasını koruyarak gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-178">This may require maintaining a replica of the database in a different region as a backup.</span></span> <span data-ttu-id="4e699-179">Sunucu kullanılabilirliği ve veri kurtarma gereksinimlerine bağlı olarak, çözümü etkin-etkin veya etkin-Pasif bir kopya sitesinden veri düzenli çevrimdışı yedeklemeler için çeşitli işlemleri ifade edebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-179">Depending on the requirements for server availability and data recovery, the solution could range from an Active-Active or Active-Passive replica site to periodic offline backups of the data.</span></span> <span data-ttu-id="4e699-180">SQL Server ve Oracle gibi ilişkisel veritabanları çoğaltma için çeşitli seçenekler sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-180">Relational databases such as SQL Server and Oracle provide various options for replication.</span></span> <span data-ttu-id="4e699-181">SQL Server için [SQL Server Always On kullanılabilirlik grupları](https://msdn.microsoft.com/library/hh510230.aspx) yüksek kullanılabilirlik için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-181">For SQL Server, [SQL Server Always On Availability Groups](https://msdn.microsoft.com/library/hh510230.aspx) can be used for high availability.</span></span>

<span data-ttu-id="4e699-182">MongoDB gibi NoSQL veritabanlarını da destek [çoğaltmaları](https://docs.mongodb.com/manual/replication/) artıklık için.</span><span class="sxs-lookup"><span data-stu-id="4e699-182">NoSQL databases like MongoDB also support [replicas](https://docs.mongodb.com/manual/replication/) for redundancy.</span></span> <span data-ttu-id="4e699-183">Yüksek kullanılabilirlik çoğaltmaları kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-183">The replicas for high availability can be used.</span></span>

### <a name="scenario-2-a-cluster-of-redundant-vms"></a><span data-ttu-id="4e699-184">Senaryo 2: Küme yedek VM'ler</span><span class="sxs-lookup"><span data-stu-id="4e699-184">Scenario 2: A cluster of redundant VMs</span></span>

<span data-ttu-id="4e699-185">Artıklık sağlamak ve Yük Dengeleme sanal makineleri bir küme tarafından işlenen bir iş yükü göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="4e699-185">Consider a workload handled by a cluster of VMs that provide redundancy and load balancing.</span></span> <span data-ttu-id="4e699-186">Bir örnek bir bölgeye dağıtılmış bir Cassandra kümesi olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-186">One example would be a Cassandra cluster deployed in a region.</span></span> <span data-ttu-id="4e699-187">Bu tür bir mimari zaten bu bölgedeki artıklık yüksek düzeyde sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-187">This type of architecture already provides a high level of redundancy within that region.</span></span> <span data-ttu-id="4e699-188">Ancak, iş yükü bölgesel bir düzey arızasına karşı korumak için küme iki bölgeler arasında yayılmak veya başka bir bölgeye düzenli yedeklemeler yapma düşünmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-188">However, to protect the workload from a regional level failure, you should consider spreading the cluster across two regions or making periodic backups to another region.</span></span>

### <a name="scenario-3-iaas-application-workload"></a><span data-ttu-id="4e699-189">Senaryo 3: Iaas uygulama iş yükü</span><span class="sxs-lookup"><span data-stu-id="4e699-189">Scenario 3: IaaS Application Workload</span></span>

<span data-ttu-id="4e699-190">Bu, bir Azure VM üzerinde çalışan bir tipik bir üretim iş yükünü olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-190">This could be a typical production workload running on an Azure VM.</span></span> <span data-ttu-id="4e699-191">Örneğin, bir web sunucusu veya dosya sunucusu içeriği ve diğer kaynakları bir sitenin bulunduran olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-191">For example, it could be a web server or file server holding the content and other resources of a site.</span></span> <span data-ttu-id="4e699-192">Ayrıca, verileri, kaynaklar ve uygulama durumunu VM disklerinde depolanan bir VM üzerinde çalışan bir özel olarak geliştirilmiş iş uygulaması de olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-192">It could also be a custom-built business application running on a VM that stored its data, resources, and application state on the VM disks.</span></span> <span data-ttu-id="4e699-193">Bu durumda, düzenli aralıklarla yedekleri alması emin olmak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-193">In this case, it is important to make sure you take backups on a regular basis.</span></span> <span data-ttu-id="4e699-194">Yedekleme sıklığı VM iş yükü doğasına bağlı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-194">Backup frequency should be based on the nature of the VM workload.</span></span> <span data-ttu-id="4e699-195">Örneğin, uygulama her gün çalışır ve veri değiştirir, yedekleme saatte gerçekleştirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-195">For example, if the application runs every day and modifies data, then the backup should be taken every hour.</span></span>

<span data-ttu-id="4e699-196">Başka bir örnek diğer kaynaklardan veri çekmek raporlama sunucusudur ve birleşik raporları oluşturur.</span><span class="sxs-lookup"><span data-stu-id="4e699-196">Another example is a reporting server that pull data from other sources and generates aggregated reports.</span></span> <span data-ttu-id="4e699-197">Bu VM veya diskleri kaybı raporları kaybına neden.</span><span class="sxs-lookup"><span data-stu-id="4e699-197">Loss of this VM or disks will lead to the loss of the reports.</span></span> <span data-ttu-id="4e699-198">Ancak, raporlama işlemi yeniden çalıştırın ve çıktıyı yeniden oluşturmak mümkün olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-198">However, it may be possible to rerun the reporting process and regenerate the output.</span></span> <span data-ttu-id="4e699-199">Bu durumda, Raporlama sunucusunda veri parçası kaybetme dayanıklılık daha yüksek düzeyde olabilir şekilde Raporlama sunucusu olağanüstü durum ile bile ulaşılırsa veri kaybı gerçekten yok.</span><span class="sxs-lookup"><span data-stu-id="4e699-199">In that case, you don’t really have a loss of data even if the reporting server is hit with a disaster, so you could have a higher level of tolerance for losing part of the data on the reporting server.</span></span> <span data-ttu-id="4e699-200">Bu durumda, daha az sık gerçekleştirilen yedeklemeler, maliyetini azaltmak için bir seçenek değil.</span><span class="sxs-lookup"><span data-stu-id="4e699-200">In that case, less frequent backups is an option to reduce the cost.</span></span>

### <a name="scenario-4-iaas-application-data-issues"></a><span data-ttu-id="4e699-201">Senaryo 4: Iaas uygulama verileri sorunları</span><span class="sxs-lookup"><span data-stu-id="4e699-201">Scenario 4: IaaS Application data issues</span></span>

<span data-ttu-id="4e699-202">Hesaplar, korur ve fiyatlandırma bilgileri gibi kritik ticari verileri hizmet veren bir uygulamaya sahip.</span><span class="sxs-lookup"><span data-stu-id="4e699-202">You have an application that computes, maintains, and serves critical commercial data such as pricing information.</span></span> <span data-ttu-id="4e699-203">Uygulamanızı yeni bir sürümü yanlış fiyatlandırma hesaplanan ve platform tarafından sunulan varolan ticaret verileri bozuk bir yazılım hata vardı.</span><span class="sxs-lookup"><span data-stu-id="4e699-203">A new version of your application had a software bug which incorrectly computed the pricing and corrupted the existing commerce data served by the platform.</span></span> <span data-ttu-id="4e699-204">Burada, ilk uygulama ve verilerin önceki sürümüne geri dönmek için iyi davranış biçimini olacaktır.</span><span class="sxs-lookup"><span data-stu-id="4e699-204">Here, the best course of action would be to revert to the earlier version of the application and the data first.</span></span> <span data-ttu-id="4e699-205">Bu ayarı etkinleştirmek için sisteminizi düzenli yedeklemelerini alın.</span><span class="sxs-lookup"><span data-stu-id="4e699-205">To enable this, take periodic backups of your system.</span></span>

## <a name="disaster-recovery-solution-azure-backup-service"></a><span data-ttu-id="4e699-206">Olağanüstü durum kurtarma çözümü: Azure yedekleme hizmeti</span><span class="sxs-lookup"><span data-stu-id="4e699-206">Disaster Recovery Solution: Azure Backup Service</span></span>

<span data-ttu-id="4e699-207">[Azure Backup hizmeti](https://azure.microsoft.com/services/backup/) ile çalışır ve yedekleme ve kurtarma için kullanılabilir olan [yönetilen diskleri](../../virtual-machines/windows/managed-disks-overview.md) yanı [yönetilmeyen diskleri](../../virtual-machines/windows/about-disks-and-vhds.md#unmanaged-disks).</span><span class="sxs-lookup"><span data-stu-id="4e699-207">[Azure Backup Service](https://azure.microsoft.com/services/backup/) is can be used for Backup and DR, and it works with [Managed Disks](../../virtual-machines/windows/managed-disks-overview.md) as well as [Unmanaged Disks](../../virtual-machines/windows/about-disks-and-vhds.md#unmanaged-disks).</span></span> <span data-ttu-id="4e699-208">Bir yedekleme işi zaman tabanlı yedeklemeler, kolay VM geri yükleme ve yedekleme bekletme ilkeleri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-208">You can create a backup job with time-based backups, easy VM restoration and backup retention policies.</span></span> 

<span data-ttu-id="4e699-209">Kullanırsanız [Premium depolama diskleri](storage-premium-storage.md), [yönetilen diskleri](../../virtual-machines/windows/managed-disks-overview.md), veya diğer disk türlerinde [yerel olarak yedekli depolama (LRS)](storage-redundancy.md#locally-redundant-storage) seçeneği, onu önemlidir düzenli DR yedeklemeler yararlanmak özellikle.</span><span class="sxs-lookup"><span data-stu-id="4e699-209">If you use [Premium Storage disks](storage-premium-storage.md), [Managed Disks](../../virtual-machines/windows/managed-disks-overview.md), or other disk types with the [locally redundant storage (LRS)](storage-redundancy.md#locally-redundant-storage) option, it is especially important to leverage periodic DR backups.</span></span> <span data-ttu-id="4e699-210">Azure yedekleme kurtarma Hizmetleri kasanız uzun vadeli bekletme için verileri depolar.</span><span class="sxs-lookup"><span data-stu-id="4e699-210">Azure Backup stores the data in your Recovery Services vault for long term retention.</span></span> <span data-ttu-id="4e699-211">Seçin [coğrafi olarak yedekli depolama (GRS)](storage-redundancy.md#geo-redundant-storage) yedekleme kurtarma Hizmetleri kasası için seçeneği.</span><span class="sxs-lookup"><span data-stu-id="4e699-211">Choose the [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) option for the Backup Recovery Services vault.</span></span> <span data-ttu-id="4e699-212">Yedeklemeleri bölgesel olağanüstü durumlarını koruma için farklı bir Azure bölgesine çoğaltılır ilişkilendirilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-212">That will ensure backups are replicated to a different Azure region for safeguarding from regional disasters.</span></span>

<span data-ttu-id="4e699-213">İçin [yönetilmeyen diskleri](../../virtual-machines/windows/about-disks-and-vhds.md#unmanaged-disks), Iaas disklerini LRS depolama türü kullanır, ancak Azure yedekleme için kurtarma Hizmetleri kasası GRS seçeneğiyle etkinleştirildiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="4e699-213">For [Unmanaged Disks](../../virtual-machines/windows/about-disks-and-vhds.md#unmanaged-disks), you can use the LRS storage type for IaaS disks, but ensure that Azure Backup is enabled with the GRS option for the Recovery Services Vault.</span></span>

<span data-ttu-id="4e699-214">**Kullanırsanız [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) seçeneği yönetilmeyen disklerinizi, yine için yedekleme ve kurtarma için tutarlı anlık görüntüler gerekir.**</span><span class="sxs-lookup"><span data-stu-id="4e699-214">**If you use the [GRS](storage-redundancy.md#geo-redundant-storage)/[RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage) option for your Unmanaged Disks, you still need consistent snapshots for Backup and DR.**</span></span> <span data-ttu-id="4e699-215">Ya da kullanmalıdır [Azure Backup hizmeti](https://azure.microsoft.com/services/backup/) veya [tutarlı anlık görüntüleri](#alternative-solution-consistent-snapshots).</span><span class="sxs-lookup"><span data-stu-id="4e699-215">You must use either [Azure Backup Service](https://azure.microsoft.com/services/backup/) or [consistent snapshots](#alternative-solution-consistent-snapshots).</span></span>

<span data-ttu-id="4e699-216">DR çözümleri bir özeti verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="4e699-216">The following is a summary of solutions for DR.</span></span>

| <span data-ttu-id="4e699-217">Senaryo</span><span class="sxs-lookup"><span data-stu-id="4e699-217">Scenario</span></span> | <span data-ttu-id="4e699-218">Otomatik çoğaltma</span><span class="sxs-lookup"><span data-stu-id="4e699-218">Automatic Replication</span></span> | <span data-ttu-id="4e699-219">DR çözümü</span><span class="sxs-lookup"><span data-stu-id="4e699-219">DR Solution</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4e699-220">*Premium depolama diskleri*</span><span class="sxs-lookup"><span data-stu-id="4e699-220">*Premium Storage Disks*</span></span> | <span data-ttu-id="4e699-221">Yerel ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="4e699-221">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="4e699-222">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-222">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="4e699-223">*Yönetilen Diskler*</span><span class="sxs-lookup"><span data-stu-id="4e699-223">*Managed Disks*</span></span> | <span data-ttu-id="4e699-224">Yerel ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="4e699-224">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="4e699-225">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-225">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="4e699-226">*Yönetilmeyen LRS diskleri*</span><span class="sxs-lookup"><span data-stu-id="4e699-226">*Unmanaged LRS Disks*</span></span> | <span data-ttu-id="4e699-227">Yerel ([LRS](storage-redundancy.md#locally-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="4e699-227">Local ([LRS](storage-redundancy.md#locally-redundant-storage))</span></span> | [<span data-ttu-id="4e699-228">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-228">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/) |
| <span data-ttu-id="4e699-229">*Yönetilmeyen GRS diskleri*</span><span class="sxs-lookup"><span data-stu-id="4e699-229">*Unmanaged GRS Disks*</span></span> | <span data-ttu-id="4e699-230">Çapraz bölge ([GRS](storage-redundancy.md#geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="4e699-230">Cross region ([GRS](storage-redundancy.md#geo-redundant-storage))</span></span> | [<span data-ttu-id="4e699-231">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-231">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="4e699-232">Tutarlı anlık görüntüler</span><span class="sxs-lookup"><span data-stu-id="4e699-232">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |
| <span data-ttu-id="4e699-233">*Yönetilmeyen RA-GRS diskleri*</span><span class="sxs-lookup"><span data-stu-id="4e699-233">*Unmanaged RA-GRS Disks*</span></span> | <span data-ttu-id="4e699-234">Çapraz bölge ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span><span class="sxs-lookup"><span data-stu-id="4e699-234">Cross region ([RA-GRS](storage-redundancy.md#read-access-geo-redundant-storage))</span></span> | [<span data-ttu-id="4e699-235">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-235">Azure Backup</span></span>](https://azure.microsoft.com/services/backup/)<br/>[<span data-ttu-id="4e699-236">Tutarlı anlık görüntüler</span><span class="sxs-lookup"><span data-stu-id="4e699-236">Consistent snapshots</span></span>](#alternative-solution-consistent-snapshots) |

<span data-ttu-id="4e699-237">Yüksek kullanılabilirlik en iyi göre karşılanmış yönetilen disklerin bir kullanılabilirlik grubunda yanı sıra Azure Backup aracılığıyla.</span><span class="sxs-lookup"><span data-stu-id="4e699-237">High availability can best by met through the use of Managed Disks in an Availability Set along with Azure Backup.</span></span> <span data-ttu-id="4e699-238">Yönetilmeyen diskler kullanıyorsanız, Azure Backup DR için kullanmaya devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-238">If you are using Unmanaged Disks, you can still  use Azure Backup for DR.</span></span> <span data-ttu-id="4e699-239">Azure Yedekleme'yi yapamıyorsanız, ardından alma [tutarlı anlık görüntüleri](#alternative-solution-consistent-snapshots) açıklandığı gibi daha sonraki bir bölüme bir alternatif için yedekleme ve kurtarma çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="4e699-239">If you are unable to use Azure Backup, then taking [consistent snapshots](#alternative-solution-consistent-snapshots) as described in a later section is an alternative solution for Backup and DR.</span></span>

<span data-ttu-id="4e699-240">Seçimlerinizi yüksek kullanılabilirlik için yedekleme ve uygulama veya altyapı düzeylerinde DR temsil olarak aşağıda:</span><span class="sxs-lookup"><span data-stu-id="4e699-240">Your choices for high availability, backup and DR at Application or Infrastructure levels can be represented as below:</span></span>

| <span data-ttu-id="4e699-241">*Düzeyi*</span><span class="sxs-lookup"><span data-stu-id="4e699-241">*Level*</span></span> | <span data-ttu-id="4e699-242">Yüksek kullanılabilirlik</span><span class="sxs-lookup"><span data-stu-id="4e699-242">High Availability</span></span>   | <span data-ttu-id="4e699-243">Yedekleme / DR</span><span class="sxs-lookup"><span data-stu-id="4e699-243">Backup / DR</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4e699-244">*Uygulama*</span><span class="sxs-lookup"><span data-stu-id="4e699-244">*Application*</span></span> | <span data-ttu-id="4e699-245">Her zaman açık SQL</span><span class="sxs-lookup"><span data-stu-id="4e699-245">SQL Always On</span></span> | <span data-ttu-id="4e699-246">Azure Backup</span><span class="sxs-lookup"><span data-stu-id="4e699-246">Azure Backup</span></span> |
| <span data-ttu-id="4e699-247">*Altyapı*</span><span class="sxs-lookup"><span data-stu-id="4e699-247">*Infrastructure*</span></span>  | <span data-ttu-id="4e699-248">Kullanılabilirlik Kümesi</span><span class="sxs-lookup"><span data-stu-id="4e699-248">Availability Set</span></span>  | <span data-ttu-id="4e699-249">GRS ile tutarlı anlık görüntüler</span><span class="sxs-lookup"><span data-stu-id="4e699-249">GRS with consistent snapshots</span></span> |

### <a name="using-the-azure-backup-service"></a><span data-ttu-id="4e699-250">Azure Backup hizmeti kullanma</span><span class="sxs-lookup"><span data-stu-id="4e699-250">Using the Azure Backup Service</span></span>

<span data-ttu-id="4e699-251">[Azure yedekleme](../../backup/backup-azure-vms-introduction.md) Azure kurtarma Hizmetleri Kasası'na Windows veya Linux çalıştıran, sanal makineleri yedekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-251">[Azure Backup](../../backup/backup-azure-vms-introduction.md) can backup your VMs running Windows or Linux to the Azure Recovery Services Vault.</span></span> <span data-ttu-id="4e699-252">Yedekleme ve geri yükleme iş açısından kritik verilerin veri üretmek uygulamaları çalıştırırken, iş açısından kritik verilerin yedeklenmesi gereken olgusu karmaşık.</span><span class="sxs-lookup"><span data-stu-id="4e699-252">Backing up and restoring business-critical data is complicated by the fact that business-critical data must be backed up while the applications that produce the data are running.</span></span> <span data-ttu-id="4e699-253">Bu sorunu çözmek için Azure Backup veri depolama için doğru yazıldığından emin olmak için birim gölge hizmeti (VSS) kullanarak uygulamayla tutarlı yedeklemeler Microsoft iş yükleri için sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-253">To address this, Azure Backup provides application-consistent backups for Microsoft workloads by using the Volume Shadow Service (VSS) to ensure that data is written correctly to storage.</span></span> <span data-ttu-id="4e699-254">Linux işlevselliği VSS'ye eşdeğer olmadığından Linux VM'ler için yalnızca dosya tutarlı yedeklemeler olasılığı vardır</span><span class="sxs-lookup"><span data-stu-id="4e699-254">For Linux VMs, only file-consistent backups are possible, since Linux does not have functionality equivalent to VSS.</span></span>

![](./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-1.png)   

<span data-ttu-id="4e699-255">Azure Backup, zamanlanan saatte bir yedekleme işi başlattığında, zaman içinde nokta anlık almak için VM'de yüklü yedekleme uzantısını tetikler.</span><span class="sxs-lookup"><span data-stu-id="4e699-255">When Azure Backup initiates a backup job at the scheduled time, it triggers the backup extension installed in the VM to take a point-in-time snapshot.</span></span> <span data-ttu-id="4e699-256">Bir anlık görüntü kapatmak zorunda kalmadan sanal makinenin disklerinin tutarlı bir anlık görüntü almak için VSS koordinasyon alınır.</span><span class="sxs-lookup"><span data-stu-id="4e699-256">A snapshot is taken in coordination with VSS to get a consistent snapshot of the disks in the virtual machine without having to shut it down.</span></span> <span data-ttu-id="4e699-257">VM yedekleme uzantısına tüm disklerin tutarlı anlık önce tüm yazma işlemlerini aktarır.</span><span class="sxs-lookup"><span data-stu-id="4e699-257">The backup extension in the VM flushes all writes before taking the consistent snapshot of all the disks.</span></span> <span data-ttu-id="4e699-258">Anlık görüntü oluşturulduğunda sonra verileri Azure yedekleme tarafından yedekleme Kasası'na aktarılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-258">After the snapshot is taken, the data is transferred by Azure Backup to the backup vault.</span></span> <span data-ttu-id="4e699-259">Yedekleme işlemini daha verimli hale getirmek için hizmet tanımlar ve yalnızca son yedeklemeden sonra değiştirilen veri blokları aktarır.</span><span class="sxs-lookup"><span data-stu-id="4e699-259">To make the backup process more efficient, the service identifies and transfers only the blocks of data that have changed since the last backup.</span></span>


<span data-ttu-id="4e699-260">Geri yüklemek için Azure Backup aracılığıyla kullanılabilir yedeklemeleri görüntüleyebilir ve geri yükleme başlatmak.</span><span class="sxs-lookup"><span data-stu-id="4e699-260">To restore, you can view the available backups through Azure Backup and then initiate a restore.</span></span> <span data-ttu-id="4e699-261">Oluşturma ve Azure yedeklemeleri aracılığıyla geri [Azure portal](https://portal.azure.com/), [PowerShell kullanarak](../../backup/backup-azure-vms-automation.md ), veya kullanarak [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install).</span><span class="sxs-lookup"><span data-stu-id="4e699-261">You can create and restore Azure backups through the [Azure portal](https://portal.azure.com/), [using PowerShell](../../backup/backup-azure-vms-automation.md ), or using the [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install).</span></span> <span data-ttu-id="4e699-262">Daha fazla bilgi için Azure yedekleme konusuna bakın.</span><span class="sxs-lookup"><span data-stu-id="4e699-262">For more information, see Azure Backup.</span></span>

### <a name="steps-to-enable-backup"></a><span data-ttu-id="4e699-263">Yedeklemeyi etkinleştirmek için adımları</span><span class="sxs-lookup"><span data-stu-id="4e699-263">Steps to Enable Backup</span></span>

<span data-ttu-id="4e699-264">Aşağıdaki adımları kullanarak, Vm'lerde yedeklerini etkinleştirmek için genellikle kullanılan [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="4e699-264">The following steps are typically used to enable backups of your VMs using the [Azure Portal](https://portal.azure.com/).</span></span> <span data-ttu-id="4e699-265">Tam senaryonuza bağlı olarak bazı farklılıklar olacaktır.</span><span class="sxs-lookup"><span data-stu-id="4e699-265">There will be some variations depending on your exact scenario.</span></span> <span data-ttu-id="4e699-266">Başvurmak [Azure Backup](../../backup/backup-azure-vms-introduction.md) tam Ayrıntılar için belgelerine bakın.</span><span class="sxs-lookup"><span data-stu-id="4e699-266">Refer to the [Azure Backup](../../backup/backup-azure-vms-introduction.md) documentation for full details.</span></span> <span data-ttu-id="4e699-267">Azure ayrıca yedekleme [yönetilen diske sahip sanal makineleri destekleyen](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span><span class="sxs-lookup"><span data-stu-id="4e699-267">Azure Backup also [supports VMs with Managed Disks](https://azure.microsoft.com/blog/azure-managed-disk-backup/).</span></span>

1.  <span data-ttu-id="4e699-268">Bir kurtarma Hizmetleri kasası için aşağıdaki adımları kullanarak bir VM oluşturun:</span><span class="sxs-lookup"><span data-stu-id="4e699-268">Create a recovery services vault for a VM using the following steps:</span></span>

    <span data-ttu-id="4e699-269">a.</span><span class="sxs-lookup"><span data-stu-id="4e699-269">a.</span></span>  <span data-ttu-id="4e699-270">Kullanarak [Azure portal](https://portal.azure.com/)tüm kaynaklara göz atın ve "Kurtarma Hizmetleri kasalarının" bulunamıyor.</span><span class="sxs-lookup"><span data-stu-id="4e699-270">Using the [Azure portal](https://portal.azure.com/), browse all resources and find “Recovery Services vaults”.</span></span>

    <span data-ttu-id="4e699-271">b.</span><span class="sxs-lookup"><span data-stu-id="4e699-271">b.</span></span>  <span data-ttu-id="4e699-272">Kurtarma Hizmetleri kasaları menüsünde Ekle'yi tıklatın ve VM ile aynı bölgede yeni bir kasa oluşturmak için aşağıdaki adımları izleyin.</span><span class="sxs-lookup"><span data-stu-id="4e699-272">On the Recovery Services vaults menu, click Add and follow the steps to create a new vault in the same region as the VM.</span></span> <span data-ttu-id="4e699-273">Örneğin, VM'yi Batı ABD bölgesi ise, Batı ABD için kasa seçin.</span><span class="sxs-lookup"><span data-stu-id="4e699-273">For example, if your VM is in West US region, pick West US for the vault.</span></span>

2.  <span data-ttu-id="4e699-274">Yeni oluşturulan kasa için depolama çoğaltma doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="4e699-274">Verify the Storage replication for the newly created vault.</span></span> <span data-ttu-id="4e699-275">Bunu yapmak için kurtarma Hizmetleri kasaları dikey penceresinden kasaya erişim ve ayarları/yedekleme yapılandırması gidin.</span><span class="sxs-lookup"><span data-stu-id="4e699-275">To do this, access the vault from the Recovery Services vaults blade and go to the settings/Backup Configuration.</span></span> <span data-ttu-id="4e699-276">GRS seçeneği varsayılan olarak seçili olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="4e699-276">Ensure the GRS option is selected by default.</span></span> <span data-ttu-id="4e699-277">Bu, kasanızı ikincil veri merkezine otomatik olarak çoğaltılır güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="4e699-277">This will ensure that your vault is automatically replicated to a secondary data center.</span></span> <span data-ttu-id="4e699-278">Örneğin, Batı ABD, kasaya Doğu ABD için otomatik olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-278">For example, your vault in West US will be automatically replicated to East US.</span></span>

3.  <span data-ttu-id="4e699-279">Yedekleme ilkesi yapılandırın ve aynı kullanıcı Arabiriminden VM seçin.</span><span class="sxs-lookup"><span data-stu-id="4e699-279">Configure the backup policy and select the VM from the same UI.</span></span>

4.  <span data-ttu-id="4e699-280">Backup Aracısı VM üzerinde yüklü olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="4e699-280">Make sure the Backup Agent is installed on the VM.</span></span> <span data-ttu-id="4e699-281">VM Azure galerisinde görüntü kullanarak oluşturulmuşsa, Yedekleme aracısı zaten yüklüdür.</span><span class="sxs-lookup"><span data-stu-id="4e699-281">If your VM is created using an Azure gallery image, then the Backup agent is already installed.</span></span> <span data-ttu-id="4e699-282">(Diğer bir deyişle, özel bir görüntü kullanıyorsanız) Aksi durumda, yönergeleri kullanın [VM Aracısı sanal makineye yükleme](../../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="4e699-282">Otherwise (that is, if you are using a custom image), use instructions to [Install the VM Agent on the virtual machine](../../backup/backup-azure-arm-vms-prepare.md#install-the-vm-agent-on-the-virtual-machine).</span></span>

5.  <span data-ttu-id="4e699-283">VM yedekleme hizmetinin çalışması için ağ bağlantısı verdiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="4e699-283">Make sure that the VM allows network connectivity for the backup service to function.</span></span> <span data-ttu-id="4e699-284">Bu yönergeleri izleyin [ağ bağlantınızı](../../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span><span class="sxs-lookup"><span data-stu-id="4e699-284">Follow these instructions for [Network connectivity](../../backup/backup-azure-arm-vms-prepare.md#network-connectivity).</span></span>

6.  <span data-ttu-id="4e699-285">Yukarıdaki adımları tamamladıktan sonra yedekleme İlkesi belirtildiği gibi düzenli aralıklarla yedekleme çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="4e699-285">Once the above steps are completed, the backup will run at regular intervals as specified in the backup policy.</span></span> <span data-ttu-id="4e699-286">Gerekirse ilk yedekleme Azure portalındaki kasa Panosu el ile tetikleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-286">If necessary, you can trigger the first backup manually from the vault dashboard on the Azure portal.</span></span>

<span data-ttu-id="4e699-287">Azure komut dosyalarını kullanarak yedekleme otomatikleştirmek için lütfen [VM yedekleme için PowerShell cmdlet'leri](../../backup/backup-azure-vms-automation.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-287">For automating Azure Backup using scripts, please refer to [PowerShell cmdlets for VM backup](../../backup/backup-azure-vms-automation.md).</span></span>

### <a name="steps-for-recovery"></a><span data-ttu-id="4e699-288">Kurtarma için adımları</span><span class="sxs-lookup"><span data-stu-id="4e699-288">Steps for Recovery</span></span>

<span data-ttu-id="4e699-289">Onarmak veya VM yeniden ihtiyacınız varsa, yedekleme kurtarma noktalarının kasadaki birinden VM geri yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-289">If you need to repair or rebuild a VM, you can restore the VM from any of the backup recovery points in the vault.</span></span> <span data-ttu-id="4e699-290">Birkaç kurtarmayı gerçekleştirmek için farklı seçenekler vardır:</span><span class="sxs-lookup"><span data-stu-id="4e699-290">There are a couple of different options for performing the recovery:</span></span>

1.  <span data-ttu-id="4e699-291">Yeni bir VM, yedeklenen VM olarak zaman içinde nokta gösterimini oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-291">You can create a new VM as a point-in-time representation of your backed-up VM.</span></span>

2.  <span data-ttu-id="4e699-292">Diskleri geri yükleyin ve özelleştirin ve geri yüklenen VM yeniden oluşturmak için VM şablonu kullanın.</span><span class="sxs-lookup"><span data-stu-id="4e699-292">You can restore the disks and then use the template for the VM to customize and rebuild the restored VM.</span></span> 

<span data-ttu-id="4e699-293">Yönergeler için bkz: [kullanım Azure portalı sanal makineleri geri](../../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span><span class="sxs-lookup"><span data-stu-id="4e699-293">See instructions to [Use Azure portal to restore virtual machines](../../backup/backup-azure-arm-restore-vms.md#restoring-a-vm-during-azure-datacenter-disaster).</span></span> <span data-ttu-id="4e699-294">Belge ayrıca birincil veri merkezinde bir olağanüstü durum söz konusu olduğunda, coğrafi olarak yedekli yedekleme kasası kullanarak eşleştirilmiş veri merkezine yedeklenen sanal makineleri geri yüklemek için belirli adımlar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="4e699-294">The document also explains the specific steps for restoring backed-up VMs to the paired data center using your geo-redundant backup vault in the case of a disaster at the primary data center.</span></span> <span data-ttu-id="4e699-295">Bu durumda, Azure Backup geri yüklenen sanal makine oluşturmak için ikincil bölgesinden işlem hizmeti kullanır.</span><span class="sxs-lookup"><span data-stu-id="4e699-295">In that case, Azure Backup uses the Compute service from the secondary region to create the restored virtual machine.</span></span>

<span data-ttu-id="4e699-296">PowerShell için de kullanabilirsiniz [VM geri](../../backup/backup-azure-vms-automation.md#restore-an-azure-vm) veya [yeni bir sanal makineden oluşturma geri diskleri](../../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span><span class="sxs-lookup"><span data-stu-id="4e699-296">You can also use PowerShell for [restoring a VM](../../backup/backup-azure-vms-automation.md#restore-an-azure-vm) or for [creating a new VM from restored disks](../../backup/backup-azure-vms-automation.md#create-a-vm-from-restored-disks).</span></span>

## <a name="alternative-solution-consistent-snapshots"></a><span data-ttu-id="4e699-297">Alternatif çözüm: Tutarlı anlık görüntüler</span><span class="sxs-lookup"><span data-stu-id="4e699-297">Alternative Solution: Consistent Snapshots</span></span>

<span data-ttu-id="4e699-298">Azure Yedekleme hizmetini kullanmak erişemiyorsanız anlık görüntülerini kullanarak kendi yedekleme mekanizması uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-298">If you are unable to use the Azure Backup Service, you can implement your own backup mechanism using snapshots.</span></span> <span data-ttu-id="4e699-299">Bir VM tarafından kullanılan tüm diskler için tutarlı anlık görüntüler oluşturmak ve ardından bu anlık görüntülerin başka bir bölgeye çoğaltmak karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="4e699-299">It is complicated to create consistent snapshots for all disks used by a VM and then replicate those snapshots to another region.</span></span> <span data-ttu-id="4e699-300">Bu nedenle, Azure Backup hizmeti özel çözüm oluşturma değerinden daha iyi bir seçenek yararlanarak göz önünde bulundurur.</span><span class="sxs-lookup"><span data-stu-id="4e699-300">For this reason, Azure considers leveraging the Backup Service a better option than building a custom solution.</span></span> <span data-ttu-id="4e699-301">RA-GRS/GRS depolama için diskleri kullanırsanız, anlık görüntüler bir ikincil veri merkezine otomatik olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-301">If you use RA-GRS/GRS storage for disks, snapshots are automatically replicated to a secondary data center.</span></span> <span data-ttu-id="4e699-302">LRS depolama için diskleri kullanırsanız, kendiniz veri çoğaltmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-302">If you use LRS storage for disks, you will need to replicate the data yourself.</span></span> <span data-ttu-id="4e699-303">Daha fazla bilgi için bkz: [artımlı anlık görüntüleri ile Azure yönetilmeyen VM diskleri yedekleme](../../virtual-machines/windows/incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-303">For more information, see [Back up Azure unmanaged VM disks with incremental snapshots](../../virtual-machines/windows/incremental-snapshots.md).</span></span>

<span data-ttu-id="4e699-304">Bir nesne belirli bir noktada bir gösterimini zaman içinde bir anlık görüntüdür.</span><span class="sxs-lookup"><span data-stu-id="4e699-304">A snapshot is a representation of an object at a specific point in time.</span></span> <span data-ttu-id="4e699-305">Anlık isteğe bağlı olarak veri için artımlı boyutu ayrı tutma faturalama uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-305">A snapshot will incur billing for the incremental size of the data it holds.</span></span> <span data-ttu-id="4e699-306">Daha fazla bilgi için bkz: [blob anlık görüntü](../blobs/storage-blob-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-306">For more information, see [Create a blob snapshot](../blobs/storage-blob-snapshots.md).</span></span>

### <a name="creating-snapshots-while-the-vm-is-running"></a><span data-ttu-id="4e699-307">VM çalışırken anlık görüntüleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="4e699-307">Creating snapshots while the VM is running</span></span>

<span data-ttu-id="4e699-308">VM çalışıyorsa, herhangi bir zamanda bir anlık görüntü alabilir, ancak hala disklere akıtılan veri yoktur ve anlık görüntüleri uçuş modunda olan kısmi işlemleri içerebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-308">While you can take a snapshot at any time, if the VM is running, there is still data being streamed to the disks, and the snapshots may contain partial operations that were in flight.</span></span> <span data-ttu-id="4e699-309">Söz konusu birden çok disk varsa, ayrıca, farklı disklerin anlık görüntüleri farklı zamanlarda bu anlık görüntüleri Eşgüdümlü olmayabilir yani oluşmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-309">Also, if there are several disks involved, the snapshots of different disks may have occurred at different times, which means these snapshots may not be coordinated.</span></span> <span data-ttu-id="4e699-310">Bu değişikliği yedekleme sırasında yapılmışsa, dosya bozuk şeritli birimler için özellikle sorunlu oluşturur.</span><span class="sxs-lookup"><span data-stu-id="4e699-310">This is especially problematic for striped volumes whose files can be corrupted if changes were being made during backup.</span></span>

<span data-ttu-id="4e699-311">Bu durumu önlemek için yedekleme işlemi aşağıdaki adımları uygulamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="4e699-311">To avoid this situation, the backup process must implement the following steps:</span></span>

1.  <span data-ttu-id="4e699-312">Tüm disklerin dondurma</span><span class="sxs-lookup"><span data-stu-id="4e699-312">Freeze all the disks</span></span>

2.  <span data-ttu-id="4e699-313">Bekleyen tüm yazma işlemlerini boşaltmaya</span><span class="sxs-lookup"><span data-stu-id="4e699-313">Flush all the pending writes</span></span>

3.  <span data-ttu-id="4e699-314">Ardından, [blob anlık görüntü](../blobs/storage-blob-snapshots.md) tüm diskler için</span><span class="sxs-lookup"><span data-stu-id="4e699-314">Then, [create a blob snapshot](../blobs/storage-blob-snapshots.md) for all the disks</span></span>

<span data-ttu-id="4e699-315">SQL Server gibi bazı Windows uygulamaları uygulama tutarlı yedeklemeler oluşturmak için VSS aracılığıyla koordineli bir yedekleme mekanizması sağlar.</span><span class="sxs-lookup"><span data-stu-id="4e699-315">Some Windows applications like SQL Server provide a coordinated backup mechanism via VSS to create application-consistent backups.</span></span> <span data-ttu-id="4e699-316">Linux üzerinde dosya tutarlı yedeklemeler, ancak değil uygulamayla tutarlı anlık görüntüleri sağlar diskleri düzenlemekten fsfreeze gibi bir araç kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-316">On Linux, you can use a tool like fsfreeze for coordinating the disks, which will provide file-consistent backups, but not application-consistent snapshots.</span></span> <span data-ttu-id="4e699-317">Bu karmaşık bir işlemdir, bu nedenle ve kullanmayı düşünmelisiniz [Azure yedekleme](../../backup/backup-azure-vms-introduction.md) veya bu zaten uygulayan bir üçüncü taraf yedekleme çözümünün.</span><span class="sxs-lookup"><span data-stu-id="4e699-317">This process is complicated, so and you should consider using [Azure Backup](../../backup/backup-azure-vms-introduction.md) or a third-party backup solution which already implement this.</span></span>

<span data-ttu-id="4e699-318">Yukarıdaki işlem VM belirli bir zaman içinde nokta görünümünü temsil eden tüm VM diskleri için Eşgüdümlü anlık görüntü koleksiyonu neden olur.</span><span class="sxs-lookup"><span data-stu-id="4e699-318">The above process will result in a collection of coordinated snapshots for all the VM disks, representing a specific point-in-time view of the VM.</span></span> <span data-ttu-id="4e699-319">VM için bir yedekleme geri yükleme noktası budur.</span><span class="sxs-lookup"><span data-stu-id="4e699-319">This is a backup restore point for the VM.</span></span> <span data-ttu-id="4e699-320">Zamanlanan aralıklarla düzenli yedeklemeler oluşturmak için bu işlemi yineleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-320">You can repeat the process at scheduled intervals to create periodic backups.</span></span> <span data-ttu-id="4e699-321">Aşağıdaki adımları için bkz: [yedeklemeler başka bir bölgeye kopyalama](#copy-the-snapshots-to-another-region) DR için.</span><span class="sxs-lookup"><span data-stu-id="4e699-321">See below for the steps to [copy the backups to another region](#copy-the-snapshots-to-another-region) for DR.</span></span>

### <a name="creating-snapshots-while-the-vm-is-offline"></a><span data-ttu-id="4e699-322">VM çevrimdışı durumdayken anlık görüntüleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="4e699-322">Creating snapshots while the VM is offline</span></span>

<span data-ttu-id="4e699-323">Tutarlı yedeklemeler oluşturmak için başka bir seçenek VM kapatma ve her disk blob anlık görüntüleri alma.</span><span class="sxs-lookup"><span data-stu-id="4e699-323">Another option to create consistent backups is shutting down the VM and taking blob snapshots of each disk.</span></span> <span data-ttu-id="4e699-324">Bu denetleyici çalışan bir VM anlık kolaydır, ancak birkaç dakika kalma süresi gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-324">This is easier than coordinating snapshots of a running VM, but it requires a few minutes of downtime.</span></span> <span data-ttu-id="4e699-325">Bu işlem, şu adımları izleyin:</span><span class="sxs-lookup"><span data-stu-id="4e699-325">For this process, follow these steps:</span></span>

1. <span data-ttu-id="4e699-326">VM kapatma.</span><span class="sxs-lookup"><span data-stu-id="4e699-326">Shut down the VM.</span></span>

2. <span data-ttu-id="4e699-327">Bir anlık görüntü yalnızca birkaç saniye sürer her VHD BLOB oluşturun.</span><span class="sxs-lookup"><span data-stu-id="4e699-327">Create a snapshot of each VHD blob, which only takes a few seconds.</span></span>

    <span data-ttu-id="4e699-328">Bir anlık görüntü oluşturmak için kullanabileceğiniz [PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), [Azure Storage Rest API'sini](https://msdn.microsoft.com/library/azure/ee691971.aspx), [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install), veya gibi Azure Storage istemci kitaplıklarından birini [.NET için depolama istemci Kitaplığı](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span><span class="sxs-lookup"><span data-stu-id="4e699-328">To create a snapshot, you can use [PowerShell](storage-powershell-guide-full.md#how-to-manage-azure-blob-snapshots), the [Azure Storage Rest API](https://msdn.microsoft.com/library/azure/ee691971.aspx), [Azure CLI](https://docs.microsoft.com/azure/xplat-cli-install), or one of the Azure Storage Client Libraries such as [the Storage client library for .NET](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span></span>

3. <span data-ttu-id="4e699-329">Kapalı kalma süresi sona VM başlatın.</span><span class="sxs-lookup"><span data-stu-id="4e699-329">Start the VM, which ends the downtime.</span></span> <span data-ttu-id="4e699-330">Genellikle tüm işlemi birkaç dakika içinde tamamlanır.</span><span class="sxs-lookup"><span data-stu-id="4e699-330">Typically the entire process completes within a few minutes.</span></span>

<span data-ttu-id="4e699-331">Bu işlem, VM için bir yedekleme geri yükleme noktası sağlama tüm diskler için tutarlı anlık görüntüler koleksiyonu verir.</span><span class="sxs-lookup"><span data-stu-id="4e699-331">This process yields a collection of consistent snapshots for all the disks, providing a backup restore point for the VM.</span></span> <span data-ttu-id="4e699-332">Anlık görüntüler için başka bir bölge için DR kopyalamak adımları için aşağıya bakın.</span><span class="sxs-lookup"><span data-stu-id="4e699-332">See below for the steps to copy the snapshots to another region for DR.</span></span>

### <a name="copy-the-snapshots-to-another-region"></a><span data-ttu-id="4e699-333">Başka bir bölgeye anlık görüntüleri kopyalama</span><span class="sxs-lookup"><span data-stu-id="4e699-333">Copy the snapshots to another region</span></span>

<span data-ttu-id="4e699-334">Tek başına anlık görüntü oluşturmaya DR için yeterli olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-334">Creation of the snapshots alone may not be sufficient for DR.</span></span> <span data-ttu-id="4e699-335">Ayrıca, başka bir bölgeye anlık görüntüsü yedekleri çoğaltılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-335">You must also replicate the snapshot backups to another region.</span></span>

<span data-ttu-id="4e699-336">Ardından, disklerin GRS veya RA-GRS kullanıyorsanız, anlık görüntüleri ikincil bölge'ye otomatik olarak çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-336">If you are using GRS or RA-GRS for your disks, then the snapshots are replicated to the secondary region automatically.</span></span> <span data-ttu-id="4e699-337">Önce çoğaltma gecikmesi, birkaç dakika olabilir ve anlık görüntü çoğaltma bitirmeden birincil veri merkezi kullanılamaz hale gelirse, ikincil veri merkezi'nden anlık görüntüleri erişebilir olmaz.</span><span class="sxs-lookup"><span data-stu-id="4e699-337">There can be a few minutes of lag before the replication, and if the primary data center goes down before the snapshots finish replicating, you will not be able to access the snapshots from the secondary data center.</span></span> <span data-ttu-id="4e699-338">Bu olasılığını küçüktür.</span><span class="sxs-lookup"><span data-stu-id="4e699-338">The likelihood of this is small.</span></span>

> [!Note] 
> <span data-ttu-id="4e699-339">Yalnızca bir GRS veya RA-GRS hesabı disklere sahip VM olağanüstü durumlarını korumaz.</span><span class="sxs-lookup"><span data-stu-id="4e699-339">Only having the disks in a GRS or RA-GRS account does not protect the VM from disasters.</span></span> <span data-ttu-id="4e699-340">Ayrıca, Azure Yedekleme'yi Eşgüdümlü anlık görüntülerini oluşturma veya gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-340">You must also create coordinated snapshots or use Azure Backup.</span></span> <span data-ttu-id="4e699-341">Bu, bir VM tutarlı bir duruma kurtarmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-341">This is required to recover a VM to a consistent state.</span></span>

<span data-ttu-id="4e699-342">LRS kullanıyorsanız, anlık görüntü hemen oluşturduktan sonra farklı bir depolama hesabı için anlık görüntüleri kopyalamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-342">If you are using LRS, you must copy the snapshots to a different storage account immediately after creating the snapshot.</span></span> <span data-ttu-id="4e699-343">Kopyalama hedefi uzak bir bölgede olması kopyalama sonuçta bir LRS depolama hesabı farklı bir bölgede olabilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-343">The copy target could be an LRS storage account in a different region, resulting in the copy being in a remote region.</span></span> <span data-ttu-id="4e699-344">Ayrıca, anlık görüntü bir RA-GRS depolama hesabı aynı bölgede kopyalayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-344">You can also copy the snapshot to an RA-GRS storage account in the same region.</span></span> <span data-ttu-id="4e699-345">Bu durumda, anlık görüntü gevşek uzak ikincil bölge'ye çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-345">In this case, the snapshot will be lazily replicated to the remote secondary region.</span></span> <span data-ttu-id="4e699-346">Çoğaltma tamamlandıktan ve yedekleme olağanüstü bir kez kopyalama birincil sitede gelen korunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="4e699-346">Your backup is protected from disasters at the primary site once the copying and replication is complete.</span></span>

<span data-ttu-id="4e699-347">Artımlı anlık DR için verimli bir şekilde kopyalamak için yönergeleri gözden [artımlı anlık görüntüleri ile Azure yönetilmeyen VM diskleri yedekleme](../../virtual-machines/windows/incremental-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-347">To copy your incremental snapshots for DR efficiently, review the instructions in [Back up Azure unmanaged VM disks with incremental snapshots](../../virtual-machines/windows/incremental-snapshots.md).</span></span>

![](./media/storage-backup-and-disaster-recovery-for-azure-iaas-disks/backup-and-disaster-recovery-for-azure-iaas-disks-2.png)   

### <a name="recovery-from-snapshots"></a><span data-ttu-id="4e699-348">Anlık görüntüler kurtarma</span><span class="sxs-lookup"><span data-stu-id="4e699-348">Recovery from Snapshots</span></span>

<span data-ttu-id="4e699-349">Bir anlık görüntü almak için yeni blob yapmak üzere kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="4e699-349">To retrieve a snapshot, copy it to make a new blob.</span></span> <span data-ttu-id="4e699-350">Anlık görüntü birincil hesabından kopyalıyorsanız, anlık görüntü üzerinden anlık görüntüyü temel blob'a böylece disk anlık görüntüye geri döndürmeyi kopyalayabilirsiniz; Bu anlık görüntü yükseltme olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="4e699-350">If you are copying the snapshot from the primary account, you can copy the snapshot over to the base blob of the snapshot, thus reverting the disk to the snapshot; this is known as promoting the snapshot.</span></span> <span data-ttu-id="4e699-351">Anlık görüntü yedekleme (RA-GRS) olması durumunda ikincil bir hesaptan kopyalıyorsanız birincil hesabına kopyalanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-351">If you are copying the snapshot backup from a secondary account (in the case of RA-GRS), it must be copied to a primary account.</span></span> <span data-ttu-id="4e699-352">Bir anlık görüntü kopyalayabilirsiniz [PowerShell kullanarak](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) veya AzCopy yardımcı programını kullanarak.</span><span class="sxs-lookup"><span data-stu-id="4e699-352">You can copy a snapshot [using PowerShell](storage-powershell-guide-full.md#how-to-copy-a-snapshot-of-a-blob) or using the AzCopy utility.</span></span> <span data-ttu-id="4e699-353">Daha fazla bilgi için bkz: [AzCopy komut satırı yardımcı programı ile veri aktarma](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-353">For more information, see [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="4e699-354">Birden çok diske sahip sanal makineleri söz konusu olduğunda, aynı Eşgüdümlü geri yükleme noktası parçası olan tüm anlık görüntüleri kopyalamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-354">In the case of VMs with multiple disks, you must copy all the snapshots that are part of the same coordinated restore point.</span></span> <span data-ttu-id="4e699-355">Yazılabilir VHD BLOB'ları için anlık görüntü kopyalama sonra VM için VM şablonu kullanarak yeniden oluşturmak için BLOB'ları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-355">Once you copy the snapshots to writable VHD blobs, you can use the blobs to recreate your VM using the template for the VM.</span></span>

## <a name="other-options"></a><span data-ttu-id="4e699-356">Diğer seçenekleri</span><span class="sxs-lookup"><span data-stu-id="4e699-356">Other options</span></span>

### <a name="sql-server"></a><span data-ttu-id="4e699-357">SQL Server</span><span class="sxs-lookup"><span data-stu-id="4e699-357">SQL Server</span></span>

<span data-ttu-id="4e699-358">Bir VM içinde çalışan SQL Server, SQL Server veritabanını Azure Blob Depolama veya bir dosya paylaşımı yedeklemek için kendi yerleşik özellikler vardır.</span><span class="sxs-lookup"><span data-stu-id="4e699-358">SQL Server running in a VM has its own built-in capabilities to backup your SQL Server database to Azure Blob storage or a file share.</span></span> <span data-ttu-id="4e699-359">GRS veya RA-GRS depolama hesabı ise, depolama hesabının ikincil veri merkezinde aynı kısıtlamalara sahip bir olağanüstü durum durumunda bu yedekleri daha önce açıklandığı gibi erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-359">If the storage account is GRS or RA-GRS, you can access those backups in the storage account’s secondary data center in the event of a disaster, with the same restrictions as discussed previously.</span></span> <span data-ttu-id="4e699-360">Daha fazla bilgi için bkz: [yedekleme ve Azure Virtual Machines'de SQL Server için geri yükleme](../../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-360">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](../../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md).</span></span> <span data-ttu-id="4e699-361">Yedekleme ve geri yükleme, ek olarak [SQL Server Always On kullanılabilirlik grupları](../../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) olağanüstü durum kurtarma süresini önemli ölçüde azaltan veritabanlarını ikincil çoğaltmaların koruyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4e699-361">In addition to backup and restore, [SQL Server Always On Availability Groups](../../virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr.md) can maintain secondary replicas of databases to greatly reduce the disaster recovery time.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="4e699-362">Diğer konular</span><span class="sxs-lookup"><span data-stu-id="4e699-362">Other considerations</span></span>

<span data-ttu-id="4e699-363">Bu makalede, nasıl yedekleme veya Vm'lerinizi ve bunların diskleri olağanüstü durum kurtarma desteği için anlık görüntülerini almak ve bu kurtarmak için nasıl kullanılacağını ele.</span><span class="sxs-lookup"><span data-stu-id="4e699-363">This article has discussed how to backup or take snapshots of your VMs and their disks to support disaster recovery, and how to use those to recover.</span></span> <span data-ttu-id="4e699-364">Azure Resource Manager modeli ile birçok kişi Azure'da Vm'leri ve diğer altyapıya oluşturmak için şablon kullanın.</span><span class="sxs-lookup"><span data-stu-id="4e699-364">With the Azure Resource Manager model, many people use templates to create their VMs and other infrastructure in Azure.</span></span> <span data-ttu-id="4e699-365">Her zaman aynı yapılandırmaya sahip bir VM oluşturmak için bir şablon kullanın.</span><span class="sxs-lookup"><span data-stu-id="4e699-365">You can use a template to create a VM that has the same configuration every time.</span></span> <span data-ttu-id="4e699-366">Vm'leriniz oluşturmak için özel resimler kullanırsanız, ayrıca bunları depolamak için bir RA-GRS hesabı kullanarak görüntülerinizi korumalı emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="4e699-366">If you use custom images for creating your VMs, you must also make sure your images are protected by using an RA-GRS account to store them.</span></span>

<span data-ttu-id="4e699-367">Sonuç olarak, yedekleme işlemi iki şey birleşimi olabilir:</span><span class="sxs-lookup"><span data-stu-id="4e699-367">Consequently, your backup process may be a combination of two things:</span></span>

1. <span data-ttu-id="4e699-368">Yedekleme verileri (diskler)</span><span class="sxs-lookup"><span data-stu-id="4e699-368">Backup the data (disks)</span></span>
2. <span data-ttu-id="4e699-369">Yapılandırma (şablonlar, özel resimler) yedekleme</span><span class="sxs-lookup"><span data-stu-id="4e699-369">Backup the configuration (templates, custom images)</span></span>

<span data-ttu-id="4e699-370">Seçtiğiniz yedekleme seçeneği bağlı olarak hem verileri hem de yapılandırma yedeğini işlemeye sahip olabilir veya yedekleme hizmeti tümünü sizin için işleyebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-370">Depending on the backup option you choose, you may have to handle the backup of both the data and the configuration, or the backup service may handle all of that for you.</span></span>

## <a name="appendix---understanding-the-impact-of-lrs-grs-and-ra-grs"></a><span data-ttu-id="4e699-371">Ek - LRS, GRS ve RA-GRS etkisini anlama</span><span class="sxs-lookup"><span data-stu-id="4e699-371">Appendix - Understanding the impact of LRS, GRS, and RA-GRS</span></span>

<span data-ttu-id="4e699-372">Azure depolama hesapları için olağanüstü durum kurtarma ile ilgili – yerel olarak yedekli (LRS), coğrafi olarak yedekli (GRS), göz önünde bulundurmalısınız veri artıklığı üç tür vardır veya coğrafi olarak yedekli ile okuma erişimi (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="4e699-372">For storage accounts in Azure, there are three types of data redundancy that you should consider regarding disaster recovery – locally redundant (LRS), geo-redundant (GRS), or geo-redundant with read access (RA-GRS).</span></span> 

<span data-ttu-id="4e699-373">Yerel olarak yedekli depolama (LRS) aynı veri merkezinde verilerin üç kopyasını tutar.</span><span class="sxs-lookup"><span data-stu-id="4e699-373">Locally Redundant Storage (LRS) retains three copies of the data in the same data center.</span></span> <span data-ttu-id="4e699-374">Aynı bilmesi başarı çağırana döndürülmeden önce verileri yazarken, tüm üç kopyaları güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-374">When writing the data, all three copies are updated before success is returned to the caller, so you know they are identical.</span></span> <span data-ttu-id="4e699-375">Tüm üç kopyalarını aynı anda etkilenen son derece düşüktür olduğundan diskinizin yerel hatalarından korunur.</span><span class="sxs-lookup"><span data-stu-id="4e699-375">Your disk is protected from local failures, since it is extremely unlikely that all three copies would be impacted at the same time.</span></span> <span data-ttu-id="4e699-376">LRS durumunda olmadığından hiçbir coğrafi yedeklilik, tüm veri merkezi veya depolama birimi etkileyebilir yıkıcı hatalarından disk korumalı değil.</span><span class="sxs-lookup"><span data-stu-id="4e699-376">In the case of LRS, there is no geo-redundancy, so the disk is not protected from catastrophic failures that can impact an entire data center or storage unit.</span></span>

<span data-ttu-id="4e699-377">GRS ve RA-GRS, verilerinizin üç kopyasını (sizin tarafınızdan seçili) birincil bölgede korunur ve verilerinizin üç ek kopya (Azure tarafından ayarlanır) karşılık gelen bir ikincil bölge korunur.</span><span class="sxs-lookup"><span data-stu-id="4e699-377">With GRS and RA-GRS, three copies of your data are retained in the primary region (selected by you), and three more copies of your data are retained in a corresponding secondary region (set by Azure).</span></span> <span data-ttu-id="4e699-378">Örneğin, Batı ABD veri depolarsanız, verileri Doğu ABD çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="4e699-378">For example, if you store data in West US, the data will be replicated to East US.</span></span> <span data-ttu-id="4e699-379">Bu zaman uyumsuz olarak yapılır ve güncelleştirmeler için birincil ve ikincil arasında kısa bir gecikme olur.</span><span class="sxs-lookup"><span data-stu-id="4e699-379">This is done asynchronously, and there is a small delay between updates to the primary and secondary.</span></span> <span data-ttu-id="4e699-380">İkincil site disklerde çoğaltmalarının (gecikmeyle) bir disk başına temelinde tutarlı ancak birden fazla etkin diskleri çoğaltmalarının eşitlenmiş olmayabilir **birbirleriyle**.</span><span class="sxs-lookup"><span data-stu-id="4e699-380">Replicas of the disks on the secondary site are consistent on a per-disk basis (with the delay), but replicas of multiple active disks may not be in sync **with each other**.</span></span> <span data-ttu-id="4e699-381">Birden çok diskte tutarlı çoğaltmaları için tutarlı anlık görüntüleri gereklidir.</span><span class="sxs-lookup"><span data-stu-id="4e699-381">To have consistent replicas across multiple disks, consistent snapshots are needed.</span></span>

<span data-ttu-id="4e699-382">GRS ve RA-GRS arasındaki temel fark, RA-GRS ile ikincil kopya herhangi bir zamanda okuyabildiğini ' dir.</span><span class="sxs-lookup"><span data-stu-id="4e699-382">The main difference between GRS and RA-GRS is that with RA-GRS, you can read the secondary copy at any time.</span></span> <span data-ttu-id="4e699-383">Birincil bölge verileri erişilemeyen işleyen bir sorun varsa, Azure ekibi erişimi geri yüklemek için tüm çabayı göstereceğiz.</span><span class="sxs-lookup"><span data-stu-id="4e699-383">If there is a problem that renders the data in the primary region inaccessible, the Azure team will make every effort to restore access.</span></span> <span data-ttu-id="4e699-384">Birincil çalışmadığında RA-GRS etkin varsa, ikincil veri merkezine verilerine erişebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-384">While the primary is down, if you have RA-GRS enabled, you can access the data in the secondary data center.</span></span> <span data-ttu-id="4e699-385">Birincil erişilemediği durumda çoğaltmasından okuma planlıyorsanız, bu nedenle, ardından RA-GRS dikkate alınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4e699-385">Therefore, if you plan to read from the replica while the primary is inaccessible, then RA-GRS should be considered.</span></span>

<span data-ttu-id="4e699-386">Önemli bir kesinti olmasını Öyle değilse Azure ekibi bir coğrafi yük devretme tetiklemek ve ikincil depolama birimine işaret edecek şekilde birincil DNS girdilerini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="4e699-386">If it turns out to be a significant outage, the Azure team may trigger a geo-failover and change the primary DNS entries to point to secondary storage.</span></span> <span data-ttu-id="4e699-387">Bu noktada, ya da GRS veya RA-GRS etkin varsa, ikincil kullanılan bölgede bulunan verilere erişebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-387">At this point, if you have either GRS or RA-GRS enabled, you can access the data in the region that used to be the secondary.</span></span> <span data-ttu-id="4e699-388">Diğer bir deyişle, GRS depolama hesabınız ise ve bir sorun olduğundan, yalnızca bir yük devretme coğrafi ise ikincil depolama erişebilir.</span><span class="sxs-lookup"><span data-stu-id="4e699-388">In other words, if your storage account is GRS and there is a problem, you can access the secondary storage only if there is a geo-failover.</span></span>

<span data-ttu-id="4e699-389">Daha fazla bilgi için bkz: [bir Azure Storage kesinti oluşursa yapmanız gerekenler](storage-disaster-recovery-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="4e699-389">For more information, see [What to do if an Azure Storage outage occurs](storage-disaster-recovery-guidance.md).</span></span> 

<span data-ttu-id="4e699-390">Microsoft bir yük devretme oluşup oluşmadığını denetimleri unutmayın.</span><span class="sxs-lookup"><span data-stu-id="4e699-390">Note that Microsoft controls whether a failover occurs.</span></span> <span data-ttu-id="4e699-391">Yük devretme depolama hesabı denetlenmeyen, bu nedenle, tekil müşteriler tarafından belirlenir değil.</span><span class="sxs-lookup"><span data-stu-id="4e699-391">Failover is not controlled per storage account, therefore it is not decided by individual customers.</span></span> <span data-ttu-id="4e699-392">Belirli bir depolama hesapları veya sanal makine disklerini için olağanüstü durum kurtarma uygulamak için bu makalede daha önce açıklanan teknikleri kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4e699-392">To implement Disaster Recovery for specific storage accounts or virtual machine disks, you must use the techniques described previously in this article.</span></span>
