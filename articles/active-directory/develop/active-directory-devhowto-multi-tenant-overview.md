---
title: "Herhangi bir Azure AD kullanıcı oturum bir uygulaması oluşturma | Microsoft Docs"
description: "Adım adım bir uygulama oluşturmaya yönelik yönergeler olarak da bilinen bir çok kiracılı uygulama tüm Azure Active Directory kiracısındaki bir kullanıcı olarak oturum açabilir."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: f1c79fa7e3b0e160487b5941741f6a6c677c6b81
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-sign-in-any-azure-active-directory-ad-user-using-the-multi-tenant-application-pattern"></a><span data-ttu-id="09aec-103">Çok kiracılı uygulama desenini kullanarak Azure Active Directory (AD) içinde herhangi bir kullanıcının imzalama</span><span class="sxs-lookup"><span data-stu-id="09aec-103">How to sign in any Azure Active Directory (AD) user using the multi-tenant application pattern</span></span>
<span data-ttu-id="09aec-104">Çoğu kuruluş için bir hizmet uygulaması olarak bir yazılım teklifi sunuyorsanız, uygulamanızın oturum açmalardan tüm Azure AD kiracısı kabul edecek şekilde yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-104">If you offer a Software as a Service application to many organizations, you can configure your application to accept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="09aec-105">Azure AD'de bu uygulama birden çok Kiracı yapmadan çağrılır.</span><span class="sxs-lookup"><span data-stu-id="09aec-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="09aec-106">Tüm Azure AD Kiracı kullanıcılar hesaplarına uygulamanızla birlikte kullanmak için onaylıyorsunuz sonra uygulamanıza oturum açabilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-106">Users in any Azure AD tenant will be able to sign in to your application after consenting to use their account with your application.</span></span>  

<span data-ttu-id="09aec-107">Kendi hesabı sistem veya diğer oturum açma diğer bulut sağlayıcılardan türünü destekler, var olan bir uygulamanız varsa, ekleme Azure AD oturum açma dikey basit bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="09aec-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="09aec-108">Yalnızca uygulamanızı kaydetme, oturum açma kodu OAuth2, Openıd Connect veya SAML aracılığıyla ekleyin ve "Sign In ile Microsoft" düğmesi, uygulamanızda yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="09aec-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="09aec-109">Uygulamanızı markalama hakkında daha fazla bilgi için aşağıdaki düğmeye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="09aec-109">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="09aec-110">[! [Düğmesini oturum] [AAD-oturum açma]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="09aec-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="09aec-111">Bu makale, zaten Azure AD için tek bir kiracı uygulama oluşturmaya tanıdık varsayar.</span><span class="sxs-lookup"><span data-stu-id="09aec-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="09aec-112">Siz değilseniz, head kadar geri [Geliştirici Kılavuzu giriş sayfası] [ AAD-Dev-Guide] ve bizim hızlı başlangıçlar birini deneyin!</span><span class="sxs-lookup"><span data-stu-id="09aec-112">If you’re not, head back up to the [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="09aec-113">Uygulamanızı Azure AD çoklu kiracı uygulamaya dönüştürmek için dört basit adım vardır:</span><span class="sxs-lookup"><span data-stu-id="09aec-113">There are four simple steps to convert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="09aec-114">Çoklu kiracı uygulama kaydınızı güncelleştir</span><span class="sxs-lookup"><span data-stu-id="09aec-114">Update your application registration to be multi-tenant</span></span>
2. <span data-ttu-id="09aec-115">/ Common için istekleri göndermek için kodunuzu güncelleştirin uç noktası</span><span class="sxs-lookup"><span data-stu-id="09aec-115">Update your code to send requests to the /common endpoint</span></span> 
3. <span data-ttu-id="09aec-116">Birden çok veren değerleri işlemek için kodunuzu güncelleştirin</span><span class="sxs-lookup"><span data-stu-id="09aec-116">Update your code to handle multiple issuer values</span></span>
4. <span data-ttu-id="09aec-117">Kullanıcı ve yönetici onayı anlamak ve uygun kodu değişiklikleri yapın</span><span class="sxs-lookup"><span data-stu-id="09aec-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="09aec-118">Her adım ayrıntılı bakalım.</span><span class="sxs-lookup"><span data-stu-id="09aec-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="09aec-119">Doğrudan atlayabilirsiniz [bu liste çok kiracılı örnekleri][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="09aec-119">You can also jump straight to [this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-to-be-multi-tenant"></a><span data-ttu-id="09aec-120">Çoklu kiracı güncelleştirme kaydı</span><span class="sxs-lookup"><span data-stu-id="09aec-120">Update registration to be multi-tenant</span></span>
<span data-ttu-id="09aec-121">Varsayılan olarak, tek bir kiracı web app/API kayıtlar Azure AD'de etkilenir.</span><span class="sxs-lookup"><span data-stu-id="09aec-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="09aec-122">Kaydınızı, uygulama kaydı Özellikler sayfasında "Çok kiralanan" anahtar bularak çok kiracılı yapabileceğiniz [Azure portal] [ AZURE-portal] ve "Evet" olarak ayarlayarak.</span><span class="sxs-lookup"><span data-stu-id="09aec-122">You can make your registration multi-tenant by finding the “Multi-Tenanted” switch on the properties page of your application registration in the [Azure portal][AZURE-portal] and setting it to “Yes”.</span></span>

<span data-ttu-id="09aec-123">Ayrıca unutmayın, çok kiracılı bir uygulama yapılabilmesi için önce Azure AD genel olarak benzersiz olması için uygulamanın uygulama kimliği URI'si gerektirir.</span><span class="sxs-lookup"><span data-stu-id="09aec-123">Also note, before an application can be made multi-tenant, Azure AD requires the App ID URI of the application to be globally unique.</span></span> <span data-ttu-id="09aec-124">Uygulama Kimliği URI'si uygulama protokolü iletilerinde tanımlanan yollardan biridir.</span><span class="sxs-lookup"><span data-stu-id="09aec-124">The App ID URI is one of the ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="09aec-125">Tek kiracılı uygulama için Kiracı içinde benzersiz olması uygulama kimliği URI'si için yeterli olur.</span><span class="sxs-lookup"><span data-stu-id="09aec-125">For a single tenant application, it is sufficient for the App ID URI to be unique within that tenant.</span></span>  <span data-ttu-id="09aec-126">Azure AD uygulama tüm kiracılar bulabilmek için çok kiracılı uygulama için genel olarak benzersiz olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="09aec-126">For a multi-tenant application, it must be globally unique so Azure AD can find the application across all tenants.</span></span>  <span data-ttu-id="09aec-127">Genel benzersizlik Azure AD kiracısı doğrulanmış bir etki alanı ile eşleşen bir ana bilgisayar adı uygulama kimliği URI'si gerektirerek zorlanır.</span><span class="sxs-lookup"><span data-stu-id="09aec-127">Global uniqueness is enforced by requiring the App ID URI to have a host name that matches a verified domain of the Azure AD tenant.</span></span>  <span data-ttu-id="09aec-128">Örneğin, contoso.onmicrosoft.com sonra geçerli bir kiracı adı ise, uygulama kimliği URI'si olması `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="09aec-128">For example, if the name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="09aec-129">Kiracı doğrulanmış bir etki alanı varsa `contoso.com`, geçerli bir uygulama kimliği URI'sini de sonra `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="09aec-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="09aec-130">Uygulama Kimliği URI'si bu deseni izlemenizi değil çok kiracılı bir uygulama ayarı başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="09aec-130">Setting an application as multi-tenant will fail if the App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="09aec-131">Yerel istemci kayıtları varsayılan olarak çok kiracılı.</span><span class="sxs-lookup"><span data-stu-id="09aec-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="09aec-132">Yerel yapmak için herhangi bir eylemde bulunmanız gerekmez istemci uygulama kayıt çok kiracılı.</span><span class="sxs-lookup"><span data-stu-id="09aec-132">You don’t need to take any action to make a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-to-send-requests-to-common"></a><span data-ttu-id="09aec-133">/ Common için istekleri göndermek için kodunuzu güncelleştirin</span><span class="sxs-lookup"><span data-stu-id="09aec-133">Update your code to send requests to /common</span></span>
<span data-ttu-id="09aec-134">Tek bir kiracı uygulamada oturum açma istekleri kiracının oturum açma uç noktasına gönderilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-134">In a single tenant application, sign-in requests are sent to the tenant’s sign-in endpoint.</span></span> <span data-ttu-id="09aec-135">Örneğin, contoso.onmicrosoft.com için uç nokta olacaktır:</span><span class="sxs-lookup"><span data-stu-id="09aec-135">For example, for contoso.onmicrosoft.com the endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="09aec-136">Bir kiracının uç noktasına gönderilen istekleri, Kiracı uygulamalara Kiracı, kullanıcılar (veya konuklar) kaydolabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-136">Requests sent to a tenant’s endpoint can sign in users (or guests) in that tenant to applications in that tenant.</span></span>  <span data-ttu-id="09aec-137">Çok kiracılı uygulama ile uygulamanın kullanıcı arasındadır hangi Kiracı Önden bilmiyor kiracının uç noktasına istek gönderemez.</span><span class="sxs-lookup"><span data-stu-id="09aec-137">With a multi-tenant application, the application doesn’t know up front what tenant the user is from, so you can’t send requests to a tenant’s endpoint.</span></span>  <span data-ttu-id="09aec-138">Bunun yerine, tüm Azure AD kiracılar arasında multiplexes bir uç nokta için istekleri gönderilir:</span><span class="sxs-lookup"><span data-stu-id="09aec-138">Instead, requests are sent to an endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="09aec-139">Ne zaman Azure AD alır / Common ağda bir istek uç noktası, kullanıcı oturum açtığında ve sonuç olarak, Kiracı Kullanıcı olduğunu bulur.</span><span class="sxs-lookup"><span data-stu-id="09aec-139">When Azure AD receives a request on the /common endpoint, it signs the user in and as a consequence discovers which tenant the user is from.</span></span>  <span data-ttu-id="09aec-140">/ Ortak uç nokta çalışır tüm Azure AD tarafından desteklenen kimlik doğrulama protokolleri: Openıd Connect, OAuth 2.0, SAML 2.0 ve WS-Federasyon.</span><span class="sxs-lookup"><span data-stu-id="09aec-140">The /common endpoint works with all of the authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="09aec-141">Uygulama oturum açma yanıtı kullanıcıyı temsil eden bir belirteci içeriyor.</span><span class="sxs-lookup"><span data-stu-id="09aec-141">The sign-in response to the application then contains a token representing the user.</span></span>  <span data-ttu-id="09aec-142">Belirteç veren değerinde bir uygulama kullanıcının arasındadır hangi Kiracı söyler.</span><span class="sxs-lookup"><span data-stu-id="09aec-142">The issuer value in the token tells an application what tenant the user is from.</span></span>  <span data-ttu-id="09aec-143">Bir yanıt / Common döndüğünde uç noktası, Belirteç Verenin değeri karşılık kullanıcının Kiracı.</span><span class="sxs-lookup"><span data-stu-id="09aec-143">When a response returns from the /common endpoint, the issuer value in the token will correspond to the user’s tenant.</span></span>  <span data-ttu-id="09aec-144">/ Common dikkate almak önemlidir uç noktası bir kiracı değil ve bir veren değil, yalnızca çoğaltıcı değildir.</span><span class="sxs-lookup"><span data-stu-id="09aec-144">It’s important to note the /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="09aec-145">/ Common kullanırken belirteçleri doğrulamak için uygulamanızın mantık bu dikkate güncelleştirilmesi gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="09aec-145">When using /common, the logic in your application to validate tokens needs to be updated to take this into account.</span></span> 

<span data-ttu-id="09aec-146">Daha önce belirtildiği gibi çok kiracılı uygulamalara yönergeleri markalama Azure AD uygulaması aşağıdaki kullanıcılar için tutarlı bir oturum açma deneyimi de sağlamalıdır.</span><span class="sxs-lookup"><span data-stu-id="09aec-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following the Azure AD application branding guidelines.</span></span> <span data-ttu-id="09aec-147">Uygulamanızı markalama hakkında daha fazla bilgi için aşağıdaki düğmeye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="09aec-147">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="09aec-148">[! [Düğmesini oturum] [AAD-oturum açma]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="09aec-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="09aec-149">/ Common kullanımını bir göz atalım uç noktası ve kod uygulamanızda daha ayrıntılı bilgi.</span><span class="sxs-lookup"><span data-stu-id="09aec-149">Let’s take a look at the use of the /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-to-handle-multiple-issuer-values"></a><span data-ttu-id="09aec-150">Birden çok veren değerleri işlemek için kodunuzu güncelleştirin</span><span class="sxs-lookup"><span data-stu-id="09aec-150">Update your code to handle multiple issuer values</span></span>
<span data-ttu-id="09aec-151">Web uygulamaları ve web API'leri alır ve Azure AD'den belirteçleri doğrulamak.</span><span class="sxs-lookup"><span data-stu-id="09aec-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="09aec-152">Yerel istemci uygulamaları istemek ve Azure AD'den belirteçleri almak olsa da, bunlar burada doğrulandığı API'leri için göndermek için bunu.</span><span class="sxs-lookup"><span data-stu-id="09aec-152">While native client applications request and receive tokens from Azure AD, they do so to send them to APIs, where they are validated.</span></span>  <span data-ttu-id="09aec-153">Yerel uygulama belirteçleri doğrulamaz ve bunları donuk olarak ele almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="09aec-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="09aec-154">Bakalım Uygulama belirteçleri nasıl doğrular Azure AD'den alır.</span><span class="sxs-lookup"><span data-stu-id="09aec-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="09aec-155">Tek kiracılı uygulama gibi bir uç nokta değeri normal olarak gösterecektir:</span><span class="sxs-lookup"><span data-stu-id="09aec-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="09aec-156">ve gibi meta veri URL'sini (Bu durumda, Openıd Connect) oluşturmak için kullanın:</span><span class="sxs-lookup"><span data-stu-id="09aec-156">and use it to construct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="09aec-157">belirteçleri doğrulamak için kullanılan iki kritik bilgi parçalarını yüklemek için: Kiracı anahtarları ve veren değeriyle imzalama.</span><span class="sxs-lookup"><span data-stu-id="09aec-157">to download two critical pieces of information that are used to validate tokens:  the tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="09aec-158">Her Azure AD kiracısı formun benzersiz veren değerine sahip:</span><span class="sxs-lookup"><span data-stu-id="09aec-158">Each Azure AD tenant has a unique issuer value of the form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="09aec-159">burada GUID değeri Kiracı Kiracı kimliği yeniden adlandırma uyumlu sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="09aec-159">where the GUID value is the rename-safe version of the tenant ID of the tenant.</span></span>  <span data-ttu-id="09aec-160">Önceki meta veri bağlantısını tıklatırsanız `contoso.onmicrosoft.com`, bu belgeyi verenin değerinde görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-160">If you click on the preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in the document.</span></span>

<span data-ttu-id="09aec-161">Tek kiracılı uygulama bir belirteci doğrular, meta veri belgesi İmzalama anahtarları karşı belirtecinin imzası denetler.</span><span class="sxs-lookup"><span data-stu-id="09aec-161">When a single tenant application validates a token, it checks the signature of the token against the signing keys from the metadata document.</span></span> <span data-ttu-id="09aec-162">Bu meta veri belgesinde bulunamadı bir belirteci veren değeriyle eşleştiğinden emin olmak için sağlar.</span><span class="sxs-lookup"><span data-stu-id="09aec-162">This allows it to make sure the issuer value in the token matches the one that was found in the metadata document.</span></span>

<span data-ttu-id="09aec-163">/ Common itibaren uç noktası için bir kiracı karşılık gelmiyor ve bir veren için meta verilerde veren değerini inceleyin / genel, gerçek değer yerine şablonlu bir URL'ye sahip değil:</span><span class="sxs-lookup"><span data-stu-id="09aec-163">Since the /common endpoint doesn’t correspond to a tenant and isn’t an issuer, when you examine the issuer value in the metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="09aec-164">Bu nedenle, çok kiracılı uygulama belirteçleri meta verileriyle veren değerinde eşleştirerek doğrulayamıyor `issuer` belirtecin değeri.</span><span class="sxs-lookup"><span data-stu-id="09aec-164">Therefore, a multi-tenant application can’t validate tokens just by matching the issuer value in the metadata with the `issuer` value in the token.</span></span>  <span data-ttu-id="09aec-165">Çok kiracılı uygulama mantığını hangi veren değerler geçerlidir ve hangi olan karar değil gerekir, Kiracı'veren değeriyle kimliği bölümünü göre.</span><span class="sxs-lookup"><span data-stu-id="09aec-165">A multi-tenant application needs logic to decide which issuer values are valid and which are not, based on the tenant ID portion of the issuer value.</span></span>  

<span data-ttu-id="09aec-166">Çok kiracılı uygulama yalnızca kendi hizmet için kaydolup, belirli kiracıdan oturum açma izin veriyorsa, örneğin, sonra veren değeri kullanıma gerekir veya `tid` talep değeri belirteçte o Kiracı kendi aboneleri listesinde olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="09aec-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either the issuer value or the `tid` claim value in the token to make sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="09aec-167">Çok kiracılı uygulama yalnızca kişiler ile ilgilenir ve kiracılar dayanarak hiçbir erişim kararları değil, ardından veren değeriyle tamamen yok sayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore the issuer value altogether.</span></span>

<span data-ttu-id="09aec-168">Çok kiracılı örneklerinde içinde [ilgili içerik](#related-content) veren doğrulama bu makalenin sonunda bölüm oturum açmak tüm Azure AD kiracısı etkinleştirmek için devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="09aec-168">In the multi-tenant samples in the [Related Content](#related-content) section at the end of this article, issuer validation is disabled to enable any Azure AD tenant to sign in.</span></span>

<span data-ttu-id="09aec-169">Artık çok kiracılı uygulamalara imzalama kullanıcılar için kullanıcı deneyimi bakalım.</span><span class="sxs-lookup"><span data-stu-id="09aec-169">Now let’s look at the user experience for users that are signing in to multi-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="09aec-170">Anlama kullanıcı ve yönetici onayı</span><span class="sxs-lookup"><span data-stu-id="09aec-170">Understanding user and admin consent</span></span>
<span data-ttu-id="09aec-171">Bir kullanıcı bir uygulamaya Azure AD'de oturum açmak kullanıcının kiracısında uygulama gösterilmelidir.</span><span class="sxs-lookup"><span data-stu-id="09aec-171">For a user to sign in to an application in Azure AD, the application must be represented in the user’s tenant.</span></span>  <span data-ttu-id="09aec-172">Bu uygulama için kendi Kiracı kullanıcılar oturum açtığında benzersiz ilkeleri uygulamak gibi şeyler için kuruluş sağlar.</span><span class="sxs-lookup"><span data-stu-id="09aec-172">This allows the organization to do things like apply unique policies when users from their tenant sign in to the application.</span></span>  <span data-ttu-id="09aec-173">Tek kiracılı uygulama için bu kayıt kolaydır; uygulamada kaydederken oluşan bir olan [Azure portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="09aec-173">For a single tenant application, this registration is simple; it’s the one that happens when you register the application in the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="09aec-174">Çok kiracılı uygulama için uygulama ilk kaydı geliştirici tarafından kullanılan Azure AD kiracısında yaşar.</span><span class="sxs-lookup"><span data-stu-id="09aec-174">For a multi-tenant application, the initial registration for the application lives in the Azure AD tenant used by the developer.</span></span>  <span data-ttu-id="09aec-175">Farklı bir kiracısındaki bir kullanıcı uygulama ilk kez oturum açtığında, Azure AD uygulama tarafından istenen izinler için izin ister.</span><span class="sxs-lookup"><span data-stu-id="09aec-175">When a user from a different tenant signs in to the application for the first time, Azure AD asks them to consent to the permissions requested by the application.</span></span>  <span data-ttu-id="09aec-176">Bunlar onayı sonra uygulama gösterimini adlı bir *hizmet sorumlusu* kullanıcının Kiracı içinde oluşturulur ve oturum açma işlemi devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-176">If they consent, then a representation of the application called a *service principal* is created in the user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="09aec-177">Bir temsilci ayrıca kullanıcının izni uygulamaya kayıtları dizinde oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="09aec-177">A delegation is also created in the directory that records the user’s consent to the application.</span></span> <span data-ttu-id="09aec-178">Bkz: [uygulama ve hizmet sorumlusu nesneleri] [ AAD-App-SP-Objects] uygulamanın uygulama ve ServicePrincipal nesneleri ve birbirleriyle nasıl ilişkili olduğunu hakkında ayrıntılı bilgi için.</span><span class="sxs-lookup"><span data-stu-id="09aec-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on the application's Application and ServicePrincipal objects, and how they relate to each other.</span></span>

![Tek katmanlı uygulama onayı][Consent-Single-Tier] 

<span data-ttu-id="09aec-180">Bu onayı deneyimi uygulama tarafından istendiğinde izinleri etkilenir.</span><span class="sxs-lookup"><span data-stu-id="09aec-180">This consent experience is affected by the permissions requested by the application.</span></span>  <span data-ttu-id="09aec-181">Azure AD, yalnızca uygulama ve temsilci izinleri iki tür destekler:</span><span class="sxs-lookup"><span data-stu-id="09aec-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="09aec-182">Bir alt nesnelerin interneti için oturum açmış olan kullanıcının kullanıcı görevi görür olanağı yapmak için bir uygulama bir temsilci izni verir.</span><span class="sxs-lookup"><span data-stu-id="09aec-182">A delegated permission grants an application the ability to act as a signed in user for a subset of the things the user can do.</span></span>  <span data-ttu-id="09aec-183">Örneğin, bir uygulama temsilcisi oturum açmış olan kullanıcının Takvim okuma izni verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-183">For example, you can grant an application the delegated permission to read the signed in user’s calendar.</span></span>
* <span data-ttu-id="09aec-184">Yalnızca uygulama izni doğrudan uygulama kimliği verilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-184">An app-only permission is granted directly to the identity of the application.</span></span>  <span data-ttu-id="09aec-185">Örneğin, bir uygulama kullanıcıların uygulamaya imzalanmış bakılmaksızın bir kiracıdaki listesini okuma yalnızca uygulama izni verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-185">For example, you can grant an application the app-only permission to read the list of users in a tenant, regardless of who is signed in to the application.</span></span>

<span data-ttu-id="09aec-186">Diğer bir kiracı yöneticisinin iznini gerektirirken bazı izinler için normal bir kullanıcı tarafından rıza.</span><span class="sxs-lookup"><span data-stu-id="09aec-186">Some permissions can be consented to by a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="09aec-187">Yönetici onayı</span><span class="sxs-lookup"><span data-stu-id="09aec-187">Admin consent</span></span>
<span data-ttu-id="09aec-188">Yalnızca uygulama izinleri her zaman bir kiracı yönetici izni gerektirir.</span><span class="sxs-lookup"><span data-stu-id="09aec-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="09aec-189">Uygulamanızı bir yalnızca uygulama izni ister ve uygulamada oturum açmak bir kullanıcı çalışırsa, kullanıcı onayı mümkün değil bildiren bir hata iletisi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="09aec-189">If your application requests an app-only permission and a user tries to sign in to the application, an error message will be displayed saying the user isn’t able to consent.</span></span>

<span data-ttu-id="09aec-190">Belirli izinlere temsilci, ayrıca bir kiracı yönetici izni gerektirir.</span><span class="sxs-lookup"><span data-stu-id="09aec-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="09aec-191">Örneğin, oturum açmış olan kullanıcının olarak Azure AD ile geri yazma özelliğini bir kiracı yönetici izni gerektirir.</span><span class="sxs-lookup"><span data-stu-id="09aec-191">For example, the ability to write back to Azure AD as the signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="09aec-192">Yönetici izni gerektiren bir temsilci izni isteklerini bir uygulamaya oturum açmak normal bir kullanıcı çalışırsa, yalnızca uygulama izinleri gibi uygulamanızı hata iletisi alırsınız.</span><span class="sxs-lookup"><span data-stu-id="09aec-192">Like app-only permissions, if an ordinary user tries to sign in to an application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="09aec-193">İzin gerektirip gerektirmediğini yönetici onayı kaynak yayımlanan geliştirici tarafından belirlenir ve kaynak belgelerinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-193">Whether or not a permission requires admin consent is determined by the developer that published the resource, and can be found in the documentation for the resource.</span></span>  <span data-ttu-id="09aec-194">Azure AD grafik API'si ve Microsoft Graph API için izinleri açıklayan konulara bağlantılar [ilgili içerik](#related-content) bu makalenin.</span><span class="sxs-lookup"><span data-stu-id="09aec-194">Links to topics describing the available permissions for the Azure AD Graph API and Microsoft Graph API are in the [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="09aec-195">Uygulamanızı yönetici izni gerektiren izinleri kullanıyorsa, yönetici eylemi burada başlatabilirsiniz düğmesini veya bağlantısını gibi hareket olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="09aec-195">If your application uses permissions that require admin consent, you need to have a gesture such as a button or link where the admin can initiate the action.</span></span>  <span data-ttu-id="09aec-196">Uygulamanızı gönderir normal bir OAuth2/Openıd Connect yetkilendirme isteği bu eylemi değildir ancak de içeren istek `prompt=admin_consent` sorgu dizesi parametresi.</span><span class="sxs-lookup"><span data-stu-id="09aec-196">The request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes the `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="09aec-197">Yönetici seçtiği ve hizmet sorumlusu müşterinin Kiracı oluşturulduktan sonra sonraki oturum açma istekleri gerekmeyen `prompt=admin_consent` parametresi.</span><span class="sxs-lookup"><span data-stu-id="09aec-197">Once the admin has consented and the service principal is created in the customer’s tenant, subsequent sign-in requests do not need the `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="09aec-198">Yönetici istenen izinleri kabul edilebilir olduğuna karar olduğundan, hiçbir diğer kullanıcılar Kiracı o noktadan izin istenir.</span><span class="sxs-lookup"><span data-stu-id="09aec-198">Since the administrator has decided the requested permissions are acceptable, no other users in the tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="09aec-199">`prompt=admin_consent` Parametresi da yönetici onayı gerektirmeyen izinleri gerektiren uygulamalar tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-199">The `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="09aec-200">Uygulama nerede Kiracı Yönetici "kaydolduğunda" bir zaman ve başka kullanıcılara izin o noktadan itibaren üzerinde sorulur bir deneyim gerektirdiğinde bu yapılır.</span><span class="sxs-lookup"><span data-stu-id="09aec-200">This is done when the applicaton requires an experience where the tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="09aec-201">Bir uygulama yönetici izni gerektirir ve bir yönetici oturum açtığında, ancak `prompt=admin_consent` parametresi gönderilmez, yönetici uygulamaya başarıyla onayı **yalnızca kullanıcı hesapları için**.</span><span class="sxs-lookup"><span data-stu-id="09aec-201">If an application requires admin consent, and an admin signs in but the `prompt=admin_consent` parameter is not sent, the admin will successfully consent to the application **only for their user account**.</span></span>  <span data-ttu-id="09aec-202">Normal kullanıcı hala oturum açın ve uygulamaya onayı mümkün olmaz.</span><span class="sxs-lookup"><span data-stu-id="09aec-202">Regular users will still not be able to sign in and consent to the application.</span></span>  <span data-ttu-id="09aec-203">Bu, Kiracı yönetici diğer kullanıcılar erişime izin vermeden önce uygulamanızın keşfedin vermek istiyorsanız yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="09aec-203">This is useful if you want to give the tenant administrator the ability to explore your application before allowing other users access.</span></span>

<span data-ttu-id="09aec-204">Kiracı Yöneticisi uygulamalara onayı normal kullanıcılara devre dışı bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-204">A tenant administrator can disable the ability for regular users to consent to applications.</span></span>  <span data-ttu-id="09aec-205">Bu özelliği devre dışıysa, yönetici onayı her zaman uygulamanın kiracısında kurulması gereklidir.</span><span class="sxs-lookup"><span data-stu-id="09aec-205">If this capability is disabled, admin consent is always required for the application to be set up in the tenant.</span></span>  <span data-ttu-id="09aec-206">Devre dışı normal kullanıcı izin ile uygulamanızı test etmek istiyorsanız, yapılandırma bölümünü yapılandırma anahtarı Azure AD kiracısı'nda bulabilirsiniz [Azure portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="09aec-206">If you want to test your application with regular user consent disabled, you can find the configuration switch in the Azure AD tenant configuration section of the [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="09aec-207">Bazı uygulamalar, nerede normal kullanıcıların başlangıçta onayı sağlayabilir ve daha sonra uygulama yönetici izni gerektiren yönetici ve istek izinleri içerebileceği bir deneyim istiyor.</span><span class="sxs-lookup"><span data-stu-id="09aec-207">Some applications want an experience where regular users are able to consent initially, and later the application can involve the administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="09aec-208">Bugün Azure AD içinde tek bir uygulama kaydı ile bunun için hiçbir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="09aec-208">There is no way to do this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="09aec-209">Yakında Azure AD v2 endpoint izni verdiği uygulamalar çalışma zamanında izinleri istemek için yerine bu senaryo etkinleştirecek kayıt anda.</span><span class="sxs-lookup"><span data-stu-id="09aec-209">The upcoming Azure AD v2 endpoint will allow applications to request permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="09aec-210">Daha fazla bilgi için bkz: [Azure AD uygulama modeli v2 Geliştirici Kılavuzu][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="09aec-210">For more information, see the [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="09aec-211">İzin ve çok katmanlı uygulamalar</span><span class="sxs-lookup"><span data-stu-id="09aec-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="09aec-212">Uygulamanız birden çok katman olabilir, her kendi kayıt tarafından Azure AD'de temsil.</span><span class="sxs-lookup"><span data-stu-id="09aec-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="09aec-213">Örneğin, bir web API çağrılarının yerel bir uygulama veya bir web uygulaması, web API çağırır.</span><span class="sxs-lookup"><span data-stu-id="09aec-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="09aec-214">Her iki durumda, istemci (yerel uygulama veya web uygulaması) (web API) kaynak çağrısına izin ister.</span><span class="sxs-lookup"><span data-stu-id="09aec-214">In both of these cases, the client (native app or web app) requests permissions to call the resource (web API).</span></span>  <span data-ttu-id="09aec-215">İstemcinin bir müşterinin Kiracı başarıyla rıza için tüm kaynaklar için izinleri isteyen Müşteri'nin kiracısında önceden var olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="09aec-215">For the client to be successfully consented into a customer’s tenant, all resources to which it requests permissions must already exist in the customer’s tenant.</span></span>  <span data-ttu-id="09aec-216">Bu koşul değil, Azure AD kaynağı ilk eklenmelidir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="09aec-216">If this condition isn’t met, Azure AD will return an error that the resource must be added first.</span></span>

<span data-ttu-id="09aec-217">**Tek bir kiracı içinde birden çok katmanları**</span><span class="sxs-lookup"><span data-stu-id="09aec-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="09aec-218">Mantıksal uygulamanızı iki veya daha fazla uygulama kayıtları, örneğin ayrı istemci ve kaynak oluşuyorsa bu bir sorun olabilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="09aec-219">Nasıl kaynak müşteri Kiracı ilk alıyorsunuz?</span><span class="sxs-lookup"><span data-stu-id="09aec-219">How do you get the resource into the customer tenant first?</span></span>  <span data-ttu-id="09aec-220">Azure AD bu durumda, istemci ve kaynak tek bir adımda rıza etkinleştirerek ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="09aec-220">Azure AD covers this case by enabling client and resource to be consented in a single step.</span></span> <span data-ttu-id="09aec-221">Kullanıcı, hem istemci hem de kaynak onay sayfasında tarafından talep edilen izinler Toplamı toplam görür.</span><span class="sxs-lookup"><span data-stu-id="09aec-221">The user sees the sum total of the permissions requested by both the client and resource on the consent page.</span></span>  <span data-ttu-id="09aec-222">Bu davranışı etkinleştirmek için kaynağın uygulama kaydı istemcinin uygulama kimliği olarak içermelidir bir `knownClientApplications` kendi uygulama bildiriminde.</span><span class="sxs-lookup"><span data-stu-id="09aec-222">To enable this behavior, the resource’s application registration must include the client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="09aec-223">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="09aec-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="09aec-224">Bu özellik aracılığıyla kaynağa güncelleştirilebilir [uygulama bildirimi][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="09aec-224">This property can be updated via the resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="09aec-225">Bu web API'si örneğinin arayan bir çok katmanlı Yerel İstemcisi'nde gösterilen [ilgili içerik](#related-content) bu makalenin sonunda bölüm.</span><span class="sxs-lookup"><span data-stu-id="09aec-225">This is demonstrated in a multi-tier native client calling web API sample in the [Related Content](#related-content) section at the end of this article.</span></span> <span data-ttu-id="09aec-226">Aşağıdaki diyagramda, tek bir kiracı kayıtlı çok katmanlı bir uygulama için izin genel bir bakış sağlar:</span><span class="sxs-lookup"><span data-stu-id="09aec-226">The following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Çok katmanlı bilinen istemci uygulamaları için onayı][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="09aec-228">**Birden çok Kiracı içinde birden çok katmanları**</span><span class="sxs-lookup"><span data-stu-id="09aec-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="09aec-229">Bir uygulamanın farklı katmanlara farklı kiracılar kayıtlı benzer bir durumda olur.</span><span class="sxs-lookup"><span data-stu-id="09aec-229">A similar case happens if the different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="09aec-230">Örneğin, Office 365 Exchange Online API çağrılarının yerel istemci uygulaması oluşturmanın bir durum düşünün.</span><span class="sxs-lookup"><span data-stu-id="09aec-230">For example, consider the case of building a native client application that calls the Office 365 Exchange Online API.</span></span>  <span data-ttu-id="09aec-231">Uygulama ve daha sonraki bir müşterinin Kiracı içinde çalıştırmak yerel uygulama için yerel geliştirmek için Exchange Online hizmet sorumlusu mevcut olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="09aec-231">To develop the native application, and later for the native application to run in a customer’s tenant, the Exchange Online service principal must be present.</span></span>  <span data-ttu-id="09aec-232">Bu durumda, müşteri ve geliştirici Exchange Online kiracıları içinde oluşturulacak asıl hizmeti satın almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="09aec-232">In this case, the developer and customer must purchase Exchange Online for the service principal to be created in their tenants.</span></span>  

<span data-ttu-id="09aec-233">Microsoft dışındaki bir kuruluş tarafından oluşturulan bir API söz konusu olduğunda, müşterilerin kiracılar uygulamasına kabul müşterileri için bir yol sağlamak üzere API Geliştirici gerekir.</span><span class="sxs-lookup"><span data-stu-id="09aec-233">In the case of an API built by an organization other than Microsoft, the developer of the API needs to provide a way for their customers to consent the application into their customers' tenants.</span></span> <span data-ttu-id="09aec-234">Kaydolma uygulamak için bir web istemcisi olarak çalışabilir, API oluşturmak 3 taraf geliştirici için önerilen tasarımdır bakın:</span><span class="sxs-lookup"><span data-stu-id="09aec-234">The recommended design is for the 3rd party developer to build the API such that it can also function as a web client to implement sign-up :</span></span>

1. <span data-ttu-id="09aec-235">Çok kiracılı uygulama kaydı/kodu gereksinimleri API'yi uygulayan emin olmak için önceki bölümlerde izleyin</span><span class="sxs-lookup"><span data-stu-id="09aec-235">Follow the earlier sections to ensure the API implements the multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="09aec-236">API kapsamları/rolleri gösterme ek olarak, kayıt içerdiğinden emin olun "oturum açmak ve kullanıcı profilini okuma" (varsayılan olarak sağlanır) Azure AD izni</span><span class="sxs-lookup"><span data-stu-id="09aec-236">In addition to exposing the API's scopes/roles, ensure the registration includes the "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="09aec-237">Aşağıdaki web istemcisinde bir oturum-açma/kaydolma sayfası uygulamak [yönetici onayı](#admin-consent) Kılavuzu daha önce ele alınan</span><span class="sxs-lookup"><span data-stu-id="09aec-237">Implement a sign-in/sign-up page in the web client, following the [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="09aec-238">Kullanıcı uygulamaya izin sonra hizmet asıl ve onay temsilci bağlantılar kendi Kiracı içinde oluşturulur ve yerel uygulama için API belirteç alabilir</span><span class="sxs-lookup"><span data-stu-id="09aec-238">Once the user consents to the application, the service principal and consent delegation links are created in their tenant, and the native application can get tokens for the API</span></span>

<span data-ttu-id="09aec-239">Aşağıdaki diyagramda, farklı kiracılar kayıtlı çok katmanlı bir uygulama için izin genel bir bakış sağlar:</span><span class="sxs-lookup"><span data-stu-id="09aec-239">The following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Çok katmanlı çok kişili uygulama onayı][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="09aec-241">İzni iptal etme</span><span class="sxs-lookup"><span data-stu-id="09aec-241">Revoking Consent</span></span>
<span data-ttu-id="09aec-242">Kullanıcıların ve yöneticilerin izin uygulamanıza herhangi bir zamanda iptal edebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="09aec-242">Users and administrators can revoke consent to your application at any time:</span></span>

* <span data-ttu-id="09aec-243">Kullanıcıların erişimi iptal et tek tek uygulamalar için bunları kaldırarak kendi [erişim paneli uygulamaları] [ AAD-Access-Panel] listesi.</span><span class="sxs-lookup"><span data-stu-id="09aec-243">Users revoke access to individual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="09aec-244">Yöneticiler, Azure AD Yönetimi bölümünü kullanarak Azure AD'den kaldırarak uygulamalara erişimi iptal etme [Azure portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="09aec-244">Administrators revoke access to applications by removing them from Azure AD using the Azure AD management section of the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="09aec-245">Bir uygulamaya bir kiracıdaki tüm kullanıcılar için bir yönetici izin verirse, kullanıcılar tek tek erişim iptal edilemez.</span><span class="sxs-lookup"><span data-stu-id="09aec-245">If an administrator consents to an application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="09aec-246">Yönetici erişimi iptal edebilirsiniz yalnızca ve yalnızca tüm uygulama için.</span><span class="sxs-lookup"><span data-stu-id="09aec-246">Only the administrator can revoke access, and only for the whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="09aec-247">İzin ve protokol desteği</span><span class="sxs-lookup"><span data-stu-id="09aec-247">Consent and Protocol Support</span></span>
<span data-ttu-id="09aec-248">Onay, Openıd Connect, OAuth aracılığıyla Azure AD'de desteklenir WS-Federation ve SAML protokoller.</span><span class="sxs-lookup"><span data-stu-id="09aec-248">Consent is supported in Azure AD via the OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="09aec-249">SAML ve WS-Federasyon protokollerini desteklemeyen `prompt=admin_consent` yönetici izni yalnızca OAuth ve Openıd Connect aracılığıyla mümkün olması için parametre.</span><span class="sxs-lookup"><span data-stu-id="09aec-249">The SAML and WS-Federation protocols do not support the `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="09aec-250">Çok Kiracılı uygulamalara ve erişim belirteçleri önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="09aec-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="09aec-251">Çok kiracılı uygulamalara da Azure AD tarafından korunan API'leri çağırmak için erişim belirteçleri elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-251">Multi-tenant applications can also get access tokens to call APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="09aec-252">Active Directory Authentication Library (ADAL) çok kiracılı uygulama ile kullanırken yaygın görülen bir hata başlangıçta/Common kullanarak bir kullanıcı için bir belirteç isteği, bir yanıt almak için sonra da/Common kullanarak, aynı kullanıcı için bir sonraki belirteç isteği.</span><span class="sxs-lookup"><span data-stu-id="09aec-252">A common error when using the Active Directory Authentication Library (ADAL) with a multi-tenant application, is to initially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="09aec-253">Azure AD yanıttan bir kiracıdan gelen değil/yaygın ADAL olarak kiracısından belirteç önbelleğe beri.</span><span class="sxs-lookup"><span data-stu-id="09aec-253">Since the response from Azure AD comes from a tenant, not /common, ADAL caches the token as being from the tenant.</span></span> <span data-ttu-id="09aec-254">Kullanıcı için erişim belirteci almak için/Common sonraki çağrı önbellek girişi isabetsiz okuma ve kullanıcı yeniden oturum açmanız istenir.</span><span class="sxs-lookup"><span data-stu-id="09aec-254">The subsequent call to /common to get an access token for the user misses the cache entry, and the user is prompted to sign in again.</span></span>  <span data-ttu-id="09aec-255">Önbellek eksik önlemek için zaten oturum açmış olan kullanıcı için sonraki çağrılar kiracının uç noktasına yapıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="09aec-255">To avoid missing the cache, make sure subsequent calls for an already signed in user are made to the tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="09aec-256">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="09aec-256">Next steps</span></span>
<span data-ttu-id="09aec-257">Bu makalede, Azure Active Directory kiracısındaki bir kullanıcı olarak oturum bir uygulama oluşturmak nasıl öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-257">In this article, you learned how to build an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="09aec-258">Çoklu oturum açma uygulama ve Azure Active Directory arasında etkinleştirdikten sonra Office 365 gibi Microsoft kaynakları tarafından sunulan API'lere erişim uygulamanıza da güncelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="09aec-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application to access APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="09aec-259">Bu nedenle örneğin kullanıcılara kendi profil resmi veya kendi sonraki takvim randevu gibi bağlamsal bilgi gösteren kişiselleştirilmiş bir deneyim, uygulamanızda sunabilir.</span><span class="sxs-lookup"><span data-stu-id="09aec-259">So you can offer a personalized experience in your application, for example showing contextual information to the users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="09aec-260">Exchange, SharePoint, OneDrive, OneNote, Planlayıcısı, Excel ve daha fazlası gibi Azure Active Directory ve Office 365 hizmetlerine API çağrıları yapma hakkında daha fazla bilgi edinmek için şurayı ziyaret edin: [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="09aec-260">To learn more about making API calls to Azure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="09aec-261">İlgili içerik</span><span class="sxs-lookup"><span data-stu-id="09aec-261">Related content</span></span>
* <span data-ttu-id="09aec-262">[Çok kiracılı uygulama örnekleri][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="09aec-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="09aec-263">[Uygulamalar için markalama talimatları][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="09aec-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="09aec-264">[Azure AD Geliştirici Kılavuzu][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="09aec-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="09aec-265">[Uygulama nesneleri ve hizmet sorumlusu nesneleri][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="09aec-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="09aec-266">[Uygulamaları Azure Active Directory ile tümleştirme][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="09aec-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="09aec-267">[Onay Framework'e Genel Bakış][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="09aec-267">[Overview of the Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="09aec-268">[Microsoft Graph API'si izin kapsamları][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="09aec-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="09aec-269">[Azure AD grafik API'si izin kapsamları][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="09aec-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="09aec-270">Lütfen aşağıdaki Açıklamalar bölümüne geri bildirim sağlamak ve iyileştirmek ve içeriği şekil yardımcı olmak için kullanın.</span><span class="sxs-lookup"><span data-stu-id="09aec-270">Please use the following comments section to provide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














