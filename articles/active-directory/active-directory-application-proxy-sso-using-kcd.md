---
title: "aaaSingle oturum açma uygulama proxy'si ile | Microsoft Docs"
description: "Nasıl tooprovide çoklu oturum Azure AD uygulama proxy'si kullanarak açma kapsar."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: ded0d9c9-45f6-47d7-bd0f-3f7fd99ab621
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017, it-pro
ms.openlocfilehash: 0047e834cd42e057a75ebc0c5dcf860734464a05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="kerberos-constrained-delegation-for-single-sign-on-tooyour-apps-with-application-proxy"></a><span data-ttu-id="b8bd4-103">Kerberos Kısıtlı temsilci tek oturum açma tooyour uygulamalar için uygulama proxy'si ile uygulama</span><span class="sxs-lookup"><span data-stu-id="b8bd4-103">Kerberos Constrained Delegation for single sign-on tooyour apps with Application Proxy</span></span>

<span data-ttu-id="b8bd4-104">Şirket içi için çoklu oturum açma sağlayabilir yayımlanan uygulamaları aracılığıyla uygulama proxy'si tümleşik Windows kimlik doğrulaması ile güvenli hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-104">You can provide single sign-on for on-premises applications published through Application Proxy that are secured with Integrated Windows Authentication.</span></span> <span data-ttu-id="b8bd4-105">Bu uygulama için erişim bir Kerberos anahtarı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-105">These applications require a Kerberos ticket for access.</span></span> <span data-ttu-id="b8bd4-106">Uygulama proxy'si Kerberos Kısıtlı temsilci (KCD) toosupport bu uygulamaları kullanır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-106">Application Proxy uses Kerberos Constrained Delegation (KCD) toosupport these applications.</span></span> 

<span data-ttu-id="b8bd4-107">Active Directory tooimpersonate kullanıcıları uygulama proxy'si bağlayıcılar izin vererek tümleşik Windows kimlik doğrulaması (IWA) kullanarak oturum açma tek tooyour uygulamaları etkinleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-107">You can enable single sign-on tooyour applications using Integrated Windows Authentication (IWA) by giving Application Proxy connectors permission in Active Directory tooimpersonate users.</span></span> <span data-ttu-id="b8bd4-108">Merhaba bağlayıcılar şirket adına belirteçleri almak ve bu izni toosend kullanın.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-108">hello connectors use this permission toosend and receive tokens on their behalf.</span></span>

## <a name="how-single-sign-on-with-kcd-works"></a><span data-ttu-id="b8bd4-109">KCD works ile nasıl çoklu oturum açma</span><span class="sxs-lookup"><span data-stu-id="b8bd4-109">How single sign-on with KCD works</span></span>
<span data-ttu-id="b8bd4-110">Bir kullanıcı tooaccess IWA kullanan bir şirket içi uygulama çalıştığında bu diyagramda hello akışı açıklanır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-110">This diagram explains hello flow when a user attempts tooaccess an on-prem application that uses IWA.</span></span>

![Microsoft AAD kimlik doğrulaması akışı diyagramı](./media/active-directory-application-proxy-sso-using-kcd/AuthDiagram.png)

1. <span data-ttu-id="b8bd4-112">Merhaba kullanıcı uygulama proxy'si aracılığıyla hello URL tooaccess hello şirket içi uygulama girer.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-112">hello user enters hello URL tooaccess hello on-prem application through Application Proxy.</span></span>
2. <span data-ttu-id="b8bd4-113">Uygulama proxy'si hello isteği tooAzure AD kimlik doğrulama hizmetleri toopreauthenticate yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-113">Application Proxy redirects hello request tooAzure AD authentication services toopreauthenticate.</span></span> <span data-ttu-id="b8bd4-114">Bu noktada, tüm geçerli kimlik doğrulama ve yetkilendirme ilkeleri, çok faktörlü kimlik doğrulaması gibi Azure AD geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-114">At this point, Azure AD applies any applicable authentication and authorization policies, such as multifactor authentication.</span></span> <span data-ttu-id="b8bd4-115">Merhaba kullanıcı doğrulanırsa, Azure AD bir belirteç oluşturur ve toohello kullanıcı gönderir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-115">If hello user is validated, Azure AD creates a token and sends it toohello user.</span></span>
3. <span data-ttu-id="b8bd4-116">Merhaba kullanıcı hello belirteci tooApplication Proxy geçirir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-116">hello user passes hello token tooApplication Proxy.</span></span>
4. <span data-ttu-id="b8bd4-117">Uygulama proxy'si hello belirteci doğrular ve kullanıcı asıl adı (UPN) ondan alır hello ve sonra gönderir isteği Merhaba, UPN hello ve dually kimliği doğrulanmış olarak güvenli bir kanal üzerinden hizmet asıl adı (SPN) toohello bağlayıcı hello.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-117">Application Proxy validates hello token and retrieves hello User Principal Name (UPN) from it, and then sends hello request, hello UPN, and hello Service Principal Name (SPN) toohello Connector through a dually authenticated secure channel.</span></span>
5. <span data-ttu-id="b8bd4-118">Merhaba bağlayıcı hello şirket içi Kerberos Kısıtlı temsilci (KCD) anlaşmasını gerçekleştirir hello kullanıcı tooget Kerberos belirteci toohello uygulama kimliğine bürünmek AD.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-118">hello Connector performs Kerberos Constrained Delegation (KCD) negotiation with hello on-prem AD, impersonating hello user tooget a Kerberos token toohello application.</span></span>
6. <span data-ttu-id="b8bd4-119">Active Directory hello uygulama toohello bağlayıcı için hello Kerberos belirteci gönderir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-119">Active Directory sends hello Kerberos token for hello application toohello Connector.</span></span>
7. <span data-ttu-id="b8bd4-120">Merhaba bağlayıcı AD'den alınan hello Kerberos belirteci kullanarak hello özgün istek toohello uygulama sunucusu, gönderir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-120">hello Connector sends hello original request toohello application server, using hello Kerberos token it received from AD.</span></span>
8. <span data-ttu-id="b8bd4-121">Merhaba uygulaması hello yanıt toohello toohello uygulama proxy'si hizmeti ve son olarak toohello kullanıcı daha sonra döndürülen bağlayıcı gönderir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-121">hello application sends hello response toohello Connector, which is then returned toohello Application Proxy service and finally toohello user.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b8bd4-122">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="b8bd4-122">Prerequisites</span></span>
<span data-ttu-id="b8bd4-123">IWA uygulamalar için çoklu oturum açmayı ile çalışmaya başlamadan önce ortamınız ile Merhaba hazır olduğundan emin olun ayarları ve yapılandırmaları aşağıdaki:</span><span class="sxs-lookup"><span data-stu-id="b8bd4-123">Before you get started with single sign-on for IWA applications, make sure your environment is ready with hello following settings and configurations:</span></span>

* <span data-ttu-id="b8bd4-124">SharePoint Web uygulamaları gibi uygulamalarınızın toouse ayarlanan tümleşik Windows kimlik doğrulaması.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-124">Your apps, like SharePoint Web apps, are set toouse Integrated Windows Authentication.</span></span> <span data-ttu-id="b8bd4-125">Daha fazla bilgi için bkz: [Kerberos kimlik doğrulaması için desteği etkinleştirme](https://technet.microsoft.com/library/dd759186.aspx), veya SharePoint bakın [Plan SharePoint 2013'te Kerberos kimlik doğrulaması için](https://technet.microsoft.com/library/ee806870.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-125">For more information, see [Enable Support for Kerberos Authentication](https://technet.microsoft.com/library/dd759186.aspx), or for SharePoint see [Plan for Kerberos authentication in SharePoint 2013](https://technet.microsoft.com/library/ee806870.aspx).</span></span>
* <span data-ttu-id="b8bd4-126">Tüm uygulamaların [hizmet asıl adları](https://social.technet.microsoft.com/wiki/contents/articles/717.service-principal-names-spns-setspn-syntax-setspn-exe.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-126">All your apps have [Service Principal Names](https://social.technet.microsoft.com/wiki/contents/articles/717.service-principal-names-spns-setspn-syntax-setspn-exe.aspx).</span></span>
* <span data-ttu-id="b8bd4-127">Merhaba server çalışan hello bağlayıcı ve hello uygulama çalıştıran hello sunucusu olduğundan etki alanına katılmış ve hello parçası aynı etki alanında veya güvenilen etki alanları.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-127">hello server running hello Connector and hello server running hello app are domain joined and part of hello same domain or trusting domains.</span></span> <span data-ttu-id="b8bd4-128">Etki alanına katılma ile ilgili daha fazla bilgi için bkz: [bilgisayar tooa etki alanına katılma](https://technet.microsoft.com/library/dd807102.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-128">For more information on domain join, see [Join a Computer tooa Domain](https://technet.microsoft.com/library/dd807102.aspx).</span></span>
* <span data-ttu-id="b8bd4-129">hello sunucu Hello Bağlayıcısı çalıştıran kullanıcılar için erişim tooread hello TokenGroupsGlobalAndUniversal özniteliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-129">hello server running hello Connector has access tooread hello TokenGroupsGlobalAndUniversal attribute for users.</span></span> <span data-ttu-id="b8bd4-130">Bu varsayılan ayarı tarafından güvenlik hello ortamı artırma etkilenmiş.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-130">This default setting might have been impacted by security hardening hello environment.</span></span>

### <a name="configure-active-directory"></a><span data-ttu-id="b8bd4-131">Active Directory'yi yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b8bd4-131">Configure Active Directory</span></span>
<span data-ttu-id="b8bd4-132">Hello Active Directory yapılandırması değişir, mı hello uygulama sunucusu ve uygulama ara sunucusu Bağlayıcısı olarak mı bağlı olarak hello aynı etki alanında veya değil.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-132">hello Active Directory configuration varies, depending on whether your Application Proxy connector and hello application server are in hello same domain or not.</span></span>

#### <a name="connector-and-application-server-in-hello-same-domain"></a><span data-ttu-id="b8bd4-133">Bağlayıcı ve uygulama sunucusu Merhaba, aynı etki alanında</span><span class="sxs-lookup"><span data-stu-id="b8bd4-133">Connector and application server in hello same domain</span></span>
1. <span data-ttu-id="b8bd4-134">Active Directory'de çok Git**Araçları** > **kullanıcıları ve Bilgisayarları**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-134">In Active Directory, go too**Tools** > **Users and Computers**.</span></span>
2. <span data-ttu-id="b8bd4-135">Merhaba bağlayıcısını çalıştıran hello sunucuyu seçin.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-135">Select hello server running hello connector.</span></span>
3. <span data-ttu-id="b8bd4-136">Sağ tıklatıp **özellikleri** > **temsilci**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-136">Right-click and select **Properties** > **Delegation**.</span></span>
4. <span data-ttu-id="b8bd4-137">Seçin **bu bilgisayara yalnızca temsilci toospecified Hizmetleri için güven**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-137">Select **Trust this computer for delegation toospecified services only**.</span></span> 
5. <span data-ttu-id="b8bd4-138">Altında **Hizmetleri toowhich bu hesap atanmış kimlik bilgileri sunabileceği** hello SPN hello uygulama sunucusunun kimliğini hello değerini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-138">Under **Services toowhich this account can present delegated credentials** add hello value for hello SPN identity of hello application server.</span></span> <span data-ttu-id="b8bd4-139">Bu hello uygulama Proxy Bağlayıcısı tooimpersonate kullanıcıların AD içinde hello listesinde tanımlı hello uygulamaları karşı sağlar.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-139">This enables hello Application Proxy Connector tooimpersonate users in AD against hello applications defined in hello list.</span></span>

   ![Bağlayıcı SVR özellikleri penceresinin ekran görüntüsü](./media/active-directory-application-proxy-sso-using-kcd/Properties.jpg)

#### <a name="connector-and-application-server-in-different-domains"></a><span data-ttu-id="b8bd4-141">Bağlayıcı ve uygulama sunucusu farklı etki alanlarında</span><span class="sxs-lookup"><span data-stu-id="b8bd4-141">Connector and application server in different domains</span></span>
1. <span data-ttu-id="b8bd4-142">KDC ile çalışma alanlarında önkoşullarının listesi için bkz: [alanlarında Kerberos Kısıtlı temsilci](https://technet.microsoft.com/library/hh831477.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-142">For a list of prerequisites for working with KCD across domains, see [Kerberos Constrained Delegation across domains](https://technet.microsoft.com/library/hh831477.aspx).</span></span>
2. <span data-ttu-id="b8bd4-143">Kullanım hello `principalsallowedtodelegateto` hello bağlayıcı sunucusu tooenable hello uygulama proxy'si toodelegate hello bağlayıcı sunucusu özelliği.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-143">Use hello `principalsallowedtodelegateto` property on hello Connector server tooenable hello Application Proxy toodelegate for hello Connector server.</span></span> <span data-ttu-id="b8bd4-144">Merhaba uygulama sunucusu `sharepointserviceaccount` ve sunucu için temsilci seçme hello `connectormachineaccount`.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-144">hello application server is `sharepointserviceaccount` and hello delegating server is `connectormachineaccount`.</span></span> <span data-ttu-id="b8bd4-145">Windows 2012 R2 için bir örnek olarak bu kodu kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="b8bd4-145">For Windows 2012 R2, use this code as an example:</span></span>

        $connector= Get-ADComputer -Identity connectormachineaccount -server dc.connectordomain.com

        Set-ADComputer -Identity sharepointserviceaccount -PrincipalsAllowedToDelegateToAccount $connector

        Get-ADComputer sharepointserviceaccount -Properties PrincipalsAllowedToDelegateToAccount

<span data-ttu-id="b8bd4-146">Sharepointserviceaccount hello SP'ler makine hesabı veya uygulama havuzu Hangi hello SP'ler altında çalışan bir hizmet hesabı olabilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-146">Sharepointserviceaccount can be hello SPS machine account or a service account under which hello SPS app pool is running.</span></span>

## <a name="configure-single-sign-on"></a><span data-ttu-id="b8bd4-147">Çoklu oturum açmayı yapılandırın</span><span class="sxs-lookup"><span data-stu-id="b8bd4-147">Configure single sign-on</span></span> 
1. <span data-ttu-id="b8bd4-148">Açıklanan toohello yönergeleri göre uygulamanızı yayımlamak [uygulama proxy'si ile uygulama yayımlama](application-proxy-publish-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-148">Publish your application according toohello instructions described in [Publish applications with Application Proxy](application-proxy-publish-azure-portal.md).</span></span> <span data-ttu-id="b8bd4-149">Emin tooselect olun **Azure Active Directory** hello olarak **ön kimlik doğrulama yöntemi**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-149">Make sure tooselect **Azure Active Directory** as hello **Preauthentication Method**.</span></span>
2. <span data-ttu-id="b8bd4-150">Uygulamanızı hello kurumsal uygulamalar listesinde göründükten sonra onu seçin ve tıklatın **çoklu oturum açma**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-150">After your application appears in hello list of enterprise applications, select it and click **Single sign-on**.</span></span>
3. <span data-ttu-id="b8bd4-151">Oturum açma Hello tek mod çok ayarlamak**tümleşik Windows kimlik doğrulaması**.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-151">Set hello single sign-on mode too**Integrated Windows Authentication**.</span></span>  
4. <span data-ttu-id="b8bd4-152">Merhaba girin **iç uygulama SPN** hello uygulama sunucusu.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-152">Enter hello **Internal Application SPN** of hello application server.</span></span> <span data-ttu-id="b8bd4-153">Bu örnekte, yayımlanan uygulamamız için SPN hello http/www.contoso.com ' dir. Bu SPN gereksinimlerini toobe Hizmetleri toowhich hello bağlayıcı hello listesinde atanmış kimlik bilgileri sunabilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-153">In this example, hello SPN for our published application is http/www.contoso.com. This SPN needs toobe in hello list of services toowhich hello connector can present delegated credentials.</span></span> 
5. <span data-ttu-id="b8bd4-154">Merhaba seçin **oturum açma kimlik temsilcisi** hello bağlayıcı toouse, kullanıcılar adına için.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-154">Choose hello **Delegated Login Identity** for hello connector toouse on behalf of your users.</span></span> <span data-ttu-id="b8bd4-155">Daha fazla bilgi için bkz: [farklı şirket içi ve bulut kimlikleri ile çalışma](#Working-with-different-on-premises-and-cloud-identities)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-155">For more information, see [Working with different on-premises and cloud identities](#Working-with-different-on-premises-and-cloud-identities)</span></span>

   ![Gelişmiş uygulama yapılandırması](./media/active-directory-application-proxy-sso-using-kcd/cwap_auth2.png)  


## <a name="sso-for-non-windows-apps"></a><span data-ttu-id="b8bd4-157">Windows olmayan uygulamalar için SSO</span><span class="sxs-lookup"><span data-stu-id="b8bd4-157">SSO for non-Windows apps</span></span>
<span data-ttu-id="b8bd4-158">Azure AD hello bulutta hello kullanıcı kimliği doğruladığında hello Azure AD uygulama proxy'si Kerberos temsilci akışı başlatır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-158">hello Kerberos delegation flow in Azure AD Application Proxy starts when Azure AD authenticates hello user in hello cloud.</span></span> <span data-ttu-id="b8bd4-159">Şirket içi Hello isteği geldikten sonra hello Azure AD uygulama proxy'si ile etkileşim kurarak hello kullanıcı adına bir Kerberos anahtarı bağlayıcı sorunları yerel Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-159">Once hello request arrives on-premises, hello Azure AD Application Proxy connector issues a Kerberos ticket on behalf of hello user by interacting with hello local Active Directory.</span></span> <span data-ttu-id="b8bd4-160">Başvurulan tooas Kerberos Kısıtlı temsilci (KCD) işlemidir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-160">This process is referred tooas Kerberos Constrained Delegation (KCD).</span></span> <span data-ttu-id="b8bd4-161">Hello sonraki aşamasında, bir istek toohello arka uç uygulaması bu Kerberos anahtarı ile gönderilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-161">In hello next phase, a request is sent toohello backend application with this Kerberos ticket.</span></span> <span data-ttu-id="b8bd4-162">Nasıl toosend gibi istekleri tanımlayan çeşitli protokoller vardır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-162">There are several protocols that define how toosend such requests.</span></span> <span data-ttu-id="b8bd4-163">Çoğu Windows olmayan sunucuları üzerinde Azure AD uygulama proxy'si artık desteklenmektedir Negotiate/SPNego bekler.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-163">Most non-Windows servers expect Negotiate/SPNego that is now supported on Azure AD Application Proxy.</span></span>

<span data-ttu-id="b8bd4-164">Kerberos hakkında daha fazla bilgi için bkz: [tüm tooknow Kerberos Kısıtlı temsilci (KCD) hakkında istediğiniz](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/21/all-you-want-to-know-about-kerberos-constrained-delegation-kcd).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-164">For more information about Kerberos, see [All you want tooknow about Kerberos Constrained Delegation (KCD)](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/21/all-you-want-to-know-about-kerberos-constrained-delegation-kcd).</span></span>

<span data-ttu-id="b8bd4-165">Windows olmayan uygulamalar genellikle kullanıcı kullanıcı adlarını veya etki alanı yerine SAM hesap adlarını e-posta adresleri.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-165">Non-Windows apps typically user usernames or SAM account names instead of domain email addresses.</span></span> <span data-ttu-id="b8bd4-166">Bu durum tooyour uygulamaları geçerliyse, bulut kimlikleri tooyour uygulama kimlikleri tooconfigure temsilci hello oturum açma kimlik alanı tooconnect gerekir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-166">If that situation applies tooyour applications, you need tooconfigure hello delegated login identity field tooconnect your cloud identities tooyour application identities.</span></span> 

## <a name="working-with-different-on-premises-and-cloud-identities"></a><span data-ttu-id="b8bd4-167">Şirket içi ve bulut kimlikleri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="b8bd4-167">Working with different on-premises and cloud identities</span></span>
<span data-ttu-id="b8bd4-168">Uygulama proxy'si varsayar kullanıcıların tam olarak sahip hello hello Bulut ve şirket içi aynı kimlik.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-168">Application Proxy assumes that users have exactly hello same identity in hello cloud and on-premises.</span></span> <span data-ttu-id="b8bd4-169">Merhaba durum bu değilse, hala KCD çoklu oturum açma için kullanabileceğiniz.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-169">If that's not hello case, you can can still use KCD for single sign-on.</span></span> <span data-ttu-id="b8bd4-170">Yapılandırma bir **oturum açma kimlik temsilcisi** hangi kimlik kullanılmalıdır, çoklu oturum açma gerçekleştirirken her uygulama toospecify için.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-170">Configure a **Delegated login identity** for each application toospecify which identity should be used when performing single sign-on.</span></span>  

<span data-ttu-id="b8bd4-171">Bu özellik şirket içi ve hello kullanıcılar tooenter farklı kullanıcı adları ve parolalar gerek kalmadan hello bulut tooon içi uygulamalardan kimlikleri toohave SSO bulut birçok kuruluş sağlar.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-171">This capability allows many organizations that have different on-premises and cloud identities toohave SSO from hello cloud tooon-premises apps without requiring hello users tooenter different usernames and passwords.</span></span> <span data-ttu-id="b8bd4-172">Bu kuruluşların içerir:</span><span class="sxs-lookup"><span data-stu-id="b8bd4-172">This includes organizations that:</span></span>

* <span data-ttu-id="b8bd4-173">Dahili olarak birden çok etki alanınız (joe@us.contoso.com, joe@eu.contoso.com) ve tek bir etki alanı hello bulutta (joe@contoso.com).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-173">Have multiple domains internally (joe@us.contoso.com, joe@eu.contoso.com) and a single domain in hello cloud (joe@contoso.com).</span></span>
* <span data-ttu-id="b8bd4-174">Dahili yönlendirilebilir olmayan etki alanı adına sahip (joe@contoso.usa) ve yasal bir hello bulutta.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-174">Have non-routable domain name internally (joe@contoso.usa) and a legal one in hello cloud.</span></span>
* <span data-ttu-id="b8bd4-175">Etki alanı adları dahili olarak kullanmamanız (CAN)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-175">Do not use domain names internally (joe)</span></span>
* <span data-ttu-id="b8bd4-176">İçi farklı diğer adlar kullanın ve hello bulutta.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-176">Use different aliases on-prem and in hello cloud.</span></span> <span data-ttu-id="b8bd4-177">Örneğin, joe-johns@contoso.com vs.joej@contoso.com</span><span class="sxs-lookup"><span data-stu-id="b8bd4-177">For example, joe-johns@contoso.com vs. joej@contoso.com</span></span>  

<span data-ttu-id="b8bd4-178">Uygulama proxy'si ile hangi kimlik toouse tooobtain hello Kerberos bileti seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-178">With Application Proxy, you can select which identity toouse tooobtain hello Kerberos ticket.</span></span> <span data-ttu-id="b8bd4-179">Bu ayarı bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-179">This setting is per application.</span></span> <span data-ttu-id="b8bd4-180">Bu seçeneklerden bazısı e-posta adresi biçimi kabul ediyor musunuz sistemler için uygun olan, başkalarının alternatif oturum açma için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-180">Some of these options are suitable for systems that do not accept email address format, others are designed for alternative login.</span></span>

![Temsilci oturum açma kimlik parametresi ekran görüntüsü](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_upn.png)

<span data-ttu-id="b8bd4-182">Temsilci oturum açma kimliği kullanılırsa, hello değer tüm hello etki alanları veya ormanlar, kuruluşunuzda arasında benzersiz olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-182">If delegated login identity is used, hello value might not be unique across all hello domains or forests in your organization.</span></span> <span data-ttu-id="b8bd4-183">Bu sorunu önlemek için iki kez iki farklı bağlayıcı gruplarını kullanarak bu uygulamaları yayımlayarak.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-183">You can avoid this issue by publishing these applications twice using two different Connector groups.</span></span> <span data-ttu-id="b8bd4-184">Her uygulama farklı kullanıcı İzleyici olduğundan, bağlayıcılar tooa farklı etki alanına katılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-184">Since each application has a different user audience, you can join its Connectors tooa different domain.</span></span>

### <a name="configure-sso-for-different-identities"></a><span data-ttu-id="b8bd4-185">SSO için farklı kimlik Yapılandır</span><span class="sxs-lookup"><span data-stu-id="b8bd4-185">Configure SSO for different identities</span></span>
1. <span data-ttu-id="b8bd4-186">Azure AD Connect ayarları Hello asıl kimlik hello e-posta adresi (posta) olacak şekilde yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-186">Configure Azure AD Connect settings so hello main identity is hello email address (mail).</span></span> <span data-ttu-id="b8bd4-187">Merhaba parçası özelleştirme gibi işlem hello değiştirerek bu yapılır **kullanıcı asıl adı** hello eşitleme ayarları alanındaki.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-187">This is done as part of hello customize process, by changing hello **User Principal Name** field in hello sync settings.</span></span> <span data-ttu-id="b8bd4-188">Bu ayarlar, ayrıca nasıl tooOffice365, Windows10 aygıtlar ve bunların kimlik deposu olarak Azure AD kullanan diğer uygulamalar kullanıcılar oturum belirler.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-188">These settings also determine how users log in tooOffice365, Windows10 devices, and other applications that use Azure AD as their identity store.</span></span>  
   <span data-ttu-id="b8bd4-189">![Kullanıcıların ekran görüntüsü - kullanıcı asıl adı açılan tanımlama](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_connect_settings.png)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-189">![Identifying users screenshot - User Principal Name dropdown](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_connect_settings.png)</span></span>  
2. <span data-ttu-id="b8bd4-190">Merhaba uygulaması için hello uygulama yapılandırma ayarlarında toomodify, select hello istediğiniz **oturum açma kimlik temsilcisi** kullanılan toobe:</span><span class="sxs-lookup"><span data-stu-id="b8bd4-190">In hello Application Configuration settings for hello application you would like toomodify, select hello **Delegated Login Identity** toobe used:</span></span>

   * <span data-ttu-id="b8bd4-191">Kullanıcı asıl adı (örneğin, joe@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-191">User Principal Name (for example, joe@contoso.com)</span></span>
   * <span data-ttu-id="b8bd4-192">Diğer kullanıcı asıl adı (örneğin, joed@contoso.local)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-192">Alternate User Principal Name (for example, joed@contoso.local)</span></span>
   * <span data-ttu-id="b8bd4-193">Kullanıcı asıl adı (örneğin, Can) kullanıcıadı parçası</span><span class="sxs-lookup"><span data-stu-id="b8bd4-193">Username part of User Principal Name (for example, joe)</span></span>
   * <span data-ttu-id="b8bd4-194">Kullanıcı adı bölümü diğer kullanıcı asıl adı (örneğin, joed)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-194">Username part of Alternate User Principal Name (for example, joed)</span></span>
   * <span data-ttu-id="b8bd4-195">Şirket içi SAM hesap adı (Merhaba etki alanı denetleyicisi yapılandırmasına bağlıdır)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-195">On-premises SAM account name (depends on hello domain controller configuration)</span></span>

### <a name="troubleshooting-sso-for-different-identities"></a><span data-ttu-id="b8bd4-196">SSO için farklı kimlik sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="b8bd4-196">Troubleshooting SSO for different identities</span></span>
<span data-ttu-id="b8bd4-197">Merhaba SSO işlemi bir hata varsa, hello bağlayıcı makine olay günlüğü'nde açıklandığı gibi göründüğü [sorun giderme](application-proxy-back-end-kerberos-constrained-delegation-how-to.md).</span><span class="sxs-lookup"><span data-stu-id="b8bd4-197">If there is an error in hello SSO process, it appears in hello connector machine event log as explained in [Troubleshooting](application-proxy-back-end-kerberos-constrained-delegation-how-to.md).</span></span>
<span data-ttu-id="b8bd4-198">Ancak, bu uygulama diğer HTTP yanıtlarını çeşitli yanıtlar karşın bazı durumlarda, hello isteği başarıyla toohello arka uç uygulaması gönderilir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-198">But, in some cases, hello request is successfully sent toohello backend application while this application replies in various other HTTP responses.</span></span> <span data-ttu-id="b8bd4-199">Bu gibi durumlarda sorun giderme hello bağlayıcı makinede hello uygulama proxy'si oturum olay günlüğünde olay numarası 24029 inceleyerek başlamalısınız.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-199">Troubleshooting these cases should start by examining event number 24029 on hello connector machine in hello Application Proxy session event log.</span></span> <span data-ttu-id="b8bd4-200">temsilci seçme için kullanılan hello kullanıcı kimliği hello Olay Ayrıntıları içinde hello "kullanıcı" alanında görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-200">hello user identity that was used for delegation appears in hello “user” field within hello event details.</span></span> <span data-ttu-id="b8bd4-201">Oturum günlüğü üzerinde tooturn seçin **Göster Analitik ve hata ayıklama günlüklerini** hello Olay Görüntüleyicisi'ni Görünüm menüsünde.</span><span class="sxs-lookup"><span data-stu-id="b8bd4-201">tooturn on session log, select **Show analytic and debug logs** in hello event viewer view menu.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b8bd4-202">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="b8bd4-202">Next steps</span></span>

* [<span data-ttu-id="b8bd4-203">Nasıl tooconfigure uygulama proxy'si uygulama toouse Kerberos Kısıtlı temsilci</span><span class="sxs-lookup"><span data-stu-id="b8bd4-203">How tooconfigure an Application Proxy application toouse Kerberos Constrained Delegation</span></span>](application-proxy-back-end-kerberos-constrained-delegation-how-to.md)
* [<span data-ttu-id="b8bd4-204">Uygulama Ara sunucusu ile ilgili sorunları giderme</span><span class="sxs-lookup"><span data-stu-id="b8bd4-204">Troubleshoot issues you're having with Application Proxy</span></span>](active-directory-application-proxy-troubleshoot.md)


<span data-ttu-id="b8bd4-205">Merhaba en son haberler ve güncelleştirmeler için hello denetleyin [uygulama ara sunucusu bloguna](http://blogs.technet.com/b/applicationproxyblog/)</span><span class="sxs-lookup"><span data-stu-id="b8bd4-205">For hello latest news and updates, check out hello [Application Proxy blog](http://blogs.technet.com/b/applicationproxyblog/)</span></span>

