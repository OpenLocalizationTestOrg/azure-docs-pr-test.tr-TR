---
title: "Azure AD Connect: Önceki bir sürümden yükseltme | Microsoft Docs"
description: "Azure Active Directory yerinde yükseltme ve esnek geçiş dahil olmak üzere Connect, en son sürümüne yükseltmek için farklı yöntemler açıklanmaktadır."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 52fd9375c71c42feaf87f4a0f4220e1cb3889e63
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-to-the-latest"></a><span data-ttu-id="926ee-103">Azure AD Connect: En son önceki bir sürümünden yükseltme</span><span class="sxs-lookup"><span data-stu-id="926ee-103">Azure AD Connect: Upgrade from a previous version to the latest</span></span>
<span data-ttu-id="926ee-104">Bu konuda, Azure Active Directory (Azure AD) Bağlan yüklemenizi en son sürümüne yükseltme için kullanabileceğiniz farklı yöntemler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="926ee-104">This topic describes the different methods that you can use to upgrade your Azure Active Directory (Azure AD) Connect installation to the latest release.</span></span> <span data-ttu-id="926ee-105">Kendiniz Azure AD Connect sürümleriyle geçerli tutmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="926ee-105">We recommend that you keep yourself current with the releases of Azure AD Connect.</span></span> <span data-ttu-id="926ee-106">Ayrıca içindeki adımları kullanın [çarpma geçiş](#swing-migration) önemli bir yapılandırma değişikliği yaptığınızda bölüm.</span><span class="sxs-lookup"><span data-stu-id="926ee-106">You also use the steps in the [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="926ee-107">Dirsync'ten yükseltme istiyorsanız, bkz: [Azure AD eşitleme aracından (DirSync) yükseltme](active-directory-aadconnect-dirsync-upgrade-get-started.md) yerine.</span><span class="sxs-lookup"><span data-stu-id="926ee-107">If you want to upgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="926ee-108">Azure AD Connect yükseltmek için kullanabileceğiniz birkaç farklı stratejiler vardır.</span><span class="sxs-lookup"><span data-stu-id="926ee-108">There are a few different strategies that you can use to upgrade Azure AD Connect.</span></span>

| <span data-ttu-id="926ee-109">Yöntem</span><span class="sxs-lookup"><span data-stu-id="926ee-109">Method</span></span> | <span data-ttu-id="926ee-110">Açıklama</span><span class="sxs-lookup"><span data-stu-id="926ee-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="926ee-111">Otomatik yükseltme</span><span class="sxs-lookup"><span data-stu-id="926ee-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="926ee-112">Hızlı yükleme sahip müşteriler için en kolay yöntem budur.</span><span class="sxs-lookup"><span data-stu-id="926ee-112">This is the easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="926ee-113">Yerinde yükseltme</span><span class="sxs-lookup"><span data-stu-id="926ee-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="926ee-114">Tek bir sunucu varsa, yükleme yerinde aynı sunucuda yükseltebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-114">If you have a single server, you can upgrade the installation in-place on the same server.</span></span> |
| [<span data-ttu-id="926ee-115">Esnek geçiş</span><span class="sxs-lookup"><span data-stu-id="926ee-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="926ee-116">İki sunucu ile yeni sürümü veya yapılandırma sunucularıyla birini hazırlamak ve hazır olduğunuzda etkin sunucunun değiştirin.</span><span class="sxs-lookup"><span data-stu-id="926ee-116">With two servers, you can prepare one of the servers with the new release or configuration, and change the active server when you're ready.</span></span> |

<span data-ttu-id="926ee-117">İzinler için bilgi [yükseltme için gereken izinler](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="926ee-117">For permissions information, see the [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="926ee-118">Değişiklikleri Azure ad eşitleme başlatmak, yeni Azure AD Connect sunucusu etkinleştirdikten sonra DirSync veya Azure AD Sync kullanılarak geri gerekir.</span><span class="sxs-lookup"><span data-stu-id="926ee-118">After you've enabled your new Azure AD Connect server to start synchronizing changes to Azure AD, you must not roll back to using DirSync or Azure AD Sync.</span></span> <span data-ttu-id="926ee-119">DirSync ve Azure AD eşitleme gibi eski istemciler için Azure AD Connect'ten eski sürüme düşürmeyi desteklenmez ve veri kaybı gibi sorunları Azure AD'de yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-119">Downgrading from Azure AD Connect to legacy clients, including DirSync and Azure AD Sync, isn't supported and can lead to issues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="926ee-120">Yerinde yükseltme</span><span class="sxs-lookup"><span data-stu-id="926ee-120">In-place upgrade</span></span>
<span data-ttu-id="926ee-121">Azure AD eşitleme veya Azure AD Connect taşımak için bir yerinde yükseltme çalışır.</span><span class="sxs-lookup"><span data-stu-id="926ee-121">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="926ee-122">Forefront Identity Manager (FIM) + Azure AD Bağlayıcısı ile bir çözüm veya Dirsync'ten taşıma için çalışmıyor.</span><span class="sxs-lookup"><span data-stu-id="926ee-122">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="926ee-123">Tek bir sunucu ve değerinden yaklaşık 100.000 nesneye sahip olduğunda bu tercih edilen bir yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="926ee-123">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="926ee-124">Out-of-box eşitleme kuralları herhangi bir değişiklik varsa, bir tam içeri aktarma ve tam eşitleme yükseltme işleminden sonra oluşur.</span><span class="sxs-lookup"><span data-stu-id="926ee-124">If there are any changes to the out-of-box sync rules, a full import and full synchronization occur after the upgrade.</span></span> <span data-ttu-id="926ee-125">Bu yöntem, yeni yapılandırma sistemde var olan tüm nesnelere uygulanmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="926ee-125">This method ensures that the new configuration is applied to all existing objects in the system.</span></span> <span data-ttu-id="926ee-126">Bu farklı çalıştır eşitleme altyapısı kapsamındaki nesneleri sayısına bağlı olarak birkaç saat sürebilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-126">This run might take a few hours, depending on the number of objects that are in scope of the sync engine.</span></span> <span data-ttu-id="926ee-127">(Bu, varsayılan olarak 30 dakikada bir eşitlenir) normal delta Eşitleme Zamanlayıcısı askıya alındı, ancak parola eşitleme devam eder.</span><span class="sxs-lookup"><span data-stu-id="926ee-127">The normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="926ee-128">Bir hafta sırasında yerinde yükseltme yapılması düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-128">You might consider doing the in-place upgrade during a weekend.</span></span> <span data-ttu-id="926ee-129">Varsa yeni Azure AD Connect ile out-of-box yapılandırmada değişiklik yapılmadan sürüm, normal delta alma/eşitlemesi yerine başlatır.</span><span class="sxs-lookup"><span data-stu-id="926ee-129">If there are no changes to the out-of-box configuration with the new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Yerinde yükseltme](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="926ee-131">Out-of-box eşitleme kuralları için değişiklik yaptıysanız, ardından bu kurallar geri yükseltmeden varsayılan yapılandırmaya ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="926ee-131">If you've made changes to the out-of-box synchronization rules, then these rules are set back to the default configuration on upgrade.</span></span> <span data-ttu-id="926ee-132">Yapılandırmanızı arasında yükseltme tutulur emin olmak için açıklandığı gibi değişiklikler yaptığınızdan emin olun [en iyi uygulamalar varsayılan yapılandırmasını değiştirmek için](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="926ee-132">To make sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing the default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="926ee-133">Yerinde yükseltme sırasında olabilir (tam alma adımı ve tam eşitleme adımı dahil) belirli eşitleme etkinliklerini yükseltme işlemi tamamlandıktan sonra çalıştırılacak gerektiren sunulan değişiklikler.</span><span class="sxs-lookup"><span data-stu-id="926ee-133">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed after upgrade completes.</span></span> <span data-ttu-id="926ee-134">Bu tür etkinlikler erteleme bölümüne bakın. [yükselttikten sonra tam eşitleme erteleme nasıl](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="926ee-134">To defer such activities, refer to section [How to defer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="926ee-135">Swing geçişi</span><span class="sxs-lookup"><span data-stu-id="926ee-135">Swing migration</span></span>
<span data-ttu-id="926ee-136">Karmaşık bir dağıtım veya çok sayıda nesne varsa, Canlı sistem üzerinde bir yerinde yükseltme yapmak için pratik olabilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-136">If you have a complex deployment or many objects, it might be impractical to do an in-place upgrade on the live system.</span></span> <span data-ttu-id="926ee-137">Bazı müşteriler için bu işlem birden fazla gün--sürebilir ve bu süre boyunca hiçbir delta değişiklikleri işlenir.</span><span class="sxs-lookup"><span data-stu-id="926ee-137">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="926ee-138">Ayrıca yapılandırmanızı önemli değişiklikler yapmayı planlayın ve buluta gönderilen önce bunları denemenin istediğinizde bu yöntemi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-138">You can also use this method when you plan to make substantial changes to your configuration and you want to try them out before they're pushed to the cloud.</span></span>

<span data-ttu-id="926ee-139">Bu senaryolar için önerilen yöntem, esnek geçiş kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="926ee-139">The recommended method for these scenarios is to use a swing migration.</span></span> <span data-ttu-id="926ee-140">(En az) iki sunucu--bir etkin sunucu ve bir Hazırlama sunucusu gerekir.</span><span class="sxs-lookup"><span data-stu-id="926ee-140">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="926ee-141">(Aşağıdaki resimde düz mavi çizgilerle gösterilir) etkin sunucu için etkin üretim yükü sorumludur.</span><span class="sxs-lookup"><span data-stu-id="926ee-141">The active server (shown with solid blue lines in the following picture) is responsible for the active production load.</span></span> <span data-ttu-id="926ee-142">Hazırlama sunucunun (kesikli mor çizgilerle gösterilir) yeni sürüm veya yapılandırma hazırlanır.</span><span class="sxs-lookup"><span data-stu-id="926ee-142">The staging server (shown with dashed purple lines) is prepared with the new release or configuration.</span></span> <span data-ttu-id="926ee-143">Tam olarak hazır olduğunda, bu sunucu etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-143">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="926ee-144">Şimdi eski sürüm veya yapılandırma yüklü olduğundan, hazırlama Server'a yapılan ve yükseltildiğinde önceki active sunucu.</span><span class="sxs-lookup"><span data-stu-id="926ee-144">The previous active server, which now has the old version or configuration installed, is made into the staging server and is upgraded.</span></span>

<span data-ttu-id="926ee-145">İki sunucu farklı sürümlerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-145">The two servers can use different versions.</span></span> <span data-ttu-id="926ee-146">Örneğin, Azure AD eşitleme yetkisini almayı planladığınız active server kullanabilirsiniz ve yeni hazırlama sunucunun Azure AD Connect kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-146">For example, the active server that you plan to decommission can use Azure AD Sync, and the new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="926ee-147">Yeni bir yapılandırma geliştirmek için esnek geçiş kullanırsanız, iki sunucularında aynı sürümlerde iyi bir fikirdir.</span><span class="sxs-lookup"><span data-stu-id="926ee-147">If you use swing migration to develop a new configuration, it's a good idea to have the same versions on the two servers.</span></span>  
![Hazırlama sunucusu](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="926ee-149">Bazı müşteriler, bu senaryo için üç veya dört sunucuların sahip olması tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-149">Some customers prefer to have three or four servers for this scenario.</span></span> <span data-ttu-id="926ee-150">Hazırlama sunucusu yükseltildiğinde için yedek bir sunucu yok [olağanüstü durum kurtarma](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="926ee-150">When the staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="926ee-151">Üç veya dört sunucularıyla her zaman almaya hazır olan bir Hazırlama sunucusu olduğunu sağlayan yeni sürümle birincil/bekleme sunucularının bir kümesi hazırlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-151">With three or four servers, you can prepare one set of primary/standby servers with the new version, which ensures that there is always a staging server that's ready to take over.</span></span>

<span data-ttu-id="926ee-152">Bu adımlar, Azure AD eşitleme veya FIM + Azure AD Bağlayıcısı çözümüyle taşımak için de geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="926ee-152">These steps also work to move from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="926ee-153">Bu adımları DirSync için çalışmaz, ancak (paralel dağıtım olarak da bilinir) aynı esnek geçiş yöntem adımlara DirSync için [yükseltme Azure Active Directory eşitleme (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="926ee-153">These steps don't work for DirSync, but the same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-to-upgrade"></a><span data-ttu-id="926ee-154">Yükseltme için esnek geçiş işlemini kullanın</span><span class="sxs-lookup"><span data-stu-id="926ee-154">Use a swing migration to upgrade</span></span>
1. <span data-ttu-id="926ee-155">Sunucularda hem de Azure AD Connect kullanıyorsanız ve yalnızca bir yapılandırma değiştirmek, olduğundan emin olun yapmayı planladığınız etkin sunucu ve hazırlama sunucu her ikisi de aynı sürümünü kullanıyor.</span><span class="sxs-lookup"><span data-stu-id="926ee-155">If you use Azure AD Connect on both servers and plan to only make a configuration change, make sure that your active server and staging server are both using the same version.</span></span> <span data-ttu-id="926ee-156">Bu değişiklikleri daha sonra karşılaştırın kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="926ee-156">That makes it easier to compare differences later.</span></span> <span data-ttu-id="926ee-157">Azure AD eşitleme'den yükseltme yapıyorsanız, bu sunucular farklı sürümlerde.</span><span class="sxs-lookup"><span data-stu-id="926ee-157">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="926ee-158">Azure AD Connect eski bir sürümden yükseltirken, aynı sürümü kullanan iki sunucu ile başlatmak için iyi bir fikirdir, ancak gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="926ee-158">If you're upgrading from an older version of Azure AD Connect, it's a good idea to start with the two servers that are using the same version, but it's not required.</span></span>
2. <span data-ttu-id="926ee-159">Özel yapılandırma yapmış olduğunuz ve hazırlama sunucunuz varsa değil, adımları altında [özel bir yapılandırma etkin sunucudan hazırlama sunucuya taşıyın](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="926ee-159">If you've made a custom configuration and your staging server doesn't have it, follow the steps under [Move a custom configuration from the active server to the staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="926ee-160">Azure AD Connect, önceki bir sürümünden yükseltme yapıyorsanız hazırlama sunucuyu en son sürüme yükseltin.</span><span class="sxs-lookup"><span data-stu-id="926ee-160">If you're upgrading from an earlier release of Azure AD Connect, upgrade the staging server to the latest version.</span></span> <span data-ttu-id="926ee-161">Azure AD eşitleme'den taşıyorsanız, Azure AD Connect'i hazırlama sunucunuza yükleyin.</span><span class="sxs-lookup"><span data-stu-id="926ee-161">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="926ee-162">Tam içeri aktarma ve tam eşitleme hazırlama sunucunuzda çalışan eşitleme altyapısı sağlar.</span><span class="sxs-lookup"><span data-stu-id="926ee-162">Let the sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="926ee-163">Doğrulayın "Doğrula" altındaki adımları kullanarak beklenmeyen değişiklikler yeni yapılandırmayı neden olduğunu kaydetmedi [bir sunucunun yapılandırmasını doğrulama](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="926ee-163">Verify that the new configuration didn't cause any unexpected changes by using the steps under "Verify" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="926ee-164">Bir şey beklendiği gibi değilse, düzeltmek için alma çalıştırın ve eşitleme ve adımları izleyerek iyi görünüyor kadar verileri doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="926ee-164">If something isn't as expected, correct it, run the import and sync, and verify the data until it looks good, by following the steps.</span></span>
6. <span data-ttu-id="926ee-165">Etkin sunucusu olarak hazırlama sunucuya geçiş.</span><span class="sxs-lookup"><span data-stu-id="926ee-165">Switch the staging server to be the active server.</span></span> <span data-ttu-id="926ee-166">Bu son adım "Anahtar active server" olarak [bir sunucunun yapılandırmasını doğrulama](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="926ee-166">This is the final step "Switch active server" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="926ee-167">Azure AD Connect yükseltiyorsanız, en son sürüm için hazırlama modunda sunulmuştur sunucusunu yükseltin.</span><span class="sxs-lookup"><span data-stu-id="926ee-167">If you're upgrading Azure AD Connect, upgrade the server that's now in staging mode to the latest release.</span></span> <span data-ttu-id="926ee-168">Yükseltme yapılandırma ve verileri almak için önce aynı adımları izleyin.</span><span class="sxs-lookup"><span data-stu-id="926ee-168">Follow the same steps as before to get the data and configuration upgraded.</span></span> <span data-ttu-id="926ee-169">Azure AD eşitleme'den yükseltme yaptıysanız, şimdi kapatmak ve eski sunucunuz yetkisini.</span><span class="sxs-lookup"><span data-stu-id="926ee-169">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-the-active-server-to-the-staging-server"></a><span data-ttu-id="926ee-170">Özel yapılandırma etkin sunucudan hazırlama sunucuya taşıyın.</span><span class="sxs-lookup"><span data-stu-id="926ee-170">Move a custom configuration from the active server to the staging server</span></span>
<span data-ttu-id="926ee-171">Yapılandırma değişiklikleri etkin sunucunun yaptıysanız, aynı değişiklikleri hazırlama sunucuya uygulanan emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="926ee-171">If you've made configuration changes to the active server, you need to make sure that the same changes are applied to the staging server.</span></span> <span data-ttu-id="926ee-172">Bu taşıma ile yardımcı olmak için kullanabileceğiniz [Azure AD Connect yapılandırma Belgeleyici'yi](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="926ee-172">To help with this move, you can use the [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="926ee-173">PowerShell kullanarak oluşturduktan özel eşitleme kuralları taşıyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-173">You can move the custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="926ee-174">Aynı şekilde diğer değişiklikler her iki sistemde uygulamanız gerekir ve değişiklikler geçiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-174">You must apply other changes the same way on both systems, and you can't migrate the changes.</span></span> <span data-ttu-id="926ee-175">[Yapılandırma Belgeleyici'yi](https://github.com/Microsoft/AADConnectConfigDocumenter) aynı olduklarından emin olmak için iki sistem karşılaştırma yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-175">The [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing the two systems to make sure they are identical.</span></span> <span data-ttu-id="926ee-176">Bu bölümde bulunan adımları getirmede aracı de yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-176">The tool can also help in automating the steps found in this section.</span></span>

<span data-ttu-id="926ee-177">Şunları sunucularda hem de aynı şekilde yapılandırmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="926ee-177">You need to configure the following things the same way on both servers:</span></span>

* <span data-ttu-id="926ee-178">Aynı orman bağlantısı</span><span class="sxs-lookup"><span data-stu-id="926ee-178">Connection to the same forests</span></span>
* <span data-ttu-id="926ee-179">Tüm etki alanı ve OU filtreleme</span><span class="sxs-lookup"><span data-stu-id="926ee-179">Any domain and OU filtering</span></span>
* <span data-ttu-id="926ee-180">Parola Eşitleme ve parola geri yazma gibi aynı isteğe bağlı özellikler</span><span class="sxs-lookup"><span data-stu-id="926ee-180">The same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="926ee-181">**Özel eşitleme kuralları taşıma**</span><span class="sxs-lookup"><span data-stu-id="926ee-181">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="926ee-182">Özel eşitleme kuralları taşımak için aşağıdakileri yapın:</span><span class="sxs-lookup"><span data-stu-id="926ee-182">To move custom synchronization rules, do the following:</span></span>

1. <span data-ttu-id="926ee-183">Açık **eşitleme kuralları Düzenleyicisi** etkin sunucunuzda.</span><span class="sxs-lookup"><span data-stu-id="926ee-183">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="926ee-184">Özel bir kural seçin.</span><span class="sxs-lookup"><span data-stu-id="926ee-184">Select a custom rule.</span></span> <span data-ttu-id="926ee-185">Tıklatın **verme**.</span><span class="sxs-lookup"><span data-stu-id="926ee-185">Click **Export**.</span></span> <span data-ttu-id="926ee-186">Bir not defteri pencereyi getirir.</span><span class="sxs-lookup"><span data-stu-id="926ee-186">This brings up a Notepad window.</span></span> <span data-ttu-id="926ee-187">Geçici dosya bir PS1 uzantısıyla kaydedin.</span><span class="sxs-lookup"><span data-stu-id="926ee-187">Save the temporary file with a PS1 extension.</span></span> <span data-ttu-id="926ee-188">Bu, bir PowerShell komut dosyası sağlar.</span><span class="sxs-lookup"><span data-stu-id="926ee-188">This makes it a PowerShell script.</span></span> <span data-ttu-id="926ee-189">PS1 dosyası hazırlama sunucusuna kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="926ee-189">Copy the PS1 file to the staging server.</span></span>  
   <span data-ttu-id="926ee-190">![Eşitleme kuralı dışarı aktarma](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="926ee-190">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="926ee-191">Bağlayıcı GUID hazırlama sunucusunda farklıdır ve değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="926ee-191">The Connector GUID is different on the staging server, and you must change it.</span></span> <span data-ttu-id="926ee-192">GUID almak için başlangıç **eşitleme kuralları Düzenleyicisi**, aynı bağlı sistemini temsil eder ve out-of-box kurallardan biri seçin **verme**.</span><span class="sxs-lookup"><span data-stu-id="926ee-192">To get the GUID, start **Synchronization Rules Editor**, select one of the out-of-box rules that represent the same connected system, and click **Export**.</span></span> <span data-ttu-id="926ee-193">GUID PS1 dosyası hazırlama sunucusundan GUID ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="926ee-193">Replace the GUID in your PS1 file with the GUID from the staging server.</span></span>
4. <span data-ttu-id="926ee-194">Bir PowerShell komut isteminde PS1 dosyasını çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="926ee-194">In a PowerShell prompt, run the PS1 file.</span></span> <span data-ttu-id="926ee-195">Bu hazırlama sunucusunda özel eşitleme kuralı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="926ee-195">This creates the custom synchronization rule on the staging server.</span></span>
5. <span data-ttu-id="926ee-196">Bu, özel kurallarınızı için işlemi yineleyin.</span><span class="sxs-lookup"><span data-stu-id="926ee-196">Repeat this for all your custom rules.</span></span>

## <a name="how-to-defer-full-synchronization-after-upgrade"></a><span data-ttu-id="926ee-197">Yükseltmeden sonra tam eşitleme erteleme nasıl</span><span class="sxs-lookup"><span data-stu-id="926ee-197">How to defer full synchronization after upgrade</span></span>
<span data-ttu-id="926ee-198">Yerinde yükseltme sırasında olabilir (tam alma adımı ve tam eşitleme adımı dahil) belirli eşitleme etkinliklerini yürütülecek gerektiren sunulan değişiklikler.</span><span class="sxs-lookup"><span data-stu-id="926ee-198">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed.</span></span> <span data-ttu-id="926ee-199">Örneğin, bağlayıcı şema değişiklikleri gerektirir **tam alma** adım ve out-of-box eşitleme kuralı değişiklik gerektiren **tam eşitleme** etkilenen bağlayıcılar yürütülmek üzere adım.</span><span class="sxs-lookup"><span data-stu-id="926ee-199">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step to be executed on affected connectors.</span></span> <span data-ttu-id="926ee-200">Yükseltme sırasında Azure AD Connect eşitleme etkinlikleri gerekli olduğunu belirler ve bunları olarak kaydeder *geçersiz kılmaları*.</span><span class="sxs-lookup"><span data-stu-id="926ee-200">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="926ee-201">Aşağıdaki eşitleme döngüsü Eşitleme Zamanlayıcısı'nı bu geçersiz kılma işlemleri seçer ve bunları yürütür.</span><span class="sxs-lookup"><span data-stu-id="926ee-201">In the following synchronization cycle, the synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="926ee-202">Bir geçersiz kılma başarılı bir şekilde yürütüldükten sonra kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="926ee-202">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="926ee-203">Burada hemen yükseltmeden sonra gerçekleşmesi için bu geçersiz kılmaları istemediğiniz durumlar olabilir.</span><span class="sxs-lookup"><span data-stu-id="926ee-203">There may be situations where you do not want these overrides to take place immediately after upgrade.</span></span> <span data-ttu-id="926ee-204">Örneğin, çok sayıda eşitlenmiş nesneleri sahip ve çalışma saatlerinden gerçekleşmesi için eşitleme adımları istersiniz.</span><span class="sxs-lookup"><span data-stu-id="926ee-204">For example, you have numerous synchronized objects and you would like these synchronization steps to occur after business hours.</span></span> <span data-ttu-id="926ee-205">Bu geçersiz kılmaları kaldırmak için:</span><span class="sxs-lookup"><span data-stu-id="926ee-205">To remove these overrides:</span></span>

1. <span data-ttu-id="926ee-206">Yükseltme sırasında **işaretini** seçeneği **Yapılandırma tamamlandıktan sonra eşitleme işlemini başlatmak**.</span><span class="sxs-lookup"><span data-stu-id="926ee-206">During upgrade, **uncheck** the option **Start the synchronization process when configuration completes**.</span></span> <span data-ttu-id="926ee-207">Bu Eşitleme Zamanlayıcısı'nı devre dışı bırakır ve geçersiz kılmalar kaldırılmadan önce eşitleme döngüsü alma yerden otomatik olarak engeller.</span><span class="sxs-lookup"><span data-stu-id="926ee-207">This disables the synchronization scheduler and prevents synchronization cycle from taking place automatically before the overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="926ee-209">Yükseltme tamamlandıktan sonra hangi geçersiz kılmaları eklenmiş olan bulmak için aşağıdaki cmdlet'i çalıştırın:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="926ee-209">After upgrade completes, run the following cmdlet to find out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="926ee-210">Geçersiz kılmalar bağlayıcı özgüdür.</span><span class="sxs-lookup"><span data-stu-id="926ee-210">The overrides are connector-specific.</span></span> <span data-ttu-id="926ee-211">Aşağıdaki örnekte, tam alma adımı ve tam eşitleme adımı her iki şirket içi AD Bağlayıcısı ve Azure AD Bağlayıcısı eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="926ee-211">In the following example, Full Import step and Full Synchronization step have been added to both the on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="926ee-213">Eklenen varolan geçersiz kılmaları unutmayın.</span><span class="sxs-lookup"><span data-stu-id="926ee-213">Note down the existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="926ee-214">Tam içeri aktarma ve rasgele bir bağlayıcı üzerinde tam eşitleme için geçersiz kılmaları kaldırmak için aşağıdaki cmdlet'i çalıştırın:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="926ee-214">To remove the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="926ee-215">Tüm bağlayıcılar üzerinde geçersiz kılmaları kaldırmak için aşağıdaki PowerShell betiğini yürütün:</span><span class="sxs-lookup"><span data-stu-id="926ee-215">To remove the overrides on all connectors, execute the following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="926ee-216">Zamanlayıcı sürdürmek için aşağıdaki cmdlet'i çalıştırın:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="926ee-216">To resume the scheduler, run the following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="926ee-217">Erken kolaylık olması gereken eşitleme adımları yürütmek unutmayın.</span><span class="sxs-lookup"><span data-stu-id="926ee-217">Remember to execute the required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="926ee-218">El ile Eşitleme Hizmeti Yöneticisi'ni kullanarak aşağıdaki adımları yürütün veya Set-ADSyncSchedulerConnectorOverride cmdlet'ini kullanarak geçersiz kılmaları geri ekleyin.</span><span class="sxs-lookup"><span data-stu-id="926ee-218">You can either manually execute these steps using the Synchronization Service Manager or add the overrides back using the Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="926ee-219">Rastgele bir bağlayıcı üzerinde tam içeri aktarma ve tam eşitleme için geçersiz kılmalar eklemek için aşağıdaki cmdlet'i çalıştırın:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="926ee-219">To add the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="926ee-220">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="926ee-220">Next steps</span></span>
<span data-ttu-id="926ee-221">Daha fazla bilgi edinmek [şirket içi kimliklerinizi Azure Active Directory ile tümleştirme](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="926ee-221">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
