---
title: "Azure AD Connect: Tasarım kavramları | Microsoft Docs"
description: "Bu konuda belirli uygulama tasarım alanları ayrıntıları"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="e42cd-103">Azure AD Connect: Tasarım kavramları</span><span class="sxs-lookup"><span data-stu-id="e42cd-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="e42cd-104">Azure AD Connect uygulama tasarımı sırasında zorlayıcı alanları tanımlamak için bu konunun amacı budur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="e42cd-105">Bu konuda derinlemesine belirli alanlara ise ve bu kavramları diğer konularında kısaca açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="e42cd-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="e42cd-106">sourceAnchor</span></span>
<span data-ttu-id="e42cd-107">SourceAnchor özniteliği olarak tanımlanır *bir nesne ömrü boyunca sabit bir öznitelik*.</span><span class="sxs-lookup"><span data-stu-id="e42cd-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="e42cd-108">Ayrıca aynı nesne şirket içi olarak ve Azure AD'de bir nesneyi benzersiz olarak tanımlar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="e42cd-109">Öznitelik olarak da adlandırılır **İmmutableıd** ve iki ad birbirinin yerine kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="e42cd-110">Sözcüğünü değişmez, "değiştirilemez", bu konuya önemlidir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="e42cd-111">Bu özniteliğin değeri ayarlandıktan sonra değiştirilemez, senaryonuza destekleyen bir tasarım seçmek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="e42cd-112">Özniteliği aşağıdaki senaryolar için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="e42cd-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="e42cd-113">Yeni bir eşitleme altyapısı sunucusu yerleşik veya bir olağanüstü durum kurtarma senaryosunda sonra yeniden, bu öznitelik varolan nesneleri nesneleri şirket içi Azure AD'de bağlar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="e42cd-114">Eşitlenmiş kimlik modeli için bir yalnızca bulut kimlik taşırsanız, ardından bu özniteliği "sabit match" var olan nesneleri nesnelere Azure AD ile şirket içi nesneleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="e42cd-115">Federasyon ve ardından bu özniteliği ile birlikte kullanıyorsanız, **userPrincipalName** talep kümesinde bir kullanıcıyı benzersiz şekilde tanımlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="e42cd-116">Kullanıcılara ilgili olarak bu konu hakkında sourceAnchor yalnızca alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="e42cd-117">Tüm nesne türleri için aynı kurallar geçerlidir, ancak bunu yalnızca kullanıcılar için bu sorun genellikle bir konudur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="e42cd-118">İyi sourceAnchor özniteliği seçme</span><span class="sxs-lookup"><span data-stu-id="e42cd-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="e42cd-119">Öznitelik değeri aşağıdaki kurallara uymalıdır:</span><span class="sxs-lookup"><span data-stu-id="e42cd-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="e42cd-120">Daha az 60 karakter uzunluğunda olabilir</span><span class="sxs-lookup"><span data-stu-id="e42cd-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="e42cd-121">Karakter olmaması, a-z, A-Z veya 0-9 kodlanmış ve 3 karakter olarak sayılır</span><span class="sxs-lookup"><span data-stu-id="e42cd-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="e42cd-122">Bir özel karakter içeremez: &#92;!</span><span class="sxs-lookup"><span data-stu-id="e42cd-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="e42cd-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="e42cd-123"># $ % & * + / = ?</span></span> <span data-ttu-id="e42cd-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="e42cd-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="e42cd-125">Genel olarak benzersiz olmalıdır</span><span class="sxs-lookup"><span data-stu-id="e42cd-125">Must be globally unique</span></span>
* <span data-ttu-id="e42cd-126">Bir dize, tamsayı veya ikili olmalıdır</span><span class="sxs-lookup"><span data-stu-id="e42cd-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="e42cd-127">Kullanıcı adı, bu değişiklikleri dayanmalıdır değil</span><span class="sxs-lookup"><span data-stu-id="e42cd-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="e42cd-128">Değil büyük küçük harfe duyarlı ve örneğe göre farklılık gösterebilir değerleri kaçının</span><span class="sxs-lookup"><span data-stu-id="e42cd-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="e42cd-129">Nesne oluşturulduğunda atanmalıdır</span><span class="sxs-lookup"><span data-stu-id="e42cd-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="e42cd-130">Seçili sourceAnchor dize türünde değilse, Azure AD Connect Base64Encode hiçbir özel karakter emin olmak için öznitelik değeri görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="e42cd-131">ADFS değerinden başka bir federasyon sunucusu kullanıyorsanız Base64Encode öznitelik edebilir sunucunuz emin olun.</span><span class="sxs-lookup"><span data-stu-id="e42cd-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="e42cd-132">SourceAnchor özniteliği büyük/küçük harf duyarlıdır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="e42cd-133">"JohnDoe" değerini "johndoe" ile aynı değil.</span><span class="sxs-lookup"><span data-stu-id="e42cd-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="e42cd-134">Ancak, iki farklı nesneler arasındaki fark durumda yalnızca sahip olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="e42cd-135">Tek bir ormana sahibim şirket içi, daha sonra kullanmanız gereken özniteliği ise **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="e42cd-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="e42cd-136">Ayrıca Azure AD Connect'i hızlı ayarları kullandığınızda kullanılan öznitelik ve aynı zamanda DirSync tarafından kullanılan öznitelik budur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="e42cd-137">Birden çok ormanınız varsa ve kullanıcı etki alanları ve ormanlar arasında sonra taşımayın **objectGUID** bile bu durumda kullanmak için iyi bir özniteliktir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="e42cd-138">Kullanıcıların etki alanları ve ormanlar arasında taşırsanız, taşıma işlemi sırasında kullanıcılarla değişmeyen veya taşınabilir bir özniteliği bulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="e42cd-139">Önerilen yaklaşım yapay bir öznitelik uygulamaktır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="e42cd-140">Bir GUID gibi görünen bir şey tutan bir öznitelik uygun olacaktır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="e42cd-141">Nesne oluşturma sırasında yeni bir GUID oluşturulur ve kullanıcı damgalı.</span><span class="sxs-lookup"><span data-stu-id="e42cd-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="e42cd-142">Özel eşitleme kuralı göre bu değer oluşturmak için eşitleme altyapısı sunucusu oluşturulabilir **objectGUID** ve EKLER seçili özniteliğinde güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="e42cd-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="e42cd-143">Nesneyi taşıdığınızda, bu değer içeriğini de kopyaladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e42cd-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="e42cd-144">Değişmez bildiğiniz varolan bir özniteliğe çekme başka bir çözümdür.</span><span class="sxs-lookup"><span data-stu-id="e42cd-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="e42cd-145">Yaygın olarak kullanılan öznitelikler içerir **EmployeeID**.</span><span class="sxs-lookup"><span data-stu-id="e42cd-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="e42cd-146">Harfleri içeren bir öznitelik düşünüyorsanız, hiçbir fırsat (küçük harf ve büyük harflerle) çalışması için özniteliğinin değeri değiştirebilirsiniz olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e42cd-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="e42cd-147">Kullanılmaması gereken hatalı öznitelikler özniteliklerle kullanıcı adını içerir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="e42cd-148">Marriage veya divorce adı değiştirmek için bu öznitelik için izin verilmiyor bekleniyor.</span><span class="sxs-lookup"><span data-stu-id="e42cd-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="e42cd-149">Bu ayrıca nedenlerinden biri neden olduğu gibi öznitelikleri **userPrincipalName**, **posta**, ve **targetAddress** bile Azure AD Connect Yükleme Sihirbazı'nda seçmek mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="e42cd-150">Bu öznitelikler de içeren "@" sourceAnchor izin verilmeyen bir karakter.</span><span class="sxs-lookup"><span data-stu-id="e42cd-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="e42cd-151">SourceAnchor özniteliği değiştirme</span><span class="sxs-lookup"><span data-stu-id="e42cd-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="e42cd-152">SourceAnchor özniteliği değeri, nesnenin Azure AD'de oluşturulan ve kimliğini eşitlenmiş sonra değiştirilemez.</span><span class="sxs-lookup"><span data-stu-id="e42cd-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="e42cd-153">Bu nedenle, Azure AD Connect'e aşağıdaki kısıtlamalar geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="e42cd-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="e42cd-154">SourceAnchor özniteliği yalnızca ilk yükleme sırasında ayarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="e42cd-155">Yükleme Sihirbazı'nı yeniden çalıştırın, bu seçenek salt okunurdur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="e42cd-156">Ardından bu ayarı değiştirmek gerekirse, yeniden yükleyin ve gerekir kaldırın.</span><span class="sxs-lookup"><span data-stu-id="e42cd-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="e42cd-157">Başka bir Azure AD Connect sunucusu yüklerseniz, daha önce kullanılan aynı sourceAnchor özniteliği seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="e42cd-158">Daha önce DirSync kullanarak ve Azure AD Connect'e taşıma durumunda kullanmalısınız **objectGUID** , DirSync tarafından kullanılan öznitelik olduğundan.</span><span class="sxs-lookup"><span data-stu-id="e42cd-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="e42cd-159">SourceAnchor için değer sonra değiştirilirse Azure ad, ardından Azure AD Connect eşitleme bir hata oluşturur ve daha fazla değişiklik üzerinde sorun çözüldükten önce nesne ve sourceAnchor değiştirildiğinde, kaynak dizininde izin vermiyor nesnesi verildi.</span><span class="sxs-lookup"><span data-stu-id="e42cd-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="e42cd-160">MsDS-ConsistencyGuid sourceAnchor kullanma</span><span class="sxs-lookup"><span data-stu-id="e42cd-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="e42cd-161">Varsayılan olarak, Azure AD Connect (sürüm 1.1.486.0 ve daha eski) objectGUID sourceAnchor özniteliği olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="e42cd-162">Sistem tarafından oluşturulan objectguıd'dir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="e42cd-163">Değerini oluştururken AD nesnelerini şirket içi belirtemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="e42cd-164">Bölümünde açıklandığı gibi [sourceAnchor](#sourceanchor), sourceAnchor değeri belirtmek için gereken olduğu senaryo vardır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="e42cd-165">Senaryolar için uygun olup olmadığını sourceAnchor özniteliği olarak yapılandırılabilir bir AD özniteliği (örneğin, msDS-ConsistencyGuid) kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="e42cd-166">Azure AD Connect (sürüm 1.1.524.0 ve sonra) şimdi sourceAnchor özniteliği olarak msDS-ConsistencyGuid kullanımını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="e42cd-167">Bu özelliği kullanıldığında, Azure AD Connect eşitleme kuralları otomatik olarak yapılandırır:</span><span class="sxs-lookup"><span data-stu-id="e42cd-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="e42cd-168">MsDS-ConsistencyGuid sourceAnchor özniteliği olarak kullanıcı nesneleri için kullanın.</span><span class="sxs-lookup"><span data-stu-id="e42cd-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="e42cd-169">ObjectGUID diğer nesne türleri için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="e42cd-170">Verilen herhangi için şirket içi AD kullanıcı nesnesi, msDS-ConsistencyGuid özniteliği msDS-ConsistencyGuid özniteliği şirket içi Active Directory'de objectGUID değerini geri doldurulan, Azure AD Connect yazma değildir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="e42cd-171">MsDS-ConsistencyGuid özniteliği doldurulduktan sonra Azure AD Connect sonra Azure AD nesne dışarı aktarır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="e42cd-172">Bir kez bir şirket içi AD nesne (yani AD bağlayıcı alanına içeri aktarılıp, meta veri deposuna öngörülen) Azure AD Connect içine aktarılır, sourceAnchor değerini artık değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="e42cd-173">SourceAnchor değeri belirtmek için bir şirket içi verilen AD nesne, Azure AD Connect içeri aktarılmadan önce kendi msDS-ConsistencyGuid özniteliği yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="e42cd-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="e42cd-174">İzin gerekiyor</span><span class="sxs-lookup"><span data-stu-id="e42cd-174">Permission required</span></span>
<span data-ttu-id="e42cd-175">Bu özelliğin çalışması için şirket içi Active Directory ile eşitlemek için kullanılan AD DS hesap şirket içi Active Directory'de msDS-ConsistencyGuid öznitelik yazma izni verilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="e42cd-176">ConsistencyGuid - yeni yükleme nasıl etkinleştirileceğini</span><span class="sxs-lookup"><span data-stu-id="e42cd-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="e42cd-177">Yeni yükleme sırasında sourceAnchor olarak ConsistencyGuid kullanımını etkinleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="e42cd-178">Bu bölümde, hızlı ve özel yükleme ayrıntıları ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="e42cd-179">Azure AD Connect yalnızca yeni sürümlerini (1.1.524.0 ve sonra) yeni yüklemesi sırasında sourceAnchor olarak ConsistencyGuid kullanımını destekler.</span><span class="sxs-lookup"><span data-stu-id="e42cd-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="e42cd-180">ConsistencyGuid özelliğini etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="e42cd-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="e42cd-181">Şu anda bu özellik yalnızca yeni Azure AD Connect yüklemesi sırasında yalnızca etkinleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="e42cd-182">Hızlı yükleme</span><span class="sxs-lookup"><span data-stu-id="e42cd-182">Express Installation</span></span>
<span data-ttu-id="e42cd-183">Azure AD Connect ile hızlı mod yüklerken, Azure AD Connect Sihirbazı otomatik olarak aşağıdaki mantık kullanılarak sourceAnchor özniteliği olarak kullanmak için en uygun AD özniteliği belirler:</span><span class="sxs-lookup"><span data-stu-id="e42cd-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="e42cd-184">İlk olarak, Azure AD Connect Sihirbazı'nı (varsa) önceki Azure AD Connect yüklemesi sourceAnchor özniteliği olarak kullanılan AD öznitelik almak için Azure AD kiracınıza sorgular.</span><span class="sxs-lookup"><span data-stu-id="e42cd-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="e42cd-185">Bu bilgiler varsa, Azure AD Connect aynı AD özniteliğini kullanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="e42cd-186">Azure AD Connect yalnızca yeni sürümlerini (1.1.524.0 ve sonra) sourceAnchor özniteliği hakkında bilgileri depolar Azure AD kiracınızda yükleme sırasında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="e42cd-187">Azure AD Connect eski sürümlerinde yoktur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="e42cd-188">Kullanılan sourceAnchor özniteliği hakkında bilgi kullanılabilir değilse, sihirbaz, şirket içi Active Directory'de msDS-ConsistencyGuid öznitelik durumunu denetler.</span><span class="sxs-lookup"><span data-stu-id="e42cd-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="e42cd-189">Öznitelik dizinde herhangi bir nesne üzerinde yapılandırılmazsa sihirbaz msDS-ConsistencyGuid sourceAnchor özniteliği olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="e42cd-190">Öznitelik dizininde bir veya daha fazla nesnelerde yapılandırılmışsa, sihirbazın öznitelik diğer uygulamalar tarafından kullanılıyor ve sourceAnchor özniteliği olarak uygun değil sonucuna...</span><span class="sxs-lookup"><span data-stu-id="e42cd-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="e42cd-191">Bu durumda sihirbazın geri sourceAnchor özniteliği olarak objectGUID kullanmaya döner.</span><span class="sxs-lookup"><span data-stu-id="e42cd-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="e42cd-192">SourceAnchor özniteliği karar sonra sihirbaz, Azure AD kiracınızda bilgileri depolar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="e42cd-193">Bilgileri, gelecekteki Azure AD Connect yüklemesi tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="e42cd-194">Hızlı yükleme işlemi tamamlandıktan sonra Sihirbazı hangi öznitelik olarak kaynak bağlantısı özniteliği çekilen bildirir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![SourceAnchor için çekildi AD özniteliği Sihirbazı sizi bilgilendirir](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="e42cd-196">Özel yükleme</span><span class="sxs-lookup"><span data-stu-id="e42cd-196">Custom installation</span></span>
<span data-ttu-id="e42cd-197">Azure AD Connect özel moduyla yüklerken, Azure AD Connect Sihirbazı sourceAnchor özniteliği yapılandırırken iki seçenek sunar:</span><span class="sxs-lookup"><span data-stu-id="e42cd-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Özel yükleme - sourceAnchor yapılandırma](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="e42cd-199">Ayar</span><span class="sxs-lookup"><span data-stu-id="e42cd-199">Setting</span></span> | <span data-ttu-id="e42cd-200">Açıklama</span><span class="sxs-lookup"><span data-stu-id="e42cd-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e42cd-201">Kaynak bağlantısını benim için Azure yönetsin</span><span class="sxs-lookup"><span data-stu-id="e42cd-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="e42cd-202">Azure AD’nin sizin için özniteliği seçmesini istiyorsanız bu seçeneği belirleyin.</span><span class="sxs-lookup"><span data-stu-id="e42cd-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="e42cd-203">Bu seçeneği belirlerseniz, Azure AD Connect Sihirbazı aynı durum geçerlidir [sourceAnchor özniteliği seçme mantığı Express yüklemesi sırasında kullanılan](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="e42cd-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="e42cd-204">Express yüklemesine benzer, sihirbazın, özel yükleme tamamlandıktan sonra kaynak bağlantısı özniteliği olarak hangi öznitelik çekilen bildirir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="e42cd-205">Belirli bir öznitelik</span><span class="sxs-lookup"><span data-stu-id="e42cd-205">A specific attribute</span></span> | <span data-ttu-id="e42cd-206">SourceAnchor özniteliği olarak mevcut bir AD özniteliğini belirtmek istiyorsanız bu seçeneği belirleyin.</span><span class="sxs-lookup"><span data-stu-id="e42cd-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="e42cd-207">ConsistencyGuid - var olan dağıtım nasıl etkinleştirileceğini</span><span class="sxs-lookup"><span data-stu-id="e42cd-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="e42cd-208">Kaynak bağlantısı özniteliği olarak objectGUID kullanan mevcut bir Azure AD Connect dağıtımınız varsa, bunun yerine ConsistencyGuid kullanmaya geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="e42cd-209">Azure AD Connect yalnızca yeni sürümlerini (1.1.552.0 ve sonra) kaynak bağlantısı özniteliği olarak ConsistencyGuid objectGUID geçiş destekler.</span><span class="sxs-lookup"><span data-stu-id="e42cd-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="e42cd-210">ObjectGUID ConsistencyGuid için kaynak bağlantısı özniteliği olarak değiştirmek için:</span><span class="sxs-lookup"><span data-stu-id="e42cd-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="e42cd-211">Azure AD Connect Sihirbazı'nı başlatın ve tıklayın **yapılandırma** görevleri ekranına gidin.</span><span class="sxs-lookup"><span data-stu-id="e42cd-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="e42cd-212">Seçin **yapılandırma kaynak bağlantısı** görev seçeneğini ve tıklayın **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="e42cd-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Var olan dağıtım - adım 2 ConsistencyGuid etkinleştir](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="e42cd-214">Azure AD yönetici kimlik bilgilerinizi girin ve tıklayın **sonraki**.</span><span class="sxs-lookup"><span data-stu-id="e42cd-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="e42cd-215">Azure AD Connect Sihirbazı şirket içi Active Directory'de msDS-ConsistencyGuid öznitelik durumunu inceler.</span><span class="sxs-lookup"><span data-stu-id="e42cd-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="e42cd-216">Öznitelik, dizinde herhangi bir nesne üzerinde yapılandırılmamışsa, Azure AD Connect'i başka bir uygulama öznitelik kullanmakta olduğu ve kaynak bağlantısı özniteliği olarak kullanmak güvenlidir sonlanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="e42cd-217">Tıklatın **sonraki** devam etmek için.</span><span class="sxs-lookup"><span data-stu-id="e42cd-217">Click **Next** to continue.</span></span>

   ![Var olan dağıtım - 4. adım ConsistencyGuid etkinleştir](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="e42cd-219">İçinde **yapılandırma için hazır** ekranında **yapılandırma** yapılandırma değişikliği yapma.</span><span class="sxs-lookup"><span data-stu-id="e42cd-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![Var olan dağıtım - 5. adım ConsistencyGuid etkinleştir](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="e42cd-221">Yapılandırma tamamlandıktan sonra sihirbazın bu msDS-ConsistencyGuid artık kaynak bağlantısı özniteliği olarak kullanılan gösterir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![Var olan dağıtım - adım 6 ConsistencyGuid etkinleştir](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="e42cd-223">Öznitelik dizininde bir veya daha fazla nesnelerde yapılandırılmışsa (4. adım) Çözümleme sırasında sihirbazın özniteliği başka bir uygulama tarafından kullanılıyor ve aşağıdaki çizimde gösterildiği gibi bir hata döndürür sonlanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="e42cd-224">Öznitelik mevcut uygulamalar tarafından kullanılmadığından eminseniz, hatayı bastırmak hakkında bilgi için desteğe başvurun gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Var olan dağıtım - hata ConsistencyGuid etkinleştir](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="e42cd-226">AD FS veya üçüncü taraf Federasyon yapılandırma üzerinde etkisi</span><span class="sxs-lookup"><span data-stu-id="e42cd-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="e42cd-227">Azure AD Connect kullanıyorsanız yönetmek için AD FS dağıtımı şirket içi, Azure AD Connect sourceAnchor aynı AD özniteliğini kullanmak için talep kuralları otomatik olarak güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="e42cd-228">Bu, ADFS tarafından oluşturulan İmmutableıd talep Azure AD'ye aktarılan sourceAnchor değerleri ile tutarlı olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="e42cd-229">AD FS Azure AD Connect dışında yönettiğiniz veya üçüncü taraf federasyon sunucuları için kimlik doğrulaması kullanıyorsanız, makale bölümde açıklandığı gibi Azure AD'ye aktarılan sourceAnchor değerleri ile tutarlı olacak şekilde İmmutableıd talep için talep kurallarını el ile güncelleştirmeniz gerekir [Değiştir AD FS talep kuralları](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="e42cd-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="e42cd-230">Yükleme tamamlandıktan sonra Sihirbazı'nı aşağıdaki uyarıyı döndürür:</span><span class="sxs-lookup"><span data-stu-id="e42cd-230">The wizard returns the following warning after installation completes:</span></span>

![Üçüncü taraf Federasyon yapılandırma](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="e42cd-232">Yeni dizinler için var olan dağıtım ekleme</span><span class="sxs-lookup"><span data-stu-id="e42cd-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="e42cd-233">ConsistencyGuid özelliği etkinleştirilmiş Azure AD Connect dağıttıysanız ve şimdi başka bir dizin dağıtımına eklemek istediğiniz varsayalım.</span><span class="sxs-lookup"><span data-stu-id="e42cd-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="e42cd-234">Dizin eklemeyi denediğinizde, Azure AD Connect Sihirbazı directory mSDS-ConsistencyGuid özniteliğinde durumunu denetler.</span><span class="sxs-lookup"><span data-stu-id="e42cd-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="e42cd-235">Öznitelik dizininde bir veya daha fazla nesnelerde yapılandırılmışsa sihirbaz öznitelik diğer uygulamalar tarafından kullanılıyor ve aşağıdaki çizimde gösterildiği gibi bir hata döndürür sonlanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="e42cd-236">Öznitelik mevcut uygulamalar tarafından kullanılmadığından eminseniz, hatayı bastırmak hakkında bilgi için desteğe başvurun gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Yeni dizinler için var olan dağıtım ekleme](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="e42cd-238">Azure AD oturum açma</span><span class="sxs-lookup"><span data-stu-id="e42cd-238">Azure AD sign-in</span></span>
<span data-ttu-id="e42cd-239">Şirket içi dizininizi Azure AD ile tümleştirme sırasında önemlidir şekilde kullanıcı eşitleme ayarlarını nasıl etkileyebileceğini anlaması için kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="e42cd-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="e42cd-240">Azure AD, kullanıcının kimliğini doğrulamak için userPrincipalName (UPN) kullanır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="e42cd-241">Ancak, kullanıcılarınızın eşitlediğinizde, userPrincipalName değeri için dikkatle kullanılacak öznitelik seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="e42cd-242">UserPrincipalName özniteliği seçme</span><span class="sxs-lookup"><span data-stu-id="e42cd-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="e42cd-243">Sağlamak için öznitelik seçerken Azure birinde kullanılacak UPN değerini sağlamalısınız</span><span class="sxs-lookup"><span data-stu-id="e42cd-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="e42cd-244">Biçimi olmalıdır UPN sözdizimi (RFC 822) öznitelik değerlerini uygunusername@domain</span><span class="sxs-lookup"><span data-stu-id="e42cd-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="e42cd-245">Değerleri soneki Azure AD'de doğrulanmış özel etki alanlarını birine eşleşen</span><span class="sxs-lookup"><span data-stu-id="e42cd-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="e42cd-246">Hızlı Ayarları'nda, varsayılan özniteliğinin userPrincipalName seçimdir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="e42cd-247">UserPrincipalName özniteliğinin değeri içermiyorsa, kullanıcılarınızın Azure oturumu açın istediğiniz sonra seçmeniz gerekir **özel yükleme**.</span><span class="sxs-lookup"><span data-stu-id="e42cd-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="e42cd-248">Özel etki alanı durumu ve UPN</span><span class="sxs-lookup"><span data-stu-id="e42cd-248">Custom domain state and UPN</span></span>
<span data-ttu-id="e42cd-249">UPN soneki doğrulanmış bir etki alanı olduğundan emin olmak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="e42cd-250">John, contoso.com ormanındaki bir kullanıcıdır.</span><span class="sxs-lookup"><span data-stu-id="e42cd-250">John is a user in contoso.com.</span></span> <span data-ttu-id="e42cd-251">Şirket içi UPN kullanmak için John istediğiniz john@contoso.com kullanıcılar, Azure AD directory contoso.onmicrosoft.com eşitlendiğinden sonra Azure'da oturum açmak için.</span><span class="sxs-lookup"><span data-stu-id="e42cd-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="e42cd-252">Bunu yapmak için ekleme ve contoso.com özel bir etki alanı kullanıcıları eşitlemeye başlamadan önce Azure AD'de doğrulama gerekir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="e42cd-253">John, örneğin contoso.com, UPN sonekinin Azure AD'de doğrulanmış bir etki alanı eşleşmiyorsa, Azure AD ile contoso.onmicrosoft.com UPN soneki değiştirir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="e42cd-254">Yönlendirilebilir olmayan şirket içi etki alanları ve Azure AD için UPN</span><span class="sxs-lookup"><span data-stu-id="e42cd-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="e42cd-255">Bazı kuruluşlar contoso.local veya contoso gibi basit tek etiketli etki alanları gibi yönlendirilebilir olmayan etki alanları sahiptir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="e42cd-256">Azure AD'de yönlendirilemeyen bir etki alanını doğrulamak mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="e42cd-257">Azure AD Connect yalnızca bir doğrulanmış etki alanı için Azure AD'ye eşitleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="e42cd-258">Azure AD dizini oluşturduğunuzda, örneğin, contoso.onmicrosoft.com Azure AD için varsayılan etki alanı haline gelir yönlendirilebilir bir etki alanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="e42cd-259">Bu nedenle, diğer yönlendirilebilir etki alanında böyle bir senaryo için varsayılan onmicrosoft.com etki alanı eşitleme istemediğiniz durumda doğrulamak gerekli olur.</span><span class="sxs-lookup"><span data-stu-id="e42cd-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="e42cd-260">Okuma [özel etki alanı adınızı Azure Active Directory'ye ekleme](../active-directory-add-domain.md) ekleme ve etki alanı doğrulama hakkında daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="e42cd-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="e42cd-261">Azure AD Connect yönlendirilebilir olmayan etki alanı ortamında çalıştırıyorsanız ve uygun şekilde express ayarlarla devam giderek uyar algılar.</span><span class="sxs-lookup"><span data-stu-id="e42cd-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="e42cd-262">Yönlendirilemeyen bir etki alanında çalışıyorsanız, ardından bu kullanıcıların UPN yönlendirilemeyen sonekleri çok olabilir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="e42cd-263">Örneğin, contoso.local altında çalıştırıyorsanız, Azure AD Connect hızlı ayarları kullanarak yerine özel ayarlar kullanmanızı önerir.</span><span class="sxs-lookup"><span data-stu-id="e42cd-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="e42cd-264">Özel ayarlarını kullanarak, kullanıcıların Azure AD ile eşitlenir sonra Azure'da oturum açmak için UPN kullanılması gereken özniteliği belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e42cd-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e42cd-265">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="e42cd-265">Next steps</span></span>
<span data-ttu-id="e42cd-266">[Şirket içi kimliklerinizi Azure Active Directory ile tümleştirme](active-directory-aadconnect.md) hakkında daha fazla bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="e42cd-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
