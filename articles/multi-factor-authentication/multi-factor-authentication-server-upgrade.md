---
title: "aaaAzure MFA sunucusu yükseltme | Microsoft Docs"
description: "Adımlar ve kılavuz tooupgrade hello Azure çok faktörlü kimlik doğrulama sunucusu tooa daha yeni sürümü."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 50bb8ac3-5559-4d8b-a96a-799a74978b14
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: aaa8d400e0e5f1c6be3a6d22cde6dd893ef4d546
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-toohello-latest-azure-multi-factor-authentication-server"></a><span data-ttu-id="592a0-103">Toohello yükseltme en son Azure multi-Factor Authentication sunucusu</span><span class="sxs-lookup"><span data-stu-id="592a0-103">Upgrade toohello latest Azure Multi-Factor Authentication Server</span></span>

<span data-ttu-id="592a0-104">Bu makalede hello anlatılmaktadır Azure çok faktörlü kimlik doğrulama (MFA) sunucusu v6.0 yükseltme sürecini ya da daha yüksek.</span><span class="sxs-lookup"><span data-stu-id="592a0-104">This article walks you through hello process of upgrading Azure Multi-Factor Authentication (MFA) Server v6.0 or higher.</span></span> <span data-ttu-id="592a0-105">Tooupgrade hello PhoneFactor Aracısı'nın eski bir sürümü gereksinim duyarsanız, çok başvurun[yükseltme hello PhoneFactor Aracısı tooAzure çok faktörlü kimlik doğrulama sunucusu](multi-factor-authentication-get-started-server-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="592a0-105">If you need tooupgrade an old version of hello PhoneFactor Agent, refer too[Upgrade hello PhoneFactor Agent tooAzure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server-upgrade.md).</span></span>

<span data-ttu-id="592a0-106">Yükseltme v6.x veya eski toov7.x ya da daha yeni varsa, tüm bileşenler .NET 2.0 too.NET 4.5 değiştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-106">If you're upgrading from v6.x or older toov7.x or newer, all components change from .NET 2.0 too.NET 4.5.</span></span> <span data-ttu-id="592a0-107">Tüm bileşenler için Microsoft Visual C++ 2015 Redistributable Update 1 veya daha yüksek de gerekir.</span><span class="sxs-lookup"><span data-stu-id="592a0-107">All components also require Microsoft Visual C++ 2015 Redistributable Update 1 or higher.</span></span> <span data-ttu-id="592a0-108">Bunlar zaten yüklü değilse hello MFA sunucusu yükleyici hem hello x86 hem x64 sürümlerini bu bileşenleri yükler.</span><span class="sxs-lookup"><span data-stu-id="592a0-108">hello MFA Server installer installs both hello x86 and x64 versions of these components if they aren't already installed.</span></span> <span data-ttu-id="592a0-109">Merhaba Kullanıcı Portalı ve mobil uygulama Web hizmeti ayrı sunucularda çalıştırırsanız, tooinstall bu paketleri bu bileşenler yükseltmeden önce gerekir.</span><span class="sxs-lookup"><span data-stu-id="592a0-109">If hello User Portal and Mobile App Web Service run on separate servers, you need tooinstall those packages before upgrading those components.</span></span> <span data-ttu-id="592a0-110">En son Microsoft Visual C++ 2015 Redistributable güncelleştirmesini hello hello arayabilirsiniz [Microsoft Download Center](https://www.microsoft.com/en-us/download/).</span><span class="sxs-lookup"><span data-stu-id="592a0-110">You can search for hello latest Microsoft Visual C++ 2015 Redistributable update on hello [Microsoft Download Center](https://www.microsoft.com/en-us/download/).</span></span> 

## <a name="install-hello-latest-version-of-azure-mfa-server"></a><span data-ttu-id="592a0-111">Azure MFA sunucusu Hello en son sürümünü yükleyin</span><span class="sxs-lookup"><span data-stu-id="592a0-111">Install hello latest version of Azure MFA Server</span></span>

1. <span data-ttu-id="592a0-112">Merhaba yönergeleri kullanın [indirme hello Azure çok faktörlü kimlik doğrulama sunucusu](multi-factor-authentication-get-started-server.md#download-the-azure-multi-factor-authentication-server) tooget hello en son sürümünü hello Azure MFA sunucusu.</span><span class="sxs-lookup"><span data-stu-id="592a0-112">Use hello instructions in [Download hello Azure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server.md#download-the-azure-multi-factor-authentication-server) tooget hello latest version of hello Azure MFA Server.</span></span>
2. <span data-ttu-id="592a0-113">Merhaba MFA sunucusu veri dosyasındaki ana MFA sunucunuzda C:\Program Files\Multi-Factor Authentication Server\Data\PhoneFactor.pfdata (olduğunu varsayarak hello varsayılan yükleme konumu) konumunda bulunan bir yedeğini alın.</span><span class="sxs-lookup"><span data-stu-id="592a0-113">Make a backup of hello MFA Server data file located at C:\Program Files\Multi-Factor Authentication Server\Data\PhoneFactor.pfdata (assuming hello default install location) on your master MFA Server.</span></span>
3. <span data-ttu-id="592a0-114">Yüksek kullanılabilirlik için birden çok sunucu çalıştırırsanız, toohello MFA sunucusu kimlik doğrulaması ve böylece yükseltiyorsanız toohello sunucuları trafiği göndermeye Durdur hello istemci sistemleri değiştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-114">If you run multiple servers for high availability, change hello client systems that authenticate toohello MFA Server so that they stop sending traffic toohello servers that are upgrading.</span></span> <span data-ttu-id="592a0-115">Bir yük dengeleyici kullanırsanız, MFA sunucusu hello yük dengeleyiciden kaldırın, yükseltme Merhaba ve ardından hello sunucu geri hello grubuna ekleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-115">If you use a load balancer, remove a MFA Server from hello load balancer, do hello upgrade, and then add hello server back into hello farm.</span></span>
4. <span data-ttu-id="592a0-116">Merhaba yeni Yükleyici her MFA sunucusunda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-116">Run hello new installer on each MFA Server.</span></span> <span data-ttu-id="592a0-117">Hello Yöneticisi tarafından çoğaltılmasını hello eski veri dosyası okuyabilir bağımlı sunucular ilk yükseltin.</span><span class="sxs-lookup"><span data-stu-id="592a0-117">Upgrade subordinate servers first because they can read hello old data file being replicated by hello master.</span></span> 

  <span data-ttu-id="592a0-118">Geçerli MFA sunucunuz çalışan hello Yükleyici önce toouninstall gerekmez.</span><span class="sxs-lookup"><span data-stu-id="592a0-118">You do not need toouninstall your current MFA Server before running hello installer.</span></span> <span data-ttu-id="592a0-119">Merhaba yükleyici yerinde yükseltme gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="592a0-119">hello installer performs an in-place upgrade.</span></span> <span data-ttu-id="592a0-120">aynı hello yükler şekilde hello yükleme yolu hello önceki yüklemesinden hello kayıt defterinden kayıt konum (örneğin, C:\Program Files\Multi-Factor Authentication Server).</span><span class="sxs-lookup"><span data-stu-id="592a0-120">hello installation path is picked up from hello registry from hello previous installation, so it installs in hello same location (for example, C:\Program Files\Multi-Factor Authentication Server).</span></span> 
  
5. <span data-ttu-id="592a0-121">İstendiğinde tooinstall Microsoft Visual C++ 2015 Redistributable güncelleştirme paketini değilseniz, hello isteğini kabul edin.</span><span class="sxs-lookup"><span data-stu-id="592a0-121">If you're prompted tooinstall a Microsoft Visual C++ 2015 Redistributable update package, accept hello prompt.</span></span> <span data-ttu-id="592a0-122">Her iki hello x86 hem x64 sürümleri hello paketi yüklenir.</span><span class="sxs-lookup"><span data-stu-id="592a0-122">Both hello x86 and x64 versions of hello package are installed.</span></span>
5. <span data-ttu-id="592a0-123">Merhaba Web hizmeti SDK'sı kullanıyorsanız istenir tooinstall hello yeni Web hizmeti SDK'sı.</span><span class="sxs-lookup"><span data-stu-id="592a0-123">If you use hello Web Service SDK, you are prompted tooinstall hello new Web Service SDK.</span></span> <span data-ttu-id="592a0-124">Yüklediğinizde yeni Web hizmeti SDK'sı Merhaba, daha önce yüklenmiş hello sanal dizin (örneğin, Phonefactorwebservicesdk) bu hello sanal dizin adıyla eşleştiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="592a0-124">When you install hello new Web Service SDK, make sure that hello virtual directory name matches hello previously installed virtual directory (for example, MultiFactorAuthWebServiceSdk).</span></span>
6. <span data-ttu-id="592a0-125">Tüm bağımlı sunucularında Hello adımları yineleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-125">Repeat hello steps on all subordinate servers.</span></span> <span data-ttu-id="592a0-126">Merhaba ast toobe hello yeni ana sonra yükseltme hello eski ana sunucu birini yükseltin.</span><span class="sxs-lookup"><span data-stu-id="592a0-126">Promote one of hello subordinates toobe hello new master, then upgrade hello old master server.</span></span> 

## <a name="upgrade-hello-user-portal"></a><span data-ttu-id="592a0-127">Merhaba Kullanıcı Portalı yükseltme</span><span class="sxs-lookup"><span data-stu-id="592a0-127">Upgrade hello User Portal</span></span>

1. <span data-ttu-id="592a0-128">Merhaba sanal hello Kullanıcı Portalı yükleme konumu (örneğin, C:\inetpub\wwwroot\MultiFactorAuth) Directory'de hello web.config dosyasının yedeğini alın.</span><span class="sxs-lookup"><span data-stu-id="592a0-128">Make a backup of hello web.config file that is in hello virtual directory of hello User Portal installation location (for example, C:\inetpub\wwwroot\MultiFactorAuth).</span></span> <span data-ttu-id="592a0-129">Toohello varsayılan tema herhangi bir değişiklik yapıldıysa, hello App_Themes\Default klasörünün yanı sıra bir yedeğini alın.</span><span class="sxs-lookup"><span data-stu-id="592a0-129">If any changes were made toohello default theme, make a backup of hello App_Themes\Default folder as well.</span></span> <span data-ttu-id="592a0-130">Daha iyi toocreate hello varsayılan klasör kopyasıdır ve toochange hello varsayılan tema daha yeni bir tema oluşturun.</span><span class="sxs-lookup"><span data-stu-id="592a0-130">It is better toocreate a copy of hello Default folder and create a new theme than toochange hello Default theme.</span></span>
2. <span data-ttu-id="592a0-131">MFA sunucusu yüklemesi Hello Kullanıcı Portalı aynı sunucu diğer MFA sunucusu bileşenleri hello gibi hello hello üzerinde çalışıyorsa tooupdate hello Kullanıcı Portalı ister.</span><span class="sxs-lookup"><span data-stu-id="592a0-131">If hello User Portal runs on hello same server as hello other MFA Server components, hello MFA Server installation prompts you tooupdate hello User Portal.</span></span> <span data-ttu-id="592a0-132">Merhaba isteğini kabul edin ve hello Kullanıcı Portalı güncelleştirmesini yükleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-132">Accept hello prompt and install hello User Portal update.</span></span> <span data-ttu-id="592a0-133">Daha önce yüklenmiş hello sanal dizin (örneğin, MultiFactorAuth) bu hello sanal dizin adıyla eşleşen denetleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-133">Check that hello virtual directory name matches hello previously installed virtual directory (for example, MultiFactorAuth).</span></span>
3. <span data-ttu-id="592a0-134">Merhaba Kullanıcı Portalı kendi sunucusundaysa, hello hello multifactorauthenticationuserportalsetup64.msi dosyasını dosya Kopyala yükleme konumu hello MFA sunucuları birinin ve hello Kullanıcı Portalı web sunucusuna yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-134">If hello User Portal is on its own server, copy hello MultiFactorAuthenticationUserPortalSetup64.msi file from hello install location of one of hello MFA Servers and put it onto hello User Portal web server.</span></span> <span data-ttu-id="592a0-135">Merhaba yükleyiciyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-135">Run hello installer.</span></span> 

  <span data-ttu-id="592a0-136">Belirten bir hata oluşursa, "Microsoft Visual C++ 2015 Redistributable Update 1 veya daha yüksek gereklidir" yükleyip hello son güncelleştirme paketini hello [Microsoft Download Center](https://www.microsoft.com/download/).</span><span class="sxs-lookup"><span data-stu-id="592a0-136">If an error occurs stating, "Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required," download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="592a0-137">Her iki hello x86 hem x64 sürümünü yükleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-137">Install both hello x86 and x64 versions.</span></span>

4. <span data-ttu-id="592a0-138">Kullanıcı Portalı yazılımı yüklü Hello güncelleştirdikten sonra hello yeni web.config dosyasını 1. adımda yaptığınız hello web.config yedekleme karşılaştırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-138">After hello updated User Portal software is installed, compare hello web.config backup you made in step 1 with hello new web.config file.</span></span> <span data-ttu-id="592a0-139">Yeni öznitelik hello yeni web.config dosyasında yoksa, hello sanal dizin toooverwrite hello yeni bir yedekleme web.config kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="592a0-139">If no new attributes exist in hello new web.config, copy your backup web.config into hello virtual directory toooverwrite hello new one.</span></span> <span data-ttu-id="592a0-140">Toocopy/Yapıştır hello appSettings değerleri ve hello Web hizmeti SDK hello yedekleme hello yeni web.config dosyasına URL'den bunun başka bir seçenektir.</span><span class="sxs-lookup"><span data-stu-id="592a0-140">Another option is toocopy/paste hello appSettings values and hello Web Service SDK URL from hello backup file into hello new web.config.</span></span>

<span data-ttu-id="592a0-141">Birden çok sunucuya hello kullanıcı portalı varsa, bunların tümünün hello yüklemesinde yineleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-141">If you have hello User Portal on multiple servers, repeat hello installation on all of them.</span></span> 


## <a name="upgrade-hello-mobile-app-web-service"></a><span data-ttu-id="592a0-142">Yükseltme hello mobil uygulama Web hizmeti</span><span class="sxs-lookup"><span data-stu-id="592a0-142">Upgrade hello Mobile App Web Service</span></span>

1. <span data-ttu-id="592a0-143">Mobil uygulama Web hizmeti yükleme konumu (örneğin, C:\inetpub\wwwroot\app veya C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService) hello sanal hello dizinde: hello web.config dosyasının yedeğini alın.</span><span class="sxs-lookup"><span data-stu-id="592a0-143">Make a backup of hello web.config file that is in hello virtual directory of hello Mobile App Web Service installation location (for example, C:\inetpub\wwwroot\app or C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService).</span></span>
2. <span data-ttu-id="592a0-144">Merhaba hello multifactorauthenticationmobileappwebservicesetup64.msi dosyasını dosya Kopyala yüklemesi hello MFA sunucuları konumunu ve hello mobil uygulama kayıt web sunucunuza yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-144">Copy hello MultiFactorAuthenticationMobileAppWebServiceSetup64.msi file from hello install location of hello MFA Servers and put it onto hello Mobile App registration web server.</span></span>
3. <span data-ttu-id="592a0-145">Merhaba yükleyiciyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-145">Run hello installer.</span></span> 

  <span data-ttu-id="592a0-146">Microsoft Visual C++ 2015 Redistributable Update 1 veya daha yüksek gerekli olduğunu bildiren bir hata meydana gelirse yükleyip hello son güncelleştirme paketini hello [Microsoft Download Center](https://www.microsoft.com/download/).</span><span class="sxs-lookup"><span data-stu-id="592a0-146">If an error occurs stating that Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required, download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="592a0-147">Her iki hello x86 hem x64 sürümünü yükleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-147">Install both hello x86 and x64 versions.</span></span>

4. <span data-ttu-id="592a0-148">Güncelleştirilmiş hello mobil uygulama Web hizmeti yazılım yüklendikten sonra hello yeni web.config dosyasını 1. adımda yedeklenen hello web.config dosyasında karşılaştırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-148">After hello updated Mobile App Web Service software installs, compare hello web.config file that was backed up in step 1 with hello new web.config file.</span></span> <span data-ttu-id="592a0-149">Yeni öznitelik hello yeni web.config dosyasında yoksa, kaydedilen web.config hello sanal dizinine kopyalayın ve hello yeni bir üzerine yazma.</span><span class="sxs-lookup"><span data-stu-id="592a0-149">If no new attributes exist in hello new web.config, you can copy your saved web.config back into hello virtual directory and overwrite hello new one.</span></span> <span data-ttu-id="592a0-150">Toocopy/Yapıştır hello appSettings değerleri ve hello Web hizmeti SDK hello yedekleme hello yeni web.config dosyasına URL'den bunun başka bir seçenektir.</span><span class="sxs-lookup"><span data-stu-id="592a0-150">Another option is toocopy/paste hello appSettings values and hello Web Service SDK URL from hello backup file into hello new web.config.</span></span>

<span data-ttu-id="592a0-151">Birden çok sunucuya hello mobil uygulama Web hizmeti varsa, bunların tümünün hello yüklemesinde yineleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-151">If you have hello Mobile App Web Service on multiple servers, repeat hello installation on all of them.</span></span> 

## <a name="upgrade-hello-ad-fs-adapters"></a><span data-ttu-id="592a0-152">Yükseltme hello AD FS bağdaştırıcısı</span><span class="sxs-lookup"><span data-stu-id="592a0-152">Upgrade hello AD FS Adapters</span></span>


### <a name="if-mfa-runs-on-different-servers-than-ad-fs"></a><span data-ttu-id="592a0-153">MFA ADFS değerinden farklı sunucularda çalışıyorsa</span><span class="sxs-lookup"><span data-stu-id="592a0-153">If MFA runs on different servers than AD FS</span></span>

<span data-ttu-id="592a0-154">Multi-Factor Authentication sunucusu, AD FS sunucularından ayrı olarak çalıştırırsanız, bu yönergeler yalnızca geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="592a0-154">These instructions only apply if you run Multi-Factor Authentication Server separately from your AD FS servers.</span></span> <span data-ttu-id="592a0-155">Her iki hizmet çalıştırırsanız hello aynı sunucuları, bu bölüm atlayın ve toohello yükleme adımlarını gidin.</span><span class="sxs-lookup"><span data-stu-id="592a0-155">If both services run on hello same servers, skip this section and go toohello installation steps.</span></span> 

1. <span data-ttu-id="592a0-156">AD FS'de kaydedildiği hello MultiFactorAuthenticationAdfsAdapter.config dosyasının bir kopyasını kaydedin veya hello aşağıdaki PowerShell komutunu kullanarak hello yapılandırmasını dışarı aktarma: `Export-AdfsAuthenticationProviderConfigurationData -Name [adapter name] -FilePath [path tooconfig file]`.</span><span class="sxs-lookup"><span data-stu-id="592a0-156">Save a copy of hello MultiFactorAuthenticationAdfsAdapter.config file that was registered in AD FS, or export hello configuration using hello following PowerShell command: `Export-AdfsAuthenticationProviderConfigurationData -Name [adapter name] -FilePath [path tooconfig file]`.</span></span> <span data-ttu-id="592a0-157">Merhaba bağdaştırıcı adı "WindowsAzureMultiFactorAuthentication" veya "AzureMfaServerAuthentication" daha önce yüklenmiş hello bağlı olarak sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="592a0-157">hello adapter name is either "WindowsAzureMultiFactorAuthentication" or "AzureMfaServerAuthentication" depending on hello version previously installed.</span></span>
2. <span data-ttu-id="592a0-158">Merhaba hello MFA sunucusu yükleme konumu toohello AD FS sunucularından aşağıdaki dosyaları kopyalayın:</span><span class="sxs-lookup"><span data-stu-id="592a0-158">Copy hello following files from hello MFA Server installation location toohello AD FS servers:</span></span>

  - <span data-ttu-id="592a0-159">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span><span class="sxs-lookup"><span data-stu-id="592a0-159">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span></span>
  - <span data-ttu-id="592a0-160">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="592a0-160">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
  - <span data-ttu-id="592a0-161">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="592a0-161">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
  - <span data-ttu-id="592a0-162">MultiFactorAuthenticationAdfsAdapter.config</span><span class="sxs-lookup"><span data-stu-id="592a0-162">MultiFactorAuthenticationAdfsAdapter.config</span></span>

3. <span data-ttu-id="592a0-163">Ekleyerek Hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 betiğini düzenleyin `-ConfigurationFilePath [path]` hello toohello sonuna `Register-AdfsAuthenticationProvider` komutu.</span><span class="sxs-lookup"><span data-stu-id="592a0-163">Edit hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 script by adding `-ConfigurationFilePath [path]` toohello end of hello `Register-AdfsAuthenticationProvider` command.</span></span> <span data-ttu-id="592a0-164">Değiştir *[path]* hello tam yolu toohello MultiFactorAuthenticationAdfsAdapter.config dosyasını veya hello yapılandırma dosyasını dışarı hello önceki adımda.</span><span class="sxs-lookup"><span data-stu-id="592a0-164">Replace *[path]* with hello full path toohello MultiFactorAuthenticationAdfsAdapter.config file or hello configuration file exported in hello previous step.</span></span> 

  <span data-ttu-id="592a0-165">Merhaba eski yapılandırma dosyası eşleşirlerse hello yeni MultiFactorAuthenticationAdfsAdapter.config toosee hello öznitelikleri denetleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-165">Check hello attributes in hello new MultiFactorAuthenticationAdfsAdapter.config toosee if they match hello old config file.</span></span> <span data-ttu-id="592a0-166">Öznitelik eklenmiş veya hello yeni sürümde kaldırılmış, hello eski yapılandırma dosyası toohello yeni bir hello öznitelik değerlerini kopyalayın veya hello eski yapılandırma dosyası toomatch değiştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-166">If any attributes were added or removed in hello new version, copy hello attribute values from hello old configuration file toohello new one or modify hello old configuration file toomatch.</span></span>

### <a name="install-new-ad-fs-adapters"></a><span data-ttu-id="592a0-167">Yeni AD FS bağdaştırıcısı yükleme</span><span class="sxs-lookup"><span data-stu-id="592a0-167">Install new AD FS adapters</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="592a0-168">Kullanıcılarınız, bu bölümün gerekli tooperform iki aşamalı doğrulama sırasında adım 3-8 olmaz.</span><span class="sxs-lookup"><span data-stu-id="592a0-168">Your users will not be required tooperform two-step verification during steps 3-8 of this section.</span></span> <span data-ttu-id="592a0-169">AD FS yapılandırılan varsa, birden çok kümeleri, kaldırabilirsiniz, yükseltme ve geri yükleme hello her kümedeki grubu bağımsız diğer kümeleri tooavoid kapalı kalma süresi hello.</span><span class="sxs-lookup"><span data-stu-id="592a0-169">If you have AD FS configured in multiple clusters, you can remove, upgrade, and restore each cluster in hello farm independently of hello other clusters tooavoid downtime.</span></span>

1. <span data-ttu-id="592a0-170">Bazı AD FS sunucuları hello grubundan kaldırın.</span><span class="sxs-lookup"><span data-stu-id="592a0-170">Remove some AD FS servers from hello farm.</span></span> <span data-ttu-id="592a0-171">Başkalarının hala çalışıyor hello sırasında bu sunucuları güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-171">Update these servers while hello others are still running.</span></span>
2. <span data-ttu-id="592a0-172">Merhaba yeni AD FS bağdaştırıcısı hello AD FS grubundan kaldırıldı her sunucuya yükleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-172">Install hello new AD FS adapter on each server removed from hello AD FS farm.</span></span> <span data-ttu-id="592a0-173">Merhaba MFA sunucusu her AD FS sunucusunda yüklüyse, hello MFA sunucusu Yöneticisi UX güncelleştirebilirsiniz</span><span class="sxs-lookup"><span data-stu-id="592a0-173">If hello MFA Server is installed on each AD FS server, you can update through hello MFA Server admin UX.</span></span> <span data-ttu-id="592a0-174">Aksi takdirde MultiFactorAuthenticationAdfsAdapterSetup64.msi çalıştırarak güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="592a0-174">Otherwise, update by running MultiFactorAuthenticationAdfsAdapterSetup64.msi.</span></span> 

  <span data-ttu-id="592a0-175">Belirten bir hata oluşursa, "Microsoft Visual C++ 2015 Redistributable Update 1 veya daha yüksek gereklidir" yükleyip hello son güncelleştirme paketini hello [Microsoft Download Center](https://www.microsoft.com/download/).</span><span class="sxs-lookup"><span data-stu-id="592a0-175">If an error occurs stating, "Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required," download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="592a0-176">Her iki hello x86 hem x64 sürümünü yükleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-176">Install both hello x86 and x64 versions.</span></span>

3. <span data-ttu-id="592a0-177">Çok Git**AD FS** > **kimlik doğrulama ilkeleri** > **genel çok faktörlü kimlik doğrulama ilkesini Düzenle**.</span><span class="sxs-lookup"><span data-stu-id="592a0-177">Go too**AD FS** > **Authentication Policies** > **Edit Global MultiFactor Authentication Policy**.</span></span> <span data-ttu-id="592a0-178">İşaretini **WindowsAzureMultiFactorAuthentication** veya **AzureMFAServerAuthentication** (bağlı olarak yüklenen hello geçerli sürüm).</span><span class="sxs-lookup"><span data-stu-id="592a0-178">Uncheck **WindowsAzureMultiFactorAuthentication** or **AzureMFAServerAuthentication** (depending on hello current version installed).</span></span> 

  <span data-ttu-id="592a0-179">Bu adım tamamlandıktan sonra MFA sunucusu üzerinden iki aşamalı doğrulamayı adım 8 tamamlanana kadar bu AD FS kümede kullanılabilir değil.</span><span class="sxs-lookup"><span data-stu-id="592a0-179">Once this step is complete, two-step verification through MFA Server is not available in this AD FS cluster until you complete step 8.</span></span>

4. <span data-ttu-id="592a0-180">Merhaba Unregister-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell betiğini çalıştırarak hello AD FS bağdaştırıcısının unregister hello eski sürümü.</span><span class="sxs-lookup"><span data-stu-id="592a0-180">Unregister hello older version of hello AD FS adapter by running hello Unregister-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell script.</span></span> <span data-ttu-id="592a0-181">Bu hello olun *-Name* parametresi ("WindowsAzureMultiFactorAuthentication" veya "AzureMFAServerAuthentication"), 3. adımda görüntülenen hello adı ile eşleşen.</span><span class="sxs-lookup"><span data-stu-id="592a0-181">Ensure that hello *-Name* parameter (either “WindowsAzureMultiFactorAuthentication” or "AzureMFAServerAuthentication") matches hello name that was displayed in step 3.</span></span> <span data-ttu-id="592a0-182">Merkezi bir yapılandırma olduğundan bu hello aynı AD FS kümesindeki tooall sunucular için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="592a0-182">This applies tooall servers in hello same AD FS cluster since there is a central configuration.</span></span>
5. <span data-ttu-id="592a0-183">Merhaba yeni AD FS bağdaştırıcısı hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell betiğini çalıştırarak kaydedin.</span><span class="sxs-lookup"><span data-stu-id="592a0-183">Register hello new AD FS adapter by running hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell script.</span></span> <span data-ttu-id="592a0-184">Merkezi bir yapılandırma olduğundan bu hello aynı AD FS kümesindeki tooall sunucular için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="592a0-184">This applies tooall servers in hello same AD FS cluster since there is a central configuration.</span></span>
6. <span data-ttu-id="592a0-185">Merhaba hello AD FS grubundan kaldırıldı her sunucuda AD FS hizmetini yeniden başlatın.</span><span class="sxs-lookup"><span data-stu-id="592a0-185">Restart hello AD FS service on each server removed from hello AD FS farm.</span></span>
7. <span data-ttu-id="592a0-186">Kaldır hello hello gruptan diğer sunuculara ve güncelleştirilmiş hello sunucuları toohello AD FS grubunu geri ekleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-186">Add hello updated servers back toohello AD FS farm and remove hello other servers from hello farm.</span></span>
8. <span data-ttu-id="592a0-187">Çok Git**AD FS** > **kimlik doğrulama ilkeleri** > **genel çok faktörlü kimlik doğrulama ilkesini Düzenle**.</span><span class="sxs-lookup"><span data-stu-id="592a0-187">Go too**AD FS** > **Authentication Policies** > **Edit Global MultiFactor Authentication Policy**.</span></span> <span data-ttu-id="592a0-188">Denetleme **AzureMfaServerAuthentication**.</span><span class="sxs-lookup"><span data-stu-id="592a0-188">Check **AzureMfaServerAuthentication**.</span></span>
9. <span data-ttu-id="592a0-189">2. adım tooupdate hello sunucular şimdi hello AD FS grubundan kaldırıldı yineleyin ve bu sunucular üzerinde hello AD FS hizmetini yeniden başlatın.</span><span class="sxs-lookup"><span data-stu-id="592a0-189">Repeat step 2 tooupdate hello servers now removed from hello AD FS farm and restart hello AD FS service on those servers.</span></span>
10. <span data-ttu-id="592a0-190">Bu sunucuların geri hello AD FS grubuna ekleyin.</span><span class="sxs-lookup"><span data-stu-id="592a0-190">Add those servers back into hello AD FS farm.</span></span>

## <a name="next-steps"></a><span data-ttu-id="592a0-191">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="592a0-191">Next steps</span></span>

- <span data-ttu-id="592a0-192">Örnekleri alın [Azure çok faktörlü kimlik doğrulama ve üçüncü taraf VPN ile Gelişmiş senaryolar](multi-factor-authentication-advanced-vpn-configurations.md)</span><span class="sxs-lookup"><span data-stu-id="592a0-192">Get examples of [Advanced scenarios with Azure Multi-Factor Authentication and third-party VPNs](multi-factor-authentication-advanced-vpn-configurations.md)</span></span>

- [<span data-ttu-id="592a0-193">MFA sunucusu Windows Server Active Directory ile eşitleme</span><span class="sxs-lookup"><span data-stu-id="592a0-193">Synchronize MFA Server with Windows Server Active Directory</span></span>](multi-factor-authentication-get-started-server-dirint.md)

- <span data-ttu-id="592a0-194">[Windows kimlik doğrulamasını yapılandırmak](multi-factor-authentication-get-started-server-windows.md) uygulamalarınız için</span><span class="sxs-lookup"><span data-stu-id="592a0-194">[Configure Windows Authentication](multi-factor-authentication-get-started-server-windows.md) for your applications</span></span>
