---
title: "aaaConfigure hello Azure MFA NPS uzantısı | Microsoft Docs"
description: "Merhaba NPS uzantısı yüklendikten sonra IP uygulamaları güvenilir listeye almayı ve UPN değiştirme gibi gelişmiş yapılandırma için aşağıdaki adımları kullanın."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/14/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: c3aed077b23c95f874861eb00c8e6dca668329c1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="advanced-configuration-options-for-hello-nps-extension-for-multi-factor-authentication"></a><span data-ttu-id="c4cd3-103">Gelişmiş çok faktörlü kimlik doğrulaması için hello NPS uzantısı için yapılandırma seçenekleri</span><span class="sxs-lookup"><span data-stu-id="c4cd3-103">Advanced configuration options for hello NPS extension for Multi-Factor Authentication</span></span>

<span data-ttu-id="c4cd3-104">Merhaba ağ ilkesi sunucusu (NPS) uzantısı, şirket içi altyapınızı, bulut tabanlı Azure çok faktörlü kimlik doğrulama özelliklerini genişletir.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-104">hello Network Policy Server (NPS) extension extends your cloud-based Azure Multi-Factor Authentication features into your on-premises infrastructure.</span></span> <span data-ttu-id="c4cd3-105">Bu makale, zaten yüklü hello uzantısına sahiptir ve şimdi nasıl toocustomize hello uzantısı sizin için gereken tooknow istediğiniz varsayar.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-105">This article assumes that you already have hello extension installed, and now want tooknow how toocustomize hello extension for you needs.</span></span> 

## <a name="alternate-login-id"></a><span data-ttu-id="c4cd3-106">Alternatif oturum açma kimliği</span><span class="sxs-lookup"><span data-stu-id="c4cd3-106">Alternate login ID</span></span>

<span data-ttu-id="c4cd3-107">Şirket içi ve bulut Hello NPS uzantısı tooboth bağlayan bu yana dizinleri, burada, şirket içi kullanıcı asıl adları (UPN'ler) eşleşmiyor hello adları hello bulutta bir sorun karşılaşabileceğiniz.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-107">Since hello NPS extension connects tooboth your on-premises and cloud directories, you might encounter an issue where your on-premises user principal names (UPNs) don't match hello names in hello cloud.</span></span> <span data-ttu-id="c4cd3-108">toosolve Bu sorun, kullanım alternatif oturum açma kimliklerini.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-108">toosolve this problem, use alternate login IDs.</span></span> 

<span data-ttu-id="c4cd3-109">NPS uzantısı Hello içinde UPN hello yerine Azure çok faktörlü kimlik doğrulaması için kullanılan bir Active Directory öznitelik toobe belirleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-109">Within hello NPS extension, you can designate an Active Directory attribute toobe used in place of hello UPN for Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="c4cd3-110">Bu, tooprotect şirket içi kaynaklarınızı iki aşamalı doğrulama ile şirket içi UPN değiştirmeden sağlar.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-110">This enables you tooprotect your on-premises resources with two-step verification without modifying your on-premises UPNs.</span></span> 

<span data-ttu-id="c4cd3-111">tooconfigure alternatif oturum açma kimlikleri, Git çok`HKLM\SOFTWARE\Microsoft\AzureMfa` ve kayıt defteri değerleri aşağıdaki hello düzenleyin:</span><span class="sxs-lookup"><span data-stu-id="c4cd3-111">tooconfigure alternate login IDs, go too`HKLM\SOFTWARE\Microsoft\AzureMfa` and edit hello following registry values:</span></span>

| <span data-ttu-id="c4cd3-112">Ad</span><span class="sxs-lookup"><span data-stu-id="c4cd3-112">Name</span></span> | <span data-ttu-id="c4cd3-113">Tür</span><span class="sxs-lookup"><span data-stu-id="c4cd3-113">Type</span></span> | <span data-ttu-id="c4cd3-114">Varsayılan değer</span><span class="sxs-lookup"><span data-stu-id="c4cd3-114">Default value</span></span> | <span data-ttu-id="c4cd3-115">Açıklama</span><span class="sxs-lookup"><span data-stu-id="c4cd3-115">Description</span></span> |
| ---- | ---- | ------------- | ----------- |
| <span data-ttu-id="c4cd3-116">LDAP_ALTERNATE_LOGINID_ATTRIBUTE</span><span class="sxs-lookup"><span data-stu-id="c4cd3-116">LDAP_ALTERNATE_LOGINID_ATTRIBUTE</span></span> | <span data-ttu-id="c4cd3-117">Dize</span><span class="sxs-lookup"><span data-stu-id="c4cd3-117">string</span></span> | <span data-ttu-id="c4cd3-118">boş</span><span class="sxs-lookup"><span data-stu-id="c4cd3-118">Empty</span></span> | <span data-ttu-id="c4cd3-119">Merhaba toouse hello UPN yerine istediğiniz Active Directory öznitelik adını belirtin.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-119">Designate hello name of Active Directory attribute that you want toouse instead of hello UPN.</span></span> <span data-ttu-id="c4cd3-120">Bu öznitelik hello AlternateLoginId özniteliği olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-120">This attribute is used as hello AlternateLoginId attribute.</span></span> <span data-ttu-id="c4cd3-121">Bu kayıt defteri değerini tooa ayarlarsanız [geçerli Active Directory özniteliğini](https://msdn.microsoft.com/library/ms675090.aspx) (örneğin, posta ya da displayName için), ardından hello özniteliğinin değeri yerine hello kullanıcının UPN kimlik doğrulaması için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-121">If this registry value is set tooa [valid Active Directory attribute](https://msdn.microsoft.com/library/ms675090.aspx) (for example, mail or displayName), then hello attribute's value is used in place of hello user's UPN for authentication.</span></span> <span data-ttu-id="c4cd3-122">Bu kayıt defteri değerini veya boşsa, yapılandırıldıktan sonra AlternateLoginId devre dışıdır ve hello kullanıcının UPN kimlik doğrulaması için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-122">If this registry value is empty or not configured, then AlternateLoginId is disabled and hello user's UPN is used for authentication.</span></span> |
| <span data-ttu-id="c4cd3-123">LDAP_FORCE_GLOBAL_CATALOG</span><span class="sxs-lookup"><span data-stu-id="c4cd3-123">LDAP_FORCE_GLOBAL_CATALOG</span></span> | <span data-ttu-id="c4cd3-124">Boole değeri</span><span class="sxs-lookup"><span data-stu-id="c4cd3-124">boolean</span></span> | <span data-ttu-id="c4cd3-125">False</span><span class="sxs-lookup"><span data-stu-id="c4cd3-125">False</span></span> | <span data-ttu-id="c4cd3-126">Bu bayrak tooforce hello genel katalog LDAP aramaları için AlternateLoginId bakarken kullanın.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-126">Use this flag tooforce hello use of Global Catalog for LDAP searches when looking up AlternateLoginId.</span></span> <span data-ttu-id="c4cd3-127">Bir etki alanı denetleyicisini bir genel katalog olarak yapılandırma hello AlternateLoginId özniteliği toohello genel katalog ekleyin ve ardından bu bayrağı etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-127">Configure a domain controller as a Global Catalog, add hello AlternateLoginId attribute toohello Global Catalog, and then enable this flag.</span></span> <br><br> <span data-ttu-id="c4cd3-128">LDAP_LOOKUP_FORESTS (boş değilse), yapılandırılmışsa, **bu bayrağı true zorlanır**hello kayıt defteri ayarı hello değerinin ne olursa olsun.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-128">If LDAP_LOOKUP_FORESTS is configured (not empty), **this flag is enforced as true**, regardless of hello value of hello registry setting.</span></span> <span data-ttu-id="c4cd3-129">Bu durumda, her orman için hello AlternateLoginId özniteliği ile yapılandırılmış hello genel katalog toobe hello NPS uzantısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-129">In this case, hello NPS extension requires hello Global Catalog toobe configured with hello AlternateLoginId attribute for each forest.</span></span> |
| <span data-ttu-id="c4cd3-130">LDAP_LOOKUP_FORESTS</span><span class="sxs-lookup"><span data-stu-id="c4cd3-130">LDAP_LOOKUP_FORESTS</span></span> | <span data-ttu-id="c4cd3-131">Dize</span><span class="sxs-lookup"><span data-stu-id="c4cd3-131">string</span></span> | <span data-ttu-id="c4cd3-132">boş</span><span class="sxs-lookup"><span data-stu-id="c4cd3-132">Empty</span></span> | <span data-ttu-id="c4cd3-133">Ormanlar toosearch noktalı virgülle ayrılmış listesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-133">Provide a semi-colon separated list of forests toosearch.</span></span> <span data-ttu-id="c4cd3-134">Örneğin, *contoso.com;foobar.com*. Bu kayıt defteri değeri yapılandırdıysanız, hello NPS uzantısı tüm hello ormanlar, bunlar listelenen ve hello ilk başarılı AlternateLoginId değeri döndürür hello sırayla tekrarlayarak arar.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-134">For example, *contoso.com;foobar.com*. If this registry value is configured, hello NPS extension iteratively searches all hello forests in hello order in which they were listed, and returns hello first successful AlternateLoginId value.</span></span> <span data-ttu-id="c4cd3-135">Bu kayıt defteri değeri yapılandırılmamışsa, hello AlternateLoginId arama yalıtılmış toohello geçerli etki alanıdır.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-135">If this registry value is not configured, hello AlternateLoginId lookup is confined toohello current domain.</span></span>|

<span data-ttu-id="c4cd3-136">Alternatif oturum açma kimlikleri, tootroubleshoot sorunları kullanma adımları için önerilen hello [alternatif oturum açma kimliği hataları](multi-factor-authentication-nps-errors.md#alternate-login-id-errors).</span><span class="sxs-lookup"><span data-stu-id="c4cd3-136">tootroubleshoot problems with alternate login IDs, use hello recommended steps for [Alternate login ID errors](multi-factor-authentication-nps-errors.md#alternate-login-id-errors).</span></span>

## <a name="ip-exceptions"></a><span data-ttu-id="c4cd3-137">IP özel durumlar</span><span class="sxs-lookup"><span data-stu-id="c4cd3-137">IP exceptions</span></span>

<span data-ttu-id="c4cd3-138">Yük Dengeleyici iş yükleri, göndermeden önce hangi sunucuların çalıştıran doğrulayın, gibi toomonitor sunucu kullanılabilirliği gerekiyorsa doğrulama isteklerini tarafından engellenen bu denetimleri toobe istemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-138">If you need toomonitor server availability, like if load balancers verify which servers are running before sending workloads, you don't want these checks toobe blocked by verification requests.</span></span> <span data-ttu-id="c4cd3-139">Bunun yerine, hizmet hesapları tarafından kullanılan bildiğiniz IP adresleri listesi oluşturun ve bu liste çok faktörlü kimlik doğrulama gereksinimleri devre dışı.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-139">Instead, create a list of IP addresses that you know are used by service accounts, and disable Multi-Factor Authentication requirements for that list.</span></span> 

<span data-ttu-id="c4cd3-140">bir IP beyaz listesi tooconfigure Git çok`HKLM\SOFTWARE\Microsoft\AzureMfa` ve aşağıdaki kayıt defteri değeri hello yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="c4cd3-140">tooconfigure an IP whitelist, go too`HKLM\SOFTWARE\Microsoft\AzureMfa` and configure hello following registry value:</span></span> 

| <span data-ttu-id="c4cd3-141">Ad</span><span class="sxs-lookup"><span data-stu-id="c4cd3-141">Name</span></span> | <span data-ttu-id="c4cd3-142">Tür</span><span class="sxs-lookup"><span data-stu-id="c4cd3-142">Type</span></span> | <span data-ttu-id="c4cd3-143">Varsayılan değer</span><span class="sxs-lookup"><span data-stu-id="c4cd3-143">Default value</span></span> | <span data-ttu-id="c4cd3-144">Açıklama</span><span class="sxs-lookup"><span data-stu-id="c4cd3-144">Description</span></span> |
| ---- | ---- | ------------- | ----------- |
| <span data-ttu-id="c4cd3-145">IP_WHITELIST</span><span class="sxs-lookup"><span data-stu-id="c4cd3-145">IP_WHITELIST</span></span> | <span data-ttu-id="c4cd3-146">Dize</span><span class="sxs-lookup"><span data-stu-id="c4cd3-146">string</span></span> | <span data-ttu-id="c4cd3-147">boş</span><span class="sxs-lookup"><span data-stu-id="c4cd3-147">Empty</span></span> | <span data-ttu-id="c4cd3-148">IP adreslerinin noktalı virgülle ayrılmış listesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-148">Provide a semi-colon separated list of IP addresses.</span></span> <span data-ttu-id="c4cd3-149">Merhaba, NAS/VPN sunucusu hello gibi hizmet istekleri burada kaynaklanan makinelerin IP adreslerini içerir.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-149">Include hello IP addresses of machines where service requests originate, like hello NAS/VPN server.</span></span> <span data-ttu-id="c4cd3-150">IP aralıkları, alt ağlar desteklenmez:.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-150">IP ranges are subnets are not supported.</span></span> <br><br> <span data-ttu-id="c4cd3-151">Örneğin, *10.0.0.1;10.0.0.2;10.0.0.3*.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-151">For example, *10.0.0.1;10.0.0.2;10.0.0.3*.</span></span>

<span data-ttu-id="c4cd3-152">Bir istek hello beyaz mevcut bir IP adresinden geldiğinde, iki aşamalı doğrulama atlandı.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-152">When a request comes in from an IP address that exists in hello whitelist, two-step verification is skipped.</span></span> <span data-ttu-id="c4cd3-153">Merhaba IP beyaz listesi hello sağlanan karşılaştırılan toohello IP adresidir *ratNASIPAddress* hello RADIUS isteğini özniteliğidir.</span><span class="sxs-lookup"><span data-stu-id="c4cd3-153">hello IP whitelist is compared toohello IP address that is provided in hello *ratNASIPAddress* attribute of hello RADIUS request.</span></span> <span data-ttu-id="c4cd3-154">Bir RADIUS isteğini hello ratNASIPAddress özniteliği olmadan geliyorsa, uyarı aşağıdaki hello kaydedilir: "P_WHITE_LIST_WARNING::IP beyaz liste yoksayılır kaynak IP RADIUS isteğini NasIpAddress öznitelik yok."</span><span class="sxs-lookup"><span data-stu-id="c4cd3-154">If a RADIUS request comes in without hello ratNASIPAddress attribute, hello following warning is logged: "P_WHITE_LIST_WARNING::IP Whitelist is being ignored as source IP is missing in RADIUS request in NasIpAddress attribute."</span></span>

## <a name="next-steps"></a><span data-ttu-id="c4cd3-155">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="c4cd3-155">Next steps</span></span>

[<span data-ttu-id="c4cd3-156">Azure çok faktörlü kimlik doğrulamasını hello NPS uzantısı hata iletilerini çözümleyin</span><span class="sxs-lookup"><span data-stu-id="c4cd3-156">Resolve error messages from hello NPS extension for Azure Multi-Factor Authentication</span></span>](multi-factor-authentication-nps-errors.md)
