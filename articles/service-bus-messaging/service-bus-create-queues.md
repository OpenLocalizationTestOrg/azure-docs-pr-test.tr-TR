---
title: "Azure Service Bus kuyruklarını kullanan aaaWrite uygulamaları | Microsoft Docs"
description: "Nasıl toowrite Azure Service Bus kullanan basit sıra tabanlı bir uygulama."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 754d91b3-1426-405e-84b4-fd36d65b114a
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm
ms.openlocfilehash: 93b75902a06becd6e33e05298e09f5669d0e2aef
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-queues"></a><span data-ttu-id="4a6d9-103">Hizmet Veri Yolu kuyrukları kullanan uygulamalar oluşturma</span><span class="sxs-lookup"><span data-stu-id="4a6d9-103">Create applications that use Service Bus queues</span></span>
<span data-ttu-id="4a6d9-104">Bu konu Service Bus kuyruklarını açıklar ve gösterir nasıl toowrite Service Bus kullanan basit sıra tabanlı bir uygulama.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-104">This topic describes Service Bus queues and shows how toowrite a simple queue-based application that uses Service Bus.</span></span>

<span data-ttu-id="4a6d9-105">Perakende satış verilerini gelen tek tek Point-of-Sale (Terminal olmalıdır POS) hello veri toodetermine hisse senedi yenilenir toobe olduğunda kullanan tooan Stok yönetim sisteminin yönlendirilecek hello world senaryodan göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-105">Consider a scenario from hello world of retail in which sales data from individual Point-of-Sale (POS) terminals must be routed tooan inventory management system that uses hello data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="4a6d9-106">Bu çözüm hello Terminal hello Stok yönetim sisteminin arasında hello iletişimi için Service Bus Mesajlaşma hello aşağıdaki şekilde gösterildiği gibi kullanır:</span><span class="sxs-lookup"><span data-stu-id="4a6d9-106">This solution uses Service Bus messaging for hello communication between hello terminals and hello inventory management system, as illustrated in hello following figure:</span></span>

![Service Bus kuyrukları görüntü 1](./media/service-bus-create-queues/IC657161.gif)

<span data-ttu-id="4a6d9-108">İletileri toohello göndererek satış verilerini her POS terminal raporları **DataCollectionQueue**.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-108">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue**.</span></span> <span data-ttu-id="4a6d9-109">Merhaba Stok yönetim sistemi tarafından alınana kadar bu iletiler bu sırada kalır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-109">These messages remain in this queue until they are retrieved by hello inventory management system.</span></span> <span data-ttu-id="4a6d9-110">Bu desen genellikle adlandırılır *zaman uyumsuz Mesajlaşma*, çünkü hello POS terminal toowait hello envanter yönetimi sistemi toocontinue işleme yanıt yok.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-110">This pattern is often termed *asynchronous messaging*, because hello POS terminal does not have toowait for a reply from hello inventory management system toocontinue processing.</span></span>

## <a name="why-queuing"></a><span data-ttu-id="4a6d9-111">Queuing neden?</span><span class="sxs-lookup"><span data-stu-id="4a6d9-111">Why queuing?</span></span>
<span data-ttu-id="4a6d9-112">Bu uygulamasının gerekli tooset hello kod ele önce (zaman uyumlu olarak) toohello stok doğrudan yönetim sistemi hello POS Terminal sahip olmak yerine bu senaryoda bir sıra kullanmanın yararları hello konuşun göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-112">Before we look at hello code that is required tooset up this application, consider hello advantages of using a queue in this scenario instead of having hello POS terminals talk directly (synchronously) toohello inventory management system.</span></span>

### <a name="temporal-decoupling"></a><span data-ttu-id="4a6d9-113">Zamana bağlı ayırma</span><span class="sxs-lookup"><span data-stu-id="4a6d9-113">Temporal decoupling</span></span>
<span data-ttu-id="4a6d9-114">Merhaba zaman uyumsuz Mesajlaşma düzeni sayesinde üreticileri ve tüketicileri çevrimiçi toobe hello yok aynı anda.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-114">With hello asynchronous messaging pattern, producers and consumers do not have toobe online at hello same time.</span></span> <span data-ttu-id="4a6d9-115">Merhaba Mesajlaşma altyapısı depoladıktan iletileri hello kullanıcı taraf hazır tooreceive kadar bunları.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-115">hello messaging infrastructure reliably stores messages until hello consuming party is ready tooreceive them.</span></span> <span data-ttu-id="4a6d9-116">Bu, dağıtılmış hello uygulamanın hello bileşenleri, ya da gönüllü kesilebilir anlamına gelir; Örneğin Bakım veya hello sisteminin tamamını etkilemeden tooa bileşen kilitlenme nedeniyle.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-116">This means hello components of hello distributed application can be disconnected, either voluntarily; for example, for maintenance, or due tooa component crash, without affecting hello whole system.</span></span> <span data-ttu-id="4a6d9-117">Ayrıca, uygulama hello hello günün belirli zamanlarında yalnızca çevrimiçi toobe olabilir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-117">Furthermore, hello consuming application may only have toobe online during certain times of hello day.</span></span> <span data-ttu-id="4a6d9-118">Örneğin, bu perakende senaryoda hello Stok yönetim sisteminin yalnızca çevrimiçi toocome hello hello iş günü sonunda olabilir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-118">For example, in this retail scenario, hello inventory management system may only have toocome online after hello end of hello business day.</span></span>

### <a name="load-leveling"></a><span data-ttu-id="4a6d9-119">Yük Dengeleme</span><span class="sxs-lookup"><span data-stu-id="4a6d9-119">Load leveling</span></span>
<span data-ttu-id="4a6d9-120">Her iş birimi için gerekli hello işleme süresi genellikle sabit iken birçok uygulamada sistem yükü zaman içinde değişir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-120">In many applications system load varies over time, whereas hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="4a6d9-121">Aracılığıyla ileti üreticileri ve sıra anlamına gelir, kullanıcı uygulama (Merhaba çalışan) hello tüketicileri toobe sahip yalnızca ortalama yük yoğun yük yerine tooservice sağlandı.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-121">Intermediating message producers and consumers with a queue means that hello consuming application (hello worker) only has toobe provisioned tooservice an average load rather than a peak load.</span></span> <span data-ttu-id="4a6d9-122">Merhaba hello sıra derinliği büyüyecektir ve sözleşme gelen yük hello olarak değişir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-122">hello depth of hello queue will grow and contract as hello incoming load varies.</span></span> <span data-ttu-id="4a6d9-123">Bu, doğrudan para şekilde toohello altyapı gerekli tooservice hello uygulama yük miktarı ile kaydeder.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-123">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span>

![Service Bus kuyrukları görüntü 2](./media/service-bus-create-queues/IC657162.gif)

### <a name="load-balancing"></a><span data-ttu-id="4a6d9-125">Yük dengeleme</span><span class="sxs-lookup"><span data-stu-id="4a6d9-125">Load balancing</span></span>
<span data-ttu-id="4a6d9-126">Hello yük arttıkça, daha fazla çalışan işlemi hello çalışan sırasından eklenen tooread olabilir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-126">As hello load increases, more worker processes can be added tooread from hello worker queue.</span></span> <span data-ttu-id="4a6d9-127">Her ileti tek hello çalışan işlemleri tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-127">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="4a6d9-128">Ayrıca, hesaba tooprocessing güç ile Merhaba çalışan bilgisayarlar farklılık gösterse bile iletileri kendi maksimum hızında çeker gibi hello çalışan bilgisayarlar optimum kullanım için bu çekme tabanlı yük dengeleme sağlar.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-128">Furthermore, this pull-based load balancing allows for optimum usage of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="4a6d9-129">Bu desen genellikle hello rakip tüketici düzeni olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-129">This pattern is often termed hello competing consumer pattern.</span></span>

![Service Bus kuyruklarını 3 görüntü](./media/service-bus-create-queues/IC657163.gif)

### <a name="loose-coupling"></a><span data-ttu-id="4a6d9-131">Gevşek bağlantı</span><span class="sxs-lookup"><span data-stu-id="4a6d9-131">Loose coupling</span></span>
<span data-ttu-id="4a6d9-132">Message queuing toointermediate ileti üreticileri ve tüketicileri arasında kullanarak hello bileşenleri arasında bir iç gevşek bağlantı sağlar.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-132">Using message queuing toointermediate between message producers and consumers provides an intrinsic loose coupling between hello components.</span></span> <span data-ttu-id="4a6d9-133">Üreticileri ve tüketicileri birbirinden farkında değildir çünkü bir tüketici hello üretici üzerinde hiçbir etkisi olmadan yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-133">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span> <span data-ttu-id="4a6d9-134">Ayrıca, topoloji Mesajlaşma hello hello mevcut uç noktalar etkilemeden gelişmesi.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-134">Furthermore, hello messaging topology can evolve without affecting hello existing endpoints.</span></span> <span data-ttu-id="4a6d9-135">Biz Yayınla/Abone ol hakkında konuşurken Biz bu daha ele alacağız.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-135">We’ll discuss this more when we talk about publish/subscribe.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="4a6d9-136">Merhaba Kodu Göster</span><span class="sxs-lookup"><span data-stu-id="4a6d9-136">Show me hello code</span></span>
<span data-ttu-id="4a6d9-137">bölümü gösterir nasıl aşağıdaki hello toouse Service Bus toobuild bu uygulama.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-137">hello following section shows how toouse Service Bus toobuild this application.</span></span>

### <a name="sign-up-for-an-azure-account"></a><span data-ttu-id="4a6d9-138">Azure hesabı için kaydolun</span><span class="sxs-lookup"><span data-stu-id="4a6d9-138">Sign up for an Azure account</span></span>
<span data-ttu-id="4a6d9-139">Service Bus ile çalışma sırasını toostart içinde bir Azure hesabınızın olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-139">You’ll need an Azure account in order toostart working with Service Bus.</span></span> <span data-ttu-id="4a6d9-140">Zaten bir yoksa, ücretsiz bir hesap için kaydolabilirsiniz [burada](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A85619ABF).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-140">If you do not already have one, you can sign up for a free account [here](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A85619ABF).</span></span>

### <a name="create-a-namespace"></a><span data-ttu-id="4a6d9-141">Ad alanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="4a6d9-141">Create a namespace</span></span>
<span data-ttu-id="4a6d9-142">Abonelik aldıktan sonra şunları yapabilirsiniz [hizmet ad alanı oluşturma](service-bus-create-namespace-portal.md).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-142">Once you have a subscription, you can [create a service namespace](service-bus-create-namespace-portal.md).</span></span> <span data-ttu-id="4a6d9-143">Her ad alanı, Service Bus varlık kümesi için bir kapsam kapsayıcı görevi görür.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-143">Each namespace acts as a scoping container for a set of Service Bus entities.</span></span> <span data-ttu-id="4a6d9-144">Yeni ad alanınızı tüm Service Bus hesaplarında benzersiz bir ad verin.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-144">Give your new namespace a unique name across all Service Bus accounts.</span></span> 

### <a name="install-hello-nuget-package"></a><span data-ttu-id="4a6d9-145">Merhaba NuGet paketini yükleyin</span><span class="sxs-lookup"><span data-stu-id="4a6d9-145">Install hello NuGet package</span></span>
<span data-ttu-id="4a6d9-146">toouse hello Service Bus ad alanı, bir uygulama hello Service Bus derlemesine, özellikle Microsoft.ServiceBus.dll başvurmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-146">toouse hello Service Bus namespace, an application must reference hello Service Bus assembly, specifically Microsoft.ServiceBus.dll.</span></span> <span data-ttu-id="4a6d9-147">Bu derleme hello Microsoft Azure SDK'sı bir parçası olarak bulabilir ve hello indirme sırasında hello kullanılabilir [Azure SDK'sını indirme sayfası](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-147">You can find this assembly as part of hello Microsoft Azure SDK, and hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span> <span data-ttu-id="4a6d9-148">Ancak, hello [Service Bus NuGet paketi](https://www.nuget.org/packages/WindowsAzure.ServiceBus) hello en kolay yolu tooget hello hizmet veri yolu API'sini ve tooconfigure tüm hello Service Bus bağımlılıklarıyla uygulamanızla olduğu.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-148">However, hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus) is hello easiest way tooget hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies.</span></span>

### <a name="create-hello-queue"></a><span data-ttu-id="4a6d9-149">Merhaba kuyruk oluşturma</span><span class="sxs-lookup"><span data-stu-id="4a6d9-149">Create hello queue</span></span>
<span data-ttu-id="4a6d9-150">Service Bus Mesajlaşma varlıkları (kuyruklar ve yayımlama/abonelik konuları) hello gerçekleştirilen yönetim işlemlerinin [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) sınıfı.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-150">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class.</span></span> <span data-ttu-id="4a6d9-151">Service Bus kullanan bir [paylaşılan erişim imzası (SAS)](service-bus-sas.md) tabanlı güvenlik modeli.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-151">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="4a6d9-152">Merhaba [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) sınıfı, bazı iyi bilinen belirteç sağlayıcılarını döndüren fabrikada yerleştirilen yöntemleri bir güvenlik belirteci sağlayıcısı gösterir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-152">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="4a6d9-153">Kullanacağız bir [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) yöntemi toohold hello SAS kimlik bilgileri.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-153">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="4a6d9-154">Merhaba [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) örneği ile Merhaba taban adresini hello Service Bus ad alanı hello belirteç sağlayıcısı ve ardından yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-154">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="4a6d9-155">Merhaba [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) sınıfı yöntemleri toocreate sağlar, numaralandırır ve mesajlaşma varlıklarını silme.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-155">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="4a6d9-156">Merhaba gösterir nasıl hello burada gösterilen kodu [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) örneğidir oluşturulup kullanılan toocreate hello **DataCollectionQueue** sırası.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-156">hello code that is shown here shows how hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) instance is created and used toocreate hello **DataCollectionQueue** queue.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", 
                "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = 
    TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = 
    new NamespaceManager(uri, tokenProvider);
namespaceManager.CreateQueue("DataCollectionQueue");
```

<span data-ttu-id="4a6d9-157">Merhaba aşırı olduğuna dikkat edin [CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) ayarlanmış hello sıra toobe özelliklerini etkinleştirme yöntemi.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-157">Note that there are overloads of hello [CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method that enable properties of hello queue toobe tuned.</span></span> <span data-ttu-id="4a6d9-158">Örneğin, hello varsayılan yaşam süresi (TTL) değerini toohello sıraya gönderilen iletiler için ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-158">For example, you can set hello default time-to-live (TTL) value for messages sent toohello queue.</span></span>

### <a name="send-messages-toohello-queue"></a><span data-ttu-id="4a6d9-159">İletileri toohello sırası Gönder</span><span class="sxs-lookup"><span data-stu-id="4a6d9-159">Send messages toohello queue</span></span>
<span data-ttu-id="4a6d9-160">Hizmet veri yolu varlıklar üzerinde çalıştırma işlemleri için; Örneğin, ileti gönderme ve alma, bir uygulama önce oluşturmanız gerekir bir [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) nesnesi.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-160">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) object.</span></span> <span data-ttu-id="4a6d9-161">Benzer toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) hello sınıfı [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) örneği hello temel adresinden hello hizmet ad alanı ve hello belirteç sağlayıcısı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-161">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class, hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```csharp
 BrokeredMessage bm = new BrokeredMessage(salesData);
 bm.Label = "SalesReport";
 bm.Properties["StoreName"] = "Redmond";
 bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="4a6d9-162">Gönderilen iletileri ve Service Bus alınan hello örnekleridir [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) sınıfı.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-162">Messages sent to, and received from Service Bus queues are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="4a6d9-163">Bu sınıf bir standart özellikler kümesi içerir (gibi [etiket](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) ve [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), bir kullanılan toohold uygulama özellikleri sözlük ve rastgele uygulama verileri gövdesi içerir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-163">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="4a6d9-164">Uygulama herhangi bir seri hale getirilebilir nesnesi geçirerek hello gövde ayarlayabilirsiniz (hello aşağıdaki örnek, başarılı bir **SalesData** hello POS terminal durumundan hello satış verileri temsil eden nesne), hello kullanacak [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello nesnesi.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-164">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="4a6d9-165">Alternatif olarak, bir [akış](https://msdn.microsoft.com/library/system.io.stream.aspx) nesne sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-165">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

<span data-ttu-id="4a6d9-166">en kolay yolu toosend iletileri tooa sıra, servis talebi bizim hello verilen hello **DataCollectionQueue**, toouse olan [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate bir [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) nesnesi Merhaba doğrudan [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) örneği.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-166">hello easiest way toosend messages tooa given queue, in our case hello **DataCollectionQueue**, is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance.</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionQueue");
sender.Send(bm);
```

### <a name="receiving-messages-from-hello-queue"></a><span data-ttu-id="4a6d9-167">Merhaba sıradan ileti alma</span><span class="sxs-lookup"><span data-stu-id="4a6d9-167">Receiving messages from hello queue</span></span>
<span data-ttu-id="4a6d9-168">kullanabileceğiniz hello sırasından tooreceive ileti, bir [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) doğrudan hello oluşturan nesne [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) kullanarak [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-168">tooreceive messages from hello queue, you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="4a6d9-169">İleti alıcılar, iki farklı modda çalışabilir: **ReceiveAndDelete** ve **PeekLock**.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-169">Message receivers can work in two different modes: **ReceiveAndDelete** and **PeekLock**.</span></span> <span data-ttu-id="4a6d9-170">Merhaba [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) hello ileti alıcı oluşturulduğunda, bir parametre toohello ayarlanmış [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory?redirectedfrom=MSDN#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_Microsoft_ServiceBus_Messaging_ReceiveMode_) çağırın.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-170">hello [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) is set when hello message receiver is created, as a parameter toohello [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory?redirectedfrom=MSDN#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_Microsoft_ServiceBus_Messaging_ReceiveMode_) call.</span></span>

<span data-ttu-id="4a6d9-171">Merhaba kullanırken **ReceiveAndDelete** hello modu, alma bir tek işlemi; diğer bir deyişle, Service Bus hello isteği aldığında, onu hello iletiyi kullanılıyor olarak işaretler ve toohello uygulama döndürür.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-171">When using hello **ReceiveAndDelete** mode, hello receive is a single-shot operation; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="4a6d9-172">**ReceiveAndDelete** modu hello en basit modeldir ve hangi hello uygulama tolerans hata toooccur olsaydı bir ileti işlenmiyor senaryolarda en iyi şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-172">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message if a failure were toooccur.</span></span> <span data-ttu-id="4a6d9-173">toounderstand Bu, hangi hello tüketici sorunları hello alma isteği bir senaryo düşünün ve işlemeden önce çöküyor.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-173">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="4a6d9-174">Hizmet veri yolu hello iletiyi kullanılıyor olarak işaretlenmiş olduğundan, ne zaman hello uygulama yeniden başlatıldıktan ve iletileri tekrar, kullanmaya başlar, hello kilitlenme önce kullanılan hello iletiyi atlamış olur.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-174">Since Service Bus marked hello message as being consumed, when hello application restarts and starts consuming messages again, it will have missed hello message that was consumed before hello crash.</span></span>

<span data-ttu-id="4a6d9-175">İçinde **PeekLock** hello modu, alma iletilere olası toosupport uygulamaları iki aşamalı işlemi olur.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-175">In **PeekLock** mode, hello receive becomes a two-stage operation, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="4a6d9-176">Service Bus hello isteği aldığında, hello sonraki ileti toobe tüketilen, diğer tüketicilerin alırken tooprevent kilitler ve toohello uygulama döndürür bulur.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-176">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="4a6d9-177">Merhaba uygulaması hello iletiyi işlemeyi tamamladıktan sonra (veya sonra işlemek için depoladıktan sonra), hello hello ikinci aşamasını tamamlar çağırarak alma işleminin [tam](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) hello alınan ileti üzerinde.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-177">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="4a6d9-178">Hizmet veri yolu hello gördüğünde [tam](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) çağrısı hello iletiyi kullanılıyor olarak işaretler.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-178">When Service Bus sees hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="4a6d9-179">Diğer iki sonuçlar mümkündür.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-179">Two other outcomes are possible.</span></span> <span data-ttu-id="4a6d9-180">İlk olarak, Merhaba uygulaması kaydedemediği tooprocess Merhaba ileti herhangi bir nedenden dolayı işleyememesi [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) hello alınan ileti üzerinde (yerine [tam](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-180">First, if hello application is unable tooprocess hello message for some reason, it can call [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="4a6d9-181">Bu hizmet veri yolu toounlock selamlama iletisine neden olur ve yeniden alınan kullanılabilir toobe olun, ya da aynı tüketici hello veya başka bir Tamamlanıyor tüketici tarafından.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-181">This causes Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another completing consumer.</span></span> <span data-ttu-id="4a6d9-182">İkinci olarak, hello kilidi ile ilişkili bir zaman aşımı yoktur ve selamlama iletisine Merhaba uygulaması işleyemezse (örneğin, hello uygulama çökerse) Service Bus kilidini hello kilit zaman aşımı dolmadan önce iletiyi hello ve kullanılabilir toobe yapın yeniden alınan (temelde gerçekleştiren bir [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) işlemi varsayılan olarak).</span><span class="sxs-lookup"><span data-stu-id="4a6d9-182">Second, there is a time-out associated with hello lock and if hello application cannot process hello message before hello lock time-out expires (for example, if hello application crashes), then Service Bus will unlock hello message and make it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="4a6d9-183">Merhaba, uygulama hello iletisini işledikten sonra ancak hello önce çöküyor Not [tam](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) isteği yayınlandı, başlatıldığında hello ileti yeniden teslim toohello uygulama olacaktır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-183">Note that if hello application crashes after it processes hello message but before hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) request was issued, hello message will be redelivered toohello application when it restarts.</span></span> <span data-ttu-id="4a6d9-184">Bu genellikle adlandırılır * en az bir kez * işleniyor.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-184">This is often termed *At Least Once * processing.</span></span> <span data-ttu-id="4a6d9-185">Başka bir deyişle, her ileti en az bir kez işlenir ancak belirli durumlarda hello aynı ileti yeniden teslim.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-185">This means that each message will be processed at least once but in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="4a6d9-186">Merhaba senaryo yinelenen işlemeyi kabul etmiyorsa ek mantık hello uygulama toodetect çoğaltmaları gereklidir.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-186">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates.</span></span> <span data-ttu-id="4a6d9-187">Bu hello üzerinde temel sağlanabilir [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) hello iletinin özelliği.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-187">This can be achieved based on hello [MessageId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property of hello message.</span></span> <span data-ttu-id="4a6d9-188">Bu özellik başlangıç değeri teslimat denemelerinde.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-188">hello value of this property remains constant across delivery attempts.</span></span> <span data-ttu-id="4a6d9-189">Bu adlandırılır *tam olarak bir kez* işleme.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-189">This is termed *Exactly Once* processing.</span></span>

<span data-ttu-id="4a6d9-190">Merhaba burada gösterilen kodu alır ve hello kullanarak ileti işler **PeekLock** yoksa hello varsayılandır modu [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) değeri açıkça sağlanır.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-190">hello code that is shown here receives and processes a message using hello **PeekLock** mode, which is hello default if no [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) value is explicitly provided.</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionQueue");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

### <a name="use-hello-queue-client"></a><span data-ttu-id="4a6d9-191">Merhaba sıra İstemcisi'ni kullanın</span><span class="sxs-lookup"><span data-stu-id="4a6d9-191">Use hello queue client</span></span>
<span data-ttu-id="4a6d9-192">Merhaba daha önce oluşturulan bu bölümdeki örnekleri [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) ve [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) hello doğrudan nesnelerden [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) toosend ileti alıp Merhaba sırasından sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-192">hello examples earlier in this section created [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) and [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objects directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) toosend and receive messages from hello queue, respectively.</span></span> <span data-ttu-id="4a6d9-193">Alternatif bir yaklaşım toouse olan bir [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) destekleyen hem gönderme ve alma işlemlerinin eklenmesi toomore nesne Gelişmiş oturumları gibi özellikleri.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-193">An alternative approach is toouse a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object, which supports both send and receive operations in addition toomore advanced features, such as sessions.</span></span>

```csharp
QueueClient queueClient = factory.CreateQueueClient("DataCollectionQueue");
queueClient.Send(bm);

BrokeredMessage message = queueClient.Receive();

try
{
    ProcessMessage(message);
    message.Complete();
}
catch (Exception e)
{
    message.Abandon();
} 
```

## <a name="next-steps"></a><span data-ttu-id="4a6d9-194">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="4a6d9-194">Next steps</span></span>
<span data-ttu-id="4a6d9-195">Sıraların hello temel bilgileri öğrendiğinize göre bkz: [Service Bus konuları ve abonelikleri kullanan uygulamalar oluşturmak](service-bus-create-topics-subscriptions.md) toocontinue hello yayımlama/abonelik yetenekleri Service Bus konuları kullanarak bu tartışma ve Abonelikler.</span><span class="sxs-lookup"><span data-stu-id="4a6d9-195">Now that you've learned hello basics of queues, see [Create applications that use Service Bus topics and subscriptions](service-bus-create-topics-subscriptions.md) toocontinue this discussion using hello publish/subscribe capabilities of Service Bus topics and subscriptions.</span></span>

