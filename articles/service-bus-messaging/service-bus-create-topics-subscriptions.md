---
title: "Azure Service Bus konuları ve abonelikleri kullanan aaaCreate uygulamaları | Microsoft Docs"
description: "Giriş toohello yayımlama-abone olma Service Bus konuları ve abonelikleri tarafından sunulan yetenekleri."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="86b34-103">Service Bus konuları ve abonelikleri kullanan uygulamalar oluşturma</span><span class="sxs-lookup"><span data-stu-id="86b34-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="86b34-104">Azure Service Bus güvenilir message queuing bulut tabanlı, ileti odaklı Ara teknolojilerini ve dayanıklı yayımlama/Mesajlaşma abonelik, bir kümesini destekler.</span><span class="sxs-lookup"><span data-stu-id="86b34-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="86b34-105">Bu makalede sağlanan hello bilgileri inşa edilmiştir [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md) ve giriş Service Bus konu başlıklarını tarafından sunulan toohello yayımlama/abonelik yetenekleri sunar.</span><span class="sxs-lookup"><span data-stu-id="86b34-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="86b34-106">Gelişen perakende senaryosu</span><span class="sxs-lookup"><span data-stu-id="86b34-106">Evolving retail scenario</span></span>
<span data-ttu-id="86b34-107">Bu makalede kullanılan hello perakende senaryo devam [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="86b34-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="86b34-108">Tek tek satış noktası (POS) Terminal satış verileri yenilenir toobe hisse sahip olduğunda, bu veri toodetermine kullanan yönlendirilmiş tooan Stok yönetim sisteminin olmalıdır geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="86b34-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="86b34-109">İletileri toohello göndererek satış verilerini her POS terminal raporları **DataCollectionQueue** sırası, burada kalırlar hello Stok yönetim sistemi tarafından alınana kadar aşağıda gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="86b34-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Hizmet veri yolu 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="86b34-111">Bu senaryo, yeni gereksinimi süredir tooevolve eklenen toohello sistem: hello mağaza sahibi hello deposu gerçek zamanlı olarak gerçekleştirip nasıl toobe mümkün toomonitor istemektedir.</span><span class="sxs-lookup"><span data-stu-id="86b34-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="86b34-112">tooaddress bu gereksinim hello sistem "Merhaba satış veri akışı dokunun gerekir".</span><span class="sxs-lookup"><span data-stu-id="86b34-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="86b34-113">Itanium tabanlı sistemler için toohello Stok yönetim sisteminin olarak önce gönderilen hello POS Terminal toobe tarafından gönderilen her ileti hala istiyoruz, ancak her iletinin toopresent hello Pano görünümü toohello mağaza sahibi kullanabileceğiniz başka bir kopyasını istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="86b34-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="86b34-114">Bu, birden çok taraflar tarafından tüketilen her ileti toobe gerektiren gibi herhangi bir durumda, hizmet veri yolu kullanabilirsiniz *konuları*.</span><span class="sxs-lookup"><span data-stu-id="86b34-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="86b34-115">Konular, yayımlanmış her ileti kullanılabilir tooone yapılan veya daha fazla abonelik hello konu başlığına kayıtlı olan bir publish/subscribe modelini sağlar.</span><span class="sxs-lookup"><span data-stu-id="86b34-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="86b34-116">Buna karşılık, Kuyruklarla her ileti tek bir tüketici tarafından alınır.</span><span class="sxs-lookup"><span data-stu-id="86b34-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="86b34-117">İletileri tooa konu hello gönderilen aynı şekilde tooa sıra gönderilir.</span><span class="sxs-lookup"><span data-stu-id="86b34-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="86b34-118">Ancak, iletileri hello konusundan doğrudan alınmaz; Bunlar aboneliklerden alınır.</span><span class="sxs-lookup"><span data-stu-id="86b34-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="86b34-119">Abonelik tooa konu toothat konu gönderilen Merhaba iletileri kopyalarını alan sanal kuyruğa düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="86b34-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="86b34-120">İletileri abonelikten alınan bir kuyruktan şekilde alınmış olarak aynı hello.</span><span class="sxs-lookup"><span data-stu-id="86b34-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="86b34-121">Toohello perakende senaryo geri dönerseniz, hello sıraya göre bir konu değiştirilir ve hangi hello Stok yönetim sisteminin bileşeni kullanabileceğiniz bir abonelik eklenir.</span><span class="sxs-lookup"><span data-stu-id="86b34-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="86b34-122">Merhaba sistem şimdi aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="86b34-122">hello system now appears as follows:</span></span>

![Hizmet veri yolu 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="86b34-124">Burada Hello yapılandırması aynı toohello önceki sıra tabanlı tasarım gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="86b34-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="86b34-125">Diğer bir deyişle, yönlendirilmiş toohello toohello konu gönderilen iletiler olan **stok** abonelikten hangi hello **Stok yönetim sisteminin** bunları kullanır.</span><span class="sxs-lookup"><span data-stu-id="86b34-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="86b34-126">Sipariş toosupport hello Yönetimi panosunda, biz ikinci abonelik hello konuyla ilgili aşağıda gösterildiği gibi oluşturun:</span><span class="sxs-lookup"><span data-stu-id="86b34-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Hizmet veri yolu 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="86b34-128">Bu yapılandırma ile kullanılabilir tooboth hello hello POS Terminal her iletiden yapılan **Pano** ve **stok** abonelikleri.</span><span class="sxs-lookup"><span data-stu-id="86b34-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="86b34-129">Merhaba Kodu Göster</span><span class="sxs-lookup"><span data-stu-id="86b34-129">Show me hello code</span></span>
<span data-ttu-id="86b34-130">Merhaba makale [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md) açıklar nasıl toosign bir Azure hesabı için ve bir hizmet ad alanı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="86b34-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="86b34-131">Merhaba en kolay yolu tooreference Service Bus bağımlılıklarıyla olan tooinstall hello Service Bus [Nuget paketi](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="86b34-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="86b34-132">Ayrıca, Service Bus kitaplıkları hello Azure SDK'sı bir parçası olarak hello bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="86b34-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="86b34-133">Merhaba indirme sırasında hello kullanılabilir [Azure SDK'sını indirme sayfası](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="86b34-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="86b34-134">Merhaba konu ve abonelik oluşturma</span><span class="sxs-lookup"><span data-stu-id="86b34-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="86b34-135">Service Bus Mesajlaşma varlıkları (kuyruklar ve yayımlama/abonelik konuları) hello gerçekleştirilen yönetim işlemlerinin [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) sınıfı.</span><span class="sxs-lookup"><span data-stu-id="86b34-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="86b34-136">Uygun kimlik bilgilerini sipariş toocreate gerekli bir **NamespaceManager** örneği için belirli bir ad alanı.</span><span class="sxs-lookup"><span data-stu-id="86b34-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="86b34-137">Service Bus kullanan bir [paylaşılan erişim imzası (SAS)](service-bus-sas.md) tabanlı güvenlik modeli.</span><span class="sxs-lookup"><span data-stu-id="86b34-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="86b34-138">Merhaba [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) sınıfı, bazı iyi bilinen belirteç sağlayıcılarını döndüren fabrikada yerleştirilen yöntemleri bir güvenlik belirteci sağlayıcısı gösterir.</span><span class="sxs-lookup"><span data-stu-id="86b34-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="86b34-139">Kullanacağız bir [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) yöntemi toohold hello SAS kimlik bilgileri.</span><span class="sxs-lookup"><span data-stu-id="86b34-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="86b34-140">Merhaba [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) örneği ile Merhaba taban adresini hello Service Bus ad alanı hello belirteç sağlayıcısı ve ardından yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="86b34-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="86b34-141">Merhaba [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) sınıfı yöntemleri toocreate sağlar, numaralandırır ve mesajlaşma varlıklarını silme.</span><span class="sxs-lookup"><span data-stu-id="86b34-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="86b34-142">Merhaba gösterir nasıl hello burada gösterilen kodu **NamespaceManager** örneğidir oluşturulup kullanılan toocreate hello **DataCollectionTopic** konu.</span><span class="sxs-lookup"><span data-stu-id="86b34-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="86b34-143">Merhaba aşırı olduğuna dikkat edin [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) hello konu tooset özelliklerini etkinleştirme yöntemi.</span><span class="sxs-lookup"><span data-stu-id="86b34-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="86b34-144">Örneğin, hello varsayılan yaşam süresi (TTL) değerini toohello konu gönderilen iletiler için ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="86b34-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="86b34-145">Ardından, hello eklemek **stok** ve **Pano** abonelikleri.</span><span class="sxs-lookup"><span data-stu-id="86b34-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="86b34-146">İletileri toohello konu gönderin</span><span class="sxs-lookup"><span data-stu-id="86b34-146">Send messages toohello topic</span></span>
<span data-ttu-id="86b34-147">Hizmet veri yolu varlıklar üzerinde çalıştırma işlemleri için; Örneğin, ileti gönderme ve alma, bir uygulama önce oluşturmanız gerekir bir [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) nesnesi.</span><span class="sxs-lookup"><span data-stu-id="86b34-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="86b34-148">Benzer toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) hello sınıfı **Eventhubclient** örneği hello temel adresinden hello hizmet ad alanı ve hello belirteç sağlayıcısı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="86b34-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="86b34-149">Service Bus konularından, alınan gönderilen iletileri tooand hello bir örnekleridir [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) sınıfı.</span><span class="sxs-lookup"><span data-stu-id="86b34-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="86b34-150">Bu sınıf bir standart özellikler kümesi içerir (gibi [etiket](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) ve [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), bir kullanılan toohold uygulama özellikleri sözlük ve rastgele uygulama verileri gövdesi içerir.</span><span class="sxs-lookup"><span data-stu-id="86b34-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="86b34-151">Uygulama herhangi bir seri hale getirilebilir nesnesi geçirerek hello gövde ayarlayabilirsiniz (hello aşağıdaki örnek, başarılı bir **SalesData** hello POS terminal durumundan hello satış verileri temsil eden nesne), hello kullanacak [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello nesnesi.</span><span class="sxs-lookup"><span data-stu-id="86b34-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="86b34-152">Alternatif olarak, bir [akış](https://msdn.microsoft.com/library/system.io.stream.aspx) nesne sağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="86b34-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="86b34-153">Merhaba en kolay yolu toosend iletileri toohello konudur toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate bir [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) hello doğrudan nesnesinden [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) Örnek:</span><span class="sxs-lookup"><span data-stu-id="86b34-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="86b34-154">Abonelikten ileti alma</span><span class="sxs-lookup"><span data-stu-id="86b34-154">Receive messages from a subscription</span></span>
<span data-ttu-id="86b34-155">Benzer toousing kuyruklar, tooreceive iletileri kullanabileceğiniz bir abonelikten bir [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) doğrudan hello oluşturan nesne [Eventhubclient](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) kullanarak [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="86b34-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="86b34-156">Kullanabilirsiniz Merhaba iki farklı modlarını alma (**ReceiveAndDelete** ve **PeekLock**) makalesinde ele alındığı gibi [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="86b34-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="86b34-157">Oluşturduğunuzda unutmayın bir **MessageReceiver** abonelikler için hello *entityPath* parametredir hello biçiminde `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="86b34-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="86b34-158">Bu nedenle, toocreate bir **MessageReceiver** hello için **stok** hello aboneliği **DataCollectionTopic** konusuna *entityPath*çok ayarlanmalıdır`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="86b34-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="86b34-159">Merhaba kod aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="86b34-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="86b34-160">Abonelik filtreleri</span><span class="sxs-lookup"><span data-stu-id="86b34-160">Subscription filters</span></span>
<span data-ttu-id="86b34-161">Şu ana kadar bu senaryoda toohello konu gönderilen tüm iletiler kayıtlı kullanılabilir tooall abonelikleri hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="86b34-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="86b34-162">Burada anahtar tümcecik Hello "kullanılabilir hale getirilir."</span><span class="sxs-lookup"><span data-stu-id="86b34-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="86b34-163">Hizmet veri yolu abonelikleri toohello konu gönderilen tüm iletiler görürsünüz, ancak yalnızca bir alt kümesini bu iletileri toohello sanal abonelik sırası kopyalayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="86b34-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="86b34-164">Bu aboneliği kullanarak gerçekleştirilir *filtreleri*.</span><span class="sxs-lookup"><span data-stu-id="86b34-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="86b34-165">Bir abonelik oluşturduğunuzda, bir filtre ifadesi, selamlama iletisine hello özellikler üzerinde çalıştığı bir SQL92 stili koşulun hello formunda sağlayabilir, hem de Sistem özellikleri hello (örneğin, [etiket](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) ve hello uygulama özellikler gibi **StoreName** hello önceki örnekte.</span><span class="sxs-lookup"><span data-stu-id="86b34-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="86b34-166">Merhaba senaryo tooillustrate Bu gelişen, ikinci bir mağaza toobe eklenen tooour perakende senaryodur.</span><span class="sxs-lookup"><span data-stu-id="86b34-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="86b34-167">Tüm hello POS Terminal hem depoları gelen satış verileri hala yönlendirilen toobe merkezi toohello Stok yönetim sisteminin sahip, ancak hello Pano aracını kullanarak bir mağaza yöneticisi yalnızca bu depoyu hello performansta ilgileniyor.</span><span class="sxs-lookup"><span data-stu-id="86b34-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="86b34-168">Bu tooachieve filtreleme aboneliği kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="86b34-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="86b34-169">Merhaba POS Terminal iletileri yayımladığınızda, bunların hello ayarlamanız **StoreName** selamlama iletisine uygulama özelliği.</span><span class="sxs-lookup"><span data-stu-id="86b34-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="86b34-170">İki depolar, örneğin verilen **Redmond** ve **Seattle**, hello POS Terminal hello Redmond, depolama damgası satış verilerini iletileri ile bir **StoreName** çok eşit **Redmond**, hello Seattle depolamak ancak POS Terminal kullanımı bir **StoreName** çok eşit**Seattle**.</span><span class="sxs-lookup"><span data-stu-id="86b34-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="86b34-171">Hello mağaza yöneticisi hello Redmond depolamak yalnızca, kendi POS Terminal toosee verilerden istemektedir.</span><span class="sxs-lookup"><span data-stu-id="86b34-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="86b34-172">Merhaba sistem aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="86b34-172">hello system appears as follows:</span></span>

![Hizmet Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="86b34-174">Bu yönlendirme yukarı tooset, oluşturduğunuz hello **Pano** abonelik şekilde:</span><span class="sxs-lookup"><span data-stu-id="86b34-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="86b34-175">Bu [abonelik filtresi](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), hello olan iletiler **StoreName** çok ayarlanan özelliği**Redmond** kopyalanan toohello sanal sıra hello içinolacaktır**Pano** abonelik.</span><span class="sxs-lookup"><span data-stu-id="86b34-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="86b34-176">Filtreleme, ancak daha fazla toosubscription yoktur.</span><span class="sxs-lookup"><span data-stu-id="86b34-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="86b34-177">Tooa aboneliğin sanal kuyruğuna geçerken uygulamalar ayrıca toohello özelliği toomodify hello özelliklerinde bir ileti abonelik başına birden çok filtre kuralları sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="86b34-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="86b34-178">Özet</span><span class="sxs-lookup"><span data-stu-id="86b34-178">Summary</span></span>
<span data-ttu-id="86b34-179">Tüm hello nedeniyle toouse Queuing'in açıklanan [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md) tootopics, özellikle de geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="86b34-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="86b34-180">Zamana bağlı ayırma – ileti üreticileri ve tüketicileri sahip çevrimiçi toobe Merhaba aynı anda.</span><span class="sxs-lookup"><span data-stu-id="86b34-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="86b34-181">Yük Dengeleme – yük genişliğindeki yükselmeleri yoğun yük yerine ortalama yük için sağlanan kullanıcı uygulamaları toobe etkinleştirme hello konu tarafından düzeltilmesini.</span><span class="sxs-lookup"><span data-stu-id="86b34-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="86b34-182">Yük Dengeleme – benzer tooa sıra tooonly hello Tüketiciler, böylece Yük Dengeleme, bir karmalayan her ileti tek bir abonelik üzerinde dinleme birden çok rakip tüketiciye sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="86b34-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="86b34-183">Gevşek bağlantı – mevcut uç noktaları; etkilemeden ağ Mesajlaşma hello geliştirin Örneğin, abonelik ekleme veya değiştirme tooa konu tooallow yeni Tüketiciler için filtreler.</span><span class="sxs-lookup"><span data-stu-id="86b34-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="86b34-184">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="86b34-184">Next steps</span></span>

<span data-ttu-id="86b34-185">Bkz: [Service Bus kuyruklarını kullanan uygulamalar oluşturmak](service-bus-create-queues.md) toouse hello POS perakende senaryoda nasıl kuyruklar hakkında bilgi.</span><span class="sxs-lookup"><span data-stu-id="86b34-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

