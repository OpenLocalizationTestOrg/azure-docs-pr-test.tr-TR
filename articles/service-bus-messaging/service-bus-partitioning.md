---
title: "Bölümlenmiş Azure Service Bus kuyrukları ve konuları oluşturun | Microsoft Docs"
description: "Birden çok ileti aracıları kullanarak Service Bus kuyrukları ve konularından bölüm açıklar."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 5a4e69ea7e13cb017f8fb432c524c6a8ce9228a8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="fc893-103">Bölümlenmiş kuyruklar ve konular</span><span class="sxs-lookup"><span data-stu-id="fc893-103">Partitioned queues and topics</span></span>
<span data-ttu-id="fc893-104">Azure Service Bus iletileri işlemek için birden çok ileti aracıları ve iletileri depolamak için birden çok Mesajlaşma deposu kullanır.</span><span class="sxs-lookup"><span data-stu-id="fc893-104">Azure Service Bus employs multiple message brokers to process messages and multiple messaging stores to store messages.</span></span> <span data-ttu-id="fc893-105">Geleneksel kuyruk veya konu tek ileti aracısı tarafından işlenen ve bir Mesajlaşma deposunda depolanır.</span><span class="sxs-lookup"><span data-stu-id="fc893-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="fc893-106">Hizmet veri yolu *bölümleri* kuyruklar ve konu başlıkları, etkinleştirmek veya *Mesajlaşma*, birden çok ileti aracıları ve mesajlaşma depoları arasında bölümlenecek.</span><span class="sxs-lookup"><span data-stu-id="fc893-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, to be partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="fc893-107">Bu, genel üretilen işi bölümlenmiş bir varlığın tek ileti aracısı veya Mesajlaşma deposu performansını tarafından artık sınırlı olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="fc893-107">This means that the overall throughput of a partitioned entity is no longer limited by the performance of a single message broker or messaging store.</span></span> <span data-ttu-id="fc893-108">Ayrıca, bir Mesajlaşma deposu geçici bir kesinti bölümlenmiş kuyruk veya konu kullanılamaz işlemez.</span><span class="sxs-lookup"><span data-stu-id="fc893-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="fc893-109">Bölümlenmiş kuyrukları ve konularından işlemleri ve oturumlar için destek gibi tüm Gelişmiş Service Bus özellikler içerebilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="fc893-110">Hizmet veri yolu dahili bileşenleri hakkında daha fazla bilgi için bkz: [Service Bus mimarisi] [ Service Bus architecture] makalesi.</span><span class="sxs-lookup"><span data-stu-id="fc893-110">For information about Service Bus internals, see the [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="fc893-111">Bölümleme varlık oluşturulurken tüm kuyruklar ve konular standart ve Premium, varsayılan olarak etkinleştirilmiştir Mesajlaşma.</span><span class="sxs-lookup"><span data-stu-id="fc893-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="fc893-112">Standart katmanı bölümleme olmadan Mesajlaşma oluşturabilirsiniz, ancak kuyruklar ve konular Premium ad alanı, her zaman bölümlenmiş; Bu seçenek devre dışı bırakılamaz.</span><span class="sxs-lookup"><span data-stu-id="fc893-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="fc893-113">Olası değil varlık oluşturduğunuzda bölümleme seçeneği olan bir sırayı veya standart veya Premium katmanları konudaki değiştirmek için yalnızca seçeneği ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc893-113">It is not possible to change the partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set the option when you create the entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="fc893-114">Nasıl çalışır?</span><span class="sxs-lookup"><span data-stu-id="fc893-114">How it works</span></span>

<span data-ttu-id="fc893-115">Her bölümlenmiş kuyruk veya konu birden çok parçalarını oluşur.</span><span class="sxs-lookup"><span data-stu-id="fc893-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="fc893-116">Her parça farklı bir Mesajlaşma deposunda depolanır ve farklı ileti aracısı tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="fc893-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="fc893-117">Bölümlenmiş kuyruk veya konu için bir ileti gönderildiğinde, hizmet veri yolu ileti parçasının birine atar.</span><span class="sxs-lookup"><span data-stu-id="fc893-117">When a message is sent to a partitioned queue or topic, Service Bus assigns the message to one of the fragments.</span></span> <span data-ttu-id="fc893-118">Seçimi rastgele hizmet veri yolu veya gönderen belirtebilirsiniz bir bölüm anahtarı kullanılarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="fc893-118">The selection is done randomly by Service Bus or by using a partition key that the sender can specify.</span></span>

<span data-ttu-id="fc893-119">Bir istemci iletileri tüm parçaları bölümlenmiş bir kuyruktan ya da hizmet veri yolu sorguları bölümlenmiş bir konu için bir aboneliğe ilişkin bir ileti almaya istediğinde Mesajlaşma depoları hiçbirini alıcıya alınır ilk ileti döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-119">When a client wants to receive a message from a partitioned queue, or from a subscription to a partitioned topic, Service Bus queries all fragments for messages, then returns the first message that is obtained from any of the messaging stores to the receiver.</span></span> <span data-ttu-id="fc893-120">Diğer iletiler ve, aldığında ek döndürür Service Bus önbellekleri isteklerini alır.</span><span class="sxs-lookup"><span data-stu-id="fc893-120">Service Bus caches the other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="fc893-121">Bir alıcı istemci bölümlendirme farkında değildir; bölümlenmiş kuyruk veya konu istemciye yönelik davranışını (örneğin, okuma, tamamlamak, sahipsiz, erteleneceği prefetching) normal bir varlık davranışını aynıdır.</span><span class="sxs-lookup"><span data-stu-id="fc893-121">A receiving client is not aware of the partitioning; the client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical to the behavior of a regular entity.</span></span>

<span data-ttu-id="fc893-122">İleti gönderirken ya da bölümlenmiş kuyruk veya konu, bir mesaj alarak ek bir maliyeti yoktur.</span><span class="sxs-lookup"><span data-stu-id="fc893-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="fc893-123">Bölümleme etkinleştir</span><span class="sxs-lookup"><span data-stu-id="fc893-123">Enable partitioning</span></span>

<span data-ttu-id="fc893-124">Bölümlenmiş kuyrukları ve konularından Azure Service Bus ile kullanmak için Azure SDK'ın 2.2 veya sonraki bir sürümü veya belirtin `api-version=2013-10` , HTTP istekleri.</span><span class="sxs-lookup"><span data-stu-id="fc893-124">To use partitioned queues and topics with Azure Service Bus, use the Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="fc893-125">Standart</span><span class="sxs-lookup"><span data-stu-id="fc893-125">Standard</span></span>

<span data-ttu-id="fc893-126">Standart Mesajlaşma katmanında Service Bus kuyrukları ve konuları (varsayılan 1 GB'dır) 1, 2, 3, 4 veya 5 GB boyutlarda oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc893-126">In the Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (the default is 1 GB).</span></span> <span data-ttu-id="fc893-127">Etkin bölümlendirme ile Service Bus varlık 16 kopyalarını (16 bölümler) için belirttiğiniz her GB oluşturur.</span><span class="sxs-lookup"><span data-stu-id="fc893-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of the entity for each GB you specify.</span></span> <span data-ttu-id="fc893-128">Bu nedenle, 5 GB boyutunda bir sırasına oluşturursanız, en büyük sıra boyutu olan 16 bölümleri olur (5 \* 16) = 80 GB.</span><span class="sxs-lookup"><span data-stu-id="fc893-128">As such, if you create a queue that's 5 GB in size, with 16 partitions the maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="fc893-129">Kendi girdisi bakarak bölümlenmiş kuyruk veya konu en büyük boyutunu görebilirsiniz [Azure portal][Azure portal], **genel bakış** dikey penceresinde bu varlık için.</span><span class="sxs-lookup"><span data-stu-id="fc893-129">You can see the maximum size of your partitioned queue or topic by looking at its entry on the [Azure portal][Azure portal], in the **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="fc893-130">Premium</span><span class="sxs-lookup"><span data-stu-id="fc893-130">Premium</span></span>

<span data-ttu-id="fc893-131">Premium katmanı ad alanında Service Bus kuyrukları ve konuları (varsayılan 1 GB'dır) 1, 2, 3, 4, 5, 10, 20, 40 veya 80 GB boyutlarda oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fc893-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (the default is 1 GB).</span></span> <span data-ttu-id="fc893-132">Varsayılan olarak etkin bölümlendirme ile Service Bus varlık başına iki bölüm oluşturur.</span><span class="sxs-lookup"><span data-stu-id="fc893-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="fc893-133">Kendi girdisi bakarak bölümlenmiş kuyruk veya konu en büyük boyutunu görebilirsiniz [Azure portal][Azure portal], **genel bakış** dikey penceresinde bu varlık için.</span><span class="sxs-lookup"><span data-stu-id="fc893-133">You can see the maximum size of your partitioned queue or topic by looking at its entry on the [Azure portal][Azure portal], in the **Overview** blade for that entity.</span></span>

<span data-ttu-id="fc893-134">Premium Mesajlaşma katmanında bölümleme hakkında daha fazla bilgi için bkz: [Service Bus Premium ve standart Mesajlaşma katmanları](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="fc893-134">For more information about partitioning in the Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="fc893-135">Bölümlenmiş bir varlık oluştur</span><span class="sxs-lookup"><span data-stu-id="fc893-135">Create a partitioned entity</span></span>

<span data-ttu-id="fc893-136">Bölümlenmiş kuyruk veya konu oluşturmanın birkaç yolu vardır.</span><span class="sxs-lookup"><span data-stu-id="fc893-136">There are several ways to create a partitioned queue or topic.</span></span> <span data-ttu-id="fc893-137">Uygulamanızdan kuyruk veya konu oluşturduğunuzda kuyruk veya konu için sırasıyla ayarlayarak bölümleme etkinleştirebilirsiniz [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] veya [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] özelliğine **doğru**.</span><span class="sxs-lookup"><span data-stu-id="fc893-137">When you create the queue or topic from your application, you can enable partitioning for the queue or topic by respectively setting the [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property to **true**.</span></span> <span data-ttu-id="fc893-138">Bu özellikleri aynı anda sıranın ayarlanmalı veya konu oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fc893-138">These properties must be set at the time the queue or topic is created.</span></span> <span data-ttu-id="fc893-139">Daha önce belirtildiği gibi bu özellikleri olan bir sırayı veya konu değiştirmek mümkün değil.</span><span class="sxs-lookup"><span data-stu-id="fc893-139">As stated previously, it is not possible to change these properties on an existing queue or topic.</span></span> <span data-ttu-id="fc893-140">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="fc893-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="fc893-141">Alternatif olarak, bölümlenmiş kuyruk veya konudaki oluşturabilirsiniz [Azure portal] [ Azure portal] veya Visual Studio'da.</span><span class="sxs-lookup"><span data-stu-id="fc893-141">Alternatively, you can create a partitioned queue or topic in the [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="fc893-142">Portalda, kuyruk veya konu oluşturduğunuzda **bölümleme etkinleştirmek** kuyruk veya konu seçeneğinde **oluşturma** dikey varsayılan olarak işaretli.</span><span class="sxs-lookup"><span data-stu-id="fc893-142">When you create a queue or topic in the portal, the **Enable partitioning** option in the queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="fc893-143">Yalnızca standart katmanı varlıktaki bu seçenek devre dışı bırakabilirsiniz; Premium katmanındaki bölümleme her zaman etkindir.</span><span class="sxs-lookup"><span data-stu-id="fc893-143">You can only disable this option in a Standard tier entity; in the Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="fc893-144">Visual Studio'da sırasıyla **etkinleştirmek bölümleme** onay kutusu **yeni kuyruk** veya **yeni konu** iletişim kutusu.</span><span class="sxs-lookup"><span data-stu-id="fc893-144">In Visual Studio, click the **Enable Partitioning** checkbox in the **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="fc893-145">Bölüm anahtarlarını kullanımı</span><span class="sxs-lookup"><span data-stu-id="fc893-145">Use of partition keys</span></span>
<span data-ttu-id="fc893-146">İleti sıraya alınan bölümlenmiş kuyruk veya konu içine olduğunda, hizmet veri yolu bir bölüm anahtarının varlığını denetler.</span><span class="sxs-lookup"><span data-stu-id="fc893-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for the presence of a partition key.</span></span> <span data-ttu-id="fc893-147">Bulursa, bu anahtarı temel parça seçer.</span><span class="sxs-lookup"><span data-stu-id="fc893-147">If it finds one, it selects the fragment based on that key.</span></span> <span data-ttu-id="fc893-148">Bölüm anahtarı bulamazsa, bir iç algoritmadan yola çıkılarak parça seçer.</span><span class="sxs-lookup"><span data-stu-id="fc893-148">If it does not find a partition key, it selects the fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="fc893-149">Bir bölüm anahtarının kullanılması</span><span class="sxs-lookup"><span data-stu-id="fc893-149">Using a partition key</span></span>
<span data-ttu-id="fc893-150">Oturumları veya işlemleri gibi bazı senaryolar belirli parçadaki depolanması için iletileri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="fc893-150">Some scenarios, such as sessions or transactions, require messages to be stored in a specific fragment.</span></span> <span data-ttu-id="fc893-151">Bu senaryolar bölüm anahtarı kullanılmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="fc893-151">All these scenarios require the use of a partition key.</span></span> <span data-ttu-id="fc893-152">Aynı bölüm anahtarı kullanan tüm iletiler için aynı parça atanır.</span><span class="sxs-lookup"><span data-stu-id="fc893-152">All messages that use the same partition key are assigned to the same fragment.</span></span> <span data-ttu-id="fc893-153">Parça geçici olarak devre dışı ise, hizmet veri yolu bir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-153">If the fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="fc893-154">Senaryoya bağlı olarak farklı ileti özellikleri bir bölüm anahtarı olarak kullanılır:</span><span class="sxs-lookup"><span data-stu-id="fc893-154">Depending on the scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="fc893-155">**SessionID**: bir ileti sahipse [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] özelliğini ayarlayın, sonra Service Bus, bu özellik bölüm anahtarı olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="fc893-155">**SessionId**: If a message has the [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as the partition key.</span></span> <span data-ttu-id="fc893-156">Bu şekilde aynı oturuma ait tüm iletileri aynı ileti aracısı tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="fc893-156">This way, all messages that belong to the same session are handled by the same message broker.</span></span> <span data-ttu-id="fc893-157">Bu ileti oturum durumları tutarlılık yanı sıra sıralama güvence altına almak hizmet veri yolu sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc893-157">This enables Service Bus to guarantee message ordering as well as the consistency of session states.</span></span>

<span data-ttu-id="fc893-158">**PartitionKey**: bir ileti sahipse [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] özelliği kullanmamayı [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] özelliğini ayarlayın, sonra Service Bus kullanan [PartitionKey] [ PartitionKey] özelliği bölüm anahtarı olarak.</span><span class="sxs-lookup"><span data-stu-id="fc893-158">**PartitionKey**: If a message has the [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not the [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses the [PartitionKey][PartitionKey] property as the partition key.</span></span> <span data-ttu-id="fc893-159">İletinin her ikisi de varsa [SessionID] [ SessionId] ve [PartitionKey] [ PartitionKey] özellikler kümesi, her iki özellik aynı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fc893-159">If the message has both the [SessionId][SessionId] and the [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="fc893-160">Varsa [PartitionKey] [ PartitionKey] özelliği farklı bir değere ayarlanmış [SessionID] [ SessionId] özelliği, hizmet veri yolu geçersiz işlemi özel durum döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-160">If the [PartitionKey][PartitionKey] property is set to a different value than the [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="fc893-161">[PartitionKey] [ PartitionKey] özelliği, oturum olmayan farkında işlem iletileri gönderen gönderirse, kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fc893-161">The [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="fc893-162">Bölüm anahtarı, bir işlem içinde gönderilen tüm iletiler aynı Mesajlaşma aracısı tarafından işlenmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc893-162">The partition key ensures that all messages that are sent within a transaction are handled by the same messaging broker.</span></span>

<span data-ttu-id="fc893-163">**MessageID**: kuyruk veya konu varsa [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] özelliğini **true** ve [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] veya [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] özellikleri ayarlanmadı, sonra [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] özelliği, bölüm anahtarı olarak hizmet verir.</span><span class="sxs-lookup"><span data-stu-id="fc893-163">**MessageId**: If the queue or topic has the [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set to **true** and the [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then the [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as the partition key.</span></span> <span data-ttu-id="fc893-164">(Gönderen uygulama yoksa Microsoft .NET ve AMQP kitaplıklarını otomatik olarak bir ileti kimliği atamak unutmayın.) Bu durumda, aynı iletiyi tüm kopyalarını aynı ileti aracısı tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="fc893-164">(Note that the Microsoft .NET and AMQP libraries automatically assign a message ID if the sending application does not.) In this case, all copies of the same message are handled by the same message broker.</span></span> <span data-ttu-id="fc893-165">Bu hizmet algılamak ve yinelenen iletileri ortadan kaldırmak veri yolu sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc893-165">This enables Service Bus to detect and eliminate duplicate messages.</span></span> <span data-ttu-id="fc893-166">Varsa [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] özelliği ayarlı değil **true**, Service Bus dikkate almaz [MessageID] [ MessageId] bölüm anahtarı olarak özelliği.</span><span class="sxs-lookup"><span data-stu-id="fc893-166">If the [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set to **true**, Service Bus does not consider the [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="fc893-167">Bir bölüm anahtarının kullanılması değil</span><span class="sxs-lookup"><span data-stu-id="fc893-167">Not using a partition key</span></span>
<span data-ttu-id="fc893-168">Bölüm anahtarı olmaması durumunda, hizmet veri yolu ileti bölümlenmiş kuyruk veya konu tüm parçaları ile hepsini şekilde dağıtır.</span><span class="sxs-lookup"><span data-stu-id="fc893-168">In the absence of a partition key, Service Bus distributes messages in a round-robin fashion to all the fragments of the partitioned queue or topic.</span></span> <span data-ttu-id="fc893-169">Seçilen parça kullanılabilir durumda değilse, hizmet veri yolu ileti için farklı bir parça atar.</span><span class="sxs-lookup"><span data-stu-id="fc893-169">If the chosen fragment is not available, Service Bus assigns the message to a different fragment.</span></span> <span data-ttu-id="fc893-170">Bu şekilde, bir Mesajlaşma deposu geçici kullanılamama rağmen gönderme işlemi başarılı olur.</span><span class="sxs-lookup"><span data-stu-id="fc893-170">This way, the send operation succeeds despite the temporary unavailability of a messaging store.</span></span> <span data-ttu-id="fc893-171">Ancak, garantili bölüm anahtarı sağlayan sıralama elde.</span><span class="sxs-lookup"><span data-stu-id="fc893-171">However, you will not achieve the guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="fc893-172">Kullanılabilirlik (bölüm anahtarı) ve (bölüm anahtarı kullanarak) tutarlılık karşılaştırmasını daha ayrıntılı bir tartışma için bkz: [bu makalede](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="fc893-172">For a more in-depth discussion of the tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="fc893-173">Bu bilgiler, bölümlenmiş hizmet veri yolu varlıklarını ve Event Hubs bölümler için eşit oranda geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="fc893-173">This information applies equally to partitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="fc893-174">Hizmet veri yolu vermek için yeterli kuyruğa ileti farklı bir parça zaman [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] ileti 15 saniyeden büyük olmalıdır gönderir istemci tarafından belirtilen değeri.</span><span class="sxs-lookup"><span data-stu-id="fc893-174">To give Service Bus enough time to enqueue the message into a different fragment, the [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by the client that sends the message must be greater than 15 seconds.</span></span> <span data-ttu-id="fc893-175">Ayarladığınız önerilir [OperationTimeout] [ OperationTimeout] özelliğinin varsayılan değeri 60 saniye.</span><span class="sxs-lookup"><span data-stu-id="fc893-175">It is recommended that you set the [OperationTimeout][OperationTimeout] property to the default value of 60 seconds.</span></span>

<span data-ttu-id="fc893-176">Bölüm anahtarı "belirli bir parça iletiye sabitler," unutmayın.</span><span class="sxs-lookup"><span data-stu-id="fc893-176">Note that a partition key "pins" a message to a specific fragment.</span></span> <span data-ttu-id="fc893-177">Bu parça tutan Mesajlaşma deposu kullanılamıyorsa, hizmet veri yolu bir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-177">If the messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="fc893-178">Bölüm anahtarı olmadığında, Service Bus farklı bir parça seçebilir ve işlemi başarılı olur.</span><span class="sxs-lookup"><span data-stu-id="fc893-178">In the absence of a partition key, Service Bus can choose a different fragment and the operation succeeds.</span></span> <span data-ttu-id="fc893-179">Bu nedenle, gerekli olmadığı sürece bir bölüm anahtarı sağlamazsanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="fc893-180">Gelişmiş konular: bölümlenmiş varlıklarıyla işlemleri kullanın</span><span class="sxs-lookup"><span data-stu-id="fc893-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="fc893-181">Bir işlemin bir parçası gönderilen iletileri bir bölüm anahtarı belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc893-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="fc893-182">Bu aşağıdaki özelliklerinden biri olabilir: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], veya [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="fc893-182">This can be one of the following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="fc893-183">Aynı işlem bir parçası olarak gönderilen tüm iletiler aynı bölüm anahtarı belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc893-183">All messages that are sent as part of the same transaction must specify the same partition key.</span></span> <span data-ttu-id="fc893-184">Bir işlem içinde bölüm anahtarı olmayan bir ileti göndermek çalışırsanız, hizmet veri yolu geçersiz işlemi özel durum döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-184">If you attempt to send a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="fc893-185">Aynı işlem içinde farklı bölüm anahtarlara sahip birden fazla ileti göndermeye, hizmet veri yolu geçersiz işlemi özel durum döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-185">If you attempt to send multiple messages within the same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="fc893-186">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="fc893-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="fc893-187">Bölüm anahtarı olarak hizmet özelliklerinden herhangi birini ayarlandıysa, hizmet veri yolu belirli bir parça iletiye sabitler.</span><span class="sxs-lookup"><span data-stu-id="fc893-187">If any of the properties that serve as a partition key are set, Service Bus pins the message to a specific fragment.</span></span> <span data-ttu-id="fc893-188">Bu davranış, bir işlem kullanılan olup olmadığına bakılmaksızın oluşur.</span><span class="sxs-lookup"><span data-stu-id="fc893-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="fc893-189">Gerekli değilse bölüm anahtarı belirtmeyin önerilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="fc893-190">Bölümlenmiş varlıklarıyla oturumları kullanma</span><span class="sxs-lookup"><span data-stu-id="fc893-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="fc893-191">Oturum durumunu algılayan konu veya sıra için işlem ileti göndermek için ileti olmalıdır [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] özellik kümesi.</span><span class="sxs-lookup"><span data-stu-id="fc893-191">To send a transactional message to a session-aware topic or queue, the message must have the [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="fc893-192">Varsa [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] özelliği de belirtilen, aynı olmalıdır [SessionID] [ SessionId] özelliği.</span><span class="sxs-lookup"><span data-stu-id="fc893-192">If the [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical to the [SessionId][SessionId] property.</span></span> <span data-ttu-id="fc893-193">Bunlar farklıysa, hizmet veri yolu geçersiz işlemi özel durum döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="fc893-194">Normal (bölümlenmemiş) sıralar veya konuları farklı olarak, farklı oturumlar için birden çok ileti göndermek için tek bir işlem kullanmak mümkün değil.</span><span class="sxs-lookup"><span data-stu-id="fc893-194">Unlike regular (non-partitioned) queues or topics, it is not possible to use a single transaction to send multiple messages to different sessions.</span></span> <span data-ttu-id="fc893-195">Bulamazsa, hizmet veri yolu geçersiz işlemi özel durum döndürür.</span><span class="sxs-lookup"><span data-stu-id="fc893-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="fc893-196">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="fc893-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="fc893-197">Bölümlenmiş varlıklarla otomatik ileti iletme</span><span class="sxs-lookup"><span data-stu-id="fc893-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="fc893-198">Service Bus otomatik ileti gelen ya da bölümlenen varlıklar arasında iletme destekler.</span><span class="sxs-lookup"><span data-stu-id="fc893-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="fc893-199">Otomatik ileti iletmeyi etkinleştirmek için ayarlanmış [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] kaynak sırası veya Abonelik özelliği.</span><span class="sxs-lookup"><span data-stu-id="fc893-199">To enable automatic message forwarding, set the [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on the source queue or subscription.</span></span> <span data-ttu-id="fc893-200">İleti bir bölüm anahtarı belirtiyorsa ([SessionID][SessionId], [PartitionKey][PartitionKey], veya [MessageID][MessageId]), bu bölüm anahtarı hedef varlık için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="fc893-200">If the message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for the destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="fc893-201">Dikkat edilecek noktalar ve yönergeleri</span><span class="sxs-lookup"><span data-stu-id="fc893-201">Considerations and guidelines</span></span>
* <span data-ttu-id="fc893-202">**Yüksek tutarlılık özellikleri**: bir varlığı oturumları, yinelenen algılama veya bölümlendirme anahtarı açık denetim gibi özellikler kullanan sonra Mesajlaşma işlemleri belirli parçada her zaman yönlendirilecek.</span><span class="sxs-lookup"><span data-stu-id="fc893-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then the messaging operations are always routed to specific fragments.</span></span> <span data-ttu-id="fc893-203">Herhangi bir parçasının yüksek trafik deneyimi veya alttaki deponun sağlam değil, bu işlemler başarısız ve kullanılabilirlik azalır.</span><span class="sxs-lookup"><span data-stu-id="fc893-203">If any of the fragments experience high traffic or the underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="fc893-204">Genel olarak, tutarlılık bölümlenmemiş varlıklar hala çok daha yüksektir; yalnızca bir alt trafik tüm trafiği aksine sorunları yaşıyor.</span><span class="sxs-lookup"><span data-stu-id="fc893-204">Overall, the consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed to all the traffic.</span></span> <span data-ttu-id="fc893-205">Daha fazla bilgi için bkz [kullanılabilirlik ve tutarlılık tartışma](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="fc893-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="fc893-206">**Yönetim**: oluşturma, güncelleştirme ve silme gibi işlemleri varlığın tüm parçaları üzerinde gerçekleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc893-206">**Management**: Operations such as Create, Update and Delete must be performed on all the fragments of the entity.</span></span> <span data-ttu-id="fc893-207">Herhangi bir parça sağlıksız ise, bu işlemler için hataları neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="fc893-208">İleti sayısı gibi alma işlemi için bilgi tüm parçaları toplanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="fc893-208">For the Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="fc893-209">Herhangi bir parça sağlıksız ise, varlık kullanılabilirlik durumunu sınırlı raporlanır.</span><span class="sxs-lookup"><span data-stu-id="fc893-209">If any fragment is unhealthy, the entity availability status is reported as limited.</span></span>
* <span data-ttu-id="fc893-210">**Düşük birim ileti senaryosu**: Bu senaryolara, özellikle HTTP protokolünü kullanarak birden çok gerçekleştirmeniz gerekebilir tüm iletileri almak için alma işlemleri.</span><span class="sxs-lookup"><span data-stu-id="fc893-210">**Low volume message scenarios**: For such scenarios, especially when using the HTTP protocol, you may have to perform multiple receive operations in order to obtain all the messages.</span></span> <span data-ttu-id="fc893-211">Alma istekleri için ön uç üzerinde tüm parçaları alma gerçekleştirir ve alınan tüm yanıtlarını önbelleğe kaydeder.</span><span class="sxs-lookup"><span data-stu-id="fc893-211">For receive requests, the front end performs a receive on all the fragments and caches all the responses received.</span></span> <span data-ttu-id="fc893-212">Aynı bağlantı üzerinde bir sonraki alma isteği ve yararlanan bu önbelleğe alınan alma gecikme daha düşük olacaktır.</span><span class="sxs-lookup"><span data-stu-id="fc893-212">A subsequent receive request on the same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="fc893-213">Ancak, birden çok bağlantınız veya HTTP kullanıyorsanız, her istek için yeni bir bağlantı kurar.</span><span class="sxs-lookup"><span data-stu-id="fc893-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="fc893-214">Bu nedenle, aynı düğümde güden hiçbir garantisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="fc893-214">As such, there is no guarantee that it would land on the same node.</span></span> <span data-ttu-id="fc893-215">Tüm mevcut iletiler kilitli ve içinde başka bir ön uç önbelleğe varsa, alma işlemi döndürür **null**.</span><span class="sxs-lookup"><span data-stu-id="fc893-215">If all existing messages are locked and cached in another front end, the receive operation returns **null**.</span></span> <span data-ttu-id="fc893-216">İletileri sonunda süresi dolacak ve yeniden alırsınız.</span><span class="sxs-lookup"><span data-stu-id="fc893-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="fc893-217">HTTP Etkin tutmayı önerilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="fc893-218">**Gözat/gözlem iletileri**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) her zaman belirtilen ileti sayısını döndürmüyor [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) özelliği.</span><span class="sxs-lookup"><span data-stu-id="fc893-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return the number of messages specified in the [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="fc893-219">Bu iki ortak nedenleri vardır.</span><span class="sxs-lookup"><span data-stu-id="fc893-219">There are two common reasons for this.</span></span> <span data-ttu-id="fc893-220">İletileri koleksiyonu toplanmış boyutu 256 KB en fazla boyutu aşıyor bir nedenidir.</span><span class="sxs-lookup"><span data-stu-id="fc893-220">One reason is that the aggregated size of the collection of messages exceeds the maximum size of 256KB.</span></span> <span data-ttu-id="fc893-221">Kuyruk veya konu varsa olan başka bir nedenle [EnablePartitioning özelliğinin](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) kümesine **doğru**, bir bölüm iletileri istenen sayıda tamamlamak için yeterli iletileri olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="fc893-221">Another reason is that if the queue or topic has the [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set to **true**, a partition may not have enough messages to complete the requested number of messages.</span></span> <span data-ttu-id="fc893-222">Bir uygulama belirli sayıda ileti almak istiyorsa, genel olarak, çağırmalıdır [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) sürekli olarak bu ileti sayısını alır veya atmaya daha fazla ileti yok kadar.</span><span class="sxs-lookup"><span data-stu-id="fc893-222">In general, if an application wants to receive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages to peek.</span></span> <span data-ttu-id="fc893-223">Kod örnekleri dahil olmak üzere daha fazla bilgi için bkz: [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) veya [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="fc893-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="fc893-224">En son eklenen özellikler</span><span class="sxs-lookup"><span data-stu-id="fc893-224">Latest added features</span></span>
* <span data-ttu-id="fc893-225">Ekleme veya kaldırma kural bölümlenmiş varlıklarıyla artık desteklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="fc893-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="fc893-226">Bölümlenmiş olmayan varlıklar farklıdır, bu işlemler altında işlemleri desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="fc893-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="fc893-227">AMQP, gönderme ve alma ve ileti bölümlenmiş bir varlıktan artık desteklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="fc893-227">AMQP is now supported for sending and receiving messages to and from a partitioned entity.</span></span>
* <span data-ttu-id="fc893-228">AMQP aşağıdaki işlemler için artık desteklenmektedir: [toplu iş gönderme](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [toplu alma](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [alma sıra numarası tarafından](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [yenileme kilit](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [zamanlama ileti](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [iptal zamanlanmış iletisi](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Kuralı Ekle](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [kuralı kaldırmak](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [oturum yenileme kilit](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [kümesi oturum durumu](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get oturum durumu](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), ve [listeleme oturumları](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="fc893-228">AMQP is now supported for the following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="fc893-229">Bölümlenen varlıklar sınırlamaları</span><span class="sxs-lookup"><span data-stu-id="fc893-229">Partitioned entities limitations</span></span>
<span data-ttu-id="fc893-230">Şu anda hizmet veri yolu bölümlenmiş kuyrukları ve konularından aşağıdaki sınırlamalar getirir:</span><span class="sxs-lookup"><span data-stu-id="fc893-230">Currently Service Bus imposes the following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="fc893-231">Bölümlenmiş kuyruklar ve konu başlıkları tek bir işlemde farklı oturumlar ait iletileri gönderme desteklemez.</span><span class="sxs-lookup"><span data-stu-id="fc893-231">Partitioned queues and topics do not support sending messages that belong to different sessions in a single transaction.</span></span>
* <span data-ttu-id="fc893-232">Hizmet veri yolu şu anda en fazla 100 bölümlenmiş sıralar veya ad alanı başına konuları sağlar.</span><span class="sxs-lookup"><span data-stu-id="fc893-232">Service Bus currently allows up to 100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="fc893-233">Ad alanı (Premium katmanı için geçerli değildir) başına 10.000 varlık kota doğrultusunda her bölümlenmiş kuyruk veya konu sayar.</span><span class="sxs-lookup"><span data-stu-id="fc893-233">Each partitioned queue or topic counts towards the quota of 10,000 entities per namespace (does not apply to Premium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="fc893-234">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="fc893-234">Next steps</span></span>
<span data-ttu-id="fc893-235">Açıklamalara [hizmet veri yolu AMQP 1.0 desteği bölümlenmiş kuyruklar ve konu başlıkları] [ AMQP 1.0 support for Service Bus partitioned queues and topics] Mesajlaşma varlıkları bölümleme hakkında daha fazla bilgi edinmek için.</span><span class="sxs-lookup"><span data-stu-id="fc893-235">See the discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] to learn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md
