---
title: "aaaInsulating Azure Service Bus uygulama kesintiler ve olağanüstü karşı | Microsoft Docs"
description: "Olası bir hizmet veri yolu kesinti karşı tooprotect uygulamalar kullanabileceğiniz teknikleri açıklar."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: tysonn
ms.assetid: fd9fa8ab-f4c4-43f7-974f-c876df1614d4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/12/2017
ms.author: sethm
ms.openlocfilehash: 349b4968456c9f15375753d83495246f5a3ddfdb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-insulating-applications-against-service-bus-outages-and-disasters"></a><span data-ttu-id="cd0e8-103">Hizmet veri yolu kesintileri ve olağanüstü karşı uygulamalar insulating için en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="cd0e8-103">Best practices for insulating applications against Service Bus outages and disasters</span></span>
<span data-ttu-id="cd0e8-104">Görev açısından kritik uygulamalar bile hello bulunması planlanmayan kesintiler veya olağanüstü sürekli olarak çalışması gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-104">Mission-critical applications must operate continuously, even in hello presence of unplanned outages or disasters.</span></span> <span data-ttu-id="cd0e8-105">Bu konu tooprotect hizmet veri yolu uygulamaları potansiyel hizmet kesintisi veya olağanüstü durum karşı kullanabilir teknikleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-105">This topic describes techniques you can use tooprotect Service Bus applications against a potential service outage or disaster.</span></span>

<span data-ttu-id="cd0e8-106">Bir kesinti hello geçici olarak kullanım dışı kalması Azure hizmet veri yolu tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-106">An outage is defined as hello temporary unavailability of Azure Service Bus.</span></span> <span data-ttu-id="cd0e8-107">Merhaba kesinti Service Bus Mesajlaşma deposu veya veri merkezinin tamamı bile hello gibi bazı bileşenleri etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-107">hello outage can affect some components of Service Bus, such as a messaging store, or even hello entire datacenter.</span></span> <span data-ttu-id="cd0e8-108">Merhaba sorun çözüldükten sonra hizmet veri yolu yeniden kullanılabilir hale gelir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-108">After hello problem has been fixed, Service Bus becomes available again.</span></span> <span data-ttu-id="cd0e8-109">Genellikle, bir kesinti iletileri veya diğer veri kaybına neden olmaz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-109">Typically, an outage does not cause loss of messages or other data.</span></span> <span data-ttu-id="cd0e8-110">Belirli bir Mesajlaşma deposu hello kullanılamama bileşeni hatası örnektir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-110">An example of a component failure is hello unavailability of a particular messaging store.</span></span> <span data-ttu-id="cd0e8-111">Bir güç kesintisi hello datacenter ya da hatalı veri merkezi ağ anahtarı, bir veri merkezi çapında kesinti örnektir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-111">An example of a datacenter-wide outage is a power failure of hello datacenter, or a faulty datacenter network switch.</span></span> <span data-ttu-id="cd0e8-112">Bir kesinti birkaç dakika tooa birkaç gün sürebilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-112">An outage can last from a few minutes tooa few days.</span></span>

<span data-ttu-id="cd0e8-113">Bir olağanüstü durum hello kalıcı kaybı bir Service Bus ölçek birimi veya veri merkezi tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-113">A disaster is defined as hello permanent loss of a Service Bus scale unit or datacenter.</span></span> <span data-ttu-id="cd0e8-114">Merhaba datacenter olabilir ya da yeniden kullanılabilir duruma gelebilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-114">hello datacenter may or may not become available again.</span></span> <span data-ttu-id="cd0e8-115">Genellikle bir olağanüstü durum bazı veya tüm iletileri veya diğer veri kaybına neden olur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-115">Typically a disaster causes loss of some or all messages or other data.</span></span> <span data-ttu-id="cd0e8-116">Yangın, taşmasını veya deprem afetler örnekleridir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-116">Examples of disasters are fire, flooding, or earthquake.</span></span>

## <a name="current-architecture"></a><span data-ttu-id="cd0e8-117">Geçerli mimari</span><span class="sxs-lookup"><span data-stu-id="cd0e8-117">Current architecture</span></span>
<span data-ttu-id="cd0e8-118">Service Bus tooqueues veya konular gönderilen birden çok Mesajlaşma depoları toostore iletileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-118">Service Bus uses multiple messaging stores toostore messages that are sent tooqueues or topics.</span></span> <span data-ttu-id="cd0e8-119">Bölümlenmemiş kuyruk veya konu deposu Mesajlaşma tooone atanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-119">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="cd0e8-120">Bu ileti deposunu kullanılamıyorsa, kuyruk veya konu tüm işlemler başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-120">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span>

<span data-ttu-id="cd0e8-121">Bir veri merkezi ile bağlantılı bir hizmet ad alanındaki tüm Service Bus Mesajlaşma varlıkları (kuyruklar, konular, geçişler) bulunur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-121">All Service Bus messaging entities (queues, topics, relays) reside in a service namespace, which is affiliated with a datacenter.</span></span> <span data-ttu-id="cd0e8-122">Service Bus otomatik coğrafi çoğaltma veri etkinleştirmez veya birden çok veri merkezi bir ad alanı toospan izin vermez.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-122">Service Bus does not enable automatic geo-replication of data, nor does it allow a namespace toospan multiple datacenters.</span></span>

## <a name="protecting-against-acs-outages"></a><span data-ttu-id="cd0e8-123">ACS kesintilere karşı koruma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-123">Protecting against ACS outages</span></span>
<span data-ttu-id="cd0e8-124">ACS kimlik bilgilerini kullandığını ve ACS kullanılamaz hale, istemciler artık belirteçleri alabilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-124">If you are using ACS credentials, and ACS becomes unavailable, clients can no longer obtain tokens.</span></span> <span data-ttu-id="cd0e8-125">Merhaba belirteçleri süresi dolana kadar ACS arıza hello zamanında bir belirteç olan istemcileri toouse Service Bus devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-125">Clients that have a token at hello time ACS goes down can continue toouse Service Bus until hello tokens expire.</span></span> <span data-ttu-id="cd0e8-126">Merhaba varsayılan belirteç ömrü 3 saattir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-126">hello default token lifetime is 3 hours.</span></span>

<span data-ttu-id="cd0e8-127">ACS kesintilere karşı tooprotect paylaşılan erişim imzası (SAS) belirteçleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-127">tooprotect against ACS outages, use Shared Access Signature (SAS) tokens.</span></span> <span data-ttu-id="cd0e8-128">Bu durumda, hello istemci gizli bir anahtar ile bir kendi kendine minted belirteç imzalama tarafından doğrudan Service Bus ile kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-128">In this case, hello client authenticates directly with Service Bus by signing a self-minted token with a secret key.</span></span> <span data-ttu-id="cd0e8-129">Çağrıları tooACS artık gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-129">Calls tooACS are no longer required.</span></span> <span data-ttu-id="cd0e8-130">SAS belirteci hakkında daha fazla bilgi için bkz: [Service Bus kimlik doğrulama][Service Bus authentication].</span><span class="sxs-lookup"><span data-stu-id="cd0e8-130">For more information about SAS tokens, see [Service Bus authentication][Service Bus authentication].</span></span>

## <a name="protecting-queues-and-topics-against-messaging-store-failures"></a><span data-ttu-id="cd0e8-131">Kuyruklar ve konu başlıkları deposu başarısızlıkları Mesajlaşma karşı koruma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-131">Protecting queues and topics against messaging store failures</span></span>
<span data-ttu-id="cd0e8-132">Bölümlenmemiş kuyruk veya konu deposu Mesajlaşma tooone atanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-132">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="cd0e8-133">Bu ileti deposunu kullanılamıyorsa, kuyruk veya konu tüm işlemler başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-133">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span> <span data-ttu-id="cd0e8-134">A hello üzerinde sıra diğer yandan bölümlenmiş, birden çok parçalarını oluşur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-134">A partitioned queue, on hello other hand, consists of multiple fragments.</span></span> <span data-ttu-id="cd0e8-135">Her parça farklı bir Mesajlaşma deposunda depolanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-135">Each fragment is stored in a different messaging store.</span></span> <span data-ttu-id="cd0e8-136">Bir ileti tooa bölümlenmiş kuyruk veya konu gönderildiğinde, Service Bus hello ileti tooone hello parçaların atar.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-136">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="cd0e8-137">Merhaba karşılık gelen ileti deposu kullanılamıyorsa, hizmet veri yolu hello ileti tooa farklı parça, mümkünse yazar.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-137">If hello corresponding messaging store is unavailable, Service Bus writes hello message tooa different fragment, if possible.</span></span> <span data-ttu-id="cd0e8-138">Bölümlenen varlıklar hakkında daha fazla bilgi için bkz: [bölümlenmiş Mesajlaşma varlıkları][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="cd0e8-138">For more information about partitioned entities, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

## <a name="protecting-against-datacenter-outages-or-disasters"></a><span data-ttu-id="cd0e8-139">Veri Merkezi kesintilerini veya olağanüstü karşı koruma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-139">Protecting against datacenter outages or disasters</span></span>
<span data-ttu-id="cd0e8-140">tooallow iki veri merkezi arasında bir yük devretme için her veri merkezinde bir Service Bus hizmeti ad alanı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-140">tooallow for a failover between two datacenters, you can create a Service Bus service namespace in each datacenter.</span></span> <span data-ttu-id="cd0e8-141">Örneğin, Service Bus hizmeti ad alanı hello **contosoPrimary.servicebus.windows.net** hello Amerika Birleşik Devletleri Kuzey/Orta bölgesinde bulunan ve **contosoSecondary.servicebus.windows.net**hello BİZE Güney/Orta bölgesinde bulunan.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-141">For example, hello Service Bus service namespace **contosoPrimary.servicebus.windows.net** might be located in hello United States North/Central region, and **contosoSecondary.servicebus.windows.net** might be located in hello US South/Central region.</span></span> <span data-ttu-id="cd0e8-142">Service Bus varlık Mesajlaşma bir veri merkezi kesintisinden hello bulunması erişilebilir kalması gereken, varlığın her iki ad alanları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-142">If a Service Bus messaging entity must remain accessible in hello presence of a datacenter outage, you can create that entity in both namespaces.</span></span>

<span data-ttu-id="cd0e8-143">Daha fazla bilgi için "Service Bus Azure veri merkezi içinde hatası" bölümünde hello bkz [zaman uyumsuz desenleri ve yüksek kullanılabilirlik Mesajlaşma][Asynchronous messaging patterns and high availability].</span><span class="sxs-lookup"><span data-stu-id="cd0e8-143">For more information, see hello "Failure of Service Bus within an Azure datacenter" section in [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability].</span></span>

## <a name="protecting-relay-endpoints-against-datacenter-outages-or-disasters"></a><span data-ttu-id="cd0e8-144">Veri Merkezi kesintilerini veya olağanüstü karşı koruma geçiş uç noktaları</span><span class="sxs-lookup"><span data-stu-id="cd0e8-144">Protecting relay endpoints against datacenter outages or disasters</span></span>
<span data-ttu-id="cd0e8-145">Coğrafi çoğaltma geçiş uç noktaları Service Bus kesintileri hello bulunması erişilebilir bir geçiş uç nokta toobe kullanıma sunan bir hizmet sağlar.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-145">Geo-replication of relay endpoints allows a service that exposes a relay endpoint toobe reachable in hello presence of Service Bus outages.</span></span> <span data-ttu-id="cd0e8-146">tooachieve coğrafi çoğaltma, hello hizmeti farklı ad alanlarında iki geçiş uç noktalar oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-146">tooachieve geo-replication, hello service must create two relay endpoints in different namespaces.</span></span> <span data-ttu-id="cd0e8-147">Merhaba ad alanları farklı veri merkezlerinde bulunmalıdır ve hello iki uç nokta adları farklı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-147">hello namespaces must reside in different datacenters and hello two endpoints must have different names.</span></span> <span data-ttu-id="cd0e8-148">Örneğin, birincil bir uç nokta altında ulaşılabilen **contosoPrimary.servicebus.windows.net/myPrimaryService**altında ikincil kendisine karşılık gelen ulaşılabilen yaparken **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-148">For example, a primary endpoint can be reached under **contosoPrimary.servicebus.windows.net/myPrimaryService**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span></span>

<span data-ttu-id="cd0e8-149">Merhaba hizmeti sonra her iki bitiş noktasında dinler ve bir istemci ya da uç noktası aracılığıyla hello hizmet çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-149">hello service then listens on both endpoints, and a client can invoke hello service via either endpoint.</span></span> <span data-ttu-id="cd0e8-150">Bir istemci uygulaması rastgele birincil endpoint hello gibi hello geçişler birini seçer ve kendi isteği toohello etkin uç gönderir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-150">A client application randomly picks one of hello relays as hello primary endpoint, and sends its request toohello active endpoint.</span></span> <span data-ttu-id="cd0e8-151">Merhaba işlemi bir hata kodu ile başarısız olursa, o hello geçiş uç noktası kullanılamıyor bu hatayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-151">If hello operation fails with an error code, this failure indicates that hello relay endpoint is not available.</span></span> <span data-ttu-id="cd0e8-152">Merhaba uygulaması bir kanal toohello yedekleme uç nokta açar ve hello isteği yeniden yayımlar.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-152">hello application opens a channel toohello backup endpoint and reissues hello request.</span></span> <span data-ttu-id="cd0e8-153">Bu noktada rolleri hello etkin ve hello yedekleme uç noktaları geçiş: Merhaba istemci uygulaması hello eski etkin uç nokta toobe hello yeni yedekleme uç noktası ve hello eski yedekleme endpoint toobe hello yeni etkin uç noktası göz önünde bulundurur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-153">At that point hello active and hello backup endpoints switch roles: hello client application considers hello old active endpoint toobe hello new backup endpoint, and hello old backup endpoint toobe hello new active endpoint.</span></span> <span data-ttu-id="cd0e8-154">Her ikisi de işlemleri başarısız gönderirseniz hello iki varlık hello rolleri değişmeden kalır ve bir hata döndürdü.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-154">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="cd0e8-155">Merhaba [coğrafi çoğaltma ile Service Bus geçişli iletileri] [ Geo-replication with Service Bus relayed Messages] örnek gösterilmektedir nasıl tooreplicate iletir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-155">hello [Geo-replication with Service Bus relayed messages][Geo-replication with Service Bus relayed Messages] sample demonstrates how tooreplicate relays.</span></span>

## <a name="protecting-queues-and-topics-against-datacenter-outages-or-disasters"></a><span data-ttu-id="cd0e8-156">Kuyruklar ve konu başlıkları datacenter kesintileri ya da olağanüstü karşı koruma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-156">Protecting queues and topics against datacenter outages or disasters</span></span>
<span data-ttu-id="cd0e8-157">tooachieve esnekliği kullanarak aracılı Mesajlaşma, veri merkezi kesintilere karşı Service Bus iki yaklaşım destekler: *etkin* ve *pasif* çoğaltma.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-157">tooachieve resilience against datacenter outages when using brokered messaging, Service Bus supports two approaches: *active* and *passive* replication.</span></span> <span data-ttu-id="cd0e8-158">Belirtilen kuyruk veya konu bir veri merkezi kesintisinden hello bulunması erişilebilir kalması gereken varsa her bir yaklaşım, her iki ad alanları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-158">For each approach, if a given queue or topic must remain accessible in hello presence of a datacenter outage, you can create it in both namespaces.</span></span> <span data-ttu-id="cd0e8-159">Her iki varlığa hello olabilir aynı adı.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-159">Both entities can have hello same name.</span></span> <span data-ttu-id="cd0e8-160">Örneğin, birincil bir kuyruk altında ulaşılabilen **contosoPrimary.servicebus.windows.net/myQueue**altında ikincil kendisine karşılık gelen ulaşılabilen yaparken **contosoSecondary.servicebus.windows.net/myQueue**.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-160">For example, a primary queue can be reached under **contosoPrimary.servicebus.windows.net/myQueue**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/myQueue**.</span></span>

<span data-ttu-id="cd0e8-161">Merhaba uygulaması kalıcı gönderenin alıcı iletişim gerektirmiyorsa Merhaba uygulaması bir dayanıklı istemci-tarafı sıra tooprevent ileti kaybına ve tooshield hello gönderenden geçici hizmet veri yolu hataları uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-161">If hello application does not require permanent sender-to-receiver communication, hello application can implement a durable client-side queue tooprevent message loss and tooshield hello sender from any transient Service Bus errors.</span></span>

## <a name="active-replication"></a><span data-ttu-id="cd0e8-162">Etkin çoğaltma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-162">Active replication</span></span>
<span data-ttu-id="cd0e8-163">Etkin çoğaltma varlıklar her işlem için her iki ad kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-163">Active replication uses entities in both namespaces for every operation.</span></span> <span data-ttu-id="cd0e8-164">Bir ileti gönderen herhangi bir istemci hello iki kopyasını gönderir aynı ileti.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-164">Any client that sends a message sends two copies of hello same message.</span></span> <span data-ttu-id="cd0e8-165">Merhaba ilk kopyayı toohello birincil varlık gönderilen (örneğin, **contosoPrimary.servicebus.windows.net/sales**), ve hello ikinci bir kopyası selamlama iletisine toohello ikincil varlık gönderilen (örneğin,  **contosoSecondary.servicebus.windows.net/sales**).</span><span class="sxs-lookup"><span data-stu-id="cd0e8-165">hello first copy is sent toohello primary entity (for example, **contosoPrimary.servicebus.windows.net/sales**), and hello second copy of hello message is sent toohello secondary entity (for example, **contosoSecondary.servicebus.windows.net/sales**).</span></span>

<span data-ttu-id="cd0e8-166">Bir istemci, her iki sıralarından iletilerini alır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-166">A client receives messages from both queues.</span></span> <span data-ttu-id="cd0e8-167">ilk iletinin kopyasını Hello alıcısı işlemler hello ve hello ikinci kopya engellenir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-167">hello receiver processes hello first copy of a message, and hello second copy is suppressed.</span></span> <span data-ttu-id="cd0e8-168">toosuppress yinelenen iletileri hello gönderen her iletinin benzersiz bir tanımlayıcı etiketlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-168">toosuppress duplicate messages, hello sender must tag each message with a unique identifier.</span></span> <span data-ttu-id="cd0e8-169">Her iki kopyasını selamlama iletisine ile Merhaba etiketlenmelidir aynı tanımlayıcısı.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-169">Both copies of hello message must be tagged with hello same identifier.</span></span> <span data-ttu-id="cd0e8-170">Merhaba kullanabilirsiniz [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] veya [BrokeredMessage.Label] [ BrokeredMessage.Label] özellikleri ya da bir özel özellik tootag hello İleti.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-170">You can use hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] or [BrokeredMessage.Label][BrokeredMessage.Label] properties, or a custom property tootag hello message.</span></span> <span data-ttu-id="cd0e8-171">Merhaba alıcı zaten aldığı iletileri listesini bulundurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-171">hello receiver must maintain a list of messages that it has already received.</span></span>

<span data-ttu-id="cd0e8-172">Merhaba [Service Bus aracılı iletiler coğrafi çoğaltma] [ Geo-replication with Service Bus Brokered Messages] örnek Mesajlaşma, etkin çoğaltma gösterir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-172">hello [Geo-replication with Service Bus Brokered Messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates active replication of messaging entities.</span></span>

> [!NOTE]
> <span data-ttu-id="cd0e8-173">Merhaba etkin çoğaltma yaklaşım hello işlemlerinin sayısı iki katına çıkarır, bu nedenle, bu yaklaşım toohigher maliyet yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-173">hello active replication approach doubles hello number of operations, therefore this approach can lead toohigher cost.</span></span>
> 
> 

## <a name="passive-replication"></a><span data-ttu-id="cd0e8-174">Pasif çoğaltma</span><span class="sxs-lookup"><span data-stu-id="cd0e8-174">Passive replication</span></span>
<span data-ttu-id="cd0e8-175">Merhaba hataya serbest durumda pasif çoğaltma hello iki Mesajlaşma varlıkları yalnızca birini kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-175">In hello fault-free case, passive replication uses only one of hello two messaging entities.</span></span> <span data-ttu-id="cd0e8-176">Bir istemci hello ileti toohello etkin varlık gönderir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-176">A client sends hello message toohello active entity.</span></span> <span data-ttu-id="cd0e8-177">Merhaba işlem hello etkin varlıkta konakları hello etkin varlık kullanılamayabilir hello datacenter belirten bir hata kodu ile başarısız olursa, hello istemci hello ileti toohello yedekleme varlık bir kopyasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-177">If hello operation on hello active entity fails with an error code that indicates hello datacenter that hosts hello active entity might be unavailable, hello client sends a copy of hello message toohello backup entity.</span></span> <span data-ttu-id="cd0e8-178">Bu noktada hello etkin ve hello yedekleme varlıkları rolleri geçiş: hello gönderen istemci hello eski etkin varlık toobe hello yeni yedekleme varlık göz önünde bulundurur ve hello eski yedekleme varlıktır hello yeni etkin varlık.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-178">At that point hello active and hello backup entities switch roles: hello sending client considers hello old active entity toobe hello new backup entity, and hello old backup entity is hello new active entity.</span></span> <span data-ttu-id="cd0e8-179">Her ikisi de işlemleri başarısız gönderirseniz hello iki varlık hello rolleri değişmeden kalır ve bir hata döndürdü.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-179">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="cd0e8-180">Bir istemci, her iki sıralarından iletilerini alır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-180">A client receives messages from both queues.</span></span> <span data-ttu-id="cd0e8-181">Bir fırsat olduğundan bu hello alıcı aynı iletisi, hello hello iki kopyasını alır alıcı yinelenen iletileri bastırmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-181">Because there is a chance that hello receiver receives two copies of hello same message, hello receiver must suppress duplicate messages.</span></span> <span data-ttu-id="cd0e8-182">Gözardı edebileceğini aynı şekilde etkin çoğaltma için açıklandığı gibi hello çoğaltır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-182">You can suppress duplicates in hello same way as described for active replication.</span></span>

<span data-ttu-id="cd0e8-183">Genel olarak, çoğu durumda yalnızca bir işlem yapıldığından pasif çoğaltma etkin çoğaltma daha ekonomik.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-183">In general, passive replication is more economical than active replication because in most cases only one operation is performed.</span></span> <span data-ttu-id="cd0e8-184">Gecikme süresi, üretilen iş ve para maliyet aynı toohello çoğaltılmamış senaryosu verilebilir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-184">Latency, throughput, and monetary cost are identical toohello non-replicated scenario.</span></span>

<span data-ttu-id="cd0e8-185">Pasif çoğaltma kullanırken hello aşağıdaki senaryoları iletileri kaybolabilir veya iki kez alındı:</span><span class="sxs-lookup"><span data-stu-id="cd0e8-185">When using passive replication, in hello following scenarios messages can be lost or received twice:</span></span>

* <span data-ttu-id="cd0e8-186">**İleti gecikme veya kayıp**: hello gönderen bir ileti m1 toohello birincil sırası gönderildi ve ardından hello alıcı m1 almadan önce hello sıra kullanılamaz hale varsayılır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-186">**Message delay or loss**: Assume that hello sender successfully sent a message m1 toohello primary queue, and then hello queue becomes unavailable before hello receiver receives m1.</span></span> <span data-ttu-id="cd0e8-187">Merhaba gönderen bir sonraki ileti m2 toohello ikincil sırası gönderir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-187">hello sender sends a subsequent message m2 toohello secondary queue.</span></span> <span data-ttu-id="cd0e8-188">Merhaba birincil kuyruk geçici olarak devre dışı ise, hello sıra yeniden kullanılabilir hale geldikten sonra hello alıcı m1 alır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-188">If hello primary queue is temporarily unavailable, hello receiver receives m1 after hello queue becomes available again.</span></span> <span data-ttu-id="cd0e8-189">Bir olağanüstü durumda hello alıcı hiçbir zaman m1 alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-189">In case of a disaster, hello receiver may never receive m1.</span></span>
* <span data-ttu-id="cd0e8-190">**Alma yinelenen**: Bu hello gönderen bir ileti m toohello birincil sırası gönderir varsayalım.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-190">**Duplicate reception**: Assume that hello sender sends a message m toohello primary queue.</span></span> <span data-ttu-id="cd0e8-191">Hizmet veri yolu başarıyla m işler ancak toosend yanıt başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-191">Service Bus successfully processes m but fails toosend a response.</span></span> <span data-ttu-id="cd0e8-192">İşlem zaman aşımına Hello gönderdikten sonra hello gönderen m toohello ikincil sıra özdeş bir kopyasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-192">After hello send operation times out, hello sender sends an identical copy of m toohello secondary queue.</span></span> <span data-ttu-id="cd0e8-193">Merhaba alıcı mümkün tooreceive hello ilk kopyasını m ise Hello birincil kuyruk kullanılamaz hale önce hello alıcı yaklaşık hello m ve her iki kopyalarını alan aynı anda.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-193">If hello receiver is able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver receives both copies of m at approximately hello same time.</span></span> <span data-ttu-id="cd0e8-194">Merhaba birincil kuyruk kullanılamaz hale önce hello alıcı mümkün tooreceive hello ilk kopyasını m değilse, hello alıcı başlangıçta yalnızca hello ikinci bir kopyası m alır, ancak hello birincil kuyruk kullanılabilir hale geldiğinde m ikinci bir kopyasını alır.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-194">If hello receiver is not able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver initially receives only hello second copy of m, but then receives a second copy of m when hello primary queue becomes available.</span></span>

<span data-ttu-id="cd0e8-195">Merhaba [coğrafi çoğaltma ile Service Bus aracılı ileti] [ Geo-replication with Service Bus Brokered Messages] örnek Mesajlaşma, pasif çoğaltma gösterir.</span><span class="sxs-lookup"><span data-stu-id="cd0e8-195">hello [Geo-replication with Service Bus brokered messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates passive replication of messaging entities.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cd0e8-196">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="cd0e8-196">Next steps</span></span>
<span data-ttu-id="cd0e8-197">Olağanüstü durum kurtarma hakkında daha fazla toolearn bu makalelere bakın:</span><span class="sxs-lookup"><span data-stu-id="cd0e8-197">toolearn more about disaster recovery, see these articles:</span></span>

* <span data-ttu-id="cd0e8-198">[Azure SQL veritabanı iş sürekliliği][Azure SQL Database Business Continuity]</span><span class="sxs-lookup"><span data-stu-id="cd0e8-198">[Azure SQL Database Business Continuity][Azure SQL Database Business Continuity]</span></span>
* <span data-ttu-id="cd0e8-199">[Azure için esnek uygulamalar tasarlama][Azure resiliency technical guidance]</span><span class="sxs-lookup"><span data-stu-id="cd0e8-199">[Designing resilient applications for Azure][Azure resiliency technical guidance]</span></span>

[Service Bus Authentication]: service-bus-authentication-and-authorization.md
[Partitioned messaging entities]: service-bus-partitioning.md
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md#failure-of-service-bus-within-an-azure-datacenter
[Geo-replication with Service Bus Relayed Messages]: http://code.msdn.microsoft.com/Geo-replication-with-16dbfecd
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[BrokeredMessage.Label]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label
[Geo-replication with Service Bus Brokered Messages]: http://code.msdn.microsoft.com/Geo-replication-with-f5688664
[Azure SQL Database Business Continuity]: ../sql-database/sql-database-business-continuity.md
[Azure resiliency technical guidance]: /azure/architecture/resiliency
