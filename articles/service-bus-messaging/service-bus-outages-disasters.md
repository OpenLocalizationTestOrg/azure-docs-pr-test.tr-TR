---
title: "Azure Service Bus uygulama kesintiler ve olağanüstü karşı insulating | Microsoft Docs"
description: "Uygulamaların olası bir hizmet veri yolu kesinti karşı koruma için kullanabileceğiniz teknikleri açıklar."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: tysonn
ms.assetid: fd9fa8ab-f4c4-43f7-974f-c876df1614d4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/12/2017
ms.author: sethm
ms.openlocfilehash: bc84dbe5c26a834b2cff5f71ba5f541e94ba0b38
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="best-practices-for-insulating-applications-against-service-bus-outages-and-disasters"></a><span data-ttu-id="edc54-103">Hizmet veri yolu kesintileri ve olağanüstü karşı uygulamalar insulating için en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="edc54-103">Best practices for insulating applications against Service Bus outages and disasters</span></span>
<span data-ttu-id="edc54-104">Görev açısından kritik uygulamalar, Planlanmayan kesintiler veya olağanüstü varlığında olsa bile sürekli olarak çalışması gerekir.</span><span class="sxs-lookup"><span data-stu-id="edc54-104">Mission-critical applications must operate continuously, even in the presence of unplanned outages or disasters.</span></span> <span data-ttu-id="edc54-105">Bu konu, hizmet veri yolu uygulamaları potansiyel hizmet kesintisi veya olağanüstü durum karşı korumak için kullanabileceğiniz teknikleri açıklar.</span><span class="sxs-lookup"><span data-stu-id="edc54-105">This topic describes techniques you can use to protect Service Bus applications against a potential service outage or disaster.</span></span>

<span data-ttu-id="edc54-106">Bir kesinti geçici olarak kullanım dışı kalması Azure hizmet veri yolu tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-106">An outage is defined as the temporary unavailability of Azure Service Bus.</span></span> <span data-ttu-id="edc54-107">Kesinti Service Bus Mesajlaşma deposu veya hatta tüm veri merkezi gibi bazı bileşenleri etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-107">The outage can affect some components of Service Bus, such as a messaging store, or even the entire datacenter.</span></span> <span data-ttu-id="edc54-108">Sorun çözüldükten sonra hizmet veri yolu yeniden kullanılabilir hale gelir.</span><span class="sxs-lookup"><span data-stu-id="edc54-108">After the problem has been fixed, Service Bus becomes available again.</span></span> <span data-ttu-id="edc54-109">Genellikle, bir kesinti iletileri veya diğer veri kaybına neden olmaz.</span><span class="sxs-lookup"><span data-stu-id="edc54-109">Typically, an outage does not cause loss of messages or other data.</span></span> <span data-ttu-id="edc54-110">Belirli bir Mesajlaşma deposu kullanılamama bileşeni hatası örnektir.</span><span class="sxs-lookup"><span data-stu-id="edc54-110">An example of a component failure is the unavailability of a particular messaging store.</span></span> <span data-ttu-id="edc54-111">Bir güç kesintisi datacenter ya da hatalı veri merkezi ağ anahtarı, bir veri merkezi çapında kesinti örnektir.</span><span class="sxs-lookup"><span data-stu-id="edc54-111">An example of a datacenter-wide outage is a power failure of the datacenter, or a faulty datacenter network switch.</span></span> <span data-ttu-id="edc54-112">Bir kesinti birkaç dakika ile birkaç gün sürebilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-112">An outage can last from a few minutes to a few days.</span></span>

<span data-ttu-id="edc54-113">Bir olağanüstü durum kalıcı kaybı Service Bus ölçek birimi veya veri merkezi tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-113">A disaster is defined as the permanent loss of a Service Bus scale unit or datacenter.</span></span> <span data-ttu-id="edc54-114">Veri merkezi olabilir veya yeniden kullanılabilir duruma gelebilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-114">The datacenter may or may not become available again.</span></span> <span data-ttu-id="edc54-115">Genellikle bir olağanüstü durum bazı veya tüm iletileri veya diğer veri kaybına neden olur.</span><span class="sxs-lookup"><span data-stu-id="edc54-115">Typically a disaster causes loss of some or all messages or other data.</span></span> <span data-ttu-id="edc54-116">Yangın, taşmasını veya deprem afetler örnekleridir.</span><span class="sxs-lookup"><span data-stu-id="edc54-116">Examples of disasters are fire, flooding, or earthquake.</span></span>

## <a name="current-architecture"></a><span data-ttu-id="edc54-117">Geçerli mimari</span><span class="sxs-lookup"><span data-stu-id="edc54-117">Current architecture</span></span>
<span data-ttu-id="edc54-118">Service Bus kuyrukları veya konuları gönderilen iletileri depolamak için birden çok Mesajlaşma deposu kullanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-118">Service Bus uses multiple messaging stores to store messages that are sent to queues or topics.</span></span> <span data-ttu-id="edc54-119">Bölümlenmemiş kuyruk veya konu bir Mesajlaşma deposuna atanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-119">A non-partitioned queue or topic is assigned to one messaging store.</span></span> <span data-ttu-id="edc54-120">Bu ileti deposunu kullanılamıyorsa, kuyruk veya konu tüm işlemler başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="edc54-120">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span>

<span data-ttu-id="edc54-121">Bir veri merkezi ile bağlantılı bir hizmet ad alanındaki tüm Service Bus Mesajlaşma varlıkları (kuyruklar, konular, geçişler) bulunur.</span><span class="sxs-lookup"><span data-stu-id="edc54-121">All Service Bus messaging entities (queues, topics, relays) reside in a service namespace, which is affiliated with a datacenter.</span></span> <span data-ttu-id="edc54-122">Service Bus otomatik coğrafi çoğaltma veri etkinleştirmez veya birden çok veri merkezi span bir ad alanı izin vermez.</span><span class="sxs-lookup"><span data-stu-id="edc54-122">Service Bus does not enable automatic geo-replication of data, nor does it allow a namespace to span multiple datacenters.</span></span>

## <a name="protecting-against-acs-outages"></a><span data-ttu-id="edc54-123">ACS kesintilere karşı koruma</span><span class="sxs-lookup"><span data-stu-id="edc54-123">Protecting against ACS outages</span></span>
<span data-ttu-id="edc54-124">ACS kimlik bilgilerini kullandığını ve ACS kullanılamaz hale, istemciler artık belirteçleri alabilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-124">If you are using ACS credentials, and ACS becomes unavailable, clients can no longer obtain tokens.</span></span> <span data-ttu-id="edc54-125">ACS arıza zaman bir belirteç olan istemcileri belirteçleri süresi dolana kadar Service Bus kullanmaya devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-125">Clients that have a token at the time ACS goes down can continue to use Service Bus until the tokens expire.</span></span> <span data-ttu-id="edc54-126">Varsayılan belirteç ömrü 3 saattir.</span><span class="sxs-lookup"><span data-stu-id="edc54-126">The default token lifetime is 3 hours.</span></span>

<span data-ttu-id="edc54-127">ACS kesintilere karşı korumak için paylaşılan erişim imzası (SAS) belirteçleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="edc54-127">To protect against ACS outages, use Shared Access Signature (SAS) tokens.</span></span> <span data-ttu-id="edc54-128">Bu durumda, istemci gizli bir anahtar ile bir kendi kendine minted belirteç imzalama tarafından doğrudan Service Bus ile kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="edc54-128">In this case, the client authenticates directly with Service Bus by signing a self-minted token with a secret key.</span></span> <span data-ttu-id="edc54-129">ACS çağrıları artık gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="edc54-129">Calls to ACS are no longer required.</span></span> <span data-ttu-id="edc54-130">SAS belirteci hakkında daha fazla bilgi için bkz: [Service Bus kimlik doğrulama][Service Bus authentication].</span><span class="sxs-lookup"><span data-stu-id="edc54-130">For more information about SAS tokens, see [Service Bus authentication][Service Bus authentication].</span></span>

## <a name="protecting-queues-and-topics-against-messaging-store-failures"></a><span data-ttu-id="edc54-131">Kuyruklar ve konu başlıkları deposu başarısızlıkları Mesajlaşma karşı koruma</span><span class="sxs-lookup"><span data-stu-id="edc54-131">Protecting queues and topics against messaging store failures</span></span>
<span data-ttu-id="edc54-132">Bölümlenmemiş kuyruk veya konu bir Mesajlaşma deposuna atanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-132">A non-partitioned queue or topic is assigned to one messaging store.</span></span> <span data-ttu-id="edc54-133">Bu ileti deposunu kullanılamıyorsa, kuyruk veya konu tüm işlemler başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="edc54-133">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span> <span data-ttu-id="edc54-134">Bölümlenmiş bir sıra diğer taraftan, birden çok parçalarını oluşur.</span><span class="sxs-lookup"><span data-stu-id="edc54-134">A partitioned queue, on the other hand, consists of multiple fragments.</span></span> <span data-ttu-id="edc54-135">Her parça farklı bir Mesajlaşma deposunda depolanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-135">Each fragment is stored in a different messaging store.</span></span> <span data-ttu-id="edc54-136">Bölümlenmiş kuyruk veya konu için bir ileti gönderildiğinde, hizmet veri yolu ileti parçasının birine atar.</span><span class="sxs-lookup"><span data-stu-id="edc54-136">When a message is sent to a partitioned queue or topic, Service Bus assigns the message to one of the fragments.</span></span> <span data-ttu-id="edc54-137">Hizmet veri yolu ileti için farklı bir parçası, karşılık gelen ileti deposu kullanılamıyorsa, mümkünse yazar.</span><span class="sxs-lookup"><span data-stu-id="edc54-137">If the corresponding messaging store is unavailable, Service Bus writes the message to a different fragment, if possible.</span></span> <span data-ttu-id="edc54-138">Bölümlenen varlıklar hakkında daha fazla bilgi için bkz: [bölümlenmiş Mesajlaşma varlıkları][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="edc54-138">For more information about partitioned entities, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

## <a name="protecting-against-datacenter-outages-or-disasters"></a><span data-ttu-id="edc54-139">Veri Merkezi kesintilerini veya olağanüstü karşı koruma</span><span class="sxs-lookup"><span data-stu-id="edc54-139">Protecting against datacenter outages or disasters</span></span>
<span data-ttu-id="edc54-140">İki veri merkezi arasında bir yük devretme için izin vermek için her veri merkezinde bir Service Bus hizmeti ad alanı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-140">To allow for a failover between two datacenters, you can create a Service Bus service namespace in each datacenter.</span></span> <span data-ttu-id="edc54-141">Örneğin, Service Bus hizmeti ad alanı **contosoPrimary.servicebus.windows.net** Amerika Birleşik Devletleri Kuzey/Orta bölgesinde bulunan ve **contosoSecondary.servicebus.windows.net** BİZE Güney/Orta bölgesinde bulunan.</span><span class="sxs-lookup"><span data-stu-id="edc54-141">For example, the Service Bus service namespace **contosoPrimary.servicebus.windows.net** might be located in the United States North/Central region, and **contosoSecondary.servicebus.windows.net** might be located in the US South/Central region.</span></span> <span data-ttu-id="edc54-142">Service Bus varlık Mesajlaşma bir veri merkezi kesintisinden varlığında erişilebilir kalması gereken, varlığın her iki ad alanları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-142">If a Service Bus messaging entity must remain accessible in the presence of a datacenter outage, you can create that entity in both namespaces.</span></span>

<span data-ttu-id="edc54-143">Daha fazla bilgi için "Service Bus Azure veri merkezi içinde hatası" bölümüne bakın [zaman uyumsuz desenleri ve yüksek kullanılabilirlik Mesajlaşma][Asynchronous messaging patterns and high availability].</span><span class="sxs-lookup"><span data-stu-id="edc54-143">For more information, see the "Failure of Service Bus within an Azure datacenter" section in [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability].</span></span>

## <a name="protecting-relay-endpoints-against-datacenter-outages-or-disasters"></a><span data-ttu-id="edc54-144">Veri Merkezi kesintilerini veya olağanüstü karşı koruma geçiş uç noktaları</span><span class="sxs-lookup"><span data-stu-id="edc54-144">Protecting relay endpoints against datacenter outages or disasters</span></span>
<span data-ttu-id="edc54-145">Coğrafi çoğaltma geçiş uç noktaları varlığında Service Bus kesintileri erişilebilir olması için bir geçiş uç noktası kullanıma sunan bir hizmet sağlar.</span><span class="sxs-lookup"><span data-stu-id="edc54-145">Geo-replication of relay endpoints allows a service that exposes a relay endpoint to be reachable in the presence of Service Bus outages.</span></span> <span data-ttu-id="edc54-146">Coğrafi çoğaltma elde etmek için hizmet, farklı ad alanlarında iki geçiş uç noktalar oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="edc54-146">To achieve geo-replication, the service must create two relay endpoints in different namespaces.</span></span> <span data-ttu-id="edc54-147">Ad alanları farklı veri merkezlerinde bulunmalıdır ve iki uç nokta adları farklı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="edc54-147">The namespaces must reside in different datacenters and the two endpoints must have different names.</span></span> <span data-ttu-id="edc54-148">Örneğin, birincil bir uç nokta altında ulaşılabilen **contosoPrimary.servicebus.windows.net/myPrimaryService**altında ikincil kendisine karşılık gelen ulaşılabilen yaparken **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span><span class="sxs-lookup"><span data-stu-id="edc54-148">For example, a primary endpoint can be reached under **contosoPrimary.servicebus.windows.net/myPrimaryService**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span></span>

<span data-ttu-id="edc54-149">Hizmet ardından her iki bitiş noktasında dinler ve bir istemci hizmeti ya da uç nokta ile çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-149">The service then listens on both endpoints, and a client can invoke the service via either endpoint.</span></span> <span data-ttu-id="edc54-150">Bir istemci uygulaması rastgele geçişler birini birincil uç noktası olarak seçer ve isteğini etkin uç noktasına gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-150">A client application randomly picks one of the relays as the primary endpoint, and sends its request to the active endpoint.</span></span> <span data-ttu-id="edc54-151">İşlem hata kodu ile başarısız olursa geçiş uç noktası kullanılamıyor bu hatayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="edc54-151">If the operation fails with an error code, this failure indicates that the relay endpoint is not available.</span></span> <span data-ttu-id="edc54-152">Uygulama yedekleme uç noktası için bir kanal açar ve isteği yeniden yayımlar.</span><span class="sxs-lookup"><span data-stu-id="edc54-152">The application opens a channel to the backup endpoint and reissues the request.</span></span> <span data-ttu-id="edc54-153">Bu noktada rolleri etkin ve yedekleme uç noktaları geçiş: istemci uygulamasının yeni yedekleme uç noktası ve yeni etkin uç noktası için eski yedekleme uç noktası için eski etkin uç noktası olarak değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="edc54-153">At that point the active and the backup endpoints switch roles: the client application considers the old active endpoint to be the new backup endpoint, and the old backup endpoint to be the new active endpoint.</span></span> <span data-ttu-id="edc54-154">Her ikisi de işlemleri başarısız gönderirseniz, iki varlık rolleri değişmeden kalır ve bir hata döndürdü.</span><span class="sxs-lookup"><span data-stu-id="edc54-154">If both send operations fail, the roles of the two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="edc54-155">[Coğrafi çoğaltma ile Service Bus geçişli iletileri] [ Geo-replication with Service Bus relayed Messages] örnek geçişler çoğaltmak nasıl gösterir.</span><span class="sxs-lookup"><span data-stu-id="edc54-155">The [Geo-replication with Service Bus relayed messages][Geo-replication with Service Bus relayed Messages] sample demonstrates how to replicate relays.</span></span>

## <a name="protecting-queues-and-topics-against-datacenter-outages-or-disasters"></a><span data-ttu-id="edc54-156">Kuyruklar ve konu başlıkları datacenter kesintileri ya da olağanüstü karşı koruma</span><span class="sxs-lookup"><span data-stu-id="edc54-156">Protecting queues and topics against datacenter outages or disasters</span></span>
<span data-ttu-id="edc54-157">Hizmet veri yolu kullanarak aracılı Mesajlaşma, veri merkezi kesintilere karşı esnekliği elde etmek için iki yaklaşım destekler: *etkin* ve *pasif* çoğaltma.</span><span class="sxs-lookup"><span data-stu-id="edc54-157">To achieve resilience against datacenter outages when using brokered messaging, Service Bus supports two approaches: *active* and *passive* replication.</span></span> <span data-ttu-id="edc54-158">Belirtilen kuyruk veya konu veri merkezi kesintisinden varlığında erişilebilir kalması gereken varsa her bir yaklaşım, her iki ad alanları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-158">For each approach, if a given queue or topic must remain accessible in the presence of a datacenter outage, you can create it in both namespaces.</span></span> <span data-ttu-id="edc54-159">Her iki varlık aynı ada sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-159">Both entities can have the same name.</span></span> <span data-ttu-id="edc54-160">Örneğin, birincil bir kuyruk altında ulaşılabilen **contosoPrimary.servicebus.windows.net/myQueue**altında ikincil kendisine karşılık gelen ulaşılabilen yaparken **contosoSecondary.servicebus.windows.net/myQueue**.</span><span class="sxs-lookup"><span data-stu-id="edc54-160">For example, a primary queue can be reached under **contosoPrimary.servicebus.windows.net/myQueue**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/myQueue**.</span></span>

<span data-ttu-id="edc54-161">Uygulama kalıcı gönderenin alıcı iletişim gerektirmiyorsa, uygulama ileti kaybını önlemek için ve geçici hizmet veri yolu hataları gönderenden korunamadı dayanıklı bir istemci-tarafı sıra uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-161">If the application does not require permanent sender-to-receiver communication, the application can implement a durable client-side queue to prevent message loss and to shield the sender from any transient Service Bus errors.</span></span>

## <a name="active-replication"></a><span data-ttu-id="edc54-162">Etkin çoğaltma</span><span class="sxs-lookup"><span data-stu-id="edc54-162">Active replication</span></span>
<span data-ttu-id="edc54-163">Etkin çoğaltma varlıklar her işlem için her iki ad kullanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-163">Active replication uses entities in both namespaces for every operation.</span></span> <span data-ttu-id="edc54-164">Bir ileti gönderen herhangi bir istemci aynı ileti iki kopyasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-164">Any client that sends a message sends two copies of the same message.</span></span> <span data-ttu-id="edc54-165">İlk kopyayı birincil varlığa gönderilen (örneğin, **contosoPrimary.servicebus.windows.net/sales**), ve iletiyi ikinci bir kopyası ikincil varlığa gönderilen (örneğin, **contosoSecondary.servicebus.windows.net/sales**).</span><span class="sxs-lookup"><span data-stu-id="edc54-165">The first copy is sent to the primary entity (for example, **contosoPrimary.servicebus.windows.net/sales**), and the second copy of the message is sent to the secondary entity (for example, **contosoSecondary.servicebus.windows.net/sales**).</span></span>

<span data-ttu-id="edc54-166">Bir istemci, her iki sıralarından iletilerini alır.</span><span class="sxs-lookup"><span data-stu-id="edc54-166">A client receives messages from both queues.</span></span> <span data-ttu-id="edc54-167">İletinin ilk kopyasını alıcı işler ve ikinci kopya engellenir.</span><span class="sxs-lookup"><span data-stu-id="edc54-167">The receiver processes the first copy of a message, and the second copy is suppressed.</span></span> <span data-ttu-id="edc54-168">Yinelenen iletileri bastırmak için gönderen her iletinin benzersiz bir tanımlayıcı etiketlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="edc54-168">To suppress duplicate messages, the sender must tag each message with a unique identifier.</span></span> <span data-ttu-id="edc54-169">İletinin her iki kopyası aynı tanımlayıcıyla etiketlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="edc54-169">Both copies of the message must be tagged with the same identifier.</span></span> <span data-ttu-id="edc54-170">Kullanabileceğiniz [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] veya [BrokeredMessage.Label] [ BrokeredMessage.Label] özellikleri ya da ileti etiketlemek için özel bir özellik.</span><span class="sxs-lookup"><span data-stu-id="edc54-170">You can use the [BrokeredMessage.MessageId][BrokeredMessage.MessageId] or [BrokeredMessage.Label][BrokeredMessage.Label] properties, or a custom property to tag the message.</span></span> <span data-ttu-id="edc54-171">Alıcı zaten aldığı iletileri listesini bulundurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="edc54-171">The receiver must maintain a list of messages that it has already received.</span></span>

<span data-ttu-id="edc54-172">[Service Bus aracılı iletiler coğrafi çoğaltma] [ Geo-replication with Service Bus Brokered Messages] örnek Mesajlaşma, etkin çoğaltma gösterir.</span><span class="sxs-lookup"><span data-stu-id="edc54-172">The [Geo-replication with Service Bus Brokered Messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates active replication of messaging entities.</span></span>

> [!NOTE]
> <span data-ttu-id="edc54-173">Etkin çoğaltma yaklaşım işlemlerinin sayısı iki katına çıkarır, bu nedenle, bu yaklaşım için daha yüksek maliyet yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="edc54-173">The active replication approach doubles the number of operations, therefore this approach can lead to higher cost.</span></span>
> 
> 

## <a name="passive-replication"></a><span data-ttu-id="edc54-174">Pasif çoğaltma</span><span class="sxs-lookup"><span data-stu-id="edc54-174">Passive replication</span></span>
<span data-ttu-id="edc54-175">Hataya serbest durumda pasif çoğaltma iki Mesajlaşma varlıkları yalnızca birini kullanır.</span><span class="sxs-lookup"><span data-stu-id="edc54-175">In the fault-free case, passive replication uses only one of the two messaging entities.</span></span> <span data-ttu-id="edc54-176">Bir istemcinin etkin varlığa iletisi gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-176">A client sends the message to the active entity.</span></span> <span data-ttu-id="edc54-177">Etkin varlık üzerinde işlem etkin varlık barındıran veri merkezinde kullanılamayabilir belirten bir hata kodu ile başarısız olursa, istemci yedekleme varlığa iletinin bir kopyasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-177">If the operation on the active entity fails with an error code that indicates the datacenter that hosts the active entity might be unavailable, the client sends a copy of the message to the backup entity.</span></span> <span data-ttu-id="edc54-178">Bu noktada etkin ve yedekleme varlıkları rollerini değiştirmek: Yeni yedekleme varlığı olarak eski active varlık gönderen istemci göz önünde bulundurur ve eski yedekleme varlık yeni etkin varlıktır.</span><span class="sxs-lookup"><span data-stu-id="edc54-178">At that point the active and the backup entities switch roles: the sending client considers the old active entity to be the new backup entity, and the old backup entity is the new active entity.</span></span> <span data-ttu-id="edc54-179">Her ikisi de işlemleri başarısız gönderirseniz, iki varlık rolleri değişmeden kalır ve bir hata döndürdü.</span><span class="sxs-lookup"><span data-stu-id="edc54-179">If both send operations fail, the roles of the two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="edc54-180">Bir istemci, her iki sıralarından iletilerini alır.</span><span class="sxs-lookup"><span data-stu-id="edc54-180">A client receives messages from both queues.</span></span> <span data-ttu-id="edc54-181">Alıcı aynı ileti iki kopyasını alır şansı olduğundan, alıcı yinelenen iletilerini gerekir.</span><span class="sxs-lookup"><span data-stu-id="edc54-181">Because there is a chance that the receiver receives two copies of the same message, the receiver must suppress duplicate messages.</span></span> <span data-ttu-id="edc54-182">Etkin çoğaltma için açıklandığı gibi aynı şekilde çoğaltmaları gizleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-182">You can suppress duplicates in the same way as described for active replication.</span></span>

<span data-ttu-id="edc54-183">Genel olarak, çoğu durumda yalnızca bir işlem yapıldığından pasif çoğaltma etkin çoğaltma daha ekonomik.</span><span class="sxs-lookup"><span data-stu-id="edc54-183">In general, passive replication is more economical than active replication because in most cases only one operation is performed.</span></span> <span data-ttu-id="edc54-184">Gecikme süresi, üretilen iş ve parasal maliyeti çoğaltılmamış senaryo ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="edc54-184">Latency, throughput, and monetary cost are identical to the non-replicated scenario.</span></span>

<span data-ttu-id="edc54-185">Pasif çoğaltma kullanırken, aşağıdaki senaryolarda iletileri kaybolabilir veya iki kez alındı:</span><span class="sxs-lookup"><span data-stu-id="edc54-185">When using passive replication, in the following scenarios messages can be lost or received twice:</span></span>

* <span data-ttu-id="edc54-186">**İleti gecikme veya kayıp**: Gönderenin iletiyi m1 birincil kuyruğuna başarıyla gönderildi. ve ardından alıcı m1 almadan önce sıranın kullanılamaz hale varsayılır.</span><span class="sxs-lookup"><span data-stu-id="edc54-186">**Message delay or loss**: Assume that the sender successfully sent a message m1 to the primary queue, and then the queue becomes unavailable before the receiver receives m1.</span></span> <span data-ttu-id="edc54-187">Gönderici bir sonraki iletiyi m2 ikincil kuyruğuna gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-187">The sender sends a subsequent message m2 to the secondary queue.</span></span> <span data-ttu-id="edc54-188">Birincil kuyruk geçici olarak devre dışı ise, sıranın yeniden kullanılabilir hale geldikten sonra alıcı m1 alır.</span><span class="sxs-lookup"><span data-stu-id="edc54-188">If the primary queue is temporarily unavailable, the receiver receives m1 after the queue becomes available again.</span></span> <span data-ttu-id="edc54-189">Bir olağanüstü durumda alıcı hiçbir zaman m1 alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="edc54-189">In case of a disaster, the receiver may never receive m1.</span></span>
* <span data-ttu-id="edc54-190">**Alma yinelenen**: gönderenin birincil kuyruğuna ileti m gönderir varsayalım.</span><span class="sxs-lookup"><span data-stu-id="edc54-190">**Duplicate reception**: Assume that the sender sends a message m to the primary queue.</span></span> <span data-ttu-id="edc54-191">Hizmet veri yolu başarıyla m işler ancak yanıt gönderme başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="edc54-191">Service Bus successfully processes m but fails to send a response.</span></span> <span data-ttu-id="edc54-192">Gönderme işlemi zaman aşımına sonra gönderen ikincil kuyruğuna m özdeş bir kopyasını gönderir.</span><span class="sxs-lookup"><span data-stu-id="edc54-192">After the send operation times out, the sender sends an identical copy of m to the secondary queue.</span></span> <span data-ttu-id="edc54-193">Alıcı birincil kuyruk kullanılamaz hale önce m ilk kopyasına almak mümkün ise, alıcı yaklaşık aynı zamanda m iki kopyasını alır.</span><span class="sxs-lookup"><span data-stu-id="edc54-193">If the receiver is able to receive the first copy of m before the primary queue becomes unavailable, the receiver receives both copies of m at approximately the same time.</span></span> <span data-ttu-id="edc54-194">Alıcı birincil kuyruk kullanılamaz hale önce m ilk kopyasına almak mümkün değilse, alıcı başlangıçta yalnızca ikinci bir kopyası m alır, ancak birincil kuyruk kullanılabilir hale geldiğinde m ikinci bir kopyasını alır.</span><span class="sxs-lookup"><span data-stu-id="edc54-194">If the receiver is not able to receive the first copy of m before the primary queue becomes unavailable, the receiver initially receives only the second copy of m, but then receives a second copy of m when the primary queue becomes available.</span></span>

<span data-ttu-id="edc54-195">[Coğrafi çoğaltma ile Service Bus aracılı ileti] [ Geo-replication with Service Bus Brokered Messages] örnek Mesajlaşma, pasif çoğaltma gösterir.</span><span class="sxs-lookup"><span data-stu-id="edc54-195">The [Geo-replication with Service Bus brokered messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates passive replication of messaging entities.</span></span>

## <a name="next-steps"></a><span data-ttu-id="edc54-196">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="edc54-196">Next steps</span></span>
<span data-ttu-id="edc54-197">Olağanüstü durum kurtarma hakkında daha fazla bilgi için aşağıdaki makalelere bakın:</span><span class="sxs-lookup"><span data-stu-id="edc54-197">To learn more about disaster recovery, see these articles:</span></span>

* <span data-ttu-id="edc54-198">[Azure SQL veritabanı iş sürekliliği][Azure SQL Database Business Continuity]</span><span class="sxs-lookup"><span data-stu-id="edc54-198">[Azure SQL Database Business Continuity][Azure SQL Database Business Continuity]</span></span>
* <span data-ttu-id="edc54-199">[Azure için esnek uygulamalar tasarlama][Azure resiliency technical guidance]</span><span class="sxs-lookup"><span data-stu-id="edc54-199">[Designing resilient applications for Azure][Azure resiliency technical guidance]</span></span>

[Service Bus Authentication]: service-bus-authentication-and-authorization.md
[Partitioned messaging entities]: service-bus-partitioning.md
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md#failure-of-service-bus-within-an-azure-datacenter
[Geo-replication with Service Bus Relayed Messages]: http://code.msdn.microsoft.com/Geo-replication-with-16dbfecd
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[BrokeredMessage.Label]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label
[Geo-replication with Service Bus Brokered Messages]: http://code.msdn.microsoft.com/Geo-replication-with-f5688664
[Azure SQL Database Business Continuity]: ../sql-database/sql-database-business-continuity.md
[Azure resiliency technical guidance]: /azure/architecture/resiliency
