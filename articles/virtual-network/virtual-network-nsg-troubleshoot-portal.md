---
title: "aaaTroubleshoot ağ güvenlik grupları - portalı | Microsoft Docs"
description: "Nasıl tootroubleshoot ağ güvenlik grupları'hello Azure Resource Manager dağıtımında hello Azure Portal kullanarak model öğrenin."
services: virtual-network
documentationcenter: na
author: AnithaAdusumilli
manager: narayan
editor: 
tags: azure-resource-manager
ms.assetid: a54feccf-0123-4e49-a743-eb8d0bdd1ebc
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/23/2016
ms.author: anithaa
ms.openlocfilehash: 0d3d2110fe1507f36e3b933de924a0876db2747a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-network-security-groups-using-hello-azure-portal"></a><span data-ttu-id="a9263-103">Ağ güvenlik grupları hello Azure Portal kullanarak sorun giderme</span><span class="sxs-lookup"><span data-stu-id="a9263-103">Troubleshoot Network Security Groups using hello Azure Portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="a9263-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="a9263-104">Azure Portal</span></span>](virtual-network-nsg-troubleshoot-portal.md)
> * [<span data-ttu-id="a9263-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a9263-105">PowerShell</span></span>](virtual-network-nsg-troubleshoot-powershell.md)
> 
> 

<span data-ttu-id="a9263-106">Ağ güvenlik grupları (Nsg'ler), sanal makine (VM) üzerinde yapılandırılmış ve VM bağlantı sorunları yaşıyorsanız, bu makalede Nsg'ler toohelp daha fazla sorun giderme için tanılama özelliklerine genel bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9263-106">If you configured Network Security Groups (NSGs) on your virtual machine (VM) and are experiencing VM connectivity issues, this article provides an overview of diagnostics capabilities for NSGs toohelp troubleshoot further.</span></span>

<span data-ttu-id="a9263-107">Nsg'ler toocontrol hello trafik türlerini ve sanal makineleri (VM'ler) dışındaki akan sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9263-107">NSGs enable you toocontrol hello types of traffic that flow in and out of your virtual machines (VMs).</span></span> <span data-ttu-id="a9263-108">Nsg'ler uygulanan toosubnets bir Azure sanal ağı (VNet), ağ arabirimleri (NIC) veya her ikisi de olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-108">NSGs can be applied toosubnets in an Azure Virtual Network (VNet), network interfaces (NIC), or both.</span></span> <span data-ttu-id="a9263-109">bir toplama bağlı hello uygulanan Nsg'ler tooa NIC ve hello alt ağda bulunan hello kuralların Hello uygulanacak etkili kurallar tooa NIC var.</span><span class="sxs-lookup"><span data-stu-id="a9263-109">hello effective rules applied tooa NIC are an aggregation of hello rules that exist in hello NSGs applied tooa NIC and hello subnet it is connected to.</span></span> <span data-ttu-id="a9263-110">Bu Nsg'ler arasında kuralları bazen birbiriyle çelişen ve bir sanal makinenin ağ bağlantısını etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-110">Rules across these NSGs can sometimes conflict with each other and impact a VM's network connectivity.</span></span>  

<span data-ttu-id="a9263-111">VM Nıc'lerde uygulanan olarak Nsg'lerinizi tüm hello etkin güvenlik kuralları görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-111">You can view all hello effective security rules from your NSGs, as applied on your VM's NICs.</span></span> <span data-ttu-id="a9263-112">Bu makalede Azure Resource Manager dağıtım modeli bu kuralları kullanmak tootroubleshoot VM bağlantı sorunları nasıl hello gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a9263-112">This article shows how tootroubleshoot VM connectivity issues using these rules in hello Azure Resource Manager deployment model.</span></span> <span data-ttu-id="a9263-113">VNet ve NSG kavramlarına alışık değilseniz, hello okuma [sanal ağ](virtual-networks-overview.md) ve [ağ güvenlik grupları](virtual-networks-nsg.md) genel bakış makaleleri.</span><span class="sxs-lookup"><span data-stu-id="a9263-113">If you're not familiar with VNet and NSG concepts, read hello [Virtual network](virtual-networks-overview.md) and [Network security groups](virtual-networks-nsg.md) overview articles.</span></span>

## <a name="using-effective-security-rules-tootroubleshoot-vm-traffic-flow"></a><span data-ttu-id="a9263-114">Etkin güvenlik kuralları tootroubleshoot VM trafik akışı kullanma</span><span class="sxs-lookup"><span data-stu-id="a9263-114">Using Effective Security Rules tootroubleshoot VM traffic flow</span></span>
<span data-ttu-id="a9263-115">izleyen hello senaryo, ortak bir bağlantı sorunu örneğidir:</span><span class="sxs-lookup"><span data-stu-id="a9263-115">hello scenario that follows is an example of a common connection problem:</span></span>

<span data-ttu-id="a9263-116">Adlı bir VM'den *VM1* adlı bir alt ağın parçası olan *Subnet1* adlı bir sanal ağ içindeki *WestUS VNet1*.</span><span class="sxs-lookup"><span data-stu-id="a9263-116">A VM named *VM1* is part of a subnet named *Subnet1* within a VNet named *WestUS-VNet1*.</span></span> <span data-ttu-id="a9263-117">Bir deneme tooconnect toohello 3389 numaralı TCP bağlantı noktası üzerinden RDP kullanarak VM başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a9263-117">An attempt tooconnect toohello VM using RDP over TCP port 3389 fails.</span></span> <span data-ttu-id="a9263-118">Nsg'ler NIC hem hello uygulanan *VM1 nıc1* ve alt ağ hello *Subnet1*.</span><span class="sxs-lookup"><span data-stu-id="a9263-118">NSGs are applied at both hello NIC *VM1-NIC1* and hello subnet *Subnet1*.</span></span> <span data-ttu-id="a9263-119">Trafik tooTCP 3389 numaralı bağlantı noktasını hello hello ağ arabirimiyle ilişkilendirilmiş NSG izin verilen *VM1 nıc1*, TCP ping ancak tooVM1'ın bağlantı noktası 3389 başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a9263-119">Traffic tooTCP port 3389 is allowed in hello NSG associated with hello network interface *VM1-NIC1*, however TCP ping tooVM1's port 3389 fails.</span></span>

<span data-ttu-id="a9263-120">Bu örnek 3389 numaralı TCP bağlantı noktasını kullanır, ancak adımları hello kullanılan toodetermine herhangi bir bağlantı noktası gelen ve giden bağlantı hataları olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-120">While this example uses TCP port 3389, hello following steps can be used toodetermine inbound and outbound connection failures over any port.</span></span>

### <span data-ttu-id="a9263-121"><a name="vm"></a>Bir sanal makine için etkili güvenlik kurallarını görüntüle</span><span class="sxs-lookup"><span data-stu-id="a9263-121"><a name="vm"></a>View effective security rules for a virtual machine</span></span>
<span data-ttu-id="a9263-122">Bir VM için adımları tootroubleshoot Nsg'ler aşağıdaki hello tamamlayın:</span><span class="sxs-lookup"><span data-stu-id="a9263-122">Complete hello following steps tootroubleshoot NSGs for a VM:</span></span>

<span data-ttu-id="a9263-123">Bir NIC'den hello VM kendisini hello etkin güvenlik kuralları tam listesini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-123">You can view full list of hello effective security rules on a NIC, from hello VM itself.</span></span> <span data-ttu-id="a9263-124">Ayrıca eklemek, değiştirmek ve bu işlemler izinleri tooperform varsa NIC ve alt ağ NSG kuralları hello etkili kuralları dikey penceresinden silin.</span><span class="sxs-lookup"><span data-stu-id="a9263-124">You can also add, modify, and delete both NIC and subnet NSG rules from hello effective rules blade, if you have permissions tooperform these operations.</span></span>

1. <span data-ttu-id="a9263-125">Oturum açma toohello https://portal.azure.com Azure portalında.</span><span class="sxs-lookup"><span data-stu-id="a9263-125">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="a9263-126">Tıklatın **daha fazla hizmet**, ardından **sanal makineleri** hello listesinde görünür.</span><span class="sxs-lookup"><span data-stu-id="a9263-126">Click **More services**, then click **Virtual machines** in hello list that appears.</span></span>
3. <span data-ttu-id="a9263-127">VM tootroubleshoot görüntülenen hello listesinden seçin ve seçeneklerle bir VM dikey penceresi görünür.</span><span class="sxs-lookup"><span data-stu-id="a9263-127">Select a VM tootroubleshoot from hello list that appears and a VM blade with options appears.</span></span>
4. <span data-ttu-id="a9263-128">Tıklatın **Tanıla & sorunları** ve ortak bir sorun seçin.</span><span class="sxs-lookup"><span data-stu-id="a9263-128">Click **Diagnose & solve problems** and then select a common problem.</span></span> <span data-ttu-id="a9263-129">Bu örnek için **toomy Windows VM bağlantı kurulamıyor** seçilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-129">For this example, **I can’t connect toomy Windows VM** is selected.</span></span> 
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image1.png)
5. <span data-ttu-id="a9263-130">Adımları hello sorun altında hello resim aşağıdaki gösterildiği gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="a9263-130">Steps appear under hello problem, as shown in hello following picture:</span></span> 
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image2.png)
   
    <span data-ttu-id="a9263-131">Tıklatın *etkin güvenlik grubu kuralları* önerilen adımları hello listesinde.</span><span class="sxs-lookup"><span data-stu-id="a9263-131">Click *effective security group rules* in hello list of recommended steps.</span></span>
6. <span data-ttu-id="a9263-132">Merhaba **alma etkin güvenlik kuralları** hello resim aşağıdaki gösterildiği gibi dikey penceresi görünür:</span><span class="sxs-lookup"><span data-stu-id="a9263-132">hello **Get effective security rules** blade appears, as shown in hello following picture:</span></span>
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image3.png)
   
    <span data-ttu-id="a9263-133">Merhaba resim bölümlerini aşağıdaki hello dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="a9263-133">Notice hello following sections of hello picture:</span></span>
   
   * <span data-ttu-id="a9263-134">**Kapsam:** çok ayarlamak*VM1*, 3. adımda seçtiğiniz VM hello.</span><span class="sxs-lookup"><span data-stu-id="a9263-134">**Scope:** Set too*VM1*, hello VM selected in step 3.</span></span>
   * <span data-ttu-id="a9263-135">**Ağ arabirimi:** *VM1 nıc1* seçilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-135">**Network interface:** *VM1-NIC1* is selected.</span></span> <span data-ttu-id="a9263-136">Bir VM birden çok ağ arabirimine (NIC) sahip.</span><span class="sxs-lookup"><span data-stu-id="a9263-136">A VM can have multiple network interfaces (NIC).</span></span> <span data-ttu-id="a9263-137">Her NIC'nin benzersiz etkin güvenlik kuralları olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-137">Each NIC can have unique effective security rules.</span></span> <span data-ttu-id="a9263-138">Sorunlarını giderirken, her bir NIC tooview hello etkin güvenlik kuralları gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-138">When troubleshooting, you may need tooview hello effective security rules for each NIC.</span></span>
   * <span data-ttu-id="a9263-139">**İlişkili Nsg'ler:** Nsg'ler NIC bağlı uygulanan tooboth hello NIC ve hello alt hello olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-139">**Associated NSGs:** NSGs can be applied tooboth hello NIC and hello subnet hello NIC is connected to.</span></span> <span data-ttu-id="a9263-140">Merhaba resimde, bir NSG bağlı uygulanan tooboth hello NIC ve hello alt olmuştur.</span><span class="sxs-lookup"><span data-stu-id="a9263-140">In hello picture, an NSG has been applied tooboth hello NIC and hello subnet it's connected to.</span></span> <span data-ttu-id="a9263-141">Tıklayabilirsiniz hello NSG adları toodirectly hello Nsg'ler kurallarında değiştirin.</span><span class="sxs-lookup"><span data-stu-id="a9263-141">You can click on hello NSG names toodirectly modify rules in hello NSGs.</span></span>
   * <span data-ttu-id="a9263-142">**VM1 nsg sekmesi:** hello hello resimde görüntülenen kuralları listesidir hello NSG toohello NIC uygulanan için</span><span class="sxs-lookup"><span data-stu-id="a9263-142">**VM1-nsg tab:** hello list of rules displayed in hello picture is for hello NSG applied toohello NIC.</span></span> <span data-ttu-id="a9263-143">Her bir NSG oluşturulduğunda birkaç varsayılan kuralları Azure tarafından oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a9263-143">Several default rules are created by Azure whenever an NSG is created.</span></span> <span data-ttu-id="a9263-144">Merhaba varsayılan kuralları kaldırılamıyor, ancak daha yüksek öncelik kuralları ile geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-144">You can't remove hello default rules, but you can override them with rules of higher priority.</span></span> <span data-ttu-id="a9263-145">Merhaba okuma varsayılan kuralları hakkında daha fazla toolearn [NSG genel bakış](virtual-networks-nsg.md#default-rules) makalesi.</span><span class="sxs-lookup"><span data-stu-id="a9263-145">toolearn more about default rules, read hello [NSG overview](virtual-networks-nsg.md#default-rules) article.</span></span>
   * <span data-ttu-id="a9263-146">**HEDEF sütun:** başkalarının adres öneklerini bulunurken hello kuralları bazıları metin hello sütununda vardır.</span><span class="sxs-lookup"><span data-stu-id="a9263-146">**DESTINATION column:** Some of hello rules have text in hello column, while others have address prefixes.</span></span> <span data-ttu-id="a9263-147">oluşturulduğunda hello metin hello varsayılan uygulanan etiketleri toohello güvenlik kuralı adıdır.</span><span class="sxs-lookup"><span data-stu-id="a9263-147">hello text is hello name of default tags applied toohello security rule when it was created.</span></span> <span data-ttu-id="a9263-148">Başlangıç etiketleri birden çok önekleri temsil eden sistem tarafından sağlanan tanımlayıcılardır.</span><span class="sxs-lookup"><span data-stu-id="a9263-148">hello tags are system-provided identifiers that represent multiple prefixes.</span></span> <span data-ttu-id="a9263-149">Bir etiketi olan bir kural gibi seçerek *AllowInternetOutBound*, hello hello öneklerini listeler **adres önekleri** dikey.</span><span class="sxs-lookup"><span data-stu-id="a9263-149">Selecting a rule with a tag, such as *AllowInternetOutBound*, lists hello prefixes in hello **Address prefixes** blade.</span></span>
   * <span data-ttu-id="a9263-150">**İndirin:** hello kurallarının listesini uzun olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-150">**Download:** hello list of rules can be long.</span></span> <span data-ttu-id="a9263-151">Hello kuralları çevrimdışı analiz için bir .csv dosyası tıklayarak indirebileceğiniz **karşıdan** ve hello dosyası kaydediliyor.</span><span class="sxs-lookup"><span data-stu-id="a9263-151">You can download a .csv file of hello rules for offline analysis by clicking **Download** and saving hello file.</span></span>
   * <span data-ttu-id="a9263-152">**AllowRDP** gelen kuralı: Bu kural RDP bağlantıları toohello VM izin verir.</span><span class="sxs-lookup"><span data-stu-id="a9263-152">**AllowRDP** Inbound rule: This rule allows RDP connections toohello VM.</span></span>
7. <span data-ttu-id="a9263-153">Merhaba tıklatın **Subnet1 NSG** sekmesini tooview hello etkili kurallardan hello NSG uygulanan toohello alt hello resim aşağıdaki gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="a9263-153">Click hello **Subnet1-NSG** tab tooview hello effective rules from hello NSG applied toohello subnet, as shown in hello following picture:</span></span> 
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image4.png)
   
    <span data-ttu-id="a9263-154">Bildirim hello *denyRDP* **gelen** kuralı.</span><span class="sxs-lookup"><span data-stu-id="a9263-154">Notice hello *denyRDP* **Inbound** rule.</span></span> <span data-ttu-id="a9263-155">Gelen kuralları Hello alt ağ uygulanan hello ağ arabiriminin uygulanan kurallardan önce değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-155">Inbound rules applied at hello subnet are evaluated before rules applied at hello network interface.</span></span> <span data-ttu-id="a9263-156">Hello Reddet olduğundan kural hello alt ağ uygulanır, hello NIC hiçbir zaman değerlendirilen kural hello izin verdiğinden hello isteği tooconnect tooTCP 3389, başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a9263-156">Since hello deny rule is applied at hello subnet, hello request tooconnect tooTCP 3389 fails, because hello allow rule at hello NIC is never evaluated.</span></span> 
   
    <span data-ttu-id="a9263-157">Merhaba *denyRDP* kuralı hello neden neden hello RDP bağlantısı başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a9263-157">hello *denyRDP* rule is hello reason why hello RDP connection is failing.</span></span> <span data-ttu-id="a9263-158">Kaldırarak hello sorunu çözecektir.</span><span class="sxs-lookup"><span data-stu-id="a9263-158">Removing it should resolve hello problem.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="a9263-159">Merhaba VM ilişkilendirirseniz ile Merhaba NIC çalışır durumda değil veya Nsg'ler uygulanan toohello NIC veya alt ağ yapmadıysanız, hiçbir kural gösterilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-159">If hello VM associated with hello NIC is not in a running state, or NSGs haven't been applied toohello NIC or subnet, no rules are shown.</span></span>
   > 
   > 
8. <span data-ttu-id="a9263-160">tooedit NSG kuralları'nı tıklatın *Subnet1 NSG* hello içinde **ilişkili Nsg'ler** bölümü.</span><span class="sxs-lookup"><span data-stu-id="a9263-160">tooedit NSG rules, click *Subnet1-NSG* in hello **Associated NSGs** section.</span></span>
   <span data-ttu-id="a9263-161">Merhaba açılır **Subnet1 NSG** dikey.</span><span class="sxs-lookup"><span data-stu-id="a9263-161">This opens hello **Subnet1-NSG** blade.</span></span> <span data-ttu-id="a9263-162">Tıklayarak hello kuralları doğrudan düzenleyebilirsiniz **gelen güvenlik kuralları**.</span><span class="sxs-lookup"><span data-stu-id="a9263-162">You can directly edit hello rules by clicking on **Inbound security rules**.</span></span>
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image7.png)
9. <span data-ttu-id="a9263-163">Merhaba kaldırdıktan sonra *denyRDP* hello gelen kuralı **Subnet1 NSG** ve ekleyerek bir *allowRDP* kural hello etkili kuralları listesi hello resim aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="a9263-163">After removing hello *denyRDP* inbound rule in hello **Subnet1-NSG** and adding an *allowRDP* rule, hello effective rules list looks like hello following picture:</span></span>
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image8.png)
   
    <span data-ttu-id="a9263-164">TCP bağlantı noktası 3389 RDP bağlantı toohello VM açma veya hello PsPing aracını kullanarak açık olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9263-164">Confirm that TCP port 3389 is open by opening an RDP connection toohello VM or using hello PsPing tool.</span></span> <span data-ttu-id="a9263-165">Okuma hello tarafından PsPing hakkında daha fazla bilgiyi [PsPing indirme sayfası](https://technet.microsoft.com/sysinternals/psping.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9263-165">You can learn more about PsPing by reading hello [PsPing download page](https://technet.microsoft.com/sysinternals/psping.aspx).</span></span>

### <span data-ttu-id="a9263-166"><a name="nic"></a>Bir ağ arabirimi için etkili güvenlik kurallarını görüntüle</span><span class="sxs-lookup"><span data-stu-id="a9263-166"><a name="nic"></a>View effective security rules for a network interface</span></span>
<span data-ttu-id="a9263-167">VM trafik akışı için belirli bir NIC etkilenir, hello aşağıdaki adımları tamamlayarak hello etkili kuralları hello NIC hello ağ arabirimleri bağlamından için tam bir listesini görüntüleyebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="a9263-167">If your VM traffic flow is impacted for a specific NIC, you can view a full list of hello effective rules for hello NIC from hello network interfaces context by completing hello following steps:</span></span>

1. <span data-ttu-id="a9263-168">Oturum açma toohello https://portal.azure.com Azure portalında.</span><span class="sxs-lookup"><span data-stu-id="a9263-168">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="a9263-169">Tıklatın **daha fazla hizmet**, ardından **ağ arabirimleri** hello listesinde görünür.</span><span class="sxs-lookup"><span data-stu-id="a9263-169">Click **More services**, then click **Network interfaces** in hello list that appears.</span></span>
3. <span data-ttu-id="a9263-170">Bir ağ arabirimi seçin.</span><span class="sxs-lookup"><span data-stu-id="a9263-170">Select a network interface.</span></span> <span data-ttu-id="a9263-171">Bir NIC resim aşağıdaki hello adlı *VM1 nıc1* seçilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-171">In hello following picture, a NIC named *VM1-NIC1* is selected.</span></span>
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image5.png)
   
    <span data-ttu-id="a9263-172">Bu hello fark **kapsam** seçili toohello ağ arabirimi ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="a9263-172">Notice that hello **Scope** is set toohello network interface selected.</span></span> <span data-ttu-id="a9263-173">6. adımını hello okuma hakkında daha fazla bilgi toolearn hello gösterilen ek bilgiler **sorun giderme Nsg'leri bir VM için** bu makalenin.</span><span class="sxs-lookup"><span data-stu-id="a9263-173">toolearn more about hello additional information shown, read step 6 of hello **Troubleshoot NSGs for a VM** section of this article.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="a9263-174">Bir NSG'yi bir ağ arabiriminden kaldırılırsa, hello alt NSG NIC verilen hello üzerinde hala etkin</span><span class="sxs-lookup"><span data-stu-id="a9263-174">If an NSG is removed from a network interface, hello subnet NSG is still effective on hello given NIC.</span></span> <span data-ttu-id="a9263-175">Bu durumda, hello çıktı hello alt NSG kuralları yalnızca gösterir.</span><span class="sxs-lookup"><span data-stu-id="a9263-175">In this case, hello output would only show rules from hello subnet NSG.</span></span> <span data-ttu-id="a9263-176">Merhaba NIC ekli tooa VM ise kurallarını yalnızca görünür.</span><span class="sxs-lookup"><span data-stu-id="a9263-176">Rules only appear if hello NIC is attached tooa VM.</span></span>
   > 
   > 
4. <span data-ttu-id="a9263-177">Kuralları, bir NIC ve bir alt ağ ile ilişkili Nsg'ler için doğrudan düzenleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-177">You can directly edit rules for NSGs associated with a NIC and a subnet.</span></span> <span data-ttu-id="a9263-178">toolearn nasıl okuma hello 8. adım **bir sanal makine için etkili güvenlik kuralları** bu makalenin.</span><span class="sxs-lookup"><span data-stu-id="a9263-178">toolearn how, read step 8 of hello **View effective security rules for a virtual machine** section of this article.</span></span>

## <span data-ttu-id="a9263-179"><a name="nsg"></a>Bir ağ güvenlik grubu (NSG) için etkili güvenlik kuralları görüntülemek</span><span class="sxs-lookup"><span data-stu-id="a9263-179"><a name="nsg"></a>View effective security rules for a network security group (NSG)</span></span>
<span data-ttu-id="a9263-180">NSG kuralları değiştirirken tooreview hello hello kuralları belirli bir VM'de eklenmekte olan etkisini isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-180">When modifying NSG rules, you may want tooreview hello impact of hello rules being added on a particular VM.</span></span> <span data-ttu-id="a9263-181">Tüm belirli bir NSG uygulandığı NIC'ler hello için tam hello etkin güvenlik kuralları listesini görüntüleyebileceğiniz NSG dikey verilen hello tooswitch bağlamdan kalmadan.</span><span class="sxs-lookup"><span data-stu-id="a9263-181">You can view a full list of hello effective security rules for all hello NICs that a given NSG is applied to, without having tooswitch context from hello given NSG blade.</span></span> <span data-ttu-id="a9263-182">Aşağıdaki adımları tam hello bir NSG içinde tootroubleshoot etkili kuralları:</span><span class="sxs-lookup"><span data-stu-id="a9263-182">tootroubleshoot effective rules within an NSG, complete hello following steps:</span></span>

1. <span data-ttu-id="a9263-183">Oturum açma toohello https://portal.azure.com Azure portalında.</span><span class="sxs-lookup"><span data-stu-id="a9263-183">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="a9263-184">Tıklatın **daha fazla hizmet**, ardından **ağ güvenlik grupları** hello listesinde görünür.</span><span class="sxs-lookup"><span data-stu-id="a9263-184">Click **More services**, then click **Network security groups** in hello list that appears.</span></span>
3. <span data-ttu-id="a9263-185">Bir NSG'yi seçin.</span><span class="sxs-lookup"><span data-stu-id="a9263-185">Select an NSG.</span></span> <span data-ttu-id="a9263-186">Resim aşağıdaki hello VM1 nsg adlı bir NSG seçilmedi.</span><span class="sxs-lookup"><span data-stu-id="a9263-186">In hello following picture, an NSG named VM1-nsg was selected.</span></span>
   
    ![](./media/virtual-network-nsg-troubleshoot-portal/image6.png)
   
    <span data-ttu-id="a9263-187">Merhaba önceki resim bölümlerini aşağıdaki hello dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="a9263-187">Notice hello following sections of hello previous picture:</span></span>
   
   * <span data-ttu-id="a9263-188">**Kapsam:** toohello seçili NSG ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a9263-188">**Scope:** Set toohello NSG selected.</span></span>
   * <span data-ttu-id="a9263-189">**Sanal makine:** olduğunda bir NSG uygulanan tooa alt ağ, uygulanan tooall ağ arabirimleri ekli tooall VM'ler bağlı toohello alt ağı değil.</span><span class="sxs-lookup"><span data-stu-id="a9263-189">**Virtual machine:** When an NSG is applied tooa subnet, it's applied tooall network interfaces attached tooall VMs connected toohello subnet.</span></span> <span data-ttu-id="a9263-190">Bu liste, bu NSG uygulandığı tüm sanal makineleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="a9263-190">This list shows all VMs this NSG is applied to.</span></span> <span data-ttu-id="a9263-191">Tüm VM hello listeden seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-191">You can select any VM from hello list.</span></span>
     
     > [!NOTE]
     > <span data-ttu-id="a9263-192">Bir NSG uygulanan tooonly boş bir alt ağ, VM listelenmez.</span><span class="sxs-lookup"><span data-stu-id="a9263-192">If an NSG is applied tooonly an empty subnet, VMs will not be listed.</span></span> <span data-ttu-id="a9263-193">Bir NSG'yi bir VM ile ilişkili olmayan NIC uygulanan tooa ise, bu NIC'ler da listelenmez.</span><span class="sxs-lookup"><span data-stu-id="a9263-193">If an NSG is applied tooa NIC which is not associated with a VM, those NICs will also not be listed.</span></span> 
     > 
     > 
   * <span data-ttu-id="a9263-194">**Ağ arabirimi:** VM birden çok ağ arabirimine sahip.</span><span class="sxs-lookup"><span data-stu-id="a9263-194">**Network Interface:** A VM can have multiple network interfaces.</span></span> <span data-ttu-id="a9263-195">Bir ağ arabirimi seçin ekli toohello seçili VM.</span><span class="sxs-lookup"><span data-stu-id="a9263-195">You can select a network interface attached toohello selected VM.</span></span>
   * <span data-ttu-id="a9263-196">**AssociatedNSGs:** herhangi bir zamanda bir NIC tootwo olabilir etkili Nsg'ler toohello NIC uygulanan ve diğer toohello alt hello.</span><span class="sxs-lookup"><span data-stu-id="a9263-196">**AssociatedNSGs:** At any time, a NIC can have up tootwo effective NSGs, one applied toohello NIC and hello other toohello subnet.</span></span> <span data-ttu-id="a9263-197">Merhaba NIC etkin bir alt ağ NSG varsa hello kapsam VM1-nsg seçilen rağmen hello çıkış hem Nsg'ler gösterir.</span><span class="sxs-lookup"><span data-stu-id="a9263-197">Although hello scope is selected as VM1-nsg, if hello NIC has an effective subnet NSG, hello output will show both NSGs.</span></span>
4. <span data-ttu-id="a9263-198">Kuralları, bir NIC veya alt ağ ile ilişkili Nsg'ler için doğrudan düzenleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9263-198">You can directly edit rules for NSGs associated with a NIC or subnet.</span></span> <span data-ttu-id="a9263-199">toolearn nasıl okuma hello 8. adım **bir sanal makine için etkili güvenlik kuralları** bu makalenin.</span><span class="sxs-lookup"><span data-stu-id="a9263-199">toolearn how, read step 8 of hello **View effective security rules for a virtual machine** section of this article.</span></span>

<span data-ttu-id="a9263-200">6. adımını hello okuma hakkında daha fazla bilgi toolearn hello gösterilen ek bilgiler **bir sanal makine için etkili güvenlik kuralları** bu makalenin.</span><span class="sxs-lookup"><span data-stu-id="a9263-200">toolearn more about hello additional information shown, read step 6 of hello **View effective security rules for a virtual machine** section of this article.</span></span>

> [!NOTE]
> <span data-ttu-id="a9263-201">Bir alt ağ ve NIC her yalnızca bir NSG uygulanır toothem kurabiliyor olsa bile, ilişkili toomultiple NIC ve birden çok alt ağa bir NSG olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-201">Though a subnet and NIC can each have only one NSG applied toothem, an NSG can be associated toomultiple NICs and multiple subnets.</span></span>
> 
> 

## <a name="considerations"></a><span data-ttu-id="a9263-202">Dikkat edilmesi gerekenler</span><span class="sxs-lookup"><span data-stu-id="a9263-202">Considerations</span></span>
<span data-ttu-id="a9263-203">Bağlantı sorunları giderirken noktaları aşağıdaki hello göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="a9263-203">Consider hello following points when troubleshooting connectivity problems:</span></span>

* <span data-ttu-id="a9263-204">Varsayılan NSG kuralları hello'ten gelen erişim engeller Internet ve yalnızca izin VNet gelen trafiği.</span><span class="sxs-lookup"><span data-stu-id="a9263-204">Default NSG rules will block inbound access from hello internet and only permit VNet inbound traffic.</span></span> <span data-ttu-id="a9263-205">Kuralları açıkça eklenmesi tooallow gelen gerektiği gibi Internet'ten erişim.</span><span class="sxs-lookup"><span data-stu-id="a9263-205">Rules should be explicitly added tooallow inbound access from Internet, as required.</span></span>
* <span data-ttu-id="a9263-206">Bir sanal makinenin ağ bağlantısı toofail neden hiçbir NSG güvenlik kuralları varsa, hello sorun nedeniyle olabilir:</span><span class="sxs-lookup"><span data-stu-id="a9263-206">If there are no NSG security rules causing a VM’s network connectivity toofail, hello problem may be due to:</span></span>
  * <span data-ttu-id="a9263-207">Merhaba VM'ın işletim sistemi içinde çalışan güvenlik duvarı yazılımı</span><span class="sxs-lookup"><span data-stu-id="a9263-207">Firewall software running within hello VM's operating system</span></span>
  * <span data-ttu-id="a9263-208">Sanal gereçler veya şirket içi trafiği için yapılandırılmış yollar.</span><span class="sxs-lookup"><span data-stu-id="a9263-208">Routes configured for virtual appliances or on-premises traffic.</span></span> <span data-ttu-id="a9263-209">Internet trafiğini yeniden yönlendirilen tooon içi zorlamalı tünel aracılığıyla olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-209">Internet traffic can be redirected tooon-premises via forced-tunneling.</span></span> <span data-ttu-id="a9263-210">Merhaba Internet tooyour VM bir RDP/SSH bağlantısı nasıl hello şirket içi ağ donanımı bu trafiği işler bağlı olarak bu ayar ile çalışmayabilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-210">An RDP/SSH connection from hello Internet tooyour VM may not work with this setting, depending on how hello on-premises network hardware handles this traffic.</span></span> <span data-ttu-id="a9263-211">Okuma hello [sorun giderme yolları](virtual-network-routes-troubleshoot-powershell.md) makale toolearn içinde ve dışında trafik akışını engelleyen toodiagnose rota sorunları hello nasıl VM hello.</span><span class="sxs-lookup"><span data-stu-id="a9263-211">Read hello [Troubleshooting Routes](virtual-network-routes-troubleshoot-powershell.md) article toolearn how toodiagnose route problems that may be impeding hello flow of traffic in and out of hello VM.</span></span> 
* <span data-ttu-id="a9263-212">Varsayılan olarak sanal ağlar, eşlenen durumdaysa hello VIRTUAL_NETWORK etiketine tooinclude önekleri eşlenmiş Vnet'ler için otomatik olarak genişletin.</span><span class="sxs-lookup"><span data-stu-id="a9263-212">If you have peered VNets, by default, hello VIRTUAL_NETWORK tag will automatically expand tooinclude prefixes for peered VNets.</span></span> <span data-ttu-id="a9263-213">Bu önekleri hello görüntüleyebilirsiniz **ExpandedAddressPrefix** listesi olan bağlantı eşliği sorunları ilgili tooVNet tootroubleshoot.</span><span class="sxs-lookup"><span data-stu-id="a9263-213">You can view these prefixes in hello **ExpandedAddressPrefix** list, tootroubleshoot any issues related tooVNet peering connectivity.</span></span> 
* <span data-ttu-id="a9263-214">Etkin güvenlik kuralları, bir NSG hello VM'in NIC ve veya alt ağ ilişkili olup yalnızca gösterilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-214">Effective security rules are only shown if there is an NSG associated with hello VM’s NIC and or subnet.</span></span> 
* <span data-ttu-id="a9263-215">Merhaba NIC ile ilişkili hiçbir Nsg'ler vardır veya alt ağ ve tooyour VM atanan genel bir IP adresi varsa, tüm bağlantı noktalarına gelen ve giden erişimi açık olacaktır.</span><span class="sxs-lookup"><span data-stu-id="a9263-215">If there are no NSGs associated with hello NIC or subnet and you have a public IP address assigned tooyour VM, all ports will be open for inbound and outbound access.</span></span> <span data-ttu-id="a9263-216">Merhaba VM genel bir IP adresi varsa, Nsg'ler toohello NIC veya alt ağ uygulama önemle tavsiye edilir.</span><span class="sxs-lookup"><span data-stu-id="a9263-216">If hello VM has a public IP address, applying NSGs toohello NIC or subnet is strongly recommended.</span></span>

