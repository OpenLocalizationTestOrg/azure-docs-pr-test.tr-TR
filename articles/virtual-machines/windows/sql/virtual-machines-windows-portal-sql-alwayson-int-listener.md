---
title: "Azure sanal makinelerde SQL Server kullanılabilirlik grubu dinleyicisi aaaCreate | Microsoft Docs"
description: "Always On kullanılabilirlik grubu için bir dinleyici SQL Server için Azure sanal makinelerinde oluşturmak için adım adım yönergeler"
services: virtual-machines
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: monicar
ms.assetid: d1f291e9-9af2-41ba-9d29-9541e3adcfcf
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/01/2017
ms.author: mikeray
ms.openlocfilehash: c6a44dc5c7c18b572c2bf5772b4651b7210aacbd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-a-load-balancer-for-an-always-on-availability-group-in-azure"></a><span data-ttu-id="82eb1-103">Always On kullanılabilirlik grubu için yük dengeleyici Azure'da yapılandırın</span><span class="sxs-lookup"><span data-stu-id="82eb1-103">Configure a load balancer for an Always On availability group in Azure</span></span>
<span data-ttu-id="82eb1-104">Bu makalede, nasıl toocreate bir yük dengeleyici bir SQL Server Always On kullanılabilirlik grubu için Azure sanal makineye açıklanmaktadır Azure Resource Manager ile çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="82eb1-104">This article explains how toocreate a load balancer for a SQL Server Always On availability group in Azure virtual machines that are running with Azure Resource Manager.</span></span> <span data-ttu-id="82eb1-105">Merhaba SQL Server örnekleri Azure sanal makinelerde olduğunda bir kullanılabilirlik grubu yük dengeleyici gerektirir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-105">An availability group requires a load balancer when hello SQL Server instances are on Azure virtual machines.</span></span> <span data-ttu-id="82eb1-106">Merhaba yük dengeleyici hello kullanılabilirlik grubu dinleyicisi hello IP adresini depolar.</span><span class="sxs-lookup"><span data-stu-id="82eb1-106">hello load balancer stores hello IP address for hello availability group listener.</span></span> <span data-ttu-id="82eb1-107">Bir kullanılabilirlik grubu birden çok bölgeye yayılırsa, her bölge bir yük dengeleyicinin gerekir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-107">If an availability group spans multiple regions, each region needs a load balancer.</span></span>

<span data-ttu-id="82eb1-108">toocomplete bu görev bir SQL Server kullanılabilirlik grubu dağıtılan Resource Manager ile çalışan Azure sanal makinelerde toohave gerekir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-108">toocomplete this task, you need toohave a SQL Server availability group deployed on Azure virtual machines that are running with Resource Manager.</span></span> <span data-ttu-id="82eb1-109">Her iki SQL Server sanal makineleri toohello ait olmalıdır aynı kullanılabilirlik kümesi.</span><span class="sxs-lookup"><span data-stu-id="82eb1-109">Both SQL Server virtual machines must belong toohello same availability set.</span></span> <span data-ttu-id="82eb1-110">Merhaba kullanabilirsiniz [Microsoft şablonu](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically Kaynak Yöneticisi'nde hello kullanılabilirlik grubu oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-110">You can use hello [Microsoft template](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically create hello availability group in Resource Manager.</span></span> <span data-ttu-id="82eb1-111">Bu şablon bir iç yük dengeleyici sizin için otomatik olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="82eb1-111">This template automatically creates an internal load balancer for you.</span></span> 

<span data-ttu-id="82eb1-112">İsterseniz, aşağıdakileri yapabilirsiniz [el ile bir kullanılabilirlik grubu yapılandırmak](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span><span class="sxs-lookup"><span data-stu-id="82eb1-112">If you prefer, you can [manually configure an availability group](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span></span>

<span data-ttu-id="82eb1-113">Bu makalede, kullanılabilirlik grupları zaten yapılandırılmış olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-113">This article requires that your availability groups are already configured.</span></span>  

<span data-ttu-id="82eb1-114">İlgili Konular şunlardır:</span><span class="sxs-lookup"><span data-stu-id="82eb1-114">Related topics include:</span></span>

* [<span data-ttu-id="82eb1-115">Azure VM (GUI), Always On kullanılabilirlik grupları yapılandırma</span><span class="sxs-lookup"><span data-stu-id="82eb1-115">Configure Always On availability groups in Azure VM (GUI)</span></span>](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md)   
* [<span data-ttu-id="82eb1-116">Azure Resource Manager ve PowerShell kullanarak VNet-VNet bağlantı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="82eb1-116">Configure a VNet-to-VNet connection by using Azure Resource Manager and PowerShell</span></span>](../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)

<span data-ttu-id="82eb1-117">Bu makalede taramasını tarafından oluşturabilir ve bir yük dengeleyici hello Azure portalında yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="82eb1-117">By walking through this article, you create and configure a load balancer in hello Azure portal.</span></span> <span data-ttu-id="82eb1-118">Merhaba işlemi tamamlandıktan sonra hello küme toouse hello IP adresinden hello yük dengeleyici hello kullanılabilirlik grubu dinleyicisi için yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-118">After hello process is complete, you configure hello cluster toouse hello IP address from hello load balancer for hello availability group listener.</span></span>

## <a name="create-and-configure-hello-load-balancer-in-hello-azure-portal"></a><span data-ttu-id="82eb1-119">Oluşturma ve hello yük dengeleyici hello Azure portalını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="82eb1-119">Create and configure hello load balancer in hello Azure portal</span></span>
<span data-ttu-id="82eb1-120">Başlangıç görevinin bu bölümünde, aşağıdaki hello:</span><span class="sxs-lookup"><span data-stu-id="82eb1-120">In this portion of hello task, do hello following:</span></span>

1. <span data-ttu-id="82eb1-121">Hello Azure portal, hello yük dengeleyicisi oluşturun ve başlangıç IP adresi yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-121">In hello Azure portal, create hello load balancer and configure hello IP address.</span></span>
2. <span data-ttu-id="82eb1-122">Merhaba arka uç havuzunu yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-122">Configure hello back-end pool.</span></span>
3. <span data-ttu-id="82eb1-123">Merhaba araştırma oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-123">Create hello probe.</span></span> 
4. <span data-ttu-id="82eb1-124">Merhaba Yük Dengeleme kuralları ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-124">Set hello load balancing rules.</span></span>

> [!NOTE]
> <span data-ttu-id="82eb1-125">Hello SQL Server örneklerini birden çok kaynak grupları ve bölgelerde varsa, her adım, iki kez kez her kaynak grubunda gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-125">If hello SQL Server instances are in multiple resource groups and regions, perform each step twice, once in each resource group.</span></span>
> 
> 

### <a name="step-1-create-hello-load-balancer-and-configure-hello-ip-address"></a><span data-ttu-id="82eb1-126">1. adım: hello yük dengeleyicisi oluşturun ve başlangıç IP adresi yapılandırın</span><span class="sxs-lookup"><span data-stu-id="82eb1-126">Step 1: Create hello load balancer and configure hello IP address</span></span>
<span data-ttu-id="82eb1-127">İlk olarak hello yük dengeleyicisi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-127">First, create hello load balancer.</span></span> 

1. <span data-ttu-id="82eb1-128">Hello Azure portal, hello SQL Server sanal makineleri içeren hello kaynak grubu açın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-128">In hello Azure portal, open hello resource group that contains hello SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="82eb1-129">Merhaba kaynak grubunda tıklatın **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-129">In hello resource group, click **Add**.</span></span>

3. <span data-ttu-id="82eb1-130">Arama **yük dengeleyici** ve hello arama sonuçlarında ardından **yük dengeleyici**, tarafından yayımlanan **Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-130">Search for **load balancer** and then, in hello search results, select **Load Balancer**, which is published by **Microsoft**.</span></span>

4. <span data-ttu-id="82eb1-131">Merhaba üzerinde **yük dengeleyici** dikey penceresinde tıklatın **oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-131">On hello **Load Balancer** blade, click **Create**.</span></span>

5. <span data-ttu-id="82eb1-132">Merhaba, **oluşturma yük dengeleyici** iletişim kutusunda, hello yük dengeleyici gibi yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="82eb1-132">In hello **Create load balancer** dialog box, configure hello load balancer as follows:</span></span>

   | <span data-ttu-id="82eb1-133">Ayar</span><span class="sxs-lookup"><span data-stu-id="82eb1-133">Setting</span></span> | <span data-ttu-id="82eb1-134">Değer</span><span class="sxs-lookup"><span data-stu-id="82eb1-134">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="82eb1-135">**Ad**</span><span class="sxs-lookup"><span data-stu-id="82eb1-135">**Name**</span></span> |<span data-ttu-id="82eb1-136">Merhaba yük dengeleyici temsil eden bir metin adı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-136">A text name representing hello load balancer.</span></span> <span data-ttu-id="82eb1-137">Örneğin, **sqlLB**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-137">For example, **sqlLB**.</span></span> |
   | <span data-ttu-id="82eb1-138">**Tür**</span><span class="sxs-lookup"><span data-stu-id="82eb1-138">**Type**</span></span> |<span data-ttu-id="82eb1-139">**İç**: çoğu uygulamalarını hello uygulamalara izin veren bir iç yük dengeleyici kullanın aynı sanal ağ tooconnect toohello kullanılabilirlik grubu.</span><span class="sxs-lookup"><span data-stu-id="82eb1-139">**Internal**: Most implementations use an internal load balancer, which allows applications within hello same virtual network tooconnect toohello availability group.</span></span>  </br> <span data-ttu-id="82eb1-140">**Dış**: uygulamaları tooconnect toohello kullanılabilirlik grubu genel bir Internet bağlantısı üzerinden sağlar.</span><span class="sxs-lookup"><span data-stu-id="82eb1-140">**External**: Allows applications tooconnect toohello availability group through a public Internet connection.</span></span> |
   | <span data-ttu-id="82eb1-141">**Sanal ağ**</span><span class="sxs-lookup"><span data-stu-id="82eb1-141">**Virtual network**</span></span> |<span data-ttu-id="82eb1-142">Merhaba SQL Server intances bulunan hello sanal ağı seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-142">Select hello virtual network that hello SQL Server intances are in.</span></span> |
   | <span data-ttu-id="82eb1-143">**Alt ağ**</span><span class="sxs-lookup"><span data-stu-id="82eb1-143">**Subnet**</span></span> |<span data-ttu-id="82eb1-144">Merhaba SQL Server örnekleri bulunan hello alt ağ seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-144">Select hello subnet that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="82eb1-145">**IP adresi ataması**</span><span class="sxs-lookup"><span data-stu-id="82eb1-145">**IP address assignment**</span></span> |<span data-ttu-id="82eb1-146">**Statik**</span><span class="sxs-lookup"><span data-stu-id="82eb1-146">**Static**</span></span> |
   | <span data-ttu-id="82eb1-147">**Özel IP adresi**</span><span class="sxs-lookup"><span data-stu-id="82eb1-147">**Private IP address**</span></span> |<span data-ttu-id="82eb1-148">Merhaba alt ağdan kullanılabilir bir IP adresi belirtin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-148">Specify an available IP address from hello subnet.</span></span> <span data-ttu-id="82eb1-149">Merhaba kümede bir dinleyici oluşturduğunuzda, bu IP adresi kullanın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-149">Use this IP address when you create a listener on hello cluster.</span></span> <span data-ttu-id="82eb1-150">Bu makalenin sonraki bölümlerinde bir PowerShell Betiği bu adresi Merhaba kullanmak `$ILBIP` değişkeni.</span><span class="sxs-lookup"><span data-stu-id="82eb1-150">In a PowerShell script, later in this article, use this address for hello `$ILBIP` variable.</span></span> |
   | <span data-ttu-id="82eb1-151">**Abonelik**</span><span class="sxs-lookup"><span data-stu-id="82eb1-151">**Subscription**</span></span> |<span data-ttu-id="82eb1-152">Birden çok aboneliğiniz varsa, bu alan görünebilir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-152">If you have multiple subscriptions, this field might appear.</span></span> <span data-ttu-id="82eb1-153">Bu kaynakla tooassociate istediğiniz hello aboneliği seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-153">Select hello subscription that you want tooassociate with this resource.</span></span> <span data-ttu-id="82eb1-154">Bunu olduğu normalde hello aynı abonelik hello kullanılabilirlik grubu için tüm hello kaynaklar.</span><span class="sxs-lookup"><span data-stu-id="82eb1-154">It is normally hello same subscription as all hello resources for hello availability group.</span></span> |
   | <span data-ttu-id="82eb1-155">**Kaynak grubu**</span><span class="sxs-lookup"><span data-stu-id="82eb1-155">**Resource group**</span></span> |<span data-ttu-id="82eb1-156">Merhaba SQL Server örnekleri bulunan hello kaynak grubu seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-156">Select hello resource group that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="82eb1-157">**Konum**</span><span class="sxs-lookup"><span data-stu-id="82eb1-157">**Location**</span></span> |<span data-ttu-id="82eb1-158">Merhaba hello SQL Server örnekleri bulunan Azure konumu seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-158">Select hello Azure location that hello SQL Server instances are in.</span></span> |

6. <span data-ttu-id="82eb1-159">**Oluştur**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-159">Click **Create**.</span></span> 

<span data-ttu-id="82eb1-160">Azure hello yük dengeleyici oluşturur.</span><span class="sxs-lookup"><span data-stu-id="82eb1-160">Azure creates hello load balancer.</span></span> <span data-ttu-id="82eb1-161">Merhaba yük dengeleyici tooa belirli ağ, alt ağ, kaynak grubunu ve konumu aittir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-161">hello load balancer belongs tooa specific network, subnet, resource group, and location.</span></span> <span data-ttu-id="82eb1-162">Azure hello görev tamamlandıktan sonra azure'da hello yük dengeleyici ayarları doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-162">After Azure completes hello task, verify hello load balancer settings in Azure.</span></span> 

### <a name="step-2-configure-hello-back-end-pool"></a><span data-ttu-id="82eb1-163">2. adım: hello arka uç havuzunu yapılandırma</span><span class="sxs-lookup"><span data-stu-id="82eb1-163">Step 2: Configure hello back-end pool</span></span>
<span data-ttu-id="82eb1-164">Azure çağrıları hello arka uç adres havuzu *arka uç havuzu*.</span><span class="sxs-lookup"><span data-stu-id="82eb1-164">Azure calls hello back-end address pool *backend pool*.</span></span> <span data-ttu-id="82eb1-165">Bu durumda, hello arka uç havuzu hello adresleri hello iki SQL Server örneklerinin kullanılabilirlik grubunda değil.</span><span class="sxs-lookup"><span data-stu-id="82eb1-165">In this case, hello back-end pool is hello addresses of hello two SQL Server instances in your availability group.</span></span> 

1. <span data-ttu-id="82eb1-166">Kaynak grubunda oluşturduğunuz hello yük dengeleyici'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-166">In your resource group, click hello load balancer that you created.</span></span> 

2. <span data-ttu-id="82eb1-167">Üzerinde **ayarları**, tıklatın **arka uç havuzları**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-167">On **Settings**, click **Backend pools**.</span></span>

3. <span data-ttu-id="82eb1-168">Üzerinde **arka uç havuzları**, tıklatın **Ekle** toocreate bir arka uç adres havuzu.</span><span class="sxs-lookup"><span data-stu-id="82eb1-168">On **Backend pools**, click **Add** toocreate a back-end address pool.</span></span> 

4. <span data-ttu-id="82eb1-169">Üzerinde **arka uç havuzu ekleme**altında **adı**, hello arka uç havuzu için bir ad yazın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-169">On **Add backend pool**, under **Name**, type a name for hello back-end pool.</span></span>

5. <span data-ttu-id="82eb1-170">Altında **sanal makineleri**, tıklatın **bir sanal makine Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-170">Under **Virtual machines**, click **Add a virtual machine**.</span></span> 

6. <span data-ttu-id="82eb1-171">Altında **sanal makineleri seçin**, tıklatın **bir kullanılabilirlik kümesi seçin**ve ardından hello kullanılabilirlik kümesi hello SQL Server sanal makineleri ait olduğunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-171">Under **Choose virtual machines**, click **Choose an availability set**, and then specify hello availability set that hello SQL Server virtual machines belong to.</span></span>

7. <span data-ttu-id="82eb1-172">Merhaba kullanılabilirlik kümesi seçtikten sonra tıklatın **hello sanal makineleri seçin**, select hello hello SQL Server örnekleri hello kullanılabilirlik grubunda barındırmak ve ardından iki sanal makine **seçin**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-172">After you have chosen hello availability set, click **Choose hello virtual machines**, select hello two virtual machines that host hello SQL Server instances in hello availability group, and then click **Select**.</span></span> 

8. <span data-ttu-id="82eb1-173">Tıklatın **Tamam** tooclose hello kaynaklarınız için dikey pencereleri **sanal makineleri seçin**, ve **arka uç havuzu ekleme**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-173">Click **OK** tooclose hello blades for **Choose virtual machines**, and **Add backend pool**.</span></span> 

<span data-ttu-id="82eb1-174">Azure hello arka uç adres havuzu hello ayarlarını güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-174">Azure updates hello settings for hello back-end address pool.</span></span> <span data-ttu-id="82eb1-175">Şimdi iki SQL Server örneklerinin bir havuzu kullanılabilirlik kümesi vardır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-175">Now your availability set has a pool of two SQL Server instances.</span></span>

### <a name="step-3-create-a-probe"></a><span data-ttu-id="82eb1-176">3. adım: bir araştırma oluşturma</span><span class="sxs-lookup"><span data-stu-id="82eb1-176">Step 3: Create a probe</span></span>
<span data-ttu-id="82eb1-177">Merhaba araştırma nasıl hello SQL Server örnekleri hangisinin hello kullanılabilirlik grubu dinleyicisi şu anda sahibi Azure doğrular tanımlar.</span><span class="sxs-lookup"><span data-stu-id="82eb1-177">hello probe defines how Azure verifies which of hello SQL Server instances currently owns hello availability group listener.</span></span> <span data-ttu-id="82eb1-178">Azure hello araştırma oluşturduğunuzda tanımlayan bir bağlantı noktası hello IP adresine göre hello hizmet araştırmaları.</span><span class="sxs-lookup"><span data-stu-id="82eb1-178">Azure probes hello service based on hello IP address on a port that you define when you create hello probe.</span></span>

1. <span data-ttu-id="82eb1-179">Merhaba üzerinde yük dengeleyici **ayarları** dikey penceresinde tıklatın **sistem durumu araştırmalarının**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-179">On hello load balancer **Settings** blade, click **Health probes**.</span></span> 

2. <span data-ttu-id="82eb1-180">Merhaba üzerinde **sistem durumu araştırmalarının** dikey penceresinde tıklatın **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-180">On hello **Health probes** blade, click **Add**.</span></span>

3. <span data-ttu-id="82eb1-181">Merhaba üzerinde Hello araştırmasını yapılandırma **Ekle araştırma** dikey.</span><span class="sxs-lookup"><span data-stu-id="82eb1-181">Configure hello probe on hello **Add probe** blade.</span></span> <span data-ttu-id="82eb1-182">Aşağıdaki kullanım hello tooconfigure hello araştırma değerler:</span><span class="sxs-lookup"><span data-stu-id="82eb1-182">Use hello following values tooconfigure hello probe:</span></span>

   | <span data-ttu-id="82eb1-183">Ayar</span><span class="sxs-lookup"><span data-stu-id="82eb1-183">Setting</span></span> | <span data-ttu-id="82eb1-184">Değer</span><span class="sxs-lookup"><span data-stu-id="82eb1-184">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="82eb1-185">**Ad**</span><span class="sxs-lookup"><span data-stu-id="82eb1-185">**Name**</span></span> |<span data-ttu-id="82eb1-186">Merhaba araştırma temsil eden bir metin adı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-186">A text name representing hello probe.</span></span> <span data-ttu-id="82eb1-187">Örneğin, **SQLAlwaysOnEndPointProbe**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-187">For example, **SQLAlwaysOnEndPointProbe**.</span></span> |
   | <span data-ttu-id="82eb1-188">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="82eb1-188">**Protocol**</span></span> |<span data-ttu-id="82eb1-189">**TCP**</span><span class="sxs-lookup"><span data-stu-id="82eb1-189">**TCP**</span></span> |
   | <span data-ttu-id="82eb1-190">**Bağlantı Noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-190">**Port**</span></span> |<span data-ttu-id="82eb1-191">Tüm kullanılabilir bağlantı noktası kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="82eb1-191">You can use any available port.</span></span> <span data-ttu-id="82eb1-192">Örneğin, *59999*.</span><span class="sxs-lookup"><span data-stu-id="82eb1-192">For example, *59999*.</span></span> |
   | <span data-ttu-id="82eb1-193">**Aralığı**</span><span class="sxs-lookup"><span data-stu-id="82eb1-193">**Interval**</span></span> |<span data-ttu-id="82eb1-194">*5*</span><span class="sxs-lookup"><span data-stu-id="82eb1-194">*5*</span></span> |
   | <span data-ttu-id="82eb1-195">**Sağlıksız durum eşiği.**</span><span class="sxs-lookup"><span data-stu-id="82eb1-195">**Unhealthy threshold**</span></span> |<span data-ttu-id="82eb1-196">*2*</span><span class="sxs-lookup"><span data-stu-id="82eb1-196">*2*</span></span> |

4.  <span data-ttu-id="82eb1-197">**Tamam** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-197">Click **OK**.</span></span> 

> [!NOTE]
> <span data-ttu-id="82eb1-198">Belirttiğiniz başlangıç bağlantı noktası hem de SQL Server örnekleri hello güvenlik duvarı açık olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-198">Make sure that hello port you specify is open on hello firewall of both SQL Server instances.</span></span> <span data-ttu-id="82eb1-199">Her iki örnek hello kullandığınız TCP bağlantı noktası için bir gelen kuralı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-199">Both instances require an inbound rule for hello TCP port that you use.</span></span> <span data-ttu-id="82eb1-200">Daha fazla bilgi için bkz: [Ekle veya Düzenle güvenlik duvarı kuralı](http://technet.microsoft.com/library/cc753558.aspx).</span><span class="sxs-lookup"><span data-stu-id="82eb1-200">For more information, see [Add or Edit Firewall Rule](http://technet.microsoft.com/library/cc753558.aspx).</span></span> 
> 
> 

<span data-ttu-id="82eb1-201">Azure hello araştırması oluşturur ve hello dinleyici hello kullanılabilirlik grubu için hangi SQL Server örneğine sahip tootest kullanır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-201">Azure creates hello probe and then uses it tootest which SQL Server instance has hello listener for hello availability group.</span></span>

### <a name="step-4-set-hello-load-balancing-rules"></a><span data-ttu-id="82eb1-202">4. adım: hello Yük Dengeleme kuralları ayarlama</span><span class="sxs-lookup"><span data-stu-id="82eb1-202">Step 4: Set hello load balancing rules</span></span>
<span data-ttu-id="82eb1-203">Merhaba yük dengeleyici trafiği toohello SQL Server örneklerinin nasıl yönlendirir Hello Yük Dengeleme kuralları yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-203">hello load balancing rules configure how hello load balancer routes traffic toohello SQL Server instances.</span></span> <span data-ttu-id="82eb1-204">Merhaba iki SQL Server örneği yalnızca biri aynı anda hello kullanılabilirlik grubu dinleyicisi kaynağının sahibi olduğundan bu yük dengeleyici için doğrudan sunucu dönüşü etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-204">For this load balancer, you enable direct server return because only one of hello two SQL Server instances owns hello availability group listener resource at a time.</span></span>

1. <span data-ttu-id="82eb1-205">Merhaba üzerinde yük dengeleyici **ayarları** dikey penceresinde tıklatın **Yük Dengeleme kuralları**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-205">On hello load balancer **Settings** blade, click **Load balancing rules**.</span></span> 

2. <span data-ttu-id="82eb1-206">Merhaba üzerinde **Yük Dengeleme kuralları** dikey penceresinde tıklatın **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-206">On hello **Load balancing rules** blade, click **Add**.</span></span>

3. <span data-ttu-id="82eb1-207">Merhaba üzerinde **Ekle Yük Dengeleme kuralları** dikey penceresinde hello Yük Dengeleme kuralını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-207">On hello **Add load balancing rules** blade, configure hello load balancing rule.</span></span> <span data-ttu-id="82eb1-208">Ayarları aşağıdaki hello kullan:</span><span class="sxs-lookup"><span data-stu-id="82eb1-208">Use hello following settings:</span></span> 

   | <span data-ttu-id="82eb1-209">Ayar</span><span class="sxs-lookup"><span data-stu-id="82eb1-209">Setting</span></span> | <span data-ttu-id="82eb1-210">Değer</span><span class="sxs-lookup"><span data-stu-id="82eb1-210">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="82eb1-211">**Ad**</span><span class="sxs-lookup"><span data-stu-id="82eb1-211">**Name**</span></span> |<span data-ttu-id="82eb1-212">Merhaba Yük Dengeleme kuralları temsil eden bir metin adı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-212">A text name representing hello load balancing rules.</span></span> <span data-ttu-id="82eb1-213">Örneğin, **SQLAlwaysOnEndPointListener**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-213">For example, **SQLAlwaysOnEndPointListener**.</span></span> |
   | <span data-ttu-id="82eb1-214">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="82eb1-214">**Protocol**</span></span> |<span data-ttu-id="82eb1-215">**TCP**</span><span class="sxs-lookup"><span data-stu-id="82eb1-215">**TCP**</span></span> |
   | <span data-ttu-id="82eb1-216">**Bağlantı Noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-216">**Port**</span></span> |<span data-ttu-id="82eb1-217">*1433*</span><span class="sxs-lookup"><span data-stu-id="82eb1-217">*1433*</span></span> |
   | <span data-ttu-id="82eb1-218">**Arka uç bağlantı noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-218">**Backend Port**</span></span> |<span data-ttu-id="82eb1-219">*1433*. Bu kural kullandığından bu değer yoksayılır **kayan IP (doğrudan sunucu dönüşü)**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-219">*1433*. This value is ignored because this rule uses **Floating IP (direct server return)**.</span></span> |
   | <span data-ttu-id="82eb1-220">**Araştırma**</span><span class="sxs-lookup"><span data-stu-id="82eb1-220">**Probe**</span></span> |<span data-ttu-id="82eb1-221">Bu yük dengeleyici için oluşturduğunuz hello araştırma Hello adını kullanın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-221">Use hello name of hello probe that you created for this load balancer.</span></span> |
   | <span data-ttu-id="82eb1-222">**Oturum kalıcılığı**</span><span class="sxs-lookup"><span data-stu-id="82eb1-222">**Session persistence**</span></span> |<span data-ttu-id="82eb1-223">**Yok**</span><span class="sxs-lookup"><span data-stu-id="82eb1-223">**None**</span></span> |
   | <span data-ttu-id="82eb1-224">**Boşta kalma zaman aşımı (dakika)**</span><span class="sxs-lookup"><span data-stu-id="82eb1-224">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="82eb1-225">*4*</span><span class="sxs-lookup"><span data-stu-id="82eb1-225">*4*</span></span> |
   | <span data-ttu-id="82eb1-226">**Kayan IP (doğrudan sunucu dönüşü)**</span><span class="sxs-lookup"><span data-stu-id="82eb1-226">**Floating IP (direct server return)**</span></span> |<span data-ttu-id="82eb1-227">**Etkin**</span><span class="sxs-lookup"><span data-stu-id="82eb1-227">**Enabled**</span></span> |

   > [!NOTE]
   > <span data-ttu-id="82eb1-228">Tüm hello ayarları hello dikey tooview aşağı tooscroll olabilir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-228">You might have tooscroll down hello blade tooview all hello settings.</span></span>
   > 

4. <span data-ttu-id="82eb1-229">**Tamam** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-229">Click **OK**.</span></span> 
5. <span data-ttu-id="82eb1-230">Azure hello Yük Dengeleme kuralı yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-230">Azure configures hello load balancing rule.</span></span> <span data-ttu-id="82eb1-231">Merhaba yük dengeleyici hello kullanılabilirlik grubu için hello dinleyici barındıran yapılandırılmış tooroute trafiği toohello SQL Server örneği sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="82eb1-231">Now hello load balancer is configured tooroute traffic toohello SQL Server instance that hosts hello listener for hello availability group.</span></span> 

<span data-ttu-id="82eb1-232">Bu noktada, tooboth SQL Server makineleri bağlayan bir yük dengeleyici hello kaynak grubunda yok.</span><span class="sxs-lookup"><span data-stu-id="82eb1-232">At this point, hello resource group has a load balancer that connects tooboth SQL Server machines.</span></span> <span data-ttu-id="82eb1-233">Her iki makine toorequests hello kullanılabilirlik grupları için yanıt vermesini sağlayabilirsiniz hello yük dengeleyici hello SQL Server Always On kullanılabilirlik grubu dinleyicisi, IP adresini de içerir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-233">hello load balancer also contains an IP address for hello SQL Server Always On availability group listener, so that either machine can respond toorequests for hello availability groups.</span></span>

> [!NOTE]
> <span data-ttu-id="82eb1-234">SQL Server örnekleri iki ayrı bölgelerde bulunuyorsa, diğer bölge hello hello adımlarını yineleyin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-234">If your SQL Server instances are in two separate regions, repeat hello steps in hello other region.</span></span> <span data-ttu-id="82eb1-235">Her bölge bir yük dengeleyici gerektirir.</span><span class="sxs-lookup"><span data-stu-id="82eb1-235">Each region requires a load balancer.</span></span> 
> 
> 

## <a name="configure-hello-cluster-toouse-hello-load-balancer-ip-address"></a><span data-ttu-id="82eb1-236">Merhaba küme toouse hello yük dengeleyici IP adresi yapılandırın</span><span class="sxs-lookup"><span data-stu-id="82eb1-236">Configure hello cluster toouse hello load balancer IP address</span></span>
<span data-ttu-id="82eb1-237">Merhaba sonraki adıma tooconfigure hello dinleyicisi hello kümede ve hello dinleyicisi çevrimiçi duruma getirin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-237">hello next step is tooconfigure hello listener on hello cluster, and bring hello listener online.</span></span> <span data-ttu-id="82eb1-238">Aşağıdaki hello:</span><span class="sxs-lookup"><span data-stu-id="82eb1-238">Do hello following:</span></span> 

1. <span data-ttu-id="82eb1-239">Merhaba kullanılabilirlik grubu dinleyicisi hello yük devretme kümesinde oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-239">Create hello availability group listener on hello failover cluster.</span></span> 

2. <span data-ttu-id="82eb1-240">Merhaba dinleyicisi çevrimiçi duruma getirin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-240">Bring hello listener online.</span></span>

### <a name="step-5-create-hello-availability-group-listener-on-hello-failover-cluster"></a><span data-ttu-id="82eb1-241">5. adım: hello yük devretme kümesinde hello kullanılabilirlik grubu dinleyicisi oluşturma</span><span class="sxs-lookup"><span data-stu-id="82eb1-241">Step 5: Create hello availability group listener on hello failover cluster</span></span>
<span data-ttu-id="82eb1-242">Bu adımda, yük devretme kümesi Yöneticisi'ni ve SQL Server Management Studio hello kullanılabilirlik grubu dinleyicisi el ile oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-242">In this step, you manually create hello availability group listener in Failover Cluster Manager and SQL Server Management Studio.</span></span>

[!INCLUDE [ag-listener-configure](../../../../includes/virtual-machines-ag-listener-configure.md)]

### <a name="verify-hello-configuration-of-hello-listener"></a><span data-ttu-id="82eb1-243">Merhaba dinleyicisi Hello yapılandırmasını doğrulayın</span><span class="sxs-lookup"><span data-stu-id="82eb1-243">Verify hello configuration of hello listener</span></span>

<span data-ttu-id="82eb1-244">Merhaba küme kaynakları ve bağımlılıklar doğru şekilde yapılandırılırsa, SQL Server Management Studio'da mümkün tooview hello dinleyicisi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-244">If hello cluster resources and dependencies are correctly configured, you should be able tooview hello listener in SQL Server Management Studio.</span></span> <span data-ttu-id="82eb1-245">tooset Merhaba dinleyicisi bağlantı noktası, aşağıdaki hello:</span><span class="sxs-lookup"><span data-stu-id="82eb1-245">tooset hello listener port, do hello following:</span></span>

1. <span data-ttu-id="82eb1-246">SQL Server Management Studio'yu başlatın ve sonra toohello birincil çoğaltma bağlanın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-246">Start SQL Server Management Studio, and then connect toohello primary replica.</span></span>

2. <span data-ttu-id="82eb1-247">Çok Git**AlwaysOn yüksek kullanılabilirlik** > **kullanılabilirlik grupları** > **kullanılabilirlik grubu dinleyicileri**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-247">Go too**AlwaysOn High Availability** > **Availability Groups** > **Availability Group Listeners**.</span></span>  
    <span data-ttu-id="82eb1-248">Yük Devretme Kümesi Yöneticisi'nde oluşturulan hello dinleyici adı görmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="82eb1-248">You should now see hello listener name that you created in Failover Cluster Manager.</span></span> 

3. <span data-ttu-id="82eb1-249">Merhaba dinleyici adına sağ tıklayın ve ardından **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-249">Right-click hello listener name, and then click **Properties**.</span></span>

4. <span data-ttu-id="82eb1-250">Merhaba, **bağlantı noktası** kutusunda, daha önce kullandığınız $EndpointPort hello kullanarak hello hello kullanılabilirlik grubu dinleyicisinin bağlantı noktası numarası belirtin (1433 olduğu hello varsayılan) ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-250">In hello **Port** box, specify hello port number for hello availability group listener by using hello $EndpointPort you used earlier (1433 was hello default), and then click **OK**.</span></span>

<span data-ttu-id="82eb1-251">Artık Azure sanal makinelerde Kaynak Yöneticisi modunda çalışan bir kullanılabilirlik grubuna sahip.</span><span class="sxs-lookup"><span data-stu-id="82eb1-251">You now have an availability group in Azure virtual machines running in Resource Manager mode.</span></span> 

## <a name="test-hello-connection-toohello-listener"></a><span data-ttu-id="82eb1-252">Test hello bağlantı toohello dinleyicisi</span><span class="sxs-lookup"><span data-stu-id="82eb1-252">Test hello connection toohello listener</span></span>
<span data-ttu-id="82eb1-253">Merhaba aşağıdakileri yaparak hello Bağlantıyı Sına:</span><span class="sxs-lookup"><span data-stu-id="82eb1-253">Test hello connection by doing hello following:</span></span>

1. <span data-ttu-id="82eb1-254">Hello olan RDP tooa SQL Server örneği aynı sanal ağ, ancak kendi hello çoğaltma.</span><span class="sxs-lookup"><span data-stu-id="82eb1-254">RDP tooa SQL Server instance that is in hello same virtual network, but does not own hello replica.</span></span> <span data-ttu-id="82eb1-255">Bu sunucu olması hello hello kümedeki diğer SQL Server örneği.</span><span class="sxs-lookup"><span data-stu-id="82eb1-255">This server can be hello other SQL Server instance in hello cluster.</span></span>

2. <span data-ttu-id="82eb1-256">Kullanım **sqlcmd** yardımcı programı tootest hello bağlantı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-256">Use **sqlcmd** utility tootest hello connection.</span></span> <span data-ttu-id="82eb1-257">Örneğin, komut dosyası izleyen hello kurar bir **sqlcmd** bağlantı toohello birincil çoğaltma Windows kimlik doğrulaması ile Merhaba dinleyicisi aracılığıyla:</span><span class="sxs-lookup"><span data-stu-id="82eb1-257">For example, hello following script establishes a **sqlcmd** connection toohello primary replica through hello listener with Windows authentication:</span></span>
   
        sqlcmd -S <listenerName> -E

<span data-ttu-id="82eb1-258">Merhaba SQLCMD bağlantı hello birincil çoğaltmayı barındıran toohello SQL Server örneği otomatik olarak bağlanır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-258">hello SQLCMD connection automatically connects toohello SQL Server instance that hosts hello primary replica.</span></span> 

## <a name="create-an-ip-address-for-an-additional-availability-group"></a><span data-ttu-id="82eb1-259">Bir ek kullanılabilirlik grubu için bir IP adresi oluştur</span><span class="sxs-lookup"><span data-stu-id="82eb1-259">Create an IP address for an additional availability group</span></span>

<span data-ttu-id="82eb1-260">Her kullanılabilirlik grubu ayrı bir dinleyicisi kullanır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-260">Each availability group uses a separate listener.</span></span> <span data-ttu-id="82eb1-261">Her dinleyicisi kendi IP adresi vardır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-261">Each listener has its own IP address.</span></span> <span data-ttu-id="82eb1-262">Kullanım hello aynı ek dinleyicileri için yük dengeleyici toohold başlangıç IP adresi.</span><span class="sxs-lookup"><span data-stu-id="82eb1-262">Use hello same load balancer toohold hello IP address for additional listeners.</span></span> <span data-ttu-id="82eb1-263">Bir kullanılabilirlik grubu oluşturduktan sonra başlangıç IP adresi toohello yük dengeleyici eklemek ve hello dinleyicisini yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-263">After you create an availability group, add hello IP address toohello load balancer, and then configure hello listener.</span></span>

<span data-ttu-id="82eb1-264">tooadd bir IP adresi tooa yük dengeleyici hello Azure portal ile Merhaba aşağıdaki:</span><span class="sxs-lookup"><span data-stu-id="82eb1-264">tooadd an IP address tooa load balancer with hello Azure portal, do hello following:</span></span>

1. <span data-ttu-id="82eb1-265">Hello Azure portal, hello yük dengeleyici içeren hello kaynak grubunu açın ve hello yük dengeleyici'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-265">In hello Azure portal, open hello resource group that contains hello load balancer, and then click hello load balancer.</span></span> 

2. <span data-ttu-id="82eb1-266">Altında **ayarları**, tıklatın **ön uç IP havuzu**ve ardından **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-266">Under **SETTINGS**, click **Frontend IP pool**, and then click **Add**.</span></span> 

3. <span data-ttu-id="82eb1-267">Altında **ön uç IP adresi Ekle**, hello ön ucu için bir ad atayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-267">Under **Add frontend IP address**, assign a name for hello front end.</span></span> 

4. <span data-ttu-id="82eb1-268">Bu hello doğrulayın **sanal ağ** ve hello **alt** olan, hello SQL Server örnekleri hello aynı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-268">Verify that hello **Virtual network** and hello **Subnet** are hello same as hello SQL Server instances.</span></span>

5. <span data-ttu-id="82eb1-269">Başlangıç IP adresi hello dinleyici için ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-269">Set hello IP address for hello listener.</span></span> 
   
   >[!TIP]
   ><span data-ttu-id="82eb1-270">Başlangıç IP adresi toostatic ayarlamak ve hello alt ağda şu anda kullanılmamaktadır bir adres yazın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-270">You can set hello IP address toostatic and type an address that is not currently used in hello subnet.</span></span> <span data-ttu-id="82eb1-271">Alternatif olarak, başlangıç IP adresi toodynamic ayarlamak ve hello yeni ön uç IP havuzu kaydedin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-271">Alternatively, you can set hello IP address toodynamic and save hello new front-end IP pool.</span></span> <span data-ttu-id="82eb1-272">Bunu yaptığınızda hello Azure portalında kullanılabilir bir IP adresi toohello havuzu otomatik olarak atar.</span><span class="sxs-lookup"><span data-stu-id="82eb1-272">When you do so, hello Azure portal automatically assigns an available IP address toohello pool.</span></span> <span data-ttu-id="82eb1-273">Ardından, hello ön uç IP havuzu yeniden açın ve hello atama toostatic değiştirin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-273">You can then reopen hello front-end IP pool and change hello assignment toostatic.</span></span> 

6. <span data-ttu-id="82eb1-274">Başlangıç IP adresi hello dinleyicisinin kaydedin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-274">Save hello IP address for hello listener.</span></span> 

7. <span data-ttu-id="82eb1-275">Ayarları aşağıdaki hello kullanarak bir sistem durumu araştırması ekleyin:</span><span class="sxs-lookup"><span data-stu-id="82eb1-275">Add a health probe by using hello following settings:</span></span>

   |<span data-ttu-id="82eb1-276">Ayar</span><span class="sxs-lookup"><span data-stu-id="82eb1-276">Setting</span></span> |<span data-ttu-id="82eb1-277">Değer</span><span class="sxs-lookup"><span data-stu-id="82eb1-277">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="82eb1-278">**Ad**</span><span class="sxs-lookup"><span data-stu-id="82eb1-278">**Name**</span></span> |<span data-ttu-id="82eb1-279">Bir ad tooidentify hello araştırma.</span><span class="sxs-lookup"><span data-stu-id="82eb1-279">A name tooidentify hello probe.</span></span>
   |<span data-ttu-id="82eb1-280">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="82eb1-280">**Protocol**</span></span> |<span data-ttu-id="82eb1-281">TCP</span><span class="sxs-lookup"><span data-stu-id="82eb1-281">TCP</span></span>
   |<span data-ttu-id="82eb1-282">**Bağlantı Noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-282">**Port**</span></span> |<span data-ttu-id="82eb1-283">Tüm sanal makinelerde kullanılabilir olması gereken bir kullanılmayan TCP bağlantı noktası.</span><span class="sxs-lookup"><span data-stu-id="82eb1-283">An unused TCP port, which must be available on all virtual machines.</span></span> <span data-ttu-id="82eb1-284">Başka bir amaçla kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="82eb1-284">It cannot be used for any other purpose.</span></span> <span data-ttu-id="82eb1-285">Hiçbir iki dinleyicileri hello kullanabilirsiniz aynı araştırma bağlantı noktası.</span><span class="sxs-lookup"><span data-stu-id="82eb1-285">No two listeners can use hello same probe port.</span></span> 
   |<span data-ttu-id="82eb1-286">**Aralığı**</span><span class="sxs-lookup"><span data-stu-id="82eb1-286">**Interval**</span></span> |<span data-ttu-id="82eb1-287">Merhaba araştırma arasındaki süre miktarı çalışır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-287">hello amount of time between probe attempts.</span></span> <span data-ttu-id="82eb1-288">Merhaba varsayılan (5) kullanın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-288">Use hello default (5).</span></span>
   |<span data-ttu-id="82eb1-289">**Sağlıksız durum eşiği.**</span><span class="sxs-lookup"><span data-stu-id="82eb1-289">**Unhealthy threshold**</span></span> |<span data-ttu-id="82eb1-290">bir sanal makine sağlıksız kabul edilmeden önce başarısız olması ardışık eşikleri Hello sayısı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-290">hello number of consecutive thresholds that should fail before a virtual machine is considered unhealthy.</span></span>

8. <span data-ttu-id="82eb1-291">Tıklatın **Tamam** toosave hello araştırma.</span><span class="sxs-lookup"><span data-stu-id="82eb1-291">Click **OK** toosave hello probe.</span></span> 

9. <span data-ttu-id="82eb1-292">Bir Yük Dengeleme kuralı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="82eb1-292">Create a load balancing rule.</span></span> <span data-ttu-id="82eb1-293">Tıklatın **Yük Dengeleme kuralları**ve ardından **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-293">Click **Load balancing rules**, and then click **Add**.</span></span>

10. <span data-ttu-id="82eb1-294">Merhaba Yeni Yük Dengeleme kuralı ayarları aşağıdaki hello kullanarak yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="82eb1-294">Configure hello new load balancing rule by using hello following settings:</span></span>

   |<span data-ttu-id="82eb1-295">Ayar</span><span class="sxs-lookup"><span data-stu-id="82eb1-295">Setting</span></span> |<span data-ttu-id="82eb1-296">Değer</span><span class="sxs-lookup"><span data-stu-id="82eb1-296">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="82eb1-297">**Ad**</span><span class="sxs-lookup"><span data-stu-id="82eb1-297">**Name**</span></span> |<span data-ttu-id="82eb1-298">Bir ad tooidentify hello Yük Dengeleme kuralı.</span><span class="sxs-lookup"><span data-stu-id="82eb1-298">A name tooidentify hello load balancing rule.</span></span> 
   |<span data-ttu-id="82eb1-299">**Ön uç IP adresi**</span><span class="sxs-lookup"><span data-stu-id="82eb1-299">**Frontend IP address**</span></span> |<span data-ttu-id="82eb1-300">Oluşturduğunuz hello IP adresi seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-300">Select hello IP address you created.</span></span> 
   |<span data-ttu-id="82eb1-301">**Protokol**</span><span class="sxs-lookup"><span data-stu-id="82eb1-301">**Protocol**</span></span> |<span data-ttu-id="82eb1-302">TCP</span><span class="sxs-lookup"><span data-stu-id="82eb1-302">TCP</span></span>
   |<span data-ttu-id="82eb1-303">**Bağlantı Noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-303">**Port**</span></span> |<span data-ttu-id="82eb1-304">Merhaba SQL Server örneklerini kullanarak hello bağlantı noktasını kullanır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-304">Use hello port that hello SQL Server instances are using.</span></span> <span data-ttu-id="82eb1-305">Bunu değiştirmediyse bağlantı noktası 1433 varsayılan bir örnek kullanır.</span><span class="sxs-lookup"><span data-stu-id="82eb1-305">A default instance uses port 1433, unless you changed it.</span></span> 
   |<span data-ttu-id="82eb1-306">**Arka uç bağlantı noktası**</span><span class="sxs-lookup"><span data-stu-id="82eb1-306">**Backend port**</span></span> |<span data-ttu-id="82eb1-307">Aynı değeri olarak kullan hello **bağlantı noktası**.</span><span class="sxs-lookup"><span data-stu-id="82eb1-307">Use hello same value as **Port**.</span></span>
   |<span data-ttu-id="82eb1-308">**Arka uç havuzu**</span><span class="sxs-lookup"><span data-stu-id="82eb1-308">**Backend pool**</span></span> |<span data-ttu-id="82eb1-309">Merhaba sanal makinelerle hello SQL Server örneklerini içeren hello havuzu.</span><span class="sxs-lookup"><span data-stu-id="82eb1-309">hello pool that contains hello virtual machines with hello SQL Server instances.</span></span> 
   |<span data-ttu-id="82eb1-310">**Sistem durumu araştırması**</span><span class="sxs-lookup"><span data-stu-id="82eb1-310">**Health probe**</span></span> |<span data-ttu-id="82eb1-311">Oluşturduğunuz hello araştırma seçin.</span><span class="sxs-lookup"><span data-stu-id="82eb1-311">Choose hello probe you created.</span></span>
   |<span data-ttu-id="82eb1-312">**Oturum kalıcılığı**</span><span class="sxs-lookup"><span data-stu-id="82eb1-312">**Session persistence**</span></span> |<span data-ttu-id="82eb1-313">None</span><span class="sxs-lookup"><span data-stu-id="82eb1-313">None</span></span>
   |<span data-ttu-id="82eb1-314">**Boşta kalma zaman aşımı (dakika)**</span><span class="sxs-lookup"><span data-stu-id="82eb1-314">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="82eb1-315">Varsayılan (4)</span><span class="sxs-lookup"><span data-stu-id="82eb1-315">Default (4)</span></span>
   |<span data-ttu-id="82eb1-316">**Kayan IP (doğrudan sunucu dönüşü)**</span><span class="sxs-lookup"><span data-stu-id="82eb1-316">**Floating IP (direct server return)**</span></span> | <span data-ttu-id="82eb1-317">Etkin</span><span class="sxs-lookup"><span data-stu-id="82eb1-317">Enabled</span></span>

### <a name="configure-hello-availability-group-toouse-hello-new-ip-address"></a><span data-ttu-id="82eb1-318">Merhaba kullanılabilirlik grubu toouse hello yeni IP adresini yapılandırın</span><span class="sxs-lookup"><span data-stu-id="82eb1-318">Configure hello availability group toouse hello new IP address</span></span>

<span data-ttu-id="82eb1-319">Merhaba ilk kullanılabilirlik grubu yapıldığında, uyguladığınız yineleme hello adımları Hello küme yapılandırma toofinish.</span><span class="sxs-lookup"><span data-stu-id="82eb1-319">toofinish configuring hello cluster, repeat hello steps that you followed when you made hello first availability group.</span></span> <span data-ttu-id="82eb1-320">Diğer bir deyişle, hello yapılandırma [küme toouse hello yeni IP adresi](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span><span class="sxs-lookup"><span data-stu-id="82eb1-320">That is, configure hello [cluster toouse hello new IP address](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span></span> 

<span data-ttu-id="82eb1-321">Merhaba dinleyici için bir IP adresi ekledikten sonra hello ek kullanılabilirlik grubu hello aşağıdakileri yaparak yapılandırın:</span><span class="sxs-lookup"><span data-stu-id="82eb1-321">After you have added an IP address for hello listener, configure hello additional availability group by doing hello following:</span></span> 

1. <span data-ttu-id="82eb1-322">Merhaba sonda bağlantı noktası hello yeni IP adresi için hem SQL Server sanal makinelerde açık olduğunu doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-322">Verify that hello probe port for hello new IP address is open on both SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="82eb1-323">[Küme Yöneticisi'nde hello istemci erişim noktası Ekle](#addcap).</span><span class="sxs-lookup"><span data-stu-id="82eb1-323">[In Cluster Manager, add hello client access point](#addcap).</span></span>

3. <span data-ttu-id="82eb1-324">[Merhaba IP kaynağı hello kullanılabilirlik grubu için yapılandırma](#congroup).</span><span class="sxs-lookup"><span data-stu-id="82eb1-324">[Configure hello IP resource for hello availability group](#congroup).</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="82eb1-325">Başlangıç IP adresi oluşturduğunuzda, toohello yük dengeleyici eklenen hello IP adresi kullanın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-325">When you create hello IP address, use hello IP address that you added toohello load balancer.</span></span>  

4. <span data-ttu-id="82eb1-326">[Merhaba SQL Server kullanılabilirlik grubu kaynağının hello istemci erişim noktasında bağımlı hale](#dependencyGroup).</span><span class="sxs-lookup"><span data-stu-id="82eb1-326">[Make hello SQL Server availability group resource dependent on hello client access point](#dependencyGroup).</span></span>

5. <span data-ttu-id="82eb1-327">[Merhaba istemci erişimi olun noktası hello IP adresine bağımlı kaynak](#listname).</span><span class="sxs-lookup"><span data-stu-id="82eb1-327">[Make hello client access point resource dependent on hello IP address](#listname).</span></span>
 
6. <span data-ttu-id="82eb1-328">[PowerShell'de hello küme parametreleri ayarlamak](#setparam).</span><span class="sxs-lookup"><span data-stu-id="82eb1-328">[Set hello cluster parameters in PowerShell](#setparam).</span></span>

<span data-ttu-id="82eb1-329">Merhaba kullanılabilirlik grubu toouse hello yeni IP adresi yapılandırdıktan sonra hello bağlantı toohello dinleyicisi yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="82eb1-329">After you configure hello availability group toouse hello new IP address, configure hello connection toohello listener.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="82eb1-330">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="82eb1-330">Next steps</span></span>

- [<span data-ttu-id="82eb1-331">Farklı bölgelerdeki Azure sanal makinelerde bir SQL Server Always On kullanılabilirlik grubu yapılandırma</span><span class="sxs-lookup"><span data-stu-id="82eb1-331">Configure a SQL Server Always On availability group on Azure virtual machines in different regions</span></span>](virtual-machines-windows-portal-sql-availability-group-dr.md)
