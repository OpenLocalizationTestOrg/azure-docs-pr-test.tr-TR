---
title: "Yüksek kullanılabilirlik ve olağanüstü durum kurtarma için SQL Server | Microsoft Docs"
description: "Azure sanal makinelerinde çalışan SQL Server için HADR stratejileri çeşitli türleri bir tartışma."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 53981f7e-8370-4979-b26a-93a5988d905f
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: mikeray
ms.openlocfilehash: 27d05c1681f7d7b3090fc7abd4a6b15d1c030e2c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="high-availability-and-disaster-recovery-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="a57e5-103">Azure Sanal Makineler’de SQL Server için yüksek kullanılabilirlik ve olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="a57e5-103">High availability and disaster recovery for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="a57e5-104">Microsoft Azure sanal makinelerle (VM'ler) SQL Server yüksek kullanılabilirlik ve olağanüstü durum kurtarma (HADR) veritabanı çözümü maliyetlerini düşürmeye yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-104">Microsoft Azure virtual machines (VMs) with SQL Server can help lower the cost of a high availability and disaster recovery (HADR) database solution.</span></span> <span data-ttu-id="a57e5-105">SQL Server HADR çözümlerinin çoğu hem de yalnızca Azure karma çözüm olarak Azure sanal makinelerde desteklenir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-105">Most SQL Server HADR solutions are supported in Azure virtual machines, both as Azure-only and as hybrid solutions.</span></span> <span data-ttu-id="a57e5-106">Yalnızca Azure bir çözümde tüm HADR sistem Azure üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-106">In an Azure-only solution, the entire HADR system runs in Azure.</span></span> <span data-ttu-id="a57e5-107">Bir karma yapılandırmada, çözümün parçası Azure ve diğer bölümü çalıştırır şirket içi kuruluşunuzdaki çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-107">In a hybrid configuration, part of the solution runs in Azure and the other part runs on-premises in your organization.</span></span> <span data-ttu-id="a57e5-108">Azure ortamı esnekliğini bütçe ve SQL Server veritabanı sistemlerinizi HADR gereksinimlerini karşılamak için Azure'a kısmen veya tamamen taşımanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a57e5-108">The flexibility of the Azure environment enables you to move partially or completely to Azure to satisfy the budget and HADR requirements of your SQL Server database systems.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="understanding-the-need-for-an-hadr-solution"></a><span data-ttu-id="a57e5-109">HADR çözümünü gereksinimini anlama</span><span class="sxs-lookup"><span data-stu-id="a57e5-109">Understanding the need for an HADR solution</span></span>
<span data-ttu-id="a57e5-110">Bu, veritabanı sistem hizmet düzeyi sözleşmesi (SLA) gerektiren HADR özelliklerine sahip olduğunu emin olmak için size bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-110">It is up to you to ensure that your database system possesses the HADR capabilities that the service-level agreement (SLA) requires.</span></span> <span data-ttu-id="a57e5-111">Azure bulut Hizmetleri ve sanal makineler için hata kurtarma algılama için iyileştirme hizmeti gibi yüksek kullanılabilirlik mekanizmaları sağlar olgu kendisi istenen SLA karşılayabilecek garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="a57e5-111">The fact that Azure provides high availability mechanisms, such as service healing for cloud services and failure recovery detection for Virtual Machines, does not itself guarantee you can meet the desired SLA.</span></span> <span data-ttu-id="a57e5-112">Bu mekanizmaların sanal makinelerin yüksek kullanılabilirliğini ancak VM içinde çalışan SQL Server olmayan yüksek kullanılabilirliğini koruyun.</span><span class="sxs-lookup"><span data-stu-id="a57e5-112">These mechanisms protect the high availability of the VMs but not the high availability of SQL Server running inside the VMs.</span></span> <span data-ttu-id="a57e5-113">SQL Server örneği VM çevrimiçi ve iyi durumda olsa da başarısız mümkündür.</span><span class="sxs-lookup"><span data-stu-id="a57e5-113">It is possible for the SQL Server instance to fail while the VM is online and healthy.</span></span> <span data-ttu-id="a57e5-114">Ayrıca, Azure tarafından sağlanan mekanizmaları VM'lerin yazılım veya donanım hataları ve işletim sistemi yükseltmeleri kurtarma gibi olaylar nedeniyle kapalı kalma süresi için izin yüksek kullanılabilirlik bile.</span><span class="sxs-lookup"><span data-stu-id="a57e5-114">Moreover, even the high availability mechanisms provided by Azure allow for downtime of the VMs due to events such as recovery from software or hardware failures and operating system upgrades.</span></span>

<span data-ttu-id="a57e5-115">Ayrıca, coğrafi olarak yedekli depolama (GRS) coğrafi çoğaltma adlı bir özelliği ile uygulanır, Azure bir veritabanınız için yeterli olağanüstü durum kurtarma çözümü olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-115">In addition, Geo Redundant Storage (GRS) in Azure, which is implemented with a feature called geo-replication, may not be an adequate disaster recovery solution for your databases.</span></span> <span data-ttu-id="a57e5-116">Coğrafi çoğaltma veri zaman uyumsuz olarak gönderdiğinden, en son güncelleştirmeleri olağanüstü durumda kaybolmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-116">Because geo-replication sends data asynchronously, recent updates can be lost in the event of disaster.</span></span> <span data-ttu-id="a57e5-117">Coğrafi çoğaltma sınırlamalar hakkında daha fazla bilgi ele alınmıştır [coğrafi çoğaltma veri ve günlük dosyalarını ayrı diskler üzerinde desteklenmiyor](#geo-replication-support) bölümü.</span><span class="sxs-lookup"><span data-stu-id="a57e5-117">More information regarding geo-replication limitations are covered in the [Geo-replication not supported for data and log files on separate disks](#geo-replication-support) section.</span></span>

## <a name="hadr-deployment-architectures"></a><span data-ttu-id="a57e5-118">HADR dağıtım mimarisi</span><span class="sxs-lookup"><span data-stu-id="a57e5-118">HADR deployment architectures</span></span>
<span data-ttu-id="a57e5-119">Azure'da desteklenen SQL Server HADR teknolojileri şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="a57e5-119">SQL Server HADR technologies that are supported in Azure include:</span></span>

* [<span data-ttu-id="a57e5-120">Always On kullanılabilirlik grupları</span><span class="sxs-lookup"><span data-stu-id="a57e5-120">Always On Availability Groups</span></span>](https://technet.microsoft.com/library/hh510230.aspx)
* [<span data-ttu-id="a57e5-121">Her zaman yük devretme kümesi örnekleri</span><span class="sxs-lookup"><span data-stu-id="a57e5-121">Always On Failover Cluster Instances</span></span>](https://technet.microsoft.com/library/ms189134.aspx)
* [<span data-ttu-id="a57e5-122">Günlük aktarma</span><span class="sxs-lookup"><span data-stu-id="a57e5-122">Log Shipping</span></span>](https://technet.microsoft.com/library/ms187103.aspx)
* [<span data-ttu-id="a57e5-123">SQL Server Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti</span><span class="sxs-lookup"><span data-stu-id="a57e5-123">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>](https://msdn.microsoft.com/library/jj919148.aspx)
* <span data-ttu-id="a57e5-124">[Veritabanı yansıtma](https://technet.microsoft.com/library/ms189852.aspx) - SQL Server 2016'de kullanım dışı</span><span class="sxs-lookup"><span data-stu-id="a57e5-124">[Database Mirroring](https://technet.microsoft.com/library/ms189852.aspx) - Deprecated in SQL Server 2016</span></span>

<span data-ttu-id="a57e5-125">Birlikte yüksek kullanılabilirlik ve olağanüstü durum kurtarma özelliklerine sahip bir SQL Server çözümü uygulamak için teknolojileri birleştirmek mümkündür.</span><span class="sxs-lookup"><span data-stu-id="a57e5-125">It is possible to combine the technologies together to implement a SQL Server solution that has both high availability and disaster recovery capabilities.</span></span> <span data-ttu-id="a57e5-126">Kullandığınız teknolojisine bağlı olarak, karma bir dağıtım Azure sanal ağı ile VPN tüneli gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-126">Depending on the technology you use, a hybrid deployment may require a VPN tunnel with the Azure virtual network.</span></span> <span data-ttu-id="a57e5-127">Aşağıdaki bölümler, bazı örnek dağıtım mimarilerinin gösterir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-127">The sections below show you some of the example deployment architectures.</span></span>

## <a name="azure-only-high-availability-solutions"></a><span data-ttu-id="a57e5-128">Yalnızca Azure: yüksek oranda kullanılabilirlik çözümleri</span><span class="sxs-lookup"><span data-stu-id="a57e5-128">Azure-only: High availability solutions</span></span>

<span data-ttu-id="a57e5-129">Always On kullanılabilirlik kullanılabilirlik grupları adı verilen grupları ile-veritabanı düzeyinde SQL Server için yüksek oranda kullanılabilirlik çözümü olabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-129">You can have a high availability solution for SQL Server at a database level with Always On Availability Groups - called availability groups.</span></span> <span data-ttu-id="a57e5-130">Yüksek oranda kullanılabilirlik çözümü bir örnek düzeyinde her zaman üzerinde yük devretme kümesi örnekleri ile - yük devretme kümesi örnekleri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a57e5-130">You can also create a high availability solution at an instance level with Always On Failover Cluster Instances - failover cluster instances.</span></span> <span data-ttu-id="a57e5-131">Ek artıklık için kullanılabilirlik grupları yük devretme kümesi örnekleri oluşturarak iki düzeyde artıklık oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a57e5-131">For additional redundancy, you can create redundancy at both levels by creating availability groups on failover cluster instances.</span></span> 

| <span data-ttu-id="a57e5-132">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="a57e5-132">Technology</span></span> | <span data-ttu-id="a57e5-133">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="a57e5-133">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="a57e5-134">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="a57e5-134">**Availability groups**</span></span> |<span data-ttu-id="a57e5-135">Aynı bölgede Azure vm'lerinde çalışan kullanılabilirlik çoğaltmalarının yüksek kullanılabilirlik sağlar.</span><span class="sxs-lookup"><span data-stu-id="a57e5-135">Availability replicas running in Azure VMs in the same region provide high availability.</span></span> <span data-ttu-id="a57e5-136">Windows Yük Devretme Kümelemesi bir Active Directory etki alanı gerektirdiğinden bir etki alanı denetleyicisi VM yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-136">You need to configure a domain controller VM, because Windows failover clustering requires an Active Directory domain.</span></span><br/> <span data-ttu-id="a57e5-137">![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span><span class="sxs-lookup"><span data-stu-id="a57e5-137">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span></span><br/><span data-ttu-id="a57e5-138">Daha fazla bilgi için bkz: [kullanılabilirlik gruplarını yapılandırma Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-138">For more information, see [Configure Availability Groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span> |
| <span data-ttu-id="a57e5-139">**Yük devretme kümesi örnekleri**</span><span class="sxs-lookup"><span data-stu-id="a57e5-139">**Failover cluster instances**</span></span> |<span data-ttu-id="a57e5-140">Paylaşılan depolama gerektirir, yük devretme kümesi örneği'ne (FCI) 3 farklı yollarla oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-140">Failover Cluster Instances (FCI), which require shared storage, can be created in 3 different ways.</span></span><br/><br/><span data-ttu-id="a57e5-141">1. Bağlı depolama kullanarak Azure Vm'lerde çalıştıran iki düğümlü bir yük devretme [Windows Server 2016 depolama alanları doğrudan \(S2D\) ](virtual-machines-windows-portal-sql-create-failover-cluster.md) için yazılım tabanlı bir sanal SAN sağlayın.</span><span class="sxs-lookup"><span data-stu-id="a57e5-141">1. A two-node failover cluster running in Azure VMs with attached storage using [Windows Server 2016 Storage Spaces Direct \(S2D\)](virtual-machines-windows-portal-sql-create-failover-cluster.md) to provide a software-based virtual SAN.</span></span><br/><br/><span data-ttu-id="a57e5-142">2. Bir üçüncü taraf kümeleme çözümü tarafından desteklenen depolama ile Azure Vm'lerde çalıştıran iki düğümlü yük devretme kümesi.</span><span class="sxs-lookup"><span data-stu-id="a57e5-142">2. A two-node failover cluster running in Azure VMs with storage supported by a third-party clustering solution.</span></span> <span data-ttu-id="a57e5-143">SIOS DataKeeper kullanan bir örnek için bkz: [yüksek kullanılabilirlik için Yük Devretme Kümelemesi ve 3 taraf yazılımları SIOS DataKeeper kullanarak bir dosya paylaşımı](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span><span class="sxs-lookup"><span data-stu-id="a57e5-143">For a specific example that uses SIOS DataKeeper, see [High availability for a file share using failover clustering and 3rd party software SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span></span><br/><br/><span data-ttu-id="a57e5-144">3. Azure Vm'lerinde uzak iSCSI hedef paylaşılan blok depolama ile ExpressRoute aracılığıyla çalıştıran iki düğümlü yük devretme kümesi.</span><span class="sxs-lookup"><span data-stu-id="a57e5-144">3. A two-node failover cluster running in Azure VMs with remote iSCSI Target shared block storage via ExpressRoute.</span></span> <span data-ttu-id="a57e5-145">Örneğin, NetApp özel depolama (NPS), bir iSCSI hedefi Azure vm'lerine Equinix ile ExpressRoute aracılığıyla kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="a57e5-145">For example, NetApp Private Storage (NPS) exposes an iSCSI target via ExpressRoute with Equinix to Azure VMs.</span></span><br/><br/><span data-ttu-id="a57e5-146">Üçüncü taraf paylaşılan depolama alanı ve veri çoğaltma çözümleri için yük devretme verileri erişimle ilgili sorunları satıcısına başvurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-146">For third-party shared storage and data replication solutions, you should contact the vendor for any issues related to accessing data on failover.</span></span><br/><br/><span data-ttu-id="a57e5-147">Bu kullanarak not üstünde FCI [Azure File storage](https://azure.microsoft.com/services/storage/files/) Bu çözüm, Premium depolama alanını değil çünkü henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="a57e5-147">Note that using FCI on top of [Azure File storage](https://azure.microsoft.com/services/storage/files/) is not supported yet, because this solution does not utilize Premium Storage.</span></span> <span data-ttu-id="a57e5-148">Bunu en kısa sürede desteklemek için çalışıyoruz.</span><span class="sxs-lookup"><span data-stu-id="a57e5-148">We are working to support this soon.</span></span> |

## <a name="azure-only-disaster-recovery-solutions"></a><span data-ttu-id="a57e5-149">Yalnızca Azure: olağanüstü durum kurtarma çözümleri</span><span class="sxs-lookup"><span data-stu-id="a57e5-149">Azure-only: Disaster recovery solutions</span></span>
<span data-ttu-id="a57e5-150">Kullanılabilirlik grupları, veritabanı yansıtma veya Yedekleme kullanarak Azure, SQL Server veritabanları için olağanüstü durum kurtarma çözümüne sahip ve depolama BLOB'lar ile geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="a57e5-150">You can have a disaster recovery solution for your SQL Server databases in Azure using availability groups, database mirroring, or backup and restore with storage blobs.</span></span>

| <span data-ttu-id="a57e5-151">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="a57e5-151">Technology</span></span> | <span data-ttu-id="a57e5-152">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="a57e5-152">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="a57e5-153">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="a57e5-153">**Availability Groups**</span></span> |<span data-ttu-id="a57e5-154">Olağanüstü durum kurtarma için Azure VM'de birden çok veri merkezi arasında çalışan kullanılabilirlik çoğaltmalarının.</span><span class="sxs-lookup"><span data-stu-id="a57e5-154">Availability replicas running across multiple datacenters in Azure VMs for disaster recovery.</span></span> <span data-ttu-id="a57e5-155">Bu bölgeler arası çözüm eksiksiz site kesilmesine karşı korur.</span><span class="sxs-lookup"><span data-stu-id="a57e5-155">This cross-region solution protects against complete site outage.</span></span> <br/> <span data-ttu-id="a57e5-156">![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span><span class="sxs-lookup"><span data-stu-id="a57e5-156">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span></span><br/><span data-ttu-id="a57e5-157">Bir bölge içinde tüm çoğaltmaları aynı bulut hizmeti ve aynı sanal ağ içinde olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-157">Within a region, all replicas should be within the same cloud service and the same VNet.</span></span> <span data-ttu-id="a57e5-158">Her bölge ayrı VNet olmanız gerekir, çünkü bu çözümleri VNet VNet bağlantısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-158">Because each region will have a separate VNet, these solutions require VNet to VNet connectivity.</span></span> <span data-ttu-id="a57e5-159">Daha fazla bilgi için bkz: [Azure portalını kullanarak VNet-VNet bağlantı yapılandırma](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-159">For more information, see [Configure a VNet-to-VNet connection using the Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span></span> <span data-ttu-id="a57e5-160">Ayrıntılı yönergeler için bkz: [de farklı bölgelerdeki Azure Virtual Machines'de SQL Server kullanılabilirlik grubu yapılandırma](virtual-machines-windows-portal-sql-availability-group-dr.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-160">For detailed instructions, see [Configure a SQL Server Availability Group on Azure Virtual Machines in Different Regions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span></span>|
| <span data-ttu-id="a57e5-161">**Veritabanı yansıtma**</span><span class="sxs-lookup"><span data-stu-id="a57e5-161">**Database Mirroring**</span></span> |<span data-ttu-id="a57e5-162">Asıl ve yansıtma ve olağanüstü durum kurtarma için farklı veri merkezlerinde çalıştıran sunucular.</span><span class="sxs-lookup"><span data-stu-id="a57e5-162">Principal and mirror and servers running in different datacenters for disaster recovery.</span></span> <span data-ttu-id="a57e5-163">Bir active directory etki alanı birden çok veri merkezi yayılamaz sunucu sertifikaları kullanarak dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-163">You must deploy using server certificates because an active directory domain cannot span multiple datacenters.</span></span><br/>![Veritabanı yansıtma](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_dbmirroring.gif) |
| <span data-ttu-id="a57e5-165">**Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti**</span><span class="sxs-lookup"><span data-stu-id="a57e5-165">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="a57e5-166">Olağanüstü durum kurtarma için farklı bir veri merkezinde blob depolama alanına doğrudan üretim veritabanları yedeklendi.</span><span class="sxs-lookup"><span data-stu-id="a57e5-166">Production databases backed up directly to blob storage in a different datacenter for disaster recovery.</span></span><br/><span data-ttu-id="a57e5-167">![Yedekleme ve Geri Yükleme](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="a57e5-167">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="a57e5-168">Daha fazla bilgi için bkz: [yedekleme ve Azure Virtual Machines'de SQL Server için geri yükleme](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-168">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="hybrid-it-disaster-recovery-solutions"></a><span data-ttu-id="a57e5-169">Karma BT: Olağanüstü durum kurtarma çözümleri</span><span class="sxs-lookup"><span data-stu-id="a57e5-169">Hybrid IT: Disaster recovery solutions</span></span>
<span data-ttu-id="a57e5-170">Kullanılabilirlik grupları, veritabanı yansıtma, günlük aktarma ve Yedekleme kullanarak karma BT ortamında, SQL Server veritabanları için olağanüstü durum kurtarma çözümüne sahip ve Azure blogu depolama ile geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="a57e5-170">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment using availability groups, database mirroring, log shipping, and backup and restore with Azure blog storage.</span></span>

| <span data-ttu-id="a57e5-171">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="a57e5-171">Technology</span></span> | <span data-ttu-id="a57e5-172">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="a57e5-172">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="a57e5-173">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="a57e5-173">**Availability Groups**</span></span> |<span data-ttu-id="a57e5-174">Azure Vm'leri ve şirket içi siteler arası olağanüstü durum kurtarma için çalışan diğer çoğaltmaları çalışan bazı kullanılabilirlik çoğaltmalarının.</span><span class="sxs-lookup"><span data-stu-id="a57e5-174">Some availability replicas running in Azure VMs and other replicas running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="a57e5-175">Üretim sitesini ya da şirket içi olabilir veya bir Azure veri merkezi.</span><span class="sxs-lookup"><span data-stu-id="a57e5-175">The production site can be either on-premises or in an Azure datacenter.</span></span><br/>![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_alwayson.gif)<br/><span data-ttu-id="a57e5-177">Tüm kullanılabilirlik çoğaltmaları aynı yük devretme kümesinde olması gerektiğinden, kümenin her iki ağ (birden çok alt ağ yük devretme kümesi) span gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-177">Because all availability replicas must be in the same failover cluster, the cluster must span both networks (a multi-subnet failover cluster).</span></span> <span data-ttu-id="a57e5-178">Bu yapılandırma, Azure ile şirket içi ağınız arasında bir VPN bağlantısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-178">This configuration requires a VPN connection between Azure and the on-premises network.</span></span><br/><br/><span data-ttu-id="a57e5-179">Veritabanlarınızın başarılı olağanüstü durum kurtarma için olağanüstü durum kurtarma sitesinde bir kopya etki alanı denetleyicisi de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-179">For successful disaster recovery of your databases, you should also install a replica domain controller at the disaster recovery site.</span></span><br/><br/><span data-ttu-id="a57e5-180">Azure bir kopya var olan her zaman üzerinde kullanılabilirlik grubuna eklemek üzere SSMS çoğaltma Ekleme Sihirbazı'nı kullanmak da mümkündür.</span><span class="sxs-lookup"><span data-stu-id="a57e5-180">It is possible to use the Add Replica Wizard in SSMS to add an Azure replica to an existing Always On Availability Group.</span></span> <span data-ttu-id="a57e5-181">Daha fazla bilgi için bkz: Azure için her zaman üzerindeki kullanılabilirlik grubu genişletir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-181">For more information, see Tutorial: Extend your Always On Availability Group to Azure.</span></span> |
| <span data-ttu-id="a57e5-182">**Veritabanı yansıtma**</span><span class="sxs-lookup"><span data-stu-id="a57e5-182">**Database Mirroring**</span></span> |<span data-ttu-id="a57e5-183">Bir Azure VM ve diğer çalışan şirket içi sunucu sertifikaları kullanarak siteler arası olağanüstü durum kurtarma için çalışan bir iş ortağı.</span><span class="sxs-lookup"><span data-stu-id="a57e5-183">One partner running in an Azure VM and the other running on-premises for cross-site disaster recovery using server certificates.</span></span> <span data-ttu-id="a57e5-184">İş ortakları aynı Active Directory etki alanında olması gerekmez ve hiçbir VPN bağlantısı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-184">Partners do not need to be in the same Active Directory domain, and no VPN connection is required.</span></span><br/><span data-ttu-id="a57e5-185">![Veritabanı yansıtma](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span><span class="sxs-lookup"><span data-stu-id="a57e5-185">![Database Mirroring](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span></span><br/><span data-ttu-id="a57e5-186">Başka bir veritabanı yansıtma senaryo, bir Azure VM ve diğer çalışan şirket içi siteler arası olağanüstü durum kurtarma için aynı Active Directory etki alanında çalışan bir iş ortağı içerir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-186">Another database mirroring scenario involves one partner running in an Azure VM and the other running on-premises in the same Active Directory domain for cross-site disaster recovery.</span></span> <span data-ttu-id="a57e5-187">A [Azure sanal ağı ve şirket içi ağ arasında VPN bağlantısı](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) gereklidir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-187">A [VPN connection between the Azure virtual network and the on-premises network](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) is required.</span></span><br/><br/><span data-ttu-id="a57e5-188">Veritabanlarınızın başarılı olağanüstü durum kurtarma için olağanüstü durum kurtarma sitesinde bir kopya etki alanı denetleyicisi de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-188">For successful disaster recovery of your databases, you should also install a replica domain controller at the disaster recovery site.</span></span> |
| <span data-ttu-id="a57e5-189">**Günlük aktarma**</span><span class="sxs-lookup"><span data-stu-id="a57e5-189">**Log Shipping**</span></span> |<span data-ttu-id="a57e5-190">Bir Azure VM ve diğer çalışan şirket içi siteler arası olağanüstü durum kurtarma çalıştıran bir sunucu.</span><span class="sxs-lookup"><span data-stu-id="a57e5-190">One server running in an Azure VM and the other running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="a57e5-191">Azure sanal ağı ve şirket içi ağ arasında bir VPN bağlantısı gerekli sağlayacak şekilde günlük aktarma Windows dosya paylaşımı üzerinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-191">Log shipping depends on Windows file sharing, so a VPN connection between the Azure virtual network and the on-premises network is required.</span></span><br/>![Günlük aktarma](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_log_shipping.gif)<br/><span data-ttu-id="a57e5-193">Veritabanlarınızın başarılı olağanüstü durum kurtarma için olağanüstü durum kurtarma sitesinde bir kopya etki alanı denetleyicisi de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-193">For successful disaster recovery of your databases, you should also install a replica domain controller at the disaster recovery site.</span></span> |
| <span data-ttu-id="a57e5-194">**Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti**</span><span class="sxs-lookup"><span data-stu-id="a57e5-194">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="a57e5-195">Böylece, şirket içi olağanüstü durum kurtarma için Azure blob depolama alanına doğrudan yedeklenen üretim veritabanlarını.</span><span class="sxs-lookup"><span data-stu-id="a57e5-195">On-premises production databases backed up directly to Azure blob storage for disaster recovery.</span></span><br/><span data-ttu-id="a57e5-196">![Yedekleme ve Geri Yükleme](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="a57e5-196">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="a57e5-197">Daha fazla bilgi için bkz: [yedekleme ve Azure Virtual Machines'de SQL Server için geri yükleme](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-197">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="important-considerations-for-sql-server-hadr-in-azure"></a><span data-ttu-id="a57e5-198">Azure SQL Server HADR için önemli noktalar</span><span class="sxs-lookup"><span data-stu-id="a57e5-198">Important considerations for SQL Server HADR in Azure</span></span>
<span data-ttu-id="a57e5-199">Azure VM'ler, depolama ve ağ bir şirket içi BT altyapısı sanallaştırılmamış daha farklı işletimsel özelliklere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-199">Azure VMs, storage, and networking have different operational characteristics than an on-premises, non-virtualized IT infrastructure.</span></span> <span data-ttu-id="a57e5-200">Bir başarılı, Azure HADR SQL Server çözümde bu farkları anlamak ve bunlara uyum sağlaması çözümünüzü tasarlama gerektirir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-200">A successful implementation of a HADR SQL Server solution in Azure requires that you understand these differences and design your solution to accommodate them.</span></span>

### <a name="high-availability-nodes-in-an-availability-set"></a><span data-ttu-id="a57e5-201">Bir kullanılabilirlik kümesinde yüksek kullanılabilirlik düğümler</span><span class="sxs-lookup"><span data-stu-id="a57e5-201">High availability nodes in an availability set</span></span>
<span data-ttu-id="a57e5-202">Azure kullanılabilirlik kümeleri, yüksek kullanılabilirlik düğümleri ayrı hata etki alanlarını (FDs) ve güncelleme etki alanına (UDs) yerleştirmek etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="a57e5-202">Availability sets in Azure enable you to place the high availability nodes into separate Fault Domains (FDs) and Update Domains (UDs).</span></span> <span data-ttu-id="a57e5-203">Azure VM'ler'ın aynı kullanılabilirlik kümesinde yerleştirilmesi bunları aynı bulut hizmetinde dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-203">For Azure VMs to be placed in the same availability set, you must deploy them in the same cloud service.</span></span> <span data-ttu-id="a57e5-204">Yalnızca aynı bulut hizmetindeki düğümleri aynı kullanılabilirlik kümesinde yer alabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-204">Only nodes in the same cloud service can participate in the same availability set.</span></span> <span data-ttu-id="a57e5-205">Daha fazla bilgi için bkz. [Sanal Makinelerin Kullanılabilirliğini Yönetme](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a57e5-205">For more information, see [Manage the Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="failover-cluster-behavior-in-azure-networking"></a><span data-ttu-id="a57e5-206">Azure ağı yük devretme kümesi davranışı</span><span class="sxs-lookup"><span data-stu-id="a57e5-206">Failover cluster behavior in Azure networking</span></span>
<span data-ttu-id="a57e5-207">RFC uyumlu olmayan DHCP hizmeti Azure oluşturma, belirli bir yük devretme küme yapılandırmaları, küme düğümlerinden birinin aynı IP adresi gibi yinelenen bir IP adresi atanmasını küme ağ adı nedeniyle başarısız olmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-207">The non-RFC-compliant DHCP service in Azure can cause the creation of certain failover cluster configurations to fail, due to the cluster network name being assigned a duplicate IP address, such as the same IP address as one of the cluster nodes.</span></span> <span data-ttu-id="a57e5-208">Windows Yük devretme kümesi özelliğini bağlıdır kullanılabilirlik grupları uygularken bu bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="a57e5-208">This is an issue when you implement Availability Groups, which depends on the Windows failover cluster feature.</span></span>

<span data-ttu-id="a57e5-209">İki düğümlü bir küme oluşturduğunuzda ve çevrimiçi duruma senaryoyu göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="a57e5-209">Consider the scenario when a two-node cluster is created and brought online:</span></span>

1. <span data-ttu-id="a57e5-210">Kümeyi çevrimiçi duruma sonra küme ağ adı için dinamik olarak atanmış bir IP adresi Düğüm1 ister.</span><span class="sxs-lookup"><span data-stu-id="a57e5-210">The cluster comes online, then NODE1 requests a dynamically assigned IP address for the cluster network name.</span></span>
2. <span data-ttu-id="a57e5-211">DHCP hizmeti isteği Düğüm1'den gelen tanıdığı DHCP hizmeti tarafından verilen Düğüm1'ın kendi IP adresini dışında hiçbir IP adresi kendisi.</span><span class="sxs-lookup"><span data-stu-id="a57e5-211">No IP address other than NODE1’s own IP address is given by the DHCP service, since the DHCP service recognizes that the request comes from NODE1 itself.</span></span>
3. <span data-ttu-id="a57e5-212">Windows algılar yinelenen bir adresi hem Düğüm1 ve yük devretme küme ağ adı için atanan ve çevrimiçi olması varsayılan küme grubu başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a57e5-212">Windows detects that a duplicate address is assigned both to NODE1 and to the failover cluster network name, and the default cluster group fails to come online.</span></span>
4. <span data-ttu-id="a57e5-213">Varsayılan Küme grubu Düğüm1'ın IP adresi küme IP adresi olarak değerlendirir ve varsayılan küme grubu çevrimiçi duruma getirir Düğüm2 taşır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-213">The default cluster group moves to NODE2, which treats NODE1’s IP address as the cluster IP address and brings the default cluster group online.</span></span>
5. <span data-ttu-id="a57e5-214">Düğüm2 Düğüm1 ile bağlantı kurma girişiminde bulunduğunda Düğüm1'ın IP adresi kendisine çözümlediği çünkü Düğüm1 yönlendirilmiş paketleri hiçbir zaman Düğüm2 bırakın.</span><span class="sxs-lookup"><span data-stu-id="a57e5-214">When NODE2 attempts to establish connectivity with NODE1, packets directed at NODE1 never leave NODE2 because it resolves NODE1’s IP address to itself.</span></span> <span data-ttu-id="a57e5-215">Düğüm2 Düğüm1 ile bağlantı kurulamıyor, daha sonra çekirdek kaybeder ve kümeyi kapatır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-215">NODE2 cannot establish connectivity with NODE1, then loses quorum and shuts down the cluster.</span></span>
6. <span data-ttu-id="a57e5-216">Bu arada, Düğüm1, Düğüm2 için paketleri gönderebilir, ancak Düğüm2 yanıt.</span><span class="sxs-lookup"><span data-stu-id="a57e5-216">In the meantime, NODE1 can send packets to NODE2, but NODE2 cannot reply.</span></span> <span data-ttu-id="a57e5-217">Düğüm1 çekirdek kaybeder ve kümeyi kapatır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-217">NODE1 loses quorum and shuts down the cluster.</span></span>

<span data-ttu-id="a57e5-218">Bu senaryoda, küme ağ adı çevrimiçi duruma getirmek için küme ağ adı için kullanılmayan bir statik IP adresi, bağlantı-yerel IP adresi 169.254.1.1 gibi gibi atayarak önlenebilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-218">This scenario can be avoided by assigning an unused static IP address, such as a link-local IP address like 169.254.1.1, to the cluster network name in order to bring the cluster network name online.</span></span> <span data-ttu-id="a57e5-219">Bu işlemi basitleştirmek için bkz: [yapılandırma Windows Yük devretme kümesinde Azure kullanılabilirlik grupları için](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span><span class="sxs-lookup"><span data-stu-id="a57e5-219">To simplify this process, see [Configuring Windows failover cluster in Azure for availability groups](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span></span>

<span data-ttu-id="a57e5-220">Daha fazla bilgi için bkz: [(GUI) Azure kullanılabilirlik gruplarını yapılandırma](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-220">For more information, see [Configure availability groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span>

### <a name="availability-group-listener-support"></a><span data-ttu-id="a57e5-221">Kullanılabilirlik grubu dinleyicisi desteği</span><span class="sxs-lookup"><span data-stu-id="a57e5-221">Availability group listener support</span></span>
<span data-ttu-id="a57e5-222">Kullanılabilirlik grubu dinleyicileri Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 ve Windows Server 2016 çalışan Azure Vm'lerinde desteklenir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-222">Availability group listeners are supported on Azure VMs running Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, and Windows Server 2016.</span></span> <span data-ttu-id="a57e5-223">Yük dengeli uç noktalarının kullanılabilirlik grubu düğümler Azure Vm'lerinde etkin kullanılarak bu desteği mümkün hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-223">This support is made possible by the use of load-balanced endpoints enabled on the Azure VMs that are availability group nodes.</span></span> <span data-ttu-id="a57e5-224">Azure yanı sıra bu şirket içi çalışan çalışan iki istemci uygulamaları için çalışmaya dinleyiciler için özel yapılandırma adımları gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-224">You must follow special configuration steps for the listeners to work for both client applications that are running in Azure as well as those running on-premises.</span></span>

<span data-ttu-id="a57e5-225">Dinleyiciyi ayarlamak için iki ana seçeneğiniz vardır: dış (Genel) veya dahili.</span><span class="sxs-lookup"><span data-stu-id="a57e5-225">There are two main options for setting up your listener: external (public) or internal.</span></span> <span data-ttu-id="a57e5-226">Dış (Genel) dinleyici internet'e yönelik Yük Dengeleyici kullanır ve ile bir genel sanal IP (Internet üzerinden erişilebilen VIP) ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-226">The external (public) listener uses an internet facing load balancer and is associated with a public Virtual IP (VIP) that is accessible over the internet.</span></span> <span data-ttu-id="a57e5-227">Bir iç dinleyicisi bir iç yük dengeleyici kullanır ve yalnızca aynı sanal ağ içindeki istemcileri destekler.</span><span class="sxs-lookup"><span data-stu-id="a57e5-227">An internal listener uses an internal load balancer and only supports clients within the same Virtual Network.</span></span> <span data-ttu-id="a57e5-228">İçin yük dengeleyici türü, doğrudan sunucu dönüşü etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-228">For either load balancer type, you must enable Direct Server Return.</span></span> 

<span data-ttu-id="a57e5-229">Kullanılabilirlik Grubu (örneğin, Azure bölgeleri kestiği dağıtımı) birden fazla Azure alt yayılırsa, istemci bağlantı dizesi içermelidir "**MultisubnetFailover = True**".</span><span class="sxs-lookup"><span data-stu-id="a57e5-229">If the Availability Group spans multiple Azure subnets (such as a deployment that crosses Azure regions), the client connection string must include "**MultisubnetFailover=True**".</span></span> <span data-ttu-id="a57e5-230">Bu, farklı alt ağlar yinelemelere paralel bağlantı denemelerinde sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-230">This results in parallel connection attempts to the replicas in the different subnets.</span></span> <span data-ttu-id="a57e5-231">Dinleyici ayarlama hakkında yönergeler için bkz:</span><span class="sxs-lookup"><span data-stu-id="a57e5-231">For instructions on setting up a listener, see</span></span>

* <span data-ttu-id="a57e5-232">[Kullanılabilirlik grupları için bir ILB dinleyicisi Azure'da yapılandırın](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-232">[Configure an ILB listener for availability groups in Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span></span>
* <span data-ttu-id="a57e5-233">[Kullanılabilirlik grupları için dış dinleyici Azure'da yapılandırın](../classic/ps-sql-ext-listener.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-233">[Configure an external listener for availability groups in Azure](../classic/ps-sql-ext-listener.md).</span></span>

<span data-ttu-id="a57e5-234">Hizmet örneği için doğrudan bağlanarak her kullanılabilirlik çoğaltması için ayrı ayrı hala bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-234">You can still connect to each availability replica separately by connecting directly to the service instance.</span></span> <span data-ttu-id="a57e5-235">Ayrıca, kullanılabilirlik grupları istemcileri yansıtma veritabanı ile geriye dönük olarak uyumlu olduğundan, veritabanı çoğaltmaları benzer veritabanı yansıtması için yapılandırılmış olduğu sürece ortakları yansıtma gibi kullanılabilirlik çoğaltmalarının bağlanabilir:</span><span class="sxs-lookup"><span data-stu-id="a57e5-235">Also, since availability groups are backward compatible with database mirroring clients, you can connect to the availability replicas like database mirroring partners as long as the replicas are configured similar to database mirroring:</span></span>

* <span data-ttu-id="a57e5-236">Bir birincil çoğaltma ve bir ikincil çoğaltma</span><span class="sxs-lookup"><span data-stu-id="a57e5-236">One primary replica and one secondary replica</span></span>
* <span data-ttu-id="a57e5-237">İkincil çoğaltma olarak okunabilir olmayan yapılandırılır (**okunabilir ikincil** seçeneği ayarlanmış **Hayır**)</span><span class="sxs-lookup"><span data-stu-id="a57e5-237">The secondary replica is configured as non-readable (**Readable Secondary** option set to **No**)</span></span>

<span data-ttu-id="a57e5-238">ADO.NET veya SQL Server Native Client'ı kullanarak bu veritabanı yansıtma benzeri yapılandırması için karşılık gelen bir örnekte istemci bağlantı dizesi aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="a57e5-238">An example client connection string that corresponds to this database mirroring-like configuration using ADO.NET or SQL Server Native Client is below:</span></span>

    Data Source=ReplicaServer1;Failover Partner=ReplicaServer2;Initial Catalog=AvailabilityDatabase;

<span data-ttu-id="a57e5-239">İstemci bağlantısı hakkında daha fazla bilgi için bkz:</span><span class="sxs-lookup"><span data-stu-id="a57e5-239">For more information on client connectivity, see:</span></span>

* [<span data-ttu-id="a57e5-240">SQL Server Native Client ile bağlantı dizesi anahtar sözcükleri kullanma</span><span class="sxs-lookup"><span data-stu-id="a57e5-240">Using Connection String Keywords with SQL Server Native Client</span></span>](https://msdn.microsoft.com/library/ms130822.aspx)
* [<span data-ttu-id="a57e5-241">İstemciler bir veritabanı yansıtma oturumuna (SQL Server) bağlanır</span><span class="sxs-lookup"><span data-stu-id="a57e5-241">Connect Clients to a Database Mirroring Session (SQL Server)</span></span>](https://technet.microsoft.com/library/ms175484.aspx)
* [<span data-ttu-id="a57e5-242">Karma BT'de kullanılabilirlik grubu dinleyicisi bağlanma</span><span class="sxs-lookup"><span data-stu-id="a57e5-242">Connecting to Availability Group Listener in Hybrid IT</span></span>](http://blogs.msdn.com/b/sqlalwayson/archive/2013/02/14/connecting-to-availability-group-listener-in-hybrid-it.aspx)
* [<span data-ttu-id="a57e5-243">Kullanılabilirlik grubu dinleyicileri, istemci bağlantısı ve uygulama yük devretme (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="a57e5-243">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>](https://technet.microsoft.com/library/hh213417.aspx)
* [<span data-ttu-id="a57e5-244">Veritabanı yansıtma bağlantı dizeleri kullanılabilirlik grupları ile kullanma</span><span class="sxs-lookup"><span data-stu-id="a57e5-244">Using Database-Mirroring Connection Strings with Availability Groups</span></span>](https://technet.microsoft.com/library/hh213417.aspx)

### <a name="network-latency-in-hybrid-it"></a><span data-ttu-id="a57e5-245">Karma BT'de ağ gecikmesi</span><span class="sxs-lookup"><span data-stu-id="a57e5-245">Network latency in hybrid IT</span></span>
<span data-ttu-id="a57e5-246">Şirket içi ağınız ve Azure arasında yüksek ağ gecikme süresi ile süreler olabilir varsayım HADR çözümünüzle dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-246">You should deploy your HADR solution with the assumption that there may be periods of time with high network latency between your on-premises network and Azure.</span></span> <span data-ttu-id="a57e5-247">Çoğaltmaları Azure'a dağıtırken, zaman uyumsuz tamamlama için eşitleme modu yerine zaman uyumlu yürütme kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-247">When deploying replicas to Azure, you should use asynchronous commit instead of synchronous commit for the synchronization mode.</span></span> <span data-ttu-id="a57e5-248">Ne zaman veritabanı sunucuları yansıtma dağıtma hem şirket içi ve Azure'da, yüksek performanslı modu yerine yüksek güvenlik modunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="a57e5-248">When deploying database mirroring servers both on-premises and in Azure, use the high-performance mode instead of the high-safety mode.</span></span>

### <a name="geo-replication-support"></a><span data-ttu-id="a57e5-249">Coğrafi çoğaltma desteği</span><span class="sxs-lookup"><span data-stu-id="a57e5-249">Geo-replication support</span></span>
<span data-ttu-id="a57e5-250">Coğrafi çoğaltma Azure disklerde veri dosyası ve günlük dosyası ayrı disklerde depolanması için aynı veritabanının desteklemez.</span><span class="sxs-lookup"><span data-stu-id="a57e5-250">Geo-replication in Azure disks does not support the data file and log file of the same database to be stored on separate disks.</span></span> <span data-ttu-id="a57e5-251">GRS değişiklikleri her diskte bağımsız olarak ve zaman uyumsuz olarak çoğaltır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-251">GRS replicates changes on each disk independently and asynchronously.</span></span> <span data-ttu-id="a57e5-252">Bu mekanizma tek bir disk olarak coğrafi olarak çoğaltılmış kopyalama, ancak olmayan birden çok disk coğrafi olarak çoğaltılmış kopyalarını içinde yazma sırayı garanti altına alır.</span><span class="sxs-lookup"><span data-stu-id="a57e5-252">This mechanism guarantees the write order within a single disk on the geo-replicated copy, but not across geo-replicated copies of multiple disks.</span></span> <span data-ttu-id="a57e5-253">Veri dosyası ve günlük dosyası ayrı disklerde depolamak için bir veritabanı yapılandırırsanız, bir olağanüstü durum sonra kurtarılmış diskleri veri dosyasının daha güncel bir kopyasını SQL Server ve işlemleri ACID özelliklerini yazma tamamlanan günlüğüne keser günlük dosyası daha içerebilir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-253">If you configure a database to store its data file and its log file on separate disks, the recovered disks after a disaster may contain a more up-to-date copy of the data file than the log file, which breaks the write-ahead log in SQL Server and the ACID properties of transactions.</span></span> <span data-ttu-id="a57e5-254">Coğrafi çoğaltma depolama hesabı üzerinde devre dışı bırakma seçeneği yoksa, tüm veri ve günlük dosyalarını verilen bir veritabanı için aynı disk üzerinde tutmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-254">If you do not have the option to disable geo-replication on the storage account, you should keep all data and log files for a given database on the same disk.</span></span> <span data-ttu-id="a57e5-255">Veritabanının boyutu nedeniyle birden fazla disk kullanmanız gerekiyorsa, veri artıklık sağlamak için yukarıda listelenen olağanüstü durum kurtarma çözümlerden birini dağıtmak için gerekir.</span><span class="sxs-lookup"><span data-stu-id="a57e5-255">If you must use more than one disk due to the size of the database, you need to deploy one of the disaster recovery solutions listed above to ensure data redundancy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a57e5-256">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="a57e5-256">Next steps</span></span>
<span data-ttu-id="a57e5-257">SQL Server ile bir Azure sanal makine oluşturmak ihtiyacınız varsa bkz [Azure üzerinde bir SQL Server sanal makine sağlama](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-257">If you need to create an Azure virtual machine with SQL Server, see [Provisioning a SQL Server Virtual Machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="a57e5-258">Bir Azure VM'de çalışan SQL Server'dan en iyi performansı elde etmek kılavuzunda bkz [Azure Virtual Machines'de SQL Server için performans en iyi uygulamaları](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-258">To get the best performance from SQL Server running on an Azure VM, see the guidance in [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="a57e5-259">Azure Vm'lerde SQL Server çalıştırma ile ilgili diğer konular için bkz: [Azure Virtual Machines'de SQL Server](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a57e5-259">For other topics related to running SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

### <a name="other-resources"></a><span data-ttu-id="a57e5-260">Diğer kaynaklar</span><span class="sxs-lookup"><span data-stu-id="a57e5-260">Other resources</span></span>
* [<span data-ttu-id="a57e5-261">Azure'da yeni bir Active Directory ormanı yüklemek</span><span class="sxs-lookup"><span data-stu-id="a57e5-261">Install a new Active Directory forest in Azure</span></span>](../../../active-directory/active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="a57e5-262">Azure VM'de kullanılabilirlik grupları için yük devretme kümesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="a57e5-262">Create Failover Cluster for availability groups in Azure VM</span></span>](http://gallery.technet.microsoft.com/scriptcenter/Create-WSFC-Cluster-for-7c207d3a)

