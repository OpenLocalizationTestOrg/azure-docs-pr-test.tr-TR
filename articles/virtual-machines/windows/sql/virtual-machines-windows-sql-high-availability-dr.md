---
title: "aaaHigh kullanılabilirlik ve olağanüstü durum kurtarma için SQL Server | Microsoft Docs"
description: "Tartışma için Azure sanal makinelerinde çalışan SQL Server için çeşitli türlerde HADR stratejileri hello."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 53981f7e-8370-4979-b26a-93a5988d905f
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: mikeray
ms.openlocfilehash: 2b62d8b30520952ba6b7da7177a2c2de95bea8ce
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="high-availability-and-disaster-recovery-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="e7fac-103">Azure Sanal Makineler’de SQL Server için yüksek kullanılabilirlik ve olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="e7fac-103">High availability and disaster recovery for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="e7fac-104">Microsoft Azure sanal makinelerle (VM'ler) SQL Server yüksek kullanılabilirlik ve olağanüstü durum kurtarma (HADR) veritabanı çözümü daha düşük hello maliyeti yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-104">Microsoft Azure virtual machines (VMs) with SQL Server can help lower hello cost of a high availability and disaster recovery (HADR) database solution.</span></span> <span data-ttu-id="e7fac-105">SQL Server HADR çözümlerinin çoğu hem de yalnızca Azure karma çözüm olarak Azure sanal makinelerde desteklenir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-105">Most SQL Server HADR solutions are supported in Azure virtual machines, both as Azure-only and as hybrid solutions.</span></span> <span data-ttu-id="e7fac-106">Yalnızca Azure bir çözümde hello tüm HADR sistem Azure üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-106">In an Azure-only solution, hello entire HADR system runs in Azure.</span></span> <span data-ttu-id="e7fac-107">Bir karma yapılandırmasında hello çözümün parçası Azure üzerinde çalışır ve diğer bölümü çalıştırır şirket içi kuruluşunuzdaki hello.</span><span class="sxs-lookup"><span data-stu-id="e7fac-107">In a hybrid configuration, part of hello solution runs in Azure and hello other part runs on-premises in your organization.</span></span> <span data-ttu-id="e7fac-108">Merhaba hello Azure ortamı esnekliğini toomove sağlar kısmen veya tamamen sistemleri veritabanı tooAzure toosatisfy hello bütçe ve SQL Server'ın HADR gereksinimleri.</span><span class="sxs-lookup"><span data-stu-id="e7fac-108">hello flexibility of hello Azure environment enables you toomove partially or completely tooAzure toosatisfy hello budget and HADR requirements of your SQL Server database systems.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="understanding-hello-need-for-an-hadr-solution"></a><span data-ttu-id="e7fac-109">HADR çözümünü hello gereksinimini anlama</span><span class="sxs-lookup"><span data-stu-id="e7fac-109">Understanding hello need for an HADR solution</span></span>
<span data-ttu-id="e7fac-110">Bu, tooyou tooensure veritabanı sisteminizdeki hello hizmet düzeyi sözleşmesi (SLA) gerektiren hello HADR yetenekleri sahip olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-110">It is up tooyou tooensure that your database system possesses hello HADR capabilities that hello service-level agreement (SLA) requires.</span></span> <span data-ttu-id="e7fac-111">Azure bulut Hizmetleri ve sanal makineler için hata kurtarma algılama için hizmet onarma gibi yüksek kullanılabilirlik mekanizmaları sağlar hello olgu kendisini istenen hello SLA karşılayabilecek garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="e7fac-111">hello fact that Azure provides high availability mechanisms, such as service healing for cloud services and failure recovery detection for Virtual Machines, does not itself guarantee you can meet hello desired SLA.</span></span> <span data-ttu-id="e7fac-112">Bu mekanizmaların hello VM'ler yüksek kullanılabilirliğini hello ancak değil yüksek kullanılabilirliğini hello VM'ler içinde çalışan SQL Server hello koruyun.</span><span class="sxs-lookup"><span data-stu-id="e7fac-112">These mechanisms protect hello high availability of hello VMs but not hello high availability of SQL Server running inside hello VMs.</span></span> <span data-ttu-id="e7fac-113">Merhaba VM çevrimiçi ve iyi durumda olsa da hello SQL Server örneği toofail için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="e7fac-113">It is possible for hello SQL Server instance toofail while hello VM is online and healthy.</span></span> <span data-ttu-id="e7fac-114">Ayrıca, Azure tarafından sağlanan çift hello yüksek kullanılabilirlik mekanizmaları hello VM'ler kalma süresi için izin yazılım veya donanım hataları ve işletim sistemi yükseltmeleri kurtarma gibi son tooevents.</span><span class="sxs-lookup"><span data-stu-id="e7fac-114">Moreover, even hello high availability mechanisms provided by Azure allow for downtime of hello VMs due tooevents such as recovery from software or hardware failures and operating system upgrades.</span></span>

<span data-ttu-id="e7fac-115">Ayrıca, coğrafi olarak yedekli depolama (GRS) coğrafi çoğaltma adlı bir özelliği ile uygulanır, Azure bir veritabanınız için yeterli olağanüstü durum kurtarma çözümü olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-115">In addition, Geo Redundant Storage (GRS) in Azure, which is implemented with a feature called geo-replication, may not be an adequate disaster recovery solution for your databases.</span></span> <span data-ttu-id="e7fac-116">Coğrafi çoğaltma veri zaman uyumsuz olarak gönderdiğinden, en son güncelleştirmeleri olağanüstü durum hello olayda kaybedilebilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-116">Because geo-replication sends data asynchronously, recent updates can be lost in hello event of disaster.</span></span> <span data-ttu-id="e7fac-117">Coğrafi çoğaltma sınırlamalar hakkında daha fazla bilgi hello ele alınmıştır [coğrafi çoğaltma veri ve günlük dosyalarını ayrı diskler üzerinde desteklenmiyor](#geo-replication-support) bölümü.</span><span class="sxs-lookup"><span data-stu-id="e7fac-117">More information regarding geo-replication limitations are covered in hello [Geo-replication not supported for data and log files on separate disks](#geo-replication-support) section.</span></span>

## <a name="hadr-deployment-architectures"></a><span data-ttu-id="e7fac-118">HADR dağıtım mimarisi</span><span class="sxs-lookup"><span data-stu-id="e7fac-118">HADR deployment architectures</span></span>
<span data-ttu-id="e7fac-119">Azure'da desteklenen SQL Server HADR teknolojileri şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="e7fac-119">SQL Server HADR technologies that are supported in Azure include:</span></span>

* [<span data-ttu-id="e7fac-120">Always On kullanılabilirlik grupları</span><span class="sxs-lookup"><span data-stu-id="e7fac-120">Always On Availability Groups</span></span>](https://technet.microsoft.com/library/hh510230.aspx)
* [<span data-ttu-id="e7fac-121">Her zaman yük devretme kümesi örnekleri</span><span class="sxs-lookup"><span data-stu-id="e7fac-121">Always On Failover Cluster Instances</span></span>](https://technet.microsoft.com/library/ms189134.aspx)
* [<span data-ttu-id="e7fac-122">Günlük aktarma</span><span class="sxs-lookup"><span data-stu-id="e7fac-122">Log Shipping</span></span>](https://technet.microsoft.com/library/ms187103.aspx)
* [<span data-ttu-id="e7fac-123">SQL Server Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti</span><span class="sxs-lookup"><span data-stu-id="e7fac-123">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>](https://msdn.microsoft.com/library/jj919148.aspx)
* <span data-ttu-id="e7fac-124">[Veritabanı yansıtma](https://technet.microsoft.com/library/ms189852.aspx) - SQL Server 2016'de kullanım dışı</span><span class="sxs-lookup"><span data-stu-id="e7fac-124">[Database Mirroring](https://technet.microsoft.com/library/ms189852.aspx) - Deprecated in SQL Server 2016</span></span>

<span data-ttu-id="e7fac-125">Bu, olası toocombine hello teknolojileri birlikte tooimplement yüksek kullanılabilirlik ve olağanüstü durum kurtarma özelliklerine sahip bir SQL Server çözüm olur.</span><span class="sxs-lookup"><span data-stu-id="e7fac-125">It is possible toocombine hello technologies together tooimplement a SQL Server solution that has both high availability and disaster recovery capabilities.</span></span> <span data-ttu-id="e7fac-126">Kullandığınız hello teknolojisine bağlı olarak, karma bir dağıtım hello Azure sanal ağı ile VPN tüneli gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-126">Depending on hello technology you use, a hybrid deployment may require a VPN tunnel with hello Azure virtual network.</span></span> <span data-ttu-id="e7fac-127">Aşağıdaki bölümler Hello hello örnek dağıtım mimarilerinin bazıları gösterir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-127">hello sections below show you some of hello example deployment architectures.</span></span>

## <a name="azure-only-high-availability-solutions"></a><span data-ttu-id="e7fac-128">Yalnızca Azure: yüksek oranda kullanılabilirlik çözümleri</span><span class="sxs-lookup"><span data-stu-id="e7fac-128">Azure-only: High availability solutions</span></span>

<span data-ttu-id="e7fac-129">Always On kullanılabilirlik kullanılabilirlik grupları adı verilen grupları ile-veritabanı düzeyinde SQL Server için yüksek oranda kullanılabilirlik çözümü olabilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-129">You can have a high availability solution for SQL Server at a database level with Always On Availability Groups - called availability groups.</span></span> <span data-ttu-id="e7fac-130">Yüksek oranda kullanılabilirlik çözümü bir örnek düzeyinde her zaman üzerinde yük devretme kümesi örnekleri ile - yük devretme kümesi örnekleri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e7fac-130">You can also create a high availability solution at an instance level with Always On Failover Cluster Instances - failover cluster instances.</span></span> <span data-ttu-id="e7fac-131">Ek artıklık için kullanılabilirlik grupları yük devretme kümesi örnekleri oluşturarak iki düzeyde artıklık oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e7fac-131">For additional redundancy, you can create redundancy at both levels by creating availability groups on failover cluster instances.</span></span> 

| <span data-ttu-id="e7fac-132">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="e7fac-132">Technology</span></span> | <span data-ttu-id="e7fac-133">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="e7fac-133">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="e7fac-134">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="e7fac-134">**Availability groups**</span></span> |<span data-ttu-id="e7fac-135">Azure Vm'lerinde çalışan kullanılabilirlik çoğaltmalarının hello aynı bölge yüksek kullanılabilirlik sağlar.</span><span class="sxs-lookup"><span data-stu-id="e7fac-135">Availability replicas running in Azure VMs in hello same region provide high availability.</span></span> <span data-ttu-id="e7fac-136">Windows Yük Devretme Kümelemesi bir Active Directory etki alanı gerektirdiğinden tooconfigure VM, etki alanı denetleyicisi gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-136">You need tooconfigure a domain controller VM, because Windows failover clustering requires an Active Directory domain.</span></span><br/> <span data-ttu-id="e7fac-137">![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span><span class="sxs-lookup"><span data-stu-id="e7fac-137">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span></span><br/><span data-ttu-id="e7fac-138">Daha fazla bilgi için bkz: [kullanılabilirlik gruplarını yapılandırma Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-138">For more information, see [Configure Availability Groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span> |
| <span data-ttu-id="e7fac-139">**Yük devretme kümesi örnekleri**</span><span class="sxs-lookup"><span data-stu-id="e7fac-139">**Failover cluster instances**</span></span> |<span data-ttu-id="e7fac-140">Paylaşılan depolama gerektirir, yük devretme kümesi örneği'ne (FCI) 3 farklı yollarla oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-140">Failover Cluster Instances (FCI), which require shared storage, can be created in 3 different ways.</span></span><br/><br/><span data-ttu-id="e7fac-141">1. Bağlı depolama kullanarak Azure Vm'lerde çalıştıran iki düğümlü bir yük devretme [Windows Server 2016 depolama alanları doğrudan \(S2D\) ](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide yazılım tabanlı bir sanal SAN.</span><span class="sxs-lookup"><span data-stu-id="e7fac-141">1. A two-node failover cluster running in Azure VMs with attached storage using [Windows Server 2016 Storage Spaces Direct \(S2D\)](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide a software-based virtual SAN.</span></span><br/><br/><span data-ttu-id="e7fac-142">2. Bir üçüncü taraf kümeleme çözümü tarafından desteklenen depolama ile Azure Vm'lerde çalıştıran iki düğümlü yük devretme kümesi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-142">2. A two-node failover cluster running in Azure VMs with storage supported by a third-party clustering solution.</span></span> <span data-ttu-id="e7fac-143">SIOS DataKeeper kullanan bir örnek için bkz: [yüksek kullanılabilirlik için Yük Devretme Kümelemesi ve 3 taraf yazılımları SIOS DataKeeper kullanarak bir dosya paylaşımı](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span><span class="sxs-lookup"><span data-stu-id="e7fac-143">For a specific example that uses SIOS DataKeeper, see [High availability for a file share using failover clustering and 3rd party software SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span></span><br/><br/><span data-ttu-id="e7fac-144">3. Azure Vm'lerinde uzak iSCSI hedef paylaşılan blok depolama ile ExpressRoute aracılığıyla çalıştıran iki düğümlü yük devretme kümesi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-144">3. A two-node failover cluster running in Azure VMs with remote iSCSI Target shared block storage via ExpressRoute.</span></span> <span data-ttu-id="e7fac-145">Örneğin, NetApp özel depolama (NPS), ExpressRoute aracılığıyla iSCSI hedefi Equinix tooAzure VM'ler ile kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="e7fac-145">For example, NetApp Private Storage (NPS) exposes an iSCSI target via ExpressRoute with Equinix tooAzure VMs.</span></span><br/><br/><span data-ttu-id="e7fac-146">Üçüncü taraf paylaşılan depolama alanı ve veri çoğaltma çözümleri için herhangi bir yük devretme sorunları ilgili tooaccessing veri hello satıcısına başvurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-146">For third-party shared storage and data replication solutions, you should contact hello vendor for any issues related tooaccessing data on failover.</span></span><br/><br/><span data-ttu-id="e7fac-147">Bu kullanarak not üstünde FCI [Azure File storage](https://azure.microsoft.com/services/storage/files/) Bu çözüm, Premium depolama alanını değil çünkü henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="e7fac-147">Note that using FCI on top of [Azure File storage](https://azure.microsoft.com/services/storage/files/) is not supported yet, because this solution does not utilize Premium Storage.</span></span> <span data-ttu-id="e7fac-148">Bu yakında toosupport çalışıyoruz.</span><span class="sxs-lookup"><span data-stu-id="e7fac-148">We are working toosupport this soon.</span></span> |

## <a name="azure-only-disaster-recovery-solutions"></a><span data-ttu-id="e7fac-149">Yalnızca Azure: olağanüstü durum kurtarma çözümleri</span><span class="sxs-lookup"><span data-stu-id="e7fac-149">Azure-only: Disaster recovery solutions</span></span>
<span data-ttu-id="e7fac-150">Kullanılabilirlik grupları, veritabanı yansıtma veya Yedekleme kullanarak Azure, SQL Server veritabanları için olağanüstü durum kurtarma çözümüne sahip ve depolama BLOB'lar ile geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="e7fac-150">You can have a disaster recovery solution for your SQL Server databases in Azure using availability groups, database mirroring, or backup and restore with storage blobs.</span></span>

| <span data-ttu-id="e7fac-151">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="e7fac-151">Technology</span></span> | <span data-ttu-id="e7fac-152">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="e7fac-152">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="e7fac-153">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="e7fac-153">**Availability Groups**</span></span> |<span data-ttu-id="e7fac-154">Olağanüstü durum kurtarma için Azure VM'de birden çok veri merkezi arasında çalışan kullanılabilirlik çoğaltmalarının.</span><span class="sxs-lookup"><span data-stu-id="e7fac-154">Availability replicas running across multiple datacenters in Azure VMs for disaster recovery.</span></span> <span data-ttu-id="e7fac-155">Bu bölgeler arası çözüm eksiksiz site kesilmesine karşı korur.</span><span class="sxs-lookup"><span data-stu-id="e7fac-155">This cross-region solution protects against complete site outage.</span></span> <br/> <span data-ttu-id="e7fac-156">![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span><span class="sxs-lookup"><span data-stu-id="e7fac-156">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span></span><br/><span data-ttu-id="e7fac-157">Bir bölge içinde tüm çoğaltmalar Merhaba içinde aynı bulut hizmeti ve aynı sanal ağı hello olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-157">Within a region, all replicas should be within hello same cloud service and hello same VNet.</span></span> <span data-ttu-id="e7fac-158">Her bölge ayrı VNet olmanız gerekir, çünkü bu çözümleri VNet tooVNet bağlantısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-158">Because each region will have a separate VNet, these solutions require VNet tooVNet connectivity.</span></span> <span data-ttu-id="e7fac-159">Daha fazla bilgi için bkz: [hello Azure portal yapılandırma bir VNet-VNet bağlantısı kullanarak](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-159">For more information, see [Configure a VNet-to-VNet connection using hello Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span></span> <span data-ttu-id="e7fac-160">Ayrıntılı yönergeler için bkz: [de farklı bölgelerdeki Azure Virtual Machines'de SQL Server kullanılabilirlik grubu yapılandırma](virtual-machines-windows-portal-sql-availability-group-dr.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-160">For detailed instructions, see [Configure a SQL Server Availability Group on Azure Virtual Machines in Different Regions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span></span>|
| <span data-ttu-id="e7fac-161">**Veritabanı yansıtma**</span><span class="sxs-lookup"><span data-stu-id="e7fac-161">**Database Mirroring**</span></span> |<span data-ttu-id="e7fac-162">Asıl ve yansıtma ve olağanüstü durum kurtarma için farklı veri merkezlerinde çalıştıran sunucular.</span><span class="sxs-lookup"><span data-stu-id="e7fac-162">Principal and mirror and servers running in different datacenters for disaster recovery.</span></span> <span data-ttu-id="e7fac-163">Bir active directory etki alanı birden çok veri merkezi yayılamaz sunucu sertifikaları kullanarak dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-163">You must deploy using server certificates because an active directory domain cannot span multiple datacenters.</span></span><br/>![Veritabanı yansıtma](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_dbmirroring.gif) |
| <span data-ttu-id="e7fac-165">**Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti**</span><span class="sxs-lookup"><span data-stu-id="e7fac-165">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="e7fac-166">Üretim veritabanları doğrudan tooblob depolama olağanüstü durum kurtarma için farklı bir veri merkezinde yedeklendi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-166">Production databases backed up directly tooblob storage in a different datacenter for disaster recovery.</span></span><br/><span data-ttu-id="e7fac-167">![Yedekleme ve Geri Yükleme](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="e7fac-167">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="e7fac-168">Daha fazla bilgi için bkz: [yedekleme ve Azure Virtual Machines'de SQL Server için geri yükleme](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-168">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="hybrid-it-disaster-recovery-solutions"></a><span data-ttu-id="e7fac-169">Karma BT: Olağanüstü durum kurtarma çözümleri</span><span class="sxs-lookup"><span data-stu-id="e7fac-169">Hybrid IT: Disaster recovery solutions</span></span>
<span data-ttu-id="e7fac-170">Kullanılabilirlik grupları, veritabanı yansıtma, günlük aktarma ve Yedekleme kullanarak karma BT ortamında, SQL Server veritabanları için olağanüstü durum kurtarma çözümüne sahip ve Azure blogu depolama ile geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="e7fac-170">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment using availability groups, database mirroring, log shipping, and backup and restore with Azure blog storage.</span></span>

| <span data-ttu-id="e7fac-171">Teknoloji</span><span class="sxs-lookup"><span data-stu-id="e7fac-171">Technology</span></span> | <span data-ttu-id="e7fac-172">Örnek mimarisi</span><span class="sxs-lookup"><span data-stu-id="e7fac-172">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="e7fac-173">**Kullanılabilirlik grupları:**</span><span class="sxs-lookup"><span data-stu-id="e7fac-173">**Availability Groups**</span></span> |<span data-ttu-id="e7fac-174">Azure Vm'leri ve şirket içi siteler arası olağanüstü durum kurtarma için çalışan diğer çoğaltmaları çalışan bazı kullanılabilirlik çoğaltmalarının.</span><span class="sxs-lookup"><span data-stu-id="e7fac-174">Some availability replicas running in Azure VMs and other replicas running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="e7fac-175">Merhaba üretim site ya da şirket içi olabilir veya bir Azure veri merkezi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-175">hello production site can be either on-premises or in an Azure datacenter.</span></span><br/>![Kullanılabilirlik grupları:](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_alwayson.gif)<br/><span data-ttu-id="e7fac-177">Tüm kullanılabilirlik çoğaltmalarının olması gerektiğinden aynı yük devretme kümesi, hello hello küme hem ağları (birden çok alt ağ yük devretme kümesi) yayılmış gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-177">Because all availability replicas must be in hello same failover cluster, hello cluster must span both networks (a multi-subnet failover cluster).</span></span> <span data-ttu-id="e7fac-178">Bu yapılandırma, Azure ve hello şirket içi ağ arasında bir VPN bağlantısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-178">This configuration requires a VPN connection between Azure and hello on-premises network.</span></span><br/><br/><span data-ttu-id="e7fac-179">Veritabanlarınızın başarılı olağanüstü durum kurtarma için bir kopya etki alanı denetleyicisi hello olağanüstü durum kurtarma sitesinde de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-179">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span><br/><br/><span data-ttu-id="e7fac-180">Bu, olası toouse hello Ekle çoğaltma Sihirbazı'nda SSMS tooadd her zaman kullanılabilirlik grubu üzerinde var olan bir Azure çoğaltma tooan olur.</span><span class="sxs-lookup"><span data-stu-id="e7fac-180">It is possible toouse hello Add Replica Wizard in SSMS tooadd an Azure replica tooan existing Always On Availability Group.</span></span> <span data-ttu-id="e7fac-181">Daha fazla bilgi için bkz: her zaman üzerindeki kullanılabilirlik grubu tooAzure genişletir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-181">For more information, see Tutorial: Extend your Always On Availability Group tooAzure.</span></span> |
| <span data-ttu-id="e7fac-182">**Veritabanı yansıtma**</span><span class="sxs-lookup"><span data-stu-id="e7fac-182">**Database Mirroring**</span></span> |<span data-ttu-id="e7fac-183">Bir Azure VM ve hello diğer çalışan bir iş ortağı şirket içi sunucu sertifikaları kullanarak siteler arası olağanüstü durum kurtarma için çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="e7fac-183">One partner running in an Azure VM and hello other running on-premises for cross-site disaster recovery using server certificates.</span></span> <span data-ttu-id="e7fac-184">İş ortakları, toobe gerek yoktur aynı Active Directory etki alanı hello ve hiçbir VPN bağlantısı gereklidir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-184">Partners do not need toobe in hello same Active Directory domain, and no VPN connection is required.</span></span><br/><span data-ttu-id="e7fac-185">![Veritabanı yansıtma](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span><span class="sxs-lookup"><span data-stu-id="e7fac-185">![Database Mirroring](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span></span><br/><span data-ttu-id="e7fac-186">Bir ortak bir Azure VM'de çalıştıran başka bir veritabanı yansıtma senaryo içerir ve hello diğer çalışan hello aynı şirket içi siteler arası olağanüstü durum kurtarma için Active Directory etki alanı.</span><span class="sxs-lookup"><span data-stu-id="e7fac-186">Another database mirroring scenario involves one partner running in an Azure VM and hello other running on-premises in hello same Active Directory domain for cross-site disaster recovery.</span></span> <span data-ttu-id="e7fac-187">A [hello Azure sanal ağ ve hello şirket içi ağ arasında VPN bağlantısı](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) gereklidir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-187">A [VPN connection between hello Azure virtual network and hello on-premises network](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) is required.</span></span><br/><br/><span data-ttu-id="e7fac-188">Veritabanlarınızın başarılı olağanüstü durum kurtarma için bir kopya etki alanı denetleyicisi hello olağanüstü durum kurtarma sitesinde de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-188">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="e7fac-189">**Günlük aktarma**</span><span class="sxs-lookup"><span data-stu-id="e7fac-189">**Log Shipping**</span></span> |<span data-ttu-id="e7fac-190">Bir Azure VM ve hello diğer çalıştıran bir sunucu şirket içi siteler arası olağanüstü durum kurtarma için çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="e7fac-190">One server running in an Azure VM and hello other running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="e7fac-191">Şirket ağı gereklidir hello Azure sanal ağı ve hello arasında bir VPN bağlantısı için Windows dosya paylaşımı, günlük aktarma bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-191">Log shipping depends on Windows file sharing, so a VPN connection between hello Azure virtual network and hello on-premises network is required.</span></span><br/>![Günlük aktarma](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_log_shipping.gif)<br/><span data-ttu-id="e7fac-193">Veritabanlarınızın başarılı olağanüstü durum kurtarma için bir kopya etki alanı denetleyicisi hello olağanüstü durum kurtarma sitesinde de yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-193">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="e7fac-194">**Yedekleme ve geri yükleme ile Azure Blob Depolama Birimi hizmeti**</span><span class="sxs-lookup"><span data-stu-id="e7fac-194">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="e7fac-195">Böylece, şirket içi üretim veritabanları doğrudan olağanüstü durum kurtarma için blob depolama tooAzure yedeklendi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-195">On-premises production databases backed up directly tooAzure blob storage for disaster recovery.</span></span><br/><span data-ttu-id="e7fac-196">![Yedekleme ve Geri Yükleme](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="e7fac-196">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="e7fac-197">Daha fazla bilgi için bkz: [yedekleme ve Azure Virtual Machines'de SQL Server için geri yükleme](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-197">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="important-considerations-for-sql-server-hadr-in-azure"></a><span data-ttu-id="e7fac-198">Azure SQL Server HADR için önemli noktalar</span><span class="sxs-lookup"><span data-stu-id="e7fac-198">Important considerations for SQL Server HADR in Azure</span></span>
<span data-ttu-id="e7fac-199">Azure VM'ler, depolama ve ağ bir şirket içi BT altyapısı sanallaştırılmamış daha farklı işletimsel özelliklere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-199">Azure VMs, storage, and networking have different operational characteristics than an on-premises, non-virtualized IT infrastructure.</span></span> <span data-ttu-id="e7fac-200">Bir başarılı, Azure HADR SQL Server çözümde bu farkları anlamak ve çözüm tooaccommodate tasarlama gerektirir bunları.</span><span class="sxs-lookup"><span data-stu-id="e7fac-200">A successful implementation of a HADR SQL Server solution in Azure requires that you understand these differences and design your solution tooaccommodate them.</span></span>

### <a name="high-availability-nodes-in-an-availability-set"></a><span data-ttu-id="e7fac-201">Bir kullanılabilirlik kümesinde yüksek kullanılabilirlik düğümler</span><span class="sxs-lookup"><span data-stu-id="e7fac-201">High availability nodes in an availability set</span></span>
<span data-ttu-id="e7fac-202">Azure kullanılabilirlik kümeleri tooplace hello yüksek kullanılabilirlik düğümleri, ayrı hata etki alanlarını (FDs) ve güncelleme etki alanına (UDs) etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="e7fac-202">Availability sets in Azure enable you tooplace hello high availability nodes into separate Fault Domains (FDs) and Update Domains (UDs).</span></span> <span data-ttu-id="e7fac-203">Toobe Azure VM'ler için hello aynı yerleştirilen kullanılabilirlik kümesi dağıtmanız gerekir bunları hello aynı bulut hizmeti.</span><span class="sxs-lookup"><span data-stu-id="e7fac-203">For Azure VMs toobe placed in hello same availability set, you must deploy them in hello same cloud service.</span></span> <span data-ttu-id="e7fac-204">Aynı bulut hizmetine katılabilirsiniz hello yalnızca düğümler aynı kullanılabilirlik kümesinde hello.</span><span class="sxs-lookup"><span data-stu-id="e7fac-204">Only nodes in hello same cloud service can participate in hello same availability set.</span></span> <span data-ttu-id="e7fac-205">Daha fazla bilgi için bkz: [Yönet hello sanal makinelerin kullanılabilirliğini](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e7fac-205">For more information, see [Manage hello Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="failover-cluster-behavior-in-azure-networking"></a><span data-ttu-id="e7fac-206">Azure ağı yük devretme kümesi davranışı</span><span class="sxs-lookup"><span data-stu-id="e7fac-206">Failover cluster behavior in Azure networking</span></span>
<span data-ttu-id="e7fac-207">azure'da Hello RFC uyumlu olmayan DHCP hizmet toohello küme ağ adı yinelenen bir IP adresi atanmış olması nedeniyle belirli bir yük devretme küme yapılandırmaları toofail hello oluşturulmasına neden olabilir, hello gibi aynı IP adresi hello küme düğümlerinden biri.</span><span class="sxs-lookup"><span data-stu-id="e7fac-207">hello non-RFC-compliant DHCP service in Azure can cause hello creation of certain failover cluster configurations toofail, due toohello cluster network name being assigned a duplicate IP address, such as hello same IP address as one of hello cluster nodes.</span></span> <span data-ttu-id="e7fac-208">Merhaba Windows Yük devretme kümesi özelliğini bağlıdır kullanılabilirlik grupları uygularken bu bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="e7fac-208">This is an issue when you implement Availability Groups, which depends on hello Windows failover cluster feature.</span></span>

<span data-ttu-id="e7fac-209">İki düğümlü bir küme oluşturduğunuzda ve çevrimiçi duruma hello senaryoyu göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="e7fac-209">Consider hello scenario when a two-node cluster is created and brought online:</span></span>

1. <span data-ttu-id="e7fac-210">Merhaba küme çevrimiçi olduğunu ve ardından Düğüm1 hello küme ağ adı için dinamik olarak atanmış bir IP adresi ister.</span><span class="sxs-lookup"><span data-stu-id="e7fac-210">hello cluster comes online, then NODE1 requests a dynamically assigned IP address for hello cluster network name.</span></span>
2. <span data-ttu-id="e7fac-211">Bu hello istek Düğüm1'den gelen Hello DHCP hizmeti tanıdığı hello DHCP hizmeti tarafından verilen Düğüm1'ın kendi IP adresini dışında hiçbir IP adresi kendisi.</span><span class="sxs-lookup"><span data-stu-id="e7fac-211">No IP address other than NODE1’s own IP address is given by hello DHCP service, since hello DHCP service recognizes that hello request comes from NODE1 itself.</span></span>
3. <span data-ttu-id="e7fac-212">Windows, yinelenen bir adresi tooNODE1 ve toohello yük devretme küme ağ adı atanır ve çevrimiçi toocome hello varsayılan küme grubu başarısız algılar.</span><span class="sxs-lookup"><span data-stu-id="e7fac-212">Windows detects that a duplicate address is assigned both tooNODE1 and toohello failover cluster network name, and hello default cluster group fails toocome online.</span></span>
4. <span data-ttu-id="e7fac-213">Merhaba varsayılan küme grubu Düğüm1'ın IP adresi hello küme IP adresi olarak değerlendirir ve hello varsayılan küme grubu çevrimiçi duruma getirir, tooNODE2 taşır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-213">hello default cluster group moves tooNODE2, which treats NODE1’s IP address as hello cluster IP address and brings hello default cluster group online.</span></span>
5. <span data-ttu-id="e7fac-214">Düğüm2 Düğüm1 tooestablish bağlanabilirlik çalıştığında Düğüm1'ın IP adresi tooitself çözümler çünkü Düğüm1 yönlendirilmiş paketleri hiçbir zaman Düğüm2 bırakın.</span><span class="sxs-lookup"><span data-stu-id="e7fac-214">When NODE2 attempts tooestablish connectivity with NODE1, packets directed at NODE1 never leave NODE2 because it resolves NODE1’s IP address tooitself.</span></span> <span data-ttu-id="e7fac-215">Düğüm2 Düğüm1 ile bağlantı kurulamıyor, daha sonra çekirdek kaybeder ve hello kümeyi kapatır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-215">NODE2 cannot establish connectivity with NODE1, then loses quorum and shuts down hello cluster.</span></span>
6. <span data-ttu-id="e7fac-216">Bu sırada hello, Düğüm1 paketleri tooNODE2 gönderebilir, ancak Düğüm2 yanıt.</span><span class="sxs-lookup"><span data-stu-id="e7fac-216">In hello meantime, NODE1 can send packets tooNODE2, but NODE2 cannot reply.</span></span> <span data-ttu-id="e7fac-217">Düğüm1 çekirdek kaybeder ve hello kümeyi kapatır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-217">NODE1 loses quorum and shuts down hello cluster.</span></span>

<span data-ttu-id="e7fac-218">Bu senaryo, kullanılmayan bir statik IP adresi, bağlantı-yerel IP adresi 169.254.1.1 gibi sipariş toobring hello küme ağ adı çevrimiçi toohello küme ağ adı gibi atayarak önlenebilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-218">This scenario can be avoided by assigning an unused static IP address, such as a link-local IP address like 169.254.1.1, toohello cluster network name in order toobring hello cluster network name online.</span></span> <span data-ttu-id="e7fac-219">toosimplify bu işlem, bkz: [yapılandırma Windows Yük devretme kümesinde Azure kullanılabilirlik grupları için](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span><span class="sxs-lookup"><span data-stu-id="e7fac-219">toosimplify this process, see [Configuring Windows failover cluster in Azure for availability groups](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span></span>

<span data-ttu-id="e7fac-220">Daha fazla bilgi için bkz: [(GUI) Azure kullanılabilirlik gruplarını yapılandırma](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-220">For more information, see [Configure availability groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span>

### <a name="availability-group-listener-support"></a><span data-ttu-id="e7fac-221">Kullanılabilirlik grubu dinleyicisi desteği</span><span class="sxs-lookup"><span data-stu-id="e7fac-221">Availability group listener support</span></span>
<span data-ttu-id="e7fac-222">Kullanılabilirlik grubu dinleyicileri Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 ve Windows Server 2016 çalışan Azure Vm'lerinde desteklenir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-222">Availability group listeners are supported on Azure VMs running Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, and Windows Server 2016.</span></span> <span data-ttu-id="e7fac-223">Yük dengeli uç noktaları hello Azure Vm'lerinde kullanılabilirlik grubu düğümler etkin hello kullanılarak bu desteği mümkün hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-223">This support is made possible by hello use of load-balanced endpoints enabled on hello Azure VMs that are availability group nodes.</span></span> <span data-ttu-id="e7fac-224">Azure yanı sıra bu şirket içi çalışan çalışan iki istemci uygulamaları için hello dinleyicileri toowork için özel yapılandırma adımları gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-224">You must follow special configuration steps for hello listeners toowork for both client applications that are running in Azure as well as those running on-premises.</span></span>

<span data-ttu-id="e7fac-225">Dinleyiciyi ayarlamak için iki ana seçeneğiniz vardır: dış (Genel) veya dahili.</span><span class="sxs-lookup"><span data-stu-id="e7fac-225">There are two main options for setting up your listener: external (public) or internal.</span></span> <span data-ttu-id="e7fac-226">internet'e yönelik Yük Dengeleyici ve ile bir genel sanal IP (üzerinden erişilebilen VIP) ilişkili hello dış (Genel) dinleyici kullandığı Internet hello.</span><span class="sxs-lookup"><span data-stu-id="e7fac-226">hello external (public) listener uses an internet facing load balancer and is associated with a public Virtual IP (VIP) that is accessible over hello internet.</span></span> <span data-ttu-id="e7fac-227">Aynı sanal ağ içinde yalnızca istemcileri destekler hello ve bir iç yük dengeleyici bir iç dinleyicisi kullanır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-227">An internal listener uses an internal load balancer and only supports clients within hello same Virtual Network.</span></span> <span data-ttu-id="e7fac-228">İçin yük dengeleyici türü, doğrudan sunucu dönüşü etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-228">For either load balancer type, you must enable Direct Server Return.</span></span> 

<span data-ttu-id="e7fac-229">Merhaba kullanılabilirlik grubu (örneğin, Azure bölgeleri kestiği dağıtımı) birden fazla Azure alt yayılırsa Merhaba istemci bağlantı dizesi içermelidir "**MultisubnetFailover = True**".</span><span class="sxs-lookup"><span data-stu-id="e7fac-229">If hello Availability Group spans multiple Azure subnets (such as a deployment that crosses Azure regions), hello client connection string must include "**MultisubnetFailover=True**".</span></span> <span data-ttu-id="e7fac-230">Bu, paralel bağlantı denemeleri toohello çoğaltmaları hello farklı alt ağlarda sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-230">This results in parallel connection attempts toohello replicas in hello different subnets.</span></span> <span data-ttu-id="e7fac-231">Dinleyici ayarlama hakkında yönergeler için bkz:</span><span class="sxs-lookup"><span data-stu-id="e7fac-231">For instructions on setting up a listener, see</span></span>

* <span data-ttu-id="e7fac-232">[Kullanılabilirlik grupları için bir ILB dinleyicisi Azure'da yapılandırın](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-232">[Configure an ILB listener for availability groups in Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span></span>
* <span data-ttu-id="e7fac-233">[Kullanılabilirlik grupları için dış dinleyici Azure'da yapılandırın](../classic/ps-sql-ext-listener.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-233">[Configure an external listener for availability groups in Azure](../classic/ps-sql-ext-listener.md).</span></span>

<span data-ttu-id="e7fac-234">Tooeach kullanılabilirlik çoğaltması toohello hizmet örneği doğrudan bağlanarak, ayrı ayrı hala bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-234">You can still connect tooeach availability replica separately by connecting directly toohello service instance.</span></span> <span data-ttu-id="e7fac-235">Ayrıca, kullanılabilirlik grupları istemcileri yansıtma veritabanı ile geriye dönük olarak uyumlu olduğundan, veritabanı hello çoğaltmaları yapılandırılmış olduğu sürece ortakları yansıtma gibi toohello kullanılabilirlik çoğaltmalarının bağlanabilir benzer toodatabase yansıtma:</span><span class="sxs-lookup"><span data-stu-id="e7fac-235">Also, since availability groups are backward compatible with database mirroring clients, you can connect toohello availability replicas like database mirroring partners as long as hello replicas are configured similar toodatabase mirroring:</span></span>

* <span data-ttu-id="e7fac-236">Bir birincil çoğaltma ve bir ikincil çoğaltma</span><span class="sxs-lookup"><span data-stu-id="e7fac-236">One primary replica and one secondary replica</span></span>
* <span data-ttu-id="e7fac-237">Merhaba ikincil çoğaltma olarak okunabilir olmayan yapılandırılır (**okunabilir ikincil** çok Ayarla seçeneğini**Hayır**)</span><span class="sxs-lookup"><span data-stu-id="e7fac-237">hello secondary replica is configured as non-readable (**Readable Secondary** option set too**No**)</span></span>

<span data-ttu-id="e7fac-238">ADO.NET veya SQL Server Native Client kullanarak toothis veritabanı yansıtma benzeri yapılandırması karşılık gelen bir örnekte istemci bağlantı dizesi aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="e7fac-238">An example client connection string that corresponds toothis database mirroring-like configuration using ADO.NET or SQL Server Native Client is below:</span></span>

    Data Source=ReplicaServer1;Failover Partner=ReplicaServer2;Initial Catalog=AvailabilityDatabase;

<span data-ttu-id="e7fac-239">İstemci bağlantısı hakkında daha fazla bilgi için bkz:</span><span class="sxs-lookup"><span data-stu-id="e7fac-239">For more information on client connectivity, see:</span></span>

* [<span data-ttu-id="e7fac-240">SQL Server Native Client ile bağlantı dizesi anahtar sözcükleri kullanma</span><span class="sxs-lookup"><span data-stu-id="e7fac-240">Using Connection String Keywords with SQL Server Native Client</span></span>](https://msdn.microsoft.com/library/ms130822.aspx)
* [<span data-ttu-id="e7fac-241">İstemcileri tooa veritabanı yansıtma oturumu (SQL Server) bağlanma</span><span class="sxs-lookup"><span data-stu-id="e7fac-241">Connect Clients tooa Database Mirroring Session (SQL Server)</span></span>](https://technet.microsoft.com/library/ms175484.aspx)
* [<span data-ttu-id="e7fac-242">Karma BT grubu dinleyicisinde tooAvailability bağlanma</span><span class="sxs-lookup"><span data-stu-id="e7fac-242">Connecting tooAvailability Group Listener in Hybrid IT</span></span>](http://blogs.msdn.com/b/sqlalwayson/archive/2013/02/14/connecting-to-availability-group-listener-in-hybrid-it.aspx)
* [<span data-ttu-id="e7fac-243">Kullanılabilirlik grubu dinleyicileri, istemci bağlantısı ve uygulama yük devretme (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="e7fac-243">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>](https://technet.microsoft.com/library/hh213417.aspx)
* [<span data-ttu-id="e7fac-244">Veritabanı yansıtma bağlantı dizeleri kullanılabilirlik grupları ile kullanma</span><span class="sxs-lookup"><span data-stu-id="e7fac-244">Using Database-Mirroring Connection Strings with Availability Groups</span></span>](https://technet.microsoft.com/library/hh213417.aspx)

### <a name="network-latency-in-hybrid-it"></a><span data-ttu-id="e7fac-245">Karma BT'de ağ gecikmesi</span><span class="sxs-lookup"><span data-stu-id="e7fac-245">Network latency in hybrid IT</span></span>
<span data-ttu-id="e7fac-246">Şirket içi ağınız ve Azure arasında yüksek ağ gecikme süresi ile süreler olabilir hello varsayım HADR çözümünüzle dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-246">You should deploy your HADR solution with hello assumption that there may be periods of time with high network latency between your on-premises network and Azure.</span></span> <span data-ttu-id="e7fac-247">Çoğaltmaları tooAzure dağıtırken, zaman uyumsuz tamamlama yerine zaman uyumlu yürütme hello eşitleme modu için kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-247">When deploying replicas tooAzure, you should use asynchronous commit instead of synchronous commit for hello synchronization mode.</span></span> <span data-ttu-id="e7fac-248">Ne zaman veritabanı yansıtma sunucuları dağıtma hem şirket içi ve Azure'da hello yüksek performanslı modu yerine hello yüksek güvenlik modunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="e7fac-248">When deploying database mirroring servers both on-premises and in Azure, use hello high-performance mode instead of hello high-safety mode.</span></span>

### <a name="geo-replication-support"></a><span data-ttu-id="e7fac-249">Coğrafi çoğaltma desteği</span><span class="sxs-lookup"><span data-stu-id="e7fac-249">Geo-replication support</span></span>
<span data-ttu-id="e7fac-250">Coğrafi çoğaltma Azure disklerde hello veri dosyası ve günlük dosyası aynı veritabanı toobe ayrı disklerinde depolanan hello desteklemez.</span><span class="sxs-lookup"><span data-stu-id="e7fac-250">Geo-replication in Azure disks does not support hello data file and log file of hello same database toobe stored on separate disks.</span></span> <span data-ttu-id="e7fac-251">GRS değişiklikleri her diskte bağımsız olarak ve zaman uyumsuz olarak çoğaltır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-251">GRS replicates changes on each disk independently and asynchronously.</span></span> <span data-ttu-id="e7fac-252">Bu mekanizma tek bir disk olarak hello coğrafi olarak çoğaltılmış kopyalama, ancak olmayan birden çok disk coğrafi olarak çoğaltılmış kopyalarını içinde hello yazma sırayı garanti altına alır.</span><span class="sxs-lookup"><span data-stu-id="e7fac-252">This mechanism guarantees hello write order within a single disk on hello geo-replicated copy, but not across geo-replicated copies of multiple disks.</span></span> <span data-ttu-id="e7fac-253">Bir veritabanı toostore kendi veri dosyası ve günlük dosyası ayrı disklerde yapılandırırsanız, bir olağanüstü durum hello veri dosyasının daha güncel bir kopyasını hangi sonları SQL Server'daki yazma tamamlanan günlük hello ve ACID hello hello günlük dosyası,'den içerebilir sonra hello diskleri kurtarıldı işlem özellikleri.</span><span class="sxs-lookup"><span data-stu-id="e7fac-253">If you configure a database toostore its data file and its log file on separate disks, hello recovered disks after a disaster may contain a more up-to-date copy of hello data file than hello log file, which breaks hello write-ahead log in SQL Server and hello ACID properties of transactions.</span></span> <span data-ttu-id="e7fac-254">Merhaba depolama hesabında hello seçeneği toodisable coğrafi çoğaltma yoksa, tüm verileri tutmalısınız ve günlük dosyaları hello verilen bir veritabanı için aynı disk.</span><span class="sxs-lookup"><span data-stu-id="e7fac-254">If you do not have hello option toodisable geo-replication on hello storage account, you should keep all data and log files for a given database on hello same disk.</span></span> <span data-ttu-id="e7fac-255">Merhaba veritabanının toohello boyutu nedeniyle birden fazla disk kullanmanız gerekiyorsa, tooensure veri artıklığı listelenen hello olağanüstü durum kurtarma çözümleri birinin toodeploy gerekir.</span><span class="sxs-lookup"><span data-stu-id="e7fac-255">If you must use more than one disk due toohello size of hello database, you need toodeploy one of hello disaster recovery solutions listed above tooensure data redundancy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e7fac-256">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="e7fac-256">Next steps</span></span>
<span data-ttu-id="e7fac-257">SQL Server ile bir Azure sanal makinesi toocreate gerekirse bkz [Azure üzerinde bir SQL Server sanal makine sağlama](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-257">If you need toocreate an Azure virtual machine with SQL Server, see [Provisioning a SQL Server Virtual Machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="e7fac-258">tooget hello en iyi performansı bir Azure VM üzerinde çalışan SQL Server hello kılavuzunda bkz [Azure Virtual Machines'de SQL Server için performans en iyi uygulamaları](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-258">tooget hello best performance from SQL Server running on an Azure VM, see hello guidance in [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="e7fac-259">Azure vm'lerinde SQL Server toorunning ilgili diğer konular için bkz: [Azure Virtual Machines'de SQL Server](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e7fac-259">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

### <a name="other-resources"></a><span data-ttu-id="e7fac-260">Diğer kaynaklar</span><span class="sxs-lookup"><span data-stu-id="e7fac-260">Other resources</span></span>
* [<span data-ttu-id="e7fac-261">Azure'da yeni bir Active Directory ormanı yüklemek</span><span class="sxs-lookup"><span data-stu-id="e7fac-261">Install a new Active Directory forest in Azure</span></span>](../../../active-directory/active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="e7fac-262">Azure VM'de kullanılabilirlik grupları için yük devretme kümesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="e7fac-262">Create Failover Cluster for availability groups in Azure VM</span></span>](http://gallery.technet.microsoft.com/scriptcenter/Create-WSFC-Cluster-for-7c207d3a)

