---
title: "Always On kullanılabilirlik grupları için dış dinleyici aaaConfigure | Microsoft Docs"
description: "Bu öğretici yetenekte, harici olarak erişilebilir olan kullanarak azure'da bir her zaman üzerinde kullanılabilirlik grubu dinleyicisi oluşturma adımlarını genel sanal IP adresi hello ilişkili bulut hizmeti hello."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a2453032-94ab-4775-b976-c74d24716728
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/31/2017
ms.author: mikeray
ms.openlocfilehash: f8e2110bcc25d9cb7653675cb4ae5c8d717b6902
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-an-external-listener-for-always-on-availability-groups-in-azure"></a><span data-ttu-id="7c410-103">Always On kullanılabilirlik grupları için dış dinleyici Azure'da yapılandırın</span><span class="sxs-lookup"><span data-stu-id="7c410-103">Configure an external listener for Always On Availability Groups in Azure</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="7c410-104">İç dinleyicisi</span><span class="sxs-lookup"><span data-stu-id="7c410-104">Internal Listener</span></span>](../classic/ps-sql-int-listener.md)
> * [<span data-ttu-id="7c410-105">Dış dinleyici</span><span class="sxs-lookup"><span data-stu-id="7c410-105">External Listener</span></span>](../classic/ps-sql-ext-listener.md)
> 
> 

<span data-ttu-id="7c410-106">Bu konuda gösterilmektedir nasıl tooconfigure bir her zaman üzerinde kullanılabilirlik üzerinde Dışarıdan erişilebilen grubu için bir dinleyici hello Internet.</span><span class="sxs-lookup"><span data-stu-id="7c410-106">This topic shows you how tooconfigure a listener for an Always On Availability Group that is externally accessible on hello internet.</span></span> <span data-ttu-id="7c410-107">Bu hello bulut hizmetin ilişkilendirerek mümkün hale getirilir **ortak sanal IP (VIP)** hello dinleyicisi adresiyle.</span><span class="sxs-lookup"><span data-stu-id="7c410-107">This is made possible by associating hello cloud service's **public Virtual IP (VIP)** address with hello listener.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="7c410-108">Azure oluşturmak ve kaynaklarla çalışmak için iki farklı dağıtım modeli vardır: [Resource Manager ve klasik](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="7c410-108">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="7c410-109">Bu makalede, hello Klasik dağıtım modeli kullanarak yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="7c410-109">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="7c410-110">Microsoft, en yeni dağıtımların hello Resource Manager modelini kullanmasını önerir.</span><span class="sxs-lookup"><span data-stu-id="7c410-110">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span>

<span data-ttu-id="7c410-111">Kullanılabilirlik grubu, şirket içi yalnızca Azure yalnızca çoğaltmaları içermiyor ya da şirket içi ve Azure karma yapılandırmalar için span.</span><span class="sxs-lookup"><span data-stu-id="7c410-111">Your Availability Group can contain replicas that are on-premises only, Azure only, or span both on-premises and Azure for hybrid configurations.</span></span> <span data-ttu-id="7c410-112">Azure çoğaltmaları hello içinde bulunduğu aynı bölge veya birden çok sanal ağlar (Vnet'ler) kullanarak birden çok bölgede.</span><span class="sxs-lookup"><span data-stu-id="7c410-112">Azure replicas can reside within hello same region or across multiple regions using multiple virtual networks (VNets).</span></span> <span data-ttu-id="7c410-113">Merhaba adımları zaten sahip olduğunuzu varsayar [bir kullanılabilirlik grubu yapılandırılmış](../classic/portal-sql-alwayson-availability-groups.md) ancak dinleyici yapılandırılmamış.</span><span class="sxs-lookup"><span data-stu-id="7c410-113">hello steps below assume you have already [configured an availability group](../classic/portal-sql-alwayson-availability-groups.md) but have not configured a listener.</span></span>

## <a name="guidelines-and-limitations-for-external-listeners"></a><span data-ttu-id="7c410-114">Kuralları ve sınırlamaları dış dinleyicileri</span><span class="sxs-lookup"><span data-stu-id="7c410-114">Guidelines and limitations for external listeners</span></span>
<span data-ttu-id="7c410-115">Merhaba bulut hizmeti pubic VIP adresi kullanarak dağıtıyorsanız azure'da hello kullanılabilirlik grubu dinleyicisi hakkında yönergeleri izleyerek hello dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="7c410-115">Note hello following guidelines about hello availability group listener in Azure when you are deploying using hello cloud service pubic VIP address:</span></span>

* <span data-ttu-id="7c410-116">Merhaba kullanılabilirlik grubu dinleyicisi, Windows Server 2008 R2, Windows Server 2012 ve Windows Server 2012 R2 üzerinde desteklenir.</span><span class="sxs-lookup"><span data-stu-id="7c410-116">hello availability group listener is supported on Windows Server 2008 R2, Windows Server 2012, and Windows Server 2012 R2.</span></span>
* <span data-ttu-id="7c410-117">Merhaba istemci uygulaması, kullanılabilirlik grubunuzun VM'ler içeren bir hello daha farklı bir bulut hizmeti bulunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c410-117">hello client application must reside on a different cloud service than hello one that contains your availability group VMs.</span></span> <span data-ttu-id="7c410-118">Bulut hizmeti Azure desteklemiyor doğrudan sunucu dönüşü istemci ve sunucu hello aynı.</span><span class="sxs-lookup"><span data-stu-id="7c410-118">Azure does not support direct server return with client and server in hello same cloud service.</span></span>
* <span data-ttu-id="7c410-119">Varsayılan olarak, bu makaledeki adımları hello nasıl tooconfigure bir dinleyici toouse hello bulut hizmeti sanal IP (VIP) adresi gösterir.</span><span class="sxs-lookup"><span data-stu-id="7c410-119">By default, hello steps in this article show how tooconfigure one listener toouse hello cloud service Virtual IP (VIP) address.</span></span> <span data-ttu-id="7c410-120">Ancak, olası tooreserve olduğu ve bulut hizmetiniz için birden çok VIP adresleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="7c410-120">However, it is possible tooreserve and create multiple VIP addresses for your cloud service.</span></span> <span data-ttu-id="7c410-121">Bu, her birden çok dinleyici farklı bir VIP ile ilişkili Bu makale toocreate toouse hello adımları sağlar.</span><span class="sxs-lookup"><span data-stu-id="7c410-121">This enables you toouse hello steps in this article toocreate multiple listeners that are each associated with a different VIP.</span></span> <span data-ttu-id="7c410-122">Nasıl toocreate birden çok VIP adresini bakın hakkında bilgi için [bulut hizmeti başına birden çok Vip](../../../load-balancer/load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="7c410-122">For information on how toocreate multiple VIP addresses, see [Multiple VIPs per cloud service](../../../load-balancer/load-balancer-multivip.md).</span></span>
* <span data-ttu-id="7c410-123">Karma bir ortamınız için bir dinleyici oluşturuyorsanız hello şirket içi ağ bağlantısı toohello olmalıdır toplama toohello ortak Internet siteden siteye VPN hello Azure sanal ağı ile.</span><span class="sxs-lookup"><span data-stu-id="7c410-123">If you are creating a listener for a hybrid environment, hello on-premises network must have connectivity toohello public Internet in addition toohello site-to-site VPN with hello Azure virtual network.</span></span> <span data-ttu-id="7c410-124">Hello zaman Azure alt ağ, hello kullanılabilirlik grubu dinleyicisi yalnızca hello genel IP adresi hello ilgili bulut hizmeti tarafından erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="7c410-124">When in hello Azure subnet, hello availability group listener is reachable only by hello public IP address of hello respective cloud service.</span></span>
* <span data-ttu-id="7c410-125">Şu desteklenmeyen toocreate aynı bulut hizmetine da olduğu kullanarak bir iç dinleyicisi hello içinde dış dinleyici hello iç yük dengeleyici (ILB).</span><span class="sxs-lookup"><span data-stu-id="7c410-125">It is not supported toocreate an external listener in hello same cloud service where you also have an internal listener using hello Internal Load Balancer (ILB).</span></span>

## <a name="determine-hello-accessibility-of-hello-listener"></a><span data-ttu-id="7c410-126">Merhaba dinleyicisi Hello erişilebilirliğini belirleme</span><span class="sxs-lookup"><span data-stu-id="7c410-126">Determine hello accessibility of hello listener</span></span>
[!INCLUDE [ag-listener-accessibility](../../../../includes/virtual-machines-ag-listener-determine-accessibility.md)]

<span data-ttu-id="7c410-127">Bu makalede kullanan bir dinleyici oluşturmaya odaklıdır **dış Yük Dengeleme**.</span><span class="sxs-lookup"><span data-stu-id="7c410-127">This article focuses on creating a listener that uses **external load balancing**.</span></span> <span data-ttu-id="7c410-128">Özel tooyour sanal ağ bir dinleyici istiyorsanız, bu makalenin ayarlamak için adımları sağlar hello sürümü bakın bir [ILB ile dinleyicisi](../classic/ps-sql-int-listener.md)</span><span class="sxs-lookup"><span data-stu-id="7c410-128">If you want a listener that is private tooyour virtual network, see hello version of this article that provides steps for setting up an [listener with ILB](../classic/ps-sql-int-listener.md)</span></span>

## <a name="create-load-balanced-vm-endpoints-with-direct-server-return"></a><span data-ttu-id="7c410-129">Yük dengeli VM uç noktalar ile doğrudan sunucu dönüş oluşturma</span><span class="sxs-lookup"><span data-stu-id="7c410-129">Create load-balanced VM endpoints with direct server return</span></span>
<span data-ttu-id="7c410-130">Dış Yük Dengeleme, sanal makineleri barındıran hello bulut hizmeti hello sanal hello ortak sanal IP adresini kullanır.</span><span class="sxs-lookup"><span data-stu-id="7c410-130">External load balancing uses hello virtual hello public Virtual IP address of hello cloud service that hosts your VMs.</span></span> <span data-ttu-id="7c410-131">Bu nedenle, değil toocreate gerekir veya hello yük dengeleyici, bu durumda yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="7c410-131">So you do not need toocreate or configure hello load balancer in this case.</span></span>

<span data-ttu-id="7c410-132">Bir Azure çoğaltma barındıran her VM için bir yük dengeli uç noktası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c410-132">You must create a load-balanced endpoint for each VM hosting an Azure replica.</span></span> <span data-ttu-id="7c410-133">Birden çok bölgede çoğaltmalar varsa, her çoğaltma bu bölgede aynı bulut hizmetinde hello olmalıdır hello aynı sanal ağı.</span><span class="sxs-lookup"><span data-stu-id="7c410-133">If you have replicas in multiple regions, each replica for that region must be in hello same cloud service in hello same VNet.</span></span> <span data-ttu-id="7c410-134">Birden fazla Azure bölgesine yayılan kullanılabilirlik grubu oluşturma çoğaltmaları birden çok sanal ağlar yapılandırma gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7c410-134">Creating Availability Group replicas that span multiple Azure regions requires configuring multiple VNets.</span></span> <span data-ttu-id="7c410-135">Çapraz VNet bağlantı yapılandırma hakkında daha fazla bilgi için bkz: [yapılandırma VNet tooVNet bağlantı](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md).</span><span class="sxs-lookup"><span data-stu-id="7c410-135">For more information on configuring cross VNet connectivity, see  [Configure VNet tooVNet Connectivity](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md).</span></span>

1. <span data-ttu-id="7c410-136">Hello Azure portal'de, çoğaltma ve görünüm hello ayrıntıları barındırma VM tooeach gidin.</span><span class="sxs-lookup"><span data-stu-id="7c410-136">In hello Azure portal, navigate tooeach VM hosting a replica and view hello details.</span></span>
2. <span data-ttu-id="7c410-137">Merhaba tıklatın **uç noktaları** hello VM'lerin her birinde sekmesi.</span><span class="sxs-lookup"><span data-stu-id="7c410-137">Click hello **Endpoints** tab for each of hello VMs.</span></span>
3. <span data-ttu-id="7c410-138">Bu hello doğrulayın **adı** ve **genel bağlantı noktası** hello dinleyicisi uç noktasını toouse değil zaten kullanımda olan istediğiniz.</span><span class="sxs-lookup"><span data-stu-id="7c410-138">Verify that hello **Name** and **Public Port** of hello listener endpoint you want toouse is not already in use.</span></span> <span data-ttu-id="7c410-139">Hello aşağıdaki örnekte, "MyEndpoint" Merhaba adıdır ve başlangıç bağlantı noktası "1433" tür.</span><span class="sxs-lookup"><span data-stu-id="7c410-139">In hello example below, hello name is “MyEndpoint” and hello port is “1433”.</span></span>
4. <span data-ttu-id="7c410-140">Yerel istemcide, indirme ve yükleme [hello son PowerShell Modülü](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="7c410-140">On your local client, download and install [hello latest PowerShell module](https://azure.microsoft.com/downloads/).</span></span>
5. <span data-ttu-id="7c410-141">Başlatma **Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="7c410-141">Launch **Azure PowerShell**.</span></span> <span data-ttu-id="7c410-142">Oturumu açılmış yeni bir PowerShell yüklenen Azure yönetim modülleri hello.</span><span class="sxs-lookup"><span data-stu-id="7c410-142">A new PowerShell session is opened with hello Azure administrative modules loaded.</span></span>
6. <span data-ttu-id="7c410-143">Çalıştırma **Get-AzurePublishSettingsFile**.</span><span class="sxs-lookup"><span data-stu-id="7c410-143">Run **Get-AzurePublishSettingsFile**.</span></span> <span data-ttu-id="7c410-144">Bu cmdlet tooa tarayıcı toodownload yayımlama ayarları dosyası tooa yerel bir dizine yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="7c410-144">This cmdlet directs you tooa browser toodownload a publish settings file tooa local directory.</span></span> <span data-ttu-id="7c410-145">Azure aboneliğiniz için oturum açma kimlik bilgileriniz istenebilir.</span><span class="sxs-lookup"><span data-stu-id="7c410-145">You may be prompted for your log-in credentials for your Azure subscription.</span></span>
7. <span data-ttu-id="7c410-146">Merhaba çalıştırmak **Import-AzurePublishSettingsFile** hello hello yolunu komutuyla yayımlama indirdiğiniz ayarları dosyası:</span><span class="sxs-lookup"><span data-stu-id="7c410-146">Run hello **Import-AzurePublishSettingsFile** command with hello path of hello publish settings file that you downloaded:</span></span>
   
        Import-AzurePublishSettingsFile -PublishSettingsFile <PublishSettingsFilePath>
   
    <span data-ttu-id="7c410-147">Merhaba yayımladıktan sonra ayarları dosyası alınır, hello PowerShell oturumunda Azure aboneliğinizi yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c410-147">Once hello publish settings file is imported, you can manage your Azure subscription in hello PowerShell session.</span></span>
    
1. <span data-ttu-id="7c410-148">Aşağıdaki Hello PowerShell komut dosyası bir metin düzenleyicisine kopyalayın ve hello değişken değerleri toosuit (Varsayılanları için bazı parametreler sağlanmış olan) ortamınızı ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="7c410-148">Copy hello PowerShell script below into a text editor and set hello variable values toosuit your environment (defaults have been provided for some parameters).</span></span> <span data-ttu-id="7c410-149">Kullanılabilirlik grubu Azure bölgeleri yayılıyorsa, hello komut dosyası bir kez hello bulut hizmeti ve bu veri merkezinde bulunan düğümler için her bir veri merkezinde çalıştırmanız gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="7c410-149">Note that if your availability group spans Azure regions, you must run hello script once in each datacenter for hello cloud service and nodes that reside in that datacenter.</span></span>
   
        # Define variables
        $ServiceName = "<MyCloudService>" # hello name of hello cloud service that contains hello availability group nodes
        $AGNodes = "<VM1>","<VM2>","<VM3>" # all availability group nodes containing replicas in hello same cloud service, separated by commas
   
        # Configure a load balanced endpoint for each node in $AGNodes, with direct server return enabled
        ForEach ($node in $AGNodes)
        {
            Get-AzureVM -ServiceName $ServiceName -Name $node | Add-AzureEndpoint -Name "ListenerEndpoint" -Protocol "TCP" -PublicPort 1433 -LocalPort 1433 -LBSetName "ListenerEndpointLB" -ProbePort 59999 -ProbeProtocol "TCP" -DirectServerReturn $true | Update-AzureVM
        }

2. <span data-ttu-id="7c410-150">Merhaba değişkenleri ayarladıktan sonra kopyalama hello komut dosyası hello Metin Düzenleyicisi'nden, Azure PowerShell oturumu toorun onu.</span><span class="sxs-lookup"><span data-stu-id="7c410-150">Once you have set hello variables, copy hello script from hello text editor into your Azure PowerShell session toorun it.</span></span> <span data-ttu-id="7c410-151">Merhaba istemi hala gösteriyorsa >>, toomake emin hello komut dosyasını başlatır çalıştıran yeniden girin.</span><span class="sxs-lookup"><span data-stu-id="7c410-151">If hello prompt still shows >>, type ENTER again toomake sure hello script starts running.</span></span>

## <a name="verify-that-kb2854082-is-installed-if-necessary"></a><span data-ttu-id="7c410-152">KB2854082 gerekirse yüklü olduğunu doğrulayın</span><span class="sxs-lookup"><span data-stu-id="7c410-152">Verify that KB2854082 is installed if necessary</span></span>
[!INCLUDE [kb2854082](../../../../includes/virtual-machines-ag-listener-kb2854082.md)]

## <a name="open-hello-firewall-ports-in-availability-group-nodes"></a><span data-ttu-id="7c410-153">Kullanılabilirlik grubu düğümler Hello güvenlik duvarı bağlantı noktalarını açın</span><span class="sxs-lookup"><span data-stu-id="7c410-153">Open hello firewall ports in availability group nodes</span></span>
[!INCLUDE [firewall](../../../../includes/virtual-machines-ag-listener-open-firewall.md)]

## <a name="create-hello-availability-group-listener"></a><span data-ttu-id="7c410-154">Merhaba kullanılabilirlik grubu dinleyicisi oluşturma</span><span class="sxs-lookup"><span data-stu-id="7c410-154">Create hello availability group listener</span></span>

<span data-ttu-id="7c410-155">Merhaba kullanılabilirlik grubu dinleyicisi iki adımda oluşturun.</span><span class="sxs-lookup"><span data-stu-id="7c410-155">Create hello availability group listener in two steps.</span></span> <span data-ttu-id="7c410-156">İlk olarak, hello istemci erişim noktası küme kaynağı oluşturun ve bağımlılıklarını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="7c410-156">First, create hello client access point cluster resource and configure  dependencies.</span></span> <span data-ttu-id="7c410-157">İkinci olarak, PowerShell ile Merhaba küme kaynaklarını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="7c410-157">Second, configure hello cluster resources with PowerShell.</span></span>

### <a name="create-hello-client-access-point-and-configure-hello-cluster-dependencies"></a><span data-ttu-id="7c410-158">Merhaba istemci erişim noktası oluşturun ve hello küme bağımlılıklarını yapılandırın</span><span class="sxs-lookup"><span data-stu-id="7c410-158">Create hello client access point and configure hello cluster dependencies</span></span>
[!INCLUDE [firewall](../../../../includes/virtual-machines-ag-listener-create-listener.md)]

### <a name="configure-hello-cluster-resources-in-powershell"></a><span data-ttu-id="7c410-159">PowerShell'de Hello küme kaynaklarını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="7c410-159">Configure hello cluster resources in PowerShell</span></span>
1. <span data-ttu-id="7c410-160">Dış Yük Dengeleme için hello genel sanal IP adresi çoğaltmalarınızı içeren hello bulut hizmetinde edinmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c410-160">For external load balancing, you must obtain hello public virtual IP address of hello cloud service that contains your replicas.</span></span> <span data-ttu-id="7c410-161">Hello Azure portalında oturum açın.</span><span class="sxs-lookup"><span data-stu-id="7c410-161">Log into hello Azure portal.</span></span> <span data-ttu-id="7c410-162">Kullanılabilirlik grubunuzun VM içeren toohello bulut hizmetine gidin.</span><span class="sxs-lookup"><span data-stu-id="7c410-162">Navigate toohello cloud service that contains your availability group VM.</span></span> <span data-ttu-id="7c410-163">Açık hello **Pano** görünümü.</span><span class="sxs-lookup"><span data-stu-id="7c410-163">Open hello **Dashboard** view.</span></span>
2. <span data-ttu-id="7c410-164">Not altında gösterilen hello adresi **ortak sanal IP (VIP) adresi**.</span><span class="sxs-lookup"><span data-stu-id="7c410-164">Note hello address shown under **Public Virtual IP (VIP) Address**.</span></span> <span data-ttu-id="7c410-165">Çözümünüzü sanal ağlara yayılıyorsa, bir çoğaltma barındıran bir VM içeren her bulut hizmeti için bu adımı yineleyin.</span><span class="sxs-lookup"><span data-stu-id="7c410-165">If your solution spans VNets, repeat this step for each cloud service that contains a VM that hosts a replica.</span></span>
3. <span data-ttu-id="7c410-166">Merhaba VM'ler birinde hello aşağıdaki PowerShell komut dosyası bir metin düzenleyicisine kopyalayın ve daha önce not ettiğiniz toohello değerleri hello değişkenleri ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="7c410-166">On one of hello VMs, copy hello PowerShell script below into a text editor and set hello variables toohello values you noted earlier.</span></span>
   
        # Define variables
        $ClusterNetworkName = "<ClusterNetworkName>" # hello cluster network name (Use Get-ClusterNetwork on Windows Server 2012 of higher toofind hello name)
        $IPResourceName = "<IPResourceName>" # hello IP Address resource name
        $CloudServiceIP = "<X.X.X.X>" # Public Virtual IP (VIP) address of your cloud service
   
        Import-Module FailoverClusters
   
        # If you are using Windows Server 2012 or higher, use hello Get-Cluster Resource command. If you are using Windows Server 2008 R2, use hello cluster res command. Both commands are commented out. Choose hello one applicable tooyour environment and remove hello # at hello beginning of hello line tooconvert hello comment tooan executable line of code.
   
        # Get-ClusterResource $IPResourceName | Set-ClusterParameter -Multiple @{"Address"="$CloudServiceIP";"ProbePort"="59999";"SubnetMask"="255.255.255.255";"Network"="$ClusterNetworkName";"OverrideAddressMatch"=1;"EnableDhcp"=0}
        # cluster res $IPResourceName /priv enabledhcp=0 overrideaddressmatch=1 address=$CloudServiceIP probeport=59999  subnetmask=255.255.255.255
4. <span data-ttu-id="7c410-167">Sonra hello değişkenleri ayarladığınız, yükseltilmiş bir Windows PowerShell penceresi açın sonra hello Metin Düzenleyicisi'nden hello betiği kopyalayın ve, Azure PowerShell oturumu toorun yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="7c410-167">Once you have set hello variables, open an elevated Windows PowerShell window, then copy hello script from hello text editor and paste into your Azure PowerShell session toorun it.</span></span> <span data-ttu-id="7c410-168">Merhaba istemi hala gösteriyorsa >>, toomake emin hello komut dosyasını başlatır çalıştıran yeniden girin.</span><span class="sxs-lookup"><span data-stu-id="7c410-168">If hello prompt still shows >>, type ENTER again toomake sure hello script starts running.</span></span>
5. <span data-ttu-id="7c410-169">Her VM yineleyin.</span><span class="sxs-lookup"><span data-stu-id="7c410-169">Repeat this on each VM.</span></span> <span data-ttu-id="7c410-170">Bu komut dosyası hello bulut hizmetinin başlangıç IP adresi ile başlangıç IP adresi kaynağı yapılandırır ve diğer parametreleri hello sonda bağlantı noktası gibi ayarlar.</span><span class="sxs-lookup"><span data-stu-id="7c410-170">This script configures hello IP Address resource with hello IP address of hello cloud service and sets other parameters like hello probe port.</span></span> <span data-ttu-id="7c410-171">Başlangıç IP adresi kaynağı çevrimiçi duruma getirildiğinde, bu öğreticide daha önce oluşturulan hello yük dengeli uç noktasından hello araştırma noktasında yoklama toohello yanıt verebilir.</span><span class="sxs-lookup"><span data-stu-id="7c410-171">When hello IP Address resource is brought online, it can then respond toohello polling on hello probe port from hello load-balanced endpoint created earlier in this tutorial.</span></span>

## <a name="bring-hello-listener-online"></a><span data-ttu-id="7c410-172">Merhaba dinleyicisi çevrimiçi duruma getirin</span><span class="sxs-lookup"><span data-stu-id="7c410-172">Bring hello listener online</span></span>
[!INCLUDE [Bring-Listener-Online](../../../../includes/virtual-machines-ag-listener-bring-online.md)]

## <a name="follow-up-items"></a><span data-ttu-id="7c410-173">İzleme öğeleri</span><span class="sxs-lookup"><span data-stu-id="7c410-173">Follow-up items</span></span>
[!INCLUDE [Follow-up](../../../../includes/virtual-machines-ag-listener-follow-up.md)]

## <a name="test-hello-availability-group-listener-within-hello-same-vnet"></a><span data-ttu-id="7c410-174">Test hello kullanılabilirlik grubu dinleyicisini (içinde hello aynı VNet)</span><span class="sxs-lookup"><span data-stu-id="7c410-174">Test hello availability group listener (within hello same VNet)</span></span>
[!INCLUDE [Test-Listener-Within-VNET](../../../../includes/virtual-machines-ag-listener-test.md)]

## <a name="test-hello-availability-group-listener-over-hello-internet"></a><span data-ttu-id="7c410-175">Test hello kullanılabilirlik grubu dinleyicisini (üzerinden internet hello)</span><span class="sxs-lookup"><span data-stu-id="7c410-175">Test hello availability group listener (over hello internet)</span></span>
<span data-ttu-id="7c410-176">Sipariş tooaccess hello dinleyicisinde dış hello sanal ağdan, (Bu konuda açıklanan) dış/ortak Yük Dengeleme yalnızca hello içinde erişilebilir olan ILB yerine kullanıyor olmanız gerekir aynı sanal ağı.</span><span class="sxs-lookup"><span data-stu-id="7c410-176">In order tooaccess hello listener from outside hello virtual network, you must be using external/public load balancing (described in this topic) rather than ILB, which is only accesible within hello same VNet.</span></span> <span data-ttu-id="7c410-177">Merhaba bağlantı dizesinde hello bulut hizmeti adı belirtin.</span><span class="sxs-lookup"><span data-stu-id="7c410-177">In hello connection string, you specify hello cloud service name.</span></span> <span data-ttu-id="7c410-178">Örneğin, bir bulut hizmeti ile Merhaba adı olsaydı *mycloudservice*, hello sqlcmd deyimi şu şekilde olacaktır:</span><span class="sxs-lookup"><span data-stu-id="7c410-178">For example, if you had a cloud service with hello name *mycloudservice*, hello sqlcmd statement would be as follows:</span></span>

    sqlcmd -S "mycloudservice.cloudapp.net,<EndpointPort>" -d "<DatabaseName>" -U "<LoginId>" -P "<Password>"  -Q "select @@servername, db_name()" -l 15

<span data-ttu-id="7c410-179">Windows kimlik doğrulaması hello Hello çağıran kullanamadığından hello önceki örneğin aksine, SQL kimlik doğrulaması kullanılmalıdır. Internet.</span><span class="sxs-lookup"><span data-stu-id="7c410-179">Unlike hello previous example, SQL authentication must be used, because hello caller cannot use windows authentication over hello internet.</span></span> <span data-ttu-id="7c410-180">Daha fazla bilgi için bkz: [her zaman üzerindeki kullanılabilirlik grubu Azure VM içinde: istemci bağlantısı senaryoları](http://blogs.msdn.com/b/sqlcat/archive/2014/02/03/alwayson-availability-group-in-windows-azure-vm-client-connectivity-scenarios.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c410-180">For more information, see [Always On Availability Group in Azure VM: Client Connectivity Scenarios](http://blogs.msdn.com/b/sqlcat/archive/2014/02/03/alwayson-availability-group-in-windows-azure-vm-client-connectivity-scenarios.aspx).</span></span> <span data-ttu-id="7c410-181">SQL kimlik doğrulaması kullanırken, hello oluşturduğunuzdan emin olun hem çoğaltmaları aynı oturum açma.</span><span class="sxs-lookup"><span data-stu-id="7c410-181">When using SQL authentication, make sure that you create hello same login on both replicas.</span></span> <span data-ttu-id="7c410-182">Oturumları kullanılabilirlik grupları ile ilgili sorunları giderme hakkında daha fazla bilgi için bkz: [nasıl toomap oturumlar veya kullanım SQL bulunan veritabanı kullanıcı tooconnect tooother çoğaltmaları ve tooavailability veritabanları eşleme](http://blogs.msdn.com/b/alwaysonpro/archive/2014/02/19/how-to-map-logins-or-use-contained-sql-database-user-to-connect-to-other-replicas-and-map-to-availability-databases.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c410-182">For more information about troubleshooting logins with Availability Groups, see [How toomap logins or use contained SQL database user tooconnect tooother replicas and map tooavailability databases](http://blogs.msdn.com/b/alwaysonpro/archive/2014/02/19/how-to-map-logins-or-use-contained-sql-database-user-to-connect-to-other-replicas-and-map-to-availability-databases.aspx).</span></span>

<span data-ttu-id="7c410-183">İstemciler her zaman açık Hello çoğaltmaları farklı alt ağlarda olup olmadığını belirtmeniz **MultisubnetFailover = True** hello bağlantı dizesinde.</span><span class="sxs-lookup"><span data-stu-id="7c410-183">If hello Always On replicas are in different subnets, clients must specify **MultisubnetFailover=True** in hello connection string.</span></span> <span data-ttu-id="7c410-184">Bu, paralel bağlantı denemeleri tooreplicas hello farklı alt ağlarda sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="7c410-184">This results in parallel connection attempts tooreplicas in hello different subnets.</span></span> <span data-ttu-id="7c410-185">Bu senaryo bir çapraz bölge her zaman üzerindeki kullanılabilirlik grubu dağıtımı içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="7c410-185">Note that this scenario includes a cross-region Always On Availability Group deployment.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7c410-186">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="7c410-186">Next steps</span></span>
[!INCLUDE [Listener-Next-Steps](../../../../includes/virtual-machines-ag-listener-next-steps.md)]

