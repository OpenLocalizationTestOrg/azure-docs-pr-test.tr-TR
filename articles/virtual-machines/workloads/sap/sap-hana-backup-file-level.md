---
title: "aaaSAP HANA Azure Backup dosya düzeyinde | Microsoft Docs"
description: "İki ana yedekleme olasılıklarını SAP HANA Azure sanal makinelerde vardır, bu makalede, SAP HANA Azure yedekleme dosya düzeyinde yer almaktadır"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: d5a55de5634ac7724e7fd0fa3760c6c408c3db74
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-azure-backup-on-file-level"></a><span data-ttu-id="3a515-103">Dosya düzeyinde bir SAP HANA Azure yedekleme</span><span class="sxs-lookup"><span data-stu-id="3a515-103">SAP HANA Azure Backup on file level</span></span>

## <a name="introduction"></a><span data-ttu-id="3a515-104">Giriş</span><span class="sxs-lookup"><span data-stu-id="3a515-104">Introduction</span></span>

<span data-ttu-id="3a515-105">Bu üç bölümlük SAP HANA yedeklemede ilgili makaleleri bir parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="3a515-105">This is part of a three-part series of related articles on SAP HANA backup.</span></span> <span data-ttu-id="3a515-106">[SAP HANA için yedekleme Kılavuzu Azure sanal makineler üzerinde](./sap-hana-backup-guide.md) Başlarken, genel bir bakış ve bilgi sağlar ve [tabanlı depolama anlık görüntü SAP HANA yedeklemeyi](./sap-hana-backup-storage-snapshots.md) kapsar hello depolama anlık görüntü tabanlı yedekleme seçeneği.</span><span class="sxs-lookup"><span data-stu-id="3a515-106">[Backup guide for SAP HANA on Azure Virtual Machines](./sap-hana-backup-guide.md) provides an overview and information on getting started, and [SAP HANA backup based on storage snapshots](./sap-hana-backup-storage-snapshots.md) covers hello storage snapshot-based backup option.</span></span>

<span data-ttu-id="3a515-107">Hello Azure VM boyutlarda baktığınızda, biri bir GS5 64 eklenen veri disklerini izin verdiğini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a515-107">Looking at hello Azure VM sizes, one can see that a GS5 allows 64 attached data disks.</span></span> <span data-ttu-id="3a515-108">Büyük SAP HANA sistemler için çok sayıda disk zaten veri ve günlük dosyaları için büyük olasılıkla en iyi disk g/ç işleme için RAID yazılım ile birlikte duruma getirilebilir.</span><span class="sxs-lookup"><span data-stu-id="3a515-108">For large SAP HANA systems, a significant number of disks might already be taken for data and log files, possibly in combination with software RAID for optimal disk IO throughput.</span></span> <span data-ttu-id="3a515-109">ardından Hello soru nerede toostore SAP HANA yedek bağlı hello veri diskleri zamanla doldurabilir dosyaları mı?</span><span class="sxs-lookup"><span data-stu-id="3a515-109">hello question then is where toostore SAP HANA backup files, which could fill up hello attached data disks over time?</span></span> <span data-ttu-id="3a515-110">Bkz: [azure'daki Linux sanal makineler için Boyutlar](../../linux/sizes.md) hello Azure VM boyutu tablolar için.</span><span class="sxs-lookup"><span data-stu-id="3a515-110">See [Sizes for Linux virtual machines in Azure](../../linux/sizes.md) for hello Azure VM size tables.</span></span>

<span data-ttu-id="3a515-111">Şu anda Azure Backup hizmeti ile kullanılabilecek hiçbir SAP HANA yedekleme tümleştirme yoktur.</span><span class="sxs-lookup"><span data-stu-id="3a515-111">There is no SAP HANA backup integration available with Azure Backup service at this time.</span></span> <span data-ttu-id="3a515-112">SAP HANA Studio aracılığıyla veya SAP HANA SQL deyimlerini üzerinden dosya tabanlı Yedekleme durumdayken toomanage yedekleme/geri yükleme hello dosya düzeyinde hello standart yol.</span><span class="sxs-lookup"><span data-stu-id="3a515-112">hello standard way toomanage backup/restore at hello file level is with a file-based backup via SAP HANA Studio or via SAP HANA SQL statements.</span></span> <span data-ttu-id="3a515-113">Bkz: [SAP HANA SQL ve sistem görünümleri başvurusu](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) daha fazla bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3a515-113">See [SAP HANA SQL and System Views Reference](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) for more information.</span></span>

![Bu şekilde hello iletişim hello yedekleme menü öğesinin SAP HANA Studio'da gösterilmektedir.](media/sap-hana-backup-file-level/image022.png)

<span data-ttu-id="3a515-115">Bu şekilde hello iletişim hello yedekleme menü öğesinin SAP HANA Studio'da gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a515-115">This figure shows hello dialog of hello backup menu item in SAP HANA Studio.</span></span> <span data-ttu-id="3a515-116">Türü seçerken &quot;dosyası&quot; varsa toospecify bir yolu hello dosya sisteminde SAP HANA hello yedekleme dosyalarının nerede yazar.</span><span class="sxs-lookup"><span data-stu-id="3a515-116">When choosing type &quot;file,&quot; one has toospecify a path in hello file system where SAP HANA writes hello backup files.</span></span> <span data-ttu-id="3a515-117">Geri yükleme çalışır hello aynı şekilde.</span><span class="sxs-lookup"><span data-stu-id="3a515-117">Restore works hello same way.</span></span>

<span data-ttu-id="3a515-118">Bu seçenek basit ve düz iletme sesleri olsa da, bazı noktalar vardır.</span><span class="sxs-lookup"><span data-stu-id="3a515-118">While this choice sounds simple and straight forward, there are some considerations.</span></span> <span data-ttu-id="3a515-119">Önceden belirtildiği gibi bir Azure VM eklenebilecek veri disklerinin sayısının bir kısıtlaması vardır.</span><span class="sxs-lookup"><span data-stu-id="3a515-119">As mentioned before, an Azure VM has a limitation of number of data disks that can be attached.</span></span> <span data-ttu-id="3a515-120">Kapasite toostore SAP HANA yedekleme dosyalarını yazılım gerektirebilir hello veritabanı ve disk üretilen iş gereksinimlerini hello boyutuna bağlı olarak VM hello hello dosya sistemi olmayabilir arasında birden çok veri diskleri bölümlemesine kullanarak RAID.</span><span class="sxs-lookup"><span data-stu-id="3a515-120">There might not be capacity toostore SAP HANA backup files on hello file systems of hello VM, depending on hello size of hello database and disk throughput requirements, which might involve software RAID using striping across multiple data disks.</span></span> <span data-ttu-id="3a515-121">Bu yedekleme dosyaları ve yönetme dosya boyutu sınırlamaları ve performans verileri terabayt işlerken taşıma için çeşitli seçenekler bu makalenin sonraki bölümlerinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="3a515-121">Various options for moving these backup files, and managing file size restrictions and performance when handling terabytes of data, are provided later in this article.</span></span>

<span data-ttu-id="3a515-122">Toplam Kapasite ilgili daha fazla özgürlük sunar, başka bir seçenek Azure blob depolama olur.</span><span class="sxs-lookup"><span data-stu-id="3a515-122">Another option, which offers more freedom regarding total capacity, is Azure blob storage.</span></span> <span data-ttu-id="3a515-123">Şu anda tek bir blob kısıtlı too1 TB de olsa da, tek blob kapsayıcısının hello toplam kapasite 500 TB'tır.</span><span class="sxs-lookup"><span data-stu-id="3a515-123">While a single blob is also restricted too1 TB, hello total capacity of a single blob container is currently 500 TB.</span></span> <span data-ttu-id="3a515-124">Buna ek olarak, müşteriler hello seçim tooselect sözde verir &quot;cool&quot; blob depolama maliyeti avantajına sahiptir.</span><span class="sxs-lookup"><span data-stu-id="3a515-124">Additionally, it gives customers hello choice tooselect so-called &quot;cool&quot; blob storage, which has a cost benefit.</span></span> <span data-ttu-id="3a515-125">Bkz: [Azure Blob Storage: sık erişimli ve seyrek erişimli depolama katmanları](../../../storage/blobs/storage-blob-storage-tiers.md) cool blob depolama hakkında ayrıntılı bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3a515-125">See [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md) for details about cool blob storage.</span></span>

<span data-ttu-id="3a515-126">Ek güvenlik için coğrafi olarak çoğaltılmış depolama hesabı toostore hello SAP HANA yedeklemeleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="3a515-126">For additional safety, use a geo-replicated storage account toostore hello SAP HANA backups.</span></span> <span data-ttu-id="3a515-127">Bkz: [Azure Storage çoğaltma](../../../storage/common/storage-redundancy.md) depolama hesabı çoğaltma hakkında ayrıntılı bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3a515-127">See [Azure Storage replication](../../../storage/common/storage-redundancy.md) for details about storage account replication.</span></span>

<span data-ttu-id="3a515-128">Bir SAP HANA yedeklemeler için ayrılmış VHD'leri coğrafi olarak çoğaltılmış bir özel yedekleme depolama hesabında yerleştir.</span><span class="sxs-lookup"><span data-stu-id="3a515-128">One could place dedicated VHDs for SAP HANA backups in a dedicated backup storage account that is geo-replicated.</span></span> <span data-ttu-id="3a515-129">Aksi takdirde bir hello SAP HANA yedeklemeleri tooa coğrafi olarak çoğaltılmış depolama hesabını tutmak hello VHD'leri veya farklı bir bölgede tooa depolama hesabı kopyalamak.</span><span class="sxs-lookup"><span data-stu-id="3a515-129">Or else one could copy hello VHDs that keep hello SAP HANA backups tooa geo-replicated storage account, or tooa storage account that is in a different region.</span></span>

## <a name="azure-backup-agent"></a><span data-ttu-id="3a515-130">Azure Yedekleme aracısı</span><span class="sxs-lookup"><span data-stu-id="3a515-130">Azure backup agent</span></span>

<span data-ttu-id="3a515-131">Azure yedekleme sunar hello seçeneği toonot yalnızca geri tam VM'ler, ancak ayrıca dosyaları ve dizinleri toobe hello konuk işletim sistemi yüklü olan hello Yedekleme aracısı üzerinden.</span><span class="sxs-lookup"><span data-stu-id="3a515-131">Azure backup offers hello option toonot only back up complete VMs, but also files and directories via hello backup agent, which has toobe installed on hello guest OS.</span></span> <span data-ttu-id="3a515-132">Ancak aralık 2016 itibariyle, bu aracı yalnızca Windows üzerinde desteklenir (bkz [hello Resource Manager dağıtım modeli kullanılarak geri bir Windows Server ya da istemci tooAzure yukarı](../../../backup/backup-configure-vault.md)).</span><span class="sxs-lookup"><span data-stu-id="3a515-132">But as of December 2016, this agent is only supported on Windows (see [Back up a Windows Server or client tooAzure using hello Resource Manager deployment model](../../../backup/backup-configure-vault.md)).</span></span>

<span data-ttu-id="3a515-133">Geçici bir çözüm toofirst kopyasıdır (örneğin, aracılığıyla SAMBA paylaşım) SAP HANA yedekleme dosyalarını tooa Azure Windows VM ve buradan hello Azure Yedekleme aracısı kullanın.</span><span class="sxs-lookup"><span data-stu-id="3a515-133">A workaround is toofirst copy SAP HANA backup files tooa Windows VM on Azure (for example, via SAMBA share) and then use hello Azure backup agent from there.</span></span> <span data-ttu-id="3a515-134">Teknik olarak mümkün olsa da, karmaşıklık eklemek ve hello yedekleme yavaş veya geri yükleme işlemi bir bit toohello kopyalama hello Linux hello Windows VM arasındaki son.</span><span class="sxs-lookup"><span data-stu-id="3a515-134">While it is technically possible, it would add complexity and slow down hello backup or restore process quite a bit due toohello copy between hello Linux and hello Windows VM.</span></span> <span data-ttu-id="3a515-135">Olmayan toofollow bu yaklaşım önerilir.</span><span class="sxs-lookup"><span data-stu-id="3a515-135">It is not recommended toofollow this approach.</span></span>

## <a name="azure-blobxfer-utility-details"></a><span data-ttu-id="3a515-136">Azure blobxfer yardımcı programı ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="3a515-136">Azure blobxfer utility details</span></span>

<span data-ttu-id="3a515-137">toostore dizin ve dosyaların Azure depolama, bir kullanabilir CLI veya PowerShell hello birini kullanarak bir araç veya geliştirin [Azure SDK'ları](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="3a515-137">toostore directories and files on Azure storage, one could use CLI or PowerShell, or develop a tool using one of hello [Azure SDKs](https://azure.microsoft.com/downloads/).</span></span> <span data-ttu-id="3a515-138">Ayrıca bir kullanıma hazır yardımcı AzCopy, veri tooAzure depolama kopyalamak için ancak Windows ise yalnızca (bkz [hello AzCopy komut satırı yardımcı programı ile veri aktarma](../../../storage/common/storage-use-azcopy.md)).</span><span class="sxs-lookup"><span data-stu-id="3a515-138">There is also a ready-to-use utility, AzCopy, for copying data tooAzure storage, but it is Windows only (see [Transfer data with hello AzCopy Command-Line Utility](../../../storage/common/storage-use-azcopy.md)).</span></span>

<span data-ttu-id="3a515-139">Bu nedenle blobxfer SAP HANA yedekleme dosyalarını kopyalamak için kullanıldı.</span><span class="sxs-lookup"><span data-stu-id="3a515-139">Therefore blobxfer was used for copying SAP HANA backup files.</span></span> <span data-ttu-id="3a515-140">Açık kaynak, üretim ortamlarında birçok müşteri tarafından kullanılan ve kullanılabilir olan [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="3a515-140">It is open source, used by many customers in production environments, and available on [GitHub](https://github.com/Azure/blobxfer).</span></span> <span data-ttu-id="3a515-141">Bu araç, tooeither Azure blob depolama veya Azure dosya paylaşımına doğrudan bir toocopy veri sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a515-141">This tool allows one toocopy data directly tooeither Azure blob storage or Azure file share.</span></span> <span data-ttu-id="3a515-142">Ayrıca, çeşitli md5 karma değeri veya bir dizin ile birden çok dosya kopyalarken otomatik paralellik gibi kullanışlı özellikler sunar.</span><span class="sxs-lookup"><span data-stu-id="3a515-142">It also offers a range of useful features, like md5 hash or automatic parallelism when copying a directory with multiple files.</span></span>

## <a name="sap-hana-backup-performance"></a><span data-ttu-id="3a515-143">SAP HANA yedekleme performansı</span><span class="sxs-lookup"><span data-stu-id="3a515-143">SAP HANA backup performance</span></span>

![Bu ekran hello SAP HANA yedekleme konsolunda SAP HANA Studio değil](media/sap-hana-backup-file-level/image023.png)

<span data-ttu-id="3a515-145">SAP HANA Studio'da hello SAP HANA yedekleme konsolunun bu ekran görüntüsüdür.</span><span class="sxs-lookup"><span data-stu-id="3a515-145">This screenshot is of hello SAP HANA backup console in SAP HANA Studio.</span></span> <span data-ttu-id="3a515-146">Yaklaşık 42 dakika toodo hello yedekleme sürdü Merhaba tek bir Azure standart depolama diskteki 230 GB toohello HANA VM ekli XFS dosya sistemini kullanma.</span><span class="sxs-lookup"><span data-stu-id="3a515-146">It took about 42 minutes toodo hello backup of hello 230 GB on a single Azure standard storage disk attached toohello HANA VM using XFS file system.</span></span>

![Bu ekran YaST hello SAP HANA üzerinde VM sınamasıdır](media/sap-hana-backup-file-level/image024.png)

<span data-ttu-id="3a515-148">Bu ekran YaST hello SAP HANA test VM üzerinde ' dir.</span><span class="sxs-lookup"><span data-stu-id="3a515-148">This screenshot is of YaST on hello SAP HANA test VM.</span></span> <span data-ttu-id="3a515-149">Önceden belirtildiği gibi bir SAP HANA yedekleme için 1 TB'lik tek disk hello görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a515-149">One can see hello 1-TB single disk for SAP HANA backup as mentioned before.</span></span> <span data-ttu-id="3a515-150">Yaklaşık 42 dakika toobackup sürdü 230 GB.</span><span class="sxs-lookup"><span data-stu-id="3a515-150">It took about 42 minutes toobackup 230 GB.</span></span> <span data-ttu-id="3a515-151">Ayrıca, beş 200 GB disk eklenmedi ve bu beş Azure veri diskleri üstünde şeritleme ile yazılım RAID md0 oluşturulmuş.</span><span class="sxs-lookup"><span data-stu-id="3a515-151">In addition, five 200-GB disks were attached and software RAID md0 created, with striping on top of these five Azure data disks.</span></span>

![Aynı yazılım RAID şeritleme ile beş arasında yedekleme hello yinelenen Azure standart depolama veri diskleri bağlı](media/sap-hana-backup-file-level/image025.png)

<span data-ttu-id="3a515-153">Aynı yazılım RAID şeritleme ile beş arasında yedekleme yinelenen hello Azure standart depolama veri diskleri duruma hello yedekleme süresini too10 dakika aşağı 42 dakika bağlı.</span><span class="sxs-lookup"><span data-stu-id="3a515-153">Repeating hello same backup on software RAID with striping across five attached Azure standard storage data disks brought hello backup time from 42 minutes down too10 minutes.</span></span> <span data-ttu-id="3a515-154">Merhaba diskleri toohello VM önbelleğe alma olmadan eklenmedi.</span><span class="sxs-lookup"><span data-stu-id="3a515-154">hello disks were attached without caching toohello VM.</span></span> <span data-ttu-id="3a515-155">Dolayısıyla belirgin ne kadar önemli disk yazma üretimi hello yedekleme zamanı taşır.</span><span class="sxs-lookup"><span data-stu-id="3a515-155">So it is obvious how important disk write throughput is for hello backup time.</span></span> <span data-ttu-id="3a515-156">Bir anahtar tooAzure premium depolama toofurther hızlandırmak sonra en iyi performans için hello işlemi başlatılamadı.</span><span class="sxs-lookup"><span data-stu-id="3a515-156">One could then switch tooAzure premium storage toofurther accelerate hello process for optimal performance.</span></span> <span data-ttu-id="3a515-157">Genel olarak, Azure premium storage üretim sistemleri için kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="3a515-157">In general, Azure premium storage should be used for production systems.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-blob-storage"></a><span data-ttu-id="3a515-158">SAP HANA yedekleme dosyalarını tooAzure blob depolama kopyalama</span><span class="sxs-lookup"><span data-stu-id="3a515-158">Copy SAP HANA backup files tooAzure blob storage</span></span>

<span data-ttu-id="3a515-159">Aralık 2016 en iyi şekilde hello gibi seçeneği tooquickly deposu SAP HANA yedekleme dosyalarını Azure blob depolama grubudur.</span><span class="sxs-lookup"><span data-stu-id="3a515-159">As of December 2016, hello best option tooquickly store SAP HANA backup files is Azure blob storage.</span></span> <span data-ttu-id="3a515-160">Tek tek blob kapsayıcısı yeterli GS5 VM ile tookeep yeterli SAP HANA yedeklemeler Azure üzerinde çalışan çoğu SAP HANA sistemler için 500 TB'lık bir sınırı vardır.</span><span class="sxs-lookup"><span data-stu-id="3a515-160">One single blob container has a limit of 500 TB, enough for most SAP HANA systems, running in a GS5 VM on Azure, tookeep sufficient SAP HANA backups.</span></span> <span data-ttu-id="3a515-161">Müşterilerin sahip arasında hello seçim &quot;etkin&quot; ve &quot;soğuk&quot; blob depolamada (bkz [Azure Blob Storage: sık erişimli ve seyrek erişimli depolama katmanları](../../../storage/blobs/storage-blob-storage-tiers.md)).</span><span class="sxs-lookup"><span data-stu-id="3a515-161">Customers have hello choice between &quot;hot&quot; and &quot;cold&quot; blob storage (see [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md)).</span></span>

<span data-ttu-id="3a515-162">TooAzure blob doğrudan depolama hello blobxfer aracıyla kolay toocopy hello SAP HANA yedek dosya sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="3a515-162">With hello blobxfer tool, it is easy toocopy hello SAP HANA backup files directly tooAzure blob storage.</span></span>

![Bir tam SAP HANA dosya yedekleme hello dosyaları burada görebilirsiniz](media/sap-hana-backup-file-level/image026.png)

<span data-ttu-id="3a515-164">Burada bir hello dosyaları bir tam SAP HANA dosya yedekleme görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a515-164">Here one can see hello files of a full SAP HANA file backup.</span></span> <span data-ttu-id="3a515-165">Merhaba büyük bir kabaca 230 GB olan ve dört dosyası vardır.</span><span class="sxs-lookup"><span data-stu-id="3a515-165">There are four files and hello biggest one has roughly 230 GB.</span></span>

![Toocopy hello 230 GB tooan Azure standart depolama hesabı blob kapsayıcısı kabaca 3000 saniye sürdü](media/sap-hana-backup-file-level/image027.png)

<span data-ttu-id="3a515-167">MD5 karma değeri hello ilk testinde kullanmayan, toocopy hello 230 GB tooan Azure standart depolama hesabı blob kapsayıcısı kabaca 3000 saniye sürdü.</span><span class="sxs-lookup"><span data-stu-id="3a515-167">Not using md5 hash in hello initial test, it took roughly 3000 seconds toocopy hello 230 GB tooan Azure standard storage account blob container.</span></span>

![Bu ekran görüntüsünde bir hello Azure portalı üzerinde nasıl göründüğünü görebilirsiniz](media/sap-hana-backup-file-level/image028.png)

<span data-ttu-id="3a515-169">Bu ekran görüntüsünde bir hello Azure portalı üzerinde nasıl göründüğünü görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a515-169">In this screenshot, one can see how it looks on hello Azure portal.</span></span> <span data-ttu-id="3a515-170">Adlı bir blob kapsayıcı &quot;sap hana yedeklemeleri&quot; oluşturuldu ve hello SAP HANA yedekleme dosyaları temsil edecek hello dört BLOB'lar içerir.</span><span class="sxs-lookup"><span data-stu-id="3a515-170">A blob container named &quot;sap-hana-backups&quot; was created and includes hello four blobs, which represent hello SAP HANA backup files.</span></span> <span data-ttu-id="3a515-171">Bunlardan birini kabaca 230 GB bir boyuta sahiptir.</span><span class="sxs-lookup"><span data-stu-id="3a515-171">One of them has a size of roughly 230 GB.</span></span>

<span data-ttu-id="3a515-172">Merhaba HANA Studio yedekleme konsolu bir toorestrict hello en fazla dosya boyutunu HANA yedek dosyaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a515-172">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="3a515-173">Hello örnek ortamında, birden çok daha küçük yedekleme dosyaları, büyük 230 GB dosya yerine olası toohave yaparak performansı geliştirilmiş.</span><span class="sxs-lookup"><span data-stu-id="3a515-173">In hello sample environment, it improved performance by making it possible toohave multiple smaller backup files, instead of one large 230-GB file.</span></span>

![Merhaba HANA yan içermiyor &#39; Hello yedek dosya boyutu sınırını ayarlama t artırmak hello yedekleme saati](media/sap-hana-backup-file-level/image029.png)

<span data-ttu-id="3a515-175">Merhaba HANA yan içermiyor &#39; Hello yedek dosya boyutu sınırını ayarlama t artırmak hello yedekleme saati hello dosyaları bu şekilde gösterildiği gibi sıralı olarak yazıldığından.</span><span class="sxs-lookup"><span data-stu-id="3a515-175">Setting hello backup file size limit on hello HANA side doesn&#39;t improve hello backup time, because hello files are written sequentially as shown in this figure.</span></span> <span data-ttu-id="3a515-176">Merhaba yedekleme hello 230-GB yerine dört büyük veri dosyaları tek dosyalı oluşmasını hello dosya boyutu sınırını too60 GB ayarlandı.</span><span class="sxs-lookup"><span data-stu-id="3a515-176">hello file size limit was set too60 GB, so hello backup created four large data files instead of hello 230-GB single file.</span></span>

![tootest paralellik hello blobxfer aracının hello en büyük dosya boyutu HANA yedeklemeler için sonra too15 GB ayarlandı](media/sap-hana-backup-file-level/image030.png)

<span data-ttu-id="3a515-178">tootest paralellik hello blobxfer aracının hello en büyük dosya boyutu HANA yedeklemeler için sonra 19 yedekleme dosyalarında sonuçlandı too15 GB olarak ayarlanmış.</span><span class="sxs-lookup"><span data-stu-id="3a515-178">tootest parallelism of hello blobxfer tool, hello max file size for HANA backups was then set too15 GB, which resulted in 19 backup files.</span></span> <span data-ttu-id="3a515-179">Bu yapılandırma too875 saniye 3000 saniye gelen hello zaman blobxfer toocopy hello 230 GB tooAzure blob storage için duruma getirdi.</span><span class="sxs-lookup"><span data-stu-id="3a515-179">This configuration brought hello time for blobxfer toocopy hello 230 GB tooAzure blob storage from 3000 seconds down too875 seconds.</span></span>

<span data-ttu-id="3a515-180">Bir Azure blob yazmak için 60 MB/sn toohello sınırı nedeniyle bu sonucudur.</span><span class="sxs-lookup"><span data-stu-id="3a515-180">This result is due toohello limit of 60 MB/sec for writing an Azure blob.</span></span> <span data-ttu-id="3a515-181">Birden çok BLOB'ları aracılığıyla paralellik hello sorununu çözer, ancak bir dezavantajı yok: Bu HANA yedekleme dosyalarını tooAzure hello blobxfer aracı toocopy performansını artırma blob depolama yükü hello HANA VM hem hello ağ koyar.</span><span class="sxs-lookup"><span data-stu-id="3a515-181">Parallelism via multiple blobs solves hello bottleneck, but there is a downside: increasing performance of hello blobxfer tool toocopy all these HANA backup files tooAzure blob storage puts load on both hello HANA VM and hello network.</span></span> <span data-ttu-id="3a515-182">İşlem HANA sisteminin etkilenmiş haline gelir.</span><span class="sxs-lookup"><span data-stu-id="3a515-182">Operation of HANA system becomes impacted.</span></span>

## <a name="blob-copy-of-dedicated-azure-data-disks-in-backup-software-raid"></a><span data-ttu-id="3a515-183">Yedekleme yazılım RAID ayrılmış Azure veri diski BLOB kopyalama</span><span class="sxs-lookup"><span data-stu-id="3a515-183">Blob copy of dedicated Azure data disks in backup software RAID</span></span>

<span data-ttu-id="3a515-184">Merhaba el ile VM veri disk yedekleme, bu yaklaşım bir değil tüm hello veri diskleri HANA verileri dahil olmak üzere bir yüklemesinde VM toosave hello tüm SAP, yedekleme HANA dosyaları ve yapılandırma dosyaları günlüğe kaydetmez.</span><span class="sxs-lookup"><span data-stu-id="3a515-184">Unlike hello manual VM data disk backup, in this approach one does not back up all hello data disks on a VM toosave hello whole SAP installation, including HANA data, HANA log files, and config files.</span></span> <span data-ttu-id="3a515-185">Bunun yerine, hello ayrılmış toohave yazılım RAID şeritleme ile birden çok Azure veri VHD'ler arasında tam bir SAP HANA dosya yedekleme depolamak için olur.</span><span class="sxs-lookup"><span data-stu-id="3a515-185">Instead, hello idea is toohave dedicated software RAID with striping across multiple Azure data VHDs for storing a full SAP HANA file backup.</span></span> <span data-ttu-id="3a515-186">Bir hello SAP HANA yedeğiniz yalnızca bu diskler, kopyalar.</span><span class="sxs-lookup"><span data-stu-id="3a515-186">One copies only these disks, which have hello SAP HANA backup.</span></span> <span data-ttu-id="3a515-187">Bir adanmış HANA yedekleme depolama hesabında kolayca tutulması veya ayrılmış tooa bağlı &quot;yönetim VM yedekleme&quot; başka bir işleme için.</span><span class="sxs-lookup"><span data-stu-id="3a515-187">They could easily be kept in a dedicated HANA backup storage account, or attached tooa dedicated &quot;backup management VM&quot; for further processing.</span></span>

![Tüm VHD'leri söz konusu hello kullanarak kopyalanan ** Başlat-azurestorageblobcopy ** PowerShell komutu](media/sap-hana-backup-file-level/image031.png)

<span data-ttu-id="3a515-189">Merhaba yedekleme toohello yerel yazılım RAID tamamlandıktan sonra tüm VHD'leri söz konusu hello kullanarak kopyalanan **başlangıç azurestorageblobcopy** PowerShell komutunu (bkz [başlangıç AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span><span class="sxs-lookup"><span data-stu-id="3a515-189">After hello backup toohello local software RAID was completed, all VHDs involved were copied using hello **start-azurestorageblobcopy** PowerShell command (see [Start-AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span></span> <span data-ttu-id="3a515-190">Yalnızca hello yedekleme dosyalarını tutmak için ayrılmış hello dosya sistemi etkilediği gibi SAP HANA veri veya günlük dosyası tutarlılık hello disk üzerinde hiçbir endişeniz vardır.</span><span class="sxs-lookup"><span data-stu-id="3a515-190">As it only affects hello dedicated file system for keeping hello backup files, there are no concerns about SAP HANA data or log file consistency on hello disk.</span></span> <span data-ttu-id="3a515-191">Bu komutun hello VM çevrimiçi kalırken çalıştığını avantajdır.</span><span class="sxs-lookup"><span data-stu-id="3a515-191">A benefit of this command is that it works while hello VM stays online.</span></span> <span data-ttu-id="3a515-192">toobe hiçbir işlem toohello yedekleme kümesi, yazar belirli olması emin toounmount hello önce blob kopyalama ve daha sonra yeniden bağlayın.</span><span class="sxs-lookup"><span data-stu-id="3a515-192">toobe certain that no process writes toohello backup stripe set, be sure toounmount it before hello blob copy, and mount it again afterwards.</span></span> <span data-ttu-id="3a515-193">Veya bir kullanabilir uygun bir çok&quot;Dondur&quot; hello dosya sistemi.</span><span class="sxs-lookup"><span data-stu-id="3a515-193">Or one could use an appropriate way too&quot;freeze&quot; hello file system.</span></span> <span data-ttu-id="3a515-194">Örneğin, xfs aracılığıyla\_hello XFS dosya sistemi için Dondur.</span><span class="sxs-lookup"><span data-stu-id="3a515-194">For example, via xfs\_freeze for hello XFS file system.</span></span>

![Bu ekran, hello Azure portalı üzerinde hello VHD'ler kapsayıcısında BLOB'lar hello listesini gösterir.](media/sap-hana-backup-file-level/image032.png)

<span data-ttu-id="3a515-196">Bu ekran hello hello BLOB listesi gösterir &quot;VHD'ler&quot; hello Azure portalı üzerinde kapsayıcı.</span><span class="sxs-lookup"><span data-stu-id="3a515-196">This screenshot shows hello list of blobs in hello &quot;vhds&quot; container on hello Azure portal.</span></span> <span data-ttu-id="3a515-197">Merhaba ekran görüntüsü, beş VHD'ler hello gösterir bulundukları toohello SAP HANA server VM tooserve hello yazılım RAID tookeep SAP HANA yedekleme dosyaları eklendi.</span><span class="sxs-lookup"><span data-stu-id="3a515-197">hello screenshot shows hello five VHDs, which were attached toohello SAP HANA server VM tooserve as hello software RAID tookeep SAP HANA backup files.</span></span> <span data-ttu-id="3a515-198">Ayrıca hello aracılığıyla hello blob kopyalama komut gerçekleştirilen beş kopyaları gösterir.</span><span class="sxs-lookup"><span data-stu-id="3a515-198">It also shows hello five copies, which were taken via hello blob copy command.</span></span>

![Test amacıyla, hello SAP HANA yedekleme yazılımı RAID disklerini hello kopyalarını ekli toohello uygulama sunucusu VM olan](media/sap-hana-backup-file-level/image033.png)

<span data-ttu-id="3a515-200">Test amacıyla, hello SAP HANA yedekleme yazılımı RAID disklerini hello kopyalarını ekli toohello uygulama sunucusu VM yoktu.</span><span class="sxs-lookup"><span data-stu-id="3a515-200">For testing purposes, hello copies of hello SAP HANA backup software RAID disks were attached toohello app server VM.</span></span>

![Merhaba uygulama sunucusu VM tooattach hello disk kopyaları kapandı](media/sap-hana-backup-file-level/image034.png)

<span data-ttu-id="3a515-202">Merhaba uygulama sunucusu VM tooattach hello disk kopyaları kapandı.</span><span class="sxs-lookup"><span data-stu-id="3a515-202">hello app server VM was shut down tooattach hello disk copies.</span></span> <span data-ttu-id="3a515-203">Merhaba VM başlattıktan sonra hello diskleri ve hello RAID doğru bulunan (UUID bağlanan).</span><span class="sxs-lookup"><span data-stu-id="3a515-203">After starting hello VM, hello disks and hello RAID were discovered correctly (mounted via UUID).</span></span> <span data-ttu-id="3a515-204">Yalnızca hello bağlama noktası hello YaST bölümleyici oluşturulduğu, eksikti.</span><span class="sxs-lookup"><span data-stu-id="3a515-204">Only hello mount point was missing, which was created via hello YaST partitioner.</span></span> <span data-ttu-id="3a515-205">Daha sonra hello SAP HANA yedek dosya kopyalarını işletim sistemi düzeyinde görünür hale geldi.</span><span class="sxs-lookup"><span data-stu-id="3a515-205">Afterwards hello SAP HANA backup file copies became visible on OS level.</span></span>

## <a name="copy-sap-hana-backup-files-toonfs-share"></a><span data-ttu-id="3a515-206">SAP HANA yedekleme dosyalarını tooNFS paylaşmak kopyalayın</span><span class="sxs-lookup"><span data-stu-id="3a515-206">Copy SAP HANA backup files tooNFS share</span></span>

<span data-ttu-id="3a515-207">toolessen hello olası etkisini hello SAP HANA sistemden bir performans veya disk alanı perspektif, bir NFS paylaşımına hello SAP HANA yedekleme dosyalarını depolamak düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a515-207">toolessen hello potential impact on hello SAP HANA system from a performance or disk space perspective, one might consider storing hello SAP HANA backup files on an NFS share.</span></span> <span data-ttu-id="3a515-208">Teknik olarak çalışır, ancak ikinci bir Azure VM NFS paylaşım hello hello konağı olarak kullanılması anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="3a515-208">Technically it works, but it means using a second Azure VM as hello host of hello NFS share.</span></span> <span data-ttu-id="3a515-209">Toohello VM ağ bant genişliği nedeniyle küçük bir VM boyutu olmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="3a515-209">It should not be a small VM size, due toohello VM network bandwidth.</span></span> <span data-ttu-id="3a515-210">Algılama sonra bu aşağı tooshut yapacağı &quot;yedekleme VM&quot; ve yalnızca hello SAP HANA yedekleme yürütme kaydınızı duruma getirin.</span><span class="sxs-lookup"><span data-stu-id="3a515-210">It would make sense then tooshut down this &quot;backup VM&quot; and only bring it up for executing hello SAP HANA backup.</span></span> <span data-ttu-id="3a515-211">Bir NFS yazma, paylaşım hello ağda yük koyar ve etkileri hello SAP HANA sistem ancak yalnızca yönetme hello hello yedekleme dosyaları daha sonra &quot;yedekleme VM&quot; hello SAP HANA sistem hiç etkilemek değil.</span><span class="sxs-lookup"><span data-stu-id="3a515-211">Writing on an NFS share puts load on hello network and impacts hello SAP HANA system, but merely managing hello backup files afterwards on hello &quot;backup VM&quot; would not influence hello SAP HANA system at all.</span></span>

![Başka bir Azure VM NFS paylaşımından takılı toohello SAP HANA server VM edildi](media/sap-hana-backup-file-level/image035.png)

<span data-ttu-id="3a515-213">tooverify hello NFS kullanım örneği, başka bir Azure VM NFS paylaşımından takılı toohello SAP HANA server VM.</span><span class="sxs-lookup"><span data-stu-id="3a515-213">tooverify hello NFS use case, an NFS share from another Azure VM was mounted toohello SAP HANA server VM.</span></span> <span data-ttu-id="3a515-214">Hiçbir özel vardı uygulanan NFS ayarlama.</span><span class="sxs-lookup"><span data-stu-id="3a515-214">There was no special NFS tuning applied.</span></span>

![1 saat ve 46 dakika toodo hello yedekleme doğrudan sürdü](media/sap-hana-backup-file-level/image036.png)

<span data-ttu-id="3a515-216">Merhaba NFS paylaşım hello SAP HANA sunucuda hello gibi bir hızlı şerit kümesi oluştu.</span><span class="sxs-lookup"><span data-stu-id="3a515-216">hello NFS share was a fast stripe set, like hello one on hello SAP HANA server.</span></span> <span data-ttu-id="3a515-217">Bununla birlikte, 1 saat ve 46 dakika toodo hello tooa yerel kümesi yazılırken hello NFS paylaşım 10 dakika yerine doğrudan üzerinde yedekleme sürdü.</span><span class="sxs-lookup"><span data-stu-id="3a515-217">Nevertheless, it took 1 hour and 46 minutes toodo hello backup directly on hello NFS share instead of 10 minutes, when writing tooa local stripe set.</span></span>

![Merhaba alternatif 1 saat 43 dakikada çok daha hızlı değildi](media/sap-hana-backup-file-level/image037.png)

<span data-ttu-id="3a515-219">Yedekleme tooa yerel kümesi yapılması ve toohello kopyalanması hello alternatif NFS paylaşım işletim sistemi düzeyinde (basit bir **cp - avr** komutu) çok daha hızlı değildi.</span><span class="sxs-lookup"><span data-stu-id="3a515-219">hello alternative of doing a backup tooa local stripe set and copying toohello NFS share on OS level (a simple **cp -avr** command) wasn't much quicker.</span></span> <span data-ttu-id="3a515-220">1 saat 43 dakika sürdü.</span><span class="sxs-lookup"><span data-stu-id="3a515-220">It took 1 hour and 43 minutes.</span></span>

<span data-ttu-id="3a515-221">Bu nedenle çalışır ancak performans hello 230 GB yedekleme test için iyi değildi.</span><span class="sxs-lookup"><span data-stu-id="3a515-221">So it works, but performance wasn't good for hello 230-GB backup test.</span></span> <span data-ttu-id="3a515-222">Görüneceğini çoklu terabayt için daha büyük.</span><span class="sxs-lookup"><span data-stu-id="3a515-222">It would look even worse for multi terabytes.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-file-service"></a><span data-ttu-id="3a515-223">SAP HANA yedekleme dosyalarını tooAzure dosya hizmeti kopyalayın</span><span class="sxs-lookup"><span data-stu-id="3a515-223">Copy SAP HANA backup files tooAzure file service</span></span>

<span data-ttu-id="3a515-224">Bir Azure dosya paylaşımı içinde Azure Linux VM'de olası toomount olur.</span><span class="sxs-lookup"><span data-stu-id="3a515-224">It is possible toomount an Azure file share inside an Azure Linux VM.</span></span> <span data-ttu-id="3a515-225">Merhaba makale [nasıl toouse Linux Azure File storage](../../../storage/files/storage-how-to-use-files-linux.md) hakkında ayrıntılar sağlar toodo onu.</span><span class="sxs-lookup"><span data-stu-id="3a515-225">hello article [How toouse Azure File storage with Linux](../../../storage/files/storage-how-to-use-files-linux.md) provides details on how toodo it.</span></span> <span data-ttu-id="3a515-226">Olduğundan şu anda bir Azure dosya paylaşımı 5 TB kota sınırı ve 1 TB dosya başına bir dosya boyutu sınırını aklınızda bulundurun.</span><span class="sxs-lookup"><span data-stu-id="3a515-226">Keep in mind that there is currently a 5-TB quota limit of one Azure file share, and a file size limit of 1 TB per file.</span></span> <span data-ttu-id="3a515-227">Bkz: [Azure Storage ölçeklenebilirlik ve performans hedefleri](../../../storage/common/storage-scalability-targets.md) depolama sınırları hakkında bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3a515-227">See [Azure Storage Scalability and Performance Targets](../../../storage/common/storage-scalability-targets.md) for information on storage limits.</span></span>

<span data-ttu-id="3a515-228">Testler, ancak, SAP HANA yedekleme olmayan & #39 göstermiştir; t şu anda doğrudan CIFS bağlama bu tür ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="3a515-228">Tests have shown, however, that SAP HANA backup doesn&#39;t currently work directly with this kind of CIFS mount.</span></span> <span data-ttu-id="3a515-229">İçinde de belirtildiği [SAP Not 1820529](https://launchpad.support.sap.com/#/notes/1820529) , CIFS önerilmez.</span><span class="sxs-lookup"><span data-stu-id="3a515-229">It is also stated in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529) that CIFS is not recommended.</span></span>

![Bu şekil, SAP HANA Studio'da hello yedekleme iletişiminde bir hata gösterir.](media/sap-hana-backup-file-level/image038.png)

<span data-ttu-id="3a515-231">Bu şekilde bir hata hello yedekleme iletişim SAP HANA Studio'da tooback doğrudan tooa CIFS monte Azure dosya paylaşımı çalışırken gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a515-231">This figure shows an error in hello backup dialog in SAP HANA Studio, when trying tooback up directly tooa CIFS-mounted Azure file share.</span></span> <span data-ttu-id="3a515-232">Böylece varsa toodo VM dosya sistemine standart bir SAP HANA yedekleme önce ve sonra kopyalama hello yedekleme dosyalarını orada tooAzure dosya hizmeti.</span><span class="sxs-lookup"><span data-stu-id="3a515-232">So one has toodo a standard SAP HANA backup into a VM file system first, and then copy hello backup files from there tooAzure file service.</span></span>

![Bu şekilde 929 saniye toocopy 19 SAP HANA yedekleme dosyaları hakkında sürdü gösterilmektedir](media/sap-hana-backup-file-level/image039.png)

<span data-ttu-id="3a515-234">Bu şekilde işlem hakkında 929 saniye toocopy 19 SAP HANA yedekleme dosyalarının toplam boyutu kabaca 230 GB toohello Azure dosya paylaşımının sürdü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a515-234">This figure shows that it took about 929 seconds toocopy 19 SAP HANA backup files with a total size of roughly 230 GB toohello Azure file share.</span></span>

![Kopyalanan toohello Azure dosya paylaşımı Hello kaynak dizin yapısını hello SAP HANA VM edildi](media/sap-hana-backup-file-level/image040.png)

<span data-ttu-id="3a515-236">Bu ekran görüntüsünde bir hello kaynak dizin yapısını hello SAP HANA VM kopyalanan toohello Azure dosya paylaşımı olduğunu görebilirsiniz: bir dizin (hana\_yedekleme\_fsl\_15 gb) ve 19 tek tek yedekleme dosyaları.</span><span class="sxs-lookup"><span data-stu-id="3a515-236">In this screenshot, one can see that hello source directory structure on hello SAP HANA VM was copied toohello Azure file share: one directory (hana\_backup\_fsl\_15gb) and 19 individual backup files.</span></span>

<span data-ttu-id="3a515-237">SAP HANA dosyası yedeklerini doğrudan desteklendiğinde Azure dosyalarda SAP HANA yedekleme dosyalarını depolamak hello gelecekteki ilginç bir seçenek olabilir.</span><span class="sxs-lookup"><span data-stu-id="3a515-237">Storing SAP HANA backup files on Azure files could be an interesting option in hello future when SAP HANA file backups support it directly.</span></span> <span data-ttu-id="3a515-238">Veya olası hale geldiğinde toomount NFS Azure dosyaları ve hello en yüksek kota sınırına 5 TB'den oldukça yüksektir.</span><span class="sxs-lookup"><span data-stu-id="3a515-238">Or when it becomes possible toomount Azure files via NFS and hello maximum quota limit is considerably higher than 5 TB.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3a515-239">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="3a515-239">Next steps</span></span>
* <span data-ttu-id="3a515-240">[SAP HANA için yedekleme Kılavuzu Azure sanal makineler üzerinde](sap-hana-backup-guide.md) genel bir bakış ve çalışmaya başlama hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a515-240">[Backup guide for SAP HANA on Azure Virtual Machines](sap-hana-backup-guide.md) gives an overview and information on getting started.</span></span>
* <span data-ttu-id="3a515-241">[SAP HANA yedekleme depolama anlık görüntü tabanlı](sap-hana-backup-storage-snapshots.md) hello depolama anlık görüntü tabanlı yedekleme seçeneği açıklar.</span><span class="sxs-lookup"><span data-stu-id="3a515-241">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="3a515-242">tooestablish yüksek kullanılabilirlik ve olağanüstü durum kurtarma SAP HANA planlama (büyük örnekler), azure'da nasıl görürüm toolearn [SAP HANA (büyük örnekler) Azure üzerinde yüksek kullanılabilirlik ve olağanüstü durum kurtarma](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="3a515-242">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
