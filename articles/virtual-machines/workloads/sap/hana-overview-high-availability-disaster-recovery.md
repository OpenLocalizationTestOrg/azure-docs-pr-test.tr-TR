---
title: "SAP HANA (büyük örnekler) azure'da aaaHigh kullanılabilirlik ve olağanüstü durum kurtarma | Microsoft Docs"
description: "Yüksek kullanılabilirlik ve Azure (büyük örnekler) üzerinde SAP HANA olağanüstü durum kurtarma planı oluşturun."
services: virtual-machines-linux
documentationcenter: 
author: RicksterCDN
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 12/01/2016
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0c0967f54cf29bbb275eb7cda9d36608488add9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-large-instances-high-availability-and-disaster-recovery-on-azure"></a><span data-ttu-id="b5917-103">SAP HANA (büyük örnekler) Azure üzerinde yüksek kullanılabilirlik ve olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="b5917-103">SAP HANA (large instances) high availability and disaster recovery on Azure</span></span> 

<span data-ttu-id="b5917-104">Yüksek kullanılabilirlik ve olağanüstü durum kurtarma, kritik SAP HANA Azure (büyük örnekler) sunucuları üzerinde çalışan önemli yönleri şunlardır.</span><span class="sxs-lookup"><span data-stu-id="b5917-104">High availability and disaster recovery are important aspects of running your mission-critical SAP HANA on Azure (large instances) servers.</span></span> <span data-ttu-id="b5917-105">Buna ait önemli toowork SAP ile sistem Tümleştirici veya Microsoft tooproperly mimarı ve uygulama sağ yüksek-kullanılabilirlik/olağanüstü durum kurtarma stratejisi hello.</span><span class="sxs-lookup"><span data-stu-id="b5917-105">It's important toowork with SAP, your system integrator, or Microsoft tooproperly architect and implement hello right high-availability/disaster-recovery strategy.</span></span> <span data-ttu-id="b5917-106">Bu ayrıca belirli tooyour ortamı önemli tooconsider hello kurtarma noktası hedefi ve kurtarma süresi hedefi olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-106">It is also important tooconsider hello recovery point objective and recovery time objective, which are specific tooyour environment.</span></span>

## <a name="high-availability"></a><span data-ttu-id="b5917-107">Yüksek kullanılabilirlik</span><span class="sxs-lookup"><span data-stu-id="b5917-107">High availability</span></span>

<span data-ttu-id="b5917-108">Microsoft dahil SAP HANA yüksek kullanılabilirlik yöntemi "Merhaba kutusu dışı" destekler:</span><span class="sxs-lookup"><span data-stu-id="b5917-108">Microsoft supports SAP HANA high-availability methods "out of hello box," which include:</span></span>

- <span data-ttu-id="b5917-109">**Depolama çoğaltma:** depolama sistemin özelliği tooreplicate tüm veri tooanother konumu hello (içinde veya ayrı, aynı veri merkezinde hello).</span><span class="sxs-lookup"><span data-stu-id="b5917-109">**Storage replication:** hello storage system's ability tooreplicate all data tooanother location (within, or separate from, hello same datacenter).</span></span> <span data-ttu-id="b5917-110">SAP HANA bu yöntem bağımsız olarak çalışır.</span><span class="sxs-lookup"><span data-stu-id="b5917-110">SAP HANA operates independently of this method.</span></span>
- <span data-ttu-id="b5917-111">**HANA sistem çoğaltma:** SAP HANA tooa ayrı SAP HANA sistemdeki tüm veri çoğaltma hello.</span><span class="sxs-lookup"><span data-stu-id="b5917-111">**HANA system replication:** hello replication of all data in SAP HANA tooa separate SAP HANA system.</span></span> <span data-ttu-id="b5917-112">Merhaba kurtarma süresi hedefi düzenli aralıklarla veri çoğaltma ile en aza indirilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-112">hello recovery time objective is minimized through data replication at regular intervals.</span></span> <span data-ttu-id="b5917-113">SAP HANA zaman uyumsuz ve zaman uyumlu bellek içi ve zaman uyumlu modda destekler (yalnızca SAP HANA için önerilen içinde sistemlerini hello aynı veri merkezinde veya küçüktür 100 KM parçalayın).</span><span class="sxs-lookup"><span data-stu-id="b5917-113">SAP HANA supports asynchronous, synchronous in-memory, and synchronous modes (recommended only for SAP HANA systems that are within hello same datacenter or less than 100 KM apart).</span></span> <span data-ttu-id="b5917-114">Merhaba geçerli tasarımında HANA örneği büyük Damgalar HANA sistem çoğaltma yalnızca yüksek kullanılabilirlik için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-114">In hello current design of HANA large-instance stamps, HANA system replication can be used for high availability only.</span></span>
- <span data-ttu-id="b5917-115">**Konak otomatik yük devretme:** yerel arıza kurtarma çözümü toouse bir alternatif toosystem çoğaltma olarak.</span><span class="sxs-lookup"><span data-stu-id="b5917-115">**Host auto-failover:** A local fault-recovery solution toouse as an alternative toosystem replication.</span></span> <span data-ttu-id="b5917-116">Merhaba ana düğüm kullanılamaz duruma geldiğinde, bir veya daha fazla bekleme SAP HANA düğümleri genişleme modunda yapılandırılmış ve SAP HANA otomatik olarak tooanother düğüm üzerinde başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-116">When hello master node becomes unavailable, one or more standby SAP HANA nodes are configured in scale-out mode and SAP HANA automatically fails over tooanother node.</span></span>

<span data-ttu-id="b5917-117">SAP HANA yüksek kullanılabilirlik hakkında daha fazla bilgi için aşağıdaki SAP bilgilerle hello bakın:</span><span class="sxs-lookup"><span data-stu-id="b5917-117">For more information on SAP HANA high availability, see hello following SAP information:</span></span>

- [<span data-ttu-id="b5917-118">SAP HANA yüksek kullanılabilirlik Teknik İnceleme</span><span class="sxs-lookup"><span data-stu-id="b5917-118">SAP HANA High-Availability Whitepaper</span></span>](http://go.sap.com/documents/2016/05/f8e5eeba-737c-0010-82c7-eda71af511fa.html)
- [<span data-ttu-id="b5917-119">SAP HANA Yönetim Kılavuzu</span><span class="sxs-lookup"><span data-stu-id="b5917-119">SAP HANA Administration Guide</span></span>](http://help.sap.com/hana/SAP_HANA_Administration_Guide_en.pdf)
- [<span data-ttu-id="b5917-120">SAP HANA sistem çoğaltma SAP Akademi Video</span><span class="sxs-lookup"><span data-stu-id="b5917-120">SAP Academy Video on SAP HANA System Replication</span></span>](http://scn.sap.com/community/hana-in-memory/blog/2015/05/19/sap-hana-system-replication)
- [<span data-ttu-id="b5917-121">SAP destek Not #1999880 – SAP HANA sistem çoğaltma hakkında SSS</span><span class="sxs-lookup"><span data-stu-id="b5917-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication</span></span>](https://bcs.wdf.sap.corp/sap/support/notes/1999880)
- <span data-ttu-id="b5917-122">[Destek Not #2165547 – SAP HANA yedekleme ve geri yükleme SAP HANA sistem çoğaltma ortamında SAP](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span><span class="sxs-lookup"><span data-stu-id="b5917-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span></span>
- <span data-ttu-id="b5917-123">[En az/sıfır kapalı kalma süresi ile donanım Exchange için destek Not #1984882 – kullanarak SAP HANA sistem çoğaltma SAP](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span><span class="sxs-lookup"><span data-stu-id="b5917-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="b5917-124">Olağanüstü durum kurtarma</span><span class="sxs-lookup"><span data-stu-id="b5917-124">Disaster recovery</span></span>

<span data-ttu-id="b5917-125">SAP HANA Azure (büyük örnekler) üzerinde bir coğrafi bölgede iki Azure bölgelerindeki sunulur.</span><span class="sxs-lookup"><span data-stu-id="b5917-125">SAP HANA on Azure (large instances) is offered in two Azure regions in a geopolitical region.</span></span> <span data-ttu-id="b5917-126">Merhaba iki örnek büyük Damgalar iki farklı bölgeler arasında olağanüstü durum kurtarma sırasında veri çoğaltmak için bir doğrudan ağ bağlantısı olduğundan.</span><span class="sxs-lookup"><span data-stu-id="b5917-126">Between hello two large-instance stamps of two different regions is a direct network connectivity for replicating data during disaster recovery.</span></span> <span data-ttu-id="b5917-127">Merhaba çoğaltma hello veri depolama altyapısını temel ' dir.</span><span class="sxs-lookup"><span data-stu-id="b5917-127">hello replication of hello data is storage-infrastructure based.</span></span> <span data-ttu-id="b5917-128">Varsayılan olarak Hello çoğaltma yapılmadı.</span><span class="sxs-lookup"><span data-stu-id="b5917-128">hello replication is not done by default.</span></span> <span data-ttu-id="b5917-129">Merhaba olağanüstü durum kurtarma sıralı hello müşteri yapılandırmaları için yapılır.</span><span class="sxs-lookup"><span data-stu-id="b5917-129">It is done for hello customer configurations that ordered hello disaster recovery.</span></span> <span data-ttu-id="b5917-130">Merhaba geçerli tasarımında HANA sistem çoğaltma olağanüstü durum kurtarma için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-130">In hello current design, HANA system replication can't be used for disaster recovery.</span></span>

<span data-ttu-id="b5917-131">Ancak, tootake avantajı hello olağanüstü durum kurtarma işlemi toostart toodesign hello ağ bağlantısı toohello iki farklı Azure bölgeleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-131">However, tootake advantage of hello disaster recovery, you need toostart toodesign hello network connectivity toohello two different Azure regions.</span></span> <span data-ttu-id="b5917-132">toodo bu nedenle, şirket içi bir Azure ExpressRoute bağlantı hattı bağlantısı, ana Azure bölgesini ve şirket içi tooyour olağanüstü durum kurtarma bölgesinden başka bir bağlantı hattı bağlantı gereksinim.</span><span class="sxs-lookup"><span data-stu-id="b5917-132">toodo so, you need an Azure ExpressRoute circuit connection from on-premises in your main Azure region and another circuit connection from on-premises tooyour disaster-recovery region.</span></span> <span data-ttu-id="b5917-133">Bu ölçüm, bir Microsoft enterprise edge (MSEE) yönlendirici konumu dahil olmak üzere bir tam bir Azure bölgesinde bir sorun var. bir durum karşılayacağını.</span><span class="sxs-lookup"><span data-stu-id="b5917-133">This measure would cover a situation in which a complete Azure region, including a Microsoft enterprise edge router (MSEE) location, has an issue.</span></span>

<span data-ttu-id="b5917-134">İkinci bir ölçü tooSAP HANA azure'da (büyük örnekler) bağlanan tüm Azure sanal ağlarda hello bölgeleri tooboth bu ExpressRoute bağlantı hatları, birinde bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-134">As a second measure, you can connect all Azure virtual networks that connect tooSAP HANA on Azure (large instances) in one of hello regions tooboth of those ExpressRoute circuits.</span></span> <span data-ttu-id="b5917-135">Bu ölçü, burada Azure ile şirket içi konumunuz bağlayan yalnızca biri hello MSEE konumları görev dışı gider servis talebi giderir.</span><span class="sxs-lookup"><span data-stu-id="b5917-135">This measure addresses a case where only one of hello MSEE locations that connects your on-premises location with Azure goes off duty.</span></span>

<span data-ttu-id="b5917-136">Merhaba aşağıdaki şekilde hello olağanüstü durum kurtarma için en uygun yapılandırma gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="b5917-136">hello following figure shows hello optimal configuration for disaster recovery:</span></span>

![Olağanüstü durum kurtarma için en uygun yapılandırma](./media/hana-overview-high-availability-disaster-recovery/image1-optimal-configuration.png)

<span data-ttu-id="b5917-138">Merhaba en iyi bir olağanüstü durum kurtarma yapılandırması hello ağ için toohave iki ExpressRoute bağlantı hatları şirket içi toohello iki farklı bölgelerdeki Azure durumdur.</span><span class="sxs-lookup"><span data-stu-id="b5917-138">hello optimal case for a disaster-recovery configuration of hello network is toohave two ExpressRoute circuits from on-premises toohello two different Azure regions.</span></span> <span data-ttu-id="b5917-139">Bir bağlantı hattı üretim örneğini çalıştıran tooregion #1 gider.</span><span class="sxs-lookup"><span data-stu-id="b5917-139">One circuit goes tooregion #1, running a production instance.</span></span> <span data-ttu-id="b5917-140">Merhaba ikinci expressroute bağlantı hattı tooregion #2 ' çalışan bazı üretim dışı HANA örnekler gider.</span><span class="sxs-lookup"><span data-stu-id="b5917-140">hello second ExpressRoute circuit goes tooregion #2, running some non-production HANA instances.</span></span> <span data-ttu-id="b5917-141">(Merhaba MSEE ve örnek büyük damga dahil olmak üzere tüm Azure bölgesi hello kılavuz devre dışı kalırsa önemlidir.)</span><span class="sxs-lookup"><span data-stu-id="b5917-141">(This is important if an entire Azure region, including hello MSEE and large-instance stamp, goes off hello grid.)</span></span>

<span data-ttu-id="b5917-142">İkinci bir ölçü çeşitli sanal ağlar hello bağlı toohello bağlı tooSAP HANA Azure (büyük örnekler) ile ilgili olan çeşitli ExpressRoute bağlantı hatları şunlardır.</span><span class="sxs-lookup"><span data-stu-id="b5917-142">As a second measure, hello various virtual networks are connected toohello various ExpressRoute circuits that are connected tooSAP HANA on Azure (large instances).</span></span> <span data-ttu-id="b5917-143">Daha sonra aşağıdakiler ele gibi burada bir MSEE başarısız olduğu veya hello kurtarma noktası hedefi, olağanüstü durum kurtarma için düşürebilirsiniz hello konumu devre dışı bırakabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-143">You can bypass hello location where an MSEE is failing, or you can lower hello recovery point objective for disaster recovery, as we discuss later.</span></span>

<span data-ttu-id="b5917-144">bir olağanüstü durum kurtarma kurulumu için Hello sonraki gereksinimleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="b5917-144">hello next requirements for a disaster-recovery setup are:</span></span>

- <span data-ttu-id="b5917-145">Aynı SKU'ları üretim boyut ve bunları hello olağanüstü durum kurtarma bölgede dağıtma Merhaba, Azure (büyük örnekler) SKU'ları üzerinde SAP HANA sıralamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-145">You must order SAP HANA on Azure (large instances) SKUs of hello same size as your production SKUs and deploy them in hello disaster-recovery region.</span></span> <span data-ttu-id="b5917-146">Bu örnekler, kullanılan toorun test, korumalı alan veya QA HANA örnekler olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-146">These instances can be used toorun test, sandbox, or QA HANA instances.</span></span>
- <span data-ttu-id="b5917-147">Bir olağanüstü durum kurtarma profili her Azure (büyük örnekler) SKU'ları üzerinde SAP HANA toorecover hello olağanüstü durum kurtarma sitesindeki istediğiniz gerekirse sipariş gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-147">You must order a disaster-recovery profile for each of your SAP HANA on Azure (large instances) SKUs that you want toorecover in hello disaster-recovery site, if necessary.</span></span> <span data-ttu-id="b5917-148">Bu eylemin hello depolama Çoğaltmada üretim bölgenizi hello olağanüstü durum kurtarma bölge içine hello hedefi olan depolama birimleri toohello ayrılması yol açar.</span><span class="sxs-lookup"><span data-stu-id="b5917-148">This action leads toohello allocation of storage volumes, which are hello target of hello storage replication from your production region into hello disaster-recovery region.</span></span>

<span data-ttu-id="b5917-149">Hello gereksinimleri önceki karşılayan sonra sorumluluk toostart hello depolama çoğaltma olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-149">After you meet hello preceding requirements, it is your responsibility toostart hello storage replication.</span></span> <span data-ttu-id="b5917-150">SAP HANA azure'da (büyük örnekler) için kullanılan hello depolama altyapısında hello depolama çoğaltma depolama anlık görüntüleri temelini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="b5917-150">In hello storage infrastructure used for SAP HANA on Azure (large instances), hello basis of storage replication is storage snapshots.</span></span> <span data-ttu-id="b5917-151">toostart hello olağanüstü durum kurtarma, çoğaltma tooperform gerekir:</span><span class="sxs-lookup"><span data-stu-id="b5917-151">toostart hello disaster-recovery replication, you need tooperform:</span></span>

- <span data-ttu-id="b5917-152">Daha önce açıklandığı gibi LUN, önyükleme görüntüsünü.</span><span class="sxs-lookup"><span data-stu-id="b5917-152">A snapshot of your boot LUN, as described earlier.</span></span>
- <span data-ttu-id="b5917-153">Daha önce açıklandığı gibi HANA ilgili birim, anlık görüntü.</span><span class="sxs-lookup"><span data-stu-id="b5917-153">A snapshot of your HANA-related volumes, as described earlier.</span></span>

<span data-ttu-id="b5917-154">Bu anlık görüntüleri yürüttükten sonra olağanüstü durum kurtarma profilinizde hello olağanüstü durum kurtarma bölge ile ilişkili hello birimlerde hello birimleri ilk çoğaltmasını sağlanmış.</span><span class="sxs-lookup"><span data-stu-id="b5917-154">After you execute these snapshots, an initial replica of hello volumes is seeded on hello volumes that are associated with your disaster-recovery profile in hello disaster-recovery region.</span></span>

<span data-ttu-id="b5917-155">Merhaba en son depolama anlık görüntü saatte daha sonra kullanılan hello depolama birimlerde geliştirmek tooreplicate hello farkları.</span><span class="sxs-lookup"><span data-stu-id="b5917-155">Subsequently, hello most recent storage snapshot is used every hour tooreplicate hello deltas that develop on hello storage volumes.</span></span>

<span data-ttu-id="b5917-156">Bu yapılandırma ile elde edilen hello kurtarma noktası hedefi 60 too90 dakikadır.</span><span class="sxs-lookup"><span data-stu-id="b5917-156">hello recovery point objective that's achieved with this configuration is from 60 too90 minutes.</span></span> <span data-ttu-id="b5917-157">tooachieve daha iyi bir kurtarma hedefi hello olağanüstü durum kurtarma durumda, kopyalama hello HANA işlem günlüğü yedeklemeleri SAP HANA gelen Azure (büyük örnekler) toohello üzerinde başka bir Azure bölgesine işaret edin.</span><span class="sxs-lookup"><span data-stu-id="b5917-157">tooachieve a better recovery point objective in hello disaster-recovery case, copy hello HANA transaction log backups from SAP HANA on Azure (large instances) toohello other Azure region.</span></span> <span data-ttu-id="b5917-158">tooachieve bu kurtarma noktası hedefi aşağıdaki hello:</span><span class="sxs-lookup"><span data-stu-id="b5917-158">tooachieve this recovery point objective, do hello following:</span></span>

1. <span data-ttu-id="b5917-159">Geri hello HANA Hareketi oluşturan sıklıkta olabildiğince çok/hana/günlük/yedekleme oturum açın.</span><span class="sxs-lookup"><span data-stu-id="b5917-159">Back up hello HANA transaction log as frequently as possible too/hana/log/backup.</span></span>
2. <span data-ttu-id="b5917-160">Tamamlanmış tooan Azure sanal toohello SAP HANA Azure (büyük örnekler) sunucuya bağlanan sanal ağ olan makine (VM) olduklarında hello işlem günlüğü yedeklemeleri kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-160">Copy hello transaction log backups when they are finished tooan Azure virtual machine (VM), which is in a virtual network that's connected toohello SAP HANA on Azure (large instances) server.</span></span>
3. <span data-ttu-id="b5917-161">Bu sanal makineden hello yedekleme tooa hello olağanüstü durum kurtarma bölgede bulunan bir sanal ağ içinde VM kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-161">From that VM, copy hello backup tooa VM that's in a virtual network in hello disaster-recovery region.</span></span>
4. <span data-ttu-id="b5917-162">Merhaba işlem günlüğü yedeklemeleri hello VM bu bölgede unutmayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-162">Keep hello transaction log backups in that region in hello VM.</span></span>

<span data-ttu-id="b5917-163">Merhaba olağanüstü durum kurtarma profili gerçek bir sunucuda dağıtıldıktan sonra olağanüstü bir durumunda hello işlem günlüğü yedeklemeleri hello VM toohello SAP HANA azure'da hello olağanüstü durum kurtarma bölgede şimdi hello birincil sunucu olan (büyük örnekler) kopyalayın ve Bu yedekleri geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="b5917-163">In case of disaster, after hello disaster-recovery profile has been deployed on an actual server, copy hello transaction log backups from hello VM toohello SAP HANA on Azure (large instances) that is now hello primary server in hello disaster-recovery region, and restore those backups.</span></span> <span data-ttu-id="b5917-164">HANA Hello durumunu hello olağanüstü durum kurtarma disklerde, HANA anlık görüntüsünün olduğundan bu kurtarma mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="b5917-164">This recovery is possible because hello state of HANA on hello disaster-recovery disks is that of a HANA snapshot.</span></span> <span data-ttu-id="b5917-165">İşlem günlüğü yedeklemeleri, daha fazla geri yüklemeler için uzaklık noktası hello budur.</span><span class="sxs-lookup"><span data-stu-id="b5917-165">This is hello offset point for further restorations of transaction log backups.</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="b5917-166">Yedekleme ve geri yükleme</span><span class="sxs-lookup"><span data-stu-id="b5917-166">Backup and restore</span></span>

<span data-ttu-id="b5917-167">Merhaba en önemli yönleri toooperating veritabanlarından birini hello veritabanı çeşitli yıkıcı olaylarından korunabilir emin yapılmasıdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-167">One of hello most important aspects toooperating databases is making sure hello database can be protected from various catastrophic events.</span></span> <span data-ttu-id="b5917-168">Bu olaylar tarafından herhangi bir şey doğal afetler toosimple kullanıcı hatalarından neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-168">These events can be caused by anything from natural disasters toosimple user errors.</span></span>

<span data-ttu-id="b5917-169">Bir veritabanıyla hello özelliği toorestore onu tooany noktası zamanında yedekleme (gibi birisi kritik verileri silmeden önce), başlangıç engellemeyi oluşmadan önce olduğu gibi olası toohello yol kapatmak gibi geri yükleme tooa durumunu sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-169">Backing up a database, with hello ability toorestore it tooany point in time (such as before somebody deleted critical data), allows restoration tooa state that is as close as possible toohello way it was before hello disruption occurred.</span></span>

<span data-ttu-id="b5917-170">En iyi sonuçlar için yedeklemeler iki tür gerçekleştirilmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="b5917-170">Two types of backups must be performed for best results:</span></span>

- <span data-ttu-id="b5917-171">Veritabanı yedeklemeleri</span><span class="sxs-lookup"><span data-stu-id="b5917-171">Database backups</span></span>
- <span data-ttu-id="b5917-172">İşlem günlüğü yedeklemeleri</span><span class="sxs-lookup"><span data-stu-id="b5917-172">Transaction log backups</span></span>

<span data-ttu-id="b5917-173">Ayrıca bir uygulama düzeyinde gerçekleştirilen toofull veritabanı yedeklemeleri, depolama anlık görüntüleri yedeklemelerde gerçekleştirerek daha kapsamlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-173">In addition toofull database backups performed at an application-level, you can be even more thorough by performing backups with storage snapshots.</span></span> <span data-ttu-id="b5917-174">Günlük yedeklemeleri gerçekleştirmek da hello veritabanı (ve tooempty hello zaten yürütülen işlemler günlüklerinden) geri yüklemek için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="b5917-174">Performing log backups is also important for restoring hello database (and tooempty hello logs from already committed transactions).</span></span>

<span data-ttu-id="b5917-175">SAP HANA Azure (büyük örnekler) üzerinde iki yedekleme ve geri yükleme seçenekleri sunar:</span><span class="sxs-lookup"><span data-stu-id="b5917-175">SAP HANA on Azure (large instances) offers two backup and restore options:</span></span>

- <span data-ttu-id="b5917-176">Bunu kendiniz (DIY).</span><span class="sxs-lookup"><span data-stu-id="b5917-176">Do it yourself (DIY).</span></span> <span data-ttu-id="b5917-177">Yeterli disk alanı tooensure hesaplamak sonra tam veritabanı ve günlük yedekleri disk yedekleme yöntemleri (toothose diskleri) kullanarak gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="b5917-177">After you calculate tooensure enough disk space, perform full database and log backups by using disk backup methods (toothose disks).</span></span> <span data-ttu-id="b5917-178">Zaman içerisinde, hello yedeklemeleri kopyalanan tooan (bir Azure tabanlı bir dosya sunucusu ile neredeyse sınırsız depolama ayarladıktan sonra) Azure depolama hesabı olan veya bir Azure yedekleme kasası veya Azure soğuk depolama kullanın.</span><span class="sxs-lookup"><span data-stu-id="b5917-178">Over time, hello backups are copied tooan Azure storage account (after you set up an Azure-based file server with virtually unlimited storage), or use an Azure Backup vault or Azure cold storage.</span></span> <span data-ttu-id="b5917-179">Tooa depolama hesabı CommVault, bunlar sonra toostore hello yedeklemeleri kopyalanan gibi başka bir seçenek toouse bir üçüncü taraf veri koruma Aracı ' dir.</span><span class="sxs-lookup"><span data-stu-id="b5917-179">Another option is toouse a third-party data protection tool, such as Commvault, toostore hello backups after they are copied tooa storage account.</span></span> <span data-ttu-id="b5917-180">Merhaba Dıy yedekleme seçeneği de uyumluluk ve denetleme amaçları için uzun süre depolanan toobe gereken veriler için gerekli olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-180">hello DIY backup option might also be necessary for data that needs toobe stored for longer periods for compliancy and auditing purposes.</span></span>
- <span data-ttu-id="b5917-181">Merhaba yedekleme ve geri yükleme altyapının SAP HANA (büyük örnekler) azure'da hello işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-181">Use hello backup and restore functionality that hello underlying infrastructure of SAP HANA on Azure (large instances) provides.</span></span> <span data-ttu-id="b5917-182">Bu seçenek yedeklemeleri hello gereksinimini yerine getirir ve el ile yedekleme (burada veri yedeklemeleri uyumluluk amacıyla gerekli olan dışında) neredeyse geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="b5917-182">This option fulfills hello need for backups, and it makes manual backups nearly obsolete (except where data backups are required for compliance purposes).</span></span> <span data-ttu-id="b5917-183">Bu bölümde adresleri Hello kalanını yedekleme hello ve HANA (büyük örnekler) ile sunulan işlevselliği geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="b5917-183">hello rest of this section addresses hello backup and restore functionality that's offered with HANA (large instances).</span></span>

> [!NOTE]
> <span data-ttu-id="b5917-184">Merhaba temel altyapısı HANA (büyük örnekler) tarafından kullanılan hello anlık görüntü teknolojisi SAP HANA anlık görüntü bir bağımlılığa sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b5917-184">hello snapshot technology that is used by hello underlying infrastructure of HANA (large instances) has a dependency on SAP HANA snapshots.</span></span> <span data-ttu-id="b5917-185">SAP HANA anlık görüntüler, SAP HANA çok kullanıcılı veritabanı kapsayıcıları ile birlikte çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-185">SAP HANA snapshots do not work in conjunction with SAP HANA Multitenant Database Containers.</span></span> <span data-ttu-id="b5917-186">Sonuç olarak, bu yöntem Yedekleme kullanılan toodeploy SAP HANA çok kullanıcılı veritabanı kapsayıcıları olamaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-186">As a result, this method of backup cannot be used toodeploy SAP HANA Multitenant Database Containers.</span></span>

### <a name="using-storage-snapshots-of-sap-hana-on-azure-large-instances"></a><span data-ttu-id="b5917-187">SAP HANA depolama anlık görüntüleri (büyük örnekler) Azure üzerinde kullanma</span><span class="sxs-lookup"><span data-stu-id="b5917-187">Using storage snapshots of SAP HANA on Azure (large instances)</span></span>

<span data-ttu-id="b5917-188">SAP HANA Azure (büyük örnekler) ile ilgili temel hello depolama altyapısını birimleri depolama görüntüsünü hello kavramını destekler.</span><span class="sxs-lookup"><span data-stu-id="b5917-188">hello storage infrastructure underlying SAP HANA on Azure (large instances) supports hello notion of a storage snapshot of volumes.</span></span> <span data-ttu-id="b5917-189">İle ilgili önemli noktalar aşağıdaki hello yedekleme ve geri yükleme belirli bir birimi desteklenir:</span><span class="sxs-lookup"><span data-stu-id="b5917-189">Both backup and restoration of a particular volume are supported, with hello following considerations:</span></span>

- <span data-ttu-id="b5917-190">Veritabanı Yedeklemeleri yerine depolama birim anlık görüntülerini üzerinde düzenli aralıklarla alınır.</span><span class="sxs-lookup"><span data-stu-id="b5917-190">Instead of database backups, storage volume snapshots are taken on a frequent basis.</span></span>
- <span data-ttu-id="b5917-191">Merhaba depolama anlık görüntü yürütülmeden önce hello depolama anlık görüntü SAP HANA anlık görüntü başlatır.</span><span class="sxs-lookup"><span data-stu-id="b5917-191">hello storage snapshot initiates an SAP HANA snapshot before it executes hello storage snapshot.</span></span> <span data-ttu-id="b5917-192">Bu SAP HANA anlık görüntü hello Kurulum son günlük geri yüklemeler için hello depolama anlık görüntü kurtarma işleminden sonra noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-192">This SAP HANA snapshot is hello setup point for eventual log restorations after recovery of hello storage snapshot.</span></span>
- <span data-ttu-id="b5917-193">Merhaba depolama anlık görüntü başarıyla çalıştırıldığı hello noktada hello SAP HANA anlık görüntü silinir.</span><span class="sxs-lookup"><span data-stu-id="b5917-193">At hello point where hello storage snapshot is executed successfully, hello SAP HANA snapshot is deleted.</span></span>
- <span data-ttu-id="b5917-194">Günlük yedeklerini sık gerçekleştirilen ve hello günlük yedekleme birimi veya Azure depolanır.</span><span class="sxs-lookup"><span data-stu-id="b5917-194">Log backups are taken frequently and stored in hello log backup volume or in Azure.</span></span>
- <span data-ttu-id="b5917-195">Merhaba veritabanının geri yüklenmesi gerekiyorsa tooa belirli bir nokta, bir istek tooMicrosoft Azure desteği (üretim kesinti) veya SAP HANA Azure Hizmet Yönetimi toorestore tooa üzerinde belirli yapıldığında depolama anlık görüntü (örneğin, bir planlı geri yüklenmesini bir korumalı alan sistemi tooits özgün durumuna).</span><span class="sxs-lookup"><span data-stu-id="b5917-195">If hello database must be restored tooa certain point in time, a request is made tooMicrosoft Azure Support (production outage) or SAP HANA on Azure Service Management toorestore tooa certain storage snapshot (for example, a planned restoration of a sandbox system tooits original state).</span></span>
- <span data-ttu-id="b5917-196">Merhaba depolama anlık görüntüsüne dahil hello SAP HANA anlık görüntü yürütülen ve hello depolama anlık görüntü alındıktan sonra depolanan günlük yedeklerini uygulamak için uzaklık bir noktadır.</span><span class="sxs-lookup"><span data-stu-id="b5917-196">hello SAP HANA snapshot that's included in hello storage snapshot is an offset point for applying log backups that have been executed and stored after hello storage snapshot was taken.</span></span>
- <span data-ttu-id="b5917-197">Bu günlük yedeklemeler toorestore alınır hello veritabanı geri tooa belirli bir nokta.</span><span class="sxs-lookup"><span data-stu-id="b5917-197">These log backups are taken toorestore hello database back tooa certain point in time.</span></span>

<span data-ttu-id="b5917-198">Belirten hello yedekleme\_adı birimler aşağıdaki hello görüntüsünü oluşturur:</span><span class="sxs-lookup"><span data-stu-id="b5917-198">Specifying hello backup\_name creates a snapshot of hello following volumes:</span></span>

- <span data-ttu-id="b5917-199">hana/veri</span><span class="sxs-lookup"><span data-stu-id="b5917-199">hana/data</span></span>
- <span data-ttu-id="b5917-200">hana/günlük</span><span class="sxs-lookup"><span data-stu-id="b5917-200">hana/log</span></span>
- <span data-ttu-id="b5917-201">hana/log\_yedekleme (yedekleme olarak hana/günlüğüne bağlı)</span><span class="sxs-lookup"><span data-stu-id="b5917-201">hana/log\_backup (mounted as backup into hana/log)</span></span>
- <span data-ttu-id="b5917-202">hana ve paylaşılan</span><span class="sxs-lookup"><span data-stu-id="b5917-202">hana/shared</span></span>

### <a name="storage-snapshot-considerations"></a><span data-ttu-id="b5917-203">Depolama anlık görüntü konuları</span><span class="sxs-lookup"><span data-stu-id="b5917-203">Storage snapshot considerations</span></span>

>[!NOTE]
><span data-ttu-id="b5917-204">Depolama anlık görüntüleri _değil_ sağlanan ek depolama alanı ayrılmış olduğundan gider, boş.</span><span class="sxs-lookup"><span data-stu-id="b5917-204">Storage snapshots are _not_ provided free of charge, because additional storage space must be allocated.</span></span>

<span data-ttu-id="b5917-205">SAP HANA Azure (büyük örnekler) üzerinde depolama anlık görüntüleri belirli mekanikleri Hello şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="b5917-205">hello specific mechanics of storage snapshots for SAP HANA on Azure (large instances) include:</span></span>

- <span data-ttu-id="b5917-206">Belirli bir depolama anlık görüntü (noktasında hello zaman geçen süre) çok az depolama kullanır.</span><span class="sxs-lookup"><span data-stu-id="b5917-206">A specific storage snapshot (at hello point in time when it is taken) consumes very little storage.</span></span>
- <span data-ttu-id="b5917-207">Veri içerik değişikliklerini ve SAP HANA veri dosyaları hello depolama biriminde değiştirme hello içeriği hello anlık görüntü toostore hello özgün blok içerik gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-207">As data content changes and hello content in SAP HANA data files change on hello storage volume, hello snapshot needs toostore hello original block content.</span></span>
- <span data-ttu-id="b5917-208">Merhaba depolama anlık görüntü boyutunu artırır.</span><span class="sxs-lookup"><span data-stu-id="b5917-208">hello storage snapshot increases in size.</span></span> <span data-ttu-id="b5917-209">Merhaba uzun hello anlık görüntü var, hello büyük hello depolama anlık görüntüsü olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-209">hello longer hello snapshot exists, hello larger hello storage snapshot becomes.</span></span>
- <span data-ttu-id="b5917-210">Daha fazla yapılan değişiklikler toohello SAP HANA veritabanı birimindeki depolama anlık görüntü hello ömrü boyunca Merhaba, hello büyük hello alanı tüketimini hello depolama anlık görüntüsünün olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-210">hello more changes made toohello SAP HANA database volume over hello lifetime of a storage snapshot, hello larger hello space consumption of hello storage snapshot becomes.</span></span>

<span data-ttu-id="b5917-211">SAP HANA (büyük örnekler) azure'da hello SAP HANA veri ve günlük birimi sabit birim boyutlarını birlikte gönderilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-211">SAP HANA on Azure (large instances) comes with fixed volume sizes for hello SAP HANA data and log volume.</span></span> <span data-ttu-id="b5917-212">Böylece, sorumluluk tooschedule depolama anlık görüntüler (içinde SAP HANA hello Azure [büyük örneklerini] işleme) bu birimlerin anlık görüntüleri gerçekleştirme, Birim alanına eats.</span><span class="sxs-lookup"><span data-stu-id="b5917-212">Performing snapshots of those volumes eats into your volume space, so it is your responsibility tooschedule storage snapshots (within hello SAP HANA on Azure [large instances] process).</span></span>

<span data-ttu-id="b5917-213">Merhaba aşağıdaki bölümlerde genel öneriler dahil olmak üzere, bu anlık görüntüleri gerçekleştirmeye yönelik bilgileri sağlayın:</span><span class="sxs-lookup"><span data-stu-id="b5917-213">hello following sections provide information for performing these snapshots, including general recommendations:</span></span>

- <span data-ttu-id="b5917-214">Merhaba donanım 255 anlık görüntüler birim başına karşılayabilir rağmen bu sayının altına de Kal öneririz.</span><span class="sxs-lookup"><span data-stu-id="b5917-214">Though hello hardware can sustain 255 snapshots per volume, we highly recommend that you stay well below this number.</span></span>
- <span data-ttu-id="b5917-215">Depolama anlık görüntüleri gerçekleştirmeden önce izlemek ve boş alan izler.</span><span class="sxs-lookup"><span data-stu-id="b5917-215">Before you perform storage snapshots, monitor and keep track of free space.</span></span>
- <span data-ttu-id="b5917-216">Alt hello boş disk alanına dayalı depolama anlık görüntü sayısı.</span><span class="sxs-lookup"><span data-stu-id="b5917-216">Lower hello number of storage snapshots based on free space.</span></span> <span data-ttu-id="b5917-217">Toolower hello güvenliğinizi anlık görüntü sayısı gerekebilir veya tooextend hello birimleri gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-217">You might need toolower hello number of snapshots that you keep, or you might need tooextend hello volumes.</span></span> <span data-ttu-id="b5917-218">(1 TB birimlerinde ek depolama alanı sıralayabilirsiniz.)</span><span class="sxs-lookup"><span data-stu-id="b5917-218">(You can order additional storage in 1-TB units.)</span></span>
- <span data-ttu-id="b5917-219">SAP HANA sistem Geçiş Araçları (R3load veya SAP HANA veritabanlarını yedeklerden geri yükleme tarafından) veri taşıma gibi etkinlikleri sırasında yüksek oranda, tüm depolama anlık görüntüleri gerçekleştirmenizi değil önerilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-219">During activities such as moving data into SAP HANA with system migration tools (with R3load, or by restoring SAP HANA databases from backups), we highly recommended that you not perform any storage snapshots.</span></span> <span data-ttu-id="b5917-220">(Yeni bir SAP HANA sistemine yapılan bir sistem geçiş, depolama anlık görüntüleri gerçekleştirilen toobe ihtiyaç duymaz.)</span><span class="sxs-lookup"><span data-stu-id="b5917-220">(If a system migration is being done on a new SAP HANA system, storage snapshots would not need toobe performed.)</span></span>
- <span data-ttu-id="b5917-221">Sırasında daha büyük düzenlemelere SAP HANA tablo depolama anlık görüntüleri mümkünse kaçınılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-221">During larger reorganizations of SAP HANA tables, storage snapshots should be avoided if possible.</span></span>
- <span data-ttu-id="b5917-222">Depolama anlık görüntüler (büyük örnekler) azure'da SAP HANA önkoşul tooengaging hello olağanüstü durum kurtarma özelliklerini değildir.</span><span class="sxs-lookup"><span data-stu-id="b5917-222">Storage snapshots are a prerequisite tooengaging hello disaster-recovery capabilities of SAP HANA on Azure (large instances).</span></span>

### <a name="setting-up-storage-snapshots"></a><span data-ttu-id="b5917-223">Depolama anlık görüntüleri ayarlama</span><span class="sxs-lookup"><span data-stu-id="b5917-223">Setting up storage snapshots</span></span>

1. <span data-ttu-id="b5917-224">Perl hello Linux işletim sisteminde hello HANA (büyük örnekler) sunucusunda yüklü olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="b5917-224">Make sure that Perl is installed in hello Linux operating system on hello HANA (large instances) server.</span></span>
2. <span data-ttu-id="b5917-225">Değiştirme/etc/ssh/ssh\_config tooadd hello satır _Mac'ler hmac-sha1_.</span><span class="sxs-lookup"><span data-stu-id="b5917-225">Modify /etc/ssh/ssh\_config tooadd hello line _MACs hmac-sha1_.</span></span>
3. <span data-ttu-id="b5917-226">Hello Yöneticisi düğümünde (varsa) çalıştıran her SAP HANA örneği için bir SAP HANA yedekleme kullanıcı hesabı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b5917-226">Create an SAP HANA backup user account on hello master node for each SAP HANA instance you are running (if applicable).</span></span>
4. <span data-ttu-id="b5917-227">Merhaba SAP HANA HDB istemci tüm SAP HANA (büyük örnekler) sunucularda yüklü olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-227">hello SAP HANA HDB client must be installed on all SAP HANA (large instances) servers.</span></span>
5. <span data-ttu-id="b5917-228">Merhaba ilk SAP HANA (büyük örnekler) sunucusuna her bölge, bir ortak anahtar anlık görüntü oluşturma denetimleri depolama altyapısını temel tooaccess hello oluşturulması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-228">On hello first SAP HANA (large instances) server of each region, a public key must be created tooaccess hello underlying storage infrastructure that controls snapshot creation.</span></span>
6. <span data-ttu-id="b5917-229">Azure Hello betiği kopyalayın\_hana\_/scripts toohello konumundan backup.pl **hdbsql** hello SAP HANA yükleme.</span><span class="sxs-lookup"><span data-stu-id="b5917-229">Copy hello script azure\_hana\_backup.pl from /scripts toohello location of **hdbsql** of hello SAP HANA installation.</span></span>
7. <span data-ttu-id="b5917-230">Kopya hello HANABackupDetails.txt dosya/Scripts toohello aynı Perl komut dosyasını hello gibi konumu.</span><span class="sxs-lookup"><span data-stu-id="b5917-230">Copy hello HANABackupDetails.txt file from /scripts toohello same location as hello Perl script.</span></span>
8. <span data-ttu-id="b5917-231">Merhaba HANABackupDetails.txt dosyasını hello uygun müşteri belirtimleri için gerektiği şekilde değiştirin.</span><span class="sxs-lookup"><span data-stu-id="b5917-231">Modify hello HANABackupDetails.txt file as necessary for hello appropriate customer specifications.</span></span>

### <a name="step-1-install-sap-hana-hdbclient"></a><span data-ttu-id="b5917-232">1. adım: SAP HANA HDBClient yükleme</span><span class="sxs-lookup"><span data-stu-id="b5917-232">Step 1: Install SAP HANA HDBClient</span></span>

<span data-ttu-id="b5917-233">Merhaba SAP HANA Azure (büyük örnekler) üzerinde yüklü Linux hello klasörlerini içerir ve gerekli tooexecute SAP HANA depolama anlık görüntüleri yedekleme ve olağanüstü durum kurtarma amacıyla komut dosyaları.</span><span class="sxs-lookup"><span data-stu-id="b5917-233">hello Linux installed on SAP HANA on Azure (large instances) includes hello folders and scripts necessary tooexecute SAP HANA storage snapshots for backup and disaster-recovery purposes.</span></span> <span data-ttu-id="b5917-234">Ancak, SAP HANA yüklerken, sorumluluk tooinstall SAP HANA HDBclient olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-234">However, it is your responsibility tooinstall SAP HANA HDBclient while you are installing SAP HANA.</span></span> <span data-ttu-id="b5917-235">(Microsoft hello HDBclient ne SAP HANA yükler.)</span><span class="sxs-lookup"><span data-stu-id="b5917-235">(Microsoft installs neither hello HDBclient nor SAP HANA.)</span></span>

### <a name="step-2-change-etcsshsshconfig"></a><span data-ttu-id="b5917-236">2. adım: / etc/değiştirmek ssh/ssh\_yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b5917-236">Step 2: Change /etc/ssh/ssh\_config</span></span>

<span data-ttu-id="b5917-237">Değiştirme/etc/ssh/ssh\_ekleyerek config _Mac'ler hmac-sha1_ satır aşağıda gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="b5917-237">Change /etc/ssh/ssh\_config by adding _MACs hmac-sha1_ line as shown here:</span></span>
```
#   RhostsRSAAuthentication no
#   RSAAuthentication yes
#   PasswordAuthentication yes
#   HostbasedAuthentication no
#   GSSAPIAuthentication no
#   GSSAPIDelegateCredentials no
#   GSSAPIKeyExchange no
#   GSSAPITrustDNS no
#   BatchMode no
#   CheckHostIP yes
#   AddressFamily any
#   ConnectTimeout 0
#   StrictHostKeyChecking ask
#   IdentityFile ~/.ssh/identity
#   IdentityFile ~/.ssh/id_rsa
#   IdentityFile ~/.ssh/id_dsa
#   Port 22
Protocol 2
#   Cipher 3des
#   Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc
#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160
MACs hmac-sha1
#   EscapeChar ~
#   Tunnel no
#   TunnelDevice any:any
#   PermitLocalCommand no
#   VisualHostKey no
#   ProxyCommand ssh -q -W %h:%p gateway.example.com
```

### <a name="step-3-create-a-public-key"></a><span data-ttu-id="b5917-238">3. adım: bir ortak anahtar oluşturma</span><span class="sxs-lookup"><span data-stu-id="b5917-238">Step 3: Create a public key</span></span>

<span data-ttu-id="b5917-239">Üzerinde Hello Azure (büyük örnekler) sunucusundaki her bir Azure bölgesine ilk SAP HANA oluşturun kullanılan ortak anahtar toobe tooaccess hello depolama altyapısını böylece anlık görüntülerini oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-239">On hello first SAP HANA on Azure (large instances) server in each Azure region, create a public key toobe used tooaccess hello storage infrastructure so that you can create snapshots.</span></span> <span data-ttu-id="b5917-240">Merhaba ortak anahtarı bir parola gerekli toosign toohello depolama değildir ve parola kimlik korunmuyor sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-240">hello public key ensures that a password is not required toosign in toohello storage and that password credentials are not maintained.</span></span> <span data-ttu-id="b5917-241">Merhaba SAP HANA (büyük örnekler) sunucusunda Linux komut toogenerate hello ortak anahtar aşağıdaki hello yürütün:</span><span class="sxs-lookup"><span data-stu-id="b5917-241">In Linux on hello SAP HANA (large instances) server, execute hello following command toogenerate hello public key:</span></span>
```
  ssh-keygen –t dsa –b 1024
```
<span data-ttu-id="b5917-242">Merhaba yeni konumu: _/root/.ssh/id\_dsa.pub.</span><span class="sxs-lookup"><span data-stu-id="b5917-242">hello new location is _/root/.ssh/id\_dsa.pub.</span></span> <span data-ttu-id="b5917-243">Gerçek bir parola girmeyin, aksi takdirde oturum her zaman gerekli tooenter hello parola olacaktır.</span><span class="sxs-lookup"><span data-stu-id="b5917-243">Do not enter an actual passphrase, or else you will be required tooenter hello passphrase each time you sign in.</span></span> <span data-ttu-id="b5917-244">Bunun yerine, basın **Enter** iki kez tooremove hello oturum açmak için parola gereksinimi girin.</span><span class="sxs-lookup"><span data-stu-id="b5917-244">Instead, press **Enter** twice tooremove hello enter passphrase requirement for signing in.</span></span>

<span data-ttu-id="b5917-245">Toomake hello ortak anahtara düzeltildi klasörleri too/root/.ssh/ değiştirme ve hello yürütme beklendiği gibi emin denetleyin **ls** komutu.</span><span class="sxs-lookup"><span data-stu-id="b5917-245">Check toomake sure that hello public key was corrected as expected by changing folders too/root/.ssh/ and then executing hello **ls** command.</span></span> <span data-ttu-id="b5917-246">Merhaba anahtar mevcut değilse, komutu aşağıdaki hello çalıştırarak kopyalayabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="b5917-246">If hello key is present, you can copy it by running hello following command:</span></span>

![Ortak anahtar şu komutu çalıştırarak kopyalanır.](./media/hana-overview-high-availability-disaster-recovery/image2-public-key.png)

<span data-ttu-id="b5917-248">Bu noktada, Azure Hizmet Yönetimi SAP HANA başvurun ve başlangıç anahtarı sağlayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-248">At this point, contact SAP HANA on Azure Service Management and provide hello key.</span></span> <span data-ttu-id="b5917-249">Merhaba temsilcisiyle kullanan hello ortak anahtar tooregister depolama altyapısını temel hello içinde.</span><span class="sxs-lookup"><span data-stu-id="b5917-249">hello service representative uses hello public key tooregister it in hello underlying storage infrastructure.</span></span>

### <a name="step-4-create-an-sap-hana-user-account"></a><span data-ttu-id="b5917-250">4. adım: bir SAP HANA kullanıcı hesabı oluşturma</span><span class="sxs-lookup"><span data-stu-id="b5917-250">Step 4: Create an SAP HANA user account</span></span>

<span data-ttu-id="b5917-251">SAP HANA Studio'dan bir SAP HANA kullanıcı hesabıyla yedekleme amacıyla oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b5917-251">Create an SAP HANA user account within SAP HANA Studio for backup purposes.</span></span> <span data-ttu-id="b5917-252">Bu hesabın ayrıcalıkları aşağıdaki hello olmalıdır: _yedekleme yönetici_ ve _katalog okuma_.</span><span class="sxs-lookup"><span data-stu-id="b5917-252">This account must have hello following privileges: _Backup Admin_ and _Catalog Read_.</span></span> <span data-ttu-id="b5917-253">Bu örnekte, hello kullanıcıadı SCADMIN oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="b5917-253">In this example, hello username SCADMIN is created.</span></span>

![Bir kullanıcı HANA Studio'da oluşturma](./media/hana-overview-high-availability-disaster-recovery/image3-creating-user.png)

### <a name="step-5-authorize-hello-sap-hana-user-account"></a><span data-ttu-id="b5917-255">5. adım: hello SAP HANA kullanıcı hesabı yetkilendirme</span><span class="sxs-lookup"><span data-stu-id="b5917-255">Step 5: Authorize hello SAP HANA user account</span></span>

<span data-ttu-id="b5917-256">Merhaba SAP HANA kullanıcı hesabı (Merhaba komut dosyası her çalıştırıldığında yetkilendirme gerek kalmadan hello komut dosyaları tarafından kullanılan toobe) yetkilendirin.</span><span class="sxs-lookup"><span data-stu-id="b5917-256">Authorize hello SAP HANA user account (toobe used by hello scripts without requiring authorization every time hello script is run).</span></span> <span data-ttu-id="b5917-257">SAP HANA komutu Hello `hdbuserstore` bir veya daha fazla SAP HANA düğümde depolanan bir SAP HANA kullanıcı anahtarı hello oluşturulmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="b5917-257">hello SAP HANA command `hdbuserstore` allows hello creation of an SAP HANA user key, which is stored on one or more SAP HANA nodes.</span></span> <span data-ttu-id="b5917-258">Merhaba kullanıcı anahtarı daha sonra açıklanan işlemi scripting hello içinde toomanage parolalardan gerek kalmadan hello kullanıcı tooaccess SAP HANA de sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-258">hello user key also allows hello user tooaccess SAP HANA without having toomanage passwords from within hello scripting process that's discussed later.</span></span>

>[!IMPORTANT]
><span data-ttu-id="b5917-259">Çalışma hello komut olarak aşağıdaki `_root_`.</span><span class="sxs-lookup"><span data-stu-id="b5917-259">Run hello following command as `_root_`.</span></span> <span data-ttu-id="b5917-260">Aksi takdirde hello betik düzgün çalışamaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-260">Otherwise, hello script cannot work properly.</span></span>

<span data-ttu-id="b5917-261">Merhaba girin `hdbuserstore` gibi komut:</span><span class="sxs-lookup"><span data-stu-id="b5917-261">Enter hello `hdbuserstore` command as follows:</span></span>

![Merhaba hdbuserstore komutu girin](./media/hana-overview-high-availability-disaster-recovery/image4-hdbuserstore-command.png)

<span data-ttu-id="b5917-263">Burada hello kullanıcı SCADMIN01 ve hello hostname lhanad01, örneğin, aşağıdaki hello hello komut şöyledir:</span><span class="sxs-lookup"><span data-stu-id="b5917-263">In hello following example, where hello user is SCADMIN01 and hello hostname is lhanad01, hello command is:</span></span>
```
hdbuserstore set SCADMIN01 lhanad01:30115 <backup username> <password>
```
<span data-ttu-id="b5917-264">Tüm komut dosyası genişleme HANA örnekleri için tek bir sunucudan yönetin.</span><span class="sxs-lookup"><span data-stu-id="b5917-264">Manage all scripting from a single server for scale-out HANA instances.</span></span> <span data-ttu-id="b5917-265">Bu örnekte, hello SAP HANA anahtar SCADMIN01 ilgili toohello anahtarı hello konak yansıtır şekilde her bir konak için değiştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-265">In this example, hello SAP HANA key SCADMIN01 must be altered for each host in a way that reflects hello host that is related toohello key.</span></span> <span data-ttu-id="b5917-266">Merhaba SAP HANA yedekleme hesabı hello örneği sayısıyla hello HANA DB, diğer bir deyişle, dayanıklıdır **lhanad**.</span><span class="sxs-lookup"><span data-stu-id="b5917-266">That is, hello SAP HANA backup account is amended with hello instance number of hello HANA DB, **lhanad**.</span></span> <span data-ttu-id="b5917-267">başlangıç anahtarı atandığı hello ana bilgisayarda yönetici ayrıcalıklarına sahip olmalıdır ve hello yedekleme kullanıcı genişleme için erişim haklarını tooall SAP HANA örnekleri olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-267">hello key must have administrative privileges on hello host it is assigned to, and hello backup user for scale-out must have access rights tooall SAP HANA instances.</span></span>
```
hdbuserstore set SCADMIN01 lhanad:30015 SCADMIN <password>
hdbuserstore set SCADMIN02 lhanad:30115 SCADMIN <password>
hdbuserstore set SCADMIN03 lhanad:30215 SCADMIN <password>
```

### <a name="step-6-copy-items-from-hello-scripts-folder"></a><span data-ttu-id="b5917-268">6. adım: öğeleri hello/Scripts klasörüne kopyalayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-268">Step 6: Copy items from hello /scripts folder</span></span>

<span data-ttu-id="b5917-269">Kopya hello aşağıdaki öğeleri hello / (Merhaba yüklemenin hello altın görüntüsünü dahil) klasöründen toohello çalışma dizini için komut dosyası **hdbsql**.</span><span class="sxs-lookup"><span data-stu-id="b5917-269">Copy hello following items from hello /scripts folder (included on hello gold image of hello installation) toohello working directory for **hdbsql**.</span></span> <span data-ttu-id="b5917-270">Geçerli HANA yüklemeler için bu /hana/shared/D01/exe/linuxx86 dizindir\_64/hdb.</span><span class="sxs-lookup"><span data-stu-id="b5917-270">For current HANA installations, this directory is /hana/shared/D01/exe/linuxx86\_64/hdb.</span></span>
```
azure\_hana\_backup.pl
testHANAConnection.pl
testStorageSnapshotConnection.pl
removeTestStorageSnapshot.pl
HANABackupCustomerDetails.txt
```
<span data-ttu-id="b5917-271">Genişleme çalıştırıyorsanız aşağıdaki öğelerindeki hello veya OLAP kopyalayın:</span><span class="sxs-lookup"><span data-stu-id="b5917-271">Copy hello following items if they are running scale-out or OLAP:</span></span>
```
azure\_hana\_backup\_bw.pl
testHANAConnectionBW.pl
testStorageSnapshotConnectionBW.pl
removeTestStorageSnapshotBW.pl
HANABackupCustomerDetailsBW.txt
```
<span data-ttu-id="b5917-272">Merhaba HANABackupCustomerDetails.txt dosya şu şekilde büyütme dağıtımlar için değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-272">hello HANABackupCustomerDetails.txt file is modifiable as follows for a scale-up deployment.</span></span> <span data-ttu-id="b5917-273">Bunu hello denetim ve yapılandırma hello depolama anlık görüntüleri çalışan hello komut dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-273">It is hello control and configuration file for hello script that runs hello storage snapshots.</span></span> <span data-ttu-id="b5917-274">Hello alınan _depolama yedekleme adı_ ve _depolama IP adresi_ SAP HANA örneklerinizi dağıtıldığında Azure Hizmet Yönetimi'nden.</span><span class="sxs-lookup"><span data-stu-id="b5917-274">You should have received hello _Storage Backup Name_ and _Storage IP Address_ from SAP HANA on Azure Service Management when your instances were deployed.</span></span> <span data-ttu-id="b5917-275">Sıralama hello sırası değiştirilemiyor veya herhangi bir hello değişkenleri veya hello betik aralığını düzgün çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-275">You cannot modify hello sequence, ordering, or spacing of any of hello variables, or hello script does not run properly.</span></span>

<span data-ttu-id="b5917-276">Büyütme dağıtımı için hello yapılandırma dosyası gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="b5917-276">For a scale-up deployment, hello configuration file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Created by customer using hdbuserstore
HANA Backup Name: SCADMIND01
```
<span data-ttu-id="b5917-277">Bir genişleme yapılandırması için hello HANABackupCustomerDetailsBW.txt dosya gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="b5917-277">For a scale-out configuration, hello HANABackupCustomerDetailsBW.txt file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Node IP addresses, instance numbers, and HANA backup name
#provided by customer.  HANA backup name created using
#hdbuserstore utility.
Node 1 IP Address: 10.254.15.21
Node 1 HANA instance number: 01
Node 1 HANA Backup Name: SCADMIN01
Node 2 IP Address: 10.254.15.22
Node 2 HANA instance number: 02
Node 2 HANA Backup Name: SCADMIN02
Node 3 IP Address: 10.254.15.23
Node 3 HANA instance number: 03
Node 3 HANA Backup Name: SCADMIN03
Node 4 IP Address: 10.254.15.24
Node 4 HANA instance number: 04
Node 4 HANA Backup Name: SCADMIN04
Node 5 IP Address: 10.254.15.25
Node 5 HANA instance number: 05
Node 5 HANA Backup Name: SCADMIN05
Node 6 IP Address: 10.254.15.26
Node 6 HANA instance number: 06
Node 6 HANA Backup Name: SCADMIN06
Node 7 IP Address: 10.254.15.27
Node 7 HANA instance number: 07
Node 7 HANA Backup Name: SCADMIN07
Node 8 IP Address: 10.254.15.28
Node 8 HANA instance number: 08
Node 8 HANA Backup Name: SCADMIN08
```
>[!NOTE]
><span data-ttu-id="b5917-278">Şu anda yalnızca düğüm 1 ayrıntıları hello gerçek HANA depolama anlık görüntü komut dosyasında kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b5917-278">Currently, only Node 1 details are used in hello actual HANA storage snapshot script.</span></span> <span data-ttu-id="b5917-279">Merhaba yönetici yedekleme düğümü hiç değişirse, zaten başka bir düğüme onun yerine düğüm 1 hello ayrıntılarında değiştirerek alabilir sağladıktan böylece tüm HANA düğümlerinden erişim tooor sınamanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="b5917-279">We recommend that you test access tooor from all HANA nodes so that, if hello master backup node ever changes, you have already ensured that any other node can take its place by modifying hello details in Node 1.</span></span>

<span data-ttu-id="b5917-280">toocheck hello doğru yapılandırmaları hello yapılandırma dosyası veya komut dosyaları aşağıdaki hello birini çalıştırın, doğru bağlantı toohello HANA örnekleri için:</span><span class="sxs-lookup"><span data-stu-id="b5917-280">toocheck for hello correct configurations in hello configuration file or proper connectivity toohello HANA instances, run either of hello following scripts:</span></span>
- <span data-ttu-id="b5917-281">Büyütme için bir yapılandırma (SAP iş yüküne bağımsız olarak):</span><span class="sxs-lookup"><span data-stu-id="b5917-281">For a scale-up configuration (independent on SAP workload):</span></span>

 ```
testHANAConnection.pl
```
- <span data-ttu-id="b5917-282">Genişleme yapılandırma için:</span><span class="sxs-lookup"><span data-stu-id="b5917-282">For a scale-out configuration:</span></span>

 ```
testHANAConnectionBW.pl
```

<span data-ttu-id="b5917-283">Erişim gerekli tooall HANA sunucuları bu hello ana HANA örneği olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="b5917-283">Ensure that hello master HANA instance has access tooall required HANA servers.</span></span> <span data-ttu-id="b5917-284">Parametreleri toohello betik vardır, ancak tamamlamanız gereken uygun HANABackupCustomerDetails hello / HANABackupCustomerDetailsBW hello betik toorun için doğru dosya.</span><span class="sxs-lookup"><span data-stu-id="b5917-284">There are no parameters toohello script, but you must complete hello appropriate HANABackupCustomerDetails/ HANABackupCustomerDetailsBW file for hello script toorun properly.</span></span> <span data-ttu-id="b5917-285">Yalnızca hello Kabuk komutu hata kodları döndürdüğünden, her örneği tooerror onay hello komut dosyası için bu mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="b5917-285">Because only hello shell command error codes are returned, it is not possible for hello script tooerror-check every instance.</span></span> <span data-ttu-id="b5917-286">Buna rağmen hello betik bazı yararlı yorumlar sağlar ve bu da, toodouble-denetle.</span><span class="sxs-lookup"><span data-stu-id="b5917-286">Even so, hello script does provide some helpful comments for you toodouble-check.</span></span>

<span data-ttu-id="b5917-287">toorun hello komut dosyası:</span><span class="sxs-lookup"><span data-stu-id="b5917-287">toorun hello script:</span></span>
```
 ./testHANAConnection.pl
```
 <span data-ttu-id="b5917-288">Merhaba komut dosyası başarıyla hello HANA örneği hello durumunu elde ederse hello HANA bağlantısı başarılı bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="b5917-288">If hello script successfully obtains hello status of hello HANA instance, it displays a message that hello HANA connection was successful.</span></span>

<span data-ttu-id="b5917-289">Ayrıca, ikinci bir türü yok komut dosyasının toohello depolama toocheck hello ana HANA örneği sunucunun özelliği toosign kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-289">Additionally, there is a second type of script you can use toocheck hello master HANA instance server's ability toosign in toohello storage.</span></span> <span data-ttu-id="b5917-290">Hello azure yürütmeden önce\_hana\_yedekleme (\_bw) .pl betik hello sonraki betik yürütmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-290">Before you execute hello azure\_hana\_backup(\_bw).pl script, you must execute hello next script.</span></span> <span data-ttu-id="b5917-291">Bir birim anlık görüntü yok içeriyorsa, bu imkansız toodetermine hello birim yalnızca boş olduğu ya da olup bir ssh hatası tooobtain hello ayrıntıları anlık görüntüsünü alın.</span><span class="sxs-lookup"><span data-stu-id="b5917-291">If a volume contains no snapshots, it is impossible toodetermine whether hello volume is simply empty or there is an ssh failure tooobtain hello snapshot details.</span></span> <span data-ttu-id="b5917-292">Bu nedenle, iki adımı hello komut dosyasını çalıştırır:</span><span class="sxs-lookup"><span data-stu-id="b5917-292">For this reason, hello script executes two steps:</span></span>

- <span data-ttu-id="b5917-293">Bu, bu hello depolama konsol erişilebilir durumda olduğunu doğrular.</span><span class="sxs-lookup"><span data-stu-id="b5917-293">It verifies that hello storage console is accessible.</span></span>
- <span data-ttu-id="b5917-294">HANA örneği tarafından her birim için bir test veya kukla, anlık görüntü oluşturur.</span><span class="sxs-lookup"><span data-stu-id="b5917-294">It creates a test, or dummy, snapshot for each volume by HANA instance.</span></span>

<span data-ttu-id="b5917-295">Bu nedenle, hello HANA örneği bağımsız değişken olarak dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-295">For this reason, hello HANA instance is included as an argument.</span></span> <span data-ttu-id="b5917-296">Yeniden hello depolama bağlantı denetlemesi olası tooprovide hata olmadığı, ancak hello yürütme başarısız olursa hello betik yararlı ipuçları sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-296">Again, it is not possible tooprovide error checking for hello storage connection, but hello script provides helpful hints if hello execution fails.</span></span>

<span data-ttu-id="b5917-297">Merhaba komut dosyası olarak çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="b5917-297">hello script is run as:</span></span>
```
 ./testStorageSnapshotConnection.pl <hana instance>
```
<span data-ttu-id="b5917-298">Veya farklı çalıştır:</span><span class="sxs-lookup"><span data-stu-id="b5917-298">Or it is run as:</span></span>
```
./testStorageSnapshotConnectionBW.pl <hana instance>
```
<span data-ttu-id="b5917-299">Merhaba komut ayrıca, sahip olduğunuz hello sunucu örnekleri tarafından kullanılan hello mantıksal birim numaraları (LUN) etrafında düzenlenmiştir uygun şekilde dağıtılan tooyour depolama kiracısında, mümkün toosign olduğunu bildiren bir mesaj görüntüler.</span><span class="sxs-lookup"><span data-stu-id="b5917-299">hello script also displays a message that you are able toosign in appropriately tooyour deployed storage tenant, which is organized around hello logical unit numbers (LUNs) that are used by hello server instances you own.</span></span>

<span data-ttu-id="b5917-300">İlk Depolama anlık görüntü tabanlı yedeklemeleri hello yürütmeden önce hello sonraki komut dosyaları toomake bu hello yapılandırmasının doğru olduğundan emin çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="b5917-300">Before you execute hello first storage snapshot-based backups, run hello next scripts toomake sure that hello configuration is correct.</span></span>

<span data-ttu-id="b5917-301">Bu komut dosyalarını çalıştırdıktan sonra yürüterek hello anlık görüntüleri silebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="b5917-301">After running these scripts, you can delete hello snapshots by executing:</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```
<span data-ttu-id="b5917-302">Veya</span><span class="sxs-lookup"><span data-stu-id="b5917-302">Or</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```

### <a name="step-7-perform-on-demand-snapshots"></a><span data-ttu-id="b5917-303">7. adım: isteğe bağlı anlık görüntüler gerçekleştirin</span><span class="sxs-lookup"><span data-stu-id="b5917-303">Step 7: Perform on-demand snapshots</span></span>

<span data-ttu-id="b5917-304">İsteğe bağlı anlık görüntüleri (yanı sıra cron kullanarak normal anlık görüntüleri zamanlamak) burada açıklandığı gibi.</span><span class="sxs-lookup"><span data-stu-id="b5917-304">Perform on-demand snapshots (as well as schedule regular snapshots by using cron) as described here.</span></span>

<span data-ttu-id="b5917-305">Büyütme yapılandırmaları için komut dosyası izleyen hello yürütün:</span><span class="sxs-lookup"><span data-stu-id="b5917-305">For scale-up configurations, execute hello following script:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="b5917-306">Genişleme yapılandırmaları için komut dosyası izleyen hello yürütün:</span><span class="sxs-lookup"><span data-stu-id="b5917-306">For scale-out configurations, execute hello following script:</span></span>
```
./azure_hana_backup_bw.pl lhanad01 customer 20
```
<span data-ttu-id="b5917-307">Merhaba genişleme betik bazı ek denetimi toomake tüm HANA sunucuları erişilebilir ve tüm HANA örnekleri dönüş SAP HANA ya da depolama anlık görüntüleri oluşturma ile devam etmeden önce hello örneğinin uygun durumu emin yapar.</span><span class="sxs-lookup"><span data-stu-id="b5917-307">hello scale-out script does some additional checking toomake sure that all HANA servers can be accessed, and all HANA instances return appropriate status of hello instance before proceeding with creating SAP HANA or storage snapshots.</span></span>

<span data-ttu-id="b5917-308">Şu bağımsız hello gereklidir:</span><span class="sxs-lookup"><span data-stu-id="b5917-308">hello following arguments are required:</span></span>

- <span data-ttu-id="b5917-309">Merhaba HANA örneği gerektiren yedekleme.</span><span class="sxs-lookup"><span data-stu-id="b5917-309">hello HANA instance requiring backup.</span></span>
- <span data-ttu-id="b5917-310">Merhaba depolama anlık görüntü için başlangıç anlık görüntü önek.</span><span class="sxs-lookup"><span data-stu-id="b5917-310">hello snapshot prefix for hello storage snapshot.</span></span>
- <span data-ttu-id="b5917-311">Anlık görüntü toobe hello belirli önekini tutulan Hello sayısı.</span><span class="sxs-lookup"><span data-stu-id="b5917-311">hello number of snapshots toobe kept for hello specific prefix.</span></span>

```
./azure_hana_backup.pl lhanad01 customer 20
```

<span data-ttu-id="b5917-312">Merhaba betik yürütme işlemi hello bu üç ayrı evrede hello depolama anlık görüntü oluşturur:</span><span class="sxs-lookup"><span data-stu-id="b5917-312">hello execution of hello script creates hello storage snapshot in these three distinct phases:</span></span>

- <span data-ttu-id="b5917-313">HANA anlık görüntü yürütün.</span><span class="sxs-lookup"><span data-stu-id="b5917-313">Execute a HANA snapshot.</span></span>
- <span data-ttu-id="b5917-314">Bir depolama anlık görüntü yürütün.</span><span class="sxs-lookup"><span data-stu-id="b5917-314">Execute a storage snapshot.</span></span>
- <span data-ttu-id="b5917-315">Merhaba HANA anlık görüntü kaldırın.</span><span class="sxs-lookup"><span data-stu-id="b5917-315">Remove hello HANA snapshot.</span></span>

<span data-ttu-id="b5917-316">Kopyalanmış olduğu hello HDB yürütülebilir klasöründen çağırarak Hello betiğini yürütün.</span><span class="sxs-lookup"><span data-stu-id="b5917-316">Execute hello script by calling it from hello HDB executable folder that it was copied to.</span></span> <span data-ttu-id="b5917-317">Bu yedekler en az birimler Merhaba, ancak bunu da hello birim adı hello açık SAP HANA örnek adına sahip herhangi bir birim yedekler.</span><span class="sxs-lookup"><span data-stu-id="b5917-317">It backs up at least hello following volumes, but it also backs up any volume that has hello explicit SAP HANA instance name in hello volume name.</span></span>
```
hana_data_<hana instance>_prod_t020_vol
hana_log_<hana instance>_prod_t020_vol
hana_log_backup_<hana instance>_prod_t020_vol
hana_shared_<hana instance>_prod_t020_vol
```
<span data-ttu-id="b5917-318">Merhaba saklama dönemi kesinlikle, anlık görüntü (örneğin, 20, daha önce gösterilen) hello komut yürüttüğünüzde parametre olarak gönderilen hello sayısı ile yönetilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-318">hello retention period is strictly administered, with hello number of snapshots submitted as a parameter when you execute hello script (such as 20, shown previously).</span></span> <span data-ttu-id="b5917-319">Bu nedenle hello süreyi anlık görüntüleri hello çağrısında hello komut yürütme ve hello sayısının hello döneminin bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="b5917-319">So hello amount of time is a function of hello period of execution and hello number of snapshots in hello call of hello script.</span></span> <span data-ttu-id="b5917-320">Merhaba tutulur anlık görüntü sayısı hello çağrısında hello komut dosyasının bir parametre olarak adlı hello sayıyı aşarsa, bu etiketin eski depolama anlık görüntü hello (önceki örnekte _özel_) yeni bir anlık görüntüdür önce silinir yürütülebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-320">If hello number of snapshots that are kept exceeds hello number that are named as a parameter in hello call of hello script, hello oldest storage snapshot of this label (in our previous case, _custom_) is deleted before a new snapshot is executed.</span></span> <span data-ttu-id="b5917-321">Bu hello hello çağrının son parametre toocontrol hello anlık görüntü sayısı bir hello numarasını olarak size hello numarası anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="b5917-321">This means hello number you give as hello last parameter of hello call is hello number you can use toocontrol hello number of snapshots.</span></span>

>[!NOTE]
><span data-ttu-id="b5917-322">Merhaba etiketi değiştirmek hemen hello sayım yeniden başlatır.</span><span class="sxs-lookup"><span data-stu-id="b5917-322">As soon as you change hello label, hello counting starts again.</span></span>

<span data-ttu-id="b5917-323">Birden çok düğümlü ortamlarda anlık görüntüleri oluşturuyorsanız, bağımsız değişken olarak SAP HANA Azure Hizmet Yönetimi tarafından sağlanan tooinclude hello HANA örnek adı gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-323">You need tooinclude hello HANA instance name that's provided by SAP HANA on Azure Service Management as an argument if they are creating snapshots in multi-node environments.</span></span> <span data-ttu-id="b5917-324">Tek düğümlü ortamlarda, hello hello SAP HANA Azure (büyük örnekler) birimi üzerinde yeterli adıdır, ancak hello HANA örnek adı hala önerilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-324">In single-node environments, hello name of hello SAP HANA on Azure (large instances) unit is sufficient, but hello HANA instance name is still recommended.</span></span>

<span data-ttu-id="b5917-325">Ayrıca, geri kullanarak önyükleme volumes\LUNs yukarı aynı hello komut dosyası.</span><span class="sxs-lookup"><span data-stu-id="b5917-325">Additionally, you can back up boot volumes\LUNs by using hello same script.</span></span> <span data-ttu-id="b5917-326">HANA, ilk kez çalıştırdığınızda cron içinde önyükleme haftalık veya gecelik yedekleme zamanlaması öneririz rağmen önyükleme biriminizi en az bir kez yedeklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-326">You must back up your boot volume at least once when you first run HANA, although we recommend a weekly or nightly backup schedule for booting in cron.</span></span> <span data-ttu-id="b5917-327">Bunun yerine bir SAP HANA örnek adı eklemek daha ekleme _önyükleme_ bağımsız değişkeni hello komut dosyanıza aşağıdaki gibi hello olarak:</span><span class="sxs-lookup"><span data-stu-id="b5917-327">Rather than add an SAP HANA instance name, insert _boot_ as hello argument into hello script as follows:</span></span>
```
./azure_hana_backup boot customer 20
```
<span data-ttu-id="b5917-328">Merhaba bir de toohello önyükleme birimi en aynı bekletme ilkesi karşılanan.</span><span class="sxs-lookup"><span data-stu-id="b5917-328">hello same retention policy is afforded toohello boot volume as well.</span></span> <span data-ttu-id="b5917-329">İsteğe bağlı anlık görüntüler, açıklandığı gibi SAP geliştirmesini paket (EHP) yükseltme işlemi sırasında veya toocreate ayrı depolama anlık görüntü gerektiğinde gibi daha önce yalnızca, özel durumlar için kullanın.</span><span class="sxs-lookup"><span data-stu-id="b5917-329">Use on-demand snapshots, as described previously, for special cases only, such as during an SAP enhancement package (EHP) upgrade, or when you need toocreate a distinct storage snapshot.</span></span>

<span data-ttu-id="b5917-330">Cron kullanarak zamanlanmış tooperform depolama anlık görüntüsünü öneririz ve tüm yedekleme ve olağanüstü durum kurtarma gereksinimlerini (çeşitli yedekleme kez istenen değiştirme hello komut dosyası girişleri toomatch hello) için aynı komut dosyası hello kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="b5917-330">We encourage you tooperform scheduled storage snapshots using cron, and we recommend that you use hello same script for all backups and disaster-recovery needs (modifying hello script inputs toomatch hello various requested backup times).</span></span> <span data-ttu-id="b5917-331">Bunlar tüm farklı cron kendi yürütme süresi bağlı olarak, zamanlanan: saat, 12 saatlik, günlük veya haftalık.</span><span class="sxs-lookup"><span data-stu-id="b5917-331">These are all scheduled differently in cron depending on their execution time: hourly, 12-hour, daily, or weekly.</span></span> <span data-ttu-id="b5917-332">daha önce ele alınan hello site dışındaki uzun dönem yedekleme için saklama etiketleme eşleşen tasarlanmış toocreate depolama anlık görüntüleri Hello cron zamanlamadır.</span><span class="sxs-lookup"><span data-stu-id="b5917-332">hello cron schedule is designed toocreate storage snapshots that match hello previously discussed retention labeling for long-term off-site backup.</span></span> <span data-ttu-id="b5917-333">Merhaba betik komutları tooback kendi istenen sıklığı (Merhaba önyükleme birimi günlük yedek desteklenir ancak veri ve günlük dosyaları saatlik yedekleme, yedeklenen) bağlı olarak tüm üretim birimleri içerir.</span><span class="sxs-lookup"><span data-stu-id="b5917-333">hello script includes commands tooback up all production volumes, depending on their requested frequency (data and log files are backed up hourly, whereas hello boot volume is backed up daily).</span></span>

<span data-ttu-id="b5917-334">cron komut dosyası izleyen hello Hello girişlerinde saatte on dakika, her 12 saatte hello on dakika ve günlük hello on dakika hello çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="b5917-334">hello entries in hello following cron script run every hour at hello tenth minute, every 12 hours at hello tenth minute, and daily at hello tenth minute.</span></span> <span data-ttu-id="b5917-335">Merhaba saatlik ve günlük yedekleri hello aynı (12:10:00) saat gerçekleşmesi olmayan bir şekilde oluşturulan işleri hello cron bu yalnızca bir SAP HANA depolama anlık görüntü belirli bir saatte gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="b5917-335">hello cron jobs are created in such a way that only one SAP HANA storage snapshot takes place during any particular hour, so that hello hourly and daily backups do not occur at hello same time (12:10 AM).</span></span> <span data-ttu-id="b5917-336">toohelp en iyi duruma getirme anlık görüntü oluşturma ve çoğaltma, SAP HANA Azure Hizmet Yönetimi Merhaba, toorun süredir Yedeklemelerinizin önerilen sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-336">toohelp optimize your snapshot creation and replication, SAP HANA on Azure Service Management provides hello recommended time for you toorun your backups.</span></span>

<span data-ttu-id="b5917-337">içinde /etc/crontab zamanlama hello varsayılan cron aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="b5917-337">hello default cron scheduling in /etc/crontab is as follows:</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 14
```
<span data-ttu-id="b5917-338">Merhaba önceki cron yönergelerinde hello etiketle anlık görüntü bir saatlik hello HANA birimler (olmadan, önyükleme birimi) alın.</span><span class="sxs-lookup"><span data-stu-id="b5917-338">In hello previous cron instructions, hello HANA volumes (without boot volume) get an hourly snapshot with hello label.</span></span> <span data-ttu-id="b5917-339">Bu anlık görüntülerini 66 korunur.</span><span class="sxs-lookup"><span data-stu-id="b5917-339">Of these snapshots, 66 are retained.</span></span> <span data-ttu-id="b5917-340">Ayrıca, hello 12 saatlik etiketle 14 anlık görüntüleri korunur.</span><span class="sxs-lookup"><span data-stu-id="b5917-340">Additionally, 14 snapshots with hello 12-hour label are retained.</span></span> <span data-ttu-id="b5917-341">Potansiyel olarak saatlik anlık görüntüleri üç gün artı 12 saatlik anlık görüntüler için başka bir dört anlık görüntü tüm bir hafta sağlayan gün boyunca alırsınız.</span><span class="sxs-lookup"><span data-stu-id="b5917-341">You potentially get hourly snapshots for three days, plus 12-hour snapshots for another four days, which gives you an entire week of snapshots.</span></span>

<span data-ttu-id="b5917-342">Hello komut dosyaları tarafından birkaç dakika dağılır sürece belirli bir anda yalnızca tek bir betik yürütülmesi gereken çünkü içinde cron zamanlama hassas, olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-342">Scheduling within cron can be tricky, because only one script should be executed at any particular time, unless hello scripts are staggered by several minutes.</span></span> <span data-ttu-id="b5917-343">Uzun vadeli bekletme için günlük yedeklemeler istiyorsanız, günlük bir anlık görüntü 12 saatlik anlık görüntü (yedi her bekletme sayısı ile) birlikte tutulur veya sonraki 10 dakika hello saatlik anlık görüntü düzenlenmiş tootake yerdir.</span><span class="sxs-lookup"><span data-stu-id="b5917-343">If you want daily backups for long-term retention, either a daily snapshot is kept along with a 12-hour snapshot (with a retention count of seven each), or hello hourly snapshot is staggered tootake place 10 minutes later.</span></span> <span data-ttu-id="b5917-344">Yalnızca bir günlük anlık görüntü hello üretim biriminde tutulur.</span><span class="sxs-lookup"><span data-stu-id="b5917-344">Only one daily snapshot is kept in hello production volume.</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 7
10 0 * * * ./azure_hana_backup.pl lhanad01 daily 7
```
<span data-ttu-id="b5917-345">Burada listelenen hello sıklıklarını yalnızca örnektir.</span><span class="sxs-lookup"><span data-stu-id="b5917-345">hello frequencies listed here are only examples.</span></span> <span data-ttu-id="b5917-346">tooderive, en uygun sayıda anlık görüntü, aşağıdaki ölçütleri kullanın hello:</span><span class="sxs-lookup"><span data-stu-id="b5917-346">tooderive your optimum number of snapshots, use hello following criteria:</span></span>

- <span data-ttu-id="b5917-347">Kurtarma süresi hedefi zaman içinde nokta kurtarma gereksinimleri.</span><span class="sxs-lookup"><span data-stu-id="b5917-347">Requirements in recovery time objective for point-in-time recovery.</span></span>
- <span data-ttu-id="b5917-348">Alanı kullanımı.</span><span class="sxs-lookup"><span data-stu-id="b5917-348">Space usage.</span></span>
- <span data-ttu-id="b5917-349">Gereksinimleri kurtarma noktası hedefi ve potansiyel olağanüstü durum kurtarma için kurtarma süresi hedefi.</span><span class="sxs-lookup"><span data-stu-id="b5917-349">Requirements in recovery point objective and recovery time objective for potential disaster recovery.</span></span>
- <span data-ttu-id="b5917-350">Diskleri karşı HANA tam veritabanı yedeklemeleri nihai yürütülmesi.</span><span class="sxs-lookup"><span data-stu-id="b5917-350">Eventual execution of HANA full database backups against disks.</span></span> <span data-ttu-id="b5917-351">Tam bir veritabanı yedeği her diskleri karşı veya _backint_ arabirim, olan gerçekleştirilen, depolama anlık görüntüleri hello yürütülmesi başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-351">Whenever a full database backup against disks, or _backint_ interface, is performed, hello execution of storage snapshots fails.</span></span> <span data-ttu-id="b5917-352">Depolama anlık görüntüleri üstünde tooexecute tam veritabanı yedeklemeleri planlıyorsanız, depolama anlık görüntüleri hello yürütülmesi bu süre boyunca devre dışı bırakıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="b5917-352">If you plan tooexecute full database backups on top of storage snapshots, make sure that hello execution of storage snapshots is disabled during this time.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="b5917-353">yalnızca hello anlık görüntüleri SAP HANA günlük yedekleri birlikte gerçekleştirildiğinde depolama anlık görüntüleri hello kullanımını SAP HANA yedeklemeler için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="b5917-353">hello use of storage snapshots for SAP HANA backups is valid only when hello snapshots are performed in conjunction with SAP HANA log backups.</span></span> <span data-ttu-id="b5917-354">Bu yedeklemeler gerek toobe mümkün toocover hello dönemleri hello depolama anlık görüntüleri arasında günlük.</span><span class="sxs-lookup"><span data-stu-id="b5917-354">These log backups need toobe able toocover hello time periods between hello storage snapshots.</span></span> <span data-ttu-id="b5917-355">30 günlük bir zaman içinde nokta kurtarma taahhüt toousers oluşturmadıysanız, hello aşağıdaki gerekir:</span><span class="sxs-lookup"><span data-stu-id="b5917-355">If you've set a commitment toousers of a point-in-time recovery of 30 days, you need hello following:</span></span>

- <span data-ttu-id="b5917-356">Özelliği tooaccess 30 günden daha eski bir depolama anlık görüntüyü.</span><span class="sxs-lookup"><span data-stu-id="b5917-356">Ability tooaccess a storage snapshot that is 30 days old.</span></span>
- <span data-ttu-id="b5917-357">Merhaba son 30 gün içinde bitişik günlük yedeklemeler.</span><span class="sxs-lookup"><span data-stu-id="b5917-357">Contiguous log backups over hello last 30 days.</span></span>

<span data-ttu-id="b5917-358">Günlük yedeklerini Hello aralığında hello Yedekleme günlüğü de birimin anlık görüntüsünü oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b5917-358">In hello range of log backups, create a snapshot of hello backup log volume as well.</span></span> <span data-ttu-id="b5917-359">Ancak, yapabilmeniz emin tooperform normal günlük yedeklerini olabilir:</span><span class="sxs-lookup"><span data-stu-id="b5917-359">However, be sure tooperform regular log backups so that you can:</span></span>

- <span data-ttu-id="b5917-360">Merhaba bitişik günlük yedeklerini tooperform zaman içinde nokta kurtarma gerekli sahip.</span><span class="sxs-lookup"><span data-stu-id="b5917-360">Have hello contiguous log backups needed tooperform point-in-time recoveries.</span></span>
- <span data-ttu-id="b5917-361">Merhaba SAP HANA günlük birimi azalmasını önler.</span><span class="sxs-lookup"><span data-stu-id="b5917-361">Prevent hello SAP HANA log volume from running out of space.</span></span>

<span data-ttu-id="b5917-362">Merhaba son adımları tooschedule SAP HANA yedekleme günlükleri SAP HANA Studio'da biridir.</span><span class="sxs-lookup"><span data-stu-id="b5917-362">One of hello last steps is tooschedule SAP HANA backup logs in SAP HANA Studio.</span></span> <span data-ttu-id="b5917-363">Merhaba SAP HANA Yedekleme günlüğü hedef olan özel olarak oluşturulan hello hana/log\_yedeklemeler toplu /hana/log/backups hello bağlama noktası ile.</span><span class="sxs-lookup"><span data-stu-id="b5917-363">hello SAP HANA backup log target destination is hello specially created hana/log\_backups volume with hello mount point of /hana/log/backups.</span></span>

![SAP HANA yedekleme zamanlaması SAP HANA Studio'da günlüğe kaydeder](./media/hana-overview-high-availability-disaster-recovery/image5-schedule-backup.png)

<span data-ttu-id="b5917-365">Her 15 dakikadan daha sık yedeklemeler seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-365">You can choose backups that are more frequent than every 15 minutes.</span></span> <span data-ttu-id="b5917-366">Devam eden önermiyoruz rağmen bazı kullanıcılar bile günlük dakikada, yedeklemeler _üzerinden_ 15 dakika.</span><span class="sxs-lookup"><span data-stu-id="b5917-366">Some users even perform log backups every minute, although we do not recommend going _over_ 15 minutes.</span></span>

<span data-ttu-id="b5917-367">Merhaba son tooperform dosya tabanlı Yedekleme (sonra ilk kez yüklenirken SAP HANA hello) toocreate hello yedekleme kataloğu içinde bulunması gereken tek bir yedekleme girişi adımdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-367">hello final step is tooperform a file-based backup (after hello initial installation of SAP HANA) toocreate a single backup entry that must exist within hello backup catalog.</span></span> <span data-ttu-id="b5917-368">Aksi takdirde SAP HANA belirtilen günlük Yedeklemelerinizin başlatamaz.</span><span class="sxs-lookup"><span data-stu-id="b5917-368">Otherwise SAP HANA cannot initiate your specified log backups.</span></span>

![Dosya tabanlı Yedekleme toocreate tek bir yedekleme giriş yapın](./media/hana-overview-high-availability-disaster-recovery/image6-make-backup.png)

### <a name="monitoring-hello-number-and-size-of-snapshots-on-hello-disk-volume"></a><span data-ttu-id="b5917-370">Merhaba sayısını ve boyutunu hello disk birimi anlık görüntü izleme</span><span class="sxs-lookup"><span data-stu-id="b5917-370">Monitoring hello number and size of snapshots on hello disk volume</span></span>

<span data-ttu-id="b5917-371">Bir depolama biriminde hello sayısı anlık görüntüler ve anlık görüntüleri hello depolama tüketimini izleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-371">On a particular storage volume, you can monitor hello number of snapshots and hello storage consumption of snapshots.</span></span> <span data-ttu-id="b5917-372">Merhaba `ls` değil Göster komutu hello anlık görüntü dizin veya dosyalar.</span><span class="sxs-lookup"><span data-stu-id="b5917-372">hello `ls` command doesn't show hello snapshot directory or files.</span></span> <span data-ttu-id="b5917-373">Ancak, Linux işletim sistemi komutu hello `du` , komutları aşağıdaki hello ile yapar:</span><span class="sxs-lookup"><span data-stu-id="b5917-373">However, hello Linux OS command `du` does, with hello following commands:</span></span>

- <span data-ttu-id="b5917-374">`du –sh .snapshot`Başlangıç anlık görüntü dizini içindeki tüm anlık görüntüleri toplam sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-374">`du –sh .snapshot` provides a total of all snapshots within hello snapshot directory.</span></span>
- <span data-ttu-id="b5917-375">`du –sh --max-depth=1`Merhaba .snapshot klasörü ve her anlık görüntü boyutunu hello kaydedilmiş tüm anlık görüntüleri listeler.</span><span class="sxs-lookup"><span data-stu-id="b5917-375">`du –sh --max-depth=1` lists all snapshots that are saved in hello .snapshot folder and hello size of each snapshot.</span></span>
- <span data-ttu-id="b5917-376">`du –hc`tüm anlık görüntüleri tarafından kullanılan hello toplam boyutu sağlar.</span><span class="sxs-lookup"><span data-stu-id="b5917-376">`du –hc` provides hello total size used by all snapshots.</span></span>

<span data-ttu-id="b5917-377">Bu komutlar toomake hello birimlerde tüm hello depolama alınır ve depolanan hello anlık görüntüleri kullanma değil emin kullanın.</span><span class="sxs-lookup"><span data-stu-id="b5917-377">Use these commands toomake sure that hello snapshots that are taken and stored are not consuming all hello storage on hello volumes.</span></span>

### <a name="reducing-hello-number-of-snapshots-on-a-server"></a><span data-ttu-id="b5917-378">Anlık görüntüler bir sunucuda Hello sayısını azaltma</span><span class="sxs-lookup"><span data-stu-id="b5917-378">Reducing hello number of snapshots on a server</span></span>

<span data-ttu-id="b5917-379">Daha önce açıklandığı gibi hello belirli etiketleri depoladığınız anlık görüntü sayısını azaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-379">As explained earlier, you can reduce hello number of certain labels of snapshots that you store.</span></span> <span data-ttu-id="b5917-380">Merhaba tooretain hello komutu tooinitiate bir anlık görüntüsü olan bir etiketi ve hello istediğiniz anlık görüntü sayısı iki parametrelerinin son.</span><span class="sxs-lookup"><span data-stu-id="b5917-380">hello last two parameters of hello command tooinitiate a snapshot are a label and hello number of snapshots you want tooretain.</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="b5917-381">Başlangıç anlık görüntü etiketi Hello önceki örnekte olduğu _müşteri_ ve anlık görüntüleri korunur Bu etiket toobe ile Merhaba sayısı _20_.</span><span class="sxs-lookup"><span data-stu-id="b5917-381">In hello previous example, hello snapshot label is _customer_ and hello number of snapshots with this label toobe retained is _20_.</span></span> <span data-ttu-id="b5917-382">Toodisk alanı tüketimini yanıt olarak tooreduce hello depolanan anlık görüntü sayısı isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-382">As you respond toodisk space consumption, you might want tooreduce hello number of stored snapshots.</span></span> <span data-ttu-id="b5917-383">Merhaba kolay yol tooreduce hello anlık görüntüleri sayısıdır hello son parametre kümesi too5 ile toorun hello komut dosyası:</span><span class="sxs-lookup"><span data-stu-id="b5917-383">hello easy way tooreduce hello number of snapshots is toorun hello script with hello last parameter set too5:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 5
```
<span data-ttu-id="b5917-384">Bu ayar ile çalışan hello betik sonucunda hello anlık görüntüler, anlık görüntü, hello yeni depolama alanı ile birlikte sayısıdır _5_.</span><span class="sxs-lookup"><span data-stu-id="b5917-384">As a result of running hello script with this setting, hello number of snapshots, including hello new storage snapshot, is _5_.</span></span>

 >[!NOTE]
 > <span data-ttu-id="b5917-385">Yalnızca hello en son önceki anlık görüntünün birden fazla bir saat öncesine ise bu komut dosyası anlık görüntüleri hello sayısını azaltır.</span><span class="sxs-lookup"><span data-stu-id="b5917-385">This script reduces hello number of snapshots only if hello most recent previous snapshot is more than one hour old.</span></span> <span data-ttu-id="b5917-386">Merhaba betik değerinden bir saat öncesine anlık görüntüleri silmez.</span><span class="sxs-lookup"><span data-stu-id="b5917-386">hello script does not delete snapshots that are less than one hour old.</span></span>

<span data-ttu-id="b5917-387">Bu kısıtlamalar sunulan ilgili toohello isteğe bağlı olağanüstü durum kurtarma işlevselliği ' dir.</span><span class="sxs-lookup"><span data-stu-id="b5917-387">These restrictions are related toohello optional disaster-recovery functionality offered.</span></span>

<span data-ttu-id="b5917-388">Toomaintain Bu önek ile anlık görüntü kümesi artık istemiyorsanız hello komut dosyasıyla yürütebilir _0_ Bu önek eşleştirme tüm anlık görüntüleri tooremove hello bekletme sayı olarak.</span><span class="sxs-lookup"><span data-stu-id="b5917-388">If you no longer want toomaintain a set of snapshots with that prefix, you can execute hello script with _0_ as hello retention number tooremove all snapshots matching that prefix.</span></span> <span data-ttu-id="b5917-389">Ancak, tüm anlık görüntüleri kaldırma olağanüstü durum kurtarma hello yeteneklerini etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-389">However, removing all snapshots can affect hello capabilities of disaster recovery.</span></span>

### <a name="recovering-toohello-most-recent-hana-snapshot"></a><span data-ttu-id="b5917-390">Toohello en son HANA anlık görüntü kurtarma</span><span class="sxs-lookup"><span data-stu-id="b5917-390">Recovering toohello most recent HANA snapshot</span></span>

<span data-ttu-id="b5917-391">Merhaba olayda karşılaştığınız bir üretim aşağı senaryo, bir depolama anlık görüntüden kurtarma işleminin hello müşterilerde SAP HANA Azure Hizmet Yönetimi ile olarak başlatılabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-391">In hello event that you experience a production-down scenario, hello process of recovering from a storage snapshot can be initiated as a customer incident with SAP HANA on Azure Service Management.</span></span> <span data-ttu-id="b5917-392">Veriler tooretrieve hello verilerdir toorestore hello üretim veritabanını bir üretim sistem ve hello yalnızca şekilde silindiyse beklenmeyen bir senaryo yüksek aciliyet sağlasa da olabilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-392">Such an unexpected scenario might be a high-urgency matter if data was deleted in a production system and hello only way tooretrieve hello data is toorestore hello production database.</span></span>

<span data-ttu-id="b5917-393">Merhaba diğer yandan, zaman içinde nokta kurtarma düşük aciliyet olabilir ve önceden gün planlı.</span><span class="sxs-lookup"><span data-stu-id="b5917-393">On hello other hand, a point-in-time recovery could be low urgency and planned for days in advance.</span></span> <span data-ttu-id="b5917-394">Yüksek öncelikli sorunu oluşturma yerine, bu kurtarma SAP HANA ile Azure Hizmet Yönetimi planlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-394">You can plan this recovery with SAP HANA on Azure Service Management instead of raising a high-priority issue.</span></span> <span data-ttu-id="b5917-395">Örneğin, tootry hello SAP yazılım yükseltmesini yeni bir geliştirme paketi ve uygulayarak planlama sonra toorevert hello EHP yükseltmeden önce hello durumunu temsil eden tooa anlık görüntü geri.</span><span class="sxs-lookup"><span data-stu-id="b5917-395">For example, you might be planning tootry an upgrade of hello SAP software by applying a new enhancement package, and you then need toorevert back tooa snapshot that represents hello state before hello EHP upgrade.</span></span>

<span data-ttu-id="b5917-396">Merhaba isteği gönderin önce bazı hazırlık toodo gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-396">Before you issue hello request, you need toodo some preparation.</span></span> <span data-ttu-id="b5917-397">SAP HANA Azure Hizmet Yönetimi ekipteki sonra hello isteği işlemek ve geri hello birimleri sağlayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-397">SAP HANA on Azure Service Management team can then handle hello request and provide hello restored volumes.</span></span> <span data-ttu-id="b5917-398">Daha sonra tooyou toorestore hello HANA veritabanına hello anlık görüntü tabanlı çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="b5917-398">Afterward, it is up tooyou toorestore hello HANA database based on hello snapshots.</span></span> <span data-ttu-id="b5917-399">İşte nasıl hello tooprepare iste:</span><span class="sxs-lookup"><span data-stu-id="b5917-399">Here is how tooprepare for hello request:</span></span>

>[!NOTE]
><span data-ttu-id="b5917-400">Kullanıcı arabirimi, ekran görüntüleri, kullanmakta olduğunuz SAP HANA yayın hello bağlı olarak aşağıdaki hello kadar değişiklik gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-400">Your user interface might vary from hello following screenshots, depending on hello SAP HANA release you are using.</span></span>

1. <span data-ttu-id="b5917-401">Hangi anlık görüntü toorestore karar verin.</span><span class="sxs-lookup"><span data-stu-id="b5917-401">Decide which snapshot toorestore.</span></span> <span data-ttu-id="b5917-402">Aksi takdirde belirtmediği sürece yalnızca hello hana/veri birimi geri.</span><span class="sxs-lookup"><span data-stu-id="b5917-402">Only hello hana/data volume would be restored unless you are instructed otherwise.</span></span>

2. <span data-ttu-id="b5917-403">Merhaba HANA örneği kapatın.</span><span class="sxs-lookup"><span data-stu-id="b5917-403">Shut down hello HANA instance.</span></span>

 ![Merhaba HANA örneği Kapat](./media/hana-overview-high-availability-disaster-recovery/image7-shutdown-hana.png)

3. <span data-ttu-id="b5917-405">Merhaba veri birimleri her HANA veritabanına düğümde çıkarın.</span><span class="sxs-lookup"><span data-stu-id="b5917-405">Unmount hello data volumes on each HANA database node.</span></span> <span data-ttu-id="b5917-406">Merhaba veri birimleri kaldırılan değilse hello anlık görüntüsünün hello geri yükleme başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="b5917-406">hello restoration of hello snapshot fails if hello data volumes are not unmounted.</span></span>

 ![Her HANA veritabanına düğümde Hello veri birimleri çıkarın](./media/hana-overview-high-availability-disaster-recovery/image8-unmount-data-volumes.png)

4. <span data-ttu-id="b5917-408">Bir Azure destek isteği tooinstruct hello belirli bir anlık görüntüye geri açın.</span><span class="sxs-lookup"><span data-stu-id="b5917-408">Open an Azure support request tooinstruct hello restoration of a specific snapshot.</span></span>

 - <span data-ttu-id="b5917-409">Merhaba geri yükleme sırasında: SAP HANA Azure Hizmet Yönetimi, tooattend hiçbir veri kaybı konferans tooensure isteyebilir.</span><span class="sxs-lookup"><span data-stu-id="b5917-409">During hello restoration: SAP HANA on Azure Service Management might ask you tooattend a conference call tooensure that no data is getting lost.</span></span>

 - <span data-ttu-id="b5917-410">Merhaba geri yükleme sonrasında: SAP HANA Azure hizmet yönetimi hakkında sizi uyarır hello depolama anlık görüntü geri olduğunda.</span><span class="sxs-lookup"><span data-stu-id="b5917-410">After hello restoration: SAP HANA on Azure Service Management notifies you when hello storage snapshot has been restored.</span></span>

5. <span data-ttu-id="b5917-411">Merhaba geri yükleme işlemi tamamlandıktan sonra tüm veri birimleri yeniden bağlayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-411">After hello restoration process is complete, remount all data volumes.</span></span>

 ![Tüm veri birimleri yeniden bağlayın](./media/hana-overview-high-availability-disaster-recovery/image9-remount-data-volumes.png)

6. <span data-ttu-id="b5917-413">SAP HANA Studio aracılığıyla tooHANA DB bağlandığınızda bunlar otomatik olarak değil oluşturduysanız SAP HANA Studio'dan kurtarma seçeneklerini seçin.</span><span class="sxs-lookup"><span data-stu-id="b5917-413">Select recovery options within SAP HANA Studio, if they do not automatically come up when you reconnect tooHANA DB through SAP HANA Studio.</span></span> <span data-ttu-id="b5917-414">Merhaba aşağıdaki örnekte bir geri yükleme toohello son HANA anlık gösterir.</span><span class="sxs-lookup"><span data-stu-id="b5917-414">hello following example shows a restoration toohello last HANA snapshot.</span></span> <span data-ttu-id="b5917-415">Bir HANA anlık görüntü depolama anlık görüntü eklemeleri ve toohello en son depolama anlık görüntü geri yüklüyorsanız, hello en son HANA anlık görüntü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b5917-415">A storage snapshot embeds one HANA snapshot, and if you are restoring toohello most recent storage snapshot, it should be hello most recent HANA snapshot.</span></span> <span data-ttu-id="b5917-416">(Tooolder depolama anlık görüntüleri geri yüklüyorsanız, toolocate gereken hello HANA anlık görüntü hello hello depolama anlık görüntü üzerinde temel alındığı.)</span><span class="sxs-lookup"><span data-stu-id="b5917-416">(If you are restoring tooolder storage snapshots, you need toolocate hello HANA snapshot based on hello time hello storage snapshot was taken.)</span></span>

 ![SAP HANA Studio içinde kurtarma seçeneklerini seçin](./media/hana-overview-high-availability-disaster-recovery/image10-recover-options-a.png)

7. <span data-ttu-id="b5917-418">Seçin **Kurtar hello veritabanı tooa belirli veri yedekleme depolama anlık görüntü veya**.</span><span class="sxs-lookup"><span data-stu-id="b5917-418">Select **Recover hello database tooa specific data backup or storage snapshot**.</span></span>

 ![Merhaba "Kurtarma türünü belirtin" penceresi](./media/hana-overview-high-availability-disaster-recovery/image11-recover-options-b.png)

8. <span data-ttu-id="b5917-420">Seçin **belirt yedekleme kataloğu olmadan**.</span><span class="sxs-lookup"><span data-stu-id="b5917-420">Select **Specify backup without catalog**.</span></span>

 ![Merhaba "Yedekleme konumu belirtin" penceresi](./media/hana-overview-high-availability-disaster-recovery/image12-recover-options-c.png)

9. <span data-ttu-id="b5917-422">Merhaba, **hedef türü** listesinde **anlık görüntü**.</span><span class="sxs-lookup"><span data-stu-id="b5917-422">In hello **Destination Type** list, select **Snapshot**.</span></span>

 ![Merhaba "Belirt hello yedekleme tooRecover" penceresi](./media/hana-overview-high-availability-disaster-recovery/image13-recover-options-d.png)

10. <span data-ttu-id="b5917-424">Tıklatın **son** toostart hello kurtarma işlemi.</span><span class="sxs-lookup"><span data-stu-id="b5917-424">Click **Finish** toostart hello recovery process.</span></span>

 ![Toostart hello kurtarma işlemi "Bitir"'ı tıklatın](./media/hana-overview-high-availability-disaster-recovery/image14-recover-options-e.png)

11. <span data-ttu-id="b5917-426">Merhaba HANA veritabanına geri yüklenir ve hello depolama anlık görüntüsüne dahil toohello HANA anlık görüntü kurtarıldı.</span><span class="sxs-lookup"><span data-stu-id="b5917-426">hello HANA database is restored and recovered toohello HANA snapshot that's included in hello storage snapshot.</span></span>

 ![HANA veritabanına geri yüklenen ve kurtarılan toohello HANA anlık görüntüsüdür](./media/hana-overview-high-availability-disaster-recovery/image15-recover-options-f.png)

### <a name="recovering-toohello-most-recent-state"></a><span data-ttu-id="b5917-428">Toohello en son durumunu kurtarma</span><span class="sxs-lookup"><span data-stu-id="b5917-428">Recovering toohello most recent state</span></span>

<span data-ttu-id="b5917-429">Merhaba aşağıdaki süreci hello depolama anlık görüntüsüne dahil hello HANA anlık görüntü geri yükler.</span><span class="sxs-lookup"><span data-stu-id="b5917-429">hello following process restores hello HANA snapshot that is included in hello storage snapshot.</span></span> <span data-ttu-id="b5917-430">Ardından, hello depolama anlık görüntü geri yüklemeden önce hello işlem günlüğü yedeklemeleri toohello en son hello veritabanının durumu da yükler.</span><span class="sxs-lookup"><span data-stu-id="b5917-430">It then restores hello transaction log backups toohello most recent state of hello database before restoring hello storage snapshot.</span></span>

>[!IMPORTANT]
><span data-ttu-id="b5917-431">Devam etmeden önce işlem günlüğü yedeklemeleri tam ve bitişik zincirine sahip olduğunuzdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="b5917-431">Before you proceed, make sure that you have a complete and contiguous chain of transaction log backups.</span></span> <span data-ttu-id="b5917-432">Bu yedeklemeler hello veritabanının geçerli durumu hello geri yükleyemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-432">Without these backups, you cannot restore hello current state of hello database.</span></span>

1. <span data-ttu-id="b5917-433">"Kurtarma toohello en son HANA anlık." yordamdan önceki hello 1-6 adımlarını tamamlamanız</span><span class="sxs-lookup"><span data-stu-id="b5917-433">Complete steps 1-6 of hello preceding procedure in "Recovering toohello most recent HANA snapshot."</span></span>

2. <span data-ttu-id="b5917-434">Seçin **kurtarmak hello veritabanı tooits en son durumunu**.</span><span class="sxs-lookup"><span data-stu-id="b5917-434">Select **Recover hello database tooits most recent state**.</span></span>

 !["Hello veritabanı tooits en son durumunu kurtarmak" seçin](./media/hana-overview-high-availability-disaster-recovery/image16-recover-database-a.png)

3. <span data-ttu-id="b5917-436">Merhaba en son HANA günlük yedeklerini Hello konumunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="b5917-436">Specify hello location of hello most recent HANA log backups.</span></span> <span data-ttu-id="b5917-437">Başlangıç konumu toocontain hello HANA anlık görüntü toohello en son durumundaki tüm HANA işlem günlüğü yedeklemeleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-437">hello location needs toocontain all HANA transaction log backups from hello HANA snapshot toohello most recent state.</span></span>

 ![Merhaba en son HANA günlük yedeklerini Hello konumunu belirtin](./media/hana-overview-high-availability-disaster-recovery/image17-recover-database-b.png)

4. <span data-ttu-id="b5917-439">Hangi toorecover hello veritabanından temel olarak bir yedek seçin.</span><span class="sxs-lookup"><span data-stu-id="b5917-439">Select a backup as a base from which toorecover hello database.</span></span> <span data-ttu-id="b5917-440">Bizim örneğimizde, bu hello depolama anlık görüntüsüne dahil hello HANA anlık görüntüsüdür.</span><span class="sxs-lookup"><span data-stu-id="b5917-440">In our example, this is hello HANA snapshot that was included in hello storage snapshot.</span></span> <span data-ttu-id="b5917-441">(Yalnızca bir anlık görüntü ekran aşağıdaki hello listelenir.)</span><span class="sxs-lookup"><span data-stu-id="b5917-441">(Only one snapshot is listed in hello following screenshot.)</span></span>

 ![Hangi toorecover hello veritabanından temel olarak bir yedek seçin.](./media/hana-overview-high-availability-disaster-recovery/image18-recover-database-c.png)

5. <span data-ttu-id="b5917-443">Clear hello **kullanım değişim yedeklemeleri** hello HANA anlık görüntü başlangıç saati ve hello en son durum farkları yoksa, kutuyu.</span><span class="sxs-lookup"><span data-stu-id="b5917-443">Clear hello **Use Delta Backups** check box if deltas do not exist between hello time of hello HANA snapshot and hello most recent state.</span></span>

 ![Hiçbir farkları varsa Temizle hello "Kullanım Delta yedekler" onay kutusu](./media/hana-overview-high-availability-disaster-recovery/image19-recover-database-d.png)

6. <span data-ttu-id="b5917-445">Merhaba Özet ekranında tıklatın **son** toostart hello geri yükleme yordamı.</span><span class="sxs-lookup"><span data-stu-id="b5917-445">On hello summary screen, click **Finish** toostart hello restoration procedure.</span></span>

 !["Bitir" Merhaba Özet ekranında'ı tıklatın.](./media/hana-overview-high-availability-disaster-recovery/image20-recover-database-e.png)

### <a name="recovering-tooanother-point-in-time"></a><span data-ttu-id="b5917-447">Kurtarma tooanother noktaya</span><span class="sxs-lookup"><span data-stu-id="b5917-447">Recovering tooanother point in time</span></span>
<span data-ttu-id="b5917-448">Merhaba HANA anlık görüntü (Merhaba depolama anlık görüntüsüne dahil) arasındaki hello HANA zaman içinde nokta kurtarma anlık görüntüsünü daha sonraki bir zamanda toorecover tooa noktası hello aşağıdaki:</span><span class="sxs-lookup"><span data-stu-id="b5917-448">toorecover tooa point in time between hello HANA snapshot (included in hello storage snapshot) and one that is later than hello HANA snapshot point-in-time recovery, do hello following:</span></span>

1. <span data-ttu-id="b5917-449">Tüm işlem günlüğü yedeklemeleri zamandan toorecover istediğiniz hello HANA anlık görüntü toohello sahip olduğunuzdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="b5917-449">Make sure that you have all transaction log backups from hello HANA snapshot toohello time you want toorecover.</span></span>
2. <span data-ttu-id="b5917-450">Begin hello yordamı altında "Kurtarma toohello en son durumu."</span><span class="sxs-lookup"><span data-stu-id="b5917-450">Begin hello procedure under "Recovering toohello most recent state."</span></span>
3. <span data-ttu-id="b5917-451">Merhaba yordamda hello 2. adımda **kurtarma türünü belirtin** penceresinde, seçin **Kurtar hello veritabanı toohello aşağıdaki nokta**hello noktası süresini belirtin ve ardından 3-6 adımlarını tamamlayın.</span><span class="sxs-lookup"><span data-stu-id="b5917-451">In step 2 of hello procedure, in hello **Specify Recovery Type** window, select **Recover hello database toohello following point in time**, specify hello point in time, and then complete steps 3-6.</span></span>

## <a name="monitoring-hello-execution-of-snapshots"></a><span data-ttu-id="b5917-452">Anlık görüntü Hello yürütme izleme</span><span class="sxs-lookup"><span data-stu-id="b5917-452">Monitoring hello execution of snapshots</span></span>

<span data-ttu-id="b5917-453">Depolama anlık görüntüleri toomonitor hello yürütülmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="b5917-453">You need toomonitor hello execution of storage snapshots.</span></span> <span data-ttu-id="b5917-454">Depolama anlık görüntü yürütür hello betik çıktı tooa dosyasına yazar ve toohello kaydeder hello Perl betikleri aynı konumda.</span><span class="sxs-lookup"><span data-stu-id="b5917-454">hello script that executes a storage snapshot writes output tooa file and then saves it toohello same location as hello Perl scripts.</span></span> <span data-ttu-id="b5917-455">Her anlık görüntü için ayrı bir dosyaya yazılır.</span><span class="sxs-lookup"><span data-stu-id="b5917-455">A separate file is written for each snapshot.</span></span> <span data-ttu-id="b5917-456">her dosyanın Hello çıktı hello hello anlık görüntü betiği yürüten çeşitli aşamaları açıkça gösterir:</span><span class="sxs-lookup"><span data-stu-id="b5917-456">hello output of each file clearly shows hello various phases that hello snapshot script executes:</span></span>

- <span data-ttu-id="b5917-457">Bir anlık görüntü toocreate gereksinim hello birimleri bulma</span><span class="sxs-lookup"><span data-stu-id="b5917-457">Finding hello volumes that need toocreate a snapshot</span></span>
- <span data-ttu-id="b5917-458">Bu birimlerden gerçekleştirilecek hello anlık görüntüleri bulma</span><span class="sxs-lookup"><span data-stu-id="b5917-458">Finding hello snapshots taken from these volumes</span></span>
- <span data-ttu-id="b5917-459">Nihai varolan anlık görüntüleri toomatch hello belirttiğiniz anlık görüntü sayısı silme</span><span class="sxs-lookup"><span data-stu-id="b5917-459">Deleting eventual existing snapshots toomatch hello number of snapshots you specified</span></span>
- <span data-ttu-id="b5917-460">HANA anlık görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="b5917-460">Creating a HANA snapshot</span></span>
- <span data-ttu-id="b5917-461">Merhaba birimler üzerinde Hello depolama anlık görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="b5917-461">Creating hello storage snapshot over hello volumes</span></span>
- <span data-ttu-id="b5917-462">Merhaba HANA anlık görüntü silme</span><span class="sxs-lookup"><span data-stu-id="b5917-462">Deleting hello HANA snapshot</span></span>
- <span data-ttu-id="b5917-463">En son Hello çok anlık görüntü yeniden adlandırma**.0**</span><span class="sxs-lookup"><span data-stu-id="b5917-463">Renaming hello most recent snapshot too**.0**</span></span>

<span data-ttu-id="b5917-464">Merhaba en önemli hello betik bu parçasıdır:</span><span class="sxs-lookup"><span data-stu-id="b5917-464">hello most important part of hello script is this:</span></span>
```
**********************Creating HANA snapshot**********************
Creating hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data create snapshot"" ...
HANA snapshot created successfully.
**********************Creating Storage snapshot**********************
Taking snapshot hourly.recent for hana_data_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_backup_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_shared_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for sapmnt_lhanad01_t020_vol ...
Snapshot created successfully.
**********************Deleting HANA snapshot**********************
Deleting hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data drop snapshot"" ...
HANA snapshot deletion successfully.
```
<span data-ttu-id="b5917-465">Bu örnekten nasıl hello betik kayıtları oluşturma hello HANA anlık görüntüsünün hello görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b5917-465">You can see from this sample how hello script records hello creation of hello HANA snapshot.</span></span> <span data-ttu-id="b5917-466">Merhaba genişleme durumda hello ana düğüm üzerinde bu işlemi başlatılır.</span><span class="sxs-lookup"><span data-stu-id="b5917-466">In hello scale-out case, this process is initiated on hello master node.</span></span> <span data-ttu-id="b5917-467">Merhaba ana düğüm hello zaman uyumlu hello anlık görüntülerin her hello çalışan düğümleri oluşturulmasını başlatır.</span><span class="sxs-lookup"><span data-stu-id="b5917-467">hello master node initiates hello synchronous creation of hello snapshots on each of hello worker nodes.</span></span> <span data-ttu-id="b5917-468">Ardından hello depolama anlık görüntü alınır.</span><span class="sxs-lookup"><span data-stu-id="b5917-468">Then hello storage snapshot is taken.</span></span> <span data-ttu-id="b5917-469">Merhaba aktarılmadığı hello depolama anlık görüntüleri sonra hello HANA anlık görüntü silinir.</span><span class="sxs-lookup"><span data-stu-id="b5917-469">After hello successful execution of hello storage snapshots, hello HANA snapshot is deleted.</span></span>
