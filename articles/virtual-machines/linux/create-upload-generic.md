---
title: "aaaCreate ve azure'da bir Linux VHD karşıya yükle"
description: "Bir Azure sanal sabit Linux işletim sistemi içeren disk (VHD) yüklemek ve toocreate öğrenin."
services: virtual-machines-linux
documentationcenter: 
author: szarkos
manager: timlt
editor: tysonn
tags: azure-resource-manager,azure-service-management
ms.assetid: d351396c-95a0-4092-b7bf-c6aae0bbd112
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 02/02/2017
ms.author: szark
ms.openlocfilehash: 208e15c035edb5520fc29ba8e4e71c42b041864d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="information-for-non-endorsed-distributions"></a><span data-ttu-id="81fca-103">Desteklenmeyen Dağıtımlarla ilgili bilgiler</span><span class="sxs-lookup"><span data-stu-id="81fca-103">Information for Non-Endorsed Distributions</span></span>
[!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="81fca-104">Hello Azure platformu SLA hello yalnızca bir zaman Linux işletim sistemi çalıştıran toovirtual makineler geçerlidir Merhaba, [destekli dağıtımlar](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) kullanılır.</span><span class="sxs-lookup"><span data-stu-id="81fca-104">hello Azure platform SLA applies toovirtual machines running hello Linux OS only when one of hello [endorsed distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) is used.</span></span> <span data-ttu-id="81fca-105">Hello Azure görüntü Galerisi sağlanan olan tüm Linux dağıtımları hello gerekli yapılandırma ile destekli dağıtımlar.</span><span class="sxs-lookup"><span data-stu-id="81fca-105">All Linux distributions that are provided in hello Azure image gallery are endorsed distributions with hello required configuration.</span></span>

* [<span data-ttu-id="81fca-106">Azure - Linux'ta destekli dağıtımlar</span><span class="sxs-lookup"><span data-stu-id="81fca-106">Linux on Azure - Endorsed Distributions</span></span>](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="81fca-107">Microsoft Azure Linux görüntüleri için destek</span><span class="sxs-lookup"><span data-stu-id="81fca-107">Support for Linux images in Microsoft Azure</span></span>](https://support.microsoft.com/kb/2941892)

<span data-ttu-id="81fca-108">Azure üzerinde çalışan tüm dağıtımları toomeet Önkoşullar toohave hello platformda çalışması fırsat tooproperly sayısı gerekir.</span><span class="sxs-lookup"><span data-stu-id="81fca-108">All distributions running on Azure will need toomeet a number of prerequisites toohave a chance tooproperly run on hello platform.</span></span>  <span data-ttu-id="81fca-109">Her dağıtım farklı olarak bu makalede halinde kapsamlı; ve yine gerekir tüm hello aşağıdaki ölçütlere uyan olsa bile toosignificantly hello platformda düzgün çalışır, Linux sistem tooensure ince ayar oldukça mümkündür.</span><span class="sxs-lookup"><span data-stu-id="81fca-109">This article is by no means comprehensive as every distribution is different; and it is quite possible that even if you meet all hello criteria below you will still need toosignificantly tweak your Linux system tooensure that it properly runs on hello platform.</span></span>

<span data-ttu-id="81fca-110">Biri ile başlamanızı öneririz bu nedenle için bizim [Azure destekli dağıtımlar Linux'ta](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) mümkün olduğunda.</span><span class="sxs-lookup"><span data-stu-id="81fca-110">It is for this reason that we recommend that you start with one of our [Linux on Azure Endorsed Distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) when possible.</span></span> <span data-ttu-id="81fca-111">Merhaba Aşağıdaki makaleler, nasıl tooprepare hello aracılığıyla çeşitli yönlendirecek Azure üzerinde desteklenen Linux dağıtımları destekli:</span><span class="sxs-lookup"><span data-stu-id="81fca-111">hello following articles will guide you through how tooprepare hello various endorsed Linux distributions that are supported on Azure:</span></span>

* <span data-ttu-id="81fca-112">**[CentOS tabanlı dağıtımlar](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-112">**[CentOS-based Distributions](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="81fca-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="81fca-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="81fca-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="81fca-116">**[SLES & openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-116">**[SLES & openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="81fca-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="81fca-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>

<span data-ttu-id="81fca-118">Merhaba, bu makalenin kalanında Linux dağıtımınızı Azure üzerinde çalışan için genel rehberlik özelliklere odaklanır.</span><span class="sxs-lookup"><span data-stu-id="81fca-118">hello rest of this article will focus on general guidance for running your Linux distribution on Azure.</span></span>

## <a name="general-linux-installation-notes"></a><span data-ttu-id="81fca-119">Genel Linux yükleme notları</span><span class="sxs-lookup"><span data-stu-id="81fca-119">General Linux Installation Notes</span></span>
* <span data-ttu-id="81fca-120">Merhaba VHDX biçimi, Azure'da yalnızca desteklenmiyor **VHD sabit**.</span><span class="sxs-lookup"><span data-stu-id="81fca-120">hello VHDX format is not supported in Azure, only **fixed VHD**.</span></span>  <span data-ttu-id="81fca-121">Hyper-V Yöneticisi'ni kullanarak hello disk tooVHD biçimine Dönüştür veya convert-vhd cmdlet hello.</span><span class="sxs-lookup"><span data-stu-id="81fca-121">You can convert hello disk tooVHD format using Hyper-V Manager or hello convert-vhd cmdlet.</span></span> <span data-ttu-id="81fca-122">VirtualBox kullanıyorsanız bu seçerek gelir **boyutu sabit** olarak hello disk oluşturulurken dinamik olarak ayrılan toohello varsayılan değil.</span><span class="sxs-lookup"><span data-stu-id="81fca-122">If you are using VirtualBox this means selecting **Fixed size** as opposed toohello default dynamically allocated when creating hello disk.</span></span>
* <span data-ttu-id="81fca-123">Azure yalnızca 1. nesil sanal makineleri desteklemektedir.</span><span class="sxs-lookup"><span data-stu-id="81fca-123">Azure only supports generation 1 virtual machines.</span></span> <span data-ttu-id="81fca-124">Disk 1'sanal makine VHDX toohello VHD dosyası biçimi ve dinamik olarak genişletilen tooa sabit boyutlu bir nesil dönüştürebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81fca-124">You can convert a generation 1 virtual machine from VHDX toohello VHD file format and from dynamically expanding tooa fixed sized disk.</span></span> <span data-ttu-id="81fca-125">Ancak, bir sanal makinenin oluşturma değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="81fca-125">But you can't change a virtual machine's generation.</span></span> <span data-ttu-id="81fca-126">Daha fazla bilgi için bkz: [Hyper-V'de 1 veya 2. nesil sanal makine oluşturmalısınız?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span><span class="sxs-lookup"><span data-stu-id="81fca-126">For more information, see [Should I create a generation 1 or 2 virtual machine in Hyper-V?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span></span>
* <span data-ttu-id="81fca-127">Merhaba en büyük boyutu Merhaba VHD 1,023 GB izin verilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-127">hello maximum size allowed for hello VHD is 1,023 GB.</span></span>
* <span data-ttu-id="81fca-128">Merhaba Linux sistemi yüklerken olan *önerilen* LVM (genellikle birçok yüklemeleri için hello varsayılan) yerine standart bölümleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="81fca-128">When installing hello Linux system it is *recommended* that you use standard partitions rather than LVM (often hello default for many installations).</span></span> <span data-ttu-id="81fca-129">Özellikle bir işletim sistemi diski bağlı toobe tooanother hiç gerekiyorsa bu kopyalanan VM'ler LVM adıyla çakışıyor kurtulursunuz sorun giderme için aynı VM.</span><span class="sxs-lookup"><span data-stu-id="81fca-129">This will avoid LVM name conflicts with cloned VMs, particularly if an OS disk ever needs toobe attached tooanother identical VM for troubleshooting.</span></span> <span data-ttu-id="81fca-130">[LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) veya [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) veri diskler üzerinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-130">[LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) or [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) may be used on data disks.</span></span>
* <span data-ttu-id="81fca-131">UDF dosya sistemleri bağlanması için çekirdek desteği gereklidir.</span><span class="sxs-lookup"><span data-stu-id="81fca-131">Kernel support for mounting UDF file systems is required.</span></span> <span data-ttu-id="81fca-132">Sağlama yapılandırma Azure hello üzerinde ilk önyükleme sırasında toohello Linux VM ekli toohello Konuk UDF biçimli ortamının geçirilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-132">At first boot on Azure hello provisioning configuration is passed toohello Linux VM via UDF-formatted media that is attached toohello guest.</span></span> <span data-ttu-id="81fca-133">Hello Azure Linux Aracısı yapılandırmasını mümkün toomount hello UDF dosya sistemi tooread olması gerekir ve hello VM sağlayın.</span><span class="sxs-lookup"><span data-stu-id="81fca-133">hello Azure Linux agent must be able toomount hello UDF file system tooread its configuration and provision hello VM.</span></span>
* <span data-ttu-id="81fca-134">Linux çekirdek sürümleri 2.6.37 aşağıda NUMA ile büyük VM boyutları üzerinde Hyper-V desteklemez.</span><span class="sxs-lookup"><span data-stu-id="81fca-134">Linux kernel versions below 2.6.37 do not support NUMA on Hyper-V with larger VM sizes.</span></span> <span data-ttu-id="81fca-135">Eski dağıtımları hello upstream kullanarak bu sorun öncelikle etkileri Red Hat 2.6.32 çekirdek ve RHEL 6.6 (çekirdek 2.6.32 504) giderilmiştir.</span><span class="sxs-lookup"><span data-stu-id="81fca-135">This issue primarily impacts older distributions using hello upstream Red Hat 2.6.32 kernel, and was fixed in RHEL 6.6 (kernel-2.6.32-504).</span></span> <span data-ttu-id="81fca-136">2.6.32-504 ayarlamalısınız daha özel tekrar 2.6.37 eski veya tekrar eski RHEL tabanlı çalıştıran sistemlerde hello önyükleme parametresinin `numa=off` hello çekirdeğini grub.conf içinde komut satırı.</span><span class="sxs-lookup"><span data-stu-id="81fca-136">Systems running custom kernels older than 2.6.37, or RHEL-based kernels older than 2.6.32-504 must set hello boot parameter `numa=off` on hello kernel command-line in grub.conf.</span></span> <span data-ttu-id="81fca-137">Red Hat daha fazla bilgi için bkz: [KB 436883](https://access.redhat.com/solutions/436883).</span><span class="sxs-lookup"><span data-stu-id="81fca-137">For more information see Red Hat [KB 436883](https://access.redhat.com/solutions/436883).</span></span>
* <span data-ttu-id="81fca-138">Bir takas bölüm hello işletim sistemi disk üzerinde yapılandırmayın.</span><span class="sxs-lookup"><span data-stu-id="81fca-138">Do not configure a swap partition on hello OS disk.</span></span> <span data-ttu-id="81fca-139">Merhaba Linux Aracısı yapılandırılmış toocreate hello geçici kaynak disk üzerinde bir takas dosyası olabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-139">hello Linux agent can be configured toocreate a swap file on hello temporary resource disk.</span></span>  <span data-ttu-id="81fca-140">Merhaba aşağıdaki adımlarda bu hakkında daha fazla bilgi bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-140">More information about this can be found in hello steps below.</span></span>
* <span data-ttu-id="81fca-141">Tüm hello VHD boyutları 1 MB'ün katları olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="81fca-141">All of hello VHDs must have sizes that are multiples of 1 MB.</span></span>

### <a name="installing-kernel-modules-without-hyper-v"></a><span data-ttu-id="81fca-142">Hyper-V olmadan çekirdek modülleri yükleme</span><span class="sxs-lookup"><span data-stu-id="81fca-142">Installing kernel modules without Hyper-V</span></span>
<span data-ttu-id="81fca-143">Azure hello Hyper-V hiper yönetici üzerinde çalışır ve böylece Linux belirli çekirdek modülleri sipariş toorun Azure'nın yüklü olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="81fca-143">Azure runs on hello Hyper-V hypervisor, so Linux requires that certain kernel modules are installed in order toorun in Azure.</span></span> <span data-ttu-id="81fca-144">Hyper-V dışında oluşturulmuş bir VM'niz varsa, çalışıp çalışmadığını algılar sürece hello Linux yükleyicileri hello sürücüleri Hyper-V için hello ilk ramdisk (initrd veya initramfs) içinde içeremeyen bir Hyper-V ortamı.</span><span class="sxs-lookup"><span data-stu-id="81fca-144">If you have a VM that was created outside of Hyper-V, hello Linux installers may not include hello drivers for Hyper-V in hello initial ramdisk (initrd or initramfs) unless it detects that it is running an a Hyper-V environment.</span></span> <span data-ttu-id="81fca-145">Farklı sanallaştırma (yani Virtualbox, KVM, vb.) sistem tooprepare Linux görüntünüzü kullanırken, en az hello toorebuild hello initrd tooensure gerekebilir `hv_vmbus` ve `hv_storvsc` çekirdek modülleri hello ilk ramdisk üzerinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-145">When using a different virtualization system (i.e. Virtualbox, KVM, etc.) tooprepare your Linux image, you may need toorebuild hello initrd tooensure that at least hello `hv_vmbus` and `hv_storvsc` kernel modules are available on hello initial ramdisk.</span></span>  <span data-ttu-id="81fca-146">Bilinen bir sorun en az hello Yukarı Akış Red Hat dağıtım noktasında tabanlı sistemlerde budur.</span><span class="sxs-lookup"><span data-stu-id="81fca-146">This is a known issue at least on systems based on hello upstream Red Hat distribution.</span></span>

<span data-ttu-id="81fca-147">Merhaba initrd veya initramfs görüntüsünü yeniden oluşturma için hello mekanizması hello dağıtım bağlı olarak değişebilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-147">hello mechanism for rebuilding hello initrd or initramfs image may vary depending on hello distribution.</span></span> <span data-ttu-id="81fca-148">Lütfen dağıtım ait belgelere bakın veya hello uygun yordamı için destek.</span><span class="sxs-lookup"><span data-stu-id="81fca-148">Please consult your distribution's documentation or support for hello proper procedure.</span></span>  <span data-ttu-id="81fca-149">İşte nasıl toorebuild hello hello kullanarak initrd için bir örnek `mkinitrd` yardımcı programı:</span><span class="sxs-lookup"><span data-stu-id="81fca-149">Here is one example for how toorebuild hello initrd using hello `mkinitrd` utility:</span></span>

<span data-ttu-id="81fca-150">İlk hello varolan initrd görüntü yedekleyin:</span><span class="sxs-lookup"><span data-stu-id="81fca-150">First, back up hello existing initrd image:</span></span>

    # cd /boot
    # sudo cp initrd-`uname -r`.img  initrd-`uname -r`.img.bak

<span data-ttu-id="81fca-151">Ardından, hello initrd hello ile yeniden `hv_vmbus` ve `hv_storvsc` çekirdek modülleri:</span><span class="sxs-lookup"><span data-stu-id="81fca-151">Next, rebuild hello initrd with hello `hv_vmbus` and `hv_storvsc` kernel modules:</span></span>

    # sudo mkinitrd --preload=hv_storvsc --preload=hv_vmbus -v -f initrd-`uname -r`.img `uname -r`


### <a name="resizing-vhds"></a><span data-ttu-id="81fca-152">VHD'ler yeniden boyutlandırma</span><span class="sxs-lookup"><span data-stu-id="81fca-152">Resizing VHDs</span></span>
<span data-ttu-id="81fca-153">Azure üzerinde VHD görüntüleri hizalı sanal boyut too1MB olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="81fca-153">VHD images on Azure must have a virtual size aligned too1MB.</span></span>  <span data-ttu-id="81fca-154">Genellikle, Hyper-V kullanılarak oluşturulan VHD zaten doğru hizalanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="81fca-154">Typically, VHDs created using Hyper-V should already be aligned correctly.</span></span>  <span data-ttu-id="81fca-155">Toocreate çalıştığınızda bir hata iletisi benzer toohello aşağıdaki alabilirsiniz sonra hello VHD düzgün hizalanmış değil, bir *görüntü* , VHD'den:</span><span class="sxs-lookup"><span data-stu-id="81fca-155">If hello VHD is not aligned correctly then you may receive an error message similar toohello following when you attempt toocreate an *image* from your VHD:</span></span>

    "hello VHD http://<mystorageaccount>.blob.core.windows.net/vhds/MyLinuxVM.vhd has an unsupported virtual size of 21475270656 bytes. hello size must be a whole number (in MBs).”

<span data-ttu-id="81fca-156">tooremedy bu yeniden boyutlandır hello hello veya hello Hyper-V Manager konsolunu kullanarak VM [yeniden boyutlandırma VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="81fca-156">tooremedy this you can resize hello VM using either hello Hyper-V Manager console or hello [Resize-VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell cmdlet.</span></span>  <span data-ttu-id="81fca-157">Bir Windows ortamında çalıştırmıyorsanız toouse qemu img tooconvert (gerekirse) önerilir ve hello VHD yeniden boyutlandırın.</span><span class="sxs-lookup"><span data-stu-id="81fca-157">If you are not running in a Windows environment then it is recommended toouse qemu-img tooconvert (if needed) and resize hello VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="81fca-158">Qemu img sürümlerinde bilinen bir hata varsa > düzgün biçimlendirilmemiş bir VHD sonuçları 2.2.1 =.</span><span class="sxs-lookup"><span data-stu-id="81fca-158">There is a known bug in qemu-img versions >=2.2.1 that results in an improperly formatted VHD.</span></span> <span data-ttu-id="81fca-159">Merhaba sorunu QEMU 2.6 düzeltilmiştir.</span><span class="sxs-lookup"><span data-stu-id="81fca-159">hello issue has been fixed in QEMU 2.6.</span></span> <span data-ttu-id="81fca-160">Toouse önerilen qemu img 2.2.0 veya alt ya da güncelleştirme too2.6 ya da daha yüksek.</span><span class="sxs-lookup"><span data-stu-id="81fca-160">It is recommended toouse either qemu-img 2.2.0 or lower, or update too2.6 or higher.</span></span> <span data-ttu-id="81fca-161">Başvuru: https://bugs.launchpad.net/qemu/+bug/1490611.</span><span class="sxs-lookup"><span data-stu-id="81fca-161">Reference: https://bugs.launchpad.net/qemu/+bug/1490611.</span></span>
> 
> 

1. <span data-ttu-id="81fca-162">Yeniden boyutlandırma hello doğrudan gibi araçları kullanılarak VHD `qemu-img` veya `vbox-manage` önyüklenemez bir VHD neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-162">Resizing hello VHD directly using tools such as `qemu-img` or `vbox-manage` may result in an unbootable VHD.</span></span>  <span data-ttu-id="81fca-163">Bu nedenle toofirst dönüştürme hello VHD tooa ham disk görüntüsü önerilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-163">So it is recommended toofirst convert hello VHD tooa RAW disk image.</span></span>  <span data-ttu-id="81fca-164">Ham disk görüntüsü (KVM gibi bazı hiper yöneticilerin hello varsayılan) olarak Hello VM görüntüsü zaten oluşturulmuşsa, bu adımı atlayın:</span><span class="sxs-lookup"><span data-stu-id="81fca-164">If hello VM image was already created as RAW disk image (hello default for some Hypervisors such as KVM) then you may skip this step:</span></span>
   
       # qemu-img convert -f vpc -O raw MyLinuxVM.vhd MyLinuxVM.raw

2. <span data-ttu-id="81fca-165">Merhaba sanal boyut hello hello disk görüntü tooensure boyutunu hizalanmış too1MB gerekli hesaplayın.</span><span class="sxs-lookup"><span data-stu-id="81fca-165">Calculate hello required size of hello disk image tooensure that hello virtual size is aligned too1MB.</span></span>  <span data-ttu-id="81fca-166">bash Kabuk betiği aşağıdaki hello bu ile yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-166">hello following bash shell script can assist with this.</span></span>  <span data-ttu-id="81fca-167">Merhaba betik kullanır "`qemu-img info`" toodetermine hello sanal hello disk görüntü boyutu ve hello boyutu toohello hesaplar sonraki 1 MB:</span><span class="sxs-lookup"><span data-stu-id="81fca-167">hello script uses "`qemu-img info`" toodetermine hello virtual size of hello disk image and then calculates hello size toohello next 1MB:</span></span>
   
       rawdisk="MyLinuxVM.raw"
       vhddisk="MyLinuxVM.vhd"
   
       MB=$((1024*1024))
       size=$(qemu-img info -f raw --output json "$rawdisk" | \
              gawk 'match($0, /"virtual-size": ([0-9]+),/, val) {print val[1]}')
   
       rounded_size=$((($size/$MB + 1)*$MB))
       echo "Rounded Size = $rounded_size"

3. <span data-ttu-id="81fca-168">Betik yukarıdaki hello kümesinde olarak $rounded_size kullanarak hello ham disk yeniden boyutlandırma:</span><span class="sxs-lookup"><span data-stu-id="81fca-168">Resize hello raw disk using $rounded_size as set in hello above script:</span></span>
   
       # qemu-img resize MyLinuxVM.raw $rounded_size

4. <span data-ttu-id="81fca-169">Şimdi, hello ham disk geri tooa Dönüştür sabit boyutlu VHD:</span><span class="sxs-lookup"><span data-stu-id="81fca-169">Now, convert hello RAW disk back tooa fixed-size VHD:</span></span>
   
       # qemu-img convert -f raw -o subformat=fixed -O vpc MyLinuxVM.raw MyLinuxVM.vhd

   <span data-ttu-id="81fca-170">Veya qemu sürümüyle **2.6 +** hello dahil `force_size` seçeneği:</span><span class="sxs-lookup"><span data-stu-id="81fca-170">Or, with qemu version **2.6+** include hello `force_size` option:</span></span>

       # qemu-img convert -f raw -o subformat=fixed,force_size -O vpc MyLinuxVM.raw MyLinuxVM.vhd

## <a name="linux-kernel-requirements"></a><span data-ttu-id="81fca-171">Linux çekirdek gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="81fca-171">Linux Kernel Requirements</span></span>
<span data-ttu-id="81fca-172">Merhaba Hyper-V ve Microsoft Azure Linux Tümleştirme hizmetleri (LIS) sürücülerini katkısı doğrudan toohello Yukarı Akış Linux çekirdek.</span><span class="sxs-lookup"><span data-stu-id="81fca-172">hello Linux Integration Services (LIS) drivers for Hyper-V and Azure are contributed directly toohello upstream Linux kernel.</span></span> <span data-ttu-id="81fca-173">Yeni bir Linux çekirdek sürümü (yani 3.x) dahil birçok dağıtımları kullanılabilir bu sürücüleri zaten var veya aksi halde bu sürücüleri backported sürümleri ile bunların çekirdek sağlar.</span><span class="sxs-lookup"><span data-stu-id="81fca-173">Many distributions that include a recent Linux kernel version (i.e. 3.x) will have these drivers available already, or otherwise provide backported versions of these drivers with their kernels.</span></span>  <span data-ttu-id="81fca-174">Mümkün olduğunda toorun önerilir böylece bu sürücüleri sürekli yeni düzeltmeler ve özellikler ile Merhaba Yukarı Akış Çekirdeğinde güncelleştirilen bir [dağıtım destekli](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) Bu düzeltmeler ve güncelleştirmeler içerecektir.</span><span class="sxs-lookup"><span data-stu-id="81fca-174">These drivers are constantly being updated in hello upstream kernel with new fixes and features, so when possible it is recommended toorun an [endorsed distribution](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that will include these fixes and updates.</span></span>

<span data-ttu-id="81fca-175">Bir değişken Red Hat Enterprise Linux sürümleri çalıştırıyorsanız **6.0 6.3**, Hyper-V için tooinstall hello son LIS sürücüleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="81fca-175">If you are running a variant of Red Hat Enterprise Linux versions **6.0-6.3**, then you will need tooinstall hello latest LIS drivers for Hyper-V.</span></span> <span data-ttu-id="81fca-176">Merhaba sürücüleri bulunabilir [bu konumda](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="81fca-176">hello drivers can be found [at this location](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409).</span></span> <span data-ttu-id="81fca-177">RHEL itibariyle **6.4 +** (ve türevleri) hello LIS sürücüleri hello çekirdek ve bu nedenle hiçbir ek yükleme paketleri dahil zaten gerekli toorun Azure üzerinde sistemlerdir.</span><span class="sxs-lookup"><span data-stu-id="81fca-177">As of RHEL **6.4+** (and derivatives) hello LIS drivers are already included with hello kernel and so no additional installation packages are needed toorun those systems on Azure.</span></span>

<span data-ttu-id="81fca-178">Özel bir çekirdek gerekiyorsa, olan daha yeni bir çekirdek sürüm toouse önerilen (yani **3.8 +**).</span><span class="sxs-lookup"><span data-stu-id="81fca-178">If a custom kernel is required, it is recommended toouse a more recent kernel version (i.e. **3.8+**).</span></span> <span data-ttu-id="81fca-179">Bu dağıtımları veya kendi çekirdek korumak satıcıları için bazı çaba gerekli tooregularly backport hello LIS sürücülerini hello Yukarı Akış çekirdek tooyour özel çekirdek olacaktır.</span><span class="sxs-lookup"><span data-stu-id="81fca-179">For those distributions or vendors who maintain their own kernel, some effort will be required tooregularly backport hello LIS drivers from hello upstream kernel tooyour custom kernel.</span></span>  <span data-ttu-id="81fca-180">Nispeten yeni bir çekirdek sürümü çalışmakta olan olsa bile upstream tookeep izleme herhangi hello LIS sürücüleri ve backport olanlar gerektiğinde giderir önerilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-180">Even if you are already running a relatively recent kernel version, it is highly recommended tookeep track of any upstream fixes in hello LIS drivers and backport those as needed.</span></span> <span data-ttu-id="81fca-181">Merhaba hello LIS sürücü kaynak dosyalarının konumunu hello kullanılabilir [MAINTAINERS](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) hello Linux çekirdek kaynak ağaç dosyasında:</span><span class="sxs-lookup"><span data-stu-id="81fca-181">hello location of hello LIS driver source files is available in hello [MAINTAINERS](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) file in hello Linux kernel source tree:</span></span>

    F:    arch/x86/include/asm/mshyperv.h
    F:    arch/x86/include/uapi/asm/hyperv.h
    F:    arch/x86/kernel/cpu/mshyperv.c
    F:    drivers/hid/hid-hyperv.c
    F:    drivers/hv/
    F:    drivers/input/serio/hyperv-keyboard.c
    F:    drivers/net/hyperv/
    F:    drivers/scsi/storvsc_drv.c
    F:    drivers/video/fbdev/hyperv_fb.c
    F:    include/linux/hyperv.h
    F:    tools/hv/

<span data-ttu-id="81fca-182">Bir çok düşük, düzeltme ekleri aşağıdaki hello hello olmaması, toocause sorunları Azure ile ilgili bilinen ve hello Çekirdeği'nde bu nedenle eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="81fca-182">At a very minimum, hello absence of hello following patches have been known toocause problems on Azure and so these must be included in hello kernel.</span></span> <span data-ttu-id="81fca-183">Bu liste halinde kapsamlı veya tüm dağıtımlar için tam verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="81fca-183">This list is by no means exhaustive or complete for all distributions:</span></span>

* [<span data-ttu-id="81fca-184">ata_piix: varsayılan olarak diskleri toohello Hyper-V sürücüleri erteleme</span><span class="sxs-lookup"><span data-stu-id="81fca-184">ata_piix: defer disks toohello Hyper-V drivers by default</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/ata/ata_piix.c?id=cd006086fa5d91414d8ff9ff2b78fbb593878e3c)
* [<span data-ttu-id="81fca-185">storvsc: hesap hello SIFIRLAMA yolundaki aktarım sırasında paketler için</span><span class="sxs-lookup"><span data-stu-id="81fca-185">storvsc: Account for in-transit packets in hello RESET path</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/scsi/storvsc_drv.c?id=5c1b10ab7f93d24f29b5630286e323d1c5802d5c)
* [<span data-ttu-id="81fca-186">storvsc: WRITE_SAME kullanımını kaçının</span><span class="sxs-lookup"><span data-stu-id="81fca-186">storvsc: avoid usage of WRITE_SAME</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=3e8f4f4065901c8dfc51407e1984495e1748c090)
* [<span data-ttu-id="81fca-187">storvsc: devre dışı yazma aynı RAID ve sanal ana bilgisayar bağdaştırıcısı sürücüleri</span><span class="sxs-lookup"><span data-stu-id="81fca-187">storvsc: Disable WRITE SAME for RAID and virtual host adapter drivers</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=54b2b50c20a61b51199bedb6e5d2f8ec2568fb43)
* [<span data-ttu-id="81fca-188">storvsc: NULL işaretçiye düzeltme</span><span class="sxs-lookup"><span data-stu-id="81fca-188">storvsc: NULL pointer dereference fix</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=b12bb60d6c350b348a4e1460cd68f97ccae9822e)
* [<span data-ttu-id="81fca-189">storvsc: halka arabelleği hataları g/ç dondurma neden olabilir</span><span class="sxs-lookup"><span data-stu-id="81fca-189">storvsc: ring buffer failures may result in I/O freeze</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=e86fb5e8ab95f10ec5f2e9430119d5d35020c951)
* [<span data-ttu-id="81fca-190">scsi_sysfs: __scsi_remove_device çift yürütme karşı koruma</span><span class="sxs-lookup"><span data-stu-id="81fca-190">scsi_sysfs: protect against double execution of __scsi_remove_device</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/scsi_sysfs.c?id=be821fd8e62765de43cc4f0e2db363d0e30a7e9b)

## <a name="hello-azure-linux-agent"></a><span data-ttu-id="81fca-191">Hello Azure Linux Aracısı</span><span class="sxs-lookup"><span data-stu-id="81fca-191">hello Azure Linux Agent</span></span>
<span data-ttu-id="81fca-192">Merhaba [Azure Linux Aracısı](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent) gereklidir tooproperly azure'da bir Linux sanal makine sağlama.</span><span class="sxs-lookup"><span data-stu-id="81fca-192">hello [Azure Linux Agent](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent) is required tooproperly provision a Linux virtual machine in Azure.</span></span> <span data-ttu-id="81fca-193">Merhaba en son sürümünü alabilir, dosya sorunları veya hello çekme istekleri gönderme [Linux Aracısı GitHub deposuna](https://github.com/Azure/WALinuxAgent).</span><span class="sxs-lookup"><span data-stu-id="81fca-193">You can get hello latest version, file issues or submit pull requests at hello [Linux Agent GitHub repo](https://github.com/Azure/WALinuxAgent).</span></span>

* <span data-ttu-id="81fca-194">Merhaba Linux Aracısı hello Apache 2.0 lisansı altında yayınlanmış.</span><span class="sxs-lookup"><span data-stu-id="81fca-194">hello Linux agent is released under hello Apache 2.0 license.</span></span> <span data-ttu-id="81fca-195">Çoğu dağıtımda zaten RPM veya deb paketleri hello aracı için sağlayın ve bu nedenle bazı durumlarda bu yüklenebilir ve çok az çaba ile güncelleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="81fca-195">Many distributions already provide RPM or deb packages for hello agent, and so in some cases this can be installed and updated with little effort.</span></span>
* <span data-ttu-id="81fca-196">Python v2.6 + Hello Azure Linux Aracısı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="81fca-196">hello Azure Linux Agent requires Python v2.6+.</span></span>
* <span data-ttu-id="81fca-197">Merhaba aracı ayrıca hello python pyasn1 modülü gerektirir.</span><span class="sxs-lookup"><span data-stu-id="81fca-197">hello agent also requires hello python-pyasn1 module.</span></span> <span data-ttu-id="81fca-198">Çoğu dağıtımları bu yüklenebilmesi için ayrı bir paket sağlayın.</span><span class="sxs-lookup"><span data-stu-id="81fca-198">Most distributions provide this as a separate package that can be installed.</span></span>
* <span data-ttu-id="81fca-199">Bazı durumlarda hello Azure Linux Aracısı ile NetworkManager uyumlu olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-199">In some cases hello Azure Linux Agent may not be compatible with NetworkManager.</span></span> <span data-ttu-id="81fca-200">Çok sayıda hello RPM/Deb paketi dağıtımları tarafından sağlanan bir çakışma toohello waagent paketi olarak NetworkManager yapılandırın ve NetworkManager hello Linux aracı paketi yüklediğinizde, bu nedenle kaldırır.</span><span class="sxs-lookup"><span data-stu-id="81fca-200">Many of hello RPM/Deb packages provided by distributions configure NetworkManager as a conflict toohello waagent package, and thus will uninstall NetworkManager when you install hello Linux agent package.</span></span>

## <a name="general-linux-system-requirements"></a><span data-ttu-id="81fca-201">Genel Linux sistem gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="81fca-201">General Linux System Requirements</span></span>

* <span data-ttu-id="81fca-202">Merhaba çekirdek önyükleme şu parametreler kaz veya GRUB2 tooinclude hello satırda değiştirin.</span><span class="sxs-lookup"><span data-stu-id="81fca-202">Modify hello kernel boot line in GRUB or GRUB2 tooinclude hello following parameters.</span></span> <span data-ttu-id="81fca-203">Bu, Azure yardımcı olabilecek toohello ilk seri bağlantı noktasına, tüm konsol iletileri gönderilir sağlayacak sorunları ayıklama desteği:</span><span class="sxs-lookup"><span data-stu-id="81fca-203">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues:</span></span>
  
        console=ttyS0,115200n8 earlyprintk=ttyS0,115200 rootdelay=300
  
    <span data-ttu-id="81fca-204">Bu, Azure yardımcı olabilecek toohello ilk seri bağlantı noktasına, tüm konsol iletileri gönderilir sağlayacak sorunları ayıklama desteği.</span><span class="sxs-lookup"><span data-stu-id="81fca-204">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues.</span></span>
  
    <span data-ttu-id="81fca-205">Ayrıca toohello yukarıdaki, çok önerilir*kaldırmak* varsa şu parametreler hello:</span><span class="sxs-lookup"><span data-stu-id="81fca-205">In addition toohello above, it is recommended too*remove* hello following parameters if they exist:</span></span>
  
        rhgb quiet crashkernel=auto
  
    <span data-ttu-id="81fca-206">Grafik ve sessiz önyükleme toohello seri bağlantı noktasına gönderilen tüm hello günlükleri toobe burada istiyoruz bulut ortamında yararlı değildir.</span><span class="sxs-lookup"><span data-stu-id="81fca-206">Graphical and quiet boot are not useful in a cloud environment where we want all hello logs toobe sent toohello serial port.</span></span> <span data-ttu-id="81fca-207">Merhaba `crashkernel` seçeneği olabilir sol isterseniz yapılandırılmış, ancak Not hello küçük VM boyutlarını sorunlu olabilecek bu parametre hello hello VM tarafından 128 MB veya daha fazla kullanılabilir bellek miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="81fca-207">hello `crashkernel` option may be left configured if desired, but note that this parameter will reduce hello amount of available memory in hello VM by 128MB or more, which may be problematic on hello smaller VM sizes.</span></span>

* <span data-ttu-id="81fca-208">Hello Azure Linux Aracısı yükleme</span><span class="sxs-lookup"><span data-stu-id="81fca-208">Installing hello Azure Linux Agent</span></span>
  
    <span data-ttu-id="81fca-209">Hello Azure Linux Aracısı, Azure Linux görüntüde sağlamak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="81fca-209">hello Azure Linux Agent is required for provisioning a Linux image on Azure.</span></span>  <span data-ttu-id="81fca-210">Çoğu dağıtımda hello Aracısı RPM ya da Deb bir paket olarak sağlayın (Merhaba paket genellikle 'WALinuxAgent' veya 'walinuxagent' denir).</span><span class="sxs-lookup"><span data-stu-id="81fca-210">Many distributions provide hello agent as an RPM or Deb package (hello package is typically called 'WALinuxAgent' or 'walinuxagent').</span></span>  <span data-ttu-id="81fca-211">Merhaba aracı da el ile Merhaba hello adımları izleyerek yüklenebilir [Linux Aracısı Kılavuzu](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="81fca-211">hello agent can also be installed manually by following hello steps in hello [Linux Agent Guide](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

* <span data-ttu-id="81fca-212">Bu hello SSH sunucusu yüklü olduğundan ve önyükleme sırasında toostart yapılandırılmış emin olun.</span><span class="sxs-lookup"><span data-stu-id="81fca-212">Ensure that hello SSH server is installed and configured toostart at boot time.</span></span>  <span data-ttu-id="81fca-213">Bu genellikle hello varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="81fca-213">This is usually hello default.</span></span>

* <span data-ttu-id="81fca-214">Takas alanı hello işletim sistemi disk üzerinde oluşturma</span><span class="sxs-lookup"><span data-stu-id="81fca-214">Do not create swap space on hello OS disk</span></span>
  
    <span data-ttu-id="81fca-215">Hello Azure Linux Aracısı otomatik olarak takas alanı ekli toohello VM Azure üzerinde sağladıktan sonra hello yerel kaynak diski kullanarak yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81fca-215">hello Azure Linux Agent can automatically configure swap space using hello local resource disk that is attached toohello VM after provisioning on Azure.</span></span> <span data-ttu-id="81fca-216">Bu hello yerel kaynak diski Not bir *geçici* disk ve hello VM deprovisioned olduğunda boşaltılabilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-216">Note that hello local resource disk is a *temporary* disk, and might be emptied when hello VM is deprovisioned.</span></span> <span data-ttu-id="81fca-217">Yükledikten sonra Azure Linux Aracısı hello (önceki adıma bakın), /etc/waagent.conf parametrelerinde uygun şekilde aşağıdaki hello değiştirin:</span><span class="sxs-lookup"><span data-stu-id="81fca-217">After installing hello Azure Linux Agent (see previous step), modify hello following parameters in /etc/waagent.conf appropriately:</span></span>
  
        ResourceDisk.Format=y
        ResourceDisk.Filesystem=ext4
        ResourceDisk.MountPoint=/mnt/resource
        ResourceDisk.EnableSwap=y
        ResourceDisk.SwapSizeMB=2048    ## NOTE: set this toowhatever you need it toobe.

* <span data-ttu-id="81fca-218">Son adım olarak, aşağıdaki komutları toodeprovision hello sanal makine hello çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="81fca-218">As a final step, run hello following commands toodeprovision hello virtual machine:</span></span>
  
        # sudo waagent -force -deprovision
        # export HISTSIZE=0
        # logout
  
  > [!NOTE]
  > <span data-ttu-id="81fca-219">Üzerinde VirtualBox çalıştırdıktan sonra aşağıdaki hata hello görebilirsiniz ' waagent-force - deprovision': `[Errno 5] Input/output error`.</span><span class="sxs-lookup"><span data-stu-id="81fca-219">On Virtualbox you may see hello following error after running 'waagent -force -deprovision': `[Errno 5] Input/output error`.</span></span> <span data-ttu-id="81fca-220">Bu hata iletisini kritik değildir ve göz ardı edilebilir.</span><span class="sxs-lookup"><span data-stu-id="81fca-220">This error message is not critical and can be ignored.</span></span>
  > 
  > 

* <span data-ttu-id="81fca-221">Ardından hello sanal makine aşağı tooshut ihtiyacınız ve hello VHD tooAzure yükleyin.</span><span class="sxs-lookup"><span data-stu-id="81fca-221">You will then need tooshut down hello virtual machine and upload hello VHD tooAzure.</span></span>

