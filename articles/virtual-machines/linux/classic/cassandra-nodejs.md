---
title: "Cassandra ile Linux Azure üzerinde çalışan | Microsoft Docs"
description: "Cassandra küme Linux Azure Virtual Machines'de bir Node.js uygulamasını çalıştırma"
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 1ff3d77ced6c9d90029b251490c05e52d9b43515
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="b26bb-103">Azure’da Linux ile Cassandra Çalıştırma ve Cassandra’ya Node.js ile Erişme</span><span class="sxs-lookup"><span data-stu-id="b26bb-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="b26bb-104">Azure oluşturmak ve kaynaklarla çalışmak için iki farklı dağıtım modeli vardır: [Resource Manager ve klasik](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="b26bb-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="b26bb-105">Bu makalede, Klasik dağıtım modeli kullanarak yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-105">This article covers using the Classic deployment model.</span></span> <span data-ttu-id="b26bb-106">Microsoft, yeni dağıtımların çoğunun Resource Manager modelini kullanmasını önerir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-106">Microsoft recommends that most new deployments use the Resource Manager model.</span></span> <span data-ttu-id="b26bb-107">Resource Manager şablonları için bkz: [Datastax Kurumsal](https://azure.microsoft.com/documentation/templates/datastax) ve [Spark küme ve Cassandra CentOS üzerinde](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="b26bb-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="b26bb-108">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="b26bb-108">Overview</span></span>
<span data-ttu-id="b26bb-109">Microsoft Azure hem de Microsoft işletim sistemleri, uygulama sunucuları, ileti Ara yanı sıra NoSQL ve SQL veritabanlarını hem ticari ve açık kaynak modellerinden iyi olarak Microsoft dışı yazılımlar olarak çalıştırılan bir açık bulut platformudur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="b26bb-110">Azure dahil olmak üzere genel Bulutları dayanıklı hizmetler oluşturma dikkatli planlama ve kasıtlı mimarisi iyi depolama katmanları olarak hem uygulama sunucuları için gerektirir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="b26bb-111">Doğal olarak Cassandra'nın dağıtılmış depolama mimarisi hataya dayanıklı küme hataları için yüksek oranda kullanılabilir sistemlerini oluşturmaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="b26bb-112">Cassandra bulut ölçeği cassandra.apache.org Apache yazılım Foundation tarafından tutulan NoSQL veritabanı olan; Cassandra Java'da yazılmış ve bu nedenle hem Linux yanı sıra Windows platformları çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="b26bb-113">Bu makaleyi odağını, Microsoft Azure sanal makineler ve sanal ağlar yararlanarak tek ve birden çok veri merkezi küme olarak Ubuntu üzerinde Cassandra dağıtım göstermektir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-113">The focus of this article is to show Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="b26bb-114">Küme dağıtımı en iyi duruma getirilmiş üretim iş yükleri için birden çok disk düğüm yapılandırması, uygun halka topolojisi tasarımı ve gerekli çoğaltma, veri tutarlılığı, üretilen iş ve yüksek desteklemek için modelleme verileri gerektirir, bu makalenin kapsamı dışında aynıdır Kullanılabilirlik gereksinimleri.</span><span class="sxs-lookup"><span data-stu-id="b26bb-114">The cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling to support the needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="b26bb-115">Ne göstermek için temel bir yaklaşım Cassandra küme oluşturma ile ilgili bu makalede alır, Docker, Chef veya altyapı dağıtımı çok kolaylaştırabilir Puppet karşılaştırılan.</span><span class="sxs-lookup"><span data-stu-id="b26bb-115">This article takes a fundamental approach to show what is involved in building the Cassandra cluster compared Docker, Chef or Puppet which can make the infrastructure deployment a lot easier.</span></span>  

## <a name="the-deployment-models"></a><span data-ttu-id="b26bb-116">Dağıtım modelleri</span><span class="sxs-lookup"><span data-stu-id="b26bb-116">The Deployment Models</span></span>
<span data-ttu-id="b26bb-117">Microsoft Azure ağ erişimini hassas ağ güvenliği elde kısıtlanabilir yalıtılmış özel kümeleri dağıtımını sağlar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-117">Microsoft Azure networking allows the deployment of isolated private clusters, the access of which can be restricted to attain fine grained network security.</span></span>  <span data-ttu-id="b26bb-118">Bu makalede temel düzeyde Cassandra dağıtım gösteren ilgili olduğundan, biz tutarlılık düzeyi ve verimlilik için en iyi depolama tasarımı odaklanır değil.</span><span class="sxs-lookup"><span data-stu-id="b26bb-118">Since this article is about showing the Cassandra deployment at a fundamental level, we will not focus on the consistency level and the optimal storage design for throughput.</span></span> <span data-ttu-id="b26bb-119">Ağ gereksinimleri bizim kuramsal kümesi için listesi aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="b26bb-119">Here is the list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="b26bb-120">Dış sistemler Cassandra veritabanından içinde veya Azure dışına erişemiyor</span><span class="sxs-lookup"><span data-stu-id="b26bb-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="b26bb-121">Cassandra küme thrift trafiği için yük dengeleyici arkasında olması gerekir</span><span class="sxs-lookup"><span data-stu-id="b26bb-121">Cassandra cluster has to be behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="b26bb-122">Her veri merkezinde bir Gelişmiş küme kullanılabilirlik için iki grup Cassandra düğümler dağıtma</span><span class="sxs-lookup"><span data-stu-id="b26bb-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="b26bb-123">Uygulama sunucusu grubu veritabanına doğrudan erişimi yalnızca kümeyi bu nedenle, kilitleme</span><span class="sxs-lookup"><span data-stu-id="b26bb-123">Lock down the cluster so that only application server farm has access to the database directly</span></span>
* <span data-ttu-id="b26bb-124">Ortak ağ uç nokta SSH dışında</span><span class="sxs-lookup"><span data-stu-id="b26bb-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="b26bb-125">Her Cassandra düğümü sabit bir iç IP adresi gerekiyor</span><span class="sxs-lookup"><span data-stu-id="b26bb-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="b26bb-126">Tek bir Azure bölgesine veya iş yükü dağıtılmış niteliğine göre birden çok bölgeye Cassandra dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-126">Cassandra can be deployed to a single Azure region or to multiple regions based on the distributed nature of the workload.</span></span> <span data-ttu-id="b26bb-127">Bölgeli dağıtım modeli, son kullanıcıların belirli bir coğrafi konum aynı Cassandra altyapısı aracılığıyla yakın hizmet vermek için de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-127">Multi-region deployment model can be leveraged to serve end users closer to a particular geography through the same Cassandra infrastructure.</span></span> <span data-ttu-id="b26bb-128">Cassandra'nın yerleşik düğümü çoğaltma alır dikkatli çok ana eşitleme birden çok veri merkezleri kaynaklanan yazar ve uygulamalar verilere tutarlı bir görünümünü sunar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-128">Cassandra’s built-in node replication takes care of the synchronization of multi-master writes originating from multiple data centers and presents a consistent view of the data to applications.</span></span> <span data-ttu-id="b26bb-129">Çok bölge dağıtımı daha geniş Azure hizmet kesintisi risk azaltma ile de yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-129">Multi-region deployment can also help with the risk mitigation of the broader Azure service outages.</span></span> <span data-ttu-id="b26bb-130">Cassandra'nın ince ayarlanabilir tutarlılık ve çoğaltma topolojisini uygulamaları farklı RPO ihtiyaçlarını karşılamak için yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="b26bb-131">Tek bölge dağıtımı</span><span class="sxs-lookup"><span data-stu-id="b26bb-131">Single Region Deployment</span></span>
<span data-ttu-id="b26bb-132">Biz tek bölge dağıtımı ile başlamalı ve bir bölgeli modeli oluşturma learnings elde etme.</span><span class="sxs-lookup"><span data-stu-id="b26bb-132">We will start with a single region deployment and harvest the learnings in creating a multi-region model.</span></span> <span data-ttu-id="b26bb-133">Azure sanal ağı, yukarıda belirtilen ağ güvenliği gereksinimleri karşılanabilir yalıtılmış alt ağlar oluşturmak üzere kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-133">Azure virtual networking will be used to create isolated subnets so that the network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="b26bb-134">Tek bölge dağıtımı oluşturma'da açıklandığı işlemi Ubuntu 14.04 LTS ve Cassandra 2.08 kullanır; Ancak, işlem kolayca diğer Linux çeşitleri benimsenen.</span><span class="sxs-lookup"><span data-stu-id="b26bb-134">The process described in creating the single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, the process can easily be adopted to the other Linux variants.</span></span> <span data-ttu-id="b26bb-135">Tek bölge dağıtımı sistemle ilgili özelliklerini bazıları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="b26bb-135">The following are some of the systemic characteristics of the single region deployment.</span></span>  

<span data-ttu-id="b26bb-136">**Yüksek Kullanılabilirlik:** böylece düğümleri yüksek kullanılabilirlik için birden çok hata etki alanları arasında yayılır Şekil 1'de gösterilen Cassandra düğümler için iki kullanılabilirlik kümeleri dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-136">**High Availability:** The Cassandra nodes shown in the Figure 1 are deployed to two availability sets so that the nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="b26bb-137">Her kullanılabilirlik kümesiyle açıklama VM'ler 2 hata etki alanları için eşlenmedi.</span><span class="sxs-lookup"><span data-stu-id="b26bb-137">VMs annotated with each availability set is mapped to 2 fault domains.</span></span>  <span data-ttu-id="b26bb-138">Microsoft Azure kullanır (örneğin, ana bilgisayar veya konuk işletim sistemi düzeltme eki uygulama/yükseltmeler, uygulama yükseltmelerini) yükseltme etki alanı kavramı sırasında aşağı planlanmamış süresini (örn. donanım veya yazılım hatası) yönetmek için hata etki alanı kavramı zamanlanan saati yönetmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-138">Microsoft Azure uses the concept of fault domain to manage unplanned down time (e.g. hardware or software failures) while the concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="b26bb-139">Lütfen bakın [Azure uygulamaları için yüksek kullanılabilirlik ve olağanüstü durum kurtarma](http://msdn.microsoft.com/library/dn251004.aspx) yüksek kullanılabilirlik modemle hızlı bağlantılar sağlama, hata ve yükseltme etki alanlarının rolü.</span><span class="sxs-lookup"><span data-stu-id="b26bb-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for the role of fault and upgrade domains in attaining high availability.</span></span>

![Tek bölge dağıtımı](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="b26bb-141">Şekil 1: Tek bölge dağıtımı</span><span class="sxs-lookup"><span data-stu-id="b26bb-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="b26bb-142">Bu yazma zaman gruba belirli hata etki alanı VM'ler açık eşleme Azure izin vermeyen unutmayın; Bu nedenle, Şekil 1'de gösterilen bile dağıtım modeliyle, istatistiksel olarak olası tüm sanal makineleri iki hata etki alanlarını dört yerine eşlenmiş.</span><span class="sxs-lookup"><span data-stu-id="b26bb-142">Note that at the time of this writing, Azure doesn’t allow the explicit mapping of a group of VMs to a specific fault domain; consequently, even with the deployment model shown in Figure 1, it is statistically probable that all the virtual machines may be mapped to two fault domains instead of four.</span></span>

<span data-ttu-id="b26bb-143">**Yük Dengeleme Thrift trafiği:** Thrift istemci kitaplıkları web sunucusu içinde bağlanmak aracılığıyla bir iç yük dengeleyici kümeye.</span><span class="sxs-lookup"><span data-stu-id="b26bb-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside the web server connect to the cluster through an internal load balancer.</span></span> <span data-ttu-id="b26bb-144">Bu "data" alt ağına iç yük dengeleyici ekleme işlemini gerektirir (Şekil 1 bakın) Cassandra küme barındıran bulut hizmetini bağlamında.</span><span class="sxs-lookup"><span data-stu-id="b26bb-144">This requires the process of adding the internal load balancer to the “data” subnet (refer Figure 1) in the context of the cloud service hosting the Cassandra cluster.</span></span> <span data-ttu-id="b26bb-145">İç yük dengeleyicisi tanımlandıktan sonra her düğüm ile önceden tanımlanmış yük dengeleyicisi adı ile bir yük dengelenmiş küme ek açıklamalar eklenmesi için yük dengeli uç nokta gerektiriyor.</span><span class="sxs-lookup"><span data-stu-id="b26bb-145">Once the internal load balancer is defined, each node requires the load balanced endpoint to be added with the annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="b26bb-146">Bkz: [Azure iç Yük Dengeleme ](../../../load-balancer/load-balancer-internal-overview.md)daha fazla ayrıntı için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="b26bb-147">**Küme oluştururken çekirdeği:** yeni düğümler küme topolojisini bulmak için çekirdek düğümleri ile iletişim kuracak şekilde oluştururken çekirdeği için en yüksek oranda kullanılabilir düğümleri seçmek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-147">**Cluster Seeds:** It is important to select the most highly available nodes for seeds as the new nodes will communicate with seed nodes to discover the topology of the cluster.</span></span> <span data-ttu-id="b26bb-148">Her kullanılabilirlik kümesinden bir düğümü tek hata noktası önlemek için çekirdek düğüm olarak atanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-148">One node from each availability set is designated as seed nodes to avoid single point of failure.</span></span>

<span data-ttu-id="b26bb-149">**Çoğaltma faktörünü ve tutarlılık düzeyi:** Cassandra'nın yerleşik yüksek kullanılabilirlik ve veri dayanıklılığı işlemleri çoğaltma faktörüyle (RF - kopya kümesinde depolanan her bir satır sayısı) ve tutarlılık düzeyi (için yineleme sayısı sonucu çağırana döndürmeden önce okunan ve yazılan olabilir).</span><span class="sxs-lookup"><span data-stu-id="b26bb-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by the Replication Factor (RF - number of copies of each row stored on the cluster) and Consistency Level (number of replicas to be read/written before returning the result to the caller).</span></span> <span data-ttu-id="b26bb-150">Tutarlılık düzeyi CRUD sorgu verme sırasında belirtilen ancak çoğaltma faktörü KEYSPACE (ilişkisel bir veritabanına benzer) oluşturma sırasında belirtilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-150">Replication factor is specified during the KEYSPACE (similar to a relational database) creation whereas the consistency level is specified while issuing the CRUD query.</span></span> <span data-ttu-id="b26bb-151">Cassandra belgelerine bakın [tutarlılık için yapılandırma](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) tutarlılık ayrıntılarını ve çekirdek hesaplama formülü için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and the formula for quorum computation.</span></span>

<span data-ttu-id="b26bb-152">Cassandra iki tür veri bütünlüğü modelleri – tutarlılık ve nihai tutarlılık destekler; Çoğaltma faktörünü ve tutarlılık düzeyi birlikte verileri yazma işlemi tamamlandığında veya sonuçta tutarlı hemen tutarlı olup olmayacağını belirler.</span><span class="sxs-lookup"><span data-stu-id="b26bb-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; the Replication Factor and Consistency Level will together determine if the data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="b26bb-153">Örneğin, veri tutarlılığı herhangi bir tutarlılık düzeyi bağlanırken tutarlılık düzeyi her zaman olduğu gibi çekirdek belirtme sağlar, elde etmek için gerektiği gibi yazılması için yineleme sayısı sonuçta tutarlı olan verileri (örneğin bir) ÇEKİRDEĞİNİ sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-153">For example, specifying QUORUM as the Consistency Level will always ensures data Consistency while any consistency level, below the number of replicas to be written as needed to attain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="b26bb-154">Yukarıda, 3 ve çekirdek çoğaltma faktörüyle 8 düğüm kümesi (2 düğümleri okumak veya tutarlılık için yazılan) okuma/yazma tutarlılık düzeyi, çoğaltma grubu başına en fazla 1 düğümü teorik kaybı uygulama başlangıç bildirimde bulunmadan önce varlığını sürdürmesini hata oluştu.</span><span class="sxs-lookup"><span data-stu-id="b26bb-154">The 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive the theoretical loss of at the most 1 node per replication group before the application start noticing the failure.</span></span> <span data-ttu-id="b26bb-155">Bu, tüm anahtar alanları iyi dengelenmiş okuma/istekleri yazma olduğunu varsayar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-155">This assumes that all the key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="b26bb-156">Dağıtılan küme için kullanacağız Parametreler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="b26bb-156">The following are the parameters we will use for the deployed cluster:</span></span>

<span data-ttu-id="b26bb-157">Tek bölge Cassandra küme yapılandırması:</span><span class="sxs-lookup"><span data-stu-id="b26bb-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="b26bb-158">Küme parametresi</span><span class="sxs-lookup"><span data-stu-id="b26bb-158">Cluster Parameter</span></span> | <span data-ttu-id="b26bb-159">Değer</span><span class="sxs-lookup"><span data-stu-id="b26bb-159">Value</span></span> | <span data-ttu-id="b26bb-160">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b26bb-161">Düğüm (N) sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-161">Number of Nodes (N)</span></span> |<span data-ttu-id="b26bb-162">8</span><span class="sxs-lookup"><span data-stu-id="b26bb-162">8</span></span> |<span data-ttu-id="b26bb-163">Kümedeki düğümler toplam sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-163">Total number of nodes in the cluster</span></span> |
| <span data-ttu-id="b26bb-164">Çoğaltma faktörü (RF)</span><span class="sxs-lookup"><span data-stu-id="b26bb-164">Replication Factor (RF)</span></span> |<span data-ttu-id="b26bb-165">3</span><span class="sxs-lookup"><span data-stu-id="b26bb-165">3</span></span> |<span data-ttu-id="b26bb-166">Belirli bir satırın çoğaltmaların sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="b26bb-167">Tutarlılık düzeyi (yazma)</span><span class="sxs-lookup"><span data-stu-id="b26bb-167">Consistency Level (Write)</span></span> |<span data-ttu-id="b26bb-168">QUORUM[(RF/2) +1) = 2] formülü sonucu yuvarlanan</span><span class="sxs-lookup"><span data-stu-id="b26bb-168">QUORUM[(RF/2) +1) = 2] The result of the formula is rounded down</span></span> |<span data-ttu-id="b26bb-169">Yanıt çağırana gönderilmeden önce en çok 2 çoğaltma Yazar; 3 çoğaltma sonunda tutarlı bir şekilde yazılır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-169">Writes at the most 2 replicas before the response is sent to the caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="b26bb-170">Tutarlılık düzeyi (okuma)</span><span class="sxs-lookup"><span data-stu-id="b26bb-170">Consistency Level (Read)</span></span> |<span data-ttu-id="b26bb-171">Çekirdek [(RF/2) + 1 = 2] formül sonucu yuvarlanan</span><span class="sxs-lookup"><span data-stu-id="b26bb-171">QUORUM [(RF/2) +1= 2] The result of the formula is rounded down</span></span> |<span data-ttu-id="b26bb-172">2 çoğaltma, yanıtını çağırana göndermeden önce okur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-172">Reads 2 replicas before sending response to the caller.</span></span> |
| <span data-ttu-id="b26bb-173">Çoğaltma stratejisi</span><span class="sxs-lookup"><span data-stu-id="b26bb-173">Replication Strategy</span></span> |<span data-ttu-id="b26bb-174">NetworkTopologyStrategy bakın [veri çoğaltma](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) Cassandra belgelerinde daha fazla bilgi için</span><span class="sxs-lookup"><span data-stu-id="b26bb-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="b26bb-175">Dağıtım topolojisi anlar ve çoğaltmalar, düğümlerde yerleştirir, böylece tüm çoğaltmaların aynı rafa monte şunun yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-175">Understands the deployment topology and places replicas on nodes so that all the replicas don’t end up on the same rack</span></span> |
| <span data-ttu-id="b26bb-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="b26bb-176">Snitch</span></span> |<span data-ttu-id="b26bb-177">GossipingPropertyFileSnitch bakın [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) Cassandra belgelerinde daha fazla bilgi için</span><span class="sxs-lookup"><span data-stu-id="b26bb-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="b26bb-178">NetworkTopologyStrategy snitch kavramı topoloji anlamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-178">NetworkTopologyStrategy uses a concept of snitch to understand the topology.</span></span> <span data-ttu-id="b26bb-179">GossipingPropertyFileSnitch veri merkezi ve raf her düğüme eşleme daha iyi denetim olanağı verir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-179">GossipingPropertyFileSnitch gives better control in mapping each node to data center and rack.</span></span> <span data-ttu-id="b26bb-180">Küme, dedikodu sonra bu bilgileri yaymak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-180">The cluster then uses gossip to propagate this information.</span></span> <span data-ttu-id="b26bb-181">Bu dinamik IP ayarında PropertyFileSnitch göre çok daha kolaydır</span><span class="sxs-lookup"><span data-stu-id="b26bb-181">This is much simpler in dynamic IP setting relative to PropertyFileSnitch</span></span> |

<span data-ttu-id="b26bb-182">**Cassandra küme Azure dikkate alınacak noktalar:** Microsoft Azure sanal makineleri özelliğine disk kalıcılığını; Azure Blob Depolama kullanır Azure depolama her disk yüksek dayanıklılık için 3 çoğaltmalarının kaydeder.</span><span class="sxs-lookup"><span data-stu-id="b26bb-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="b26bb-183">Her bir Cassandra tabloya eklenen veri satırının zaten 3 yinelemede depolanır ve bu nedenle veri tutarlılığını zaten (RF) çoğaltma faktörü 1 olsa bile dikkate anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if the Replication Factor (RF) is 1.</span></span> <span data-ttu-id="b26bb-184">Ana çoğaltma faktörle 1 olan tek bir Cassandra düğüm başarısız olsa bile uygulama kapalı kalma süresi yaşar sorunudur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-184">The main problem with Replication Factor being 1 is that the application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="b26bb-185">Ancak, bir düğüm Azure yapı denetleyicisi tarafından tanınan sorunları (örneğin, donanım, sistem yazılım hataları) çalışmıyorsa, aynı depolama sürücülerini kullanarak onun yerine yeni bir düğüm hazırlayacağınız.</span><span class="sxs-lookup"><span data-stu-id="b26bb-185">However, if a node is down for the problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using the same storage drives.</span></span> <span data-ttu-id="b26bb-186">Eski bir değiştirmek için yeni bir düğüm sağlama birkaç dakika sürebilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-186">Provisioning a new node to replace the old one may take a few minutes.</span></span>  <span data-ttu-id="b26bb-187">Benzer şekilde konuk işletim sistemi değişiklikleri gibi planlı bakım etkinlikler, Cassandra yükseltildikten ve kümedeki düğümlerin çalışırken Azure yapı denetleyicisi uygulama değişiklikleri gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of the nodes in the cluster.</span></span>  <span data-ttu-id="b26bb-188">Çalışırken yükseltme de birkaç düğüm aynı anda sürebilir ve bu nedenle küme birkaç bölümler için kısa kapalı kalma süresi karşılaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-188">Rolling upgrades also may take down a few nodes at a time and hence the cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="b26bb-189">Ancak, veri yerleşik Azure Storage artıklık nedeniyle kayıp olmaz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-189">However, the data will not be lost due to the built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="b26bb-190">Yüksek kullanılabilirlik gerektirmeyen Azure dağıtılan sistemler için (örneğin yaklaşık 99,9 olduğu 8.76 SA/yılına eşdeğer; bkz [yüksek kullanılabilirlik](http://en.wikipedia.org/wiki/High_availability) Ayrıntılar için) RF ile çalıştırmanız mümkün olabilir = 1 ve tutarlılık düzeyi = ONE.</span><span class="sxs-lookup"><span data-stu-id="b26bb-190">For systems deployed to Azure that doesn’t require high availability (e.g. around 99.9 which is equivalent to 8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able to run with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="b26bb-191">Yüksek oranda kullanılabilirlik gereksinimleri, RF olan uygulamalar için 3 ve tutarlılık düzeyi = = çekirdek çoğaltmaları biri düğümlerinden biri aşağı süresini tolerans.</span><span class="sxs-lookup"><span data-stu-id="b26bb-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate the down time of one of the nodes one of the replicas.</span></span> <span data-ttu-id="b26bb-192">RF = 1 geleneksel dağıtımlarda (örn. şirket içi), disk hataları gibi sorunlar kaynaklanan olası veri kaybı nedeniyle kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due to the possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="b26bb-193">Çok bölge dağıtımı</span><span class="sxs-lookup"><span data-stu-id="b26bb-193">Multi-region Deployment</span></span>
<span data-ttu-id="b26bb-194">Yukarıda açıklanan Cassandra'nın veri merkezi kullanmayan çoğaltma ve tutarlılık modeli, tüm dış araçları gerek kalmadan sunuyoruz bölgeli dağıtım ile yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-194">Cassandra’s data-center-aware replication and consistency model described above helps with the multi-region deployment out of the box without the need for any external tooling.</span></span> <span data-ttu-id="b26bb-195">Burada, birden çok yöneticili yazmalar için veritabanı yansıtma için Kurulum oldukça karmaşık olabilir bu geleneksel ilişkisel veritabanlarından oldukça farklı değildir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-195">This is quite different from the traditional relational databases where the setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="b26bb-196">Ayarlanmış bir çok bölgede Cassandra aşağıdakiler de dahil olmak üzere kullanım senaryoları ile yardımcı olabilir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-196">Cassandra in a multi-region set up can help with the usage scenarios including the following:</span></span>

<span data-ttu-id="b26bb-197">**Yakınlık dayalı dağıtım:** Kiracı Kullanıcı Temizle eşleme ile çok kiracılı uygulamalara-için-bölge bölgeli kümenin düşük gecikme tarafından benefited.</span><span class="sxs-lookup"><span data-stu-id="b26bb-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by the multi-region cluster’s low latencies.</span></span> <span data-ttu-id="b26bb-198">Örneğin, bir öğrenme yönetim sistemleri için eğitim kurumları Doğu ABD ve Batı ABD bölgeler için ilgili artık kampüsünde sunmak için Dağıtılmış bir kümede dağıtabilirsiniz analytics yanı sıra işlem.</span><span class="sxs-lookup"><span data-stu-id="b26bb-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions to serve the respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="b26bb-199">Verileri zaman okuma ve yazma işlemleri sırasında yerel olarak tutarlı olabilir ve bölgeler arasında sonuçta tutarlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-199">The data can be locally consistent at the time reads and writes and can be eventually consistent across both the regions.</span></span> <span data-ttu-id="b26bb-200">Medya dağıtım, e-ticaret ve herhangi bir şey gibi diğer örnekler vardır ve yoğunlaşmıştır coğrafi kullanıcı temel görevi gören her şeyi, bu dağıtım modeli için iyi durumdur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="b26bb-201">**Yüksek Kullanılabilirlik:** artıklık yazılım ve donanım yüksek kullanılabilirliğini modemle hızlı bağlantılar sağlama bir anahtar etken; yapı güvenilir bulut sistemleri Microsoft Azure üzerinde ayrıntılı bilgi için bkz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="b26bb-202">Microsoft Azure üzerinde doğru artıklık elde yalnızca güvenilir bir bölgeli küme dağıtarak yoludur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-202">On Microsoft Azure, the only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="b26bb-203">Uygulamaları bir etkin-etkin veya etkin-Pasif modu dağıtılabilir ve Azure trafik Yöneticisi bölgelerinden kapalı ise, etkin bölge trafiği yönlendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-203">Applications can be deployed in an active-active or active-passive mode and if one of the regions is down, Azure Traffic Manager can redirect traffic to the active region.</span></span>  <span data-ttu-id="b26bb-204">Kullanılabilirlik 99,9, ise tek bölge dağıtımı ile iki bölge dağıtımı bir formülün hesaplanan 99.9999 kullanılabilirliğini elde edebilirsiniz: (1-(1-0.999) * (1-0.999)) * 100); Ayrıntılar için yukarıdaki incelemesine bakın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-204">With the single region deployment, if the availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by the formula: (1-(1-0.999) * (1-0.999))*100); see the above paper for details.</span></span>

<span data-ttu-id="b26bb-205">**Olağanüstü durum kurtarma:** bölgeli Cassandra küme düzgün bir şekilde tasarlanmış, dayanacak geri dönülemez veri merkezi kesintilerini.</span><span class="sxs-lookup"><span data-stu-id="b26bb-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="b26bb-206">Bir bölge kapalı ise, son kullanıcıların hizmet veren diğer bölgelere dağıtılan uygulamayı başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-206">If one region is down, the application deployed to other regions can start serving the end users.</span></span> <span data-ttu-id="b26bb-207">Diğer iş sürekliliği belirtilmesinden gibi uygulama verileri zaman uyumsuz ardışık düzeninde kaynaklanan bazı veri kaybıyla dayanıklı olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-207">Like any other business continuity implementations, the application has to be tolerant for some data loss resulting from the data in the asynchronous pipeline.</span></span> <span data-ttu-id="b26bb-208">Ancak, Kurtarma Cassandra geleneksel veritabanı kurtarma işlemleri tarafından harcanan süre çok swifter yapar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-208">However, Cassandra makes the recovery much swifter than the time taken by traditional database recovery processes.</span></span> <span data-ttu-id="b26bb-209">Şekil 2 sekiz düğümlerle tipik bölgeli dağıtım modeli, her bölgede gösterir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-209">Figure 2 shows the typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="b26bb-210">Her iki bölgeden yansıtma görüntülerini simetrisi aynı için; yine de uygun istiyor musunuz? gerçek dünya tasarımları iş yükü türünü (örn. işlem veya analitik), RPO, RTO, veri tutarlılığı ve kullanılabilirlik gereksinimlerine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-210">Both regions are mirror images of each other for the same of symmetry; real world designs depend on the workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Çoklu bölge dağıtımı](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="b26bb-212">Şekil 2: Bölgeli Cassandra dağıtımı</span><span class="sxs-lookup"><span data-stu-id="b26bb-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="b26bb-213">Ağ tümleştirme</span><span class="sxs-lookup"><span data-stu-id="b26bb-213">Network Integration</span></span>
<span data-ttu-id="b26bb-214">Kümeleri üzerinde iki bölgede bulunan özel ağlara dağıtılan sanal makinelerin birbirleriyle VPN tüneli kullanarak iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-214">Sets of virtual machines deployed to private networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="b26bb-215">VPN tüneli ağ dağıtım işlemi sırasında sağlanan iki yazılım ağ geçidi bağlanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-215">The VPN tunnel connects two software gateways provisioned during the network deployment process.</span></span> <span data-ttu-id="b26bb-216">Her iki bölgeden "web" ve "data" alt bakımından benzer ağ mimarisi; yine de sahip istiyor musunuz? Azure ağı gerektiğinde kadar alt ağlar oluşturulmasına izin verir ve ağ güvenliği tarafından gerektiği şekilde ACL'ler uygulayın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows the creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="b26bb-217">Küme topolojisi arası tasarlama sırasında veri merkezi iletişim gecikmesi ve ağ trafiğini ekonomik etkisini ele alınması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-217">While designing the cluster topology inter data center communication latency and the economic impact of the network traffic need to be considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="b26bb-218">Birden çok veri merkezi dağıtım için veri tutarlılığı</span><span class="sxs-lookup"><span data-stu-id="b26bb-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="b26bb-219">Dağıtılmış dağıtımları performans ve yüksek kullanılabilirlik küme topolojisi etkisini farkında olması gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="b26bb-219">Distributed deployments need to be aware of the cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="b26bb-220">RF ve tutarlılık düzeyi çekirdek tüm veri merkezleri kullanılabilirliğine bağlı olmadığından bu şekilde seçilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-220">The RF and Consistency Level need to be selected in such way that the quorum doesn’t depend on the availability of all the data centers.</span></span>
<span data-ttu-id="b26bb-221">Yüksek tutarlılık gereken bir sistem LOCAL_QUORUM tutarlılık düzeyi (için okuma ve yazma) veri uzak veri merkezleri için zaman uyumsuz olarak kopyalandığı sırada yerel okuma ve yazma işlemleri yerel düğümlerden karşılanır olduğundan emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that the local reads and writes are satisfied from the local nodes while data is replicated asynchronously to the remote data centers.</span></span>  <span data-ttu-id="b26bb-222">Tablo 2 yazma daha sonra özetlenen bölgeli küme yapılandırma ayrıntılarını özetlemektedir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-222">Table 2 summarizes the configuration details for the multi-region cluster outlined later in the write up.</span></span>

<span data-ttu-id="b26bb-223">**İki bölge Cassandra küme yapılandırması**</span><span class="sxs-lookup"><span data-stu-id="b26bb-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="b26bb-224">Küme parametresi</span><span class="sxs-lookup"><span data-stu-id="b26bb-224">Cluster Parameter</span></span> | <span data-ttu-id="b26bb-225">Değer</span><span class="sxs-lookup"><span data-stu-id="b26bb-225">Value</span></span> | <span data-ttu-id="b26bb-226">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b26bb-227">Düğüm (N) sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-227">Number of Nodes (N)</span></span> |<span data-ttu-id="b26bb-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="b26bb-228">8 + 8</span></span> |<span data-ttu-id="b26bb-229">Kümedeki düğümler toplam sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-229">Total number of nodes in the cluster</span></span> |
| <span data-ttu-id="b26bb-230">Çoğaltma faktörü (RF)</span><span class="sxs-lookup"><span data-stu-id="b26bb-230">Replication Factor (RF)</span></span> |<span data-ttu-id="b26bb-231">3</span><span class="sxs-lookup"><span data-stu-id="b26bb-231">3</span></span> |<span data-ttu-id="b26bb-232">Belirli bir satırın çoğaltmaların sayısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="b26bb-233">Tutarlılık düzeyi (yazma)</span><span class="sxs-lookup"><span data-stu-id="b26bb-233">Consistency Level (Write)</span></span> |<span data-ttu-id="b26bb-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] formül sonucu yuvarlanan</span><span class="sxs-lookup"><span data-stu-id="b26bb-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] The result of the formula is rounded down</span></span> |<span data-ttu-id="b26bb-235">2 düğümleri ilk veri merkezine zaman uyumlu olarak yazılır; Çekirdek için gereken ek 2 düğümleri 2 veri merkezine zaman uyumsuz olarak yazılır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-235">2 nodes will be written to the first data center synchronously; the additional 2 nodes needed for quorum will be written asynchronously to the 2nd data center.</span></span> |
| <span data-ttu-id="b26bb-236">Tutarlılık düzeyi (okuma)</span><span class="sxs-lookup"><span data-stu-id="b26bb-236">Consistency Level (Read)</span></span> |<span data-ttu-id="b26bb-237">LOCAL_QUORUM ((RF/2) + 1) = formül sonucu aşağı yuvarlanmasını 2</span><span class="sxs-lookup"><span data-stu-id="b26bb-237">LOCAL_QUORUM ((RF/2) +1) = 2 The result of the formula is rounded down</span></span> |<span data-ttu-id="b26bb-238">Okuma isteği yalnızca bir bölgesinden karşılanır; yanıt istemciye gönderilmeden önce 2 düğümleri salt okunurdur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-238">Read requests are satisfied from only one region; 2 nodes are read before the response is sent back to the client.</span></span> |
| <span data-ttu-id="b26bb-239">Çoğaltma stratejisi</span><span class="sxs-lookup"><span data-stu-id="b26bb-239">Replication Strategy</span></span> |<span data-ttu-id="b26bb-240">NetworkTopologyStrategy bakın [veri çoğaltma](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) Cassandra belgelerinde daha fazla bilgi için</span><span class="sxs-lookup"><span data-stu-id="b26bb-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="b26bb-241">Dağıtım topolojisi anlar ve çoğaltmalar, düğümlerde yerleştirir, böylece tüm çoğaltmaların aynı rafa monte şunun yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-241">Understands the deployment topology and places replicas on nodes so that all the replicas don’t end up on the same rack</span></span> |
| <span data-ttu-id="b26bb-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="b26bb-242">Snitch</span></span> |<span data-ttu-id="b26bb-243">GossipingPropertyFileSnitch bakın [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) Cassandra belgelerinde daha fazla bilgi için</span><span class="sxs-lookup"><span data-stu-id="b26bb-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="b26bb-244">NetworkTopologyStrategy snitch kavramı topoloji anlamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-244">NetworkTopologyStrategy uses a concept of snitch to understand the topology.</span></span> <span data-ttu-id="b26bb-245">GossipingPropertyFileSnitch veri merkezi ve raf her düğüme eşleme daha iyi denetim olanağı verir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-245">GossipingPropertyFileSnitch gives better control in mapping each node to data center and rack.</span></span> <span data-ttu-id="b26bb-246">Küme, dedikodu sonra bu bilgileri yaymak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-246">The cluster then uses gossip to propagate this information.</span></span> <span data-ttu-id="b26bb-247">Bu dinamik IP ayarında PropertyFileSnitch göre çok daha kolaydır</span><span class="sxs-lookup"><span data-stu-id="b26bb-247">This is much simpler in dynamic IP setting relative to PropertyFileSnitch</span></span> |

## <a name="the-software-configuration"></a><span data-ttu-id="b26bb-248">YAZILIM YAPILANDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-248">THE SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="b26bb-249">Aşağıdaki yazılım sürümlerinden dağıtımı sırasında kullanılır:</span><span class="sxs-lookup"><span data-stu-id="b26bb-249">The following software versions are used during the deployment:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-250">Yazılım</span><span class="sxs-lookup"><span data-stu-id="b26bb-250">Software</span></span></th><th><span data-ttu-id="b26bb-251">Kaynak</span><span class="sxs-lookup"><span data-stu-id="b26bb-251">Source</span></span></th><th><span data-ttu-id="b26bb-252">Sürüm</span><span class="sxs-lookup"><span data-stu-id="b26bb-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-253">JRE</span><span class="sxs-lookup"><span data-stu-id="b26bb-253">JRE</span></span>    </td><td><span data-ttu-id="b26bb-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="b26bb-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="b26bb-255">8U5</span><span class="sxs-lookup"><span data-stu-id="b26bb-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-256">JNA</span><span class="sxs-lookup"><span data-stu-id="b26bb-256">JNA</span></span>    </td><td><span data-ttu-id="b26bb-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="b26bb-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="b26bb-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="b26bb-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="b26bb-259">Cassandra</span></span></td><td>[<span data-ttu-id="b26bb-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="b26bb-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="b26bb-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="b26bb-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="b26bb-262">Ubuntu</span></span>    </td><td><span data-ttu-id="b26bb-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="b26bb-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="b26bb-264">14.04 LTS</span><span class="sxs-lookup"><span data-stu-id="b26bb-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="b26bb-265">JRE indirme el ile Oracle lisans kabulü gerektirdiğinden, dağıtım basitleştirmek için gerekli tüm yazılımı biz Küme dağıtımı için bir precursor olarak oluşturulacağını Ubuntu şablon görüntüsü daha sonra yüklemeyle masaüstüne indirin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-265">Since downloading of JRE requires manual acceptance of Oracle license, to simplify the deployment, download all the required software to the desktop for later uploading into the Ubuntu template image we will be creating as a precursor to the cluster deployment.</span></span>

<span data-ttu-id="b26bb-266">Yukarıdaki yazılımın bir dizine iyi bilinen yükleme (örneğin Windows %TEMP%/downloads veya ~/Downloads çoğu Linux dağıtımları veya Mac üzerinde) yerel bilgisayarda indirin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-266">Download the above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on the local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="b26bb-267">UBUNTU VM OLUŞTURMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="b26bb-268">Böylece görüntü birçok Cassandra düğümlerini sağlamak için yeniden kullanılabilir işleminin bu adımında Ubuntu görüntü önkoşul yazılımı ile oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="b26bb-268">In this step of the process we will create Ubuntu image with the pre-requisite software so that the image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="b26bb-269">1. adım: SSH anahtar çifti oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="b26bb-270">Azure sağlama aynı anda PEM ya da DER ortak anahtar kodlanmış bir X509 gerekir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-270">Azure needs an X509 public key that is either PEM or DER encoded at the provisioning time.</span></span> <span data-ttu-id="b26bb-271">Nasıl yapılır Linux Azure üzerinde ile SSH kullanma konumunda bulunan yönergeleri kullanarak bir genel/özel anahtar çifti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-271">Generate a public/private key pair using the instructions located at How to Use SSH with Linux on Azure.</span></span> <span data-ttu-id="b26bb-272">Bir SSH istemcisi Windows veya Linux olarak putty.exe kullanmayı planlıyorsanız, kodlanmış PEM dönüştürmeniz gerekir puttygen.exe; kullanarak PPK biçimine RSA özel anahtarı Bunun için yönergeler yukarıdaki web sayfasında bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-272">If you plan to use putty.exe as an SSH client either on Windows or Linux, you have to convert the PEM encoded RSA private key to PPK format using puttygen.exe; the instructions for this can be found in the above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="b26bb-273">2. adım: Ubuntu şablonu VM oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="b26bb-274">VM şablonu oluşturmak için Klasik Azure portalında oturum açın ve aşağıdaki sırayı kullanır: yeni, işlem, sanal makine, başlangıç Galerisi, UBUNTU, Ubuntu Server 14.04 LTS tıklatın ve ardından sağ oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-274">To create the template VM, log into the Azure classic portal and use the following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click the right arrow.</span></span> <span data-ttu-id="b26bb-275">Bir Linux VM oluşturmayı açıklar bir öğretici için çalışan bir sanal makine Linux bkz.</span><span class="sxs-lookup"><span data-stu-id="b26bb-275">For a tutorial that describes how to create a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="b26bb-276">#1 "sanal makine yapılandırma" ekranında aşağıdaki bilgileri girin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-276">Enter the following information on the “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-277">ALAN ADI</span><span class="sxs-lookup"><span data-stu-id="b26bb-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="b26bb-278">ALAN DEĞERİ</span><span class="sxs-lookup"><span data-stu-id="b26bb-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="b26bb-279">AÇIKLAMALAR</span><span class="sxs-lookup"><span data-stu-id="b26bb-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="b26bb-280">SÜRÜM YAYIN TARİHİ</span><span class="sxs-lookup"><span data-stu-id="b26bb-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="b26bb-281">Aşağı açılan listeden bir tarih seçin</span><span class="sxs-lookup"><span data-stu-id="b26bb-281">Select a date from the drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="b26bb-282">SANAL MAKİNE ADI</span><span class="sxs-lookup"><span data-stu-id="b26bb-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="b26bb-283">CASS şablonu</span><span class="sxs-lookup"><span data-stu-id="b26bb-283">cass-template</span></span>                   </td><td> <span data-ttu-id="b26bb-284">Bu VM ana adıdır</span><span class="sxs-lookup"><span data-stu-id="b26bb-284">This is the hostname of the VM</span></span> </td><tr>
<tr><td><span data-ttu-id="b26bb-285">KATMANI</span><span class="sxs-lookup"><span data-stu-id="b26bb-285">TIER</span></span>                     </td><td> <span data-ttu-id="b26bb-286">STANDART</span><span class="sxs-lookup"><span data-stu-id="b26bb-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="b26bb-287">Varsayılan adı bırakın</span><span class="sxs-lookup"><span data-stu-id="b26bb-287">Leave the default</span></span>              </td><tr>
<tr><td><span data-ttu-id="b26bb-288">BOYUTU</span><span class="sxs-lookup"><span data-stu-id="b26bb-288">SIZE</span></span>                     </td><td> <span data-ttu-id="b26bb-289">A1</span><span class="sxs-lookup"><span data-stu-id="b26bb-289">A1</span></span>                              </td><td><span data-ttu-id="b26bb-290">G/ç gereksinimlerine göre VM seçin; Bu amaç için varsayılan adı bırakın</span><span class="sxs-lookup"><span data-stu-id="b26bb-290">Select the VM based on the IO needs; for this purpose leave the default</span></span> </td><tr>
<tr><td> <span data-ttu-id="b26bb-291">YENİ BİR KULLANICI ADI</span><span class="sxs-lookup"><span data-stu-id="b26bb-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="b26bb-292">yerelyönetici</span><span class="sxs-lookup"><span data-stu-id="b26bb-292">localadmin</span></span>                       </td><td> <span data-ttu-id="b26bb-293">"Yönetici" Ubuntu 12. xx ve sonra ayrılmış kullanıcı adı sağlanmış</span><span class="sxs-lookup"><span data-stu-id="b26bb-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="b26bb-294">KİMLİK DOĞRULAMASI</span><span class="sxs-lookup"><span data-stu-id="b26bb-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="b26bb-295">Onay kutusu</span><span class="sxs-lookup"><span data-stu-id="b26bb-295">Click check box</span></span>                 </td><td><span data-ttu-id="b26bb-296">Bir SSH anahtarı ile güvenli isteyip istemediğinizi denetleyin</span><span class="sxs-lookup"><span data-stu-id="b26bb-296">Check if you want to secure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="b26bb-297">SERTİFİKA</span><span class="sxs-lookup"><span data-stu-id="b26bb-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="b26bb-298">Ortak anahtar sertifikası dosya adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-298">file name of the public key certificate</span></span> </td><td> <span data-ttu-id="b26bb-299">Daha önce oluşturulan ortak anahtarı kullanın</span><span class="sxs-lookup"><span data-stu-id="b26bb-299">Use the public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="b26bb-300">Yeni parola</span><span class="sxs-lookup"><span data-stu-id="b26bb-300">New Password</span></span>    </td><td> <span data-ttu-id="b26bb-301">güçlü parola</span><span class="sxs-lookup"><span data-stu-id="b26bb-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="b26bb-302">Parolayı onaylayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="b26bb-303">güçlü parola</span><span class="sxs-lookup"><span data-stu-id="b26bb-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="b26bb-304">"Sanal makine yapılandırma" ekranında #2 aşağıdaki bilgileri girin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-304">Enter the following information on the “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-305">ALAN ADI</span><span class="sxs-lookup"><span data-stu-id="b26bb-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="b26bb-306">ALAN DEĞERİ</span><span class="sxs-lookup"><span data-stu-id="b26bb-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="b26bb-307">AÇIKLAMALAR</span><span class="sxs-lookup"><span data-stu-id="b26bb-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="b26bb-308">BULUT HİZMETİ</span><span class="sxs-lookup"><span data-stu-id="b26bb-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="b26bb-309">Yeni bir bulut hizmeti oluştur</span><span class="sxs-lookup"><span data-stu-id="b26bb-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="b26bb-310">Sanal makineler gibi bir kapsayıcı işlem kaynaklarını bulut hizmetidir</span><span class="sxs-lookup"><span data-stu-id="b26bb-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="b26bb-311">BULUT HİZMETİ DNS ADI</span><span class="sxs-lookup"><span data-stu-id="b26bb-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="b26bb-312">ubuntu template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="b26bb-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="b26bb-313">Bir makine belirsiz yük dengeleyici ad verin</span><span class="sxs-lookup"><span data-stu-id="b26bb-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="b26bb-314">BÖLGE/BENZEŞİM GRUBU/SANAL AĞ</span><span class="sxs-lookup"><span data-stu-id="b26bb-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="b26bb-315">Batı ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-315">West US</span></span>    </td><td> <span data-ttu-id="b26bb-316">Web uygulamalarınızın Cassandra küme erişimlerin bir bölge seçin</span><span class="sxs-lookup"><span data-stu-id="b26bb-316">Select a region from which your web applications access the Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-317">DEPOLAMA HESABI</span><span class="sxs-lookup"><span data-stu-id="b26bb-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="b26bb-318">Varsayılanı kullan</span><span class="sxs-lookup"><span data-stu-id="b26bb-318">Use default</span></span>    </td><td><span data-ttu-id="b26bb-319">Belirli bir bölgedeki varsayılan depolama hesabı ya da önceden oluşturulmuş depolama hesabı kullanın</span><span class="sxs-lookup"><span data-stu-id="b26bb-319">Use the default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-320">KULLANILABİLİRLİK KÜMESİ</span><span class="sxs-lookup"><span data-stu-id="b26bb-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="b26bb-321">None</span><span class="sxs-lookup"><span data-stu-id="b26bb-321">None</span></span> </td><td>    <span data-ttu-id="b26bb-322">Boş bırakın</span><span class="sxs-lookup"><span data-stu-id="b26bb-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-323">UÇ NOKTALARI</span><span class="sxs-lookup"><span data-stu-id="b26bb-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="b26bb-324">Varsayılanı kullan</span><span class="sxs-lookup"><span data-stu-id="b26bb-324">Use default</span></span> </td><td>    <span data-ttu-id="b26bb-325">Varsayılan SSH yapılandırmasını kullanın</span><span class="sxs-lookup"><span data-stu-id="b26bb-325">Use the default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="b26bb-326">Sağ oka tıklayın, #3 ekranda Varsayılanları bırakabilir ve VM sağlama işlemini tamamlamak için "denetimi" düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-326">Click right arrow, leave the defaults on the screen #3 and click the “check” button to complete the VM provisioning process.</span></span> <span data-ttu-id="b26bb-327">Birkaç dakika sonra VM adı "ubuntu-şablon" ile "çalışır" durumda olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-327">After a few minutes, the VM with the name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-the-necessary-software"></a><span data-ttu-id="b26bb-328">GEREKLİ YAZILIMI YÜKLEYİN</span><span class="sxs-lookup"><span data-stu-id="b26bb-328">INSTALL THE NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="b26bb-329">1. adım: Karşıya yükleme tarballs</span><span class="sxs-lookup"><span data-stu-id="b26bb-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="b26bb-330">SCP veya pscp kullanarak, önceden indirilen yazılım aşağıdaki komut biçimi kullanarak ~/downloads dizinine kopyalayın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-330">Using scp or pscp, copy the previously downloaded software to ~/downloads directory using the following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="b26bb-331">pscp server-jre-8u5-linux-x64.tar.gzlocaladmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="b26bb-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="b26bb-332">Yukarıdaki komut için olduğu gibi Cassandra BITS de JRE yineleyin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-332">Repeat the above command for JRE as well as for the Cassandra bits.</span></span>

#### <a name="step-2-prepare-the-directory-structure-and-extract-the-archives"></a><span data-ttu-id="b26bb-333">2. adım: dizin yapısını hazırlamak ve arşivler Ayıkla</span><span class="sxs-lookup"><span data-stu-id="b26bb-333">STEP 2: Prepare the directory structure and extract the archives</span></span>
<span data-ttu-id="b26bb-334">VM oturum ve dizin yapısını oluşturun ve yazılım bash komut dosyası kullanarak bir süper kullanıcı olarak ayıklayın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-334">Log into the VM and create the directory structure and extract software as a super user using the bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change the ownership to the service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile to add JRE to the PATH"
    echo "installation is complete"


<span data-ttu-id="b26bb-335">Bu komut dosyası VIM penceresine yapıştırın, satır başı kaldırdığınızdan emin olun ('\r ") aşağıdaki komutu kullanarak:</span><span class="sxs-lookup"><span data-stu-id="b26bb-335">If you paste this script into vim window, make sure to remove the carriage return (‘\r”) using the following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="b26bb-336">3. adım: vb./profilini düzenle</span><span class="sxs-lookup"><span data-stu-id="b26bb-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="b26bb-337">Sonunda aşağıdakileri ekleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-337">Append the following at the end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="b26bb-338">4. adım: Yükleme JNA üretim sistemleri için</span><span class="sxs-lookup"><span data-stu-id="b26bb-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="b26bb-339">Aşağıdaki komut dizisi kullanın: jna 3.2.7.jar yükleyeceğinizi ve platform jna 3.2.7.jar /usr/share.java dizinine apt sudo get libjna java şu komutu</span><span class="sxs-lookup"><span data-stu-id="b26bb-339">Use the following command sequence: The following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar to /usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="b26bb-340">Sembolik bağlantılar $CASS_HOME/lib dizininde oluşturun, böylece Cassandra başlangıç betiği bu Kavanoz bulabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="b26bb-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="b26bb-341">Adım 5: cassandra.yaml yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b26bb-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="b26bb-342">[Biz bu gerçek sağlama sırasında ince ayar] tüm sanal makineler için gerekli yapılandırmayı yansıtacak şekilde her bir VM üzerinde cassandra.yaml düzenleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-342">Edit cassandra.yaml on each VM to reflect configuration needed by all the virtual machines [we will tweak this during the actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-343">Alan adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-343">Field Name</span></span>   </th><th> <span data-ttu-id="b26bb-344">Değer</span><span class="sxs-lookup"><span data-stu-id="b26bb-344">Value</span></span>  </th><th>    <span data-ttu-id="b26bb-345">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="b26bb-346">küme_adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-346">cluster_name</span></span> </td><td>    <span data-ttu-id="b26bb-347">"CustomerService"</span><span class="sxs-lookup"><span data-stu-id="b26bb-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="b26bb-348">Dağıtımınızı yansıtır adı kullan</span><span class="sxs-lookup"><span data-stu-id="b26bb-348">Use the name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="b26bb-349">listen_address</span></span>    </td><td><span data-ttu-id="b26bb-350">[boş bırakın]</span><span class="sxs-lookup"><span data-stu-id="b26bb-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="b26bb-351">"Localhost" Sil</span><span class="sxs-lookup"><span data-stu-id="b26bb-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="b26bb-352">rpc_addres</span></span>   </td><td><span data-ttu-id="b26bb-353">[boş bırakın]</span><span class="sxs-lookup"><span data-stu-id="b26bb-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="b26bb-354">"Localhost" Sil</span><span class="sxs-lookup"><span data-stu-id="b26bb-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-355">oluştururken Çekirdeği</span><span class="sxs-lookup"><span data-stu-id="b26bb-355">seeds</span></span>    </td><td><span data-ttu-id="b26bb-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="b26bb-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="b26bb-357">Şu oluştururken çekirdeği atanan tüm IP adresleri listesi.</span><span class="sxs-lookup"><span data-stu-id="b26bb-357">List of  all the IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="b26bb-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="b26bb-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="b26bb-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="b26bb-360">Bu veri merkezi ve VM raf çıkarımını yapma NetworkTopologyStrateg tarafından kullanılır</span><span class="sxs-lookup"><span data-stu-id="b26bb-360">This is used by the NetworkTopologyStrateg for inferring the data center and the rack of the VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-the-vm-image"></a><span data-ttu-id="b26bb-361">6. adım: VM görüntüsü yakalama</span><span class="sxs-lookup"><span data-stu-id="b26bb-361">Step 6: Capture the VM image</span></span>
<span data-ttu-id="b26bb-362">Ana bilgisayar adı (hk-CA-template.cloudapp.net) ve daha önce oluşturulan SSH özel anahtar kullanılarak sanal makinede oturum açın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-362">Log into the virtual machine using the hostname (hk-cas-template.cloudapp.net) and the SSH private key previously created.</span></span> <span data-ttu-id="b26bb-363">Bkz: nasıl yapılır Linux üzerinde ssh komutunu kullanarak veya putty.exe oturum hakkında ayrıntılar için Azure ile SSH kullanma.</span><span class="sxs-lookup"><span data-stu-id="b26bb-363">See How to Use SSH with Linux on Azure for details on how to log in using the command ssh or putty.exe.</span></span>

<span data-ttu-id="b26bb-364">Görüntü yakalama eylemleri aşağıdaki dizisini yürütün:</span><span class="sxs-lookup"><span data-stu-id="b26bb-364">Execute the following sequence of actions to capture the image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="b26bb-365">1. Deprovision</span><span class="sxs-lookup"><span data-stu-id="b26bb-365">1. Deprovision</span></span>
<span data-ttu-id="b26bb-366">Komutunu "sudo waagent-deprovision + kullanıcı" sanal makine örneği belirli bilgileri kaldırmak için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-366">Use the command “sudo waagent –deprovision+user” to remove Virtual Machine instance specific information.</span></span> <span data-ttu-id="b26bb-367">İçin bkz: [Linux sanal makine yakalama](capture-image.md) görüntü yakalama işlemi hakkında daha fazla ayrıntı şablon olarak kullanmak için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-367">See for [How to Capture a Linux Virtual Machine](capture-image.md) to Use as a Template more details on the image capture process.</span></span>

##### <a name="2-shutdown-the-vm"></a><span data-ttu-id="b26bb-368">2: VM'yi kapatma</span><span class="sxs-lookup"><span data-stu-id="b26bb-368">2: Shutdown the VM</span></span>
<span data-ttu-id="b26bb-369">Sanal makine vurgulanmış olduğundan emin olun ve altındaki komut çubuğundan kapatma bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-369">Make sure that the virtual machine is highlighted and click the SHUTDOWN link from the bottom command bar.</span></span>

##### <a name="3-capture-the-image"></a><span data-ttu-id="b26bb-370">3: görüntü yakalama</span><span class="sxs-lookup"><span data-stu-id="b26bb-370">3: Capture the image</span></span>
<span data-ttu-id="b26bb-371">Sanal makine vurgulanmış olduğundan emin olun ve altındaki komut çubuğundan YAKALAMA bağlantısını tıklatın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-371">Make sure that the virtual machine is highlighted and click the CAPTURE link from the bottom command bar.</span></span> <span data-ttu-id="b26bb-372">Sonraki ekranda (örneğin hk-cas-2-08-ub-14-04-2014071) bir görüntü adı verin, görüntü açıklaması uygun ve YAKALAMA işlemini tamamlamak için "" işaretini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-372">In the next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click the “check” mark to finish the CAPTURE process.</span></span>

<span data-ttu-id="b26bb-373">Bu işlem birkaç saniye sürer ve görüntünün görüntü Galerisi GÖRÜNTÜLERİM bölümünde kullanılabilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-373">This will take a few seconds and the image should be available in MY IMAGES section of the image gallery.</span></span> <span data-ttu-id="b26bb-374">Görüntüsü başarıyla yakalandı sonra kaynak VM otomatik olarak silinir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-374">The source VM will be automatically deleted after the image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="b26bb-375">Tek bölge dağıtım işlemi</span><span class="sxs-lookup"><span data-stu-id="b26bb-375">Single Region Deployment Process</span></span>
<span data-ttu-id="b26bb-376">**1. adım: sanal ağ oluşturma** Azure portalı günlüğüne ve aşağıdaki tabloda gösterilen özniteliklere sahip bir sanal ağ (Klasik) oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b26bb-376">**Step 1: Create the Virtual Network** Log into the Azure portal and create a virtual network (classic) with the attributes shown in the following table.</span></span> <span data-ttu-id="b26bb-377">Bkz: [Azure portalını kullanarak bir sanal ağ (Klasik) oluşturmak](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) işleminin ayrıntılı adımlar için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-377">See [Create a virtual network (classic) using the Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of the process.</span></span>      

<table>
<tr><th><span data-ttu-id="b26bb-378">VM öznitelik adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-378">VM Attribute Name</span></span></th><th><span data-ttu-id="b26bb-379">Değer</span><span class="sxs-lookup"><span data-stu-id="b26bb-379">Value</span></span></th><th><span data-ttu-id="b26bb-380">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-381">Ad</span><span class="sxs-lookup"><span data-stu-id="b26bb-381">Name</span></span></td><td><span data-ttu-id="b26bb-382">vnet-cass-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-383">Bölge</span><span class="sxs-lookup"><span data-stu-id="b26bb-383">Region</span></span></td><td><span data-ttu-id="b26bb-384">Batı ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-385">DNS sunucuları</span><span class="sxs-lookup"><span data-stu-id="b26bb-385">DNS Servers</span></span></td><td><span data-ttu-id="b26bb-386">None</span><span class="sxs-lookup"><span data-stu-id="b26bb-386">None</span></span></td><td><span data-ttu-id="b26bb-387">Bir DNS sunucusu kullanmıyorsanız gibi bu iletiyi yoksayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-388">Adres alanı</span><span class="sxs-lookup"><span data-stu-id="b26bb-388">Address Space</span></span></td><td><span data-ttu-id="b26bb-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b26bb-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="b26bb-390">Başlangıç IP</span><span class="sxs-lookup"><span data-stu-id="b26bb-390">Starting IP</span></span></td><td><span data-ttu-id="b26bb-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="b26bb-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="b26bb-392">CIDR</span></span> </td><td><span data-ttu-id="b26bb-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="b26bb-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="b26bb-394">Aşağıdaki alt ağlar ekleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-394">Add the following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-395">Ad</span><span class="sxs-lookup"><span data-stu-id="b26bb-395">Name</span></span></th><th><span data-ttu-id="b26bb-396">Başlangıç IP</span><span class="sxs-lookup"><span data-stu-id="b26bb-396">Starting IP</span></span></th><th><span data-ttu-id="b26bb-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="b26bb-397">CIDR</span></span></th><th><span data-ttu-id="b26bb-398">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-399">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-399">web</span></span></td><td><span data-ttu-id="b26bb-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-400">10.1.1.0</span></span></td><td><span data-ttu-id="b26bb-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="b26bb-401">/24 (251)</span></span></td><td><span data-ttu-id="b26bb-402">Alt ağ web grubu</span><span class="sxs-lookup"><span data-stu-id="b26bb-402">Subnet for the web farm</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-403">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-403">data</span></span></td><td><span data-ttu-id="b26bb-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-404">10.1.2.0</span></span></td><td><span data-ttu-id="b26bb-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="b26bb-405">/24 (251)</span></span></td><td><span data-ttu-id="b26bb-406">Veritabanı düğümleri için alt ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-406">Subnet for the database nodes</span></span></td></tr>
</table>

<span data-ttu-id="b26bb-407">Veri ve Web alt ağlar, ağ güvenlik grupları kapsamını bu makalenin kapsamı dışındadır üzerinden korunabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-407">Data and Web subnets can be protected through network security groups the coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="b26bb-408">**2. adım: Sanal makine sağlamak** daha önce oluşturduğunuz görüntüsünü kullanarak, bulut sunucusu "hk-c-svc-Batı" şu sanal makineleri oluşturur ve bunları aşağıda gösterildiği gibi ilgili alt ağa bağlayın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-408">**Step 2: Provision Virtual Machines** Using the image created previously, we will create the following virtual machines in the cloud server “hk-c-svc-west” and bind them to the respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-409">Makine adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-409">Machine Name</span></span>    </th><th><span data-ttu-id="b26bb-410">Alt ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-410">Subnet</span></span>    </th><th><span data-ttu-id="b26bb-411">IP Adresi</span><span class="sxs-lookup"><span data-stu-id="b26bb-411">IP Address</span></span>    </th><th><span data-ttu-id="b26bb-412">Kullanılabilirlik kümesi</span><span class="sxs-lookup"><span data-stu-id="b26bb-412">Availability set</span></span></th><th><span data-ttu-id="b26bb-413">DC/raf</span><span class="sxs-lookup"><span data-stu-id="b26bb-413">DC/Rack</span></span></th><th><span data-ttu-id="b26bb-414">Çekirdek?</span><span class="sxs-lookup"><span data-stu-id="b26bb-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-415">HK-c1-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="b26bb-416">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-416">data</span></span>    </td><td><span data-ttu-id="b26bb-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="b26bb-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="b26bb-418">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="b26bb-419">DC WESTUS raf = raf1 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="b26bb-420">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-421">HK-c2-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="b26bb-422">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-422">data</span></span>    </td><td><span data-ttu-id="b26bb-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="b26bb-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="b26bb-424">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="b26bb-425">DC WESTUS raf = raf1 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="b26bb-426">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-427">HK-c3-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="b26bb-428">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-428">data</span></span>    </td><td><span data-ttu-id="b26bb-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="b26bb-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="b26bb-430">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="b26bb-431">DC WESTUS raf = rack2 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="b26bb-432">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-433">HK-c4-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="b26bb-434">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-434">data</span></span>    </td><td><span data-ttu-id="b26bb-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="b26bb-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="b26bb-436">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="b26bb-437">DC WESTUS raf = rack2 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="b26bb-438">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-439">HK-c5-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="b26bb-440">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-440">data</span></span>    </td><td><span data-ttu-id="b26bb-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="b26bb-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="b26bb-442">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="b26bb-443">DC WESTUS raf = rack3 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="b26bb-444">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-445">HK-c6-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="b26bb-446">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-446">data</span></span>    </td><td><span data-ttu-id="b26bb-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="b26bb-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="b26bb-448">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="b26bb-449">DC WESTUS raf = rack3 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="b26bb-450">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-451">HK-c7-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="b26bb-452">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-452">data</span></span>    </td><td><span data-ttu-id="b26bb-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="b26bb-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="b26bb-454">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="b26bb-455">DC WESTUS raf = rack4 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="b26bb-456">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-457">HK-c8-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="b26bb-458">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-458">data</span></span>    </td><td><span data-ttu-id="b26bb-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="b26bb-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="b26bb-460">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="b26bb-461">DC WESTUS raf = rack4 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="b26bb-462">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="b26bb-463">HK-w1-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="b26bb-464">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-464">web</span></span>    </td><td><span data-ttu-id="b26bb-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="b26bb-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="b26bb-466">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="b26bb-467">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-468">HK-w2-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="b26bb-469">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-469">web</span></span>    </td><td><span data-ttu-id="b26bb-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="b26bb-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="b26bb-471">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="b26bb-472">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="b26bb-473">Yukarıdaki listeye VM'lerin oluşturulması aşağıdaki işlem gerektirir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-473">Creation of the above list of VMs requires the following process:</span></span>

1. <span data-ttu-id="b26bb-474">Belirli bir bölgedeki bir boş bulut hizmeti oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="b26bb-475">Daha önce yakalanan görüntüden bir VM oluşturun ve daha önce oluşturduğunuz sanal ağa bağlayın; Bu tüm VM'ler için yineleyin</span><span class="sxs-lookup"><span data-stu-id="b26bb-475">Create a VM from the previously captured image and attach it to the virtual network created previously; repeat this for all the VMs</span></span>
3. <span data-ttu-id="b26bb-476">Bir iç yük dengeleyici bulut hizmetine eklemek ve "data" alt ağına bağlayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-476">Add an internal load balancer to the cloud service and attach it to the “data” subnet</span></span>
4. <span data-ttu-id="b26bb-477">Yük dengeli uç nokta yük dengelenmiş bir küme önceden oluşturulmuş iç yük dengeleyiciye bağlı aracılığıyla thrift trafiği için daha önce oluşturduğunuz her VM için ekleme</span><span class="sxs-lookup"><span data-stu-id="b26bb-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected to the previously created internal load balancer</span></span>

<span data-ttu-id="b26bb-478">Yukarıdaki işlem, Klasik Azure portalını kullanarak çalıştırılabilir; Windows makine (kullanın) bir Windows makinesine erişiminiz yoksa azure'da VM bir kullan tüm 8 sanal makineleri otomatik olarak sağlamak için aşağıdaki PowerShell betiğini kullanın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-478">The above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access to a Windows machine), use the following PowerShell script to provision all 8 VMs automatically.</span></span>

<span data-ttu-id="b26bb-479">**Listesi 1: PowerShell Betiği sanal makineleri sağlama**</span><span class="sxs-lookup"><span data-stu-id="b26bb-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into the current Powershell session before proceeding
        #The process: 1. create Azure Storage account, 2. create virtual network, 3.create the VM template, 2. crate a list of VMs from the template

        #fundamental variables - change these to reflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores the list of azure vm configuration objects
        #create the list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add the thrift endpoint to the internal load balancer for all the VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="b26bb-480">**3. adım: Her VM Cassandra yapılandırma**</span><span class="sxs-lookup"><span data-stu-id="b26bb-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="b26bb-481">VM oturum açın ve aşağıdakileri gerçekleştirin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-481">Log into the VM and perform the following:</span></span>

* <span data-ttu-id="b26bb-482">Veri merkezi ve raf özelliklerini belirtmek için $CASS_HOME/conf/cassandra-rackdc.properties düzenleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties to specify the data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="b26bb-483">Çekirdek düğümlerini aşağıdaki gibi yapılandırmak için cassandra.yaml düzenleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-483">Edit cassandra.yaml to configure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="b26bb-484">**4. adım: sanal makineleri başlatın ve küme test etme**</span><span class="sxs-lookup"><span data-stu-id="b26bb-484">**Step 4: Start the VMs and test the cluster**</span></span>

<span data-ttu-id="b26bb-485">Düğümler (örneğin hk-c1-Batı-us) birine oturum açın ve küme durumunu görmek için aşağıdaki komutu çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-485">Log into one of the nodes (e.g. hk-c1-west-us) and run the following command to see the status of the cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="b26bb-486">Benzer şekilde bir 8 düğüm kümesi için bir görüntü görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-486">You should see the display similar to the one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-487">Durum</span><span class="sxs-lookup"><span data-stu-id="b26bb-487">Status</span></span></th><th><span data-ttu-id="b26bb-488">Adres</span><span class="sxs-lookup"><span data-stu-id="b26bb-488">Address</span></span>    </th><th><span data-ttu-id="b26bb-489">Yükleme</span><span class="sxs-lookup"><span data-stu-id="b26bb-489">Load</span></span>    </th><th><span data-ttu-id="b26bb-490">Belirteçler</span><span class="sxs-lookup"><span data-stu-id="b26bb-490">Tokens</span></span>    </th><th><span data-ttu-id="b26bb-491">Sahibi</span><span class="sxs-lookup"><span data-stu-id="b26bb-491">Owns</span></span> </th><th><span data-ttu-id="b26bb-492">Ana bilgisayar kimliği</span><span class="sxs-lookup"><span data-stu-id="b26bb-492">Host ID</span></span>    </th><th><span data-ttu-id="b26bb-493">Raf</span><span class="sxs-lookup"><span data-stu-id="b26bb-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="b26bb-494">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-494">UN</span></span>    </td><td><span data-ttu-id="b26bb-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="b26bb-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="b26bb-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-496">87.81 KB</span></span>    </td><td><span data-ttu-id="b26bb-497">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-497">256</span></span>    </td><td><span data-ttu-id="b26bb-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="b26bb-498">38.0%</span></span>    </td><td><span data-ttu-id="b26bb-499">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-499">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-500">raf1</span><span class="sxs-lookup"><span data-stu-id="b26bb-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-501">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-501">UN</span></span>    </td><td><span data-ttu-id="b26bb-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="b26bb-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="b26bb-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-503">41.08 KB</span></span>    </td><td><span data-ttu-id="b26bb-504">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-504">256</span></span>    </td><td><span data-ttu-id="b26bb-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="b26bb-505">68.9%</span></span>    </td><td><span data-ttu-id="b26bb-506">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-506">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-507">raf1</span><span class="sxs-lookup"><span data-stu-id="b26bb-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-508">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-508">UN</span></span>    </td><td><span data-ttu-id="b26bb-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="b26bb-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="b26bb-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-510">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-511">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-511">256</span></span>    </td><td><span data-ttu-id="b26bb-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-512">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-513">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-513">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-514">rack2</span><span class="sxs-lookup"><span data-stu-id="b26bb-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-515">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-515">UN</span></span>    </td><td><span data-ttu-id="b26bb-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="b26bb-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="b26bb-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-517">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-518">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-518">256</span></span>    </td><td><span data-ttu-id="b26bb-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-519">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-520">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-520">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-521">rack2</span><span class="sxs-lookup"><span data-stu-id="b26bb-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-522">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-522">UN</span></span>    </td><td><span data-ttu-id="b26bb-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="b26bb-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="b26bb-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-524">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-525">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-525">256</span></span>    </td><td><span data-ttu-id="b26bb-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-526">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-527">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-527">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-528">rack3</span><span class="sxs-lookup"><span data-stu-id="b26bb-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-529">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-529">UN</span></span>    </td><td><span data-ttu-id="b26bb-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="b26bb-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="b26bb-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-531">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-532">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-532">256</span></span>    </td><td><span data-ttu-id="b26bb-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-533">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-534">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-534">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-535">rack3</span><span class="sxs-lookup"><span data-stu-id="b26bb-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-536">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-536">UN</span></span>    </td><td><span data-ttu-id="b26bb-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="b26bb-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="b26bb-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-538">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-539">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-539">256</span></span>    </td><td><span data-ttu-id="b26bb-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-540">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-541">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-541">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-542">rack4</span><span class="sxs-lookup"><span data-stu-id="b26bb-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="b26bb-543">KALDIRMA</span><span class="sxs-lookup"><span data-stu-id="b26bb-543">UN</span></span>    </td><td><span data-ttu-id="b26bb-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="b26bb-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="b26bb-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="b26bb-545">55.29 KB</span></span>    </td><td><span data-ttu-id="b26bb-546">256</span><span class="sxs-lookup"><span data-stu-id="b26bb-546">256</span></span>    </td><td><span data-ttu-id="b26bb-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="b26bb-547">68.8%</span></span>    </td><td><span data-ttu-id="b26bb-548">GUID (kaldırılır)</span><span class="sxs-lookup"><span data-stu-id="b26bb-548">Guid (removed)</span></span></td><td><span data-ttu-id="b26bb-549">rack4</span><span class="sxs-lookup"><span data-stu-id="b26bb-549">rack4</span></span></td></tr>
</table>

## <a name="test-the-single-region-cluster"></a><span data-ttu-id="b26bb-550">Tek bölge kümesi test</span><span class="sxs-lookup"><span data-stu-id="b26bb-550">Test the Single Region Cluster</span></span>
<span data-ttu-id="b26bb-551">Küme test etmek için aşağıdaki adımları kullanın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-551">Use the following steps to test the cluster:</span></span>

1. <span data-ttu-id="b26bb-552">Powershell komutu Get-AzureInternalLoadbalancer komutunu kullanarak, iç yük dengeleyici IP adresi (örneğin Al  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="b26bb-552">Using the Powershell command Get-AzureInternalLoadbalancer commandlet, obtain the IP address of the internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="b26bb-553">Komutun sözdizimi aşağıda gösterilmiştir: Get-AzureLoadbalancer – [IP adresini yanı sıra iç yük dengeleyicisi ayrıntılarını görüntüler] ServiceName "hk-c-svc-Batı-us"</span><span class="sxs-lookup"><span data-stu-id="b26bb-553">The syntax of the command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays the details of the internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="b26bb-554">Web grubu VM (örneğin hk-w1-Batı-us) günlüğüne Putty kullanarak veya ssh</span><span class="sxs-lookup"><span data-stu-id="b26bb-554">Log into the web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="b26bb-555">$CASS_HOME/bin/cqlsh 10.1.2.101 yürütme 9160</span><span class="sxs-lookup"><span data-stu-id="b26bb-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="b26bb-556">Kümenin çalışıp çalışmadığını doğrulamak için aşağıdaki CQL komutları kullanın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-556">Use the following CQL commands to verify if the cluster is working:</span></span>
   
     <span data-ttu-id="b26bb-557">İLE çoğaltma oluşturma KEYSPACE customers_ks = {'sınıfı': 'SimpleStrategy', 'replication_factor': 3};   Customers_ks; kullanın.   Tablo Customers(customer_id int PRIMARY KEY, firstname text, lastname text); oluşturma   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) değerleri (2, 'Jane', 'Etikan');</span><span class="sxs-lookup"><span data-stu-id="b26bb-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="b26bb-558">SEÇİN * MÜŞTERİLERDEN;</span><span class="sxs-lookup"><span data-stu-id="b26bb-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="b26bb-559">Bir görünüm aşağıdaki gibi görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-559">You should see a display like the one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="b26bb-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="b26bb-560">customer_id</span></span> </th><th> <span data-ttu-id="b26bb-561">FirstName</span><span class="sxs-lookup"><span data-stu-id="b26bb-561">firstname</span></span> </th><th> <span data-ttu-id="b26bb-562">Soyadı</span><span class="sxs-lookup"><span data-stu-id="b26bb-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="b26bb-563">1</span><span class="sxs-lookup"><span data-stu-id="b26bb-563">1</span></span> </td><td> <span data-ttu-id="b26bb-564">John</span><span class="sxs-lookup"><span data-stu-id="b26bb-564">John</span></span> </td><td> <span data-ttu-id="b26bb-565">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="b26bb-566">2</span><span class="sxs-lookup"><span data-stu-id="b26bb-566">2</span></span> </td><td> <span data-ttu-id="b26bb-567">Jane</span><span class="sxs-lookup"><span data-stu-id="b26bb-567">Jane</span></span> </td><td> <span data-ttu-id="b26bb-568">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="b26bb-569">4. adımda oluşturduğunuz keyspace 3'ün bir replication_factor SimpleStrategy kullandığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-569">Please note that the keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="b26bb-570">SimpleStrategy NetworkTopologyStrategy çok veri merkezi ancak dağıtımlar için tek bir veri merkezi dağıtımları önerilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="b26bb-571">Replication_factor 3 düğümü hataları için dayanıklılık sunar.</span><span class="sxs-lookup"><span data-stu-id="b26bb-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="b26bb-572"><a id="tworegion"></a>Bölgeli dağıtım işlemi</span><span class="sxs-lookup"><span data-stu-id="b26bb-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="b26bb-573">İşlem tek bölge dağıtımı tamamlandı yararlanır ve ikinci bölge yüklemek için aynı işlemi yineleyin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-573">Will leverage the single region deployment completed and repeat the same process for installing the second region.</span></span> <span data-ttu-id="b26bb-574">Bir veya birden çok bölge dağıtımı arasındaki temel farklılık arası bölge iletişimi için VPN tüneli kurulduğundan; Biz başlatılır ağ yüklemesi ile sanal makineleri sağlamak ve Cassandra yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-574">The key difference between the single and multiple region deployment is the VPN tunnel setup for inter-region communication; we will start with the network installation, provision the VMs and configure Cassandra.</span></span>

### <a name="step-1-create-the-virtual-network-at-the-2nd-region"></a><span data-ttu-id="b26bb-575">1. adım: 2 bölge sanal ağ oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-575">Step 1: Create the Virtual Network at the 2nd Region</span></span>
<span data-ttu-id="b26bb-576">Azure Klasik portalında oturum açın ve tablodaki öznitelikleri göster ile bir sanal ağ oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b26bb-576">Log into the Azure classic portal and create a Virtual Network with the attributes show in the table.</span></span> <span data-ttu-id="b26bb-577">Bkz: [Azure Klasik Portalı'nda Cloud-Only sanal ağ yapılandırma](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) işleminin ayrıntılı adımlar için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-577">See [Configure a Cloud-Only Virtual Network in the Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of the process.</span></span>      

<table>
<tr><th><span data-ttu-id="b26bb-578">Öznitelik adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-578">Attribute Name</span></span>    </th><th><span data-ttu-id="b26bb-579">Değer</span><span class="sxs-lookup"><span data-stu-id="b26bb-579">Value</span></span>    </th><th><span data-ttu-id="b26bb-580">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-581">Ad</span><span class="sxs-lookup"><span data-stu-id="b26bb-581">Name</span></span>    </td><td><span data-ttu-id="b26bb-582">vnet-cass-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-583">Bölge</span><span class="sxs-lookup"><span data-stu-id="b26bb-583">Region</span></span>    </td><td><span data-ttu-id="b26bb-584">Doğu ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-585">DNS sunucuları</span><span class="sxs-lookup"><span data-stu-id="b26bb-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="b26bb-586">Bir DNS sunucusu kullanmıyorsanız gibi bu iletiyi yoksayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-587">Noktadan siteye VPN bağlantısını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b26bb-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="b26bb-588">Bu iletiyi yoksayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-589">Siteden siteye VPN'yi yapılandırın</span><span class="sxs-lookup"><span data-stu-id="b26bb-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="b26bb-590">Bu iletiyi yoksayın</span><span class="sxs-lookup"><span data-stu-id="b26bb-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-591">Adres alanı</span><span class="sxs-lookup"><span data-stu-id="b26bb-591">Address Space</span></span>    </td><td><span data-ttu-id="b26bb-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b26bb-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-593">Başlangıç IP</span><span class="sxs-lookup"><span data-stu-id="b26bb-593">Starting IP</span></span>    </td><td><span data-ttu-id="b26bb-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="b26bb-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="b26bb-595">CIDR</span></span>    </td><td><span data-ttu-id="b26bb-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="b26bb-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="b26bb-597">Aşağıdaki alt ağlar ekleyin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-597">Add the following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-598">Ad</span><span class="sxs-lookup"><span data-stu-id="b26bb-598">Name</span></span>    </th><th><span data-ttu-id="b26bb-599">Başlangıç IP</span><span class="sxs-lookup"><span data-stu-id="b26bb-599">Starting IP</span></span>    </th><th><span data-ttu-id="b26bb-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="b26bb-600">CIDR</span></span>    </th><th><span data-ttu-id="b26bb-601">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-602">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-602">web</span></span>    </td><td><span data-ttu-id="b26bb-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="b26bb-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="b26bb-604">/24 (251)</span></span>    </td><td><span data-ttu-id="b26bb-605">Alt ağ web grubu</span><span class="sxs-lookup"><span data-stu-id="b26bb-605">Subnet for the web farm</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-606">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-606">data</span></span>    </td><td><span data-ttu-id="b26bb-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="b26bb-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="b26bb-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="b26bb-608">/24 (251)</span></span>    </td><td><span data-ttu-id="b26bb-609">Veritabanı düğümleri için alt ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-609">Subnet for the database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="b26bb-610">2. adım: Yerel ağlar oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="b26bb-611">Azure sanal ağ yerel bir ağda özel bir bulut ya da başka bir Azure bölgesi de dahil olmak üzere uzak bir siteye eşleyen bir proxy adresi alanıdır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-611">A Local Network in Azure virtual networking is a proxy address space that maps to a remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="b26bb-612">Bu proxy adres alanı bir uzak ağ geçidi yönlendirme ağ için doğru ağ hedeflerine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-612">This proxy address space is bound to a remote gateway for routing network to the right networking destinations.</span></span> <span data-ttu-id="b26bb-613">Bkz: [Vnet'i Vnet'e bağlantı yapılandırma](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) VNET-VNET bağlantı kurma hakkında yönergeler için.</span><span class="sxs-lookup"><span data-stu-id="b26bb-613">See [Configure a VNet to VNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for the instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="b26bb-614">Aşağıdaki ayrıntıları başına iki yerel ağlar oluşturun:</span><span class="sxs-lookup"><span data-stu-id="b26bb-614">Create two local networks per the following details:</span></span>

| <span data-ttu-id="b26bb-615">Ağ adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-615">Network Name</span></span> | <span data-ttu-id="b26bb-616">VPN ağ geçidi adresi</span><span class="sxs-lookup"><span data-stu-id="b26bb-616">VPN Gateway Address</span></span> | <span data-ttu-id="b26bb-617">Adres alanı</span><span class="sxs-lookup"><span data-stu-id="b26bb-617">Address Space</span></span> | <span data-ttu-id="b26bb-618">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="b26bb-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b26bb-619">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="b26bb-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="b26bb-620">23.1.1.1</span></span> |<span data-ttu-id="b26bb-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b26bb-621">10.2.0.0/16</span></span> |<span data-ttu-id="b26bb-622">Yerel ağ oluşturulurken bir yer tutucu ağ geçidi adresi verin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-622">While creating the Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="b26bb-623">Ağ geçidi oluşturulduktan sonra gerçek ağ geçidi adresi girilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-623">The real gateway address is filled once the gateway is created.</span></span> <span data-ttu-id="b26bb-624">İlgili uzak VNET adres alanı tam olarak eşleştiğinden emin olun; Bu durumda Doğu ABD bölgesinde sanal ağ oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="b26bb-624">Make sure the address space exactly matches the respective remote VNET; in this case the VNET created in the East US region.</span></span> |
| <span data-ttu-id="b26bb-625">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="b26bb-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="b26bb-626">23.2.2.2</span></span> |<span data-ttu-id="b26bb-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b26bb-627">10.1.0.0/16</span></span> |<span data-ttu-id="b26bb-628">Yerel ağ oluşturulurken bir yer tutucu ağ geçidi adresi verin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-628">While creating the Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="b26bb-629">Ağ geçidi oluşturulduktan sonra gerçek ağ geçidi adresi girilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-629">The real gateway address is filled once the gateway is created.</span></span> <span data-ttu-id="b26bb-630">İlgili uzak VNET adres alanı tam olarak eşleştiğinden emin olun; Bu durumda Batı ABD bölgesinde sanal ağ oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="b26bb-630">Make sure the address space exactly matches the respective remote VNET; in this case the VNET created in the West US region.</span></span> |

### <a name="step-3-map-local-network-to-the-respective-vnets"></a><span data-ttu-id="b26bb-631">"3. adım: Eşleme yerel" ağa ilgili sanal ağları</span><span class="sxs-lookup"><span data-stu-id="b26bb-631">Step 3: Map “Local” network to the respective VNETs</span></span>
<span data-ttu-id="b26bb-632">Azure Klasik portalından her sanal ağ seçin, "Yapılandır"'ı tıklatın, "Yerel ağa bağlan" denetleyin ve aşağıdaki ayrıntıları başına yerel ağlar seçin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-632">From the Azure classic portal, select each vnet, click “Configure”, check “Connect to the local network”, and select the Local Networks per the following details:</span></span>

| <span data-ttu-id="b26bb-633">Sanal Ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-633">Virtual Network</span></span> | <span data-ttu-id="b26bb-634">Yerel ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="b26bb-635">HK-vnet-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-635">hk-vnet-west-us</span></span> |<span data-ttu-id="b26bb-636">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="b26bb-637">HK-vnet-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-637">hk-vnet-east-us</span></span> |<span data-ttu-id="b26bb-638">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="b26bb-639">4. adım: Ağ geçitleri VNET1 ve vnet2'yi oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="b26bb-640">Her iki sanal ağlar panodan oluşturmak sağlama işlemi VPN ağ geçidi tetikleyecek ağ geçidi'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-640">From the dashboard of both the virtual networks, click CREATE GATEWAY which will trigger the VPN gateway provisioning process.</span></span> <span data-ttu-id="b26bb-641">Birkaç dakika sonra her sanal ağ Panosu gerçek ağ geçidi adresi görüntülemelidir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-641">After a few minutes the dashboard of each virtual network should display the actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-the-respective-gateway-addresses"></a><span data-ttu-id="b26bb-642">5. adım: Güncelleştirme "Yerel" ağlarla ilgili "ağ geçidi" adresleri</span><span class="sxs-lookup"><span data-stu-id="b26bb-642">Step 5: Update “Local” networks with the respective “Gateway” addresses</span></span>
<span data-ttu-id="b26bb-643">Yalnızca sağlanan ağ geçitleri gerçek IP adresiyle yer tutucu ağ geçidi IP adresini değiştirmek için hem yerel ağlar düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="b26bb-643">Edit both the local networks to replace the placeholder gateway IP address with the real IP address of the just provisioned gateways.</span></span> <span data-ttu-id="b26bb-644">Aşağıdaki eşleme kullanın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-644">Use the following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="b26bb-645">Yerel ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-645">Local Network</span></span>    </th><th><span data-ttu-id="b26bb-646">Sanal Ağ Geçidi</span><span class="sxs-lookup"><span data-stu-id="b26bb-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="b26bb-647">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="b26bb-648">Ağ geçidi hk-vnet-Batı-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="b26bb-649">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="b26bb-650">Ağ geçidi hk-vnet-Doğu-ABD</span><span class="sxs-lookup"><span data-stu-id="b26bb-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-the-shared-key"></a><span data-ttu-id="b26bb-651">6. adım: paylaşılan anahtar güncelleştir</span><span class="sxs-lookup"><span data-stu-id="b26bb-651">Step 6: Update the shared key</span></span>
<span data-ttu-id="b26bb-652">Her VPN ağ geçidi [hem ağ geçitleri için artırmak amacıyla anahtarını kullanın] IPSec anahtarı güncelleştirmek için aşağıdaki Powershell betiğini kullanın: Set-AzureVNetGatewayKey - vnetname adlı hk-vnet-Doğu-us - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Set-AzureVNetGatewayKey - vnetname adlı hk-vnet-Batı-us - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="b26bb-652">Use the following Powershell script to update the IPSec key of each VPN gateway [use the sake key for both the gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-the-vnet-to-vnet-connection"></a><span data-ttu-id="b26bb-653">7. adım: VNET-VNET bağlantısı</span><span class="sxs-lookup"><span data-stu-id="b26bb-653">Step 7: Establish the VNET-to-VNET connection</span></span>
<span data-ttu-id="b26bb-654">Klasik Azure portalından, ağ geçidi için ağ geçidi bağlantısı kurmak için her iki sanal ağlar "PANO" menüsünü kullanın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-654">From the Azure classic portal, use the “DASHBOARD” menu of both the virtual networks to establish gateway-to-gateway connection.</span></span> <span data-ttu-id="b26bb-655">"BAĞLAN" menü öğeleri alt kısımdaki araç kullanın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-655">Use the “CONNECT” menu items in the bottom toolbar.</span></span> <span data-ttu-id="b26bb-656">Birkaç dakika sonra Pano için grafik bağlantı ayrıntılarını görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="b26bb-656">After a few minutes the dashboard should display the connection details graphically.</span></span>

### <a name="step-8-create-the-virtual-machines-in-region-2"></a><span data-ttu-id="b26bb-657">8. adım: Bölge #2 sanal makineler oluşturma</span><span class="sxs-lookup"><span data-stu-id="b26bb-657">Step 8: Create the virtual machines in region #2</span></span>
<span data-ttu-id="b26bb-658">Aynı Azure depolama hesabı görüntüsünü VHD dosyasına #2 bölgede bulunan kopyalama veya adımları izleyerek bölge #1 dağıtımı'nda açıklandığı gibi Ubuntu görüntüsünü oluşturmak ve görüntü oluşturun.</span><span class="sxs-lookup"><span data-stu-id="b26bb-658">Create the Ubuntu image as described in region #1 deployment by following the same steps or copy the image VHD file to the Azure storage account located in region #2 and create the image.</span></span> <span data-ttu-id="b26bb-659">Bu görüntüyü kullanın ve aşağıdaki sanal makinelerin listesini yeni bir bulut hizmeti hk-c-svc-Doğu-us oluşturun:</span><span class="sxs-lookup"><span data-stu-id="b26bb-659">Use this image and create the following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="b26bb-660">Makine adı</span><span class="sxs-lookup"><span data-stu-id="b26bb-660">Machine Name</span></span> | <span data-ttu-id="b26bb-661">Alt ağ</span><span class="sxs-lookup"><span data-stu-id="b26bb-661">Subnet</span></span> | <span data-ttu-id="b26bb-662">IP Adresi</span><span class="sxs-lookup"><span data-stu-id="b26bb-662">IP Address</span></span> | <span data-ttu-id="b26bb-663">Kullanılabilirlik kümesi</span><span class="sxs-lookup"><span data-stu-id="b26bb-663">Availability set</span></span> | <span data-ttu-id="b26bb-664">DC/raf</span><span class="sxs-lookup"><span data-stu-id="b26bb-664">DC/Rack</span></span> | <span data-ttu-id="b26bb-665">Çekirdek?</span><span class="sxs-lookup"><span data-stu-id="b26bb-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="b26bb-666">HK-c1-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-666">hk-c1-east-us</span></span> |<span data-ttu-id="b26bb-667">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-667">data</span></span> |<span data-ttu-id="b26bb-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="b26bb-668">10.2.2.4</span></span> |<span data-ttu-id="b26bb-669">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-669">hk-c-aset-1</span></span> |<span data-ttu-id="b26bb-670">DC EASTUS raf = raf1 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="b26bb-671">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-671">Yes</span></span> |
| <span data-ttu-id="b26bb-672">HK-c2-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-672">hk-c2-east-us</span></span> |<span data-ttu-id="b26bb-673">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-673">data</span></span> |<span data-ttu-id="b26bb-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="b26bb-674">10.2.2.5</span></span> |<span data-ttu-id="b26bb-675">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-675">hk-c-aset-1</span></span> |<span data-ttu-id="b26bb-676">DC EASTUS raf = raf1 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="b26bb-677">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-677">No</span></span> |
| <span data-ttu-id="b26bb-678">HK-c3-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-678">hk-c3-east-us</span></span> |<span data-ttu-id="b26bb-679">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-679">data</span></span> |<span data-ttu-id="b26bb-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="b26bb-680">10.2.2.6</span></span> |<span data-ttu-id="b26bb-681">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-681">hk-c-aset-1</span></span> |<span data-ttu-id="b26bb-682">DC EASTUS raf = rack2 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="b26bb-683">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-683">Yes</span></span> |
| <span data-ttu-id="b26bb-684">HK-c5-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-684">hk-c5-east-us</span></span> |<span data-ttu-id="b26bb-685">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-685">data</span></span> |<span data-ttu-id="b26bb-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="b26bb-686">10.2.2.8</span></span> |<span data-ttu-id="b26bb-687">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-687">hk-c-aset-2</span></span> |<span data-ttu-id="b26bb-688">DC EASTUS raf = rack3 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="b26bb-689">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-689">Yes</span></span> |
| <span data-ttu-id="b26bb-690">HK-c6-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-690">hk-c6-east-us</span></span> |<span data-ttu-id="b26bb-691">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-691">data</span></span> |<span data-ttu-id="b26bb-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="b26bb-692">10.2.2.9</span></span> |<span data-ttu-id="b26bb-693">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-693">hk-c-aset-2</span></span> |<span data-ttu-id="b26bb-694">DC EASTUS raf = rack3 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="b26bb-695">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-695">No</span></span> |
| <span data-ttu-id="b26bb-696">HK-c7-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-696">hk-c7-east-us</span></span> |<span data-ttu-id="b26bb-697">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-697">data</span></span> |<span data-ttu-id="b26bb-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="b26bb-698">10.2.2.10</span></span> |<span data-ttu-id="b26bb-699">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-699">hk-c-aset-2</span></span> |<span data-ttu-id="b26bb-700">DC EASTUS raf = rack4 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="b26bb-701">Evet</span><span class="sxs-lookup"><span data-stu-id="b26bb-701">Yes</span></span> |
| <span data-ttu-id="b26bb-702">HK-c8-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-702">hk-c8-east-us</span></span> |<span data-ttu-id="b26bb-703">Veri</span><span class="sxs-lookup"><span data-stu-id="b26bb-703">data</span></span> |<span data-ttu-id="b26bb-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="b26bb-704">10.2.2.11</span></span> |<span data-ttu-id="b26bb-705">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="b26bb-705">hk-c-aset-2</span></span> |<span data-ttu-id="b26bb-706">DC EASTUS raf = rack4 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="b26bb-707">Hayır</span><span class="sxs-lookup"><span data-stu-id="b26bb-707">No</span></span> |
| <span data-ttu-id="b26bb-708">HK-w1-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-708">hk-w1-east-us</span></span> |<span data-ttu-id="b26bb-709">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-709">web</span></span> |<span data-ttu-id="b26bb-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="b26bb-710">10.2.1.4</span></span> |<span data-ttu-id="b26bb-711">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-711">hk-w-aset-1</span></span> |<span data-ttu-id="b26bb-712">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-712">N/A</span></span> |<span data-ttu-id="b26bb-713">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-713">N/A</span></span> |
| <span data-ttu-id="b26bb-714">HK-w2-Doğu-us</span><span class="sxs-lookup"><span data-stu-id="b26bb-714">hk-w2-east-us</span></span> |<span data-ttu-id="b26bb-715">Web</span><span class="sxs-lookup"><span data-stu-id="b26bb-715">web</span></span> |<span data-ttu-id="b26bb-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="b26bb-716">10.2.1.5</span></span> |<span data-ttu-id="b26bb-717">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="b26bb-717">hk-w-aset-1</span></span> |<span data-ttu-id="b26bb-718">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-718">N/A</span></span> |<span data-ttu-id="b26bb-719">Yok</span><span class="sxs-lookup"><span data-stu-id="b26bb-719">N/A</span></span> |

<span data-ttu-id="b26bb-720">Bölge #1 olarak aynı yönergeleri izleyin, ancak 10.2.xxx.xxx adres alanı kullanın.</span><span class="sxs-lookup"><span data-stu-id="b26bb-720">Follow the same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="b26bb-721">9. adım: Her VM Cassandra yapılandırma</span><span class="sxs-lookup"><span data-stu-id="b26bb-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="b26bb-722">VM oturum açın ve aşağıdakileri gerçekleştirin:</span><span class="sxs-lookup"><span data-stu-id="b26bb-722">Log into the VM and perform the following:</span></span>

1. <span data-ttu-id="b26bb-723">Veri merkezi ve raf özellikleri biçiminde belirtmek için $CASS_HOME/conf/cassandra-rackdc.properties Düzenle: dc EASTUS raf = raf1 =</span><span class="sxs-lookup"><span data-stu-id="b26bb-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties to specify the data center and rack properties in the format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="b26bb-724">Çekirdek düğümlerini yapılandırmak için cassandra.yaml Düzenle: oluştururken çekirdeği: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span><span class="sxs-lookup"><span data-stu-id="b26bb-724">Edit cassandra.yaml to configure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="b26bb-725">10. adım: Cassandra Başlat</span><span class="sxs-lookup"><span data-stu-id="b26bb-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="b26bb-726">Her bir VM oturum ve aşağıdaki komutu çalıştırarak arka planda Cassandra Başlat: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="b26bb-726">Log into each VM and start Cassandra in the background by running the following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-the-multi-region-cluster"></a><span data-ttu-id="b26bb-727">Bölgeli küme test</span><span class="sxs-lookup"><span data-stu-id="b26bb-727">Test the Multi-Region Cluster</span></span>
<span data-ttu-id="b26bb-728">Artık her Azure bölgesindeki 8 düğümlerle 16 düğüme Cassandra dağıtıldı.</span><span class="sxs-lookup"><span data-stu-id="b26bb-728">By now Cassandra has been deployed to 16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="b26bb-729">Aynı kümedeki ortak küme adı ve çekirdek düğüm yapılandırması, bu düğümler şunlardır.</span><span class="sxs-lookup"><span data-stu-id="b26bb-729">These nodes are in the same cluster by virtue of the common cluster name and the seed node configuration.</span></span> <span data-ttu-id="b26bb-730">Küme sınamak için aşağıdaki yordamı kullanın:</span><span class="sxs-lookup"><span data-stu-id="b26bb-730">Use the following process to test the cluster:</span></span>

### <a name="step-1-get-the-internal-load-balancer-ip-for-both-the-regions-using-powershell"></a><span data-ttu-id="b26bb-731">1. adım: PowerShell kullanarak her iki bölgeler için iç yük dengeleyici IP Al</span><span class="sxs-lookup"><span data-stu-id="b26bb-731">Step 1: Get the internal load balancer IP for both the regions using PowerShell</span></span>
* <span data-ttu-id="b26bb-732">Get-AzureInternalLoadbalancer - ServiceName "hk-c-svc-Batı-us"</span><span class="sxs-lookup"><span data-stu-id="b26bb-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="b26bb-733">Get-AzureInternalLoadbalancer - ServiceName "hk-c-svc-Doğu-us"</span><span class="sxs-lookup"><span data-stu-id="b26bb-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="b26bb-734">IP adreslerini not alın (örneğin - 10.1.2.101, Doğu - Batı 10.2.2.101) görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-734">Note the IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-the-following-in-the-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="b26bb-735">2. adım: aşağıdakileri oturum hk-w1-Batı-us açtıktan sonra Batı bölgesinde yürütün</span><span class="sxs-lookup"><span data-stu-id="b26bb-735">Step 2: Execute the following in the west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="b26bb-736">$CASS_HOME/bin/cqlsh 10.1.2.101 yürütme 9160</span><span class="sxs-lookup"><span data-stu-id="b26bb-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="b26bb-737">Aşağıdaki CQL komutları yürütün:</span><span class="sxs-lookup"><span data-stu-id="b26bb-737">Execute the following CQL commands:</span></span>
   
     <span data-ttu-id="b26bb-738">İLE çoğaltma oluşturma KEYSPACE customers_ks = {'sınıfı': 'NetworkToplogyStrategy', 'WESTUS': 3 'EASTUS': 3};   Customers_ks; kullanın.   Tablo Customers(customer_id int PRIMARY KEY, firstname text, lastname text); oluşturma   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) değerleri (2, 'Jane', 'Etikan');   SEÇİN * MÜŞTERİLERDEN;</span><span class="sxs-lookup"><span data-stu-id="b26bb-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="b26bb-739">Bir görünüm aşağıdaki gibi görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-739">You should see a display like the one below:</span></span>

| <span data-ttu-id="b26bb-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="b26bb-740">customer_id</span></span> | <span data-ttu-id="b26bb-741">FirstName</span><span class="sxs-lookup"><span data-stu-id="b26bb-741">firstname</span></span> | <span data-ttu-id="b26bb-742">Soyadı</span><span class="sxs-lookup"><span data-stu-id="b26bb-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b26bb-743">1</span><span class="sxs-lookup"><span data-stu-id="b26bb-743">1</span></span> |<span data-ttu-id="b26bb-744">John</span><span class="sxs-lookup"><span data-stu-id="b26bb-744">John</span></span> |<span data-ttu-id="b26bb-745">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-745">Doe</span></span> |
| <span data-ttu-id="b26bb-746">2</span><span class="sxs-lookup"><span data-stu-id="b26bb-746">2</span></span> |<span data-ttu-id="b26bb-747">Jane</span><span class="sxs-lookup"><span data-stu-id="b26bb-747">Jane</span></span> |<span data-ttu-id="b26bb-748">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-748">Doe</span></span> |

### <a name="step-3-execute-the-following-in-the-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="b26bb-749">3. adım: oturum hk-w1-Doğu-us açtıktan sonra Doğu bölgesinde aşağıdakileri yürütün:</span><span class="sxs-lookup"><span data-stu-id="b26bb-749">Step 3: Execute the following in the east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="b26bb-750">$CASS_HOME/bin/cqlsh 10.2.2.101 yürütme 9160</span><span class="sxs-lookup"><span data-stu-id="b26bb-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="b26bb-751">Aşağıdaki CQL komutları yürütün:</span><span class="sxs-lookup"><span data-stu-id="b26bb-751">Execute the following CQL commands:</span></span>
   
     <span data-ttu-id="b26bb-752">Customers_ks; kullanın.   Tablo Customers(customer_id int PRIMARY KEY, firstname text, lastname text); oluşturma   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) değerleri (2, 'Jane', 'Etikan');   SEÇİN * MÜŞTERİLERDEN;</span><span class="sxs-lookup"><span data-stu-id="b26bb-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="b26bb-753">Batı bölgesini görüldüğü gibi aynı görüntü görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="b26bb-753">You should see the same display as seen for the West region:</span></span>

| <span data-ttu-id="b26bb-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="b26bb-754">customer_id</span></span> | <span data-ttu-id="b26bb-755">FirstName</span><span class="sxs-lookup"><span data-stu-id="b26bb-755">firstname</span></span> | <span data-ttu-id="b26bb-756">Soyadı</span><span class="sxs-lookup"><span data-stu-id="b26bb-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b26bb-757">1</span><span class="sxs-lookup"><span data-stu-id="b26bb-757">1</span></span> |<span data-ttu-id="b26bb-758">John</span><span class="sxs-lookup"><span data-stu-id="b26bb-758">John</span></span> |<span data-ttu-id="b26bb-759">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-759">Doe</span></span> |
| <span data-ttu-id="b26bb-760">2</span><span class="sxs-lookup"><span data-stu-id="b26bb-760">2</span></span> |<span data-ttu-id="b26bb-761">Jane</span><span class="sxs-lookup"><span data-stu-id="b26bb-761">Jane</span></span> |<span data-ttu-id="b26bb-762">Doe</span><span class="sxs-lookup"><span data-stu-id="b26bb-762">Doe</span></span> |

<span data-ttu-id="b26bb-763">Birkaç daha fazla eklemeleri yürütün ve olanlar için Batı çoğaltıldığından emin bakın-bize kümesinin parçası.</span><span class="sxs-lookup"><span data-stu-id="b26bb-763">Execute a few more inserts and see that those get replicated to west-us part of the cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="b26bb-764">Test Cassandra Node.js kümeden</span><span class="sxs-lookup"><span data-stu-id="b26bb-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="b26bb-765">"Web" crated Linux VM'ler, daha önce katmanı kullanarak, daha önce eklenen verileri okumak için basit bir Node.js betik yürütülmez.</span><span class="sxs-lookup"><span data-stu-id="b26bb-765">Using one of the Linux VMs crated in the "web" tier previously, we will execute a simple Node.js script to read the previously inserted data</span></span>

<span data-ttu-id="b26bb-766">**1. adım: Node.js ve Cassandra istemcisi yükleme**</span><span class="sxs-lookup"><span data-stu-id="b26bb-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="b26bb-767">Node.js ve npm yükleme</span><span class="sxs-lookup"><span data-stu-id="b26bb-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="b26bb-768">Düğüm paketi "cassandra-istemci" yükleme npm kullanma</span><span class="sxs-lookup"><span data-stu-id="b26bb-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="b26bb-769">Alınan veriler json dizesi görüntüleyen Kabuk isteminde aşağıdaki betiği yürütün:</span><span class="sxs-lookup"><span data-stu-id="b26bb-769">Execute the following script at the shell prompt which displays the json string of the retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed to create Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed to create column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert the record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read the two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue the code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="b26bb-770">Sonuç</span><span class="sxs-lookup"><span data-stu-id="b26bb-770">Conclusion</span></span>
<span data-ttu-id="b26bb-771">Microsoft Azure tarafından bu alıştırmada gösterildiği gibi hem Microsoft, hem de açık kaynak yazılımının çalışmasını sağlayan esnek bir platformdur.</span><span class="sxs-lookup"><span data-stu-id="b26bb-771">Microsoft Azure is a flexible platform that allows the running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="b26bb-772">Yüksek oranda kullanılabilir Cassandra kümeler, küme düğümlerini birden fazla hata etki alanlarında yayılmak aracılığıyla tek bir veri merkezi üzerinde dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-772">Highly available Cassandra clusters can be deployed on a single data center through the spreading of the cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="b26bb-773">Cassandra kümeleri de olağanüstü durum kanıtını sistemler için birden çok coğrafi olarak birbirinden uzak Azure bölgeleri üzerinden dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="b26bb-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="b26bb-774">Azure ve Cassandra birlikte yüksek düzeyde ölçeklenebilir, yüksek oranda kullanılabilir yapımı sağlar ve olağanüstü durum kurtarılabilir bulut Hizmetleri tarafından bugünün internet Hizmetleri ölçeği.</span><span class="sxs-lookup"><span data-stu-id="b26bb-774">Azure and Cassandra together enables the construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="b26bb-775">Başvurular</span><span class="sxs-lookup"><span data-stu-id="b26bb-775">References</span></span>
* [<span data-ttu-id="b26bb-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="b26bb-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="b26bb-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="b26bb-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="b26bb-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="b26bb-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

