---
title: "Azure Stream Analytics & AzureML işlevleriyle ölçeklendirme aaaJob | Microsoft Docs"
description: "Nasıl tooproperly ölçeklendirme akış analizi işleri (bölümlendirme, SU miktar ve daha fazla) öğrenin Azure Machine Learning işlevleri kullanırken."
keywords: 
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 47ce7c5e-1de1-41ca-9a26-b5ecce814743
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: jeffstok
ms.openlocfilehash: 3fbdfaf7e8e86896c56f1d18bbde3a10bd3dca04
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="scale-your-stream-analytics-job-with-azure-machine-learning-functions"></a><span data-ttu-id="f2724-103">Stream Analytics işiniz Azure Machine Learning işlevlerini ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="f2724-103">Scale your Stream Analytics job with Azure Machine Learning functions</span></span>
<span data-ttu-id="f2724-104">Bu genellikle bir akış analizi işi oldukça kolay tooset ve bazı örnek veriler üzerinden çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f2724-104">It is often quite easy tooset up an Stream Analytics job and run some sample data through it.</span></span> <span data-ttu-id="f2724-105">Biz toorun gerektiğinde biz ne yapması gerektiğini daha yüksek veri birimi ile aynı işi hello?</span><span class="sxs-lookup"><span data-stu-id="f2724-105">What should we do when we need toorun hello same job with higher data volume?</span></span> <span data-ttu-id="f2724-106">Bize nasıl tooconfigure hello Stream Analytics işi onu ölçeklendirir böylece toounderstand gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f2724-106">It requires us toounderstand how tooconfigure hello Stream Analytics job so that it will scale.</span></span> <span data-ttu-id="f2724-107">Bu belgede, biz Machine Learning işlevleri işleriyle hello özel yönleri ölçeklendirme Stream Analytics üzerinde odaklanır.</span><span class="sxs-lookup"><span data-stu-id="f2724-107">In this document, we will focus on hello special aspects of scaling Stream Analytics jobs with Machine Learning functions.</span></span> <span data-ttu-id="f2724-108">Tooscale akış analizi işleri genel hello makalesine bakın nasıl bilgi [işlerini ölçeklendirme](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="f2724-108">For information on how tooscale Stream Analytics jobs in general see hello article [Scaling jobs](stream-analytics-scale-jobs.md).</span></span>

## <a name="what-is-an-azure-machine-learning-function-in-stream-analytics"></a><span data-ttu-id="f2724-109">Bir Azure Machine Learning işlevinde Stream Analytics nedir?</span><span class="sxs-lookup"><span data-stu-id="f2724-109">What is an Azure Machine Learning function in Stream Analytics?</span></span>
<span data-ttu-id="f2724-110">Stream Analytics Machine Learning işlevinde hello Stream Analytics sorgu dili normal işlev çağrısında gibi kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="f2724-110">A Machine Learning function in Stream Analytics can be used like a regular function call in hello Stream Analytics query language.</span></span> <span data-ttu-id="f2724-111">Ancak, hello Sahne hello işlev çağrıları gerçekten Azure Machine Learning Web hizmeti isteklerinin aynıdır.</span><span class="sxs-lookup"><span data-stu-id="f2724-111">However, behind hello scene, hello function calls are actually Azure Machine Learning Web Service requests.</span></span> <span data-ttu-id="f2724-112">Machine Learning web hizmetleri Mini toplu olarak adlandırılan "birden çok satır toplu işleme" Destek, hello aynı hizmeti API çağrısı, tooimprove web genel üretilen işi.</span><span class="sxs-lookup"><span data-stu-id="f2724-112">Machine Learning web services support “batching” multiple rows, which is called mini-batch, in hello same web service API call, tooimprove overall throughput.</span></span> <span data-ttu-id="f2724-113">Lütfen daha fazla ayrıntı için makaleler hello bakın; [Stream Analytics azure Machine Learning işlevlerde](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) ve [Azure Machine Learning Web Hizmetleri](../machine-learning/machine-learning-consume-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="f2724-113">Please see hello following articles for more details; [Azure Machine Learning functions in Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) and [Azure Machine Learning Web Services](../machine-learning/machine-learning-consume-web-services.md).</span></span>

## <a name="configure-a-stream-analytics-job-with-machine-learning-functions"></a><span data-ttu-id="f2724-114">Akış analizi işi Machine Learning işlevleri ile yapılandırma</span><span class="sxs-lookup"><span data-stu-id="f2724-114">Configure a Stream Analytics job with Machine Learning functions</span></span>
<span data-ttu-id="f2724-115">Stream Analytics işi için Machine Learning işlevi yapılandırırken, iki parametre tooconsider, hello Machine Learning işlev çağrılarını ve akış birimleri (SUs) hello Stream Analytics işi için sağlanan hello hello toplu iş boyutu vardır.</span><span class="sxs-lookup"><span data-stu-id="f2724-115">When configuring a Machine Learning function for Stream Analytics job, there are two parameters tooconsider, hello batch size of hello Machine Learning function calls, and hello streaming units (SUs) provisioned for hello Stream Analytics job.</span></span> <span data-ttu-id="f2724-116">toodetermine hello uygun değerleri bunlar için önce bir karar verimlilik, gecikme süresi arasında diğer bir deyişle, hello Stream Analytics işi gecikmesi ve her SU verimini yapılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2724-116">toodetermine hello appropriate values for these, first a decision must be made between latency and throughput, that is, latency of hello Stream Analytics job, and throughput of each SU.</span></span> <span data-ttu-id="f2724-117">Ek SUs çalışan hello işi hello maliyetini artırsa SUs her zaman tooa iş tooincrease iyi bölümlenmiş bir akış analizi sorgu verimini eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="f2724-117">SUs may always be added tooa job tooincrease throughput of a well partitioned Stream Analytics query, although additional SUs increases hello cost of running hello job.</span></span>

<span data-ttu-id="f2724-118">Bu nedenle önemli toodetermine hello olan *dayanıklılık* gecikme Stream Analytics işi çalışır.</span><span class="sxs-lookup"><span data-stu-id="f2724-118">Therefore it is important toodetermine hello *tolerance* of latency in running a Stream Analytics job.</span></span> <span data-ttu-id="f2724-119">Azure Machine Learning hizmet istekleri çalışmasını ek gecikme hello Stream Analytics işi hello gecikme bileşik toplu iş boyutu ile doğal olarak artar.</span><span class="sxs-lookup"><span data-stu-id="f2724-119">Additional latency from running Azure Machine Learning service requests will naturally increase with batch size, which will compound hello latency of hello Stream Analytics job.</span></span> <span data-ttu-id="f2724-120">Merhaba üzerinde toplu iş boyutu artırmayı diğer yandan, hello Stream Analytics işi tooprocess sağlar * hello ile daha fazla olay *aynı numarası* Machine Learning web hizmeti istekleri.</span><span class="sxs-lookup"><span data-stu-id="f2724-120">On hello other hand, increasing batch size allows hello Stream Analytics job tooprocess *more events with hello *same number* of Machine Learning web service requests.</span></span> <span data-ttu-id="f2724-121">Genellikle hello artış Machine Learning web hizmeti gecikme toplu iş boyutu alt doğrusal toohello çıktığını olduğundan, önemli tooconsider hello Machine Learning web hizmeti belirli bir durumda en ekonomik toplu iş boyutu dur.</span><span class="sxs-lookup"><span data-stu-id="f2724-121">Often hello increase of Machine Learning web service latency is sub-linear toohello increase of batch size so it is important tooconsider hello most cost-efficient batch size for a Machine Learning web service in any given situation.</span></span> <span data-ttu-id="f2724-122">Merhaba varsayılan toplu iş boyutu hello web hizmeti isteklerinin 1000'dir ve hello kullanarak ya da değiştirilebilir [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") veya hello [PowerShell istemci Akış analizi için](stream-analytics-monitor-and-manage-jobs-use-powershell.md "akış analizi için PowerShell istemcisi").</span><span class="sxs-lookup"><span data-stu-id="f2724-122">hello default batch size for hello web service requests is 1000 and may be modified either by using hello [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") or hello [PowerShell client for Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "PowerShell client for Stream Analytics").</span></span>

<span data-ttu-id="f2724-123">Bir toplu iş boyutu belirlendikten sonra hello miktarını akış birimler (SUs) belirlendiği, temel hello olayların sayısına hello işlevi saniyede tooprocess gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="f2724-123">Once a batch size has been determined, hello amount of streaming units (SUs) can be determined, based on hello number of events that hello function needs tooprocess per second.</span></span> <span data-ttu-id="f2724-124">Akış birimleri hakkında daha fazla bilgi için bkz: [Stream Analytics işlerini ölçeklendirme](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="f2724-124">For more information about streaming units, see [Stream Analytics scale jobs](stream-analytics-scale-jobs.md).</span></span>

<span data-ttu-id="f2724-125">Genel olarak, olduğunu 20 eş zamanlı bağlantı toohello Machine Learning web hizmeti her 6 SUs için 1 SU işleri ve 3 SU işleri 20 eş zamanlı bağlantı de alırsınız dışında.</span><span class="sxs-lookup"><span data-stu-id="f2724-125">In general, there are 20 concurrent connections toohello Machine Learning web service for every 6 SUs, except that 1 SU jobs and 3 SU jobs will get 20 concurrent connections also.</span></span>  <span data-ttu-id="f2724-126">Örneğin, saniye başına 200.000 olayları hello giriş verisi oranı ise ve hello toplu iş boyutu sol toohello 1000 hello elde edilen web hizmeti gecikme 1000 olayları Mini toplu ile 200 MS varsayılandır.</span><span class="sxs-lookup"><span data-stu-id="f2724-126">For example, if hello input data rate is 200,000 events per second and hello batch size is left toohello default of 1000 hello resulting web service latency with 1000 events mini-batch is 200ms.</span></span> <span data-ttu-id="f2724-127">Başka bir deyişle, her bağlantı 5 toohello Machine Learning web hizmeti bir saniyede isteğinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="f2724-127">This means every connection can make 5 requests toohello Machine Learning web service in a second.</span></span> <span data-ttu-id="f2724-128">20 bağlantılarla hello Stream Analytics işi 20.000 olayları 200 MS ve bu nedenle 100.000 olayları bir saniyede işleyebilir.</span><span class="sxs-lookup"><span data-stu-id="f2724-128">With 20 connections, hello Stream Analytics job can process 20,000 events in 200ms  and therefore 100,000 events in a second.</span></span> <span data-ttu-id="f2724-129">Bu nedenle tooprocess 200.000 olayları saniyede hello Stream Analytics işi 40 eşzamanlı bağlantı too12 SUs gelen gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2724-129">So tooprocess 200,000 events per second, hello Stream Analytics job needs 40 concurrent connections, which comes out too12 SUs.</span></span> <span data-ttu-id="f2724-130">Merhaba Stream Analytics işi toohello Machine Learning web hizmeti uç noktası hello isteklerinden Hello diyagramda gösterilmiştir – her 6 SUs sırasında en fazla 20 eş zamanlı bağlantı tooMachine Learning web hizmeti vardır.</span><span class="sxs-lookup"><span data-stu-id="f2724-130">hello diagram below illustrates hello requests from hello Stream Analytics job toohello Machine Learning web service endpoint – Every 6 SUs has 20 concurrent connections tooMachine Learning web service at max.</span></span>

<span data-ttu-id="f2724-131">![Stream Analytics Machine Learning işlevleri 2 iş örnek ile ölçek](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Machine Learning işlevleri 2 iş örnek ile ölçek akış analizi")</span><span class="sxs-lookup"><span data-stu-id="f2724-131">![Scale Stream Analytics with Machine Learning Functions 2 job example](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Scale Stream Analytics with Machine Learning Functions 2 job example")</span></span>

<span data-ttu-id="f2724-132">Genel olarak, ***B*** toplu iş boyutu için ***L*** hello web hizmeti gecikme süresi için milisaniye cinsinden toplu iş boyutu B, Stream Analytics işi ile verimini hello ***N*** SUs değil:</span><span class="sxs-lookup"><span data-stu-id="f2724-132">In general, ***B*** for batch size, ***L*** for hello web service latency at batch size B in milliseconds, hello throughput of an Stream Analytics job with ***N*** SUs is:</span></span>

<span data-ttu-id="f2724-133">![Ölçeklendirme Machine Learning işlevleri formülü olan Stream Analytics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "ölçeklendirme Machine Learning işlevleri formülü olan akış analizi")</span><span class="sxs-lookup"><span data-stu-id="f2724-133">![Scale Stream Analytics with Machine Learning Functions Formula](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Scale Stream Analytics with Machine Learning Functions Formula")</span></span>

<span data-ttu-id="f2724-134">Bir sağlayabildiği hello 'en fazla eş zamanlı çağrılarını' hello Machine Learning web hizmeti yan olabilir, bu toohello en büyük değeri (şu anda 200) tooset önermiştir.</span><span class="sxs-lookup"><span data-stu-id="f2724-134">An additional consideration may be hello 'max concurrent calls' on hello Machine Learning web service side, it’s recommended tooset this toohello maximum value (200 currently).</span></span>

<span data-ttu-id="f2724-135">Bu ayar hakkında daha fazla bilgi için lütfen hello gözden [Machine Learning Web Hizmetleri için ölçeklendirme makalesine](../machine-learning/machine-learning-scaling-webservice.md).</span><span class="sxs-lookup"><span data-stu-id="f2724-135">For more information on this setting please review hello [Scaling article for Machine Learning Web Services](../machine-learning/machine-learning-scaling-webservice.md).</span></span>

## <a name="example--sentiment-analysis"></a><span data-ttu-id="f2724-136">Örnek – düşünceleri çözümleme</span><span class="sxs-lookup"><span data-stu-id="f2724-136">Example – Sentiment Analysis</span></span>
<span data-ttu-id="f2724-137">Merhaba aşağıdaki örnekte bir akış analizi işi hello düşünceleri analiz Machine Learning işlevi ile hello açıklandığı gibi içerir [Stream Analytics Machine Learning tümleştirme Öğreticisi](stream-analytics-machine-learning-integration-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="f2724-137">hello following example includes a Stream Analytics job with hello sentiment analysis Machine Learning function, as described in hello [Stream Analytics Machine Learning integration tutorial](stream-analytics-machine-learning-integration-tutorial.md).</span></span>

<span data-ttu-id="f2724-138">Merhaba sorgusu hello tarafından izlenen bir basit tam olarak bölümlenmiş sorgudur **düşünceleri** aşağıda gösterildiği gibi işlev:</span><span class="sxs-lookup"><span data-stu-id="f2724-138">hello query is a simple fully partitioned query followed by hello **sentiment** function, as shown below:</span></span>

    WITH subquery AS (
        SELECT text, sentiment(text) as result from input
    )

    Select text, result.[Score]
    Into output
    From subquery

<span data-ttu-id="f2724-139">Senaryo aşağıdaki hello düşünün; saniye başına 10.000 tweet'leri verimi ile akış analizi işi tooperform düşünceleri hello tweet'leri (olayları) analizini oluşturulması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2724-139">Consider hello following scenario; with a throughput of 10,000 tweets per second a Stream Analytics job must be created tooperform sentiment analysis of hello tweets (events).</span></span> <span data-ttu-id="f2724-140">1 SU kullanarak, bu akış analizi işi mümkün toohandle hello trafik olabilir?</span><span class="sxs-lookup"><span data-stu-id="f2724-140">Using 1 SU, could this Stream Analytics job be able toohandle hello traffic?</span></span> <span data-ttu-id="f2724-141">Merhaba varsayılan toplu iş boyutu 1000 hello işin kullanarak mümkün tookeep yukarı hello giriş olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f2724-141">Using hello default batch size of 1000 hello job should be able tookeep up with hello input.</span></span> <span data-ttu-id="f2724-142">Daha fazla hello Machine Learning işlevi hello genel varsayılan gecikmeyle hello düşünceleri analiz Machine Learning web hizmeti (varsayılan toplu iş boyutu 1000) olan gecikme saniyesi birden fazla oluşturması eklendi.</span><span class="sxs-lookup"><span data-stu-id="f2724-142">Further hello added Machine Learning function should generate no more than a second of latency, which is hello general default latency of hello sentiment analysis Machine Learning web service (with a default batch size of 1000).</span></span> <span data-ttu-id="f2724-143">Merhaba Stream Analytics iş **genel** veya uçtan uca gecikme süresi genellikle birkaç saniye olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f2724-143">hello Stream Analytics job’s **overall** or end-to-end latency would typically be a few seconds.</span></span> <span data-ttu-id="f2724-144">Bu akış analizi işi, daha ayrıntılı göz *özellikle* hello Machine Learning işlev çağrıları.</span><span class="sxs-lookup"><span data-stu-id="f2724-144">Take a more detailed look into this Stream Analytics job, *especially* hello Machine Learning function calls.</span></span> <span data-ttu-id="f2724-145">Merhaba toplu iş boyutu 1000 sahip olmak, 10.000 olayları verimini yaklaşık 10 istekleri tooweb hizmetin zaman alır.</span><span class="sxs-lookup"><span data-stu-id="f2724-145">Having hello batch size as 1000, a throughput of 10,000 events will take about 10 requests tooweb service.</span></span> <span data-ttu-id="f2724-146">Hatta 1 SU ile yeterli eşzamanlı bağlantı tooaccommodate vardır bu trafiği giriş.</span><span class="sxs-lookup"><span data-stu-id="f2724-146">Even with 1 SU, there are enough concurrent connections tooaccommodate this input traffic.</span></span>

<span data-ttu-id="f2724-147">Ancak ne 100 x hello giriş olay hızı artırır ve hello Stream Analytics işi tooprocess 1.000.000 tweet'leri saniyede gerekiyor?</span><span class="sxs-lookup"><span data-stu-id="f2724-147">But what if hello input event rate increases by 100x and now hello Stream Analytics job needs tooprocess 1,000,000 tweets per second?</span></span> <span data-ttu-id="f2724-148">İki seçenek vardır:</span><span class="sxs-lookup"><span data-stu-id="f2724-148">There are two options:</span></span>

1. <span data-ttu-id="f2724-149">Merhaba toplu iş boyutunu artırın veya</span><span class="sxs-lookup"><span data-stu-id="f2724-149">Increase hello batch size, or</span></span>
2. <span data-ttu-id="f2724-150">Bölüm hello Giriş akışı tooprocess hello olayları paralel</span><span class="sxs-lookup"><span data-stu-id="f2724-150">Partition hello input stream tooprocess hello events in parallel</span></span>

<span data-ttu-id="f2724-151">Merhaba ilk seçeneğiyle iş hello **gecikme** artmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="f2724-151">With hello first option, hello job **latency** will increase.</span></span>

<span data-ttu-id="f2724-152">Merhaba ikinci seçeneği ile daha fazla SUs sağlanan toobe gerekir ve bu nedenle daha fazla eşzamanlı Machine Learning web hizmeti isteklerinin oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="f2724-152">With hello second option, more SUs would need toobe provisioned and therefore generate more concurrent Machine Learning web service requests.</span></span> <span data-ttu-id="f2724-153">Merhaba iş yani **maliyet** artmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="f2724-153">This means hello job **cost** will increase.</span></span>

<span data-ttu-id="f2724-154">Merhaba düşünceleri analiz Machine Learning web hizmeti Hello gecikme 200 MS 1000 olay toplu işlemler için veya aşağıda 5.000 olay toplu işleri, 10.000 olay toplu işlemler için 300ms veya 500ms 25.000 olay toplu işlemler için 250ms olduğunu varsayın.</span><span class="sxs-lookup"><span data-stu-id="f2724-154">Assume hello latency of hello sentiment analysis Machine Learning web service is 200ms for 1000-event batches or below, 250ms for 5,000-event batches, 300ms for 10,000-event batches or 500ms for 25,000-event batches.</span></span>

1. <span data-ttu-id="f2724-155">Merhaba ilk seçeneği kullanılarak (**değil** daha fazla SUs sağlama), hello toplu iş boyutu artırılmasını çok**25.000**.</span><span class="sxs-lookup"><span data-stu-id="f2724-155">Using hello first option, (**not** provisioning more SUs), hello batch size could be increased too**25,000**.</span></span> <span data-ttu-id="f2724-156">Bu sırayla hello iş tooprocess 20 eş zamanlı bağlantı toohello Machine Learning web hizmeti ile 1.000.000 olayları (ile 500ms çağrı başına bir gecikme) olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="f2724-156">This in turn would allow hello job tooprocess 1,000,000 events with 20 concurrent connections toohello Machine Learning web service (with a latency of 500ms per call).</span></span> <span data-ttu-id="f2724-157">Bu nedenle hello Stream Analytics işi toohello düşünceleri işlevi hello Machine Learning web hizmeti isteklerinin gelen artırılmasını istekler son ek gecikme hello **200 MS** çok**500ms**.</span><span class="sxs-lookup"><span data-stu-id="f2724-157">So hello additional latency of hello Stream Analytics job due toohello sentiment function requests against hello Machine Learning web service requests would be increased from **200ms** too**500ms**.</span></span> <span data-ttu-id="f2724-158">Ancak, bu toplu iş boyutu Not **olamaz** artırılmasını sonsuz hello Machine Learning web hizmetlerini gerektirdiği şekilde bir isteğin hello yükü boyutu 4 MB olması veya işlemin 100 saniye sonra web hizmeti isteği zaman aşımı daha küçük.</span><span class="sxs-lookup"><span data-stu-id="f2724-158">However, note that batch size **cannot** be increased infinitely as hello Machine Learning web services requires hello payload size of a request be 4MB or smaller web service requests timeout after 100 seconds of operation.</span></span>
2. <span data-ttu-id="f2724-159">Merhaba toplu iş boyutu 200 MS web hizmeti gecikmeyle 1000 sol, her 20 eş zamanlı bağlantı toohello web hizmeti mümkün tooprocess 1000 * 20 * 5 olayları olacaktır Hello ikinci seçeneği kullanılarak, saniyede 100.000 =.</span><span class="sxs-lookup"><span data-stu-id="f2724-159">Using hello second option, hello batch size is left at 1000, with 200ms web service latency, every 20 concurrent connections toohello web service would be able tooprocess 1000 * 20 * 5 events = 100,000 per second.</span></span> <span data-ttu-id="f2724-160">Bu nedenle tooprocess 1.000.000 olayları ikinci, hello iş başına 60 SUs gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2724-160">So tooprocess 1,000,000 events per second, hello job would need 60 SUs.</span></span> <span data-ttu-id="f2724-161">Karşılaştırılan toohello ilk seçenek, Stream Analytics işi, diğer hizmet toplu istekleri sırayla web yapacağı bir artan maliyetini oluşturuluyor.</span><span class="sxs-lookup"><span data-stu-id="f2724-161">Compared toohello first option, Stream Analytics job would make more web service batch requests, in turn generating an increased cost.</span></span>

<span data-ttu-id="f2724-162">Aşağıdaki tablo hello Stream Analytics işi hello verimini için farklı SUs ve toplu boyutları (saniye başına etkinlik sayısı) içindir.</span><span class="sxs-lookup"><span data-stu-id="f2724-162">Below is a table for hello throughput of hello Stream Analytics job for different SUs and batch sizes (in number of events per second).</span></span>

| <span data-ttu-id="f2724-163">Toplu iş boyutu (ML gecikme)</span><span class="sxs-lookup"><span data-stu-id="f2724-163">batch size (ML latency)</span></span> | <span data-ttu-id="f2724-164">500 (200 ms)</span><span class="sxs-lookup"><span data-stu-id="f2724-164">500 (200ms)</span></span> | <span data-ttu-id="f2724-165">1.000 (200 ms)</span><span class="sxs-lookup"><span data-stu-id="f2724-165">1,000 (200ms)</span></span> | <span data-ttu-id="f2724-166">5.000 (250ms)</span><span class="sxs-lookup"><span data-stu-id="f2724-166">5,000 (250ms)</span></span> | <span data-ttu-id="f2724-167">10.000 (300ms)</span><span class="sxs-lookup"><span data-stu-id="f2724-167">10,000 (300ms)</span></span> | <span data-ttu-id="f2724-168">25.000 (500ms)</span><span class="sxs-lookup"><span data-stu-id="f2724-168">25,000 (500ms)</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="f2724-169">**1 SU**</span><span class="sxs-lookup"><span data-stu-id="f2724-169">**1 SU**</span></span> |<span data-ttu-id="f2724-170">2,500</span><span class="sxs-lookup"><span data-stu-id="f2724-170">2,500</span></span> |<span data-ttu-id="f2724-171">5,000</span><span class="sxs-lookup"><span data-stu-id="f2724-171">5,000</span></span> |<span data-ttu-id="f2724-172">20,000</span><span class="sxs-lookup"><span data-stu-id="f2724-172">20,000</span></span> |<span data-ttu-id="f2724-173">30,000</span><span class="sxs-lookup"><span data-stu-id="f2724-173">30,000</span></span> |<span data-ttu-id="f2724-174">50,000</span><span class="sxs-lookup"><span data-stu-id="f2724-174">50,000</span></span> |
| <span data-ttu-id="f2724-175">**3 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-175">**3 SUs**</span></span> |<span data-ttu-id="f2724-176">2,500</span><span class="sxs-lookup"><span data-stu-id="f2724-176">2,500</span></span> |<span data-ttu-id="f2724-177">5,000</span><span class="sxs-lookup"><span data-stu-id="f2724-177">5,000</span></span> |<span data-ttu-id="f2724-178">20,000</span><span class="sxs-lookup"><span data-stu-id="f2724-178">20,000</span></span> |<span data-ttu-id="f2724-179">30,000</span><span class="sxs-lookup"><span data-stu-id="f2724-179">30,000</span></span> |<span data-ttu-id="f2724-180">50,000</span><span class="sxs-lookup"><span data-stu-id="f2724-180">50,000</span></span> |
| <span data-ttu-id="f2724-181">**6 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-181">**6 SUs**</span></span> |<span data-ttu-id="f2724-182">2,500</span><span class="sxs-lookup"><span data-stu-id="f2724-182">2,500</span></span> |<span data-ttu-id="f2724-183">5,000</span><span class="sxs-lookup"><span data-stu-id="f2724-183">5,000</span></span> |<span data-ttu-id="f2724-184">20,000</span><span class="sxs-lookup"><span data-stu-id="f2724-184">20,000</span></span> |<span data-ttu-id="f2724-185">30,000</span><span class="sxs-lookup"><span data-stu-id="f2724-185">30,000</span></span> |<span data-ttu-id="f2724-186">50,000</span><span class="sxs-lookup"><span data-stu-id="f2724-186">50,000</span></span> |
| <span data-ttu-id="f2724-187">**12 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-187">**12 SUs**</span></span> |<span data-ttu-id="f2724-188">5,000</span><span class="sxs-lookup"><span data-stu-id="f2724-188">5,000</span></span> |<span data-ttu-id="f2724-189">10,000</span><span class="sxs-lookup"><span data-stu-id="f2724-189">10,000</span></span> |<span data-ttu-id="f2724-190">40,000</span><span class="sxs-lookup"><span data-stu-id="f2724-190">40,000</span></span> |<span data-ttu-id="f2724-191">60,000</span><span class="sxs-lookup"><span data-stu-id="f2724-191">60,000</span></span> |<span data-ttu-id="f2724-192">100,000</span><span class="sxs-lookup"><span data-stu-id="f2724-192">100,000</span></span> |
| <span data-ttu-id="f2724-193">**18 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-193">**18 SUs**</span></span> |<span data-ttu-id="f2724-194">7,500</span><span class="sxs-lookup"><span data-stu-id="f2724-194">7,500</span></span> |<span data-ttu-id="f2724-195">15,000</span><span class="sxs-lookup"><span data-stu-id="f2724-195">15,000</span></span> |<span data-ttu-id="f2724-196">60,000</span><span class="sxs-lookup"><span data-stu-id="f2724-196">60,000</span></span> |<span data-ttu-id="f2724-197">90,000</span><span class="sxs-lookup"><span data-stu-id="f2724-197">90,000</span></span> |<span data-ttu-id="f2724-198">150,000</span><span class="sxs-lookup"><span data-stu-id="f2724-198">150,000</span></span> |
| <span data-ttu-id="f2724-199">**24 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-199">**24 SUs**</span></span> |<span data-ttu-id="f2724-200">10,000</span><span class="sxs-lookup"><span data-stu-id="f2724-200">10,000</span></span> |<span data-ttu-id="f2724-201">20,000</span><span class="sxs-lookup"><span data-stu-id="f2724-201">20,000</span></span> |<span data-ttu-id="f2724-202">80,000</span><span class="sxs-lookup"><span data-stu-id="f2724-202">80,000</span></span> |<span data-ttu-id="f2724-203">120,000</span><span class="sxs-lookup"><span data-stu-id="f2724-203">120,000</span></span> |<span data-ttu-id="f2724-204">200,000</span><span class="sxs-lookup"><span data-stu-id="f2724-204">200,000</span></span> |
| <span data-ttu-id="f2724-205">**…**</span><span class="sxs-lookup"><span data-stu-id="f2724-205">**…**</span></span> |<span data-ttu-id="f2724-206">…</span><span class="sxs-lookup"><span data-stu-id="f2724-206">…</span></span> |<span data-ttu-id="f2724-207">…</span><span class="sxs-lookup"><span data-stu-id="f2724-207">…</span></span> |<span data-ttu-id="f2724-208">…</span><span class="sxs-lookup"><span data-stu-id="f2724-208">…</span></span> |<span data-ttu-id="f2724-209">…</span><span class="sxs-lookup"><span data-stu-id="f2724-209">…</span></span> |<span data-ttu-id="f2724-210">…</span><span class="sxs-lookup"><span data-stu-id="f2724-210">…</span></span> |
| <span data-ttu-id="f2724-211">**60 SUs**</span><span class="sxs-lookup"><span data-stu-id="f2724-211">**60 SUs**</span></span> |<span data-ttu-id="f2724-212">25,000</span><span class="sxs-lookup"><span data-stu-id="f2724-212">25,000</span></span> |<span data-ttu-id="f2724-213">50,000</span><span class="sxs-lookup"><span data-stu-id="f2724-213">50,000</span></span> |<span data-ttu-id="f2724-214">200,000</span><span class="sxs-lookup"><span data-stu-id="f2724-214">200,000</span></span> |<span data-ttu-id="f2724-215">300,000</span><span class="sxs-lookup"><span data-stu-id="f2724-215">300,000</span></span> |<span data-ttu-id="f2724-216">500,000</span><span class="sxs-lookup"><span data-stu-id="f2724-216">500,000</span></span> |

<span data-ttu-id="f2724-217">Şimdi tarafından zaten nasıl akış analizi, Machine Learning işlevleri işe iyi anlamış olmanız.</span><span class="sxs-lookup"><span data-stu-id="f2724-217">By now, you should already have a good understanding of how Machine Learning functions in Stream Analytics work.</span></span> <span data-ttu-id="f2724-218">Büyük olasılıkla de olayları için toplu veri kaynakları ve her "çekme" veriler "çekme" döndürür akış analizi işleri Stream Analytics işi tooprocess hello anlamanız.</span><span class="sxs-lookup"><span data-stu-id="f2724-218">You likely also understand that Stream Analytics jobs “pull” data from data sources and each “pull” returns a batch of events for hello Stream Analytics job tooprocess.</span></span> <span data-ttu-id="f2724-219">Bu çekme modeli hello Machine Learning web hizmeti isteklerinin nasıl etkiler?</span><span class="sxs-lookup"><span data-stu-id="f2724-219">How does this pull model impact hello Machine Learning web service requests?</span></span>

<span data-ttu-id="f2724-220">Normalde, Machine Learning işlevleri için ayarlarız hello toplu iş boyutu tam olarak her akış analizi işi "çekme" tarafından döndürülen olay sayısı hello bölünebilir olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="f2724-220">Normally, hello batch size we set for Machine Learning functions won’t exactly be divisible by hello number of events returned by each Stream Analytics job “pull”.</span></span> <span data-ttu-id="f2724-221">Ne zaman hello Machine Learning web hizmeti "kısmi" toplu işleri çağrılacağı gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="f2724-221">When this occurs hello Machine Learning web service will be called with “partial” batches.</span></span> <span data-ttu-id="f2724-222">Bu yapılır toonot ek iş gecikme yükü çekme toopull birleştirmesi olaylarından doğurur.</span><span class="sxs-lookup"><span data-stu-id="f2724-222">This is done toonot incur additional job latency overhead in coalescing events from pull toopull.</span></span>

## <a name="new-function-related-monitoring-metrics"></a><span data-ttu-id="f2724-223">İşlevi ile ilgili yeni izleme ölçümleri</span><span class="sxs-lookup"><span data-stu-id="f2724-223">New function-related monitoring metrics</span></span>
<span data-ttu-id="f2724-224">Hello İzleyicisi alanını akış analizi işi'de, üç ek işlevi ödemeyle ilgili ölçümlerini eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="f2724-224">In hello Monitor area of a Stream Analytics job, three additional function-related metrics have been added.</span></span> <span data-ttu-id="f2724-225">İŞLEV İSTEKLERİ, işlevi olayları ve başarısız işlev İSTEKLER hello aşağıda görüldüğü gibi olduklarını.</span><span class="sxs-lookup"><span data-stu-id="f2724-225">They are FUNCTION REQUESTS, FUNCTION EVENTS and FAILED FUNCTION REQUESTS, as shown in hello graphic below.</span></span>

<span data-ttu-id="f2724-226">![Ölçeklendirme akış analizi Machine Learning işlevleri ölçümlerle](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "ölçeklendirme Machine Learning işlevleri ölçümlerle akış analizi")</span><span class="sxs-lookup"><span data-stu-id="f2724-226">![Scale Stream Analytics with Machine Learning Functions Metrics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "Scale Stream Analytics with Machine Learning Functions Metrics")</span></span>

<span data-ttu-id="f2724-227">Merhaba şu şekilde tanımlanır:</span><span class="sxs-lookup"><span data-stu-id="f2724-227">hello are defined as follows:</span></span>

<span data-ttu-id="f2724-228">**İŞLEV İSTEKLERİ**: Merhaba işlevi istek sayısı.</span><span class="sxs-lookup"><span data-stu-id="f2724-228">**FUNCTION REQUESTS**: hello number of function requests.</span></span>

<span data-ttu-id="f2724-229">**İŞLEV olayları**: hello sayı olayların hello içinde işlev istekleri.</span><span class="sxs-lookup"><span data-stu-id="f2724-229">**FUNCTION EVENTS**: hello number events in hello function requests.</span></span>

<span data-ttu-id="f2724-230">**BAŞARISIZ işlev İSTEKLER**: Merhaba başarısız işleve istek sayısı.</span><span class="sxs-lookup"><span data-stu-id="f2724-230">**FAILED FUNCTION REQUESTS**: hello number of failed function requests.</span></span>

## <a name="key-takeaways"></a><span data-ttu-id="f2724-231">Anahtar paketler</span><span class="sxs-lookup"><span data-stu-id="f2724-231">Key Takeaways</span></span>
<span data-ttu-id="f2724-232">toosummarize hello ana noktaları, sipariş tooscale Stream Analytics işi Machine Learning işlevlerle hello aşağıdaki öğeleri dikkate alınmalıdır:</span><span class="sxs-lookup"><span data-stu-id="f2724-232">toosummarize hello main points, in order tooscale an Stream Analytics job with Machine Learning functions, hello following items must be considered:</span></span>

1. <span data-ttu-id="f2724-233">Merhaba giriş olay hızı</span><span class="sxs-lookup"><span data-stu-id="f2724-233">hello input event rate</span></span>
2. <span data-ttu-id="f2724-234">Akış analizi işi hello için gecikme süresini Hello izin (ve böylece hello toplu iş boyutu hello Machine Learning web hizmeti istekleri)</span><span class="sxs-lookup"><span data-stu-id="f2724-234">hello tolerated latency for hello running Stream Analytics job (and thus hello batch size of hello Machine Learning web service requests)</span></span>
3. <span data-ttu-id="f2724-235">Merhaba sağlanan akış analizi SUs ve Machine Learning web hizmeti isteklerinin (Merhaba ek işlevi ilişkili maliyetler) hello sayısı</span><span class="sxs-lookup"><span data-stu-id="f2724-235">hello provisioned Stream Analytics SUs and hello number of Machine Learning web service requests (hello additional function-related costs)</span></span>

<span data-ttu-id="f2724-236">Tam olarak bölümlenmiş bir akış analizi sorgu örnek olarak kullanılmıştır.</span><span class="sxs-lookup"><span data-stu-id="f2724-236">A fully partitioned Stream Analytics query was used as an example.</span></span> <span data-ttu-id="f2724-237">Daha karmaşık bir sorgu gerekirse hello [Azure Stream Analytics forumumuzu](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) hello Stream Analytics ekibinden Ek Yardım almak için mükemmel bir kaynaktır.</span><span class="sxs-lookup"><span data-stu-id="f2724-237">If a more complex query is needed hello [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) is a great resource for getting additional help from hello Stream Analytics team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f2724-238">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="f2724-238">Next steps</span></span>
<span data-ttu-id="f2724-239">Stream Analytics hakkında daha fazla toolearn bakın:</span><span class="sxs-lookup"><span data-stu-id="f2724-239">toolearn more about Stream Analytics, see:</span></span>

* [<span data-ttu-id="f2724-240">Azure Akış Analizi'ni kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="f2724-240">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="f2724-241">Azure Akış Analizi işlerini ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="f2724-241">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="f2724-242">Azure Akış Analizi Sorgu Dili Başvurusu</span><span class="sxs-lookup"><span data-stu-id="f2724-242">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="f2724-243">Azure Akış Analizi Yönetimi REST API'si Başvurusu</span><span class="sxs-lookup"><span data-stu-id="f2724-243">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
