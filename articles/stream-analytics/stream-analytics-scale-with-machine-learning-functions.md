---
title: "Azure Stream Analytics & AzureML işlevleriyle ölçeklendirme iş | Microsoft Docs"
description: "Akış analizi işleri (bölümlendirme, SU miktar ve daha fazla) düzgün ölçeklenir öğrenin Azure Machine Learning işlevleri kullanırken."
keywords: 
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 47ce7c5e-1de1-41ca-9a26-b5ecce814743
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: jeffstok
ms.openlocfilehash: 5e07e4efcd14cd8c12124cb34058ef6c345f7f47
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="scale-your-stream-analytics-job-with-azure-machine-learning-functions"></a><span data-ttu-id="33725-103">Stream Analytics işiniz Azure Machine Learning işlevlerini ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="33725-103">Scale your Stream Analytics job with Azure Machine Learning functions</span></span>
<span data-ttu-id="33725-104">Genellikle, bir akış analizi işi ayarlamak ve bazı örnek veriler üzerinden çalıştırmak oldukça kolay hale gelir.</span><span class="sxs-lookup"><span data-stu-id="33725-104">It is often quite easy to set up an Stream Analytics job and run some sample data through it.</span></span> <span data-ttu-id="33725-105">Daha yüksek veri birimi ile aynı işi çalıştırmak gerektiğinde biz neler?</span><span class="sxs-lookup"><span data-stu-id="33725-105">What should we do when we need to run the same job with higher data volume?</span></span> <span data-ttu-id="33725-106">Stream Analytics işi ölçeklendirme şekilde yapılandırmak nasıl anlamak için bize gerektirir.</span><span class="sxs-lookup"><span data-stu-id="33725-106">It requires us to understand how to configure the Stream Analytics job so that it will scale.</span></span> <span data-ttu-id="33725-107">Bu belgede, şu özel akış analizi işleri Machine Learning işlevlerle ölçeklendirme yönlerini üzerinde odaklanır.</span><span class="sxs-lookup"><span data-stu-id="33725-107">In this document, we will focus on the special aspects of scaling Stream Analytics jobs with Machine Learning functions.</span></span> <span data-ttu-id="33725-108">Genel Stream Analytics işlerini ölçeklendirme hakkında bilgi için bkz: [işlerini ölçeklendirme](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="33725-108">For information on how to scale Stream Analytics jobs in general see the article [Scaling jobs](stream-analytics-scale-jobs.md).</span></span>

## <a name="what-is-an-azure-machine-learning-function-in-stream-analytics"></a><span data-ttu-id="33725-109">Bir Azure Machine Learning işlevinde Stream Analytics nedir?</span><span class="sxs-lookup"><span data-stu-id="33725-109">What is an Azure Machine Learning function in Stream Analytics?</span></span>
<span data-ttu-id="33725-110">Stream Analytics Machine Learning işlevinde, Stream Analytics sorgu dili normal işlev çağrısında gibi kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="33725-110">A Machine Learning function in Stream Analytics can be used like a regular function call in the Stream Analytics query language.</span></span> <span data-ttu-id="33725-111">Ancak, Sahne işlev çağrıları gerçekten Azure Machine Learning Web hizmeti isteklerinin aynıdır.</span><span class="sxs-lookup"><span data-stu-id="33725-111">However, behind the scene, the function calls are actually Azure Machine Learning Web Service requests.</span></span> <span data-ttu-id="33725-112">Machine Learning web Hizmetleri "birden çok satır, genel üretilen işi artırmak için aynı web hizmeti API çağrısı içinde Mini toplu olarak adlandırılan yığınlama" destekler.</span><span class="sxs-lookup"><span data-stu-id="33725-112">Machine Learning web services support “batching” multiple rows, which is called mini-batch, in the same web service API call, to improve overall throughput.</span></span> <span data-ttu-id="33725-113">Lütfen daha fazla ayrıntı için aşağıdaki makalelere bakın; [Stream Analytics azure Machine Learning işlevlerde](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) ve [Azure Machine Learning Web Hizmetleri](../machine-learning/machine-learning-consume-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="33725-113">Please see the following articles for more details; [Azure Machine Learning functions in Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) and [Azure Machine Learning Web Services](../machine-learning/machine-learning-consume-web-services.md).</span></span>

## <a name="configure-a-stream-analytics-job-with-machine-learning-functions"></a><span data-ttu-id="33725-114">Akış analizi işi Machine Learning işlevleri ile yapılandırma</span><span class="sxs-lookup"><span data-stu-id="33725-114">Configure a Stream Analytics job with Machine Learning functions</span></span>
<span data-ttu-id="33725-115">Stream Analytics işi için Machine Learning işlevi yapılandırırken dikkate alınması gereken iki parametre, Machine Learning işlev çağrıları akış analizi işi için sağlanan akış birimleri (SUs) ve toplu iş boyutu vardır.</span><span class="sxs-lookup"><span data-stu-id="33725-115">When configuring a Machine Learning function for Stream Analytics job, there are two parameters to consider, the batch size of the Machine Learning function calls, and the streaming units (SUs) provisioned for the Stream Analytics job.</span></span> <span data-ttu-id="33725-116">Bunlar için uygun değerleri belirlemek için önce bir karar verimlilik, gecikme süresi arasında diğer bir deyişle, Stream Analytics işi ve her SU verimini gecikme yapılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-116">To determine the appropriate values for these, first a decision must be made between latency and throughput, that is, latency of the Stream Analytics job, and throughput of each SU.</span></span> <span data-ttu-id="33725-117">Ek SUs işi çalıştırmayı maliyetini artırsa SUs her zaman iyi bölümlenmiş bir akış analizi sorgu verimliliğini artırmak için işe eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="33725-117">SUs may always be added to a job to increase throughput of a well partitioned Stream Analytics query, although additional SUs increases the cost of running the job.</span></span>

<span data-ttu-id="33725-118">Bu nedenle belirlemek önemli olan *dayanıklılık* gecikme Stream Analytics işi çalışır.</span><span class="sxs-lookup"><span data-stu-id="33725-118">Therefore it is important to determine the *tolerance* of latency in running a Stream Analytics job.</span></span> <span data-ttu-id="33725-119">Azure Machine Learning hizmet istekleri çalışmasını ek gecikme Stream Analytics işi gecikme bileşik toplu iş boyutu ile doğal olarak artar.</span><span class="sxs-lookup"><span data-stu-id="33725-119">Additional latency from running Azure Machine Learning service requests will naturally increase with batch size, which will compound the latency of the Stream Analytics job.</span></span> <span data-ttu-id="33725-120">Diğer taraftan, toplu iş boyutu işlemek Stream Analytics işi artırır * ile daha fazla olay *aynı numarası* Machine Learning web hizmeti istekleri.</span><span class="sxs-lookup"><span data-stu-id="33725-120">On the other hand, increasing batch size allows the Stream Analytics job to process *more events with the *same number* of Machine Learning web service requests.</span></span> <span data-ttu-id="33725-121">Machine Learning web hizmeti belirli bir durumda en ekonomik toplu iş boyutu göz önünde bulundurmanız önemlidir Machine Learning web hizmeti gecikme süresi arttıkça toplu iş boyutunu artırmak için alt doğrusal görülür.</span><span class="sxs-lookup"><span data-stu-id="33725-121">Often the increase of Machine Learning web service latency is sub-linear to the increase of batch size so it is important to consider the most cost-efficient batch size for a Machine Learning web service in any given situation.</span></span> <span data-ttu-id="33725-122">Web hizmeti için varsayılan toplu iş boyutu istekleri 1000'dir ve kullanarak ya da değiştirilebilir [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") veya [akış için PowerShell istemcisi Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "akış analizi için PowerShell istemcisi").</span><span class="sxs-lookup"><span data-stu-id="33725-122">The default batch size for the web service requests is 1000 and may be modified either by using the [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") or the [PowerShell client for Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "PowerShell client for Stream Analytics").</span></span>

<span data-ttu-id="33725-123">Bir toplu iş boyutu belirlendikten sonra akış miktarını birimler (SUs) belirlendiği, işlevi gerektiğinde olayların sayısının temel saniye başına işlem.</span><span class="sxs-lookup"><span data-stu-id="33725-123">Once a batch size has been determined, the amount of streaming units (SUs) can be determined, based on the number of events that the function needs to process per second.</span></span> <span data-ttu-id="33725-124">Akış birimleri hakkında daha fazla bilgi için bkz: [Stream Analytics işlerini ölçeklendirme](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="33725-124">For more information about streaming units, see [Stream Analytics scale jobs](stream-analytics-scale-jobs.md).</span></span>

<span data-ttu-id="33725-125">Genel olarak, 1 SU işleri ve 3 SU işleri 20 eş zamanlı bağlantı de alırsınız dışında her 6 SUs için Machine Learning web hizmetine 20 eş zamanlı bağlantı vardır.</span><span class="sxs-lookup"><span data-stu-id="33725-125">In general, there are 20 concurrent connections to the Machine Learning web service for every 6 SUs, except that 1 SU jobs and 3 SU jobs will get 20 concurrent connections also.</span></span>  <span data-ttu-id="33725-126">Örneğin, saniye başına 200.000 etkinlik giriş verileri oranıdır ve toplu iş boyutu 1000 varsayılan olarak sol 1000 olayları Mini toplu elde edilen web hizmeti gecikmeyle 200 MS olur.</span><span class="sxs-lookup"><span data-stu-id="33725-126">For example, if the input data rate is 200,000 events per second and the batch size is left to the default of 1000 the resulting web service latency with 1000 events mini-batch is 200ms.</span></span> <span data-ttu-id="33725-127">Başka bir deyişle, her bağlantı 5 Machine Learning web hizmetine bir saniyede isteğinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="33725-127">This means every connection can make 5 requests to the Machine Learning web service in a second.</span></span> <span data-ttu-id="33725-128">20 bağlantıları ile Stream Analytics işi 20.000 olayları 200 MS ve bu nedenle 100.000 olayları bir saniyede işleyebilir.</span><span class="sxs-lookup"><span data-stu-id="33725-128">With 20 connections, the Stream Analytics job can process 20,000 events in 200ms  and therefore 100,000 events in a second.</span></span> <span data-ttu-id="33725-129">Bu nedenle saniyede 200.000 olayları işlemek için Stream Analytics işi 40 eşzamanlı bağlantı 12 SUs desteklemektedir gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-129">So to process 200,000 events per second, the Stream Analytics job needs 40 concurrent connections, which comes out to 12 SUs.</span></span> <span data-ttu-id="33725-130">Stream Analytics işi gelen istekleri Machine Learning web hizmeti uç noktası için aşağıdaki diyagramda gösterilmiştir – her 6 SUs sırasında en fazla 20 eş zamanlı bağlantı Machine Learning web hizmetine sahip.</span><span class="sxs-lookup"><span data-stu-id="33725-130">The diagram below illustrates the requests from the Stream Analytics job to the Machine Learning web service endpoint – Every 6 SUs has 20 concurrent connections to Machine Learning web service at max.</span></span>

<span data-ttu-id="33725-131">![Stream Analytics Machine Learning işlevleri 2 iş örnek ile ölçek](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Machine Learning işlevleri 2 iş örnek ile ölçek akış analizi")</span><span class="sxs-lookup"><span data-stu-id="33725-131">![Scale Stream Analytics with Machine Learning Functions 2 job example](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Scale Stream Analytics with Machine Learning Functions 2 job example")</span></span>

<span data-ttu-id="33725-132">Genel olarak, ***B*** toplu iş boyutu için ***L*** web hizmeti gecikme süresi için milisaniye cinsinden toplu iş boyutu B, Stream Analytics verimini işi ile ***N*** SUs değil:</span><span class="sxs-lookup"><span data-stu-id="33725-132">In general, ***B*** for batch size, ***L*** for the web service latency at batch size B in milliseconds, the throughput of an Stream Analytics job with ***N*** SUs is:</span></span>

<span data-ttu-id="33725-133">![Ölçeklendirme Machine Learning işlevleri formülü olan Stream Analytics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "ölçeklendirme Machine Learning işlevleri formülü olan akış analizi")</span><span class="sxs-lookup"><span data-stu-id="33725-133">![Scale Stream Analytics with Machine Learning Functions Formula](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Scale Stream Analytics with Machine Learning Functions Formula")</span></span>

<span data-ttu-id="33725-134">Bir sağlayabildiği Machine Learning web hizmeti tarafında 'en fazla eşzamanlı çağrıları' olabilir, bu en büyük değeri (şu anda 200) ayarlamak için önerilen.</span><span class="sxs-lookup"><span data-stu-id="33725-134">An additional consideration may be the 'max concurrent calls' on the Machine Learning web service side, it’s recommended to set this to the maximum value (200 currently).</span></span>

<span data-ttu-id="33725-135">Bu ayar hakkında daha fazla bilgi için lütfen gözden [Machine Learning Web Hizmetleri için ölçeklendirme makalesine](../machine-learning/machine-learning-scaling-webservice.md).</span><span class="sxs-lookup"><span data-stu-id="33725-135">For more information on this setting please review the [Scaling article for Machine Learning Web Services](../machine-learning/machine-learning-scaling-webservice.md).</span></span>

## <a name="example--sentiment-analysis"></a><span data-ttu-id="33725-136">Örnek – düşünceleri çözümleme</span><span class="sxs-lookup"><span data-stu-id="33725-136">Example – Sentiment Analysis</span></span>
<span data-ttu-id="33725-137">Aşağıdaki örnek, Stream Analytics işi düşünceleri analiz Machine Learning işlevi ile açıklandığı gibi içerir [Stream Analytics Machine Learning tümleştirme Öğreticisi](stream-analytics-machine-learning-integration-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="33725-137">The following example includes a Stream Analytics job with the sentiment analysis Machine Learning function, as described in the [Stream Analytics Machine Learning integration tutorial](stream-analytics-machine-learning-integration-tutorial.md).</span></span>

<span data-ttu-id="33725-138">Basit bir sorgu ve ardından tam olarak bölümlenmiş sorgudur **düşünceleri** aşağıda gösterildiği gibi işlev:</span><span class="sxs-lookup"><span data-stu-id="33725-138">The query is a simple fully partitioned query followed by the **sentiment** function, as shown below:</span></span>

    WITH subquery AS (
        SELECT text, sentiment(text) as result from input
    )

    Select text, result.[Score]
    Into output
    From subquery

<span data-ttu-id="33725-139">Aşağıdaki senaryoyu ele alalım; saniye başına 10.000 tweet'leri verimi ile akış analizi işi (olayları) tweet'leri düşünceleri analizini gerçekleştirmek için oluşturulmuş olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-139">Consider the following scenario; with a throughput of 10,000 tweets per second a Stream Analytics job must be created to perform sentiment analysis of the tweets (events).</span></span> <span data-ttu-id="33725-140">1 SU kullanarak, bu akış analizi işi trafiği kaldırabilir olabilir?</span><span class="sxs-lookup"><span data-stu-id="33725-140">Using 1 SU, could this Stream Analytics job be able to handle the traffic?</span></span> <span data-ttu-id="33725-141">1000 varsayılan toplu iş boyutu kullanarak iş girişle tutmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-141">Using the default batch size of 1000 the job should be able to keep up with the input.</span></span> <span data-ttu-id="33725-142">Daha fazla eklenen Machine Learning işlevi genel olan gecikme saniyesi birden fazla varsayılan gecikmeyle düşünceleri analiz Machine Learning web hizmeti (varsayılan toplu iş boyutu 1000) oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-142">Further the added Machine Learning function should generate no more than a second of latency, which is the general default latency of the sentiment analysis Machine Learning web service (with a default batch size of 1000).</span></span> <span data-ttu-id="33725-143">Stream Analytics iş **genel** veya uçtan uca gecikme süresi genellikle birkaç saniye olacaktır.</span><span class="sxs-lookup"><span data-stu-id="33725-143">The Stream Analytics job’s **overall** or end-to-end latency would typically be a few seconds.</span></span> <span data-ttu-id="33725-144">Bu akış analizi işi, daha ayrıntılı göz *özellikle* Machine Learning işlev çağrıları.</span><span class="sxs-lookup"><span data-stu-id="33725-144">Take a more detailed look into this Stream Analytics job, *especially* the Machine Learning function calls.</span></span> <span data-ttu-id="33725-145">Toplu iş boyutu 1000 sahip olmak, 10.000 olayları verimini yaklaşık 10 istekleri web hizmetine olur.</span><span class="sxs-lookup"><span data-stu-id="33725-145">Having the batch size as 1000, a throughput of 10,000 events will take about 10 requests to web service.</span></span> <span data-ttu-id="33725-146">1 SU ile bile, bu giriş trafiği karşılamak için yeterli eşzamanlı bağlantı vardır.</span><span class="sxs-lookup"><span data-stu-id="33725-146">Even with 1 SU, there are enough concurrent connections to accommodate this input traffic.</span></span>

<span data-ttu-id="33725-147">Ancak ne 100 x giriş olay hızı artırır ve Stream Analytics işi 1.000.000 tweet'leri saniye başına işlem gerekiyor?</span><span class="sxs-lookup"><span data-stu-id="33725-147">But what if the input event rate increases by 100x and now the Stream Analytics job needs to process 1,000,000 tweets per second?</span></span> <span data-ttu-id="33725-148">İki seçenek vardır:</span><span class="sxs-lookup"><span data-stu-id="33725-148">There are two options:</span></span>

1. <span data-ttu-id="33725-149">Toplu iş boyutunu artırın veya</span><span class="sxs-lookup"><span data-stu-id="33725-149">Increase the batch size, or</span></span>
2. <span data-ttu-id="33725-150">Bölüm paralel olayları işlemek için giriş akışı</span><span class="sxs-lookup"><span data-stu-id="33725-150">Partition the input stream to process the events in parallel</span></span>

<span data-ttu-id="33725-151">İlk seçenek, iş **gecikme** artmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="33725-151">With the first option, the job **latency** will increase.</span></span>

<span data-ttu-id="33725-152">İkinci seçeneğiyle sağlanması ve bu nedenle daha fazla eşzamanlı Machine Learning web hizmeti isteklerinin oluşturmak daha fazla SUs gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-152">With the second option, more SUs would need to be provisioned and therefore generate more concurrent Machine Learning web service requests.</span></span> <span data-ttu-id="33725-153">Bu iş anlamına gelir **maliyet** artmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="33725-153">This means the job **cost** will increase.</span></span>

<span data-ttu-id="33725-154">Machine Learning web hizmeti düşünceleri analiz gecikmesi 200 MS 1000 olay toplu işlemler için veya altında 5.000 olay toplu işleri, 10.000 olay toplu işlemler için 300ms veya 500ms 25.000 olay toplu işlemler için 250ms olduğunu varsayın.</span><span class="sxs-lookup"><span data-stu-id="33725-154">Assume the latency of the sentiment analysis Machine Learning web service is 200ms for 1000-event batches or below, 250ms for 5,000-event batches, 300ms for 10,000-event batches or 500ms for 25,000-event batches.</span></span>

1. <span data-ttu-id="33725-155">İlk seçeneği kullanılarak (**değil** daha fazla SUs sağlama), toplu iş boyutu için artırılacak **25.000**.</span><span class="sxs-lookup"><span data-stu-id="33725-155">Using the first option, (**not** provisioning more SUs), the batch size could be increased to **25,000**.</span></span> <span data-ttu-id="33725-156">Bu sırayla (ile 500ms çağrı başına bir gecikme) Machine Learning web hizmeti 20 eş zamanlı bağlantılarla 1.000.000 olayları işlemek üzere işlemini olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="33725-156">This in turn would allow the job to process 1,000,000 events with 20 concurrent connections to the Machine Learning web service (with a latency of 500ms per call).</span></span> <span data-ttu-id="33725-157">Machine Learning web hizmeti isteklerinin düşünceleri işlevi istekler nedeniyle Stream Analytics işi ek gecikmesi artan böylece **200 MS** için **500ms**.</span><span class="sxs-lookup"><span data-stu-id="33725-157">So the additional latency of the Stream Analytics job due to the sentiment function requests against the Machine Learning web service requests would be increased from **200ms** to **500ms**.</span></span> <span data-ttu-id="33725-158">Ancak, bu toplu iş boyutu Not **olamaz** sonsuz bir istek yükü boyutu 4 MB olması Machine Learning web hizmetleri gerektirdiği şekilde ya da daha küçük artırılmasını web hizmeti işlemi 100 saniye sonra zaman aşımı ister.</span><span class="sxs-lookup"><span data-stu-id="33725-158">However, note that batch size **cannot** be increased infinitely as the Machine Learning web services requires the payload size of a request be 4MB or smaller web service requests timeout after 100 seconds of operation.</span></span>
2. <span data-ttu-id="33725-159">İkinci seçeneği kullanarak, toplu iş boyutu 200 MS web hizmeti gecikmeyle 1000 sol, web hizmetine her 20 eş zamanlı bağlantı olayları işlemek 1000 * 20 * 5 gerçekleştirebilir = saniye başına 100.000.</span><span class="sxs-lookup"><span data-stu-id="33725-159">Using the second option, the batch size is left at 1000, with 200ms web service latency, every 20 concurrent connections to the web service would be able to process 1000 * 20 * 5 events = 100,000 per second.</span></span> <span data-ttu-id="33725-160">Bu nedenle saniye başına 1.000.000 olayları işlemek için iş 60 SUs gerekir.</span><span class="sxs-lookup"><span data-stu-id="33725-160">So to process 1,000,000 events per second, the job would need 60 SUs.</span></span> <span data-ttu-id="33725-161">İlk seçeneği ile karşılaştırıldığında, Stream Analytics işi sırayla artan bir maliyet oluşturmak daha fazla web hizmeti toplu isteği olmaması anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="33725-161">Compared to the first option, Stream Analytics job would make more web service batch requests, in turn generating an increased cost.</span></span>

<span data-ttu-id="33725-162">Stream Analytics işi işleme için bir tablo farklı SUs ve toplu boyutları (saniye başına etkinlik sayısı) için aşağıdadır.</span><span class="sxs-lookup"><span data-stu-id="33725-162">Below is a table for the throughput of the Stream Analytics job for different SUs and batch sizes (in number of events per second).</span></span>

| <span data-ttu-id="33725-163">Toplu iş boyutu (ML gecikme)</span><span class="sxs-lookup"><span data-stu-id="33725-163">batch size (ML latency)</span></span> | <span data-ttu-id="33725-164">500 (200 ms)</span><span class="sxs-lookup"><span data-stu-id="33725-164">500 (200ms)</span></span> | <span data-ttu-id="33725-165">1.000 (200 ms)</span><span class="sxs-lookup"><span data-stu-id="33725-165">1,000 (200ms)</span></span> | <span data-ttu-id="33725-166">5.000 (250ms)</span><span class="sxs-lookup"><span data-stu-id="33725-166">5,000 (250ms)</span></span> | <span data-ttu-id="33725-167">10.000 (300ms)</span><span class="sxs-lookup"><span data-stu-id="33725-167">10,000 (300ms)</span></span> | <span data-ttu-id="33725-168">25.000 (500ms)</span><span class="sxs-lookup"><span data-stu-id="33725-168">25,000 (500ms)</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="33725-169">**1 SU**</span><span class="sxs-lookup"><span data-stu-id="33725-169">**1 SU**</span></span> |<span data-ttu-id="33725-170">2,500</span><span class="sxs-lookup"><span data-stu-id="33725-170">2,500</span></span> |<span data-ttu-id="33725-171">5,000</span><span class="sxs-lookup"><span data-stu-id="33725-171">5,000</span></span> |<span data-ttu-id="33725-172">20,000</span><span class="sxs-lookup"><span data-stu-id="33725-172">20,000</span></span> |<span data-ttu-id="33725-173">30,000</span><span class="sxs-lookup"><span data-stu-id="33725-173">30,000</span></span> |<span data-ttu-id="33725-174">50,000</span><span class="sxs-lookup"><span data-stu-id="33725-174">50,000</span></span> |
| <span data-ttu-id="33725-175">**3 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-175">**3 SUs**</span></span> |<span data-ttu-id="33725-176">2,500</span><span class="sxs-lookup"><span data-stu-id="33725-176">2,500</span></span> |<span data-ttu-id="33725-177">5,000</span><span class="sxs-lookup"><span data-stu-id="33725-177">5,000</span></span> |<span data-ttu-id="33725-178">20,000</span><span class="sxs-lookup"><span data-stu-id="33725-178">20,000</span></span> |<span data-ttu-id="33725-179">30,000</span><span class="sxs-lookup"><span data-stu-id="33725-179">30,000</span></span> |<span data-ttu-id="33725-180">50,000</span><span class="sxs-lookup"><span data-stu-id="33725-180">50,000</span></span> |
| <span data-ttu-id="33725-181">**6 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-181">**6 SUs**</span></span> |<span data-ttu-id="33725-182">2,500</span><span class="sxs-lookup"><span data-stu-id="33725-182">2,500</span></span> |<span data-ttu-id="33725-183">5,000</span><span class="sxs-lookup"><span data-stu-id="33725-183">5,000</span></span> |<span data-ttu-id="33725-184">20,000</span><span class="sxs-lookup"><span data-stu-id="33725-184">20,000</span></span> |<span data-ttu-id="33725-185">30,000</span><span class="sxs-lookup"><span data-stu-id="33725-185">30,000</span></span> |<span data-ttu-id="33725-186">50,000</span><span class="sxs-lookup"><span data-stu-id="33725-186">50,000</span></span> |
| <span data-ttu-id="33725-187">**12 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-187">**12 SUs**</span></span> |<span data-ttu-id="33725-188">5,000</span><span class="sxs-lookup"><span data-stu-id="33725-188">5,000</span></span> |<span data-ttu-id="33725-189">10,000</span><span class="sxs-lookup"><span data-stu-id="33725-189">10,000</span></span> |<span data-ttu-id="33725-190">40,000</span><span class="sxs-lookup"><span data-stu-id="33725-190">40,000</span></span> |<span data-ttu-id="33725-191">60,000</span><span class="sxs-lookup"><span data-stu-id="33725-191">60,000</span></span> |<span data-ttu-id="33725-192">100,000</span><span class="sxs-lookup"><span data-stu-id="33725-192">100,000</span></span> |
| <span data-ttu-id="33725-193">**18 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-193">**18 SUs**</span></span> |<span data-ttu-id="33725-194">7,500</span><span class="sxs-lookup"><span data-stu-id="33725-194">7,500</span></span> |<span data-ttu-id="33725-195">15,000</span><span class="sxs-lookup"><span data-stu-id="33725-195">15,000</span></span> |<span data-ttu-id="33725-196">60,000</span><span class="sxs-lookup"><span data-stu-id="33725-196">60,000</span></span> |<span data-ttu-id="33725-197">90,000</span><span class="sxs-lookup"><span data-stu-id="33725-197">90,000</span></span> |<span data-ttu-id="33725-198">150,000</span><span class="sxs-lookup"><span data-stu-id="33725-198">150,000</span></span> |
| <span data-ttu-id="33725-199">**24 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-199">**24 SUs**</span></span> |<span data-ttu-id="33725-200">10,000</span><span class="sxs-lookup"><span data-stu-id="33725-200">10,000</span></span> |<span data-ttu-id="33725-201">20,000</span><span class="sxs-lookup"><span data-stu-id="33725-201">20,000</span></span> |<span data-ttu-id="33725-202">80,000</span><span class="sxs-lookup"><span data-stu-id="33725-202">80,000</span></span> |<span data-ttu-id="33725-203">120,000</span><span class="sxs-lookup"><span data-stu-id="33725-203">120,000</span></span> |<span data-ttu-id="33725-204">200,000</span><span class="sxs-lookup"><span data-stu-id="33725-204">200,000</span></span> |
| <span data-ttu-id="33725-205">**…**</span><span class="sxs-lookup"><span data-stu-id="33725-205">**…**</span></span> |<span data-ttu-id="33725-206">…</span><span class="sxs-lookup"><span data-stu-id="33725-206">…</span></span> |<span data-ttu-id="33725-207">…</span><span class="sxs-lookup"><span data-stu-id="33725-207">…</span></span> |<span data-ttu-id="33725-208">…</span><span class="sxs-lookup"><span data-stu-id="33725-208">…</span></span> |<span data-ttu-id="33725-209">…</span><span class="sxs-lookup"><span data-stu-id="33725-209">…</span></span> |<span data-ttu-id="33725-210">…</span><span class="sxs-lookup"><span data-stu-id="33725-210">…</span></span> |
| <span data-ttu-id="33725-211">**60 SUs**</span><span class="sxs-lookup"><span data-stu-id="33725-211">**60 SUs**</span></span> |<span data-ttu-id="33725-212">25,000</span><span class="sxs-lookup"><span data-stu-id="33725-212">25,000</span></span> |<span data-ttu-id="33725-213">50,000</span><span class="sxs-lookup"><span data-stu-id="33725-213">50,000</span></span> |<span data-ttu-id="33725-214">200,000</span><span class="sxs-lookup"><span data-stu-id="33725-214">200,000</span></span> |<span data-ttu-id="33725-215">300,000</span><span class="sxs-lookup"><span data-stu-id="33725-215">300,000</span></span> |<span data-ttu-id="33725-216">500,000</span><span class="sxs-lookup"><span data-stu-id="33725-216">500,000</span></span> |

<span data-ttu-id="33725-217">Şimdi tarafından zaten nasıl akış analizi, Machine Learning işlevleri işe iyi anlamış olmanız.</span><span class="sxs-lookup"><span data-stu-id="33725-217">By now, you should already have a good understanding of how Machine Learning functions in Stream Analytics work.</span></span> <span data-ttu-id="33725-218">Büyük olasılıkla de veri kaynaklarından veri akış analizi işleri "çekmek" ve her "çekme" olayları işlemek Stream Analytics işi için bir dizi döndürür anlamanız.</span><span class="sxs-lookup"><span data-stu-id="33725-218">You likely also understand that Stream Analytics jobs “pull” data from data sources and each “pull” returns a batch of events for the Stream Analytics job to process.</span></span> <span data-ttu-id="33725-219">Bu çekme modeli etkiyi Machine Learning hizmet isteklerinin nasıl web?</span><span class="sxs-lookup"><span data-stu-id="33725-219">How does this pull model impact the Machine Learning web service requests?</span></span>

<span data-ttu-id="33725-220">Normalde, Machine Learning işlevleri için ayarlarız toplu iş boyutu tam olarak her akış analizi işi "çekme" tarafından döndürülen olay sayısı bölünebilir olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="33725-220">Normally, the batch size we set for Machine Learning functions won’t exactly be divisible by the number of events returned by each Stream Analytics job “pull”.</span></span> <span data-ttu-id="33725-221">Ne zaman Machine Learning web hizmeti "kısmi" toplu işleri çağrılacağı gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="33725-221">When this occurs the Machine Learning web service will be called with “partial” batches.</span></span> <span data-ttu-id="33725-222">Bu, ek iş gecikme birleştirmesi olaylarda çekme çekme zahmetine değil için gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="33725-222">This is done to not incur additional job latency overhead in coalescing events from pull to pull.</span></span>

## <a name="new-function-related-monitoring-metrics"></a><span data-ttu-id="33725-223">İşlevi ile ilgili yeni izleme ölçümleri</span><span class="sxs-lookup"><span data-stu-id="33725-223">New function-related monitoring metrics</span></span>
<span data-ttu-id="33725-224">Akış analizi işi İzleyicisi alanında üç ek işlevi ödemeyle ilgili ölçümlerini eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="33725-224">In the Monitor area of a Stream Analytics job, three additional function-related metrics have been added.</span></span> <span data-ttu-id="33725-225">İŞLEV İSTEKLERİ, işlevi olayları ve başarısız işlev İSTEKLER grafikte gösterildiği gibi olduklarını.</span><span class="sxs-lookup"><span data-stu-id="33725-225">They are FUNCTION REQUESTS, FUNCTION EVENTS and FAILED FUNCTION REQUESTS, as shown in the graphic below.</span></span>

<span data-ttu-id="33725-226">![Ölçeklendirme akış analizi Machine Learning işlevleri ölçümlerle](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "ölçeklendirme Machine Learning işlevleri ölçümlerle akış analizi")</span><span class="sxs-lookup"><span data-stu-id="33725-226">![Scale Stream Analytics with Machine Learning Functions Metrics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "Scale Stream Analytics with Machine Learning Functions Metrics")</span></span>

<span data-ttu-id="33725-227">Yapılan tanımı aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="33725-227">The are defined as follows:</span></span>

<span data-ttu-id="33725-228">**İŞLEV İSTEKLERİ**: işlevi istek sayısı.</span><span class="sxs-lookup"><span data-stu-id="33725-228">**FUNCTION REQUESTS**: The number of function requests.</span></span>

<span data-ttu-id="33725-229">**İŞLEV olayları**: işlevi istekleri sayı olayları.</span><span class="sxs-lookup"><span data-stu-id="33725-229">**FUNCTION EVENTS**: The number events in the function requests.</span></span>

<span data-ttu-id="33725-230">**BAŞARISIZ işlev İSTEKLER**: başarısız işleve istek sayısı.</span><span class="sxs-lookup"><span data-stu-id="33725-230">**FAILED FUNCTION REQUESTS**: The number of failed function requests.</span></span>

## <a name="key-takeaways"></a><span data-ttu-id="33725-231">Anahtar paketler</span><span class="sxs-lookup"><span data-stu-id="33725-231">Key Takeaways</span></span>
<span data-ttu-id="33725-232">Stream Analytics işi Machine Learning işlevlerle ölçeklendirmek için ana noktalarını özetlemek için aşağıdaki öğeleri dikkate alınmalıdır:</span><span class="sxs-lookup"><span data-stu-id="33725-232">To summarize the main points, in order to scale an Stream Analytics job with Machine Learning functions, the following items must be considered:</span></span>

1. <span data-ttu-id="33725-233">Giriş olay hızı</span><span class="sxs-lookup"><span data-stu-id="33725-233">The input event rate</span></span>
2. <span data-ttu-id="33725-234">Çalışan bir akış analizi işi (ve dolayısıyla Machine Learning web hizmeti isteklerinin toplu iş boyutu) için toleranslı gecikme süresi</span><span class="sxs-lookup"><span data-stu-id="33725-234">The tolerated latency for the running Stream Analytics job (and thus the batch size of the Machine Learning web service requests)</span></span>
3. <span data-ttu-id="33725-235">Sağlanan akış analizi SUs ve Machine Learning web hizmeti isteklerinin (ek işlevi ilişkili maliyetler) sayısı</span><span class="sxs-lookup"><span data-stu-id="33725-235">The provisioned Stream Analytics SUs and the number of Machine Learning web service requests (the additional function-related costs)</span></span>

<span data-ttu-id="33725-236">Tam olarak bölümlenmiş bir akış analizi sorgu örnek olarak kullanılmıştır.</span><span class="sxs-lookup"><span data-stu-id="33725-236">A fully partitioned Stream Analytics query was used as an example.</span></span> <span data-ttu-id="33725-237">Daha karmaşık bir sorgu gerekirse [Azure Stream Analytics forumumuzu](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) Stream Analytics ekibinden Ek Yardım almak için mükemmel bir kaynaktır.</span><span class="sxs-lookup"><span data-stu-id="33725-237">If a more complex query is needed the [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) is a great resource for getting additional help from the Stream Analytics team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="33725-238">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="33725-238">Next steps</span></span>
<span data-ttu-id="33725-239">Stream Analytics hakkında daha fazla bilgi için bkz:</span><span class="sxs-lookup"><span data-stu-id="33725-239">To learn more about Stream Analytics, see:</span></span>

* [<span data-ttu-id="33725-240">Azure Akış Analizi'ni kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="33725-240">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="33725-241">Azure Akış Analizi işlerini ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="33725-241">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="33725-242">Azure Akış Analizi Sorgu Dili Başvurusu</span><span class="sxs-lookup"><span data-stu-id="33725-242">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="33725-243">Azure Akış Analizi Yönetimi REST API'si Başvurusu</span><span class="sxs-lookup"><span data-stu-id="33725-243">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
