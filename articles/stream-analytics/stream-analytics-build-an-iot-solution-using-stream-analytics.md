---
title: "Akış analizi kullanarak bir IOT çözümü derleme | Microsoft Docs"
description: "Başlangıç Öğreticisi gişe senaryosu Stream Analytics IOT çözüm için"
keywords: "IOT çözüm, pencere işlevleri"
documentationcenter: 
services: stream-analytics
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: a473ea0a-3eaa-4e5b-aaa1-fec7e9069f20
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: a93693ef7d40025fa96846594a8eb525a50b6885
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="build-an-iot-solution-by-using-stream-analytics"></a><span data-ttu-id="2f437-104">Akış analizi kullanarak bir IOT çözüm oluşturma</span><span class="sxs-lookup"><span data-stu-id="2f437-104">Build an IoT solution by using Stream Analytics</span></span>
## <a name="introduction"></a><span data-ttu-id="2f437-105">Giriş</span><span class="sxs-lookup"><span data-stu-id="2f437-105">Introduction</span></span>
<span data-ttu-id="2f437-106">Bu öğreticide, Azure akış analizi verilerinizden gerçek zamanlı Öngörüler almak için nasıl kullanılacağını öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-106">In this tutorial, you will learn how to use Azure Stream Analytics to get real-time insights from your data.</span></span> <span data-ttu-id="2f437-107">Geliştiriciler, kolayca geçmiş kayıtlarını veya iş öngörüleri türetmek için başvuru verileri ile tıklatın akışlar, günlükler ve cihaz tarafından oluşturulan olaylar gibi veri akışları birleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-107">Developers can easily combine streams of data, such as click-streams, logs, and device-generated events, with historical records or reference data to derive business insights.</span></span> <span data-ttu-id="2f437-108">Microsoft Azure üzerinde barındırılan bir tam olarak yönetilen, gerçek zamanlı akış hesaplama hizmet olarak Azure akış analizi yerleşik dayanıklılık, düşük gecikme süresi ve siz yukarı ve dakika içinde çalışan almak için ölçeklenebilirlik sağlar.</span><span class="sxs-lookup"><span data-stu-id="2f437-108">As a fully managed, real-time stream computation service that's hosted in Microsoft Azure, Azure Stream Analytics provides built-in resiliency, low latency, and scalability to get you up and running in minutes.</span></span>

<span data-ttu-id="2f437-109">Bu öğreticiyi tamamladıktan sonra aşağıdakileri gerçekleştirebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="2f437-109">After completing this tutorial, you will be able to:</span></span>

* <span data-ttu-id="2f437-110">Azure Stream Analytics Portalı'yla hakkında bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="2f437-110">Familiarize yourself with the Azure Stream Analytics portal.</span></span>
* <span data-ttu-id="2f437-111">Yapılandırın ve iş akışında dağıtın.</span><span class="sxs-lookup"><span data-stu-id="2f437-111">Configure and deploy a streaming job.</span></span>
* <span data-ttu-id="2f437-112">Gerçek dünyadaki sorunları iyileştirir ve akış analizi sorgu dili kullanarak çözün.</span><span class="sxs-lookup"><span data-stu-id="2f437-112">Articulate real-world problems and solve them by using the Stream Analytics query language.</span></span>
* <span data-ttu-id="2f437-113">Stream Analytics güvenle kullanarak çözümleri müşterileriniz için akış geliştirin.</span><span class="sxs-lookup"><span data-stu-id="2f437-113">Develop streaming solutions for your customers by using Stream Analytics with confidence.</span></span>
* <span data-ttu-id="2f437-114">Sorunları gidermek için izleme ve deneyimi günlüğü kullanın.</span><span class="sxs-lookup"><span data-stu-id="2f437-114">Use the monitoring and logging experience to troubleshoot issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2f437-115">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="2f437-115">Prerequisites</span></span>
<span data-ttu-id="2f437-116">Bu öğreticiyi tamamlamak için aşağıdaki önkoşullar gerekir:</span><span class="sxs-lookup"><span data-stu-id="2f437-116">You will need the following prerequisites to complete this tutorial:</span></span>

* <span data-ttu-id="2f437-117">En son sürümünü [Azure PowerShell](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="2f437-117">The latest version of [Azure PowerShell](/powershell/azure/overview)</span></span>
* <span data-ttu-id="2f437-118">2015, Visual Studio 2017 veya ücretsiz [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="2f437-118">Visual Studio 2017, 2015, or the free [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span></span>
* <span data-ttu-id="2f437-119">Bir [Azure aboneliği](https://azure.microsoft.com/pricing/free-trial/)</span><span class="sxs-lookup"><span data-stu-id="2f437-119">An [Azure subscription](https://azure.microsoft.com/pricing/free-trial/)</span></span>
* <span data-ttu-id="2f437-120">Bilgisayarda yönetim ayrıcalıkları</span><span class="sxs-lookup"><span data-stu-id="2f437-120">Administrative privileges on the computer</span></span>
* <span data-ttu-id="2f437-121">İndirme [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) Microsoft İndirme Merkezi'nden</span><span class="sxs-lookup"><span data-stu-id="2f437-121">Download of [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) from the Microsoft Download Center</span></span>
* <span data-ttu-id="2f437-122">İsteğe bağlı: Kaynak kodu TollApp olay üreteci için [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span><span class="sxs-lookup"><span data-stu-id="2f437-122">Optional: Source code for the TollApp event generator in [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span></span>

## <a name="scenario-introduction-hello-toll"></a><span data-ttu-id="2f437-123">Senaryo giriş: "Hello, ücretli!"</span><span class="sxs-lookup"><span data-stu-id="2f437-123">Scenario introduction: “Hello, Toll!”</span></span>
<span data-ttu-id="2f437-124">Ücretli istasyonu ortak olguya ' dir.</span><span class="sxs-lookup"><span data-stu-id="2f437-124">A toll station is a common phenomenon.</span></span> <span data-ttu-id="2f437-125">Bunları birçok expressways, köprüleri ve tünelleri dünya genelindeki karşılaştığınız.</span><span class="sxs-lookup"><span data-stu-id="2f437-125">You encounter them on many expressways, bridges, and tunnels across the world.</span></span> <span data-ttu-id="2f437-126">Her Ücretli istasyon birden çok Ücretli booths sahiptir.</span><span class="sxs-lookup"><span data-stu-id="2f437-126">Each toll station has multiple toll booths.</span></span> <span data-ttu-id="2f437-127">El ile booths Ücretli bir Görevlisi ödeme durdurun.</span><span class="sxs-lookup"><span data-stu-id="2f437-127">At manual booths, you stop to pay the toll to an attendant.</span></span> <span data-ttu-id="2f437-128">Otomatik booths üstünde her Stand algılayıcı Ücretli Stand geçirirken, araç ön için yapıştırılmış bir RFID kartı tarar.</span><span class="sxs-lookup"><span data-stu-id="2f437-128">At automated booths, a sensor on top of each booth scans an RFID card that's affixed to the windshield of your vehicle as you pass the toll booth.</span></span> <span data-ttu-id="2f437-129">Bu Ücretli istasyonları aracılığıyla taşıtlardan geçişini ilginç işlemleri gerçekleştirilebilir olay akışının görselleştirmek kolaydır.</span><span class="sxs-lookup"><span data-stu-id="2f437-129">It is easy to visualize the passage of vehicles through these toll stations as an event stream over which interesting operations can be performed.</span></span>

![Ücretli booths adresindeki araba resmi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image1.jpg)

## <a name="incoming-data"></a><span data-ttu-id="2f437-131">Gelen veriler</span><span class="sxs-lookup"><span data-stu-id="2f437-131">Incoming data</span></span>
<span data-ttu-id="2f437-132">Bu öğretici, iki veri akışları ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="2f437-132">This tutorial works with two streams of data.</span></span> <span data-ttu-id="2f437-133">Giriş ve çıkış Ücretli istasyonları yüklü algılayıcılar ilk akış üretir.</span><span class="sxs-lookup"><span data-stu-id="2f437-133">Sensors installed in the entrance and exit of the toll stations produce the first stream.</span></span> <span data-ttu-id="2f437-134">İkinci araç kayıt verileri içeren bir statik arama dataset akışıdır.</span><span class="sxs-lookup"><span data-stu-id="2f437-134">The second stream is a static lookup dataset that has vehicle registration data.</span></span>

### <a name="entry-data-stream"></a><span data-ttu-id="2f437-135">Girdi veri akışı</span><span class="sxs-lookup"><span data-stu-id="2f437-135">Entry data stream</span></span>
<span data-ttu-id="2f437-136">Ücretli istasyonları girerken giriş veri akışı araba hakkında bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="2f437-136">The entry data stream contains information about cars as they enter toll stations.</span></span>

| <span data-ttu-id="2f437-137">TollID</span><span class="sxs-lookup"><span data-stu-id="2f437-137">TollID</span></span> | <span data-ttu-id="2f437-138">EntryTime</span><span class="sxs-lookup"><span data-stu-id="2f437-138">EntryTime</span></span> | <span data-ttu-id="2f437-139">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="2f437-139">LicensePlate</span></span> | <span data-ttu-id="2f437-140">Durum</span><span class="sxs-lookup"><span data-stu-id="2f437-140">State</span></span> | <span data-ttu-id="2f437-141">Yapma</span><span class="sxs-lookup"><span data-stu-id="2f437-141">Make</span></span> | <span data-ttu-id="2f437-142">modeli</span><span class="sxs-lookup"><span data-stu-id="2f437-142">Model</span></span> | <span data-ttu-id="2f437-143">VehicleType</span><span class="sxs-lookup"><span data-stu-id="2f437-143">VehicleType</span></span> | <span data-ttu-id="2f437-144">VehicleWeight</span><span class="sxs-lookup"><span data-stu-id="2f437-144">VehicleWeight</span></span> | <span data-ttu-id="2f437-145">Ücretli</span><span class="sxs-lookup"><span data-stu-id="2f437-145">Toll</span></span> | <span data-ttu-id="2f437-146">Etiket</span><span class="sxs-lookup"><span data-stu-id="2f437-146">Tag</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="2f437-147">1</span><span class="sxs-lookup"><span data-stu-id="2f437-147">1</span></span> |<span data-ttu-id="2f437-148">2014-09-10 12:01:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-148">2014-09-10 12:01:00.000</span></span> |<span data-ttu-id="2f437-149">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="2f437-149">JNB 7001</span></span> |<span data-ttu-id="2f437-150">NY</span><span class="sxs-lookup"><span data-stu-id="2f437-150">NY</span></span> |<span data-ttu-id="2f437-151">Honda</span><span class="sxs-lookup"><span data-stu-id="2f437-151">Honda</span></span> |<span data-ttu-id="2f437-152">CRV</span><span class="sxs-lookup"><span data-stu-id="2f437-152">CRV</span></span> |<span data-ttu-id="2f437-153">1</span><span class="sxs-lookup"><span data-stu-id="2f437-153">1</span></span> |<span data-ttu-id="2f437-154">0</span><span class="sxs-lookup"><span data-stu-id="2f437-154">0</span></span> |<span data-ttu-id="2f437-155">7</span><span class="sxs-lookup"><span data-stu-id="2f437-155">7</span></span> | |
| <span data-ttu-id="2f437-156">1</span><span class="sxs-lookup"><span data-stu-id="2f437-156">1</span></span> |<span data-ttu-id="2f437-157">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-157">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="2f437-158">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="2f437-158">YXZ 1001</span></span> |<span data-ttu-id="2f437-159">NY</span><span class="sxs-lookup"><span data-stu-id="2f437-159">NY</span></span> |<span data-ttu-id="2f437-160">Toyota</span><span class="sxs-lookup"><span data-stu-id="2f437-160">Toyota</span></span> |<span data-ttu-id="2f437-161">Camry</span><span class="sxs-lookup"><span data-stu-id="2f437-161">Camry</span></span> |<span data-ttu-id="2f437-162">1</span><span class="sxs-lookup"><span data-stu-id="2f437-162">1</span></span> |<span data-ttu-id="2f437-163">0</span><span class="sxs-lookup"><span data-stu-id="2f437-163">0</span></span> |<span data-ttu-id="2f437-164">4</span><span class="sxs-lookup"><span data-stu-id="2f437-164">4</span></span> |<span data-ttu-id="2f437-165">123456789</span><span class="sxs-lookup"><span data-stu-id="2f437-165">123456789</span></span> |
| <span data-ttu-id="2f437-166">3</span><span class="sxs-lookup"><span data-stu-id="2f437-166">3</span></span> |<span data-ttu-id="2f437-167">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-167">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="2f437-168">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="2f437-168">ABC 1004</span></span> |<span data-ttu-id="2f437-169">U</span><span class="sxs-lookup"><span data-stu-id="2f437-169">CT</span></span> |<span data-ttu-id="2f437-170">Ford</span><span class="sxs-lookup"><span data-stu-id="2f437-170">Ford</span></span> |<span data-ttu-id="2f437-171">Taurus</span><span class="sxs-lookup"><span data-stu-id="2f437-171">Taurus</span></span> |<span data-ttu-id="2f437-172">1</span><span class="sxs-lookup"><span data-stu-id="2f437-172">1</span></span> |<span data-ttu-id="2f437-173">0</span><span class="sxs-lookup"><span data-stu-id="2f437-173">0</span></span> |<span data-ttu-id="2f437-174">5</span><span class="sxs-lookup"><span data-stu-id="2f437-174">5</span></span> |<span data-ttu-id="2f437-175">456789123</span><span class="sxs-lookup"><span data-stu-id="2f437-175">456789123</span></span> |
| <span data-ttu-id="2f437-176">2</span><span class="sxs-lookup"><span data-stu-id="2f437-176">2</span></span> |<span data-ttu-id="2f437-177">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-177">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="2f437-178">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="2f437-178">XYZ 1003</span></span> |<span data-ttu-id="2f437-179">U</span><span class="sxs-lookup"><span data-stu-id="2f437-179">CT</span></span> |<span data-ttu-id="2f437-180">Toyota</span><span class="sxs-lookup"><span data-stu-id="2f437-180">Toyota</span></span> |<span data-ttu-id="2f437-181">Corolla</span><span class="sxs-lookup"><span data-stu-id="2f437-181">Corolla</span></span> |<span data-ttu-id="2f437-182">1</span><span class="sxs-lookup"><span data-stu-id="2f437-182">1</span></span> |<span data-ttu-id="2f437-183">0</span><span class="sxs-lookup"><span data-stu-id="2f437-183">0</span></span> |<span data-ttu-id="2f437-184">4</span><span class="sxs-lookup"><span data-stu-id="2f437-184">4</span></span> | |
| <span data-ttu-id="2f437-185">1</span><span class="sxs-lookup"><span data-stu-id="2f437-185">1</span></span> |<span data-ttu-id="2f437-186">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-186">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="2f437-187">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="2f437-187">BNJ 1007</span></span> |<span data-ttu-id="2f437-188">NY</span><span class="sxs-lookup"><span data-stu-id="2f437-188">NY</span></span> |<span data-ttu-id="2f437-189">Honda</span><span class="sxs-lookup"><span data-stu-id="2f437-189">Honda</span></span> |<span data-ttu-id="2f437-190">CRV</span><span class="sxs-lookup"><span data-stu-id="2f437-190">CRV</span></span> |<span data-ttu-id="2f437-191">1</span><span class="sxs-lookup"><span data-stu-id="2f437-191">1</span></span> |<span data-ttu-id="2f437-192">0</span><span class="sxs-lookup"><span data-stu-id="2f437-192">0</span></span> |<span data-ttu-id="2f437-193">5</span><span class="sxs-lookup"><span data-stu-id="2f437-193">5</span></span> |<span data-ttu-id="2f437-194">789123456</span><span class="sxs-lookup"><span data-stu-id="2f437-194">789123456</span></span> |
| <span data-ttu-id="2f437-195">2</span><span class="sxs-lookup"><span data-stu-id="2f437-195">2</span></span> |<span data-ttu-id="2f437-196">2014-09-10 12:05:00.000</span><span class="sxs-lookup"><span data-stu-id="2f437-196">2014-09-10 12:05:00.000</span></span> |<span data-ttu-id="2f437-197">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="2f437-197">CDE 1007</span></span> |<span data-ttu-id="2f437-198">NJ</span><span class="sxs-lookup"><span data-stu-id="2f437-198">NJ</span></span> |<span data-ttu-id="2f437-199">Toyota</span><span class="sxs-lookup"><span data-stu-id="2f437-199">Toyota</span></span> |<span data-ttu-id="2f437-200">4 x 4</span><span class="sxs-lookup"><span data-stu-id="2f437-200">4x4</span></span> |<span data-ttu-id="2f437-201">1</span><span class="sxs-lookup"><span data-stu-id="2f437-201">1</span></span> |<span data-ttu-id="2f437-202">0</span><span class="sxs-lookup"><span data-stu-id="2f437-202">0</span></span> |<span data-ttu-id="2f437-203">6</span><span class="sxs-lookup"><span data-stu-id="2f437-203">6</span></span> |<span data-ttu-id="2f437-204">321987654</span><span class="sxs-lookup"><span data-stu-id="2f437-204">321987654</span></span> |

<span data-ttu-id="2f437-205">Aşağıda, sütunların kısa bir açıklaması verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="2f437-205">Here is a short description of the columns:</span></span>

| <span data-ttu-id="2f437-206">Sütun</span><span class="sxs-lookup"><span data-stu-id="2f437-206">Column</span></span> | <span data-ttu-id="2f437-207">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2f437-207">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2f437-208">TollID</span><span class="sxs-lookup"><span data-stu-id="2f437-208">TollID</span></span> |<span data-ttu-id="2f437-209">Ücretli Stand benzersiz olarak tanıtan Ücretli Stand kimliği</span><span class="sxs-lookup"><span data-stu-id="2f437-209">The toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="2f437-210">EntryTime</span><span class="sxs-lookup"><span data-stu-id="2f437-210">EntryTime</span></span> |<span data-ttu-id="2f437-211">Tarih ve saati UTC Ücretli Stand için araç girdisi</span><span class="sxs-lookup"><span data-stu-id="2f437-211">The date and time of entry of the vehicle to the toll booth in UTC</span></span> |
| <span data-ttu-id="2f437-212">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="2f437-212">LicensePlate</span></span> |<span data-ttu-id="2f437-213">Aracın Lisans kalıbı sayısı</span><span class="sxs-lookup"><span data-stu-id="2f437-213">The license plate number of the vehicle</span></span> |
| <span data-ttu-id="2f437-214">Durum</span><span class="sxs-lookup"><span data-stu-id="2f437-214">State</span></span> |<span data-ttu-id="2f437-215">Amerika Birleşik Devletleri bir durumda</span><span class="sxs-lookup"><span data-stu-id="2f437-215">A state in United States</span></span> |
| <span data-ttu-id="2f437-216">Yapma</span><span class="sxs-lookup"><span data-stu-id="2f437-216">Make</span></span> |<span data-ttu-id="2f437-217">Otomobil üreticisi</span><span class="sxs-lookup"><span data-stu-id="2f437-217">The manufacturer of the automobile</span></span> |
| <span data-ttu-id="2f437-218">modeli</span><span class="sxs-lookup"><span data-stu-id="2f437-218">Model</span></span> |<span data-ttu-id="2f437-219">Otomobil model numarası</span><span class="sxs-lookup"><span data-stu-id="2f437-219">The model number of the automobile</span></span> |
| <span data-ttu-id="2f437-220">VehicleType</span><span class="sxs-lookup"><span data-stu-id="2f437-220">VehicleType</span></span> |<span data-ttu-id="2f437-221">Yolcu taşıtlardan veya ticari araçları için 2 ya da 1</span><span class="sxs-lookup"><span data-stu-id="2f437-221">Either 1 for passenger vehicles or 2 for commercial vehicles</span></span> |
| <span data-ttu-id="2f437-222">WeightType</span><span class="sxs-lookup"><span data-stu-id="2f437-222">WeightType</span></span> |<span data-ttu-id="2f437-223">Araç ağırlık ton cinsinden; yolcu araçları için 0</span><span class="sxs-lookup"><span data-stu-id="2f437-223">Vehicle weight in tons; 0 for passenger vehicles</span></span> |
| <span data-ttu-id="2f437-224">Ücretli</span><span class="sxs-lookup"><span data-stu-id="2f437-224">Toll</span></span> |<span data-ttu-id="2f437-225">ABD Doları Ücretli değeri</span><span class="sxs-lookup"><span data-stu-id="2f437-225">The toll value in USD</span></span> |
| <span data-ttu-id="2f437-226">Etiket</span><span class="sxs-lookup"><span data-stu-id="2f437-226">Tag</span></span> |<span data-ttu-id="2f437-227">E-etiketinde ödeme otomatikleştirir otomobil; Ödeme el ile yapılan burada boş</span><span class="sxs-lookup"><span data-stu-id="2f437-227">The e-Tag on the automobile that automates payment; blank where the payment was done manually</span></span> |

### <a name="exit-data-stream"></a><span data-ttu-id="2f437-228">Çıkış veri akışı</span><span class="sxs-lookup"><span data-stu-id="2f437-228">Exit data stream</span></span>
<span data-ttu-id="2f437-229">Çıkış veri akışı Ücretli istasyon bırakarak araba hakkında bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="2f437-229">The exit data stream contains information about cars leaving the toll station.</span></span>

| <span data-ttu-id="2f437-230">**TollId**</span><span class="sxs-lookup"><span data-stu-id="2f437-230">**TollId**</span></span> | <span data-ttu-id="2f437-231">**ExitTime**</span><span class="sxs-lookup"><span data-stu-id="2f437-231">**ExitTime**</span></span> | <span data-ttu-id="2f437-232">**LicensePlate**</span><span class="sxs-lookup"><span data-stu-id="2f437-232">**LicensePlate**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2f437-233">1</span><span class="sxs-lookup"><span data-stu-id="2f437-233">1</span></span> |<span data-ttu-id="2f437-234">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-234">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="2f437-235">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="2f437-235">JNB 7001</span></span> |
| <span data-ttu-id="2f437-236">1</span><span class="sxs-lookup"><span data-stu-id="2f437-236">1</span></span> |<span data-ttu-id="2f437-237">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-237">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="2f437-238">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="2f437-238">YXZ 1001</span></span> |
| <span data-ttu-id="2f437-239">3</span><span class="sxs-lookup"><span data-stu-id="2f437-239">3</span></span> |<span data-ttu-id="2f437-240">2014-09-10T12:04:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-240">2014-09-10T12:04:00.0000000Z</span></span> |<span data-ttu-id="2f437-241">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="2f437-241">ABC 1004</span></span> |
| <span data-ttu-id="2f437-242">2</span><span class="sxs-lookup"><span data-stu-id="2f437-242">2</span></span> |<span data-ttu-id="2f437-243">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-243">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="2f437-244">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="2f437-244">XYZ 1003</span></span> |
| <span data-ttu-id="2f437-245">1</span><span class="sxs-lookup"><span data-stu-id="2f437-245">1</span></span> |<span data-ttu-id="2f437-246">2014-09-10T12:08:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-246">2014-09-10T12:08:00.0000000Z</span></span> |<span data-ttu-id="2f437-247">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="2f437-247">BNJ 1007</span></span> |
| <span data-ttu-id="2f437-248">2</span><span class="sxs-lookup"><span data-stu-id="2f437-248">2</span></span> |<span data-ttu-id="2f437-249">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="2f437-249">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="2f437-250">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="2f437-250">CDE 1007</span></span> |

<span data-ttu-id="2f437-251">Aşağıda, sütunların kısa bir açıklaması verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="2f437-251">Here is a short description of the columns:</span></span>

| <span data-ttu-id="2f437-252">Sütun</span><span class="sxs-lookup"><span data-stu-id="2f437-252">Column</span></span> | <span data-ttu-id="2f437-253">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2f437-253">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2f437-254">TollID</span><span class="sxs-lookup"><span data-stu-id="2f437-254">TollID</span></span> |<span data-ttu-id="2f437-255">Ücretli Stand benzersiz olarak tanıtan Ücretli Stand kimliği</span><span class="sxs-lookup"><span data-stu-id="2f437-255">The toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="2f437-256">ExitTime</span><span class="sxs-lookup"><span data-stu-id="2f437-256">ExitTime</span></span> |<span data-ttu-id="2f437-257">Aracın çıkış Ücretli Stand UTC'saat ve tarihi</span><span class="sxs-lookup"><span data-stu-id="2f437-257">The date and time of exit of the vehicle from toll booth in UTC</span></span> |
| <span data-ttu-id="2f437-258">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="2f437-258">LicensePlate</span></span> |<span data-ttu-id="2f437-259">Aracın Lisans kalıbı sayısı</span><span class="sxs-lookup"><span data-stu-id="2f437-259">The license plate number of the vehicle</span></span> |

### <a name="commercial-vehicle-registration-data"></a><span data-ttu-id="2f437-260">Ticari araç kayıt verileri</span><span class="sxs-lookup"><span data-stu-id="2f437-260">Commercial vehicle registration data</span></span>
<span data-ttu-id="2f437-261">Öğretici, bir statik veritabanının anlık görüntüsü bir ticari araç kayıt kullanır.</span><span class="sxs-lookup"><span data-stu-id="2f437-261">The tutorial uses a static snapshot of a commercial vehicle registration database.</span></span>

| <span data-ttu-id="2f437-262">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="2f437-262">LicensePlate</span></span> | <span data-ttu-id="2f437-263">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="2f437-263">RegistrationId</span></span> | <span data-ttu-id="2f437-264">Süresi dolmuş</span><span class="sxs-lookup"><span data-stu-id="2f437-264">Expired</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2f437-265">SVT 6023</span><span class="sxs-lookup"><span data-stu-id="2f437-265">SVT 6023</span></span> |<span data-ttu-id="2f437-266">285429838</span><span class="sxs-lookup"><span data-stu-id="2f437-266">285429838</span></span> |<span data-ttu-id="2f437-267">1</span><span class="sxs-lookup"><span data-stu-id="2f437-267">1</span></span> |
| <span data-ttu-id="2f437-268">XLZ 3463</span><span class="sxs-lookup"><span data-stu-id="2f437-268">XLZ 3463</span></span> |<span data-ttu-id="2f437-269">362715656</span><span class="sxs-lookup"><span data-stu-id="2f437-269">362715656</span></span> |<span data-ttu-id="2f437-270">0</span><span class="sxs-lookup"><span data-stu-id="2f437-270">0</span></span> |
| <span data-ttu-id="2f437-271">İCLOU 1005</span><span class="sxs-lookup"><span data-stu-id="2f437-271">BAC 1005</span></span> |<span data-ttu-id="2f437-272">876133137</span><span class="sxs-lookup"><span data-stu-id="2f437-272">876133137</span></span> |<span data-ttu-id="2f437-273">1</span><span class="sxs-lookup"><span data-stu-id="2f437-273">1</span></span> |
| <span data-ttu-id="2f437-274">RIV 8632</span><span class="sxs-lookup"><span data-stu-id="2f437-274">RIV 8632</span></span> |<span data-ttu-id="2f437-275">992711956</span><span class="sxs-lookup"><span data-stu-id="2f437-275">992711956</span></span> |<span data-ttu-id="2f437-276">0</span><span class="sxs-lookup"><span data-stu-id="2f437-276">0</span></span> |
| <span data-ttu-id="2f437-277">SNY 7188</span><span class="sxs-lookup"><span data-stu-id="2f437-277">SNY 7188</span></span> |<span data-ttu-id="2f437-278">592133890</span><span class="sxs-lookup"><span data-stu-id="2f437-278">592133890</span></span> |<span data-ttu-id="2f437-279">0</span><span class="sxs-lookup"><span data-stu-id="2f437-279">0</span></span> |
| <span data-ttu-id="2f437-280">ELH 9896</span><span class="sxs-lookup"><span data-stu-id="2f437-280">ELH 9896</span></span> |<span data-ttu-id="2f437-281">678427724</span><span class="sxs-lookup"><span data-stu-id="2f437-281">678427724</span></span> |<span data-ttu-id="2f437-282">1</span><span class="sxs-lookup"><span data-stu-id="2f437-282">1</span></span> |

<span data-ttu-id="2f437-283">Aşağıda, sütunların kısa bir açıklaması verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="2f437-283">Here is a short description of the columns:</span></span>

| <span data-ttu-id="2f437-284">Sütun</span><span class="sxs-lookup"><span data-stu-id="2f437-284">Column</span></span> | <span data-ttu-id="2f437-285">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2f437-285">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2f437-286">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="2f437-286">LicensePlate</span></span> |<span data-ttu-id="2f437-287">Aracın Lisans kalıbı sayısı</span><span class="sxs-lookup"><span data-stu-id="2f437-287">The license plate number of the vehicle</span></span> |
| <span data-ttu-id="2f437-288">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="2f437-288">RegistrationId</span></span> |<span data-ttu-id="2f437-289">Aracın 's kayıt kimliği</span><span class="sxs-lookup"><span data-stu-id="2f437-289">The vehicle's registration ID</span></span> |
| <span data-ttu-id="2f437-290">Süresi dolmuş</span><span class="sxs-lookup"><span data-stu-id="2f437-290">Expired</span></span> |<span data-ttu-id="2f437-291">Aracın kayıt durumunu: araç kayıt etkinse 0 kayıt süresi 1</span><span class="sxs-lookup"><span data-stu-id="2f437-291">The registration status of the vehicle: 0 if vehicle registration is active, 1 if registration is expired</span></span> |

## <a name="set-up-the-environment-for-azure-stream-analytics"></a><span data-ttu-id="2f437-292">Azure akış analizi için ortamını ayarlama</span><span class="sxs-lookup"><span data-stu-id="2f437-292">Set up the environment for Azure Stream Analytics</span></span>
<span data-ttu-id="2f437-293">Bu öğreticiyi tamamlamak için bir Microsoft Azure aboneliği gerekir.</span><span class="sxs-lookup"><span data-stu-id="2f437-293">To complete this tutorial, you need a Microsoft Azure subscription.</span></span> <span data-ttu-id="2f437-294">Microsoft, ücretsiz deneme sürümü için Microsoft Azure hizmetleri sunar.</span><span class="sxs-lookup"><span data-stu-id="2f437-294">Microsoft offers free trial for Microsoft Azure services.</span></span>

<span data-ttu-id="2f437-295">Bir Azure hesabınız yoksa, şunları yapabilirsiniz [ücretsiz deneme sürümü isteği](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="2f437-295">If you do not have an Azure account, you can [request a free trial version](http://azure.microsoft.com/pricing/free-trial/).</span></span>

> [!NOTE]
> <span data-ttu-id="2f437-296">Ücretsiz deneme için kaydolun metin iletileri ve geçerli bir kredi kartı alabileceği bir mobil aygıtı gerekir.</span><span class="sxs-lookup"><span data-stu-id="2f437-296">To sign up for a free trial, you need a mobile device that can receive text messages and a valid credit card.</span></span>
> 
> 

<span data-ttu-id="2f437-297">Böylece Azure kredi en iyi kullanımı yapabilirsiniz bu makalenin sonunda "Azure hesabınızı temizleme" bölümündeki adımları takip ettiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="2f437-297">Be sure to follow the steps in the “Clean up your Azure account” section at the end of this article so that you can make the best use of your Azure credit.</span></span>

## <a name="provision-azure-resources-required-for-the-tutorial"></a><span data-ttu-id="2f437-298">Öğretici için gerekli Azure kaynaklarını hazırlama</span><span class="sxs-lookup"><span data-stu-id="2f437-298">Provision Azure resources required for the tutorial</span></span>
<span data-ttu-id="2f437-299">Bu öğretici almak için iki olay hub gerektirir *girişi* ve *çıkmak* veri akışları.</span><span class="sxs-lookup"><span data-stu-id="2f437-299">This tutorial requires two event hubs to receive *entry* and *exit* data streams.</span></span> <span data-ttu-id="2f437-300">Azure SQL veritabanı Stream Analytics işlerine sonuçlarını çıkarır.</span><span class="sxs-lookup"><span data-stu-id="2f437-300">Azure SQL Database outputs the results of the Stream Analytics jobs.</span></span> <span data-ttu-id="2f437-301">Azure depolama araç kayıtlar hakkında başvuru verileri depolar.</span><span class="sxs-lookup"><span data-stu-id="2f437-301">Azure Storage stores reference data about vehicle registrations.</span></span>

<span data-ttu-id="2f437-302">Tüm gerekli kaynakları oluşturmak için GitHub TollApp klasöründe Setup.ps1 komut dosyasını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-302">You can use the Setup.ps1 script in the TollApp folder on GitHub to create all required resources.</span></span> <span data-ttu-id="2f437-303">Zaman açısından bu çalıştırmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="2f437-303">In the interest of time, we recommend that you run it.</span></span> <span data-ttu-id="2f437-304">Bu kaynakları Azure portalında yapılandırma hakkında daha fazla bilgi edinmek istiyorsanız, "Azure portalında öğretici kaynaklarını yapılandırma" eke bakın.</span><span class="sxs-lookup"><span data-stu-id="2f437-304">If you would like to learn more about how to configure these resources in the Azure portal, refer to the “Configuring tutorial resources in Azure portal” appendix.</span></span>

<span data-ttu-id="2f437-305">Karşıdan yükle ve destekleyici Kaydet [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) klasör ve dosyaları.</span><span class="sxs-lookup"><span data-stu-id="2f437-305">Download and save the supporting [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) folder and files.</span></span>

<span data-ttu-id="2f437-306">Açık bir **Microsoft Azure PowerShell** penceresi *yönetici olarak*.</span><span class="sxs-lookup"><span data-stu-id="2f437-306">Open a **Microsoft Azure PowerShell** window *as an administrator*.</span></span> <span data-ttu-id="2f437-307">Azure PowerShell henüz yoksa,'ndaki yönergeleri izleyin [Azure PowerShell'i yükleme ve yapılandırma](/powershell/azure/overview) yükleyin.</span><span class="sxs-lookup"><span data-stu-id="2f437-307">If you do not yet have Azure PowerShell, follow the instructions in [Install and configure Azure PowerShell](/powershell/azure/overview) to install it.</span></span>

<span data-ttu-id="2f437-308">Windows otomatik olarak .ps1, .dll ve .exe dosyaları engellediğinden, komut dosyasını çalıştırmadan önce yürütme ilkesini ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2f437-308">Because Windows automatically blocks .ps1, .dll, and .exe files, you need to set the execution policy before you run the script.</span></span> <span data-ttu-id="2f437-309">Azure PowerShell penceresi çalıştığından emin olun *yönetici olarak*.</span><span class="sxs-lookup"><span data-stu-id="2f437-309">Make sure the Azure PowerShell window is running *as an administrator*.</span></span> <span data-ttu-id="2f437-310">Çalıştırma **Set-ExecutionPolicy unrestricted**.</span><span class="sxs-lookup"><span data-stu-id="2f437-310">Run **Set-ExecutionPolicy unrestricted**.</span></span> <span data-ttu-id="2f437-311">İstendiğinde yazın **Y**.</span><span class="sxs-lookup"><span data-stu-id="2f437-311">When prompted, type **Y**.</span></span>

!["Set-Kısıtlanmamış Azure PowerShell penceresinde çalıştıran ExecutionPolicy" ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image2.png)

<span data-ttu-id="2f437-313">Çalıştırma **Get-ExecutionPolicy** komutu çalıştığından emin olmak için.</span><span class="sxs-lookup"><span data-stu-id="2f437-313">Run **Get-ExecutionPolicy** to make sure that the command worked.</span></span>

!["Get-ExecutionPolicy Azure PowerShell penceresinde Çalıştırma" ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image3.png)

<span data-ttu-id="2f437-315">Komut dosyaları ve oluşturucu uygulama sahip dizinine gidin.</span><span class="sxs-lookup"><span data-stu-id="2f437-315">Go to the directory that has the scripts and generator application.</span></span>

!["Azure PowerShell penceresinde çalıştıran cd .\TollApp\TollApp" ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image4.png)

<span data-ttu-id="2f437-317">Tür **.\\ Setup.ps1** Azure hesabınızı kurmak için oluşturmak ve gerekli tüm kaynaklarını yapılandırmak ve olayları Başlat.</span><span class="sxs-lookup"><span data-stu-id="2f437-317">Type **.\\Setup.ps1** to set up your Azure account, create and configure all required resources, and start to generate events.</span></span> <span data-ttu-id="2f437-318">Komut dosyasını bir bölgesini kaynaklarınızı oluşturmak için rastgele seçer.</span><span class="sxs-lookup"><span data-stu-id="2f437-318">The script randomly picks up a region to create your resources.</span></span> <span data-ttu-id="2f437-319">Bir bölge açıkça belirtmek için geçirebilirsiniz **-konum** aşağıdaki örnekteki gibi parametre:</span><span class="sxs-lookup"><span data-stu-id="2f437-319">To explicitly specify a region, you can pass the **-location** parameter as in the following example:</span></span>

<span data-ttu-id="2f437-320">**. \\Setup.ps1-konum "Orta ABD"**</span><span class="sxs-lookup"><span data-stu-id="2f437-320">**.\\Setup.ps1 -location “Central US”**</span></span>

![Azure oturum açma sayfasının ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image5.png)

<span data-ttu-id="2f437-322">Komut dosyasını açar **oturum** Microsoft Azure için sayfa.</span><span class="sxs-lookup"><span data-stu-id="2f437-322">The script opens the **Sign In** page for Microsoft Azure.</span></span> <span data-ttu-id="2f437-323">Hesap kimlik bilgilerinizi girin.</span><span class="sxs-lookup"><span data-stu-id="2f437-323">Enter your account credentials.</span></span>

> [!NOTE]
> <span data-ttu-id="2f437-324">Birden çok abonelik hesabınıza erişimi varsa öğretici için kullanmak istediğiniz abonelik adı girmeniz istenir.</span><span class="sxs-lookup"><span data-stu-id="2f437-324">If your account has access to multiple subscriptions, you will be asked to enter the subscription name that you want to use for the tutorial.</span></span>
> 
> 

<span data-ttu-id="2f437-325">Komut dosyasını çalıştırmak için birkaç dakika sürebilir.</span><span class="sxs-lookup"><span data-stu-id="2f437-325">The script can take several minutes to run.</span></span> <span data-ttu-id="2f437-326">Sona erdikten sonra çıkışı aşağıdaki ekran görüntüsü gibi görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="2f437-326">After it finishes, the output should look like the following screenshot.</span></span>

![Azure PowerShell penceresinde komut dosyası çıkışını ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image6.PNG)

<span data-ttu-id="2f437-328">Ayrıca, aşağıdaki ekran görüntüsüne benzer başka bir pencere görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="2f437-328">You will also see another window that's similar to the following screenshot.</span></span> <span data-ttu-id="2f437-329">Bu uygulamayı Azure Event öğretici çalıştırmak için gerekli olan Hubs'a, olayları gönderiyor.</span><span class="sxs-lookup"><span data-stu-id="2f437-329">This application is sending events to Azure Event Hubs, which is required to run the tutorial.</span></span> <span data-ttu-id="2f437-330">Bu nedenle, uygulamayı durdurun veya değil öğretici tamamlanana kadar bu pencereyi kapatın.</span><span class="sxs-lookup"><span data-stu-id="2f437-330">So, do not stop the application or close this window until you finish the tutorial.</span></span>

!["Gönderme olay hub'ı veri" ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image7.png)

<span data-ttu-id="2f437-332">Artık Azure portalında kaynaklarınızı görüyor olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="2f437-332">You should be able to see your resources in Azure portal now.</span></span> <span data-ttu-id="2f437-333">Git <https://portal.azure.com>ve hesabı kimlik bilgilerinizle oturum açın.</span><span class="sxs-lookup"><span data-stu-id="2f437-333">Go to <https://portal.azure.com>, and sign in with your account credentials.</span></span> <span data-ttu-id="2f437-334">Şu anda bazı işlevler Klasik Portalı'nı kullanan olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-334">Note that currently some functionality utilizes the classic portal.</span></span> <span data-ttu-id="2f437-335">Bu adımları açıkça gösterilir.</span><span class="sxs-lookup"><span data-stu-id="2f437-335">These steps will be clearly indicated.</span></span>

### <a name="azure-event-hubs"></a><span data-ttu-id="2f437-336">Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2f437-336">Azure Event Hubs</span></span>
<span data-ttu-id="2f437-337">Azure portalında tıklatın **daha fazla hizmet** sol yönetim bölmesinin üzerinde.</span><span class="sxs-lookup"><span data-stu-id="2f437-337">In the Azure portal, click **More services** on the bottom of the left management pane.</span></span> <span data-ttu-id="2f437-338">Tür **olay hub'ları** alanında sağlanan ve tıklayın **olay hub'ları**.</span><span class="sxs-lookup"><span data-stu-id="2f437-338">Type **Event hubs** in the field provided and click **Event hubs**.</span></span> <span data-ttu-id="2f437-339">Bu görüntülemek için yeni bir tarayıcı penceresi başlatır **SERVICE BUS** alanında **Klasik portal**.</span><span class="sxs-lookup"><span data-stu-id="2f437-339">This launches a new browser window to display the **SERVICE BUS** area in the **classic portal**.</span></span> <span data-ttu-id="2f437-340">Burada Setup.ps1 komut dosyası tarafından oluşturulan olay hub'ı görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-340">Here you can see the Event Hub created by the Setup.ps1 script.</span></span>

![Service Bus](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image8.png)

<span data-ttu-id="2f437-342">İle başlayan tıklatın *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="2f437-342">Click the one that starts with *tolldata*.</span></span> <span data-ttu-id="2f437-343">Tıklatın **olay hub'ları** sekmesi. Adlı iki olay hub görürsünüz *girişi* ve *çıkmak* bu ad alanında oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="2f437-343">Click the **EVENT HUBS** tab. You will see two event hubs named *entry* and *exit* created in this namespace.</span></span>

![Klasik Portalı'nda olay hub'ları sekmesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image9.png)

### <a name="azure-storage-container"></a><span data-ttu-id="2f437-345">Azure depolama kapsayıcısı</span><span class="sxs-lookup"><span data-stu-id="2f437-345">Azure Storage container</span></span>
1. <span data-ttu-id="2f437-346">Azure portalına, tarayıcı Open sekmesine geri dönün.</span><span class="sxs-lookup"><span data-stu-id="2f437-346">Go back to the tab in your browser open to Azure portal.</span></span> <span data-ttu-id="2f437-347">Tıklatın **depolama** öğreticide kullanılan Azure depolama kapsayıcısının görmek için Azure portalının sol tarafında.</span><span class="sxs-lookup"><span data-stu-id="2f437-347">Click **STORAGE** on the left side of the Azure portal to see the Azure Storage container that's used in the tutorial.</span></span>
   
    ![Depolama menü öğesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image11.png)
2. <span data-ttu-id="2f437-349">İle başlayan tıklatın *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="2f437-349">Click the one that start with *tolldata*.</span></span> <span data-ttu-id="2f437-350">Tıklatın **KAPSAYICILARI** oluşturulan kapsayıcı görmek için sekmesini.</span><span class="sxs-lookup"><span data-stu-id="2f437-350">Click the **CONTAINERS** tab to see the created container.</span></span>
   
    ![Azure portalında kapsayıcıları sekmesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image10.png)
3. <span data-ttu-id="2f437-352">Tıklatın **tolldata** araç kayıt verileri karşıya yüklenen JSON dosyaları görmek için kapsayıcı.</span><span class="sxs-lookup"><span data-stu-id="2f437-352">Click the **tolldata** container to see the uploaded JSON file that has vehicle registration data.</span></span>
   
    ![Kapsayıcı registration.json dosyasında ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image12.png)

### <a name="azure-sql-database"></a><span data-ttu-id="2f437-354">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="2f437-354">Azure SQL Database</span></span>
1. <span data-ttu-id="2f437-355">Tarayıcıda açılan ilk sekme Azure Portalı'na geri gidin.</span><span class="sxs-lookup"><span data-stu-id="2f437-355">Go back to the Azure portal on the first tab that was opened in the browser.</span></span> <span data-ttu-id="2f437-356">Tıklatın **SQL veritabanları** öğreticide kullanılır ve SQL veritabanı görmek için Azure portalının sol tarafında **tolldatadb**.</span><span class="sxs-lookup"><span data-stu-id="2f437-356">Click **SQL DATABASES** on the left side of the Azure portal to see the SQL database that will be used in the tutorial and click **tolldatadb**.</span></span>
   
    ![SQL veritabanı oluşturuldu ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15.png)
2. <span data-ttu-id="2f437-358">Sunucu adı bağlantı noktası numarası olmadan kopyalayın (*servername*. Örneğin database.windows.net).</span><span class="sxs-lookup"><span data-stu-id="2f437-358">Copy the server name without the port number (*servername*.database.windows.net, for example).</span></span>
    <span data-ttu-id="2f437-359">![Oluşturulan SQL veritabanı db ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span><span class="sxs-lookup"><span data-stu-id="2f437-359">![Screenshot of the created SQL database db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span></span>

## <a name="connect-to-the-database-from-visual-studio"></a><span data-ttu-id="2f437-360">Visual Studio'dan veritabanına bağlan</span><span class="sxs-lookup"><span data-stu-id="2f437-360">Connect to the database from Visual Studio</span></span>
<span data-ttu-id="2f437-361">Visual Studio çıktı veritabanı sorgu sonuçlarında erişmek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="2f437-361">Use Visual Studio to access query results in the output database.</span></span>

<span data-ttu-id="2f437-362">Visual Studio'dan (hedef) SQL veritabanına bağlan:</span><span class="sxs-lookup"><span data-stu-id="2f437-362">Connect to the SQL database (the destination) from Visual Studio:</span></span>

1. <span data-ttu-id="2f437-363">Visual Studio'yu açın ve ardından **Araçları** > **veritabanına bağlan**.</span><span class="sxs-lookup"><span data-stu-id="2f437-363">Open Visual Studio, and then click **Tools** > **Connect to Database**.</span></span>
2. <span data-ttu-id="2f437-364">İstenirse, tıklatın **Microsoft SQL Server** veri kaynağı olarak.</span><span class="sxs-lookup"><span data-stu-id="2f437-364">If asked, click **Microsoft SQL Server** as a data source.</span></span>
   
    ![Değişikliği veri kaynağı iletişim kutusu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image16.png)
3. <span data-ttu-id="2f437-366">İçinde **sunucu adı** alanında, önceki bölümde Azure portalından kopyalandığından adını yapıştırın (diğer bir deyişle, *servername*. database.windows.net).</span><span class="sxs-lookup"><span data-stu-id="2f437-366">In the **Server name** field, paste the name that you copied in the previous section from the Azure portal (that is, *servername*.database.windows.net).</span></span>
4. <span data-ttu-id="2f437-367">Tıklatın **SQL Server kimlik doğrulaması kullanmak**.</span><span class="sxs-lookup"><span data-stu-id="2f437-367">Click **Use SQL Server Authentication**.</span></span>
5. <span data-ttu-id="2f437-368">Girin **tolladmin** içinde **kullanıcı adı** alan ve **123toll!**</span><span class="sxs-lookup"><span data-stu-id="2f437-368">Enter **tolladmin** in the **User name** field and **123toll!**</span></span> <span data-ttu-id="2f437-369">içinde **parola** alan.</span><span class="sxs-lookup"><span data-stu-id="2f437-369">in the **Password** field.</span></span>
6. <span data-ttu-id="2f437-370">Tıklatın **seçin veya bir veritabanı adı girin**seçip **TollDataDB** veritabanı olarak.</span><span class="sxs-lookup"><span data-stu-id="2f437-370">Click **Select or enter a database name**, and select **TollDataDB** as the database.</span></span>
   
    ![Bağlantı Ekle iletişim kutusu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image17.jpg)
7. <span data-ttu-id="2f437-372">**Tamam** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-372">Click **OK**.</span></span>
8. <span data-ttu-id="2f437-373">Sunucu Gezgini'ni açın.</span><span class="sxs-lookup"><span data-stu-id="2f437-373">Open Server Explorer.</span></span>
   
    ![Sunucu Gezgini](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image18.png)
9. <span data-ttu-id="2f437-375">TollDataDB veritabanında dört tablolara bakın.</span><span class="sxs-lookup"><span data-stu-id="2f437-375">See four tables in the TollDataDB database.</span></span>
   
    ![TollDataDB veritabanındaki tabloları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image19.jpg)

## <a name="event-generator-tollapp-sample-project"></a><span data-ttu-id="2f437-377">Olay Oluşturucusu: TollApp örnek proje</span><span class="sxs-lookup"><span data-stu-id="2f437-377">Event generator: TollApp sample project</span></span>
<span data-ttu-id="2f437-378">PowerShell Betiği TollApp örnek uygulama programı kullanarak olayları göndermek otomatik olarak başlar.</span><span class="sxs-lookup"><span data-stu-id="2f437-378">The PowerShell script automatically starts to send events by using the TollApp sample application program.</span></span> <span data-ttu-id="2f437-379">Ek adımlar gerçekleştirmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="2f437-379">You don’t need to perform any additional steps.</span></span>

<span data-ttu-id="2f437-380">Uygulama Ayrıntıları ilgileniyorsanız, ancak TollApp uygulamanın kaynak kodu Github'da bulabilirsiniz [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span><span class="sxs-lookup"><span data-stu-id="2f437-380">However, if you are interested in implementation details, you can find the source code of the TollApp application in GitHub [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span></span>

![Visual Studio'da görüntülenen örnek kodunu ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image20.png)

## <a name="create-a-stream-analytics-job"></a><span data-ttu-id="2f437-382">Akış Analizi işi oluşturma</span><span class="sxs-lookup"><span data-stu-id="2f437-382">Create a Stream Analytics job</span></span>
1. <span data-ttu-id="2f437-383">Azure portalında yeni bir Stream Analytics işi oluşturmak için sayfanın sol üst köşedeki yeşil artı işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-383">In the Azure portal, click the green plus sign in the top-left corner of the page to create a new Stream Analytics job.</span></span> <span data-ttu-id="2f437-384">Seçin **Intelligence + analiz** ve ardından **Stream Analytics işi**.</span><span class="sxs-lookup"><span data-stu-id="2f437-384">Select **Intelligence + Analytics** and then click **Stream Analytics job**.</span></span>
   
    ![Yeni düğmesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image21.png)
2. <span data-ttu-id="2f437-386">Bir iş adı sağlayın, abonelik doğrulama düzeltin ve sonra olay hub'ı depolama ile aynı bölgede yeni bir kaynak grubu oluşturun (varsayılan, Orta Güney ABD komut dosyası için).</span><span class="sxs-lookup"><span data-stu-id="2f437-386">Provide a job name, validate the subscription is correct and then create a new Resource group in the same region as the Event hub storage (default is South Central US for the script).</span></span>
3. <span data-ttu-id="2f437-387">Tıklatın **panoya Sabitle** ve ardından **oluşturma** sayfanın sonundaki.</span><span class="sxs-lookup"><span data-stu-id="2f437-387">Click **Pin to dashboard** and then **CREATE** at the bottom of the page.</span></span>
   
    ![Akış analizi işi seçeneği oluşturun](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image22.png)

## <a name="define-input-sources"></a><span data-ttu-id="2f437-389">Giriş kaynağı tanımlayın</span><span class="sxs-lookup"><span data-stu-id="2f437-389">Define input sources</span></span>
1. <span data-ttu-id="2f437-390">İşi oluşturmak ve işi sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="2f437-390">The job will create and open the job page.</span></span> <span data-ttu-id="2f437-391">Veya portal panosunda oluşturulan analizi işi'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="2f437-391">Or you can click the created analytics job on the portal dashboard.</span></span>

2. <span data-ttu-id="2f437-392">Tıklatın **GİRİŞLERİ** veri kaynağını tanımlamak için sekmesini.</span><span class="sxs-lookup"><span data-stu-id="2f437-392">Click the **INPUTS** tab to define the source data.</span></span>
   
    ![Giriş sekmesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image24.png)
3. <span data-ttu-id="2f437-394">Tıklatın **bir giriş eklemek**.</span><span class="sxs-lookup"><span data-stu-id="2f437-394">Click **ADD AN INPUT**.</span></span>
   
    ![Bir giriş seçeneği Ekle](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image25.png)
4. <span data-ttu-id="2f437-396">Girin **EntryStream** olarak **giriş diğer adı**.</span><span class="sxs-lookup"><span data-stu-id="2f437-396">Enter **EntryStream** as **INPUT ALIAS**.</span></span>
5. <span data-ttu-id="2f437-397">Kaynak türü **veri akışı**</span><span class="sxs-lookup"><span data-stu-id="2f437-397">Source Type is **Data Stream**</span></span>
6. <span data-ttu-id="2f437-398">Kaynak **olay hub'ı**.</span><span class="sxs-lookup"><span data-stu-id="2f437-398">Source is **Event hub**.</span></span>
7. <span data-ttu-id="2f437-399">**Hizmet veri yolu ad alanı** aşağı açılan TollData biri olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="2f437-399">**Service bus namespace** should be the TollData one in the drop down.</span></span>
8. <span data-ttu-id="2f437-400">**Olay hub'ı adı** ayarlanmalı **girişi**.</span><span class="sxs-lookup"><span data-stu-id="2f437-400">**Event hub name** should be set to **entry**.</span></span>
9. <span data-ttu-id="2f437-401">**Olay hub'ı ilke adı*olan **RootManageSharedAccessKey** (varsayılan değer).</span><span class="sxs-lookup"><span data-stu-id="2f437-401">**Event hub policy name*is **RootManageSharedAccessKey**  (the default value).</span></span>
10. <span data-ttu-id="2f437-402">Seçin **JSON** için **OLAYI seri hale getirme biçimi** ve **UTF8** için **kodlama**.</span><span class="sxs-lookup"><span data-stu-id="2f437-402">Select **JSON** for **EVENT SERIALIZATION FORMAT** and **UTF8** for **ENCODING**.</span></span>
   
    <span data-ttu-id="2f437-403">Ayarlarınızı gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="2f437-403">Your settings will look like:</span></span>
   
    ![Olay hub'ı ayarları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image28.png)

10. <span data-ttu-id="2f437-405">Tıklatın **oluşturma** Sihirbazı tamamlamak için sayfanın altındaki.</span><span class="sxs-lookup"><span data-stu-id="2f437-405">Click **Create** at the bottom of the page to finish the wizard.</span></span>
    
    <span data-ttu-id="2f437-406">Giriş akışı oluşturduğunuza göre çıkış akışı oluşturmak için aynı adımları izleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-406">Now that you've created the entry stream, you will follow the same steps to create the exit stream.</span></span> <span data-ttu-id="2f437-407">Aşağıdaki ekran görüntüsü üzerinde değerleri olarak girdiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="2f437-407">Be sure to enter values as on the following screenshot.</span></span>
    
    ![Çıkış akışı için ayarları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image31.png)
    
    <span data-ttu-id="2f437-409">İki giriş akışları tanımladınız:</span><span class="sxs-lookup"><span data-stu-id="2f437-409">You have defined two input streams:</span></span>
    
    ![Azure Portalı'nda tanımlanan giriş akışları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image32.png)
    
    <span data-ttu-id="2f437-411">Sonra başvuru veri girişi araba kayıt verileri içeren blob dosyası için ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-411">Next, you will add reference data input for the blob file that contains car registration data.</span></span>
11. <span data-ttu-id="2f437-412">Tıklatın **ekleme**ve ardından akış girişleri için aynı süreci izleyin ancak seçin **başvuru verileri** yerine **veri akışı** ve **giriş diğer adı** olan **kayıt**.</span><span class="sxs-lookup"><span data-stu-id="2f437-412">Click **ADD**, and then follow the same process for the stream inputs but select **REFERENCE DATA** instead of **Data Stream** and the **Input Alias** is **Registration**.</span></span>

12. <span data-ttu-id="2f437-413">ile başlayan depolama hesabı **tolldata**.</span><span class="sxs-lookup"><span data-stu-id="2f437-413">storage account that starts with **tolldata**.</span></span> <span data-ttu-id="2f437-414">Kapsayıcı adı olmalıdır **tolldata**ve **yol DESENİ** olmalıdır **registration.json**.</span><span class="sxs-lookup"><span data-stu-id="2f437-414">The container name should be **tolldata**, and the **PATH PATTERN** should be **registration.json**.</span></span> <span data-ttu-id="2f437-415">Bu dosya adı büyük/küçük harfe duyarlıdır ve olmalıdır **küçük**.</span><span class="sxs-lookup"><span data-stu-id="2f437-415">This file name is case sensitive and should be **lowercase**.</span></span>
    
    ![Blog depolama ayarları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image34.png)
13. <span data-ttu-id="2f437-417">Tıklatın **oluşturma** Sihirbazı tamamlamak için.</span><span class="sxs-lookup"><span data-stu-id="2f437-417">Click **Create** to finish the wizard.</span></span>

<span data-ttu-id="2f437-418">Şimdi tüm girişleri tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="2f437-418">Now all inputs are defined.</span></span>

## <a name="define-output"></a><span data-ttu-id="2f437-419">Çıktı tanımlayın</span><span class="sxs-lookup"><span data-stu-id="2f437-419">Define output</span></span>
1. <span data-ttu-id="2f437-420">Akış analizi işi'ne genel bakış bölmesinde seçin **ÇIKIŞLARI**.</span><span class="sxs-lookup"><span data-stu-id="2f437-420">On the Stream Analytics job overview pane, select **OUTPUTS**.</span></span>
   
    !["Çıktı Ekle" seçeneğini ve Çıkış sekmesi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image37.png)
2. <span data-ttu-id="2f437-422">**Ekle**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-422">Click **Add**.</span></span>
3. <span data-ttu-id="2f437-423">Ayarlama **çıkış diğer adları** 'output' için ve ardından **havuzu** için **SQL veritabanı**.</span><span class="sxs-lookup"><span data-stu-id="2f437-423">Set the **Output alias** to 'output' and then **Sink** to **SQL database**.</span></span>
3. <span data-ttu-id="2f437-424">Makalenin "Bağlanmak için veritabanı gelen Visual Studio" bölümünde kullanılan sunucu adını seçin.</span><span class="sxs-lookup"><span data-stu-id="2f437-424">Select the server name that was used in the “Connect to Database from Visual Studio” section of the article.</span></span> <span data-ttu-id="2f437-425">Veritabanı adı **TollDataDB**.</span><span class="sxs-lookup"><span data-stu-id="2f437-425">The database name is **TollDataDB**.</span></span>
4. <span data-ttu-id="2f437-426">Girin **tolladmin** içinde **kullanıcıadı** alanı **123toll!**</span><span class="sxs-lookup"><span data-stu-id="2f437-426">Enter **tolladmin** in the **USERNAME** field, **123toll!**</span></span> <span data-ttu-id="2f437-427">içinde **parola** alan ve **TollDataRefJoin** içinde **tablo** alan.</span><span class="sxs-lookup"><span data-stu-id="2f437-427">in the **PASSWORD** field, and **TollDataRefJoin** in the **TABLE** field.</span></span>
   
    ![SQL veritabanı ayarları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image38.png)
5. <span data-ttu-id="2f437-429">**Oluştur**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-429">Click **Create**.</span></span>

## <a name="azure-stream-analytics-query"></a><span data-ttu-id="2f437-430">Azure Stream analytics sorgusu</span><span class="sxs-lookup"><span data-stu-id="2f437-430">Azure Stream analytics query</span></span>
<span data-ttu-id="2f437-431">**Sorgu** sekmesi gelen verileri dönüştüren bir SQL sorgusu içerir.</span><span class="sxs-lookup"><span data-stu-id="2f437-431">The **QUERY** tab contains a SQL query that transforms the incoming data.</span></span>

![Sorgu sekmesi eklenen bir sorgu](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image39.png)

<span data-ttu-id="2f437-433">Bu öğretici, Azure akış analizi ilgili yanıt sağlamak için kullanılabilir verileri ve yapıları Stream Analytics sorgu hat ilgili birkaç iş soruları yanıtlamak çalışır.</span><span class="sxs-lookup"><span data-stu-id="2f437-433">This tutorial attempts to answer several business questions that are related to toll data and constructs Stream Analytics queries that can be used in Azure Stream Analytics to provide a relevant answer.</span></span>

<span data-ttu-id="2f437-434">İlk Stream Analytics işiniz başlamadan önce bazı senaryolar ve sorgu söz dizimi inceleyelim.</span><span class="sxs-lookup"><span data-stu-id="2f437-434">Before you start your first Stream Analytics job, let’s explore a few scenarios and the query syntax.</span></span>

## <a name="introduction-to-azure-stream-analytics-query-language"></a><span data-ttu-id="2f437-435">Azure Stream Analytics sorgu dili giriş</span><span class="sxs-lookup"><span data-stu-id="2f437-435">Introduction to Azure Stream Analytics query language</span></span>
- - -
<span data-ttu-id="2f437-436">Ücretli Stand girin taşıtlardan sayısını gerektiğini varsayalım.</span><span class="sxs-lookup"><span data-stu-id="2f437-436">Let’s say that you need to count the number of vehicles that enter a toll booth.</span></span> <span data-ttu-id="2f437-437">Bu olayların sürekli akışı olduğundan, bir "süre." tanımlamak zorunda</span><span class="sxs-lookup"><span data-stu-id="2f437-437">Because this is a continuous stream of events, you have to define a “period of time.”</span></span> <span data-ttu-id="2f437-438">"Kaç taşıtlardan üç dakikada Ücretli Stand girin?" olarak soru değiştirelim.</span><span class="sxs-lookup"><span data-stu-id="2f437-438">Let's modify the question to be “How many vehicles enter a toll booth every three minutes?”.</span></span> <span data-ttu-id="2f437-439">Bu genellikle dönen sayım olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="2f437-439">This is commonly referred to as the tumbling count.</span></span>

<span data-ttu-id="2f437-440">Bu soruya yanıt veren Azure akış analizi sorgu bakalım:</span><span class="sxs-lookup"><span data-stu-id="2f437-440">Let’s look at the Azure Stream Analytics query that answers this question:</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*) AS Count
    FROM EntryStream TIMESTAMP BY EntryTime
    GROUP BY TUMBLINGWINDOW(minute, 3), TollId

<span data-ttu-id="2f437-441">Gördüğünüz gibi Azure akış analizi gibi SQL ve sorgu zaman ilgili yönlerini belirlemek için birkaç uzantıları ekler bir sorgu dili kullanır.</span><span class="sxs-lookup"><span data-stu-id="2f437-441">As you can see, Azure Stream Analytics uses a query language that's like SQL and adds a few extensions to specify time-related aspects of the query.</span></span>

<span data-ttu-id="2f437-442">Hakkında daha fazla ayrıntı için okuma [zaman Yönetimi](https://msdn.microsoft.com/library/azure/mt582045.aspx) ve [Pencereleme](https://msdn.microsoft.com/library/azure/dn835019.aspx) MSDN'den sorguda kullanılan yapılar.</span><span class="sxs-lookup"><span data-stu-id="2f437-442">For more details, read about [Time Management](https://msdn.microsoft.com/library/azure/mt582045.aspx) and [Windowing](https://msdn.microsoft.com/library/azure/dn835019.aspx) constructs used in the query from MSDN.</span></span>

## <a name="testing-azure-stream-analytics-queries"></a><span data-ttu-id="2f437-443">Azure Stream Analytics sorgu test etme</span><span class="sxs-lookup"><span data-stu-id="2f437-443">Testing Azure Stream Analytics queries</span></span>
<span data-ttu-id="2f437-444">İlk Azure akış analizi sorgu yazılmış, TollApp klasörü şu yol içinde yer alan örnek veri dosyalarını kullanarak test etmek için zamanı:</span><span class="sxs-lookup"><span data-stu-id="2f437-444">Now that you have written your first Azure Stream Analytics query, it is time to test it by using sample data files located in your TollApp folder in the following path:</span></span>

<span data-ttu-id="2f437-445">**.. \\TollApp\\TollApp\\veri**</span><span class="sxs-lookup"><span data-stu-id="2f437-445">**..\\TollApp\\TollApp\\Data**</span></span>

<span data-ttu-id="2f437-446">Bu klasör, aşağıdaki dosyaları içerir:</span><span class="sxs-lookup"><span data-stu-id="2f437-446">This folder contains the following files:</span></span>

* <span data-ttu-id="2f437-447">Entry.JSON</span><span class="sxs-lookup"><span data-stu-id="2f437-447">Entry.json</span></span>
* <span data-ttu-id="2f437-448">Exit.JSON</span><span class="sxs-lookup"><span data-stu-id="2f437-448">Exit.json</span></span>
* <span data-ttu-id="2f437-449">Registration.JSON</span><span class="sxs-lookup"><span data-stu-id="2f437-449">Registration.json</span></span>

## <a name="question-1-number-of-vehicles-entering-a-toll-booth"></a><span data-ttu-id="2f437-450">Soru 1: Ücretli Stand girme taşıtlardan sayısı</span><span class="sxs-lookup"><span data-stu-id="2f437-450">Question 1: Number of vehicles entering a toll booth</span></span>
1. <span data-ttu-id="2f437-451">Azure Portalı'nı açın ve oluşturulan Azure Stream Analytics işiniz gidin.</span><span class="sxs-lookup"><span data-stu-id="2f437-451">Open the Azure portal and go to your created Azure Stream Analytics job.</span></span> <span data-ttu-id="2f437-452">Tıklatın **sorgu** sekmesinde ve önceki bölümde sorgudan yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="2f437-452">Click the **QUERY** tab and paste query from the previous section.</span></span>

2. <span data-ttu-id="2f437-453">Bu örnek verileri sorgusu doğrulamak için veri EntryStream giriş tıklayarak yükleme... simge ve seçme **dosyasından örnek verileri yükleme**.</span><span class="sxs-lookup"><span data-stu-id="2f437-453">To validate this query against sample data, upload the data into the EntryStream input by clicking the ... symbol and selecting **Upload sample data from file**.</span></span>

    ![Entry.json dosyasının ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image41.png)
3. <span data-ttu-id="2f437-455">Görünür bölmesinde yerel makinenizde (Entry.json) dosyasını seçin ve **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="2f437-455">In the pane that appears select the file (Entry.json) on your local machine and click **OK**.</span></span> <span data-ttu-id="2f437-456">**Test** simgesi artık karanl ve tıklatılabilir.</span><span class="sxs-lookup"><span data-stu-id="2f437-456">The **Test** icon will now illuminate and be clickable.</span></span>
   
    ![Entry.json dosyasının ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image42.png)
3. <span data-ttu-id="2f437-458">Sorgu çıktısı beklendiği gibi olduğunu doğrulayın:</span><span class="sxs-lookup"><span data-stu-id="2f437-458">Validate that the output of the query is as expected:</span></span>
   
    ![Test sonuçları](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image43.png)

## <a name="question-2-report-total-time-for-each-car-to-pass-through-the-toll-booth"></a><span data-ttu-id="2f437-460">Soru 2: Rapor toplam süre, her araba Ücretli Stand geçirmek için</span><span class="sxs-lookup"><span data-stu-id="2f437-460">Question 2: Report total time for each car to pass through the toll booth</span></span>
<span data-ttu-id="2f437-461">Bir araba Ücretli geçirmek için gerekli olan ortalama süre değerlendirmeniz işlemi ve müşteri deneyimi yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="2f437-461">The average time that's required for a car to pass through the toll helps to assess the efficiency of the process and the customer experience.</span></span>

<span data-ttu-id="2f437-462">Toplam süre bulmak için ExitTime akış olan EntryTime akış katılmak için gerekir.</span><span class="sxs-lookup"><span data-stu-id="2f437-462">To find the total time, you need to join the EntryTime stream with the ExitTime stream.</span></span> <span data-ttu-id="2f437-463">Akışlar TollId ve LicencePlate sütunlarda katılır.</span><span class="sxs-lookup"><span data-stu-id="2f437-463">You will join the streams on TollId and LicencePlate columns.</span></span> <span data-ttu-id="2f437-464">**Katılma** işleci birleştirilmiş olayları arasındaki kabul edilebilir zaman farkı açıklar zamana bağlı leeway belirtmenizi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="2f437-464">The **JOIN** operator requires you to specify temporal leeway that describes the acceptable time difference between the joined events.</span></span> <span data-ttu-id="2f437-465">Kullanacağınız **DATEDIFF** işlevi olayları birbirinden en fazla 15 dakika gerektiğini belirtin.</span><span class="sxs-lookup"><span data-stu-id="2f437-465">You will use **DATEDIFF** function to specify that events should be no more than 15 minutes from each other.</span></span> <span data-ttu-id="2f437-466">Ayrıca uygulanacak **DATEDIFF** çıkmak için işlevi ve gerçek zaman hesaplamak için giriş saatleri bir araba harcadığı Ücretli istasyonu.</span><span class="sxs-lookup"><span data-stu-id="2f437-466">You will also apply the **DATEDIFF** function to exit and entry times to compute the actual time that a car spends in the toll station.</span></span> <span data-ttu-id="2f437-467">Kullanımı farkı Not **DATEDIFF** içinde kullanıldığında bir **seçin** deyimi yerine **katılma** koşulu.</span><span class="sxs-lookup"><span data-stu-id="2f437-467">Note the difference of the use of **DATEDIFF** when it's used in a **SELECT** statement rather than a **JOIN** condition.</span></span>

    SELECT EntryStream.TollId, EntryStream.EntryTime, ExitStream.ExitTime, EntryStream.LicensePlate, DATEDIFF (minute , EntryStream.EntryTime, ExitStream.ExitTime) AS DurationInMinutes
    FROM EntryStream TIMESTAMP BY EntryTime
    JOIN ExitStream TIMESTAMP BY ExitTime
    ON (EntryStream.TollId= ExitStream.TollId AND EntryStream.LicensePlate = ExitStream.LicensePlate)
    AND DATEDIFF (minute, EntryStream, ExitStream ) BETWEEN 0 AND 15

1. <span data-ttu-id="2f437-468">Bu sorguyu sınamak için üzerinde sorguyu güncelleştirmek **sorgu** iş için.</span><span class="sxs-lookup"><span data-stu-id="2f437-468">To test this query, update the query on the **QUERY** for the job.</span></span> <span data-ttu-id="2f437-469">İçin test dosyası ekleme **ExitStream** olduğu gibi **EntryStream** yukarıda girildi.</span><span class="sxs-lookup"><span data-stu-id="2f437-469">Add the test file for **ExitStream** just like **EntryStream** was entered above.</span></span>
   
2. <span data-ttu-id="2f437-470">Tıklatın **Test**.</span><span class="sxs-lookup"><span data-stu-id="2f437-470">Click **Test**.</span></span>

3. <span data-ttu-id="2f437-471">Sorguyu sınamak ve çıktı görüntülemek için onay kutusunu seçin:</span><span class="sxs-lookup"><span data-stu-id="2f437-471">Select the check box to test the query and view the output:</span></span>
   
    ![Test çıkışı](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image45.png)

## <a name="question-3-report-all-commercial-vehicles-with-expired-registration"></a><span data-ttu-id="2f437-473">Soru 3: süresi dolan kayıt ile tüm ticari araçları rapor</span><span class="sxs-lookup"><span data-stu-id="2f437-473">Question 3: Report all commercial vehicles with expired registration</span></span>
<span data-ttu-id="2f437-474">Azure Stream Analytics, zamana bağlı veri akışları ile katılmaya verilerinin statik anlık görüntülerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-474">Azure Stream Analytics can use static snapshots of data to join with temporal data streams.</span></span> <span data-ttu-id="2f437-475">Bu özelliği tanıtmak için aşağıdaki örnek soru kullanın.</span><span class="sxs-lookup"><span data-stu-id="2f437-475">To demonstrate this capability, use the following sample question.</span></span>

<span data-ttu-id="2f437-476">Bir ticari araç Ücretli şirketle kaydedilmişse Ücretli Stand İnceleme için durdurulmadan geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-476">If a commercial vehicle is registered with the toll company, it can pass through the toll booth without being stopped for inspection.</span></span> <span data-ttu-id="2f437-477">Ticari araç kayıt arama tablosu kayıtlar süresi dolmuş tüm ticari araçları tanımlamak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="2f437-477">You will use Commercial Vehicle Registration lookup table to identify all commercial vehicles that have expired registrations.</span></span>

```
SELECT EntryStream.EntryTime, EntryStream.LicensePlate, EntryStream.TollId, Registration.RegistrationId
FROM EntryStream TIMESTAMP BY EntryTime
JOIN Registration
ON EntryStream.LicensePlate = Registration.LicensePlate
WHERE Registration.Expired = '1'
```

<span data-ttu-id="2f437-478">Başvuru verileri kullanarak bir sorguyu sınamak için bir giriş kaynağı yapmış olduğunuz başvuru verileri için tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2f437-478">To test a query by using reference data, you need to define an input source for the reference data, which you have done already.</span></span>

<span data-ttu-id="2f437-479">Bu sorguyu sınamak için Query'ye yapıştırın **sorgu** sekmesini tıklatın, **Test**, iki giriş kaynağı ve kayıt örnek veri ve tıklatın belirtin **Test**.</span><span class="sxs-lookup"><span data-stu-id="2f437-479">To test this query, paste the query into the **QUERY** tab, click **Test**, and specify the two input sources and the registration sample data and click **Test**.</span></span>  
   
![Test çıkışı](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image46.png)

## <a name="start-the-stream-analytics-job"></a><span data-ttu-id="2f437-481">Stream Analytics işi Başlat</span><span class="sxs-lookup"><span data-stu-id="2f437-481">Start the Stream Analytics job</span></span>
<span data-ttu-id="2f437-482">Şimdi yapılandırmayı tamamlamak ve iş başlangıç zamanı geldi.</span><span class="sxs-lookup"><span data-stu-id="2f437-482">Now it's time to finish the configuration and start the job.</span></span> <span data-ttu-id="2f437-483">Soru 3 sorgusu, hangi şeması eşleşen bir çıktı oluşturacak **TollDataRefJoin** çıktı tablosu.</span><span class="sxs-lookup"><span data-stu-id="2f437-483">Save the query from Question 3, which will produce output that matches the schema of the **TollDataRefJoin** output table.</span></span>

<span data-ttu-id="2f437-484">Proje Git **PANO**, tıklatıp **Başlat**.</span><span class="sxs-lookup"><span data-stu-id="2f437-484">Go to the job **DASHBOARD**, and click **START**.</span></span>

![Proje panosunda Başlat düğmesinin Ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image48.png)

<span data-ttu-id="2f437-486">Açılan iletişim kutusunda, değiştirmek **Başlat çıktı** için zaman **özel zaman**.</span><span class="sxs-lookup"><span data-stu-id="2f437-486">In the dialog box that opens, change the **START OUTPUT** time to **CUSTOM TIME**.</span></span> <span data-ttu-id="2f437-487">Önce geçerli saati bir saat için saat değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2f437-487">Change the hour to one hour before the current time.</span></span> <span data-ttu-id="2f437-488">Bu değişiklik, öğreticiyi başında olaylar üretmek başlatıldığından bu yana olay hub'ı tüm olayları işlenir sağlar.</span><span class="sxs-lookup"><span data-stu-id="2f437-488">This change ensures that all events from the event hub are processed since you started to generate the events at the beginning of the tutorial.</span></span> <span data-ttu-id="2f437-489">Şimdi **Başlat** iş başlamak için Başlat.</span><span class="sxs-lookup"><span data-stu-id="2f437-489">Now click the **Start** button to start the job.</span></span>

![Özel süre seçimi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image49.png)

<span data-ttu-id="2f437-491">İşin başlangıç birkaç dakika sürebilir.</span><span class="sxs-lookup"><span data-stu-id="2f437-491">Starting the job can take a few minutes.</span></span> <span data-ttu-id="2f437-492">Akış analizi için üst düzey sayfasında durumunu görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2f437-492">You can see the status on the top-level page for Stream Analytics.</span></span>

![İşin durumunun ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image50.png)

## <a name="check-results-in-visual-studio"></a><span data-ttu-id="2f437-494">Visual Studio'da denetim sonuçları</span><span class="sxs-lookup"><span data-stu-id="2f437-494">Check results in Visual Studio</span></span>
1. <span data-ttu-id="2f437-495">Visual Studio sunucu Gezgini'ni açın ve sağ **TollDataRefJoin** tablo.</span><span class="sxs-lookup"><span data-stu-id="2f437-495">Open Visual Studio Server Explorer, and right-click the **TollDataRefJoin** table.</span></span>
2. <span data-ttu-id="2f437-496">Tıklatın **Show Table Data** işinizi çıkışını görmek için.</span><span class="sxs-lookup"><span data-stu-id="2f437-496">Click **Show Table Data** to see the output of your job.</span></span>
   
    ![Sunucu Gezgini içinde "Tablo verileri göster" seçimi](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image51.jpg)

## <a name="scale-out-azure-stream-analytics-jobs"></a><span data-ttu-id="2f437-498">Out Azure Stream Analytics işlerini ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="2f437-498">Scale out Azure Stream Analytics jobs</span></span>
<span data-ttu-id="2f437-499">Azure Stream Analytics özellikler esnek ölçek çok miktarda veri işleyebilecek şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="2f437-499">Azure Stream Analytics is designed to elastically scale so that it can handle a lot of data.</span></span> <span data-ttu-id="2f437-500">Azure Stream Analytics sorgu kullanabileceğiniz bir **bölüm tarafından** sistem bu adımı çıkışı ölçeklenir bildirmek için yan tümcesi. **PartitionID** (olay hub) giriş bölüm Kimliğini eşleştirilecek sistemi ekleyen özel bir sütundur.</span><span class="sxs-lookup"><span data-stu-id="2f437-500">The Azure Stream Analytics query can use a **PARTITION BY** clause to tell the system that this step will scale out. **PartitionId** is a special column that the system adds to match the partition ID of the input (event hub).</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*)AS Count
    FROM EntryStream TIMESTAMP BY EntryTime PARTITION BY PartitionId
    GROUP BY TUMBLINGWINDOW(minute,3), TollId, PartitionId

1. <span data-ttu-id="2f437-501">Geçerli işi durdurma, sorguda güncelleştirme **sorgu** sekmesini tıklatın ve açmak **ayarları** gear proje panosunda.</span><span class="sxs-lookup"><span data-stu-id="2f437-501">Stop the current job, update the query in the **QUERY** tab, and open the **Settings** gear in the job dashboard.</span></span> <span data-ttu-id="2f437-502">Tıklatın **ölçek**.</span><span class="sxs-lookup"><span data-stu-id="2f437-502">Click **Scale**.</span></span>
   
    <span data-ttu-id="2f437-503">**Akış birimleri** iş alabilir işlem gücü miktarına tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-503">**STREAMING UNITS** define the amount of compute power that the job can receive.</span></span>
2. <span data-ttu-id="2f437-504">1. 6'dan açılan değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2f437-504">Change the drop down from 1 from 6.</span></span>
   
    ![6 akış birimleri seçme ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image52.png)
3. <span data-ttu-id="2f437-506">Git **ÇIKIŞLARI** sekmesinde ve SQL tablo adını değiştirin **TollDataTumblingCountPartitioned**.</span><span class="sxs-lookup"><span data-stu-id="2f437-506">Go to the **OUTPUTS** tab and change the name of the SQL table to **TollDataTumblingCountPartitioned**.</span></span>

<span data-ttu-id="2f437-507">İş başlatırsanız şimdi, Azure akış analizi iş üzerinde daha fazla işlem kaynağı dağıtabilir ve daha iyi verim elde etmek.</span><span class="sxs-lookup"><span data-stu-id="2f437-507">If you start the job now, Azure Stream Analytics can distribute work across more compute resources and achieve better throughput.</span></span> <span data-ttu-id="2f437-508">Lütfen TollApp uygulama tarafından TollId bölümlenmiş olayları gönderiyor unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2f437-508">Please note that the TollApp application is also sending events partitioned by TollId.</span></span>

## <a name="monitor"></a><span data-ttu-id="2f437-509">İzleme</span><span class="sxs-lookup"><span data-stu-id="2f437-509">Monitor</span></span>
<span data-ttu-id="2f437-510">**İZLEYİCİ** alanı içeren çalışan iş hakkındaki istatistiklerdir.</span><span class="sxs-lookup"><span data-stu-id="2f437-510">The **MONITOR** area contains statistics about the running job.</span></span> <span data-ttu-id="2f437-511">Yapılandırma depolama kullanmak için gereken ilk kez hesabı ile aynı bölgede (Bu belgenin kalan gibi ad Ücretli).</span><span class="sxs-lookup"><span data-stu-id="2f437-511">First time configuration is needed to use the storage account in the same region (name toll like the rest of this document).</span></span>   

![İzleyici'nin ekran görüntüsü](media/stream-analytics-build-an-iot-solution-using-stream-analytics/monitoring.png)

<span data-ttu-id="2f437-513">Erişebileceğiniz **etkinlik günlükleri** işi panodan **ayarları** de alanı.</span><span class="sxs-lookup"><span data-stu-id="2f437-513">You can access **Activity Logs** from the job dashboard **Settings** area as well.</span></span>


## <a name="conclusion"></a><span data-ttu-id="2f437-514">Sonuç</span><span class="sxs-lookup"><span data-stu-id="2f437-514">Conclusion</span></span>
<span data-ttu-id="2f437-515">Bu öğretici Azure akış analizi hizmetine kullanıma sunuldu.</span><span class="sxs-lookup"><span data-stu-id="2f437-515">This tutorial introduced you to the Azure Stream Analytics service.</span></span> <span data-ttu-id="2f437-516">Girişleri ve çıkışları Stream Analytics işi için nasıl yapılandırılacağı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2f437-516">It demonstrated how to configure inputs and outputs for the Stream Analytics job.</span></span> <span data-ttu-id="2f437-517">Ücretli veri senaryoyu kullanarak, öğretici Azure akış analizi basit SQL benzeri sorguları hareket ve bunların nasıl çözülebilir verilerle alanındaki çıkan sorunları genel türleri açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="2f437-517">Using the Toll Data scenario, the tutorial explained common types of problems that arise in the space of data in motion and how they can be solved with simple SQL-like queries in Azure Stream Analytics.</span></span> <span data-ttu-id="2f437-518">Öğretici, zamana bağlı verilerle çalışmak için SQL uzantısı yapıları açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="2f437-518">The tutorial described SQL extension constructs for working with temporal data.</span></span> <span data-ttu-id="2f437-519">Veri akışları nasıl, statik başvuru verileri ile veri akışı zenginleştirmek nasıl ve daha yüksek verimlilik elde etmek için bir sorgu ölçeklendirmek nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="2f437-519">It showed how to join data streams, how to enrich the data stream with static reference data, and how to scale out a query to achieve higher throughput.</span></span>

<span data-ttu-id="2f437-520">Bu öğretici bir iyi giriş sağlasa da, herhangi bir yolla tam değil.</span><span class="sxs-lookup"><span data-stu-id="2f437-520">Although this tutorial provides a good introduction, it is not complete by any means.</span></span> <span data-ttu-id="2f437-521">Daha fazla sorgu desenlerine SAQL dil desteğini kullanarak bulabilirsiniz [sorgu örnekler için ortak Stream Analytics kullanım desenlerini](stream-analytics-stream-analytics-query-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="2f437-521">You can find more query patterns using the SAQL language at [Query examples for common Stream Analytics usage patterns](stream-analytics-stream-analytics-query-patterns.md).</span></span>
<span data-ttu-id="2f437-522">Başvurmak [çevrimiçi belgeleri](https://azure.microsoft.com/documentation/services/stream-analytics/) Azure Stream Analytics hakkında daha fazla bilgi edinmek için.</span><span class="sxs-lookup"><span data-stu-id="2f437-522">Refer to the [online documentation](https://azure.microsoft.com/documentation/services/stream-analytics/) to learn more about Azure Stream Analytics.</span></span>

## <a name="clean-up-your-azure-account"></a><span data-ttu-id="2f437-523">Azure hesabınızı Temizle</span><span class="sxs-lookup"><span data-stu-id="2f437-523">Clean up your Azure account</span></span>
1. <span data-ttu-id="2f437-524">Azure portalında Stream Analytics işi durdurun.</span><span class="sxs-lookup"><span data-stu-id="2f437-524">Stop the Stream Analytics job in the Azure portal.</span></span>
   
    <span data-ttu-id="2f437-525">Setup.ps1 komut dosyası, iki olay hub'ları ve bir SQL veritabanı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="2f437-525">The Setup.ps1 script creates two event hubs and a SQL database.</span></span> <span data-ttu-id="2f437-526">Aşağıdaki yönergeler temiz kaynakları öğreticinin sonunda yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="2f437-526">The following instructions help you clean up resources at the end of the tutorial.</span></span>
2. <span data-ttu-id="2f437-527">Bir PowerShell penceresinde yazın **.\\ CleanUp.ps1** öğreticide kullanılan kaynakları siler komut dosyasını başlatmak için.</span><span class="sxs-lookup"><span data-stu-id="2f437-527">In a PowerShell window, type **.\\Cleanup.ps1** to start the script that deletes resources used in the tutorial.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="2f437-528">Kaynakları adına göre tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="2f437-528">Resources are identified by the name.</span></span> <span data-ttu-id="2f437-529">Dikkatle kaldırma onaylamadan önce her bir öğeyi gözden emin olun.</span><span class="sxs-lookup"><span data-stu-id="2f437-529">Make sure you carefully review each item before confirming removal.</span></span>
   > 
   > 


