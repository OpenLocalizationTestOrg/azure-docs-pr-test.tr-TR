---
title: "Service Fabric uygulama yükseltme | Microsoft Docs"
description: "Bu makalede seçme yükseltme modları ve gerçekleştirme durumu denetimleri de dahil olmak üzere bir Service Fabric uygulama yükseltme giriş bilgileri sağlar."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 4c2752bee8e9a859b23dbf47662d15798b551bb5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="f9afd-103">Service Fabric uygulaması yükseltme</span><span class="sxs-lookup"><span data-stu-id="f9afd-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="f9afd-104">Azure Service Fabric uygulama hizmetleri koleksiyonudur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="f9afd-105">Yükseltme sırasında Service Fabric yeni karşılaştırır [uygulama bildirimi](service-fabric-application-model.md#describe-an-application) önceki sürümüyle ve hangi uygulama iste güncelleştirmeleri Hizmetleri belirler.</span><span class="sxs-lookup"><span data-stu-id="f9afd-105">During an upgrade, Service Fabric compares the new [application manifest](service-fabric-application-model.md#describe-an-application) with the previous version and determines which services in the application require updates.</span></span> <span data-ttu-id="f9afd-106">Service Fabric önceki sürümde sürüm numaralarıyla numaraları hizmet bildirimlerini sürüm karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-106">Service Fabric compares the version numbers in the service manifests with the version numbers in the previous version.</span></span> <span data-ttu-id="f9afd-107">Bu hizmet, hizmet değişmemişse yükseltilmez.</span><span class="sxs-lookup"><span data-stu-id="f9afd-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="f9afd-108">Yükseltmeler genel bakış alınıyor</span><span class="sxs-lookup"><span data-stu-id="f9afd-108">Rolling upgrades overview</span></span>
<span data-ttu-id="f9afd-109">Çalışırken uygulama yükseltmesinde, yükseltme aşamada gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-109">In a rolling application upgrade, the upgrade is performed in stages.</span></span> <span data-ttu-id="f9afd-110">Her aşamada yükseltme bir güncelleştirme etki alanı adı verilen kümedeki düğümlerin bir alt uygulanır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-110">At each stage, the upgrade is applied to a subset of nodes in the cluster, called an update domain.</span></span> <span data-ttu-id="f9afd-111">Sonuç olarak, uygulama yükseltme kullanılabilir olarak kalır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-111">As a result, the application remains available throughout the upgrade.</span></span> <span data-ttu-id="f9afd-112">Yükseltme sırasında küme eski ve yeni sürümlerin bir karışımını içerebilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-112">During the upgrade, the cluster may contain a mix of the old and new versions.</span></span>

<span data-ttu-id="f9afd-113">Bu nedenle, iki sürüm ileriye ve geriye dönük uyumlu.</span><span class="sxs-lookup"><span data-stu-id="f9afd-113">For that reason, the two versions must be forward and backward compatible.</span></span> <span data-ttu-id="f9afd-114">Uyumlu değillerse, uygulama Yöneticisi kullanılabilirliğini sağlamak için birden çok aşaması yükseltme hazırlama için sorumludur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-114">If they are not compatible, the application administrator is responsible for staging a multiple-phase upgrade to maintain availability.</span></span> <span data-ttu-id="f9afd-115">Bir birden çok aşama yükseltmesinin ilk adım, önceki sürümü ile uyumlu olan uygulama ara sürümünden yükseltiyor.</span><span class="sxs-lookup"><span data-stu-id="f9afd-115">In a multiple-phase upgrade, the first step is upgrading to an intermediate version of the application that is compatible with the previous version.</span></span> <span data-ttu-id="f9afd-116">Güncelleştirme öncesi sürümüyle uyumluluğu sonlarını ancak ara sürümü ile uyumlu olan en son sürümüne yükseltmek için ikinci adım olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-116">The second step is to upgrade the final version that breaks compatibility with the pre-update version, but is compatible with the intermediate version.</span></span>

<span data-ttu-id="f9afd-117">Kümeyi yapılandırırken güncelleştirme etki alanı küme bildiriminde belirtilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-117">Update domains are specified in the cluster manifest when you configure the cluster.</span></span> <span data-ttu-id="f9afd-118">Güncelleştirme etki alanları, belirli bir sırada güncelleştirmeleri almaz.</span><span class="sxs-lookup"><span data-stu-id="f9afd-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="f9afd-119">Bir güncelleştirme etki alanı için bir uygulama dağıtımının mantıksal bir birimdir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="f9afd-120">Güncelleştirme etki alanı Hizmetleri yükseltme sırasında yüksek kullanılabilirliğine kalmasına olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="f9afd-120">Update domains allow the services to remain at high availability during an upgrade.</span></span>

<span data-ttu-id="f9afd-121">Yükseltme söz konusu uygulamanın yalnızca bir güncelleştirme etki alanına sahip olduğunda olduğu kümedeki tüm düğümlere uygulanırsa olmayan çalışırken yükseltme mümkündür.</span><span class="sxs-lookup"><span data-stu-id="f9afd-121">Non-rolling upgrades are possible if the upgrade is applied to all nodes in the cluster, which is the case when the application has only one update domain.</span></span> <span data-ttu-id="f9afd-122">Bu yaklaşım önerilmez, bu hizmet arıza ve yükseltme sırasında kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="f9afd-122">This approach is not recommended, since the service goes down and isn't available at the time of upgrade.</span></span> <span data-ttu-id="f9afd-123">Ayrıca, bir küme yalnızca tek bir güncelleştirme etki alanı ile ayarlandığında, Azure garanti sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="f9afd-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="f9afd-124">Yükseltme sırasında sistem durumu denetimleri</span><span class="sxs-lookup"><span data-stu-id="f9afd-124">Health checks during upgrades</span></span>
<span data-ttu-id="f9afd-125">Bir yükseltme için sistem durumu ilkeleri ayarlanmış olması gerekir (veya varsayılan değerleri kullanılabilir) kullanın.</span><span class="sxs-lookup"><span data-stu-id="f9afd-125">For an upgrade, health policies have to be set (or default values may be used).</span></span> <span data-ttu-id="f9afd-126">Bir yükseltme tüm güncelleştirme etki alanları belirtilen zaman aşımlarını yükseltildiğinde ve tüm güncelleştirme etki alanları sağlıklı olarak kabul edilen başarılı olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-126">An upgrade is termed successful when all update domains are upgraded within the specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="f9afd-127">Sağlıklı güncelleştirme etki alanı güncelleştirme etki alanı sistem durumu İlkesi'nde belirtilen tüm sistem durumu denetimleri geçirilen anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-127">A healthy update domain means that the update domain passed all the health checks specified in the health policy.</span></span> <span data-ttu-id="f9afd-128">Örneğin, bir sistem durumu ilkesi uygulama örneğini içindeki tüm hizmetler olmalıdır zorunlu kılabilir *sağlıklı*, sistem durumu Service Fabric tarafından tanımlanan.</span><span class="sxs-lookup"><span data-stu-id="f9afd-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="f9afd-129">Sistem durumu ilkeleri ve denetimler Service Fabric tarafından yükseltme sırasında hizmet ve uygulama bağımsızdır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="f9afd-130">Diğer bir deyişle, hizmete özgü testleri yapılır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="f9afd-131">Örneğin, hizmetiniz bir işleme gereksinimi olabilir, ancak Service Fabric verimlilik denetlemek için bilgileri yok.</span><span class="sxs-lookup"><span data-stu-id="f9afd-131">For example, your service might have a throughput requirement, but Service Fabric does not have the information to check throughput.</span></span> <span data-ttu-id="f9afd-132">Başvurmak [sistem durumu makaleleri](service-fabric-health-introduction.md) gerçekleştirilen denetimleri için.</span><span class="sxs-lookup"><span data-stu-id="f9afd-132">Refer to the [health articles](service-fabric-health-introduction.md) for the checks that are performed.</span></span> <span data-ttu-id="f9afd-133">Örnek başlayıp başlamadığını uygulama paketi doğru kopyalanmıştır bir yükseltme INCLUDE testleri sırasında gerçekleşecek denetler ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="f9afd-133">The checks that happen during an upgrade include tests for whether the application package was copied correctly, whether the instance was started, and so on.</span></span>

<span data-ttu-id="f9afd-134">Uygulama durumunu uygulamanın alt varlıkları toplamı olur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-134">The application health is an aggregation of the child entities of the application.</span></span> <span data-ttu-id="f9afd-135">Kısacası, Service Fabric uygulaması üzerinde bildirilen sistem üzerinden uygulama durumunu değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-135">In short, Service Fabric evaluates the health of the application through the health that is reported on the application.</span></span> <span data-ttu-id="f9afd-136">Ayrıca bu şekilde tüm hizmetler için uygulama durumunu değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-136">It also evaluates the health of all the services for the application this way.</span></span> <span data-ttu-id="f9afd-137">Daha fazla Service Fabric sistem durumu hizmeti çoğaltma gibi kendi alt toplayarak uygulama hizmetlerini durumunu değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-137">Service Fabric further evaluates the health of the application services by aggregating the health of their children, such as the service replica.</span></span> <span data-ttu-id="f9afd-138">Uygulama durumu ilkesi sağlanıyorsa sonra yükseltme devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f9afd-138">Once the application health policy is satisfied, the upgrade can proceed.</span></span> <span data-ttu-id="f9afd-139">Sistem durumu ilkesi ihlal uygulama yükseltme başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-139">If the health policy is violated, the application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="f9afd-140">Yükseltme modları</span><span class="sxs-lookup"><span data-stu-id="f9afd-140">Upgrade modes</span></span>
<span data-ttu-id="f9afd-141">Uygulama yükseltme için öneririz modu yaygın olarak kullanılan modu izlenen modudur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-141">The mode that we recommend for application upgrade is the monitored mode, which is the commonly used mode.</span></span> <span data-ttu-id="f9afd-142">İzlenen modu tek bir güncelleştirme etki alanında yükseltme gerçekleştirir ve tüm sistem durumu denetliyorsa (belirtilen ilke başına), geçişi geçer Sonraki güncelleştirme etki alanına otomatik olarak.</span><span class="sxs-lookup"><span data-stu-id="f9afd-142">Monitored mode performs the upgrade on one update domain, and if all health checks pass (per the policy specified), moves on to the next update domain automatically.</span></span>  <span data-ttu-id="f9afd-143">Sistem durumu denetimi başarısız ve/veya zaman aşımları ulaşıldığında, yükseltme veya güncelleştirme etki alanı için geri veya modu izlenmeyen manuel olarak değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-143">If health checks fail and/or time-outs are reached, the upgrade is either rolled back for the update domain, or the mode is changed to unmonitored manual.</span></span> <span data-ttu-id="f9afd-144">Başarısız yükseltme için bu iki moddan birini seçmek için yükseltme yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f9afd-144">You can configure the upgrade to choose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="f9afd-145">İzlenmeyen el ile moduna el ile müdahale sonraki güncelleştirme etki alanı yükseltme kapalı kazandırın için bir güncelleştirme etki alanındaki her yükseltme sonrasında gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, to kick off the upgrade on the next update domain.</span></span> <span data-ttu-id="f9afd-146">Herhangi bir Service Fabric sistem durumu denetimi gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="f9afd-147">Yönetici, sonraki güncelleştirme etki alanında Yükseltmeyi başlatmadan önce sistem durumu veya durum denetimi yapar.</span><span class="sxs-lookup"><span data-stu-id="f9afd-147">The administrator performs the health or status checks before starting the upgrade in the next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="f9afd-148">Varsayılan Hizmetleri yükseltme</span><span class="sxs-lookup"><span data-stu-id="f9afd-148">Upgrade default services</span></span>
<span data-ttu-id="f9afd-149">Varsayılan Hizmetleri Service Fabric uygulaması içindeki bir uygulama yükseltme işlemi sırasında yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-149">Default services within Service Fabric application can be upgraded during the upgrade process of an application.</span></span> <span data-ttu-id="f9afd-150">Varsayılan Hizmetleri tanımlanmış [uygulama bildirimi](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="f9afd-150">Default services are defined in the [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="f9afd-151">Varsayılan Hizmetleri yükseltme standart kurallar şunlardır:</span><span class="sxs-lookup"><span data-stu-id="f9afd-151">The standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="f9afd-152">Varsayılan hizmetlerini yeni [uygulama bildirimi](service-fabric-application-model.md#describe-an-application) kümede olmayan oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="f9afd-152">Default services in the new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in the cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="f9afd-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) aşağıdaki kuralları etkinleştirmek için true olarak ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs to be set to true to enable the following rules.</span></span> <span data-ttu-id="f9afd-154">Bu özellik, v5.5 desteklenir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="f9afd-155">Varsayılan hem de önceki varolan hizmetlerini [uygulama bildirimi](service-fabric-application-model.md#describe-an-application) ve yeni sürümü güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="f9afd-156">Hizmet açıklamasında yeni sürümü kümeye de zaten üzerine yazacak.</span><span class="sxs-lookup"><span data-stu-id="f9afd-156">Service descriptions in the new version would overwrite those already in the cluster.</span></span> <span data-ttu-id="f9afd-157">Uygulama yükseltme varsayılan hizmet hatası güncelleştirme sırasında otomatik olarak geri alma olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="f9afd-158">Varsayılan hizmetlerini önceki [uygulama bildirimi](service-fabric-application-model.md#describe-an-application) ancak yeni sürümde silinir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-158">Default services in the previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in the new version are deleted.</span></span> <span data-ttu-id="f9afd-159">**Bu silme varsayılan Hizmetleri değil döndürülebilir unutmayın.**</span><span class="sxs-lookup"><span data-stu-id="f9afd-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="f9afd-160">Bir uygulama durumunda yükseltme geri, yükseltmeyi başlatmadan önce Hizmetleri durumuna geri alınır varsayılan alınır.</span><span class="sxs-lookup"><span data-stu-id="f9afd-160">In case of an application upgrade is rolled back, default services are reverted to the status before upgrade started.</span></span> <span data-ttu-id="f9afd-161">Ancak silinmiş Hizmetleri hiçbir zaman oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="f9afd-162">Uygulama yükseltme akış çizelgesi</span><span class="sxs-lookup"><span data-stu-id="f9afd-162">Application upgrade flowchart</span></span>
<span data-ttu-id="f9afd-163">Bu paragraf aşağıdaki akış çizelgesi, bir Service Fabric uygulama yükseltme işlemini anlamanıza yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-163">The flowchart following this paragraph can help you understand the upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="f9afd-164">Özellikle, akışını açıklar nasıl dahil olmak üzere zaman aşımlarını *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, ve *UpgradeHealthCheckInterval*, Yardım Yükseltme tek bir güncelleştirme etki alanındaki bir başarı veya hata olarak kabul edildiğinde denetim.</span><span class="sxs-lookup"><span data-stu-id="f9afd-164">In particular, the flow describes how the time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when the upgrade in one update domain is considered a success or a failure.</span></span>

![Service Fabric uygulaması için yükseltme işlemi][image]

## <a name="next-steps"></a><span data-ttu-id="f9afd-166">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="f9afd-166">Next steps</span></span>
<span data-ttu-id="f9afd-167">[Uygulama kullanarak Visual Studio yükseltme](service-fabric-application-upgrade-tutorial.md) Visual Studio kullanarak bir uygulama yükseltme yol gösterir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="f9afd-168">[Uygulama Powershell kullanarak yükseltme](service-fabric-application-upgrade-tutorial-powershell.md) PowerShell kullanarak bir uygulama yükseltme yol gösterir.</span><span class="sxs-lookup"><span data-stu-id="f9afd-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="f9afd-169">Uygulamanızı kullanarak yükseltme nasıl kontrol [yükseltme parametreleri](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="f9afd-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="f9afd-170">Uygulama yükseltme nasıl kullanılacağını öğrenerek uyumlu hale getirmek [veri seri hale getirme](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="f9afd-170">Make your application upgrades compatible by learning how to use [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="f9afd-171">Gelişmiş işlevselliği başvurarak uygulamanızı yükseltirken kullanmayı öğrenin [Gelişmiş konular](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="f9afd-171">Learn how to use advanced functionality while upgrading your application by referring to [Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="f9afd-172">Adımlarına bakarak uygulama yükseltmeleri sık karşılaşılan sorunları düzeltmek [sorun giderme uygulama yükseltmelerini](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="f9afd-172">Fix common problems in application upgrades by referring to the steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
