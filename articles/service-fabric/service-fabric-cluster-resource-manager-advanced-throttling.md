---
title: "Service Fabric kümesi Kaynak Yöneticisi'nde azaltma | Microsoft Docs"
description: "Service Fabric kümesi kaynak yöneticisi tarafından sağlanan kısıtlamaları yapılandırmayı öğrenin."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 1be0beaf2e199a9c384187efd80b33c7dab5e87c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="throttling-the-service-fabric-cluster-resource-manager"></a><span data-ttu-id="61fd2-103">Service Fabric kümesi Kaynak Yöneticisi azaltma</span><span class="sxs-lookup"><span data-stu-id="61fd2-103">Throttling the Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="61fd2-104">Küme Kaynak Yöneticisi'ni düzgün yapılandırdıktan olsa bile, küme kesintiye.</span><span class="sxs-lookup"><span data-stu-id="61fd2-104">Even if you’ve configured the Cluster Resource Manager correctly, the cluster can get disrupted.</span></span> <span data-ttu-id="61fd2-105">Örneğin, yükseltme sırasında oluştu neler olacağını eşzamanlı düğüm ve hata etki alanı hataları - olabilir?</span><span class="sxs-lookup"><span data-stu-id="61fd2-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade?</span></span> <span data-ttu-id="61fd2-106">Küme Kaynak Yöneticisi'ni daima her şeyi düzeltmek yeniden düzenleyin ve küme düzeltmek çalışarak küme kaynaklarını tüketen çalışır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-106">The Cluster Resource Manager always tries to fix everything, consuming the cluster's resources trying to reorganize and fix the cluster.</span></span> <span data-ttu-id="61fd2-107">Kısıtlamaları Yardım küme kaynakları Sabitle için - kullanabilmesi için bir backstop sağlamak düğümleri geri dönün, ağ bölümleri onarma, düzeltilmiş BITS dağıtılmış.</span><span class="sxs-lookup"><span data-stu-id="61fd2-107">Throttles help provide a backstop so that the cluster can use resources to stabilize - the nodes come back, the network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="61fd2-108">Durumlarda bu tür yardımcı olmak için Service Fabric kümesi Kaynak Yöneticisi birkaç kısıtlamaları içerir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-108">To help with these sorts of situations, the Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="61fd2-109">Bu kısıtlamaları tüm oldukça büyük hammers ' dir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-109">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="61fd2-110">Genellikle, dikkatli planlama ve sınama yapılmadan değiştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-110">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="61fd2-111">Küme kaynak yöneticisinin kısıtlamaları değiştirirseniz, beklenen gerçek testiniz ayarlamak.</span><span class="sxs-lookup"><span data-stu-id="61fd2-111">If you change the Cluster Resource Manager's throttles, you should tune them to your expected actual load.</span></span> <span data-ttu-id="61fd2-112">Kümenin bazı durumlarda Sabitle daha uzun sürer anlamına gelir olsa bile, bazı kısıtlamaları yerinde gerek belirleyebilir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-112">You may determine you need to have some throttles in place, even if it means the cluster takes longer to stabilize in some situations.</span></span> <span data-ttu-id="61fd2-113">Sınama kısıtlamaları için doğru değerleri belirlemek için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-113">Testing is required to determine the correct values for throttles.</span></span> <span data-ttu-id="61fd2-114">Kısıtlamaları makul bir sürede değişikliklerine yanıt vermelerini izin vermek için yeterince yüksek ve gerçekte çok fazla kaynak tüketimini önlemek için yeterince düşük olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-114">Throttles need to be high enough to allow the cluster to respond to changes in a reasonable amount of time, and low enough to actually prevent too much resource consumption.</span></span> 

<span data-ttu-id="61fd2-115">Çoğu müşteri gördük zaman zaten bir kaynak kısıtlanmış ortamında olduğundan bırakıldı kısıtlamaları kullanın.</span><span class="sxs-lookup"><span data-stu-id="61fd2-115">Most of the time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="61fd2-116">Bazı örnekler tek düğümler veya paralel işleme sınırlamaları nedeniyle birçok durum bilgisi olan çoğaltmaları oluşturmak mümkün olmayan diskleri için sınırlı ağ bant genişliği olacaktır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-116">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able to build many stateful replicas in parallel due to throughput limitations.</span></span> <span data-ttu-id="61fd2-117">Kısıtlamaları, işlemleri başarısız veya yavaş işlemleri neden bu kaynakları doldurmaya.</span><span class="sxs-lookup"><span data-stu-id="61fd2-117">Without throttles, operations could overwhelm these resources, causing operations to fail or be slow.</span></span> <span data-ttu-id="61fd2-118">Müşteriler kısıtlamaları kullanılan ve süreyi genişletme biliyorduk bu durumlarda kararlı bir duruma kümeye kalırsınız.</span><span class="sxs-lookup"><span data-stu-id="61fd2-118">In these situations customers used throttles and knew they were extending the amount of time it would take the cluster to reach a stable state.</span></span> <span data-ttu-id="61fd2-119">Müşterileri de bunlar kısıtlanan sırada düşük genel güvenilirlik çalışan sonlandırmak anladım.</span><span class="sxs-lookup"><span data-stu-id="61fd2-119">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-the-throttles"></a><span data-ttu-id="61fd2-120">Kısıtlamaları yapılandırma</span><span class="sxs-lookup"><span data-stu-id="61fd2-120">Configuring the throttles</span></span>

<span data-ttu-id="61fd2-121">Service Fabric çoğaltma hareketlerinin sayısı kısıtlama için iki mekanizma vardır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-121">Service Fabric has two mechanisms for throttling the number of replica movements.</span></span> <span data-ttu-id="61fd2-122">Service Fabric 5.7 önce var olan varsayılan bir mekanizma, bir izin verilen taşır mutlak sayı olarak azaltma temsil eder.</span><span class="sxs-lookup"><span data-stu-id="61fd2-122">The default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="61fd2-123">Bu, tüm boyutları kümeleri için çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="61fd2-123">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="61fd2-124">Özellikle büyük kümeler için varsayılan değer, daha küçük kümelerde hiçbir etkisi yaparken gerekli olduğunda bile Dengeleme aşağı önemli ölçüde yavaşlamasının çok küçük olabilir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-124">In particular, for large clusters the default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="61fd2-125">Bu önceki mekanizması yüzde tabanlı denetimi tarafından Hizmetleri ve düğüm sayısı düzenli olarak değiştiği dinamik kümeleriyle iyi ölçeklenir yerini yenisi aldı.</span><span class="sxs-lookup"><span data-stu-id="61fd2-125">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which the number of services and nodes change regularly.</span></span>

<span data-ttu-id="61fd2-126">Kısıtlamaları kümelerindeki çoğaltmaları sayısının yüzdesi dayanır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-126">The throttles are based on a percentage of the number of replicas in the clusters.</span></span> <span data-ttu-id="61fd2-127">Temel Percetage kısıtlamaları etkinleştirmek kural ifade: "hareket çoğaltmaları % 10'dan fazla 10 dakikalık bir zaman aralığı içinde", örneğin.</span><span class="sxs-lookup"><span data-stu-id="61fd2-127">Percetage based throttles enable expressing the rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="61fd2-128">Yüzde tabanlı azaltma için yapılandırma ayarları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="61fd2-128">The configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="61fd2-129">GlobalMovementThrottleThresholdPercentage - kümedeki herhangi bir zamanda izin hareketlerinin sayısı üst sınırı çoğaltmaları kümedeki toplam sayısı yüzdesi olarak ifade edilen.</span><span class="sxs-lookup"><span data-stu-id="61fd2-129">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="61fd2-130">0 sınır gösterir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-130">0 indicates no limit.</span></span> <span data-ttu-id="61fd2-131">Varsayılan değer 0'dır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-131">The default value is 0.</span></span> <span data-ttu-id="61fd2-132">Bu ayar ve GlobalMovementThrottleThreshold belirtilirse, daha pasif sınırı kullanılır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-132">If both this setting and GlobalMovementThrottleThreshold are specified, then the more conservative limit is used.</span></span>
  - <span data-ttu-id="61fd2-133">GlobalMovementThrottleThresholdPercentageForPlacement - çoğaltmaları kümedeki toplam sayısı yüzdesi olarak ifade edilen yerleştirme aşamasında izin hareketlerinin sayısı üst sınırı.</span><span class="sxs-lookup"><span data-stu-id="61fd2-133">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during the placement phase, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="61fd2-134">0 sınır gösterir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-134">0 indicates no limit.</span></span> <span data-ttu-id="61fd2-135">Varsayılan değer 0'dır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-135">The default value is 0.</span></span> <span data-ttu-id="61fd2-136">Bu ayar ve GlobalMovementThrottleThresholdForPlacement belirtilirse, daha pasif sınırı kullanılır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-136">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then the more conservative limit is used.</span></span>
  - <span data-ttu-id="61fd2-137">GlobalMovementThrottleThresholdPercentageForBalancing - çoğaltmaları kümedeki toplam sayısı yüzdesi olarak ifade edilen karşı aşamasında izin hareketlerinin sayısı üst sınırı.</span><span class="sxs-lookup"><span data-stu-id="61fd2-137">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during the balancing phase, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="61fd2-138">0 sınır gösterir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-138">0 indicates no limit.</span></span> <span data-ttu-id="61fd2-139">Varsayılan değer 0'dır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-139">The default value is 0.</span></span> <span data-ttu-id="61fd2-140">Bu ayar ve GlobalMovementThrottleThresholdForBalancing belirtilirse, daha pasif sınırı kullanılır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-140">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then the more conservative limit is used.</span></span>

<span data-ttu-id="61fd2-141">Azaltma yüzdesi belirtirken, %5 0,05 belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-141">When specifying the throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="61fd2-142">Bu kısıtlamaları yönetilen aralığı saniye cinsinden belirtilen GlobalMovementThrottleCountingInterval belirtir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-142">The interval on which these throttles are governed is the GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="61fd2-143">tek başına dağıtımlarında ClusterConfig.json ya da Azure için Template.json aracılığıyla kümeleri barındırılan:</span><span class="sxs-lookup"><span data-stu-id="61fd2-143">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="61fd2-144">Varsayılan dayalı sayısı kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="61fd2-144">Default count based throttles</span></span>
<span data-ttu-id="61fd2-145">Eski kümede vardır veya bu yapılandırmalar beri yükseltildi kümelerinde hala korur durumunda bu bilgiler sağlanır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-145">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="61fd2-146">Genel olarak, bunlar yüzde tabanlı kısıtlamaları ile yukarıdaki değiştirilir önerilir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-146">In general, it is recommended that these are replaced with the percentage-based throttles above.</span></span> <span data-ttu-id="61fd2-147">Yüzde tabanlı azaltma varsayılan olarak devre dışı bırakıldığından bu kısıtlamaları devre dışı ve yüzde tabanlı kısıtlamaları ile değiştirilen kadar bir küme için varsayılan kısıtlamaları kalır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-147">Since percentage-based throttling is disabled by default, these throttles remain the default throttles for a cluster until they are disabled and replaced with the percentage-based throttles.</span></span> 

  - <span data-ttu-id="61fd2-148">GlobalMovementThrottleThreshold – Bu ayar, bazı zamanla hareketleri kümedeki toplam sayısını denetler.</span><span class="sxs-lookup"><span data-stu-id="61fd2-148">GlobalMovementThrottleThreshold – this setting controls the total number of movements in the cluster over some time.</span></span> <span data-ttu-id="61fd2-149">Süreyi saniye cinsinden GlobalMovementThrottleCountingInterval olarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-149">The amount of time is specified in seconds as the GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="61fd2-150">GlobalMovementThrottleThreshold için varsayılan değer 1000'dir ve varsayılan değer GlobalMovementThrottleCountingInterval için 600'dür.</span><span class="sxs-lookup"><span data-stu-id="61fd2-150">The default value for the GlobalMovementThrottleThreshold is 1000 and the default value for the GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="61fd2-151">MovementPerPartitionThrottleThreshold – Bu ayar, bazı zamanla hareketleri herhangi bir hizmet bölümü için toplam sayısını denetler.</span><span class="sxs-lookup"><span data-stu-id="61fd2-151">MovementPerPartitionThrottleThreshold – this setting controls the total number of movements for any service partition over some time.</span></span> <span data-ttu-id="61fd2-152">Süreyi saniye cinsinden MovementPerPartitionThrottleCountingInterval olarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="61fd2-152">The amount of time is specified in seconds as the MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="61fd2-153">MovementPerPartitionThrottleThreshold için varsayılan değer 50'dir ve varsayılan değer MovementPerPartitionThrottleCountingInterval için 600'dür.</span><span class="sxs-lookup"><span data-stu-id="61fd2-153">The default value for the MovementPerPartitionThrottleThreshold is 50 and the default value for the MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="61fd2-154">Bu kısıtlamaları yapılandırması azaltma yüzde tabanlı olarak aynı düzeni izler.</span><span class="sxs-lookup"><span data-stu-id="61fd2-154">The configuration for these throttles follows the same pattern as the percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="61fd2-155">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="61fd2-155">Next steps</span></span>
- <span data-ttu-id="61fd2-156">Küme Kaynak Yöneticisi'ni yönetir ve yük devretme kümesinde dengeleyen hakkında bilgi almak için makalesine kontrol [Yük Dengeleme](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="61fd2-156">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="61fd2-157">Küme Kaynak Yöneticisi'ni küme açıklamak için birçok seçeneğiniz vardır.</span><span class="sxs-lookup"><span data-stu-id="61fd2-157">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="61fd2-158">Bunları hakkında daha fazla bilgi için bu makalede kontrol [açıklayan bir Service Fabric kümesi](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="61fd2-158">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
