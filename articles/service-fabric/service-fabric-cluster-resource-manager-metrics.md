---
title: "Ölçümleri kullanarak aaaManage Azure mikro hizmet yük | Microsoft Docs"
description: "Service Fabric toomanage tooconfigure ve kullanım ölçümlerini kaynak tüketimini nasıl hizmet hakkında bilgi edinin."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="6aff2-103">Kaynak tüketimini ve Service Fabric yük ölçümlerle yönetme</span><span class="sxs-lookup"><span data-stu-id="6aff2-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="6aff2-104">*Ölçümleri* , hizmetleri çok değer verdiğiniz ve hangi hello kümedeki hello düğümler tarafından sağlanan hello kaynaklardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="6aff2-105">Bir sipariş performansını tooimprove veya İzleyicisi Merhaba hizmetlerinizi toomanage istediğiniz herhangi bir şey ölçümüdür.</span><span class="sxs-lookup"><span data-stu-id="6aff2-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="6aff2-106">Örneğin, hizmetiniz aşırı yüklüyse bellek tüketimi tooknow izlemek.</span><span class="sxs-lookup"><span data-stu-id="6aff2-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="6aff2-107">Başka bir hello hizmeti bellek az sipariş tooget daha iyi performans kısıtlı olduğu başka bir yerde olup taşıma çıkışı toofigure kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="6aff2-108">Bellek, Disk ve CPU kullanımı gibi şeyleri ölçümler gösterilebilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="6aff2-109">Bu ölçümler fiziksel, yönetilen toobe gereken hello düğümde toophysical kaynakları karşılık kaynakları ölçümleridir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="6aff2-110">Ölçümleri de olabilir (ve genellikle olan) mantıksal ölçümleri.</span><span class="sxs-lookup"><span data-stu-id="6aff2-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="6aff2-111">Mantıksal ölçümleri "MyWorkQueueDepth" veya "MessagesToProcess" veya "TotalRecords" gibi noktalardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="6aff2-112">Mantıksal ölçümleri uygulama tanımlı ve dolaylı olarak toosome fiziksel kaynak tüketimini karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="6aff2-113">Sabit toomeasure ve rapor hizmeti başına temelinde fiziksel kaynakları tüketiminin olabileceğinden mantıksal ölçümleri yaygındır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="6aff2-114">Merhaba karmaşıklığını ölçme ve fiziksel ölçümlerinizi raporlama ayrıca neden Service Fabric bazı varsayılan ölçümleri sağlar olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="6aff2-115">Varsayılan ölçümleri</span><span class="sxs-lookup"><span data-stu-id="6aff2-115">Default metrics</span></span>
<span data-ttu-id="6aff2-116">Yazma ve hizmet dağıtımı başladı tooget istediğinizi düşünelim.</span><span class="sxs-lookup"><span data-stu-id="6aff2-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="6aff2-117">Bu noktada içereceği tükettiği hangi fiziksel veya mantıksal kaynakları bilinmiyor.</span><span class="sxs-lookup"><span data-stu-id="6aff2-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="6aff2-118">Uygundur!</span><span class="sxs-lookup"><span data-stu-id="6aff2-118">That’s fine!</span></span> <span data-ttu-id="6aff2-119">diğer bir ölçümleri belirtildiğinde hello Service Fabric kümesi Kaynak Yöneticisi bazı varsayılan ölçümleri kullanır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="6aff2-120">Bunlar:</span><span class="sxs-lookup"><span data-stu-id="6aff2-120">They are:</span></span>

  - <span data-ttu-id="6aff2-121">PrimaryCount - hello düğümde birincil çoğaltmalara sayısı</span><span class="sxs-lookup"><span data-stu-id="6aff2-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="6aff2-122">ReplicaCount - hello düğümde toplam durum bilgisi olan çoğaltmaların sayısı</span><span class="sxs-lookup"><span data-stu-id="6aff2-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="6aff2-123">Sayısı - tüm hizmet nesnelerde (durum bilgisiz ve durum bilgisi olan) hello düğüm sayısı</span><span class="sxs-lookup"><span data-stu-id="6aff2-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="6aff2-124">Ölçüm</span><span class="sxs-lookup"><span data-stu-id="6aff2-124">Metric</span></span> | <span data-ttu-id="6aff2-125">Durum bilgisiz örneği yükleme</span><span class="sxs-lookup"><span data-stu-id="6aff2-125">Stateless Instance Load</span></span> | <span data-ttu-id="6aff2-126">Durum bilgisi olan ikincil yükleme</span><span class="sxs-lookup"><span data-stu-id="6aff2-126">Stateful Secondary Load</span></span> | <span data-ttu-id="6aff2-127">Durum bilgisi olan birincil yükleme</span><span class="sxs-lookup"><span data-stu-id="6aff2-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="6aff2-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="6aff2-128">PrimaryCount</span></span> |<span data-ttu-id="6aff2-129">0</span><span class="sxs-lookup"><span data-stu-id="6aff2-129">0</span></span> |<span data-ttu-id="6aff2-130">0</span><span class="sxs-lookup"><span data-stu-id="6aff2-130">0</span></span> |<span data-ttu-id="6aff2-131">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-131">1</span></span> |
| <span data-ttu-id="6aff2-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="6aff2-132">ReplicaCount</span></span> |<span data-ttu-id="6aff2-133">0</span><span class="sxs-lookup"><span data-stu-id="6aff2-133">0</span></span> |<span data-ttu-id="6aff2-134">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-134">1</span></span> |<span data-ttu-id="6aff2-135">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-135">1</span></span> |
| <span data-ttu-id="6aff2-136">Sayı</span><span class="sxs-lookup"><span data-stu-id="6aff2-136">Count</span></span> |<span data-ttu-id="6aff2-137">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-137">1</span></span> |<span data-ttu-id="6aff2-138">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-138">1</span></span> |<span data-ttu-id="6aff2-139">1</span><span class="sxs-lookup"><span data-stu-id="6aff2-139">1</span></span> |

<span data-ttu-id="6aff2-140">Temel iş yükleri için makul bir dağıtım hello küme iş hello varsayılan ölçümleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="6aff2-141">Aşağıdaki örneğine hello iki hizmetleri oluşturmak ve Dengeleme hello varsayılan ölçümleri Bel ne olur görelim.</span><span class="sxs-lookup"><span data-stu-id="6aff2-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="6aff2-142">Merhaba ilk üç bölümleri olan bir durum bilgisi olan hizmet hizmetidir ve bir hedef çoğaltma üç boyutunu ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="6aff2-143">Merhaba ikinci hizmeti, bir bölüm ve bir örnek sayısını üç ile durumsuz bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="6aff2-144">İşte, alırsınız:</span><span class="sxs-lookup"><span data-stu-id="6aff2-144">Here's what you get:</span></span>

<span data-ttu-id="6aff2-145"><center>
![Varsayılan ölçümlerle küme düzeni][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="6aff2-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="6aff2-146">Bazı şeyleri toonote:</span><span class="sxs-lookup"><span data-stu-id="6aff2-146">Some things toonote:</span></span>
  - <span data-ttu-id="6aff2-147">Merhaba durum bilgisi olan hizmet için birincil çoğaltmalara birkaç düğümleri arasında dağıtılır</span><span class="sxs-lookup"><span data-stu-id="6aff2-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="6aff2-148">Aynı bölüm olan farklı düğümlerde hello çoğaltmaları</span><span class="sxs-lookup"><span data-stu-id="6aff2-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="6aff2-149">ana ve ikincil toplam sayısı Hello hello kümede dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="6aff2-150">Hizmet nesnelerinin toplam sayısı Hello her düğümde eşit olarak ayrılır</span><span class="sxs-lookup"><span data-stu-id="6aff2-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="6aff2-151">İyi!</span><span class="sxs-lookup"><span data-stu-id="6aff2-151">Good!</span></span>

<span data-ttu-id="6aff2-152">Merhaba varsayılan ölçümleri harika bir başlangıç çalışır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="6aff2-153">Ancak, hello varsayılan ölçümleri yalnızca, o ana kadarki yürütecek.</span><span class="sxs-lookup"><span data-stu-id="6aff2-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="6aff2-154">Örneğin: sonuçları mükemmel bile kullanımı tüm bölümleri tarafından çekilen hello bölümlendirme, Düzen olduğunu hello olasılığını nedir?</span><span class="sxs-lookup"><span data-stu-id="6aff2-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="6aff2-155">Belirli bir hizmeti için yük hello hello fırsat nedir zamanla sabittir ya da hatta yalnızca aynı arasında birden çok bölüm şu anda hello?</span><span class="sxs-lookup"><span data-stu-id="6aff2-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="6aff2-156">Yalnızca hello varsayılan Ölçümleriyle çalıştırabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="6aff2-157">Ancak, genellikle böylece küme kullanımınızı alt ve istediğiniz daha fazla düzensiz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="6aff2-158">Merhaba varsayılan ölçümleri Uyarlamalı değil ve her şeyi eşdeğer olduğunu varsayın olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="6aff2-159">Örneğin, "1" toohello PrimaryCount ölçüm meşgul bir birincil ve iki olmayan bir katkıda.</span><span class="sxs-lookup"><span data-stu-id="6aff2-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="6aff2-160">Merhaba kötü durumda yalnızca hello varsayılan ölçümleri kullanarak da performans sorunları kaynaklanan overscheduled düğümleri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="6aff2-161">Merhaba kümenizi dışında çoğu alma ve performans sorunlarını önleme düşünüyorsanız toouse özel ölçümleri ve dinamik yük raporlama gerekir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="6aff2-162">Özel ölçümleri</span><span class="sxs-lookup"><span data-stu-id="6aff2-162">Custom metrics</span></span>
<span data-ttu-id="6aff2-163">Merhaba hizmet oluşturulurken ölçümleri adlı-service-örnek başına temelinde yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="6aff2-164">Herhangi bir ölçümü açıkladığı bazı özelliklere sahiptir: bir ad, bir ağırlık ve varsayılan yükleme.</span><span class="sxs-lookup"><span data-stu-id="6aff2-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="6aff2-165">Ölçüm adı: Merhaba ölçüm hello adı.</span><span class="sxs-lookup"><span data-stu-id="6aff2-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="6aff2-166">Hello ölçüm adı hello Resource Manager'ın açısından hello kümedeki hello ölçüm için benzersiz bir tanımlayıcı değil.</span><span class="sxs-lookup"><span data-stu-id="6aff2-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="6aff2-167">Ağırlık: Bu ölçüm göreli toohello ne kadar önemli olduğunu ölçüm ağırlığı tanımlar bu hizmet için diğer ölçümleri.</span><span class="sxs-lookup"><span data-stu-id="6aff2-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="6aff2-168">Varsayılan yükleme: hello varsayılan yük hello hizmet durum bilgisiz veya durum bilgisi olan bağlı olarak farklı şekilde gösterilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="6aff2-169">Durum bilgisi olmayan hizmetler için her ölçümü DefaultLoad adlı tek bir özelliğe sahip.</span><span class="sxs-lookup"><span data-stu-id="6aff2-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="6aff2-170">Durum bilgisi olan hizmetler için tanımladığınız:</span><span class="sxs-lookup"><span data-stu-id="6aff2-170">For stateful services you define:</span></span>
    * <span data-ttu-id="6aff2-171">PrimaryDefaultLoad: Bu ölçüm birincil olduğunda bu hizmet tüketir hello varsayılan süre</span><span class="sxs-lookup"><span data-stu-id="6aff2-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="6aff2-172">SecondaryDefaultLoad: Bu ölçüm ikincil olduğunda bu hizmet tüketir hello varsayılan süre</span><span class="sxs-lookup"><span data-stu-id="6aff2-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="6aff2-173">Özel ölçümlerini tanımlayın ve too_also_ kullanım hello varsayılan ölçümleri istiyorsanız too_explicitly_ gereksinim hello varsayılan ölçümleri geri ve ağırlıklarını ve değerleri tanımlamak için ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6aff2-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="6aff2-174">Bu durum, hello ilişkisi hello varsayılan ölçümleri ve özel ölçümlerinizi tanımlamanız gerekir çünkü.</span><span class="sxs-lookup"><span data-stu-id="6aff2-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="6aff2-175">Örneğin, belki de birincil dağıtım'den fazla ConnectionCount veya WorkQueueDepth ilgilendiğiniz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="6aff2-176">Tooreduce istediğiniz varsayılan hello ağırlığını hello PrimaryCount tarafından ölçüm yüksek olduğundan, bunlar önceliklidir, ölçümleri tooensure eklediğinizde tooMedium.</span><span class="sxs-lookup"><span data-stu-id="6aff2-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="6aff2-177">Ölçümleri hizmetinizin - örneği tanımlama</span><span class="sxs-lookup"><span data-stu-id="6aff2-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="6aff2-178">Yapılandırma aşağıdaki hello istediğiniz varsayalım:</span><span class="sxs-lookup"><span data-stu-id="6aff2-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="6aff2-179">"ConnectionCount" adlı bir ölçüm hizmetinizi raporları</span><span class="sxs-lookup"><span data-stu-id="6aff2-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="6aff2-180">Ayrıca toouse hello varsayılan ölçümleri istediğiniz</span><span class="sxs-lookup"><span data-stu-id="6aff2-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="6aff2-181">Bazı ölçüler yaptıktan ve normal olarak bu hizmet birincil çoğaltmasını "ConnectionCount" 20 birimler aldığını biliyorsanız</span><span class="sxs-lookup"><span data-stu-id="6aff2-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="6aff2-182">İkincil kopya "ConnectionCount" 5 birimleri kullanın</span><span class="sxs-lookup"><span data-stu-id="6aff2-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="6aff2-183">"ConnectionCount" Merhaba bu belirli bir hizmet performansını yönetme bakımından en önemli ölçüm hello olduğunu biliyor</span><span class="sxs-lookup"><span data-stu-id="6aff2-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="6aff2-184">Hala dengeli birincil çoğaltmalara istiyor.</span><span class="sxs-lookup"><span data-stu-id="6aff2-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="6aff2-185">Birincil çoğaltmalara Dengeleme genellikle iyi bir fikir ne olursa olsun içindir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="6aff2-186">Bu, birlikte birincil çoğaltmalara çoğunu etkileyen bazı düğüm veya hata etki alanı hello kaybı önlemeye yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="6aff2-187">Aksi takdirde hello varsayılan ölçümleri ince</span><span class="sxs-lookup"><span data-stu-id="6aff2-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="6aff2-188">Bu ölçüm yapılandırma hizmetiyle toocreate yazarsınız hello kod aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="6aff2-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="6aff2-189">Kod:</span><span class="sxs-lookup"><span data-stu-id="6aff2-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="6aff2-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="6aff2-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="6aff2-191">örneklerde hello hello bu belgenin kalan tanımlamak ve yönetme ölçümleri başına adlı-hizmet temelinde.</span><span class="sxs-lookup"><span data-stu-id="6aff2-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="6aff2-192">Olası toodefine ölçümleri hello hizmetine hizmetleriniz için aynı zamanda olan _türü_ düzeyi.</span><span class="sxs-lookup"><span data-stu-id="6aff2-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="6aff2-193">Bu hizmet bildirimlerinizi belirterek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="6aff2-194">Türü düzeyindeki ölçümlerini tanımlayan çeşitli nedenlerle önerilmez.</span><span class="sxs-lookup"><span data-stu-id="6aff2-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="6aff2-195">Merhaba ilk ölçüm adları sık ortama özgü nedenidir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="6aff2-196">Yerinde kesin bir sözleşme sürece, bir ortamda, hello ölçüm "Çekirdek" "MiliCores" veya "Çekirdek" bazılarında olmadığından emin olamaz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="6aff2-197">Ölçümlerinizi, bildiriminde tanımlanmışsa, ortam başına toocreate yeni bildirimleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="6aff2-198">Bu, genellikle farklı bildirimleri tooa artışı sağlamakta toomanagement zorluklar yalnızca küçük farklılıklar sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="6aff2-199">Ölçüm yükleri adlı-service-örnek başına temelinde yaygın olarak atanır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="6aff2-200">Örneğin, hello bir örneğini oluşturmak düşünelim toouse planları CustomerA buna yalnızca hafifçe hizmet.</span><span class="sxs-lookup"><span data-stu-id="6aff2-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="6aff2-201">Ayrıca daha büyük bir iş yükü olan CustomerB için oluşturduğunuz başka varsayalım.</span><span class="sxs-lookup"><span data-stu-id="6aff2-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="6aff2-202">Bu durumda, bu hizmetleri tootweak hello varsayılan yükler büyük olasılıkla istersiniz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="6aff2-203">Ölçümleri varsa ve bu senaryo toosupport bildirimleri ve tanımlanan yükleri istediğiniz her müşteri için farklı uygulama ve hizmet türleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="6aff2-204">hizmet oluşturma sırasında tanımlanan hello değerleri bu tooset hello belirli Varsayılanları kullanabileceğinizi şekilde hello bildiriminde tanımlanan geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="6aff2-205">Ancak, bunu hello bildirimleri toonot eşleşme ile gerçekte bu hello Hizmeti'ni çalıştıran bildirilen hello değerleri neden olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="6aff2-206">Bu tooconfusion yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="6aff2-207">Bir anımsatıcı olarak: toouse hello varsayılan ölçümleri yalnızca istiyorsanız, tootouch hello ölçümleri toplama hiç gerek yoktur veya hizmetinizi oluşturulurken özel bir şey yapmanız.</span><span class="sxs-lookup"><span data-stu-id="6aff2-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="6aff2-208">hiçbir başkalarının tanımlandığında hello varsayılan ölçümleri otomatik olarak kullanılan.</span><span class="sxs-lookup"><span data-stu-id="6aff2-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="6aff2-209">Artık daha ayrıntılı bu ayarların her biri aracılığıyla edelim ve onu etkilediğini hello davranışı hakkında konuşun.</span><span class="sxs-lookup"><span data-stu-id="6aff2-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="6aff2-210">Yükleme</span><span class="sxs-lookup"><span data-stu-id="6aff2-210">Load</span></span>
<span data-ttu-id="6aff2-211">Merhaba ölçümleri tanımlamanın tüm noktası toorepresent bazı yüktür.</span><span class="sxs-lookup"><span data-stu-id="6aff2-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="6aff2-212">*Yük* belirli bir metrik ne kadarının bazı hizmet örneği veya belirtilen bir düğüm üzerindeki çoğaltma tarafından kullanılan olduğu.</span><span class="sxs-lookup"><span data-stu-id="6aff2-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="6aff2-213">Yük neredeyse herhangi bir noktada yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="6aff2-214">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="6aff2-214">For example:</span></span>

  - <span data-ttu-id="6aff2-215">Bir hizmet oluşturduğunuzda yük tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="6aff2-216">Bu adlı _varsayılan yük_.</span><span class="sxs-lookup"><span data-stu-id="6aff2-216">This is called _default load_.</span></span>
  - <span data-ttu-id="6aff2-217">bir hizmet güncelleştirilmiş için hello hizmeti oluşturulduktan sonra varsayılan gibi hello Ölçüm bilgilerini yükler.</span><span class="sxs-lookup"><span data-stu-id="6aff2-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="6aff2-218">Bu adlı _bir hizmeti güncelleştirme_.</span><span class="sxs-lookup"><span data-stu-id="6aff2-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="6aff2-219">Merhaba yükler belli bir bölüm için bu hizmet için sıfırlama toohello varsayılan değerleri olabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="6aff2-220">Bu adlı _bölüm yükünü sıfırlama_.</span><span class="sxs-lookup"><span data-stu-id="6aff2-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="6aff2-221">Yükleme bildirilen üzerinde bir çalışma zamanı sırasında dinamik olarak hizmet nesnesi temelinde.</span><span class="sxs-lookup"><span data-stu-id="6aff2-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="6aff2-222">Bu adlı _yük raporlama_.</span><span class="sxs-lookup"><span data-stu-id="6aff2-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="6aff2-223">Bu stratejileri tümünün aynı yaşam süresi boyunca hizmeti hello içinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="6aff2-224">Varsayılan yükleme</span><span class="sxs-lookup"><span data-stu-id="6aff2-224">Default load</span></span>
<span data-ttu-id="6aff2-225">*Varsayılan yükleme* bu hizmetin her bir hizmet nesnesi (durum bilgisiz örneği veya durum bilgisi olan çoğaltma) tüketen hello ölçüsü ne kadarının.</span><span class="sxs-lookup"><span data-stu-id="6aff2-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="6aff2-226">dinamik yük raporu gibi diğer bilgileri alıncaya kadar hello küme Resource Manager hello hizmet nesnesi hello yük için bu sayıyı kullanır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="6aff2-227">Daha basit hizmetlerde hello varsayılan yükleme statik bir tanımıdır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="6aff2-228">Hello varsayılan yükü hiçbir zaman güncelleştirilir ve hello hizmet hello ömrü boyunca kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="6aff2-229">Varsayılan basit kapasite planlama burada belirli miktarda kaynağı ayrılmış toodifferent iş yüklerinin ve değiştirme senaryoları works harika yükler.</span><span class="sxs-lookup"><span data-stu-id="6aff2-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="6aff2-230">Kapasite yönetimi ve hello düğümler için kapasiteler kümenizdeki tanımlama hakkında daha fazla bilgi için lütfen bkz [bu makalede](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="6aff2-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="6aff2-231">Merhaba Küme Kaynak Yöneticisi durum bilgisi olan hizmetler toospecify kendi ana ve ikincil farklı varsayılan yük olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="6aff2-232">Durum bilgisi olmayan hizmetler yalnızca tooall örnekleri geçerli bir değer belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="6aff2-233">Durum bilgisi olan hizmetler için birincil ve ikincil çoğaltmalar için hello varsayılan Yük genellikle farklı çoğaltmaların her rol işlerinde farklı türde yapmak bu yana.</span><span class="sxs-lookup"><span data-stu-id="6aff2-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="6aff2-234">Örneğin, ana genellikle okuma ve yazma işlemleri hizmet ve kullanırken ikinciller hello hesaplama yük çoğunu işleyecek.</span><span class="sxs-lookup"><span data-stu-id="6aff2-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="6aff2-235">Genellikle bir birincil çoğaltma için hello varsayılan yük hello varsayılan yük ikincil çoğaltmalar için daha yüksektir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="6aff2-236">Merhaba gerçek sayılar, kendi ölçü bağımlı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="6aff2-237">Dinamik yük</span><span class="sxs-lookup"><span data-stu-id="6aff2-237">Dynamic load</span></span>
<span data-ttu-id="6aff2-238">Hizmetiniz bir süredir çalışıyor varsayalım.</span><span class="sxs-lookup"><span data-stu-id="6aff2-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="6aff2-239">Bazı izleme ile, fark ettim:</span><span class="sxs-lookup"><span data-stu-id="6aff2-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="6aff2-240">Bazı bölümleri veya belirli bir hizmeti örnekleri diğerlerinden daha fazla kaynak tüketmesine</span><span class="sxs-lookup"><span data-stu-id="6aff2-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="6aff2-241">Bazı hizmetleri zaman içinde değişir yük sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="6aff2-242">Birçok yük dalgalanmaları bu tür neden olabilecek bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="6aff2-243">Örneğin, farklı hizmetler veya bölümleri farklı gereksinimlere sahip farklı müşteriler ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="6aff2-244">Merhaba tutar iş hello hizmetinin değiştiğinden hello hello gün süresince yükü de değişebilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="6aff2-245">Merhaba nedenle bağımsız olarak, genellikle varsayılan kullanabilirsiniz ve tek bir sayı yoktur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="6aff2-246">Merhaba küme dışında çoğu kullanımı tooget hello istiyorsanız, bu özellikle doğrudur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="6aff2-247">Varsayılan yükleme için çekme herhangi bir değer hello zaman bazıları yanlış olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="6aff2-248">Yanlış varsayılan hello Küme Kaynak Yöneticisi üzerinden veya kaynak ayırma altında sonucunda yükler.</span><span class="sxs-lookup"><span data-stu-id="6aff2-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="6aff2-249">Sonuç olarak, hello küme dengeli hello küme Resource Manager düşündüğü olsa da, üzerinde veya altında kullanılan düğümlerin vardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="6aff2-250">Varsayılan yükleri ilk yerleştirme için bazı bilgiler sağlar, ancak gerçek iş yükleri için tam bir öykü olmadıklarını beri hala iyidir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="6aff2-251">kaynak gereksinimleri, hello Küme Kaynak Yöneticisi'ni değiştirerek tooaccurately yakalama her hizmet nesnesi tooupdate çalışma zamanı sırasında kendi yük sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="6aff2-252">Bu, dinamik yük raporlama çağrılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="6aff2-253">Dinamik yük raporları kendi ayırma ve bildirilen yük ölçümleri kendi ömürleri boyunca çoğaltmalar veya örnekleri tooadjust izin verir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="6aff2-254">Bir hizmet çoğaltma veya soğuk ve herhangi bir iş yapmamanın örneğini genellikle belirli bir metrik düşük miktarda tarafından kullanılan raporlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="6aff2-255">Meşgul çoğaltma veya örnek daha kullandıkları raporlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="6aff2-256">Çoğaltma veya örnek başına yük raporlama hello küme Resource Manager tooreorganize hello kümede hello bireysel hizmet nesneleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="6aff2-257">Merhaba hizmetleri yeniden düzenleme gereksinim duydukları hello kaynakları alma sağlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="6aff2-258">Meşgul Hizmetleri etkili bir şekilde çok "diğer çoğaltmaları veya şu anda soğuk veya daha az çalışarak olan örnekleri kaynaklarınızı geri" alın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="6aff2-259">Güvenilir hizmetler içinde hello kod tooreport yük dinamik olarak şöyle:</span><span class="sxs-lookup"><span data-stu-id="6aff2-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="6aff2-260">Kod:</span><span class="sxs-lookup"><span data-stu-id="6aff2-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="6aff2-261">Bir hizmet oluşturma sırasında tanımlı hello ölçümleri hiçbirinde bildirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="6aff2-262">Service Fabric olmayan bir ölçüm için bir hizmet raporları yükü toouse yapılandırdıysanız, bu raporu yok sayar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="6aff2-263">Varsa diğer ölçümleri hello aynı bildirilen bu raporları kabul edilir geçerli süre.</span><span class="sxs-lookup"><span data-stu-id="6aff2-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="6aff2-264">Servis kodu ölçmek ve tüm hello bunu bilen ölçümleri rapor için nasıl ve işleçler toochange hello servis kodu gerek kalmadan hello ölçüm yapılandırma toouse belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6aff2-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="6aff2-265">Bir hizmetin ölçüm yapılandırmasını güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="6aff2-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="6aff2-266">Ölçüm Hello listesine hello hizmetiyle ilişkili ve bu ölçümleri hello özelliklerini, Canlı Merhaba hizmeti çalışırken dinamik olarak güncelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="6aff2-267">Bu deneme ve esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="6aff2-268">Bazı örnekler bu yararlı olduğunda şunlardır:</span><span class="sxs-lookup"><span data-stu-id="6aff2-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="6aff2-269">belirli bir hizmet için buggy rapora bir ölçüm devre dışı bırakma</span><span class="sxs-lookup"><span data-stu-id="6aff2-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="6aff2-270">İstenen davranışı temelinde ölçümleri Hello ağırlıkları yeniden yapılandırma</span><span class="sxs-lookup"><span data-stu-id="6aff2-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="6aff2-271">yalnızca hello kodu zaten dağıtıldığını ve diğer mekanizmalar doğrulanmış sonra yeni bir ölçümü etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="6aff2-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="6aff2-272">Merhaba varsayılan yük gözlemlenen davranışı ve tüketim dayalı bir hizmet için değiştirme</span><span class="sxs-lookup"><span data-stu-id="6aff2-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="6aff2-273">Merhaba ölçüm yapılandırmasını değiştirmek için ana apı'leridir `FabricClient.ServiceManagementClient.UpdateServiceAsync` C# ve `Update-ServiceFabricService` PowerShell'de.</span><span class="sxs-lookup"><span data-stu-id="6aff2-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="6aff2-274">Bu API'leri ile belirttiğiniz ne olursa olsun bilgileri hemen varolan Ölçüm bilgilerini hello hizmet hello yerine geçer.</span><span class="sxs-lookup"><span data-stu-id="6aff2-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="6aff2-275">Varsayılan yükleme değerlerini ve dinamik yük raporları karıştırma</span><span class="sxs-lookup"><span data-stu-id="6aff2-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="6aff2-276">Varsayılan yükleme ve dinamik yükleri hello için kullanılan aynı hizmet.</span><span class="sxs-lookup"><span data-stu-id="6aff2-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="6aff2-277">Varsayılan yükleme ve dinamik yük raporları bir hizmet kullanan, dinamik raporlar görünmesini kadar varsayılan yük tahmini olarak görür.</span><span class="sxs-lookup"><span data-stu-id="6aff2-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="6aff2-278">Varsayılan yükleme iyi çünkü toowork ile Merhaba Küme Kaynak Yöneticisi'ni bir şey sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="6aff2-279">oluşturuldukları sırada hello varsayılan yük hello küme Resource Manager tooplace iyi konumları hello hizmet nesneleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="6aff2-280">Varsayılan yükleme bilgi sağlanırsa, hizmetleri yerleşimini etkili bir şekilde rastgele belirlenir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="6aff2-281">Yük raporları daha sonra geldiğinde hello ilk rastgele yerleştirme genellikle yanlış olup hello küme Resource Manager toomove hizmetleri içerir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="6aff2-282">Şimdi önceki örneğimizde alın ve bazı özel ölçümleri ve dinamik yük raporlama eklediğimiz ne olur bakın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="6aff2-283">Bu örnekte, bir örnek ölçümü "MemoryInMb" kullanırız.</span><span class="sxs-lookup"><span data-stu-id="6aff2-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="6aff2-284">Bellek Service Fabric olabilir hello sistem ölçümleri biridir [kaynak yöneten](service-fabric-resource-governance.md), ve kendiniz raporlama genellikle zordur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="6aff2-285">Aslında, tooreport bellek tüketimi bekliyoruz yoktur; Kullanılan bellek burada yardımcı toolearning hello küme Resource Manager hello yetenekleriyle ilgili olarak.</span><span class="sxs-lookup"><span data-stu-id="6aff2-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="6aff2-286">Şimdi başlangıçta hello durum bilgisi olan hizmet komutu aşağıdaki hello ile oluşturduğumuz olduğunu varsayın:</span><span class="sxs-lookup"><span data-stu-id="6aff2-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="6aff2-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="6aff2-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="6aff2-288">Bir anımsatıcı bu söz dizimi ("MetricName MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad") değil.</span><span class="sxs-lookup"><span data-stu-id="6aff2-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="6aff2-289">Hangi bir olası küme düzeni gibi görünebilir görelim:</span><span class="sxs-lookup"><span data-stu-id="6aff2-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="6aff2-290"><center>
![Küme dengeli hem varsayılan hem de özel ölçümlerle][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="6aff2-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="6aff2-291">Belirtmeye değer olan bazı noktalar:</span><span class="sxs-lookup"><span data-stu-id="6aff2-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="6aff2-292">Bölüm içindeki ikincil çoğaltmaları her kendi yük olabilir</span><span class="sxs-lookup"><span data-stu-id="6aff2-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="6aff2-293">Genel hello ölçümleri dengeli arayın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="6aff2-294">Bellek için en fazla hello arasındaki oran hello ve en düşük yüktür 1.75 (Merhaba düğümü ile Merhaba çoğu yük N3, hello az N2 ve 28/16 1.75 =).</span><span class="sxs-lookup"><span data-stu-id="6aff2-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="6aff2-295">Biz yine tooexplain gereken bazı şeyler vardır:</span><span class="sxs-lookup"><span data-stu-id="6aff2-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="6aff2-296">Ne 1.75 oranını makul olup olmadığını belirledi?</span><span class="sxs-lookup"><span data-stu-id="6aff2-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="6aff2-297">Merhaba Küme Kaynak Yöneticisi'ni nasıl yeterince iyi veya daha fazla iş toodo ise biliyor?</span><span class="sxs-lookup"><span data-stu-id="6aff2-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="6aff2-298">Ne zaman Dengeleme oluşuyor?</span><span class="sxs-lookup"><span data-stu-id="6aff2-298">When does balancing happen?</span></span>
* <span data-ttu-id="6aff2-299">Ne bellek "Yüksek" ağırlıklı olduğunu anlama geliyor?</span><span class="sxs-lookup"><span data-stu-id="6aff2-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="6aff2-300">Ölçüm ağırlığı</span><span class="sxs-lookup"><span data-stu-id="6aff2-300">Metric weights</span></span>
<span data-ttu-id="6aff2-301">İzleme hello aynı ölçümleri farklı hizmetlerde önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="6aff2-302">Genel Görünüm ne hello kümedeki küme Resource Manager tootrack tüketim Merhaba, düğümlere tüketim dengelemek ve düğüm kapasitesi geçmez emin olun sağlar olduğunu.</span><span class="sxs-lookup"><span data-stu-id="6aff2-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="6aff2-303">Bununla birlikte, farklı görünümleri hello toohello önem olarak Hizmetleri olabilir aynı Ölçüm.</span><span class="sxs-lookup"><span data-stu-id="6aff2-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="6aff2-304">Ayrıca, birçok ölçümleri ve çok sayıda Hizmetleri ile bir kümede mükemmel dengeli çözümleri için tüm ölçümleri var olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="6aff2-305">Merhaba küme kaynak yöneticisi bu gibi durumlarda nasıl yöneteceğini?</span><span class="sxs-lookup"><span data-stu-id="6aff2-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="6aff2-306">Ölçüm ağırlığı hello Küme Kaynak Yöneticisi'ni nasıl toobalance hello küme kusursuz yanıt olduğunda toodecide izin verir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="6aff2-307">Ölçüm ağırlığı da hello küme Resource Manager toobalance belirli hizmetleri farklı olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="6aff2-308">Ölçümleri dört farklı ağırlık düzeyine sahip olabilir: sıfır, düşük, Orta ve yüksek.</span><span class="sxs-lookup"><span data-stu-id="6aff2-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="6aff2-309">Ölçüm ağırlık sıfır hiçbir şey veya dengeli değerlendirirken katkıda bulunur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="6aff2-310">Ancak, kendi yük hala toocapacity yönetim katkıda.</span><span class="sxs-lookup"><span data-stu-id="6aff2-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="6aff2-311">Ölçümleri sıfır ağırlık ile hala faydalıdır ve sık hizmet davranışı ve performans izleme işleminin bir parçası olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="6aff2-312">[Bu makalede](service-fabric-diagnostics-event-generation-infra.md) hello kullanım ölçümleri izleme ve Tanılama, hizmetlerin üzerinde daha fazla bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="6aff2-313">Merhaba gerçek hello kümedeki farklı ölçüm ağırlığı küme Resource Manager'ı hello farklı çözümler oluşturur etkisidir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="6aff2-314">Ölçüm ağırlığı hello Küme Kaynak Yöneticisi'ni, belirli ölçümleri diğerlerinden daha önemli söyleyin.</span><span class="sxs-lookup"><span data-stu-id="6aff2-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="6aff2-315">Hiçbir kusursuz çözüm hello olduğunda Küme Kaynak Yöneticisi'ni hello yüksek ağırlıklı ölçümleri daha iyi dengeleyen çözümleri tercih.</span><span class="sxs-lookup"><span data-stu-id="6aff2-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="6aff2-316">Bir hizmeti belirli bir ölçüm düşündüğü varsa bu ölçümün kullanımlarını imbalanced bulabilirsiniz önemli değildir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="6aff2-317">Bu, başka bir hizmet tooget önemli tooit olan bazı ölçüm bile bir dağıtımını sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="6aff2-318">Bazı yük raporları ve nasıl farklı ölçümü bir örneğe bakalım hello kümedeki farklı ayırmaları sonuçlarında ağırlık verir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="6aff2-319">Bu örnekte, hello göreli ağırlık hello ölçümleri geçiş hello küme Resource Manager toocreate Hizmetleri farklı düzenlenişlerini neden olduğunu bakın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="6aff2-320"><center>
![Ölçüm ağırlık örnek ve Dengeleme çözümlerini üzerindeki etkisini][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="6aff2-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="6aff2-321">Bu örnekte, dört farklı hizmetler, MetricA ve MetricB olmak üzere iki farklı ölçümleri için tüm raporlama farklı değerler vardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="6aff2-322">Bir durumda, tüm hello Hizmetleri MetricA tanımlamak hello en önemli sunucudur (ağırlık yüksek =) ve önemli olarak MetricB (ağırlık düşük =).</span><span class="sxs-lookup"><span data-stu-id="6aff2-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="6aff2-323">Sonuç olarak, bu hello Küme Kaynak Yöneticisi, hello Hizmetleri yerleştirir, böylece MetricA daha iyi MetricB dengeli bakın.</span><span class="sxs-lookup"><span data-stu-id="6aff2-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="6aff2-324">"Daha iyi dengelenmiş" anlamına gelir MetricA düşük olduğunu MetricB daha düşük bir standart sapma vardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="6aff2-325">Merhaba ikinci durumda, biz hello ölçüm ağırlığı ters çevrilir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="6aff2-326">Sonuç olarak, hello küme kaynak yöneticisi hizmetleri A ve B toocome yukarı MetricB daha iyi MetricA dengeli olduğu bir ayırma ile değiştirir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="6aff2-327">Ölçüm ağırlığı hello Küme Kaynak Yöneticisi'ni nasıl dengelemeniz, ancak değil zaman Dengeleme olacağını belirler.</span><span class="sxs-lookup"><span data-stu-id="6aff2-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="6aff2-328">Dengeleme hakkında daha fazla bilgi için kullanıma [bu makalede](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="6aff2-329">Genel ölçüm ağırlığı</span><span class="sxs-lookup"><span data-stu-id="6aff2-329">Global metric weights</span></span>
<span data-ttu-id="6aff2-330">Diyelim ki ServiceA yüksek ağırlık olarak MetricA tanımlar ve ServiceB MetricA tooLow veya sıfır hello ağırlık ayarlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="6aff2-331">Kullanılan alma sona eriyor hello gerçek ağırlık nedir?</span><span class="sxs-lookup"><span data-stu-id="6aff2-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="6aff2-332">Her ölçüm için izlenen birden çok ağırlıkları vardır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="6aff2-333">Merhaba ilk ağırlık hello hello hizmet oluşturulduğunda hello ölçüm için tanımlı tek ' dir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="6aff2-334">Merhaba başka ağırlığını otomatik olarak hesaplanır genel ağırlık olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="6aff2-335">Bu iki ağırlıkları çözümleri Puanlama Hello Küme Kaynak Yöneticisi'ni kullanır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="6aff2-336">Her iki ağırlıkları dikkate alarak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-336">Taking both weights into account is important.</span></span> <span data-ttu-id="6aff2-337">Bu hello küme Resource Manager toobalance according tooits önceliklere sahip ve bir bütün doğru ayrılmış olarak bu hello küme ayrıca olun her hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="6aff2-338">Hello küme Resource Manager için hem genel hem de yerel Bakiye hakkında önemli alamadık neler olacağını?</span><span class="sxs-lookup"><span data-stu-id="6aff2-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="6aff2-339">İyi, kolay tooconstruct çözümleri genel dengeli ancak, tek tek Hizmetleri için yetersiz kaynak dengesindeki neden olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="6aff2-340">Merhaba, aşağıdaki örnek, şimdi yalnızca hello varsayılan ölçümleri ile yapılandırılmış bir hizmet bakın ve yalnızca genel Bakiye kabul ne olur bakın:</span><span class="sxs-lookup"><span data-stu-id="6aff2-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="6aff2-341"><center>
![Merhaba genel yalnızca çözüm etkisi][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="6aff2-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="6aff2-342">Yalnızca genel bakiyesi dayalı hello üst örnekte, bir bütün olarak hello küme gerçekten dengelenir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="6aff2-343">Tüm düğümler aynı sayısı ana ve aynı hello hello sahip toplam çoğaltmaları sayı.</span><span class="sxs-lookup"><span data-stu-id="6aff2-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="6aff2-344">Merhaba gerçek etkisini bu ayırma sırasında bakarsanız ancak, bu nedenle iyi değil: tüm kendi ana aldığından herhangi bir düğümün hello kaybı belirli bir iş yükünü orantısız, etkiler..</span><span class="sxs-lookup"><span data-stu-id="6aff2-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="6aff2-345">Merhaba üç farklı bölümlerini hello daire hizmeti için üç ana hello Hello ilk düğüm başarısız olursa Örneğin, tümü kaybolur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="6aff2-346">Buna karşılık, hello üçgen ve Altıgene Hizmetleri bir çoğaltma kaybetmek bölümlerinin sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="6aff2-347">Bu, çoğaltma aşağı toorecover hello olması dışında bir kesintiye neden olur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="6aff2-348">Hello altındaki örnekte hello küme Resource Manager hem hello genel ve hizmet başına bakiyesi dayalı hello çoğaltmaları dağıtılmış.</span><span class="sxs-lookup"><span data-stu-id="6aff2-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="6aff2-349">Merhaba çözüm Hello puanı hesaplanırken hello ağırlık toohello genel çözüm ve (yapılandırılabilir) bölümü tooindividual hizmetlerinin çoğunu sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="6aff2-350">Ölçüm için genel bakiyesi hello ölçüm ağırlığı her hizmetinden hello ortalaması alınarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="6aff2-351">Her hizmet according tooits kendi tanımlı ölçüm ağırlığı dengelenir.</span><span class="sxs-lookup"><span data-stu-id="6aff2-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="6aff2-352">Bu, hello Hizmetleri kendilerini içinde tootheir kendi gereksinimlerine göre dengelendiğini sağlar.</span><span class="sxs-lookup"><span data-stu-id="6aff2-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="6aff2-353">Sonuç olarak, tüm hizmetlerin tüm bölümler Hello aynı ilk düğüm başarısız hello başarısız olursa dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="6aff2-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="6aff2-354">Merhaba etkisi tooeach olan hello aynı.</span><span class="sxs-lookup"><span data-stu-id="6aff2-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6aff2-355">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="6aff2-355">Next steps</span></span>
- <span data-ttu-id="6aff2-356">Hizmetleri yapılandırma hakkında daha fazla bilgi için [hizmetleri yapılandırma hakkında bilgi edinin](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="6aff2-357">Birleştirme ölçümleri tanımlama tek yönlü tooconsolidate yayılmak yerine düğümlerde yüktür. toolearn nasıl tooconfigure birleştirme, çok bakın[bu makalede](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="6aff2-358">toofind hello Küme Kaynak Yöneticisi yönetir ve dengeleyen hello kümedeki yük hakkında hello makalesine üzerinde kullanıma [Yük Dengeleme](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="6aff2-359">Merhaba baştan başlatın ve [giriş toohello Service Fabric kümesi Kaynak Yöneticisi Al](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="6aff2-360">Taşıma maliyeti belirli hizmetleri diğerlerinden daha pahalı toomove olduğunu toohello küme Resource Manager sinyal bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="6aff2-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="6aff2-361">Taşıma maliyeti hakkında daha fazla toolearn başvurmak çok[bu makalede](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="6aff2-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
