---
title: "Azure Service Fabric güvenilir koleksiyonları ve kilit modlarında aaaTransactions | Microsoft Docs"
description: "Azure Service Fabric güvenilir durum Yöneticisi ve güvenilir koleksiyonları işlemleri ve kilitleme."
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: masnider,rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/1/2017
ms.author: mcoskun
ms.openlocfilehash: 340e029aa98f43ad6e46b48f687dad01f9d96f69
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="transactions-and-lock-modes-in-azure-service-fabric-reliable-collections"></a><span data-ttu-id="5962b-103">İşlemler ve Azure Service Fabric güvenilir koleksiyonları kilit modu</span><span class="sxs-lookup"><span data-stu-id="5962b-103">Transactions and lock modes in Azure Service Fabric Reliable Collections</span></span>

## <a name="transaction"></a><span data-ttu-id="5962b-104">İşlem</span><span class="sxs-lookup"><span data-stu-id="5962b-104">Transaction</span></span>
<span data-ttu-id="5962b-105">Bir işlem, tek bir mantıksal birim iş olarak gerçekleştirilen işlemler dizisidir.</span><span class="sxs-lookup"><span data-stu-id="5962b-105">A transaction is a sequence of operations performed as a single logical unit of work.</span></span>
<span data-ttu-id="5962b-106">Bir işlem ACID özellikleri aşağıdaki hello göstermesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="5962b-106">A transaction must exhibit hello following ACID properties.</span></span> <span data-ttu-id="5962b-107">(bkz: https://technet.microsoft.com/en-us/library/ms190612)</span><span class="sxs-lookup"><span data-stu-id="5962b-107">(see: https://technet.microsoft.com/en-us/library/ms190612)</span></span>
* <span data-ttu-id="5962b-108">**Kararlılık**: atomik bir iş birimine bir işlem olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5962b-108">**Atomicity**: A transaction must be an atomic unit of work.</span></span> <span data-ttu-id="5962b-109">Diğer bir deyişle, tüm veri değişiklikleri gerçekleştirilen ya da bunların hiçbiri gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="5962b-109">In other words, either all its data modifications are performed, or none of them is performed.</span></span>
* <span data-ttu-id="5962b-110">**Tutarlılık**: tamamlandığında, bir işlem tüm verileri tutarlı bir durumda bırakmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5962b-110">**Consistency**: When completed, a transaction must leave all data in a consistent state.</span></span> <span data-ttu-id="5962b-111">Tüm iç veri yapılarını hello hello işlem sonunda doğru olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="5962b-111">All internal data structures must be correct at hello end of hello transaction.</span></span>
* <span data-ttu-id="5962b-112">**Yalıtım**: eşzamanlı işlemler tarafından yapılan değişiklikler diğer eşzamanlı işlemler tarafından yapılan hello değişiklikler üzerinden olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5962b-112">**Isolation**: Modifications made by concurrent transactions must be isolated from hello modifications made by any other concurrent transactions.</span></span> <span data-ttu-id="5962b-113">bir ITransaction içinde bir işlem için kullanılan hello yalıtım düzeyi hello IReliableState gerçekleştirme hello işlemi tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="5962b-113">hello isolation level used for an operation within an ITransaction is determined by hello IReliableState performing hello operation.</span></span>
* <span data-ttu-id="5962b-114">**Dayanıklılık**: bir işlem tamamlandıktan sonra etkileri kalıcı olarak hello sistemde karşılandığından.</span><span class="sxs-lookup"><span data-stu-id="5962b-114">**Durability**: After a transaction has completed, its effects are permanently in place in hello system.</span></span> <span data-ttu-id="5962b-115">Merhaba değişiklikler bile hello olayda bir sistem hatasının kalıcı olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="5962b-115">hello modifications persist even in hello event of a system failure.</span></span>

### <a name="isolation-levels"></a><span data-ttu-id="5962b-116">Yalıtım düzeyi</span><span class="sxs-lookup"><span data-stu-id="5962b-116">Isolation levels</span></span>
<span data-ttu-id="5962b-117">Yalıtım düzeyi tanımlar hello derece toowhich hello işlem diğer işlemler tarafından yapılan değişiklikler üzerinden olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5962b-117">Isolation level defines hello degree toowhich hello transaction must be isolated from modifications made by other transactions.</span></span>
<span data-ttu-id="5962b-118">Güvenilir koleksiyonlarda desteklenen iki yalıtım düzeyi vardır:</span><span class="sxs-lookup"><span data-stu-id="5962b-118">There are two isolation levels that are supported in Reliable Collections:</span></span>

* <span data-ttu-id="5962b-119">**Yinelenebilir Okuma**: deyimleri değiştirildi, ancak henüz diğer işlemler tarafından kaydedilen veri okunamıyor ve başka bir işlem hello geçerli kadar hello geçerli işlem tarafından okunur verileri değiştirebilir belirtir işlem tamamlanır.</span><span class="sxs-lookup"><span data-stu-id="5962b-119">**Repeatable Read**: Specifies that statements cannot read data that has been modified but not yet committed by other transactions and that no other transactions can modify data that has been read by hello current transaction until hello current transaction finishes.</span></span> <span data-ttu-id="5962b-120">Daha fazla ayrıntı için bkz: [https://msdn.microsoft.com/library/ms173763.aspx](https://msdn.microsoft.com/library/ms173763.aspx).</span><span class="sxs-lookup"><span data-stu-id="5962b-120">For more details, see [https://msdn.microsoft.com/library/ms173763.aspx](https://msdn.microsoft.com/library/ms173763.aspx).</span></span>
* <span data-ttu-id="5962b-121">**Anlık Görüntü**: bir işlemde herhangi bir deyim tarafından okunan veriler hello işlemsel olarak tutarlı hello hello işlem başlangıcında var hello veri sürümü olup olmadığını belirtir.</span><span class="sxs-lookup"><span data-stu-id="5962b-121">**Snapshot**: Specifies that data read by any statement in a transaction is hello transactionally consistent version of hello data that existed at hello start of hello transaction.</span></span>
  <span data-ttu-id="5962b-122">Merhaba işlem yalnızca hello işlem hello başlamadan önce kaydedilmiş veri değişiklikleri tanıyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5962b-122">hello transaction can recognize only data modifications that were committed before hello start of hello transaction.</span></span>
  <span data-ttu-id="5962b-123">Merhaba hello geçerli işlemi başladıktan sonra diğer işlemler tarafından yapılan veri değişiklikleri hello geçerli işlemde yürütme görünür toostatements değildir.</span><span class="sxs-lookup"><span data-stu-id="5962b-123">Data modifications made by other transactions after hello start of hello current transaction are not visible toostatements executing in hello current transaction.</span></span>
  <span data-ttu-id="5962b-124">Merhaba hello hello işlem başlangıcında var gibi hello bir işlemde hello kaydedilen verilerin bir anlık görüntüsünü get deyimleri gibi etkisidir.</span><span class="sxs-lookup"><span data-stu-id="5962b-124">hello effect is as if hello statements in a transaction get a snapshot of hello committed data as it existed at hello start of hello transaction.</span></span>
  <span data-ttu-id="5962b-125">Anlık görüntüler güvenilir koleksiyonlar genelinde tutarlı değil.</span><span class="sxs-lookup"><span data-stu-id="5962b-125">Snapshots are consistent across Reliable Collections.</span></span>
  <span data-ttu-id="5962b-126">Daha fazla ayrıntı için bkz: [https://msdn.microsoft.com/library/ms173763.aspx](https://msdn.microsoft.com/library/ms173763.aspx).</span><span class="sxs-lookup"><span data-stu-id="5962b-126">For more details, see [https://msdn.microsoft.com/library/ms173763.aspx](https://msdn.microsoft.com/library/ms173763.aspx).</span></span>

<span data-ttu-id="5962b-127">Güvenilir koleksiyonları hello yalıtım düzeyi toouse hareketin oluşturma hello zamanında hello işlemi ve hello çoğaltma hello rolü bağlı olarak belirli bir okuma işlemi için otomatik olarak seçin.</span><span class="sxs-lookup"><span data-stu-id="5962b-127">Reliable Collections automatically choose hello isolation level toouse for a given read operation depending on hello operation and hello role of hello replica at hello time of transaction's creation.</span></span>
<span data-ttu-id="5962b-128">Güvenilir sözlük ve sıra işlemleri için yalıtım düzeyi varsayılan değerlerini gösterir hello tablosu aşağıdadır.</span><span class="sxs-lookup"><span data-stu-id="5962b-128">Following is hello table that depicts isolation level defaults for Reliable Dictionary and Queue operations.</span></span>

| <span data-ttu-id="5962b-129">İşlem \ rolü</span><span class="sxs-lookup"><span data-stu-id="5962b-129">Operation \ Role</span></span> | <span data-ttu-id="5962b-130">Birincil</span><span class="sxs-lookup"><span data-stu-id="5962b-130">Primary</span></span> | <span data-ttu-id="5962b-131">İkincil</span><span class="sxs-lookup"><span data-stu-id="5962b-131">Secondary</span></span> |
| --- |:--- |:--- |
| <span data-ttu-id="5962b-132">Tek varlık okuma</span><span class="sxs-lookup"><span data-stu-id="5962b-132">Single Entity Read</span></span> |<span data-ttu-id="5962b-133">Yinelenebilir Okuma</span><span class="sxs-lookup"><span data-stu-id="5962b-133">Repeatable Read</span></span> |<span data-ttu-id="5962b-134">Anlık Görüntü</span><span class="sxs-lookup"><span data-stu-id="5962b-134">Snapshot</span></span> |
| <span data-ttu-id="5962b-135">Numaralandırma, sayısı</span><span class="sxs-lookup"><span data-stu-id="5962b-135">Enumeration, Count</span></span> |<span data-ttu-id="5962b-136">Anlık Görüntü</span><span class="sxs-lookup"><span data-stu-id="5962b-136">Snapshot</span></span> |<span data-ttu-id="5962b-137">Anlık Görüntü</span><span class="sxs-lookup"><span data-stu-id="5962b-137">Snapshot</span></span> |

> [!NOTE]
> <span data-ttu-id="5962b-138">Tek varlık işlemleri için ortak örnekler `IReliableDictionary.TryGetValueAsync`, `IReliableQueue.TryPeekAsync`.</span><span class="sxs-lookup"><span data-stu-id="5962b-138">Common examples for Single Entity Operations are `IReliableDictionary.TryGetValueAsync`, `IReliableQueue.TryPeekAsync`.</span></span>
> 

<span data-ttu-id="5962b-139">Merhaba güvenilir sözlük ve hello güvenilir sıra okuma bilgisayarınızı Yazar destekler.</span><span class="sxs-lookup"><span data-stu-id="5962b-139">Both hello Reliable Dictionary and hello Reliable Queue support Read Your Writes.</span></span>
<span data-ttu-id="5962b-140">Diğer bir deyişle, herhangi bir işlem içinde olması görünür tooa aşağıdaki okuyup okumayacağını toohello ait yazma aynı işlem.</span><span class="sxs-lookup"><span data-stu-id="5962b-140">In other words, any write within a transaction will be visible tooa following read that belongs toohello same transaction.</span></span>

## <a name="locks"></a><span data-ttu-id="5962b-141">Kilitler</span><span class="sxs-lookup"><span data-stu-id="5962b-141">Locks</span></span>
<span data-ttu-id="5962b-142">Kilitleme güvenilir koleksiyonlarında tüm işlemleri uygulama sıkı iki aşama: bir işlem alınan bir durdurma veya bir yürütme ile Merhaba işlem sonlanana kadar hello kilitleri bırakmaz.</span><span class="sxs-lookup"><span data-stu-id="5962b-142">In Reliable Collections, all transactions implement rigorous two phase locking: a transaction does not release hello locks it has acquired until hello transaction terminates with either an abort or a commit.</span></span>

<span data-ttu-id="5962b-143">Güvenilir sözlüğü satır düzeyinde tüm tek bir varlık işlemler için kilitleme kullanır.</span><span class="sxs-lookup"><span data-stu-id="5962b-143">Reliable Dictionary uses row level locking for all single entity operations.</span></span>
<span data-ttu-id="5962b-144">Eşzamanlılık katı işlem FIFO özelliği için devre dışı güvenilir sıra trades.</span><span class="sxs-lookup"><span data-stu-id="5962b-144">Reliable Queue trades off concurrency for strict transactional FIFO property.</span></span>
<span data-ttu-id="5962b-145">Güvenilir kuyruğu kullanan bir işlemle izin verme işlemi düzeyi kilitleri `TryPeekAsync` ve/veya `TryDequeueAsync` ve bir işlemle `EnqueueAsync` birer birer.</span><span class="sxs-lookup"><span data-stu-id="5962b-145">Reliable Queue uses operation level locks allowing one transaction with `TryPeekAsync` and/or `TryDequeueAsync` and one transaction with `EnqueueAsync` at a time.</span></span>
<span data-ttu-id="5962b-146">Bu toopreserve FIFO, Not bir `TryPeekAsync` veya `TryDequeueAsync` hiç gözlemleyen hello güvenilir sıra boşsa, ayrıca kilitleyecek `EnqueueAsync`.</span><span class="sxs-lookup"><span data-stu-id="5962b-146">Note that toopreserve FIFO, if a `TryPeekAsync` or `TryDequeueAsync` ever observes that hello Reliable Queue is empty, they will also lock `EnqueueAsync`.</span></span>

<span data-ttu-id="5962b-147">Yazma işlemlerinin her zaman özel kilit alıyor.</span><span class="sxs-lookup"><span data-stu-id="5962b-147">Write operations always take Exclusive locks.</span></span>
<span data-ttu-id="5962b-148">Okuma işlemleri için hello kilitleme, birkaç etkene bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="5962b-148">For read operations, hello locking depends on a couple of factors.</span></span>
<span data-ttu-id="5962b-149">Anlık görüntü yalıtımı kullanılarak gerçekleştirilen okuma işlemi kilidi serbest ' dir.</span><span class="sxs-lookup"><span data-stu-id="5962b-149">Any read operation done using Snapshot isolation is lock free.</span></span>
<span data-ttu-id="5962b-150">Varsayılan olarak tüm yinelenebilir okuma işlemi paylaşılan kilitleri alır.</span><span class="sxs-lookup"><span data-stu-id="5962b-150">Any Repeatable Read operation by default takes Shared locks.</span></span>
<span data-ttu-id="5962b-151">Ancak, yinelenebilir okuma destekleyen tüm okuma işlemi için hello kullanıcı hello paylaşılan kilit yerine bir güncelleştirme kilidi isteyebilir.</span><span class="sxs-lookup"><span data-stu-id="5962b-151">However, for any read operation that supports Repeatable Read, hello user can ask for an Update lock instead of hello Shared lock.</span></span>
<span data-ttu-id="5962b-152">Bir güncelleştirme kilidi asimetrik kilit tooprevent birden çok işlem kaynakları daha sonraki bir zamanda potansiyel güncelleştirmeleri kilitlediğinizde gerçekleşen kilitlenme ortak biçimi kullanılır.</span><span class="sxs-lookup"><span data-stu-id="5962b-152">An Update lock is an asymmetric lock used tooprevent a common form of deadlock that occurs when multiple transactions lock resources for potential updates at a later time.</span></span>

<span data-ttu-id="5962b-153">Aşağıdaki tablonun hello Hello kilit uyumluluk matrisi bulunabilir:</span><span class="sxs-lookup"><span data-stu-id="5962b-153">hello lock compatibility matrix can be found in hello following table:</span></span>

| <span data-ttu-id="5962b-154">İstek \ verildi</span><span class="sxs-lookup"><span data-stu-id="5962b-154">Request \ Granted</span></span> | <span data-ttu-id="5962b-155">None</span><span class="sxs-lookup"><span data-stu-id="5962b-155">None</span></span> | <span data-ttu-id="5962b-156">Paylaşılan</span><span class="sxs-lookup"><span data-stu-id="5962b-156">Shared</span></span> | <span data-ttu-id="5962b-157">Güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5962b-157">Update</span></span> | <span data-ttu-id="5962b-158">Özel</span><span class="sxs-lookup"><span data-stu-id="5962b-158">Exclusive</span></span> |
| --- |:--- |:--- |:--- |:--- |
| <span data-ttu-id="5962b-159">Paylaşılan</span><span class="sxs-lookup"><span data-stu-id="5962b-159">Shared</span></span> |<span data-ttu-id="5962b-160">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-160">No conflict</span></span> |<span data-ttu-id="5962b-161">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-161">No conflict</span></span> |<span data-ttu-id="5962b-162">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-162">Conflict</span></span> |<span data-ttu-id="5962b-163">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-163">Conflict</span></span> |
| <span data-ttu-id="5962b-164">Güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5962b-164">Update</span></span> |<span data-ttu-id="5962b-165">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-165">No conflict</span></span> |<span data-ttu-id="5962b-166">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-166">No conflict</span></span> |<span data-ttu-id="5962b-167">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-167">Conflict</span></span> |<span data-ttu-id="5962b-168">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-168">Conflict</span></span> |
| <span data-ttu-id="5962b-169">Özel</span><span class="sxs-lookup"><span data-stu-id="5962b-169">Exclusive</span></span> |<span data-ttu-id="5962b-170">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-170">No conflict</span></span> |<span data-ttu-id="5962b-171">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-171">Conflict</span></span> |<span data-ttu-id="5962b-172">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-172">Conflict</span></span> |<span data-ttu-id="5962b-173">Çakışma</span><span class="sxs-lookup"><span data-stu-id="5962b-173">Conflict</span></span> |

<span data-ttu-id="5962b-174">Zaman aşımı hello güvenilir koleksiyonları API'leri değişkeninde kilitlenme algılama için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="5962b-174">Time-out argument in hello Reliable Collections APIs is used for deadlock detection.</span></span>
<span data-ttu-id="5962b-175">Örneğin, iki işlemleri (T1 ve T2) tooread çalıştığınız ve K1 güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5962b-175">For example, two transactions (T1 and T2) are trying tooread and update K1.</span></span>
<span data-ttu-id="5962b-176">Bunlar için mümkündür toodeadlock, her ikisi de şunun için kilit sahip hello paylaşılan.</span><span class="sxs-lookup"><span data-stu-id="5962b-176">It is possible for them toodeadlock, because they both end up having hello Shared lock.</span></span>
<span data-ttu-id="5962b-177">Bu durumda, bir veya iki hello işlemlerinin zaman aşımına uğrar.</span><span class="sxs-lookup"><span data-stu-id="5962b-177">In this case, one or both of hello operations will time out.</span></span>

<span data-ttu-id="5962b-178">Bu kilitlenme senaryo, bir güncelleştirme kilidi kilitlenmeleri nasıl engelleyebilirsiniz, harika bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="5962b-178">This deadlock scenario is a great example of how an Update lock can prevent deadlocks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5962b-179">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="5962b-179">Next steps</span></span>
* [<span data-ttu-id="5962b-180">Güvenilir Koleksiyonlar ile çalışma</span><span class="sxs-lookup"><span data-stu-id="5962b-180">Working with Reliable Collections</span></span>](service-fabric-work-with-reliable-collections.md)
* [<span data-ttu-id="5962b-181">Güvenilir hizmetler bildirimleri</span><span class="sxs-lookup"><span data-stu-id="5962b-181">Reliable Services notifications</span></span>](service-fabric-reliable-services-notifications.md)
* [<span data-ttu-id="5962b-182">Güvenilir hizmetler yedekleme ve geri yükleme (olağanüstü durum kurtarma)</span><span class="sxs-lookup"><span data-stu-id="5962b-182">Reliable Services backup and restore (disaster recovery)</span></span>](service-fabric-reliable-services-backup-restore.md)
* [<span data-ttu-id="5962b-183">Güvenilir durum Yöneticisi yapılandırması</span><span class="sxs-lookup"><span data-stu-id="5962b-183">Reliable State Manager configuration</span></span>](service-fabric-reliable-services-configuration.md)
* [<span data-ttu-id="5962b-184">Güvenilir koleksiyonlar için Geliştirici Başvurusu</span><span class="sxs-lookup"><span data-stu-id="5962b-184">Developer reference for Reliable Collections</span></span>](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)

