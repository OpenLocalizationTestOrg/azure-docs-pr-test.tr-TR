---
title: Service Fabric uygulama izleme deposu olarak Elasticsearch aaaUsing | Microsoft Docs
description: "Service Fabric uygulamaları Elasticsearch ve Kibana toostore, dizin ve arama uygulama izlemelerini (günlükleri) ile nasıl kullanabileceğiniz açıklanır"
services: service-fabric
documentationcenter: .net
author: karolz-ms
manager: adegeo
editor: 
ms.assetid: e59b0c39-e468-4d9e-b453-d5f2a8ad20d8
ms.service: service-fabric
ms.devlang: dotNet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: karolz@microsoft.com
redirect_url: /azure/service-fabric/service-fabric-diagnostics-event-aggregation-eventflow
ms.openlocfilehash: b5977c54e69319e3caa376e44a02f971b66a3254
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="use-elasticsearch-as-a-service-fabric-application-trace-store"></a><span data-ttu-id="3ef44-103">Kullanım Elasticsearch Service Fabric uygulama izleme olarak depolama</span><span class="sxs-lookup"><span data-stu-id="3ef44-103">Use Elasticsearch as a Service Fabric application trace store</span></span>
## <a name="introduction"></a><span data-ttu-id="3ef44-104">Giriş</span><span class="sxs-lookup"><span data-stu-id="3ef44-104">Introduction</span></span>
<span data-ttu-id="3ef44-105">Bu makalede nasıl [Azure Service Fabric](https://azure.microsoft.com/documentation/services/service-fabric/) uygulamalar kullanabilir **Elasticsearch** ve **Kibana** uygulama izleme depolama, dizin oluşturma ve arama.</span><span class="sxs-lookup"><span data-stu-id="3ef44-105">This article describes how [Azure Service Fabric](https://azure.microsoft.com/documentation/services/service-fabric/) applications can use **Elasticsearch** and **Kibana** for application trace storage, indexing, and search.</span></span> <span data-ttu-id="3ef44-106">[Elasticsearch](https://www.elastic.co/guide/index.html) bu görev için oldukça uygun olan bir açık kaynaklı, dağıtılmış ve ölçeklenebilir gerçek zamanlı arama ve analizi altyapısıdır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-106">[Elasticsearch](https://www.elastic.co/guide/index.html) is an open-source, distributed, and scalable real-time search and analytics engine that is well-suited for this task.</span></span> <span data-ttu-id="3ef44-107">Windows ve Linux sanal makinelerde Microsoft Azure'da çalışan yüklenebilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-107">It can be installed on Windows and Linux virtual machines running in Microsoft Azure.</span></span> <span data-ttu-id="3ef44-108">Elasticsearch verimli bir şekilde işleyebilir *yapılandırılmış* gibi teknolojileri kullanmayı üretilen izlemeleri **olay izleme için Windows (ETW)**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-108">Elasticsearch can efficiently process *structured* traces produced using technologies such as **Event Tracing for Windows (ETW)**.</span></span>

<span data-ttu-id="3ef44-109">ETW Service Fabric çalışma zamanı toosource tanılama bilgileriyle (izlemeler) kullanılır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-109">ETW is used by Service Fabric runtime toosource diagnostic information (traces).</span></span> <span data-ttu-id="3ef44-110">Bu tanılama bilgilerini Service Fabric uygulamaları toosource yöntemi hello çok önerilen olur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-110">It is hello recommended method for Service Fabric applications toosource their diagnostic information, too.</span></span> <span data-ttu-id="3ef44-111">Çalışma zamanı tarafından sağlanan ve uygulama tarafından sağlanan izlemeleri ve sorun gidermeyi kolaylaştırır arasında bağıntı aynı mekanizmayı sağlar hello kullanma.</span><span class="sxs-lookup"><span data-stu-id="3ef44-111">Using hello same mechanism allows for correlation between runtime-supplied and application-supplied traces and makes troubleshooting easier.</span></span> <span data-ttu-id="3ef44-112">Visual Studio Proje şablonları Service Fabric dahil günlük API (.NET hello üzerinde temel **EventSource** sınıfı), varsayılan olarak ETW izlemeleri yayar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-112">Service Fabric project templates in Visual Studio include a logging API (based on hello .NET **EventSource** class) that emits ETW traces by default.</span></span> <span data-ttu-id="3ef44-113">Service Fabric uygulaması genel bir bakış için bkz: ETW, kullanarak izleme [izleme ve yerel makine geliştirme Kurulum Hizmetleri'nde tanılama](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span><span class="sxs-lookup"><span data-stu-id="3ef44-113">For a general overview of Service Fabric application tracing using ETW, see [Monitoring and diagnosing services in a local machine development setup](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span></span>

<span data-ttu-id="3ef44-114">Merhaba izlemeleri tooshow için Elasticsearch içinde gerçek zamanlı hello Service Fabric küme düğümleri (Merhaba uygulaması çalışırken) yakalanan ve tooan Elasticsearch endpoint gönderilen toobe ihtiyaç duyar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-114">For hello traces tooshow up in Elasticsearch, they need toobe captured at hello Service Fabric cluster nodes in real time (while hello application is running) and sent tooan Elasticsearch endpoint.</span></span> <span data-ttu-id="3ef44-115">İzleme yakalamak için iki ana seçeneğiniz vardır:</span><span class="sxs-lookup"><span data-stu-id="3ef44-115">There are two major options for trace capturing:</span></span>

* <span data-ttu-id="3ef44-116">**İşlemdeki izleme yakalama**</span><span class="sxs-lookup"><span data-stu-id="3ef44-116">**In-process trace capturing**</span></span>  
  <span data-ttu-id="3ef44-117">Merhaba uygulaması veya hizmeti işlemi daha hassas bir şekilde hello tanılama veri toohello izleme deposu (Elasticsearch) göndermekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-117">hello application, or more precisely, service process, is responsible for sending out hello diagnostic data toohello trace store (Elasticsearch).</span></span>
* <span data-ttu-id="3ef44-118">**İşlem dışı izleme yakalama**</span><span class="sxs-lookup"><span data-stu-id="3ef44-118">**Out-of-process trace capturing**</span></span>  
  <span data-ttu-id="3ef44-119">Ayrı bir aracı hello hizmet işlemin veya işlemlerin izlemeleri yakalamak ve toohello izleme deposu gönderme.</span><span class="sxs-lookup"><span data-stu-id="3ef44-119">A separate agent is capturing traces from hello service process or processes and sending them toohello trace store.</span></span>

<span data-ttu-id="3ef44-120">Aşağıda, nasıl Azure üzerinde Elasticsearch yukarı tooset hello uzmanları ele almaktadır ve dezavantajlarını her ikisi için de seçenekleri yakalayabilir ve nasıl tooconfigure Service Fabric hizmet toosend veri tooElasticsearch açıklama açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-120">Below, we describe how tooset up Elasticsearch on Azure, discuss hello pros and cons for both capture options, and explain how tooconfigure a Service Fabric service toosend data tooElasticsearch.</span></span>

## <a name="set-up-elasticsearch-on-azure"></a><span data-ttu-id="3ef44-121">Azure üzerinde Elasticsearch ayarlama</span><span class="sxs-lookup"><span data-stu-id="3ef44-121">Set up Elasticsearch on Azure</span></span>
<span data-ttu-id="3ef44-122">Merhaba up hello Elasticsearch hizmeti Azure ile ilgili en kolay yolu tooset aracılığıyladır [ **Azure Resource Manager şablonları**](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3ef44-122">hello most straightforward way tooset up hello Elasticsearch service on Azure is through [**Azure Resource Manager templates**](../azure-resource-manager/resource-group-overview.md).</span></span> <span data-ttu-id="3ef44-123">Kapsamlı bir [Elasticsearch için hızlı başlangıç Azure Resource Manager şablonu](https://github.com/Azure/azure-quickstart-templates/tree/master/elasticsearch) Azure hızlı başlangıç şablonlarını depodan kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-123">A comprehensive [Quickstart Azure Resource Manager template for Elasticsearch](https://github.com/Azure/azure-quickstart-templates/tree/master/elasticsearch) is available from Azure Quickstart templates repository.</span></span> <span data-ttu-id="3ef44-124">Bu şablon, ayrı depolama hesapları için ölçek birimlerinizi (düğümler grupları) kullanır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-124">This template uses separate storage accounts for scale units (groups of nodes).</span></span> <span data-ttu-id="3ef44-125">Ayrıca, ayrı istemci ve sunucu düğümleri farklı yapılandırmaları olan ve çeşitli numaraları bağlı veri disklerin sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ef44-125">It can also provision separate client and server nodes with different configurations and various numbers of data disks attached.</span></span>

<span data-ttu-id="3ef44-126">Adlı başka bir şablonu burada kullandığımız **ES-MultiNode** hello gelen [Azure tanılama araçları depo](https://github.com/Azure/azure-diagnostics-tools).</span><span class="sxs-lookup"><span data-stu-id="3ef44-126">Here, we use another template, called **ES-MultiNode** from hello [Azure diagnostic tools repository](https://github.com/Azure/azure-diagnostics-tools).</span></span> <span data-ttu-id="3ef44-127">Bu şablonu daha kolay toouse ise ve HTTP temel kimlik doğrulaması tarafından korunan bir Elasticsearch kümesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-127">This template is easier toouse, and it creates an Elasticsearch cluster protected by HTTP basic authentication.</span></span> <span data-ttu-id="3ef44-128">Devam etmeden önce hello deposu (Merhaba depo kopyalama veya bir zip dosyası indiriliyor) GitHub tooyour makineden indirilemedi.</span><span class="sxs-lookup"><span data-stu-id="3ef44-128">Before you proceed, download hello repository from GitHub tooyour machine (by either cloning hello repository or downloading a zip file).</span></span> <span data-ttu-id="3ef44-129">Merhaba ES MultiNode şablonu hello hello klasörüyle bulunduğu aynı adı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-129">hello ES-MultiNode template is located in hello folder with hello same name.</span></span>

### <a name="prepare-a-machine-toorun-elasticsearch-installation-scripts"></a><span data-ttu-id="3ef44-130">Bir makine toorun Elasticsearch yükleme betikleri hazırlama</span><span class="sxs-lookup"><span data-stu-id="3ef44-130">Prepare a machine toorun Elasticsearch installation scripts</span></span>
<span data-ttu-id="3ef44-131">Merhaba en kolay yolu toouse hello ES-MultiNode adlı sağlanan bir Azure PowerShell Betiği şablonudur `CreateElasticSearchCluster`.</span><span class="sxs-lookup"><span data-stu-id="3ef44-131">hello easiest way toouse hello ES-MultiNode template is through a provided Azure PowerShell script called `CreateElasticSearchCluster`.</span></span> <span data-ttu-id="3ef44-132">toouse bu komut, tooinstall PowerShell modülleri ve adlı bir aracı ihtiyacınız **openssl**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-132">toouse this script, you need tooinstall PowerShell modules and a tool called **openssl**.</span></span> <span data-ttu-id="3ef44-133">Merhaba ikinci kullanılan tooadminister olabilir bir SSH anahtarı Elasticsearch kümenizi uzaktan oluşturmak için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-133">hello latter is needed for creating an SSH key that can be used tooadminister your Elasticsearch cluster remotely.</span></span>

<span data-ttu-id="3ef44-134">`CreateElasticSearchCluster`komut dosyası bir Windows makineden hello ES MultiNode şablonuyla kullanım kolaylığı için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-134">`CreateElasticSearchCluster` script is designed for ease of use with hello ES-MultiNode template from a Windows machine.</span></span> <span data-ttu-id="3ef44-135">Olası toouse hello Windows olmayan makine şablonunda, ancak bu senaryo, bu makalenin kapsamı dışındadır hello gelir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-135">It is possible toouse hello template on a non-Windows machine, but that scenario is beyond hello scope of this article.</span></span>

1. <span data-ttu-id="3ef44-136">Bunları henüz yüklemediyseniz yüklemek [ **Azure PowerShell modülleri**](http://aka.ms/webpi-azps).</span><span class="sxs-lookup"><span data-stu-id="3ef44-136">If you haven't installed them already, install [**Azure PowerShell modules**](http://aka.ms/webpi-azps).</span></span> <span data-ttu-id="3ef44-137">İstendiğinde, tıklatın **çalıştırmak**, ardından **yükleme**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-137">When prompted, click **Run**, then **Install**.</span></span> <span data-ttu-id="3ef44-138">1.3 ya da daha yeni Azure PowerShell gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-138">Azure PowerShell 1.3 or newer is required.</span></span>
2. <span data-ttu-id="3ef44-139">Merhaba **openssl** aracı hello dağıtımlarında dahil [ **Windows için Git**](http://www.git-scm.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="3ef44-139">hello **openssl** tool is included in hello distribution of [**Git for Windows**](http://www.git-scm.com/downloads).</span></span> <span data-ttu-id="3ef44-140">Henüz yapmadıysanız, yükleme [Windows için Git](http://www.git-scm.com/downloads) şimdi.</span><span class="sxs-lookup"><span data-stu-id="3ef44-140">If you have not done so already, install [Git for Windows](http://www.git-scm.com/downloads) now.</span></span> <span data-ttu-id="3ef44-141">(Merhaba varsayılan yükleme Tamam seçenekleridir.)</span><span class="sxs-lookup"><span data-stu-id="3ef44-141">(hello default installation options are OK.)</span></span>
3. <span data-ttu-id="3ef44-142">Git yüklendi ancak hello sistem yolunda yer almayan varsayılarak, bir Microsoft Azure PowerShell penceresi açın ve hello aşağıdaki komutları çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="3ef44-142">Assuming that Git has been installed but not included in hello system path, open a Microsoft Azure PowerShell window and run hello following commands:</span></span>
   
    ```powershell
    $ENV:PATH += ";<Git installation folder>\usr\bin"
    $ENV:OPENSSL_CONF = "<Git installation folder>\usr\ssl\openssl.cnf"
    ```
   
    <span data-ttu-id="3ef44-143">Hello yerine `<Git installation folder>` makinenizde; hello Git konumla hello Yardımı'nı varsayılandır **"C:\Program Files\Git"**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-143">Replace hello `<Git installation folder>` with hello Git location on your machine; hello default is **"C:\Program Files\Git"**.</span></span> <span data-ttu-id="3ef44-144">Merhaba noktalı virgül karakterini hello ilk yol hello başında unutmayın.</span><span class="sxs-lookup"><span data-stu-id="3ef44-144">Note hello semicolon character at hello beginning of hello first path.</span></span>
4. <span data-ttu-id="3ef44-145">TooAzure üzerinde oturum açtığınızdan emin olun (aracılığıyla [ `Add-AzureRmAccount` ](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet) ve toocreate esnek arama kümenizi kullanılan olmalıdır hello abonelik seçtiniz.</span><span class="sxs-lookup"><span data-stu-id="3ef44-145">Ensure that you are logged on tooAzure (via [`Add-AzureRmAccount`](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet) and that you have selected hello subscription that should be used toocreate your Elastic Search cluster.</span></span> <span data-ttu-id="3ef44-146">Kullanarak, doğru aboneliğin seçildiğini doğrulayın `Get-AzureRmContext` ve `Get-AzureRmSubscription` cmdlet'leri.</span><span class="sxs-lookup"><span data-stu-id="3ef44-146">You can verify that correct subscription is selected using `Get-AzureRmContext` and `Get-AzureRmSubscription` cmdlets.</span></span>
5. <span data-ttu-id="3ef44-147">Henüz yapmadıysanız, hello geçerli dizin toohello ES-MultiNode klasörü değiştirin.</span><span class="sxs-lookup"><span data-stu-id="3ef44-147">If you haven't done so already, change hello current directory toohello ES-MultiNode folder.</span></span>

### <a name="run-hello-createelasticsearchcluster-script"></a><span data-ttu-id="3ef44-148">Merhaba CreateElasticSearchCluster komut dosyasını çalıştır</span><span class="sxs-lookup"><span data-stu-id="3ef44-148">Run hello CreateElasticSearchCluster script</span></span>
<span data-ttu-id="3ef44-149">Merhaba betiği çalıştırmadan önce hello açmak `azuredeploy-parameters.json` dosya ve doğrulamak veya hello betik parametreleri için değerler sağlayın.</span><span class="sxs-lookup"><span data-stu-id="3ef44-149">Before you run hello script, open hello `azuredeploy-parameters.json` file and verify or provide values for hello script parameters.</span></span> <span data-ttu-id="3ef44-150">şu parametreler hello sağlanır:</span><span class="sxs-lookup"><span data-stu-id="3ef44-150">hello following parameters are provided:</span></span>

| <span data-ttu-id="3ef44-151">Parametre Adı</span><span class="sxs-lookup"><span data-stu-id="3ef44-151">Parameter Name</span></span> | <span data-ttu-id="3ef44-152">Açıklama</span><span class="sxs-lookup"><span data-stu-id="3ef44-152">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3ef44-153">dnsNameForLoadBalancerIP</span><span class="sxs-lookup"><span data-stu-id="3ef44-153">dnsNameForLoadBalancerIP</span></span> |<span data-ttu-id="3ef44-154">kullanılan toocreate hello hello esnek arama küme için herkese görünür DNS adını (hello Azure bölgesi etki alanı sağlanan toohello adı eklenerek) hello adı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-154">hello name that is used toocreate hello publicly visible DNS name for hello Elastic Search cluster (by appending hello Azure region domain toohello provided name).</span></span> <span data-ttu-id="3ef44-155">Örneğin, bu parametre değeri "myBigCluster" ve seçilen hello Azure bölgesi Batı ABD ise hello ortaya çıkan DNS hello küme myBigCluster.westus.cloudapp.azure.com adıdır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-155">For example, if this parameter value is "myBigCluster" and hello chosen Azure region is West US, hello resulting DNS name for hello cluster is myBigCluster.westus.cloudapp.azure.com.</span></span> <br /><br /><span data-ttu-id="3ef44-156">Bu ad, aynı zamanda veri düğümü adları gibi hello esnek arama kümesi ile ilişkili birçok yapıları için kök adı olarak görev yapar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-156">This name also serves as a root name for many artifacts associated with hello Elastic Search cluster, such as data node names.</span></span> |
| <span data-ttu-id="3ef44-157">adminUsername</span><span class="sxs-lookup"><span data-stu-id="3ef44-157">adminUsername</span></span> |<span data-ttu-id="3ef44-158">Merhaba esnek arama küme yönetmek için hello hello yönetici hesabının adını (ilgili SSH anahtarları otomatik olarak oluşturulur).</span><span class="sxs-lookup"><span data-stu-id="3ef44-158">hello name of hello administrator account for managing hello Elastic Search cluster (corresponding SSH keys are generated automatically).</span></span> |
| <span data-ttu-id="3ef44-159">dataNodeCount</span><span class="sxs-lookup"><span data-stu-id="3ef44-159">dataNodeCount</span></span> |<span data-ttu-id="3ef44-160">Merhaba hello esnek arama kümedeki düğüm sayısı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-160">hello number of nodes in hello Elastic Search cluster.</span></span> <span data-ttu-id="3ef44-161">Merhaba geçerli sürümü hello komut dosyası, veri ve sorgu düğümler arasında ayrım yapmaz; tüm düğümleri her iki rol oynar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-161">hello current version of hello script does not distinguish between data and query nodes; all nodes play both roles.</span></span> <span data-ttu-id="3ef44-162">Varsayılanları too3 düğümleri.</span><span class="sxs-lookup"><span data-stu-id="3ef44-162">Defaults too3 nodes.</span></span> |
| <span data-ttu-id="3ef44-163">dataDiskSize</span><span class="sxs-lookup"><span data-stu-id="3ef44-163">dataDiskSize</span></span> |<span data-ttu-id="3ef44-164">Her veri düğüm için ayrılan hello boyutu (GB)'ndeki veri disklerinin.</span><span class="sxs-lookup"><span data-stu-id="3ef44-164">hello size of data disks (in GB) that is allocated for each data node.</span></span> <span data-ttu-id="3ef44-165">Her düğüm 4 veri diskleri, özel olarak ayrılmış tooElastic arama hizmeti alır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-165">Each node receives 4 data disks, exclusively dedicated tooElastic Search service.</span></span> |
| <span data-ttu-id="3ef44-166">Bölge</span><span class="sxs-lookup"><span data-stu-id="3ef44-166">region</span></span> |<span data-ttu-id="3ef44-167">Burada hello esnek arama küme yerleştirilmelidir Azure bölgesi Hello adı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-167">hello name of Azure region where hello Elastic Search cluster should be located.</span></span> |
| <span data-ttu-id="3ef44-168">esUserName</span><span class="sxs-lookup"><span data-stu-id="3ef44-168">esUserName</span></span> |<span data-ttu-id="3ef44-169">Merhaba hello kullanıcı kullanıcı adını toohave erişim tooES küme (konu tooHTTP temel kimlik doğrulaması) yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="3ef44-169">hello user name of hello user that is configured toohave access tooES cluster (subject tooHTTP basic authentication).</span></span> <span data-ttu-id="3ef44-170">Merhaba parola parametrelerini dosyasının bir parçası değil ve ne zaman sağlanmalıdır `CreateElasticSearchCluster` komut dosyası çağrılır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-170">hello password is not part of parameters file and must be provided when `CreateElasticSearchCluster` script is invoked.</span></span> |
| <span data-ttu-id="3ef44-171">vmSizeDataNodes</span><span class="sxs-lookup"><span data-stu-id="3ef44-171">vmSizeDataNodes</span></span> |<span data-ttu-id="3ef44-172">Merhaba esnek arama küme düğümleri için Azure sanal makine boyutu.</span><span class="sxs-lookup"><span data-stu-id="3ef44-172">hello Azure virtual machine size for Elastic Search cluster nodes.</span></span> <span data-ttu-id="3ef44-173">Varsayılanları tooStandard_D2.</span><span class="sxs-lookup"><span data-stu-id="3ef44-173">Defaults tooStandard_D2.</span></span> |

<span data-ttu-id="3ef44-174">Hazır toorun hello betik sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-174">Now you are ready toorun hello script.</span></span> <span data-ttu-id="3ef44-175">Merhaba aşağıdaki komutu yürütün:</span><span class="sxs-lookup"><span data-stu-id="3ef44-175">Issue hello following command:</span></span>

```powershell
CreateElasticSearchCluster -ResourceGroupName <es-group-name> -Region <azure-region> -EsPassword <es-password>
```

<span data-ttu-id="3ef44-176">Burada</span><span class="sxs-lookup"><span data-stu-id="3ef44-176">where</span></span> 

| <span data-ttu-id="3ef44-177">Komut parametre adı</span><span class="sxs-lookup"><span data-stu-id="3ef44-177">Script Parameter Name</span></span> | <span data-ttu-id="3ef44-178">Açıklama</span><span class="sxs-lookup"><span data-stu-id="3ef44-178">Description</span></span> |
| --- | --- |
| `<es-group-name>` |<span data-ttu-id="3ef44-179">Tüm esnek arama küme kaynakları içerecek hello Azure kaynak grubu adı Hello.</span><span class="sxs-lookup"><span data-stu-id="3ef44-179">hello name of hello Azure resource group that will contain all Elastic Search cluster resources.</span></span> |
| `<azure-region>` |<span data-ttu-id="3ef44-180">Merhaba hello esnek arama küme nerede oluşturulacağını Azure bölgesi Hello adı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-180">hello name of hello Azure region where hello Elastic Search cluster should be created.</span></span> |
| `<es-password>` |<span data-ttu-id="3ef44-181">Merhaba esnek arama kullanıcının parolasını Hello.</span><span class="sxs-lookup"><span data-stu-id="3ef44-181">hello password for hello Elastic Search user.</span></span> |

> [!NOTE]
> <span data-ttu-id="3ef44-182">NullReferenceException hello Test-AzureResourceGroup cmdlet'i alırsanız, tooAzure üzerinde toolog unuttuysanız (`Add-AzureRmAccount`).</span><span class="sxs-lookup"><span data-stu-id="3ef44-182">If you get a NullReferenceException from hello Test-AzureResourceGroup cmdlet, you have forgotten toolog on tooAzure (`Add-AzureRmAccount`).</span></span>
> 
> 

<span data-ttu-id="3ef44-183">Merhaba betik çalıştıran bir hata alıyorsunuz ve yanlış şablon parametre değeri tarafından hello hata neden oldu belirlerseniz hello parametre dosyası düzeltin ve hello betik farklı bir kaynak grubu adı ile yeniden çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="3ef44-183">If you get an error from running hello script and you determine that hello error was caused by a wrong template parameter value, correct hello parameter file and run hello script again with a different resource group name.</span></span> <span data-ttu-id="3ef44-184">Aynı zamanda yeniden kullanabilirsiniz hello aynı kaynak grubu adı ve hello ekleyerek hello betik hello eskisinin temizleme sahip `-RemoveExistingResourceGroup` parametresi toohello betik çağırma.</span><span class="sxs-lookup"><span data-stu-id="3ef44-184">You can also reuse hello same resource group name and have hello script clean up hello old one by adding hello `-RemoveExistingResourceGroup` parameter toohello script invocation.</span></span>

### <a name="result-of-running-hello-createelasticsearchcluster-script"></a><span data-ttu-id="3ef44-185">Merhaba CreateElasticSearchCluster betik çalıştırma sonucu</span><span class="sxs-lookup"><span data-stu-id="3ef44-185">Result of running hello CreateElasticSearchCluster script</span></span>
<span data-ttu-id="3ef44-186">Merhaba çalıştırdıktan sonra `CreateElasticSearchCluster` komut dosyası, ana yapıları aşağıdaki hello oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-186">After you run hello `CreateElasticSearchCluster` script, hello following main artifacts will be created.</span></span> <span data-ttu-id="3ef44-187">Bu örnekte "myBigCluster" Merhaba hello değeri olarak kullanmış olan varsayıyoruz `dnsNameForLoadBalancerIP` parametresi hello küme oluşturulduğu bu hello bölge ise Batı ABD.</span><span class="sxs-lookup"><span data-stu-id="3ef44-187">For this example we assume that you have used "myBigCluster" as hello value of hello `dnsNameForLoadBalancerIP` parameter and that hello region where you created hello cluster is West US.</span></span>

| <span data-ttu-id="3ef44-188">Yapı</span><span class="sxs-lookup"><span data-stu-id="3ef44-188">Artifact</span></span> | <span data-ttu-id="3ef44-189">Adını, konumunu ve açıklamalar</span><span class="sxs-lookup"><span data-stu-id="3ef44-189">Name, location, and remarks</span></span> |
| --- | --- |
| <span data-ttu-id="3ef44-190">Uzaktan Yönetim için SSH anahtarı</span><span class="sxs-lookup"><span data-stu-id="3ef44-190">SSH key for remote administration</span></span> |<span data-ttu-id="3ef44-191">myBigCluster.key dosyasında (Merhaba dizin) hangi hello CreateElasticSearchCluster çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="3ef44-191">myBigCluster.key file (in hello directory from which hello CreateElasticSearchCluster was run).</span></span> <br /><br /><span data-ttu-id="3ef44-192">Bu anahtar dosyası kullanılan tooconnect toohello yönetici düğüm olabilir ve (düğümünden hello yönetici) hello kümedeki toodata düğümler.</span><span class="sxs-lookup"><span data-stu-id="3ef44-192">This key file can be used tooconnect toohello admin node and (through hello admin node) toodata nodes in hello cluster.</span></span> |
| <span data-ttu-id="3ef44-193">Yönetim düğümü</span><span class="sxs-lookup"><span data-stu-id="3ef44-193">Admin node</span></span> |<span data-ttu-id="3ef44-194">myBigCluster admin.westus.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="3ef44-194">myBigCluster-admin.westus.cloudapp.azure.com</span></span> <br /><br /><span data-ttu-id="3ef44-195">Dış SSH bağlantılarına izin veren bir adanmış VM için Uzak Elasticsearch küme yönetim--hello yalnızca bir tane.</span><span class="sxs-lookup"><span data-stu-id="3ef44-195">A dedicated VM for remote Elasticsearch cluster administration--hello only one that allows external SSH connections.</span></span> <span data-ttu-id="3ef44-196">Elasticsearch hizmetlerin çalıştırmamanız tüm hello Elasticsearch küme düğümleri, ancak aynı sanal ağ mu hello üzerinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-196">It runs on hello same virtual network as all hello Elasticsearch cluster nodes, but it does not run any Elasticsearch services.</span></span> |
| <span data-ttu-id="3ef44-197">Veri düğümler</span><span class="sxs-lookup"><span data-stu-id="3ef44-197">Data nodes</span></span> |<span data-ttu-id="3ef44-198">myBigCluster1...</span><span class="sxs-lookup"><span data-stu-id="3ef44-198">myBigCluster1 …</span></span> <span data-ttu-id="3ef44-199">myBigCluster*N*</span><span class="sxs-lookup"><span data-stu-id="3ef44-199">myBigCluster*N*</span></span> <br /><br /><span data-ttu-id="3ef44-200">Elasticsearch ve Kibana hizmetlerinin çalıştığından veri düğümlerini.</span><span class="sxs-lookup"><span data-stu-id="3ef44-200">Data nodes that are running Elasticsearch and Kibana services.</span></span> <span data-ttu-id="3ef44-201">SSH tooeach düğümü aracılığıyla, ancak yalnızca hello yönetim düğümü üzerinden bağlanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ef44-201">You can connect via SSH tooeach node, but only via hello admin node.</span></span> |
| <span data-ttu-id="3ef44-202">Elasticsearch küme</span><span class="sxs-lookup"><span data-stu-id="3ef44-202">Elasticsearch cluster</span></span> |<span data-ttu-id="3ef44-203">http://myBigCluster.westus.cloudapp.Azure.com/ES/</span><span class="sxs-lookup"><span data-stu-id="3ef44-203">http://myBigCluster.westus.cloudapp.azure.com/es/</span></span> <br /><br /><span data-ttu-id="3ef44-204">Merhaba hello Elasticsearch küme (Not hello /es sonek) uç noktasının birincil.</span><span class="sxs-lookup"><span data-stu-id="3ef44-204">hello primary endpoint for hello Elasticsearch cluster (note hello /es suffix).</span></span> <span data-ttu-id="3ef44-205">Temel HTTP kimlik doğrulaması tarafından korunur (Merhaba kimlik bilgileri olan hello belirtilen hello ES MultiNode şablonu esUserName/esPassword parametrelerinin).</span><span class="sxs-lookup"><span data-stu-id="3ef44-205">It is protected by basic HTTP authentication (hello credentials were hello specified esUserName/esPassword parameters of hello ES-MultiNode template).</span></span> <span data-ttu-id="3ef44-206">Merhaba küme yüklü hello head Eklentisi (http://myBigCluster.westus.cloudapp.azure.com/es/_plugin/head) temel küme yönetimi için de vardır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-206">hello cluster has also hello head plug-in installed (http://myBigCluster.westus.cloudapp.azure.com/es/_plugin/head) for basic cluster administration.</span></span> |
| <span data-ttu-id="3ef44-207">Kibana hizmeti</span><span class="sxs-lookup"><span data-stu-id="3ef44-207">Kibana service</span></span> |<span data-ttu-id="3ef44-208">http://myBigCluster.westus.cloudapp.Azure.com</span><span class="sxs-lookup"><span data-stu-id="3ef44-208">http://myBigCluster.westus.cloudapp.azure.com</span></span> <br /><br /><span data-ttu-id="3ef44-209">Merhaba Kibana hizmet tooshow verileri Elasticsearch küme oluşturulan hello ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-209">hello Kibana service is set up tooshow data from hello created Elasticsearch cluster.</span></span> <span data-ttu-id="3ef44-210">Merhaba tarafından korunan aynı kimlik doğrulama kimlik bilgileri hello olarak küme kendisi.</span><span class="sxs-lookup"><span data-stu-id="3ef44-210">It is protected by hello same authentication credentials as hello cluster itself.</span></span> |

## <a name="in-process-versus-out-of-process-trace-capturing"></a><span data-ttu-id="3ef44-211">İşlemdeki işlem dışı izleme yakalama karşılaştırması</span><span class="sxs-lookup"><span data-stu-id="3ef44-211">In-process versus out-of-process trace capturing</span></span>
<span data-ttu-id="3ef44-212">Merhaba, biz Tanılama verileri toplama iki temel yolu girişte: işlem içi ve işlem dışı.</span><span class="sxs-lookup"><span data-stu-id="3ef44-212">In hello introduction, we mentioned two fundamental ways of collecting diagnostic data: in-process and out-of-process.</span></span> <span data-ttu-id="3ef44-213">Her güçlü ve zayıf vardır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-213">Each has strengths and weaknesses.</span></span>

<span data-ttu-id="3ef44-214">Merhaba avantajları **işlemdeki izleme yakalama** içerir:</span><span class="sxs-lookup"><span data-stu-id="3ef44-214">Advantages of hello **in-process trace capturing** include:</span></span>

1. <span data-ttu-id="3ef44-215">*Kolay yapılandırma ve dağıtma*</span><span class="sxs-lookup"><span data-stu-id="3ef44-215">*Easy configuration and deployment*</span></span>
   
   * <span data-ttu-id="3ef44-216">tanılama veri toplama Hello yapılandırmasının değil yalnızca hello uygulama yapılandırması parçası.</span><span class="sxs-lookup"><span data-stu-id="3ef44-216">hello configuration of diagnostic data collection is just part of hello application configuration.</span></span> <span data-ttu-id="3ef44-217">"Hello ile eşitleme", rest hello uygulamasının kolay tooalways Canlı olur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-217">It is easy tooalways keep it "in sync" with hello rest of hello application.</span></span>
   * <span data-ttu-id="3ef44-218">Her uygulama veya hizmet başına yapılandırma kolayca elde edilebilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-218">Per-application or per-service configuration is easily achievable.</span></span>
   * <span data-ttu-id="3ef44-219">İşlem dışı izleme yakalama genellikle ayrı bir dağıtım ve bir ek yönetim görevini ve hataların olası kaynak hello Tanılama Aracı yapılandırmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-219">Out-of-process trace capturing usually requires a separate deployment and configuration of hello diagnostic agent, which is an extra administrative task and a potential source of errors.</span></span> <span data-ttu-id="3ef44-220">Merhaba belirli Aracısı teknoloji genellikle hello aracı sanal makine (düğüm) başına yalnızca bir örneğini sağlar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-220">hello particular agent technology often allows only one instance of hello agent per virtual machine (node).</span></span> <span data-ttu-id="3ef44-221">Bu hello tanılama yapılandırması hello koleksiyonunu tüm uygulamalar arasında paylaşılır ve o düğümde çalışan hizmetler, yapılandırmayı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-221">This means that configuration for hello collection of hello diagnostic configuration is shared among all applications and services running on that node.</span></span>
2. <span data-ttu-id="3ef44-222">*Esneklik*</span><span class="sxs-lookup"><span data-stu-id="3ef44-222">*Flexibility*</span></span>
   
   * <span data-ttu-id="3ef44-223">toogo, gereken her yerde hedeflenen hello veri depolama sistemi destekleyen bir istemci kitaplığı var olduğu sürece Merhaba uygulaması hello veriler gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-223">hello application can send hello data wherever it needs toogo, as long as there is a client library that supports hello targeted data storage system.</span></span> <span data-ttu-id="3ef44-224">Yeni havuzlarını eklenebilir istenen şekilde.</span><span class="sxs-lookup"><span data-stu-id="3ef44-224">New sinks can be added as desired.</span></span>
   * <span data-ttu-id="3ef44-225">Karmaşık yakalama, filtreleme ve veri toplama kuralları uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-225">Complex capture, filtering, and data-aggregation rules can be implemented.</span></span>
   * <span data-ttu-id="3ef44-226">Bir işlem dışı izleme yakalama Aracısı destekler hello hello veri havuzlarını tarafından çoğunlukla sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-226">An out-of-process trace capturing is often limited by hello data sinks that hello agent supports.</span></span> <span data-ttu-id="3ef44-227">Bazı aracılar genişletilebilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-227">Some agents are extensible.</span></span>
3. <span data-ttu-id="3ef44-228">*Erişim toointernal uygulama verilerini ve içeriği*</span><span class="sxs-lookup"><span data-stu-id="3ef44-228">*Access toointernal application data and context*</span></span>
   
   * <span data-ttu-id="3ef44-229">Merhaba uygulama/hizmet işlemi içinde çalışan hello tanılama alt sistemi kolayca hello izlemeleri bağlamsal bilgi ile genişletebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ef44-229">hello diagnostic subsystem running inside hello application/service process can easily augment hello traces with contextual information.</span></span>
   * <span data-ttu-id="3ef44-230">Merhaba işlem dışı yaklaşım, Windows için olay izleme gibi bazı işlemler arası iletişim mekanizması aracılığıyla tooan Aracısı hello veri gönderilmelidir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-230">In hello out-of-process approach, hello data must be sent tooan agent via some inter-process communication mechanism, such as Event Tracing for Windows.</span></span> <span data-ttu-id="3ef44-231">Bu mekanizma ek sınırlamalar zorunlu tuttukları.</span><span class="sxs-lookup"><span data-stu-id="3ef44-231">This mechanism could impose additional limitations.</span></span>

<span data-ttu-id="3ef44-232">Merhaba avantajları **işlem dışı izleme yakalama** içerir:</span><span class="sxs-lookup"><span data-stu-id="3ef44-232">Advantages of hello **out-of-process trace capturing** include:</span></span>

1. <span data-ttu-id="3ef44-233">*Merhaba özelliği toomonitor uygulama hello ve kilitlenme bilgi dökümleri toplama*</span><span class="sxs-lookup"><span data-stu-id="3ef44-233">*hello ability toomonitor hello application and collect crash dumps*</span></span>
   
   * <span data-ttu-id="3ef44-234">Merhaba uygulaması toostart başarısız veya çöküyor işlemdeki izleme yakalama başarısız olabilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-234">In-process trace capturing may be unsuccessful if hello application fails toostart or crashes.</span></span> <span data-ttu-id="3ef44-235">Bağımsız bir aracı önemli sorun giderme bilgileri yakalama kadar şansı vardır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-235">An independent agent has a much better chance of capturing crucial troubleshooting information.</span></span><br /><br />
2. <span data-ttu-id="3ef44-236">*Olgunluk, sağlamlık ve kanıtlanmış performansı*</span><span class="sxs-lookup"><span data-stu-id="3ef44-236">*Maturity, robustness, and proven performance*</span></span>
   
   * <span data-ttu-id="3ef44-237">Bir platform satıcı (örneğin, bir Microsoft Azure Tanılama Aracı) tarafından geliştirilen bir aracı test ve var olma Savaşının sağlamlaştırma konu toorigorous olmuştur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-237">An agent developed by a platform vendor (such as a Microsoft Azure Diagnostics agent) has been subject toorigorous testing and battle-hardening.</span></span>
   * <span data-ttu-id="3ef44-238">Yakalama işlemi izleme ile bir uygulama işleminden Tanılama verileri gönderme hello etkinlik değil hello uygulamanın ana görevleri ile müdahale veya zamanlama veya performans sorunlarına oluşabileceğini tooensure dikkatli olunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-238">With in-process trace capturing, care must be taken tooensure that hello activity of sending diagnostic data from an application process does not interfere with hello application's main tasks or introduce timing or performance problems.</span></span> <span data-ttu-id="3ef44-239">Bağımsız olarak çalışan bir aracının potansiyeli daha az toothese sorunlarını ve özel olarak tasarlanmış toolimit hello sistem üzerindeki etkisini.</span><span class="sxs-lookup"><span data-stu-id="3ef44-239">An independently running agent is less prone toothese issues and is specifically designed toolimit its impact on hello system.</span></span>

<span data-ttu-id="3ef44-240">Bu olası toocombine ve her iki yaklaşımın düzeyinden yararlanın olur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-240">It is possible toocombine and benefit from both approaches.</span></span> <span data-ttu-id="3ef44-241">Aslında, pek çok uygulama hello en iyi çözüm olabilir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-241">Indeed, it might be hello best solution for many applications.</span></span>

<span data-ttu-id="3ef44-242">Merhaba burada kullandığımız **Microsoft.Diagnostic.Listeners Kitaplığı** ve Service Fabric uygulaması tooan Elasticsearch kümesinden toosend veri yakalamayı hello işlemdeki izleme.</span><span class="sxs-lookup"><span data-stu-id="3ef44-242">Here, we use hello **Microsoft.Diagnostic.Listeners library** and hello in-process trace capturing toosend data from a Service Fabric application tooan Elasticsearch cluster.</span></span>

## <a name="use-hello-listeners-library-toosend-diagnostic-data-tooelasticsearch"></a><span data-ttu-id="3ef44-243">Merhaba dinleyicileri kitaplığı toosend tanılama veri tooElasticsearch kullanın</span><span class="sxs-lookup"><span data-stu-id="3ef44-243">Use hello Listeners library toosend diagnostic data tooElasticsearch</span></span>
<span data-ttu-id="3ef44-244">Merhaba Microsoft.Diagnostic.Listeners kitaplığı PartyCluster örnek Service Fabric uygulaması bir parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="3ef44-244">hello Microsoft.Diagnostic.Listeners library is part of PartyCluster sample Service Fabric application.</span></span> <span data-ttu-id="3ef44-245">toouse onu:</span><span class="sxs-lookup"><span data-stu-id="3ef44-245">toouse it:</span></span>

1. <span data-ttu-id="3ef44-246">Karşıdan [hello PartyCluster örnek](https://github.com/Azure-Samples/service-fabric-dotnet-management-party-cluster) github'dan.</span><span class="sxs-lookup"><span data-stu-id="3ef44-246">Download [hello PartyCluster sample](https://github.com/Azure-Samples/service-fabric-dotnet-management-party-cluster) from GitHub.</span></span>
2. <span data-ttu-id="3ef44-247">Merhaba Microsoft.Diagnostics.Listeners ve Microsoft.Diagnostics.Listeners.Fabric projeleri (tüm klasörleri) hello PartyCluster örnek dizin toohello çözüm klasöründen toosend hello veri tooElasticsearch beklenen hello uygulamasının kopyalayın .</span><span class="sxs-lookup"><span data-stu-id="3ef44-247">Copy hello Microsoft.Diagnostics.Listeners and Microsoft.Diagnostics.Listeners.Fabric projects (whole folders) from hello PartyCluster sample directory toohello solution folder of hello application that is supposed toosend hello data tooElasticsearch.</span></span>
3. <span data-ttu-id="3ef44-248">Merhaba hedef çözümü açın, hello Çözüm Gezgini hello çözüm düğümüne sağ tıklayın ve seçin **Varolan Proje Ekle**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-248">Open hello target solution, right-click hello solution node in hello Solution Explorer, and choose **Add Existing Project**.</span></span> <span data-ttu-id="3ef44-249">Merhaba Microsoft.Diagnostics.Listeners proje toohello çözümü ekleyin.</span><span class="sxs-lookup"><span data-stu-id="3ef44-249">Add hello Microsoft.Diagnostics.Listeners project toohello solution.</span></span> <span data-ttu-id="3ef44-250">Yineleme hello aynı hello Microsoft.Diagnostics.Listeners.Fabric projesi için.</span><span class="sxs-lookup"><span data-stu-id="3ef44-250">Repeat hello same for hello Microsoft.Diagnostics.Listeners.Fabric project.</span></span>
4. <span data-ttu-id="3ef44-251">Proje başvurusu, hizmet proje toohello iki eklenen projelerden ekleyin.</span><span class="sxs-lookup"><span data-stu-id="3ef44-251">Add a project reference from your service project(s) toohello two added projects.</span></span> <span data-ttu-id="3ef44-252">(Toosend veri tooElasticsearch beklenen her hizmet Microsoft.Diagnostics.EventListeners ve Microsoft.Diagnostics.EventListeners.Fabric başvuruda bulunmalıdır).</span><span class="sxs-lookup"><span data-stu-id="3ef44-252">(Each service that is supposed toosend data tooElasticsearch should reference Microsoft.Diagnostics.EventListeners and Microsoft.Diagnostics.EventListeners.Fabric).</span></span>
   
    ![Proje başvuruları tooMicrosoft.Diagnostics.EventListeners ve Microsoft.Diagnostics.EventListeners.Fabric kitaplıkları][1]

### <a name="service-fabric-general-availability-release-and-microsoftdiagnosticstracing-nuget-package"></a><span data-ttu-id="3ef44-254">Service Fabric genel kullanılabilirlik sürümü ve Microsoft.Diagnostics.Tracing Nuget paketi</span><span class="sxs-lookup"><span data-stu-id="3ef44-254">Service Fabric General Availability release and Microsoft.Diagnostics.Tracing Nuget package</span></span>
<span data-ttu-id="3ef44-255">Service Fabric genel kullanılabilirlik sürüm (31 Mart 2016 yayımlanan 2.0.135) ile oluşturulan uygulamalar hedef **.NET Framework 4.5.2**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-255">Applications built with Service Fabric General Availability release (2.0.135, released March 31, 2016) target **.NET Framework 4.5.2**.</span></span> <span data-ttu-id="3ef44-256">Merhaba .NET Framework hello GA sürümü hello sırasında Azure tarafından desteklenen en yüksek sürümü hello sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="3ef44-256">This version is hello highest version of hello .NET Framework supported by Azure at hello time of hello GA release.</span></span> <span data-ttu-id="3ef44-257">Ne yazık ki, hello framework'ün bu sürümünde belirli EventListener API'leri bu hello kitaplığı gereken Microsoft.Diagnostics.Listeners eksik.</span><span class="sxs-lookup"><span data-stu-id="3ef44-257">Unfortunately, this version of hello framework lacks certain EventListener APIs that hello Microsoft.Diagnostics.Listeners library needs.</span></span> <span data-ttu-id="3ef44-258">EventSource (Merhaba temelini API'leri doku uygulamalarda oturum hello bileşeni) ve EventListener sıkı şekilde bağlı olduğundan, hello Microsoft.Diagnostics.Listeners kitaplığını kullanan her proje, alternatif bir uygulama kullanması gerekir EventSource.</span><span class="sxs-lookup"><span data-stu-id="3ef44-258">Because EventSource (hello component that forms hello basis of logging APIs in Fabric applications) and EventListener are tightly coupled, every project that uses hello Microsoft.Diagnostics.Listeners library must use an alternative implementation of EventSource.</span></span> <span data-ttu-id="3ef44-259">Bu uygulama hello tarafından sağlanan **Microsoft.Diagnostics.Tracing Nuget paketi**, Microsoft tarafından yazılmış.</span><span class="sxs-lookup"><span data-stu-id="3ef44-259">This implementation is provided by hello **Microsoft.Diagnostics.Tracing Nuget package**, authored by Microsoft.</span></span> <span data-ttu-id="3ef44-260">Merhaba paketi hiçbir kod değişiklikleri başvurulan ad alanı değişikliklerinden başka gerekli nedenle hello Framework'te dahil EventSource ile tam olarak geriye dönük olarak uyumlu değil.</span><span class="sxs-lookup"><span data-stu-id="3ef44-260">hello package is fully backward-compatible with EventSource included in hello framework, so no code changes should be necessary other than referenced namespace changes.</span></span>

<span data-ttu-id="3ef44-261">toostart kullanarak hello Microsoft.Diagnostics.Tracing uygulama hello EventSource sınıfının toosend veri tooElasticsearch gereken her hizmet projesi için şu adımları izleyin:</span><span class="sxs-lookup"><span data-stu-id="3ef44-261">toostart using hello Microsoft.Diagnostics.Tracing implementation of hello EventSource class, follow these steps for each service project that needs toosend data tooElasticsearch:</span></span>

1. <span data-ttu-id="3ef44-262">Merhaba hizmet projeye sağ tıklayın ve seçin **Nuget paketlerini Yönet**.</span><span class="sxs-lookup"><span data-stu-id="3ef44-262">Right-click on hello service project and choose **Manage Nuget Packages**.</span></span>
2. <span data-ttu-id="3ef44-263">(Henüz seçili değilse) toohello nuget.org paket kaynağı ve aramak için anahtar "**Microsoft.Diagnostics.Tracing**".</span><span class="sxs-lookup"><span data-stu-id="3ef44-263">Switch toohello nuget.org package source (if it is not already selected) and search for "**Microsoft.Diagnostics.Tracing**".</span></span>
3. <span data-ttu-id="3ef44-264">Merhaba yüklemek `Microsoft.Diagnostics.Tracing.EventSource` paketi (ve bağımlılıklarını).</span><span class="sxs-lookup"><span data-stu-id="3ef44-264">Install hello `Microsoft.Diagnostics.Tracing.EventSource` package (and its dependencies).</span></span>
4. <span data-ttu-id="3ef44-265">Açık hello **ServiceEventSource.cs** veya **ActorEventSource.cs** dosya hizmet projenizdeki ve hello yerine `using System.Diagnostics.Tracing` hello hello dosyasıyla üstünde yönerge `using Microsoft.Diagnostics.Tracing` yönergesi.</span><span class="sxs-lookup"><span data-stu-id="3ef44-265">Open hello **ServiceEventSource.cs** or **ActorEventSource.cs** file in your service project and replace hello `using System.Diagnostics.Tracing` directive on top of hello file with hello `using Microsoft.Diagnostics.Tracing` directive.</span></span>

<span data-ttu-id="3ef44-266">Bu adımları gerekmeyecektir kez hello **.NET Framework 4.6** Microsoft Azure tarafından desteklenir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-266">These steps will not be necessary once hello **.NET Framework 4.6** is supported by Microsoft Azure.</span></span>

### <a name="elasticsearch-listener-instantiation-and-configuration"></a><span data-ttu-id="3ef44-267">Elasticsearch dinleyicisi örnek oluşturma ve yapılandırma</span><span class="sxs-lookup"><span data-stu-id="3ef44-267">Elasticsearch listener instantiation and configuration</span></span>
<span data-ttu-id="3ef44-268">Merhaba tanılama veri tooElasticsearch göndermek için son adım toocreate örneği olan `ElasticSearchListener` ve Elasticsearch bağlantı verileri ile yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="3ef44-268">hello final step for sending diagnostic data tooElasticsearch is toocreate an instance of `ElasticSearchListener` and configure it with Elasticsearch connection data.</span></span> <span data-ttu-id="3ef44-269">Merhaba dinleyicisi hello hizmet proje tanımlanan EventSource sınıfları aracılığıyla başlatılan tüm olayları otomatik olarak yakalar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-269">hello listener automatically captures all events raised via EventSource classes defined in hello service project.</span></span> <span data-ttu-id="3ef44-270">En iyi Hello yerleştirin şekilde hello hizmet başlatma kodu olan toocreate toobe hello hizmet hello ömrü sırasında Canlı gerekir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-270">It needs toobe alive during hello lifetime of hello service, so hello best place toocreate it is in hello service initialization code.</span></span> <span data-ttu-id="3ef44-271">İşte bir durum bilgisi olmayan hizmetin hello başlatma kodu sonra gerekli değişiklikleri hello nasıl görünebilir (başlayarak açıklamalarında eklemeleri işaret `****`):</span><span class="sxs-lookup"><span data-stu-id="3ef44-271">Here is how hello initialization code for a stateless service could look after hello necessary changes (additions pointed out in comments starting with `****`):</span></span>

```csharp
using System;
using System.Diagnostics;
using System.Fabric;
using System.Threading;
using System.Threading.Tasks;
using Microsoft.ServiceFabric.Services.Runtime;

// **** Add hello following directives
using Microsoft.Diagnostics.EventListeners;
using Microsoft.Diagnostics.EventListeners.Fabric;

namespace Stateless1
{
    internal static class Program
    {
        /// <summary>
        /// This is hello entry point of hello service host process.
        /// </summary>        
        private static void Main()
        {
            try
            {
                // **** Instantiate ElasticSearchListener
                var configProvider = new FabricConfigurationProvider("ElasticSearchEventListener");
                ElasticSearchListener esListener = null;
                if (configProvider.HasConfiguration)
                {
                    esListener = new ElasticSearchListener(configProvider, new FabricHealthReporter("ElasticSearchEventListener"));
                }

                // hello ServiceManifest.XML file defines one or more service type names.
                // Registering a service maps a service type name tooa .NET type.
                // When Service Fabric creates an instance of this service type,
                // an instance of hello class is created in this host process.

                ServiceRuntime.RegisterServiceAsync("Stateless1Type", 
                    context => new Stateless1(context)).GetAwaiter().GetResult();

                ServiceEventSource.Current.ServiceTypeRegistered(Process.GetCurrentProcess().Id, typeof(Stateless1).Name);

                // Prevents this host process from terminating so services keep running.
                Thread.Sleep(Timeout.Infinite);

                // **** Ensure that hello ElasticSearchListner instance is not garbage-collected prematurely
                GC.KeepAlive(esListener);
            }
            catch (Exception e)
            {
                ServiceEventSource.Current.ServiceHostInitializationFailed(e);
                throw;
            }
        }
    }
}
```

<span data-ttu-id="3ef44-272">Elasticsearch bağlantı verileri koyun hello hizmet yapılandırma dosyası ayrı bir bölümde (**PackageRoot\Config\Settings.xml**).</span><span class="sxs-lookup"><span data-stu-id="3ef44-272">Elasticsearch connection data should be put in a separate section in hello service configuration file (**PackageRoot\Config\Settings.xml**).</span></span> <span data-ttu-id="3ef44-273">Hello ad hello bölümünün gerekir, karşılık gelen toohello geçirilen toohello değeri `FabricConfigurationProvider` oluşturucusu, örneğin:</span><span class="sxs-lookup"><span data-stu-id="3ef44-273">hello name of hello section must correspond toohello value passed toohello `FabricConfigurationProvider` constructor, for example:</span></span>

```xml
<Section Name="ElasticSearchEventListener">
  <Parameter Name="serviceUri" Value="http://myBigCluster.westus.cloudapp.azure.com/es/" />
  <Parameter Name="userName" Value="(ES user name)" />
  <Parameter Name="password" Value="(ES user password)" />
  <Parameter Name="indexNamePrefix" Value="myapp" />
</Section>
```
<span data-ttu-id="3ef44-274">Merhaba değerlerini `serviceUri`, `userName` ve `password` parametreleri karşılık gelen toohello Elasticsearch küme uç noktası adresi, Elasticsearch kullanıcı adı ve parola, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="3ef44-274">hello values of `serviceUri`, `userName` and `password` parameters correspond toohello Elasticsearch cluster endpoint address, Elasticsearch user name, and password, respectively.</span></span> <span data-ttu-id="3ef44-275">`indexNamePrefix`Elasticsearch dizinleri Hello önektir; Merhaba Microsoft.Diagnostics.Listeners kitaplığı günlük verileri için yeni bir dizin oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-275">`indexNamePrefix` is hello prefix for Elasticsearch indexes; hello Microsoft.Diagnostics.Listeners library creates a new index for its data daily.</span></span>

### <a name="verification"></a><span data-ttu-id="3ef44-276">Doğrulama</span><span class="sxs-lookup"><span data-stu-id="3ef44-276">Verification</span></span>
<span data-ttu-id="3ef44-277">İşte bu kadar!</span><span class="sxs-lookup"><span data-stu-id="3ef44-277">That's it!</span></span> <span data-ttu-id="3ef44-278">Şimdi, Hello hizmetin çalıştığı her hello yapılandırmasında belirtilen izlemeleri toohello Elasticsearch servis gönderme başlar.</span><span class="sxs-lookup"><span data-stu-id="3ef44-278">Now, whenever hello service is run, it starts sending traces toohello Elasticsearch service specified in hello configuration.</span></span> <span data-ttu-id="3ef44-279">Bu Kibana UI hello hedef Elasticsearch örneği ile ilişkili açılış hello tarafından doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3ef44-279">You can verify this by opening hello Kibana UI associated with hello target Elasticsearch instance.</span></span> <span data-ttu-id="3ef44-280">Bizim örneğimizde, http://myBigCluster.westus.cloudapp.azure.com/ hello sayfasının adresidir.</span><span class="sxs-lookup"><span data-stu-id="3ef44-280">In our example, hello page address is http://myBigCluster.westus.cloudapp.azure.com/.</span></span> <span data-ttu-id="3ef44-281">Merhaba seçilen hello adı öneki ile dizinler onay `ElasticSearchListener` örneği gerçekten oluşturulmuş ve verilerle doldurulur.</span><span class="sxs-lookup"><span data-stu-id="3ef44-281">Check that indexes with hello name prefix chosen for hello `ElasticSearchListener` instance have indeed been created and populated with data.</span></span>

![Kibana gösteren PartyCluster uygulama olayları][2]

## <a name="next-steps"></a><span data-ttu-id="3ef44-283">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="3ef44-283">Next steps</span></span>
* [<span data-ttu-id="3ef44-284">Tanılama ve bir Service Fabric hizmeti izleme hakkında daha fazla bilgi edinin</span><span class="sxs-lookup"><span data-stu-id="3ef44-284">Learn more about diagnosing and monitoring a Service Fabric service</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)

<!--Image references-->
[1]: ./media/service-fabric-diagnostics-how-to-use-elasticsearch/listener-lib-references.png
[2]: ./media/service-fabric-diagnostics-how-to-use-elasticsearch/kibana.png
