---
title: "aaaCluster kaynak yöneticisi küme açıklaması | Microsoft Docs"
description: "Service Fabric kümesi, hata etki alanlarını, yükseltme etki alanları, düğüm özellikleri ve hello küme kaynak yöneticisi için düğüm kapasiteler belirterek açıklayan."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 55f8ab37-9399-4c9a-9e6c-d2d859de6766
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f2822075976bd54402af5ad56991b5b360dfb1d8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="describing-a-service-fabric-cluster"></a><span data-ttu-id="8eb53-103">Service fabric kümesi açıklayan</span><span class="sxs-lookup"><span data-stu-id="8eb53-103">Describing a service fabric cluster</span></span>
<span data-ttu-id="8eb53-104">Merhaba Service Fabric kümesi Kaynak Yöneticisi bir küme açıklamak için çeşitli mekanizmalar sağlar.</span><span class="sxs-lookup"><span data-stu-id="8eb53-104">hello Service Fabric Cluster Resource Manager provides several mechanisms for describing a cluster.</span></span> <span data-ttu-id="8eb53-105">Çalışma zamanı sırasında bu bilgileri tooensure hizmetlerinin yüksek düzeyde kullanılabilir hello kümede çalışan hello hello Küme Kaynak Yöneticisi'ni kullanır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-105">During runtime, hello Cluster Resource Manager uses this information tooensure high availability of hello services running in hello cluster.</span></span> <span data-ttu-id="8eb53-106">Bu önemli kurallar zorlarken bu de toooptimize hello kaynak tüketimini hello küme içinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-106">While enforcing these important rules, it also attempts toooptimize hello resource consumption within hello cluster.</span></span>

## <a name="key-concepts"></a><span data-ttu-id="8eb53-107">Önemli kavramlar</span><span class="sxs-lookup"><span data-stu-id="8eb53-107">Key concepts</span></span>
<span data-ttu-id="8eb53-108">Merhaba Küme Kaynak Yöneticisi'ni bir küme açıklayan çeşitli özellikleri destekler:</span><span class="sxs-lookup"><span data-stu-id="8eb53-108">hello Cluster Resource Manager supports several features that describe a cluster:</span></span>

* <span data-ttu-id="8eb53-109">Hata etki alanları</span><span class="sxs-lookup"><span data-stu-id="8eb53-109">Fault Domains</span></span>
* <span data-ttu-id="8eb53-110">Yükseltme etki alanları</span><span class="sxs-lookup"><span data-stu-id="8eb53-110">Upgrade Domains</span></span>
* <span data-ttu-id="8eb53-111">Düğüm özellikleri</span><span class="sxs-lookup"><span data-stu-id="8eb53-111">Node Properties</span></span>
* <span data-ttu-id="8eb53-112">Düğüm kapasitesi</span><span class="sxs-lookup"><span data-stu-id="8eb53-112">Node Capacities</span></span>

## <a name="fault-domains"></a><span data-ttu-id="8eb53-113">Hata etki alanları</span><span class="sxs-lookup"><span data-stu-id="8eb53-113">Fault domains</span></span>
<span data-ttu-id="8eb53-114">Hata etki alanı herhangi Eşgüdümlü hatası alanıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-114">A Fault Domain is any area of coordinated failure.</span></span> <span data-ttu-id="8eb53-115">(Güç kaynağı hataları toodrive hataları toobad NIC ürün bilgisinde için kendi çeşitli nedenlerle üzerinde başarısız olacağından bu yana) tek bir makineye bir hata etki alanıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-115">A single machine is a Fault Domain (since it can fail on its own for various reasons, from power supply failures toodrive failures toobad NIC firmware).</span></span> <span data-ttu-id="8eb53-116">Aynı Ethernet anahtarı olan bağlı toohello olarak aynı hata etki alanı, hello makineler güç veya tek bir konumda tek bir kaynak paylaşımı makinelerdir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-116">Machines connected toohello same Ethernet switch are in hello same Fault Domain, as are machines sharing a single source of power or in a single location.</span></span> <span data-ttu-id="8eb53-117">Donanım hatalarının toooverlap için doğal olduğundan, hata etki alanlarını kendiliğinden hiyerarşik ve Service Fabric URI'ler olarak temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-117">Since it's natural for hardware faults toooverlap, Fault Domains are inherently hierarchal and are represented as URIs in Service Fabric.</span></span>

<span data-ttu-id="8eb53-118">Service Fabric bu bilgileri toosafely yer Hizmetleri kullandığından hata etki alanlarının doğru şekilde ayarlandığından emin önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-118">It is important that Fault Domains are set up correctly since Service Fabric uses this information toosafely place services.</span></span> <span data-ttu-id="8eb53-119">Service Fabric aşağı hizmet toogo hata (bazı bileşen hello hatadan kaynaklanıyor) etki alanı hello kaybedilmesine neden olacağı şekilde tooplace Hizmetleri istememektedir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-119">Service Fabric doesn't want tooplace services such that hello loss of a Fault Domain (caused by hello failure of some component) causes a service toogo down.</span></span> <span data-ttu-id="8eb53-120">Hello Azure ortamı Service Fabric hello ortamı toocorrectly tarafından sağlanan hello hata etki alanı bilgilerini kullanır, sizin adınıza hello kümedeki hello düğümler yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-120">In hello Azure environment Service Fabric uses hello Fault Domain information provided by hello environment toocorrectly configure hello nodes in hello cluster on your behalf.</span></span> <span data-ttu-id="8eb53-121">Service Fabric tek başına, hata etki alanlarını hello zamanında tanımlanan için bu hello küme ayarlama</span><span class="sxs-lookup"><span data-stu-id="8eb53-121">For Service Fabric Standalone, Fault Domains are defined at hello time that hello cluster is set up</span></span> 

> [!WARNING]
> <span data-ttu-id="8eb53-122">Bu hello hata etki alanı bilgileri tooService doku doğru sağlanır önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-122">It is important that hello Fault Domain information provided tooService Fabric is accurate.</span></span> <span data-ttu-id="8eb53-123">Örneğin, Service Fabric kümenin düğümleri beş fiziksel ana bilgisayarda çalışan 10 sanal makinelerde çalıştırılan varsayalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-123">For example, let's say that your Service Fabric cluster's nodes are running inside 10 virtual machines, running on five physical hosts.</span></span> <span data-ttu-id="8eb53-124">Bu durumda, olsa bile 10 sanal makineyi, var. yalnızca 5 farklı (üst düzey) hata etki alanları.</span><span class="sxs-lookup"><span data-stu-id="8eb53-124">In this case, even though there are 10 virtual machines, there's only 5 different (top level) fault domains.</span></span> <span data-ttu-id="8eb53-125">Aynı fiziksel ana bilgisayar neden hello paylaşımı VM'ler tooshare hello aynı kök hata etki alanı, fiziksel ana bilgisayarları başarısız olursa hata hello VM'ler deneyimi Eşgüdümlü beri.</span><span class="sxs-lookup"><span data-stu-id="8eb53-125">Sharing hello same physical host causes VMs tooshare hello same root fault domain, since hello VMs experience coordinated failure if their physical host fails.</span></span>  
>
> <span data-ttu-id="8eb53-126">Service Fabric bekliyor bu yana bir düğümün değil toochange hata etki alanı hello.</span><span class="sxs-lookup"><span data-stu-id="8eb53-126">Since Service Fabric expects hello Fault Domain of a node not toochange.</span></span> <span data-ttu-id="8eb53-127">Merhaba VM'ler, yüksek kullanılabilirliği gibi sağlamaya başka mekanizmalar [HA-VMs](https://technet.microsoft.com/en-us/library/cc967323.aspx), saydam VM'ler geçişini bir konak tooanother kullanın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-127">Other mechanisms of ensuring high availability of hello VMs, such as [HA-VMs](https://technet.microsoft.com/en-us/library/cc967323.aspx), use transparent migration of VMs from one host tooanother.</span></span> <span data-ttu-id="8eb53-128">Bu mekanizmaların etmeyin yeniden yapılandırın veya kod hello VM içinde çalışan hello bildirin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-128">These mechanisms do not reconfigure or notify hello running code inside hello VM.</span></span> <span data-ttu-id="8eb53-129">Bu nedenle, oldukları **desteklenmiyor** Service Fabric çalıştırmak için ortam olarak kümeleri.</span><span class="sxs-lookup"><span data-stu-id="8eb53-129">As such, they are **not supported** as environments for running Service Fabric clusters.</span></span> <span data-ttu-id="8eb53-130">Service Fabric işe hello yalnızca yüksek oranda kullanılabilirlik teknolojisi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-130">Service Fabric should be hello only high-availability technology employed.</span></span> <span data-ttu-id="8eb53-131">Dinamik VM geçiş gibi mekanizmaları SAN'lar, veya diğerleri gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-131">Mechanisms like live VM migration, SANs, or others are not necessary.</span></span> <span data-ttu-id="8eb53-132">Service Fabric, bu mekanizmaların ile birlikte kullandıysanız _azaltmak_ uygulama kullanılabilirliği ve güvenilirliği ek karmaşıklık tanıtmak için hata merkezi kaynakları ekleyin ve güvenilirlik kullanma ve Service Fabric de çakışan kullanılabilirlik stratejisi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-132">If used in conjunction with Service Fabric, these mechanisms _reduce_ application availability and reliability because they introduce additional complexity, add centralized sources of failure, and utilize reliability and availability strategies that conflict with those in Service Fabric.</span></span> 
>
>

<span data-ttu-id="8eb53-133">Aşağıdaki Hello grafik tooFault etki alanları ve liste tüm farklı hataya neden etki alanları hello katkıda bulunan tüm hello varlıklar rengi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-133">In hello graphic below we color all hello entities that contribute tooFault Domains and list all hello different Fault Domains that result.</span></span> <span data-ttu-id="8eb53-134">Bu örnekte, veri merkezleri ("DC"), kabin ("R") ve dikey pencerelerde ("B") sahip.</span><span class="sxs-lookup"><span data-stu-id="8eb53-134">In this example, we have datacenters ("DC"), racks ("R"), and blades ("B").</span></span> <span data-ttu-id="8eb53-135">Alanlara, her dikey birden fazla sanal makine tutuyorsa hello hata etki alanı hiyerarşisi başka bir katmana olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-135">Conceivably, if each blade holds more than one virtual machine, there could be another layer in hello Fault Domain hierarchy.</span></span>

<span data-ttu-id="8eb53-136"><center>
![Hata etki alanlarını düzenlenmiş düğümler][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-136"><center>
![Nodes organized via Fault Domains][Image1]
</center></span></span>

<span data-ttu-id="8eb53-137">Çalışma zamanı boyunca hello Service Fabric kümesi Kaynak Yöneticisi hello küme hello hata etki alanı olarak değerlendirir ve düzenleri planları.</span><span class="sxs-lookup"><span data-stu-id="8eb53-137">During runtime, hello Service Fabric Cluster Resource Manager considers hello Fault Domains in hello cluster and plans layouts.</span></span> <span data-ttu-id="8eb53-138">durum bilgisi olan çoğaltmaları hello veya durum bilgisiz örnekleri belirli bir hizmeti için ayrı hata etki alanı şekilde dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-138">hello stateful replicas or stateless instances for a given service are distributed so they are in separate Fault Domains.</span></span> <span data-ttu-id="8eb53-139">Hata etki alanlarında Hello hizmet dağıtma hello hiyerarşinin herhangi bir düzeyde hata etki alanı başarısız olduğunda hello hello hizmetinin kullanılabilirliğini tehlikeye değil sağlar.</span><span class="sxs-lookup"><span data-stu-id="8eb53-139">Distributing hello service across fault domains ensures hello availability of hello service is not compromised when a Fault Domain fails at any level of hello hierarchy.</span></span>

<span data-ttu-id="8eb53-140">Service Fabric'ın Küme Kaynak Yöneticisi'ni kaç Katmanlar hello hata etki alanı hiyerarşisi vardır önemli değil.</span><span class="sxs-lookup"><span data-stu-id="8eb53-140">Service Fabric’s Cluster Resource Manager doesn’t care how many layers there are in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="8eb53-141">Ancak, hello kaybı herhangi bir kısmının hello hiyerarşi içinde çalışan hizmetler etkilemez tooensure çalışır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-141">However, it tries tooensure that hello loss of any one portion of hello hierarchy doesn’t impact services running in it.</span></span> 

<span data-ttu-id="8eb53-142">Varsa en iyisidir hello aynı sayıda her hello hata etki alanı hiyerarşisi derinlik düzeyini düğüm.</span><span class="sxs-lookup"><span data-stu-id="8eb53-142">It is best if there are hello same number of nodes at each level of depth in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="8eb53-143">Hata etki alanı "Ağaç" Merhaba kümenizdeki dengesiz ise, bu, hello küme Resource Manager toofigure hello en iyi ayırma Hizmetleri çıkışı zorlaştırır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-143">If hello “tree” of Fault Domains is unbalanced in your cluster, it makes it harder for hello Cluster Resource Manager toofigure out hello best allocation of services.</span></span> <span data-ttu-id="8eb53-144">İmbalanced hata etki alanlarını düzenleri, bazı etki alanlarına hello kaybı etkisi hello diğer etki alanlarındaki'den fazla hizmetlerin kullanılabilirliğini anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-144">Imbalanced Fault Domains layouts mean that hello loss of some domains impact hello availability of services more than other domains.</span></span> <span data-ttu-id="8eb53-145">Merhaba küme kaynak yöneticisi arasında iki amacı sonuç olarak, bozuk: Hizmetleri üzerlerinde koyarak "kalın" Bu etki alanındaki toouse hello makineler istediği ve böylece bir etki alanı hello kaybı sorunlara neden olmayan diğer etki alanlarındaki tooplace Hizmetleri istiyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-145">As a result, hello Cluster Resource Manager is torn between two goals: It wants toouse hello machines in that “heavy” domain by placing services on them, and it wants tooplace services in other domains so that hello loss of a domain doesn’t cause problems.</span></span> 

<span data-ttu-id="8eb53-146">İmbalanced etki alanları ne gibi görünüyor?</span><span class="sxs-lookup"><span data-stu-id="8eb53-146">What do imbalanced domains look like?</span></span> <span data-ttu-id="8eb53-147">Merhaba çizimde, iki farklı küme düzenleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-147">In hello diagram below, we show two different cluster layouts.</span></span> <span data-ttu-id="8eb53-148">Merhaba ilk örnekte hello düğümleri hello hata etki alanları arasında eşit olarak dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-148">In hello first example, hello nodes are distributed evenly across hello Fault Domains.</span></span> <span data-ttu-id="8eb53-149">Hello ikinci örnekte, bir hata etki alanı diğer hata etki alanları hello daha pek çok daha fazla düğüm yok.</span><span class="sxs-lookup"><span data-stu-id="8eb53-149">In hello second example, one Fault Domain has many more nodes than hello other Fault Domains.</span></span> 

<span data-ttu-id="8eb53-150"><center>
![İki farklı küme düzenleri][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-150"><center>
![Two different cluster layouts][Image2]
</center></span></span>

<span data-ttu-id="8eb53-151">Azure üzerinde hata etki alanı bir düğümü içeren hello seçim sizin için yönetilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-151">In Azure, hello choice of which Fault Domain contains a node is managed for you.</span></span> <span data-ttu-id="8eb53-152">Ancak, sağlamanız düğümleri hello sayısına bağlı olarak, hala hata etki alanları ile diğerlerinden daha fazla düğüm bunlara şunun.</span><span class="sxs-lookup"><span data-stu-id="8eb53-152">However, depending on hello number of nodes that you provision you can still end up with Fault Domains with more nodes in them than others.</span></span> <span data-ttu-id="8eb53-153">Örneğin, beş hata etki alanlarını hello kümedeki sahip, ancak yedi düğümler için belirli bir NodeType sağlamak söyleyin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-153">For example, say you have five Fault Domains in hello cluster but provision seven nodes for a given NodeType.</span></span> <span data-ttu-id="8eb53-154">Bu durumda, hello ilk iki hata etki alanı ile daha fazla düğüm sonlanır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-154">In this case, hello first two Fault Domains end up with more nodes.</span></span> <span data-ttu-id="8eb53-155">Yalnızca birkaç örnekleri ile daha fazla NodeTypes toodeploy devam ederseniz, hello sorun kötü alır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-155">If you continue toodeploy more NodeTypes with only a couple instances, hello problem gets worse.</span></span> <span data-ttu-id="8eb53-156">Bu nedenle bu hello önermiştir her düğüm türü düğümlerin sayısı hata etki alanlarını hello sayısının katı.</span><span class="sxs-lookup"><span data-stu-id="8eb53-156">For this reason it's recommended that hello number of nodes in each node type is a multiple of hello number of Fault Domains.</span></span>

## <a name="upgrade-domains"></a><span data-ttu-id="8eb53-157">Yükseltme etki alanları</span><span class="sxs-lookup"><span data-stu-id="8eb53-157">Upgrade domains</span></span>
<span data-ttu-id="8eb53-158">Yükseltme etki alanlarının Service Fabric kümesi Kaynak Yöneticisi hello başka bir özelliği olan hello küme hello düzenini anlama.</span><span class="sxs-lookup"><span data-stu-id="8eb53-158">Upgrade Domains are another feature that helps hello Service Fabric Cluster Resource Manager understand hello layout of hello cluster.</span></span> <span data-ttu-id="8eb53-159">Yükseltme etki alanlarını tanımlayın hello yükseltilir düğümleri kümesi aynı anda.</span><span class="sxs-lookup"><span data-stu-id="8eb53-159">Upgrade Domains define sets of nodes that are upgraded at hello same time.</span></span> <span data-ttu-id="8eb53-160">Yükseltme etki alanları Yardım hello Küme Kaynak Yöneticisi'ni Anlama ve yükseltme gibi yönetim işlemlerini düzenlemek.</span><span class="sxs-lookup"><span data-stu-id="8eb53-160">Upgrade Domains help hello Cluster Resource Manager understand and orchestrate management operations like upgrades.</span></span>

<span data-ttu-id="8eb53-161">Yükseltme etki alanlarının çok hata etki alanları gibi ancak birkaç önemli farklılıklar sahip değildir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-161">Upgrade Domains are a lot like Fault Domains, but with a couple key differences.</span></span> <span data-ttu-id="8eb53-162">İlk olarak, Eşgüdümlü donanım hataları alanlarının hata etki alanlarını tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-162">First, areas of coordinated hardware failures define Fault Domains.</span></span> <span data-ttu-id="8eb53-163">Diğer yandan Merhaba, ilke tarafından tanımlanan üzerinde etki alanlarını yükseltme.</span><span class="sxs-lookup"><span data-stu-id="8eb53-163">Upgrade Domains, on hello other hand, are defined by policy.</span></span> <span data-ttu-id="8eb53-164">Toodecide yerine onu hello ortamı tarafından dikte edilmesini istediğiniz kaç alın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-164">You get toodecide how many you want, rather than it being dictated by hello environment.</span></span> <span data-ttu-id="8eb53-165">Sayıda yükseltme düğümleri yaptığınız gibi etki alanları olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-165">You could have as many Upgrade Domains as you do nodes.</span></span> <span data-ttu-id="8eb53-166">Başka bir hata etki alanları ve yükseltme etki alanları arasında yükseltme etki alanları hiyerarşik olmayan farktır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-166">Another difference between Fault Domains and Upgrade Domains is that Upgrade Domains are not hierarchical.</span></span> <span data-ttu-id="8eb53-167">Bunun yerine, bunlar gibi basit bir etiketin daha fazla.</span><span class="sxs-lookup"><span data-stu-id="8eb53-167">Instead, they are more like a simple tag.</span></span> 

<span data-ttu-id="8eb53-168">Merhaba Aşağıdaki diyagramda üç yükseltme etki alanları üç hata etki alanlarında şeritli gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-168">hello following diagram shows three Upgrade Domains are striped across three Fault Domains.</span></span> <span data-ttu-id="8eb53-169">Ayrıca, her farklı hata ve yükseltme etki alanları bittiği bir olası yerleşimini üç farklı çoğaltmalar için bir durum bilgisi olan hizmet gösterir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-169">It also shows one possible placement for three different replicas of a stateful service, where each ends up in different Fault and Upgrade Domains.</span></span> <span data-ttu-id="8eb53-170">Bu yerleştirme hello ortasını hizmet yükseltmesi sırasında bir hata etki alanının hello zarar verir ve hello kod ve verilerin bir kopyasını çözümlenmedi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-170">This placement allows hello loss of a Fault Domain while in hello middle of a service upgrade and still have one copy of hello code and data.</span></span>  

<span data-ttu-id="8eb53-171"><center>
![Hata ve yükseltme etki alanları ile yerleştirme][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-171"><center>
![Placement With Fault and Upgrade Domains][Image3]
</center></span></span>

<span data-ttu-id="8eb53-172">Yükseltme etki alanlarının, toohaving büyük sayılar Artıları ve eksileri vardır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-172">There are pros and cons toohaving large numbers of Upgrade Domains.</span></span> <span data-ttu-id="8eb53-173">Daha fazla yükseltme etki alanlarının her adımı hello yükseltin. daha ayrıntılı ve bu nedenle daha az sayıda düğümleri veya hizmetleri etkiler anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-173">More Upgrade Domains means each step of hello upgrade is more granular and therefore affects a smaller number of nodes or services.</span></span> <span data-ttu-id="8eb53-174">Sonuç olarak, daha az Hizmetleri toomove aynı anda daha az karmaşası hello sisteme giriş var.</span><span class="sxs-lookup"><span data-stu-id="8eb53-174">As a result, fewer services have toomove at a time, introducing less churn into hello system.</span></span> <span data-ttu-id="8eb53-175">Merhaba hizmetinin daha az hello yükseltme sırasında sunulan herhangi bir sorundan etkilenmez beri bu tooimprove güvenilirlik eğilimi gösterir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-175">This tends tooimprove reliability, since less of hello service is impacted by any issue introduced during hello upgrade.</span></span> <span data-ttu-id="8eb53-176">Daha fazla yükseltme etki alanları kullanılabilir arabellek hello diğer düğümleri toohandle hello etkisini üzerinde daha az yükseltme anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-176">More Upgrade Domains also means that you need less available buffer on other nodes toohandle hello impact of hello upgrade.</span></span> <span data-ttu-id="8eb53-177">Örneğin, beş yükseltme etki alanları varsa, her hello düğümleri trafiğinizi % 20 işleme kabaca.</span><span class="sxs-lookup"><span data-stu-id="8eb53-177">For example, if you have five Upgrade Domains, hello nodes in each are handling roughly 20% of your traffic.</span></span> <span data-ttu-id="8eb53-178">Bu yükseltme etki alanı aşağı tootake yükseltme için gerekiyorsa, bu yük toogo yere genellikle gerekir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-178">If you need tootake down that Upgrade Domain for an upgrade, that load usually needs toogo somewhere.</span></span> <span data-ttu-id="8eb53-179">Dört kalan yükseltme etki alanları sahip olduğundan, her yaklaşık %5 hello toplam trafik için yeriniz olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-179">Since you have four remaining Upgrade Domains, each must have room for about 5% of hello total traffic.</span></span> <span data-ttu-id="8eb53-180">Daha fazla yükseltme etki alanları daha az arabellek hello kümedeki hello düğümlere ihtiyaç duyacağınız anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-180">More Upgrade Domains means you need less buffer on hello nodes in hello cluster.</span></span> <span data-ttu-id="8eb53-181">Örneğin, 10 yükseltme etki alanları yerine sahip olmadığını göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8eb53-181">For example, consider if you had 10 Upgrade Domains instead.</span></span> <span data-ttu-id="8eb53-182">Bu durumda, her UD yalnızca yaklaşık %10 hello toplam trafik işleme.</span><span class="sxs-lookup"><span data-stu-id="8eb53-182">In that case, each UD would only be handling about 10% of hello total traffic.</span></span> <span data-ttu-id="8eb53-183">Bir yükseltme adımları, hello küme aracılığıyla her etki alanı yalnızca yaklaşık %1.1 hello toplam trafik için toohave yer gerekir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-183">When an upgrade steps through hello cluster, each domain would only need toohave room for about 1.1% of hello total traffic.</span></span> <span data-ttu-id="8eb53-184">Daha fazla yükseltme etki alanları genellikle toorun izin düğümleriniz daha az ayrılmış kapasite gerektiğinden daha yüksek kullanımında.</span><span class="sxs-lookup"><span data-stu-id="8eb53-184">More Upgrade Domains generally allow you toorun your nodes at higher utilization, since you need less reserved capacity.</span></span> <span data-ttu-id="8eb53-185">Merhaba aynı hata etki alanları için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-185">hello same is true for Fault Domains.</span></span>  

<span data-ttu-id="8eb53-186">birden çok etki alanı yükseltme sonucunda hello dezavantajı, yükseltmeleri tootake uzun eğilimindedir ' dir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-186">hello downside of having many Upgrade Domains is that upgrades tend tootake longer.</span></span> <span data-ttu-id="8eb53-187">Service Fabric, bir sonraki yükseltme etki alanı tamamlandıktan ve tooupgrade hello başlatmadan önce bir denetim gerçekleştirmediğini saat kısa bir süre bekler.</span><span class="sxs-lookup"><span data-stu-id="8eb53-187">Service Fabric waits a short period of time after an Upgrade Domain is completed and performs checks before starting tooupgrade hello next one.</span></span> <span data-ttu-id="8eb53-188">Bu gecikmeler hello yükseltme devam etmeden önce hello yükseltme tarafından sunulan algılama sorunları etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-188">These delays enable detecting issues introduced by hello upgrade before hello upgrade proceeds.</span></span> <span data-ttu-id="8eb53-189">Merhaba kolaylığını kabul edilebilir olduğundan aynı anda hello hizmeti çok fazla etkilemesini hatalı değişiklikleri önler.</span><span class="sxs-lookup"><span data-stu-id="8eb53-189">hello tradeoff is acceptable because it prevents bad changes from affecting too much of hello service at a time.</span></span>

<span data-ttu-id="8eb53-190">Çok az yükseltme etki alanına sahip birçok negatif yan etkileri – tek tek her yükseltme etki alanı aşağı ve büyük bölümünü yükseltiliyor genel kapasitenizi kullanılamıyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-190">Too few Upgrade Domains has many negative side effects – while each individual Upgrade Domain is down and being upgraded a large portion of your overall capacity is unavailable.</span></span> <span data-ttu-id="8eb53-191">Örneğin, yalnızca üç yükseltme etki alanı varsa, aynı anda yaklaşık 1/3 genel hizmet veya küme kapasite sürüyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-191">For example, if you only have three Upgrade Domains you are taking down about 1/3 of your overall service or cluster capacity at a time.</span></span> <span data-ttu-id="8eb53-192">Toohave küme toohandle hello yükünüzü hello rest içinde yeterli kapasiteye sahip olduğundan çok hizmetinizin aşağı aynı anda sahip arzu değil.</span><span class="sxs-lookup"><span data-stu-id="8eb53-192">Having so much of your service down at once isn’t desirable since you have toohave enough capacity in hello rest of your cluster toohandle hello workload.</span></span> <span data-ttu-id="8eb53-193">Bu arabellek anlamına gelir normal işlemi sırasında aksi durumdakinden daha az yüklenen düğümleri olan koruma.</span><span class="sxs-lookup"><span data-stu-id="8eb53-193">Maintaining that buffer means that during normal operation those nodes are less loaded than they would be otherwise.</span></span> <span data-ttu-id="8eb53-194">Bu, hizmetiniz çalıştıran hello maliyetini artırır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-194">This increases hello cost of running your service.</span></span>

<span data-ttu-id="8eb53-195">Hiçbir gerçek toohello toplam sayısını sınırla hatası veya yükseltme etki alanlarının bir ortam ya da nasıl birbiriyle kısıtlamaları yoktur.</span><span class="sxs-lookup"><span data-stu-id="8eb53-195">There’s no real limit toohello total number of fault or Upgrade Domains in an environment, or constraints on how they overlap.</span></span> <span data-ttu-id="8eb53-196">Birkaç ortak desenler vardır Bununla:</span><span class="sxs-lookup"><span data-stu-id="8eb53-196">That said, there are several common patterns:</span></span>

- <span data-ttu-id="8eb53-197">Hata etki alanları ve yükseltme etki alanları 1:1 eşlenmiş</span><span class="sxs-lookup"><span data-stu-id="8eb53-197">Fault Domains and Upgrade Domains mapped 1:1</span></span>
- <span data-ttu-id="8eb53-198">Bir yükseltme etki alanı her düğüm (fiziksel veya sanal işletim sistemi örneği)</span><span class="sxs-lookup"><span data-stu-id="8eb53-198">One Upgrade Domain per Node (physical or virtual OS instance)</span></span>
- <span data-ttu-id="8eb53-199">Burada hello hata etki alanları ve yükseltme etki alanlarının bir matris genellikle hello çizgileri çalışan makineler ile form "şeritli" veya "matris" modeli</span><span class="sxs-lookup"><span data-stu-id="8eb53-199">A “striped” or “matrix” model where hello Fault Domains and Upgrade Domains form a matrix with machines usually running down hello diagonals</span></span>

<span data-ttu-id="8eb53-200"><center>
![Hata ve yükseltme etki alanı düzenleri][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-200"><center>
![Fault and Upgrade Domain Layouts][Image4]
</center></span></span>

<span data-ttu-id="8eb53-201">Hangi düzeni toochoose hiçbir en iyi yanıt, her bazı Artıları ve eksileri vardır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-201">There’s no best answer which layout toochoose, each has some pros and cons.</span></span> <span data-ttu-id="8eb53-202">Örneğin, hello 1FD:1UD basit tooset yukarı modelidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-202">For example, hello 1FD:1UD model is simple tooset up.</span></span> <span data-ttu-id="8eb53-203">Merhaba 1 yükseltme etki alanı düğümü modeli başına hangi kişiler için kullanılan gibi çoğu.</span><span class="sxs-lookup"><span data-stu-id="8eb53-203">hello 1 Upgrade Domain per Node model is most like what people are used to.</span></span> <span data-ttu-id="8eb53-204">Yükseltme sırasında her düğüm bağımsız olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-204">During upgrades each node is updated independently.</span></span> <span data-ttu-id="8eb53-205">Bu, benzer toohow küçük makineler kümesi hello son el ile yükseltildi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-205">This is similar toohow small sets of machines were upgraded manually in hello past.</span></span> 

<span data-ttu-id="8eb53-206">Merhaba en yaygın hello FD/UD matrisi, burada hello FDs ve UDs bir tablo oluşturur ve düğümler hello çapraz başlangıç yerleştirilir modelidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-206">hello most common model is hello FD/UD matrix, where hello FDs and UDs form a table and nodes are placed starting along hello diagonal.</span></span> <span data-ttu-id="8eb53-207">Bu varsayılan Azure Service Fabric kümeleri olarak kullanılan hello modelidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-207">This is hello model used by default in Service Fabric clusters in Azure.</span></span> <span data-ttu-id="8eb53-208">Birçok düğümleri içeren kümeler için her şeyi hello yoğun matris düzeni gibi yukarıdaki bakan sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-208">For clusters with many nodes everything ends up looking like hello dense matrix pattern above.</span></span>

## <a name="fault-and-upgrade-domain-constraints-and-resulting-behavior"></a><span data-ttu-id="8eb53-209">Hata ve yükseltme etki alanı kısıtlamaları ve bunun sonucunda oluşan davranışı</span><span class="sxs-lookup"><span data-stu-id="8eb53-209">Fault and Upgrade Domain constraints and resulting behavior</span></span>
<span data-ttu-id="8eb53-210">Merhaba küme Resource Manager tookeep hizmet arıza ve kısıtlama olarak yükseltme etki alanları arasında dengeli hello desire değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-210">hello Cluster Resource Manager treats hello desire tookeep a service balanced across fault and Upgrade Domains as a constraint.</span></span> <span data-ttu-id="8eb53-211">Kısıtlamalar hakkında daha fazla bilgi için [bu makalede](service-fabric-cluster-resource-manager-management-integration.md).</span><span class="sxs-lookup"><span data-stu-id="8eb53-211">You can find out more about constraints in [this article](service-fabric-cluster-resource-manager-management-integration.md).</span></span> <span data-ttu-id="8eb53-212">Hata ve yükseltme etki alanı kısıtlamaları durumu hello: "verili hizmet bölüm için hiçbir zaman olması gerektiğini fark *birden büyük* hello hizmet nesneleri (durum bilgisiz hizmet örneği veya durum bilgisi olan hizmet çoğaltmaları) sayısı iki etki alanı arasında."</span><span class="sxs-lookup"><span data-stu-id="8eb53-212">hello Fault and Upgrade Domain constraints state: "For a given service partition there should never be a difference *greater than one* in hello number of service objects (stateless service instances or stateful service replicas) between two domains."</span></span> <span data-ttu-id="8eb53-213">Bu, belirli taşır veya bu kısıtlamayı ihlal hazırlıklara önler.</span><span class="sxs-lookup"><span data-stu-id="8eb53-213">This prevents certain moves or arrangements that violate this constraint.</span></span>

<span data-ttu-id="8eb53-214">Bir örneğe bakalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-214">Let's look at one example.</span></span> <span data-ttu-id="8eb53-215">Altı düğümü, beş hata etki alanları ve beş yükseltme etki alanları ile yapılandırılmış bir kümeye sahip olduğunuzu varsayalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-215">Let's say that we have a cluster with six nodes, configured with five Fault Domains and five Upgrade Domains.</span></span>

|  | <span data-ttu-id="8eb53-216">FD0</span><span class="sxs-lookup"><span data-stu-id="8eb53-216">FD0</span></span> | <span data-ttu-id="8eb53-217">FD1</span><span class="sxs-lookup"><span data-stu-id="8eb53-217">FD1</span></span> | <span data-ttu-id="8eb53-218">FD2</span><span class="sxs-lookup"><span data-stu-id="8eb53-218">FD2</span></span> | <span data-ttu-id="8eb53-219">FD3</span><span class="sxs-lookup"><span data-stu-id="8eb53-219">FD3</span></span> | <span data-ttu-id="8eb53-220">FD4</span><span class="sxs-lookup"><span data-stu-id="8eb53-220">FD4</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="8eb53-221">**UD0**</span><span class="sxs-lookup"><span data-stu-id="8eb53-221">**UD0**</span></span> |<span data-ttu-id="8eb53-222">N1</span><span class="sxs-lookup"><span data-stu-id="8eb53-222">N1</span></span> | | | | |
| <span data-ttu-id="8eb53-223">**UD1**</span><span class="sxs-lookup"><span data-stu-id="8eb53-223">**UD1**</span></span> |<span data-ttu-id="8eb53-224">N6</span><span class="sxs-lookup"><span data-stu-id="8eb53-224">N6</span></span> |<span data-ttu-id="8eb53-225">N2</span><span class="sxs-lookup"><span data-stu-id="8eb53-225">N2</span></span> | | | |
| <span data-ttu-id="8eb53-226">**UD2**</span><span class="sxs-lookup"><span data-stu-id="8eb53-226">**UD2**</span></span> | | |<span data-ttu-id="8eb53-227">N3</span><span class="sxs-lookup"><span data-stu-id="8eb53-227">N3</span></span> | | |
| <span data-ttu-id="8eb53-228">**UD3**</span><span class="sxs-lookup"><span data-stu-id="8eb53-228">**UD3**</span></span> | | | |<span data-ttu-id="8eb53-229">N4</span><span class="sxs-lookup"><span data-stu-id="8eb53-229">N4</span></span> | |
| <span data-ttu-id="8eb53-230">**UD4**</span><span class="sxs-lookup"><span data-stu-id="8eb53-230">**UD4**</span></span> | | | | |<span data-ttu-id="8eb53-231">N5</span><span class="sxs-lookup"><span data-stu-id="8eb53-231">N5</span></span> |

<span data-ttu-id="8eb53-232">Şimdi biz bir TargetReplicaSetSize ile (veya Instancecount bir durum bilgisi olmayan bir hizmet için) bir hizmet beş oluşturduğunuzu varsayalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-232">Now let's say that we create a service with a TargetReplicaSetSize (or, for a stateless service an InstanceCount) of five.</span></span> <span data-ttu-id="8eb53-233">Merhaba çoğaltmaları kara N1 N5 üzerinde.</span><span class="sxs-lookup"><span data-stu-id="8eb53-233">hello replicas land on N1-N5.</span></span> <span data-ttu-id="8eb53-234">Aslında, N6 hiçbir zaman kaç Hizmetleri bu oluşturduğunuz gibi olsun kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-234">In fact, N6 is never used no matter how many services like this you create.</span></span> <span data-ttu-id="8eb53-235">Ancak neden?</span><span class="sxs-lookup"><span data-stu-id="8eb53-235">But why?</span></span> <span data-ttu-id="8eb53-236">Merhaba birbirinden hello geçerli düzeni ve N6 seçilirse ne olacağını bakalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-236">Let's look at hello difference between hello current layout and what would happen if N6 is chosen.</span></span>

<span data-ttu-id="8eb53-237">Var ve çoğaltmaları hata ve yükseltme etki alanı başına toplam sayısı hello hello düzeni şöyledir:</span><span class="sxs-lookup"><span data-stu-id="8eb53-237">Here's hello layout we got and hello total number of replicas per Fault and Upgrade Domain:</span></span>

|  | <span data-ttu-id="8eb53-238">FD0</span><span class="sxs-lookup"><span data-stu-id="8eb53-238">FD0</span></span> | <span data-ttu-id="8eb53-239">FD1</span><span class="sxs-lookup"><span data-stu-id="8eb53-239">FD1</span></span> | <span data-ttu-id="8eb53-240">FD2</span><span class="sxs-lookup"><span data-stu-id="8eb53-240">FD2</span></span> | <span data-ttu-id="8eb53-241">FD3</span><span class="sxs-lookup"><span data-stu-id="8eb53-241">FD3</span></span> | <span data-ttu-id="8eb53-242">FD4</span><span class="sxs-lookup"><span data-stu-id="8eb53-242">FD4</span></span> | <span data-ttu-id="8eb53-243">UDTotal</span><span class="sxs-lookup"><span data-stu-id="8eb53-243">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="8eb53-244">**UD0**</span><span class="sxs-lookup"><span data-stu-id="8eb53-244">**UD0**</span></span> |<span data-ttu-id="8eb53-245">R1</span><span class="sxs-lookup"><span data-stu-id="8eb53-245">R1</span></span> | | | | |<span data-ttu-id="8eb53-246">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-246">1</span></span> |
| <span data-ttu-id="8eb53-247">**UD1**</span><span class="sxs-lookup"><span data-stu-id="8eb53-247">**UD1**</span></span> | |<span data-ttu-id="8eb53-248">R2</span><span class="sxs-lookup"><span data-stu-id="8eb53-248">R2</span></span> | | | |<span data-ttu-id="8eb53-249">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-249">1</span></span> |
| <span data-ttu-id="8eb53-250">**UD2**</span><span class="sxs-lookup"><span data-stu-id="8eb53-250">**UD2**</span></span> | | |<span data-ttu-id="8eb53-251">R3</span><span class="sxs-lookup"><span data-stu-id="8eb53-251">R3</span></span> | | |<span data-ttu-id="8eb53-252">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-252">1</span></span> |
| <span data-ttu-id="8eb53-253">**UD3**</span><span class="sxs-lookup"><span data-stu-id="8eb53-253">**UD3**</span></span> | | | |<span data-ttu-id="8eb53-254">R4</span><span class="sxs-lookup"><span data-stu-id="8eb53-254">R4</span></span> | |<span data-ttu-id="8eb53-255">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-255">1</span></span> |
| <span data-ttu-id="8eb53-256">**UD4**</span><span class="sxs-lookup"><span data-stu-id="8eb53-256">**UD4**</span></span> | | | | |<span data-ttu-id="8eb53-257">R5</span><span class="sxs-lookup"><span data-stu-id="8eb53-257">R5</span></span> |<span data-ttu-id="8eb53-258">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-258">1</span></span> |
| <span data-ttu-id="8eb53-259">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="8eb53-259">**FDTotal**</span></span> |<span data-ttu-id="8eb53-260">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-260">1</span></span> |<span data-ttu-id="8eb53-261">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-261">1</span></span> |<span data-ttu-id="8eb53-262">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-262">1</span></span> |<span data-ttu-id="8eb53-263">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-263">1</span></span> |<span data-ttu-id="8eb53-264">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-264">1</span></span> |- |

<span data-ttu-id="8eb53-265">Bu düzen, hata etki alanı ve yükseltme etki alanı başına düğüm bakımından dengelenir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-265">This layout is balanced in terms of nodes per Fault Domain and Upgrade Domain.</span></span> <span data-ttu-id="8eb53-266">Ayrıca, çoğaltma hata ve yükseltme etki alanı başına hello sayısı bakımından dengelenir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-266">It is also balanced in terms of hello number of replicas per Fault and Upgrade Domain.</span></span> <span data-ttu-id="8eb53-267">Her etki alanı olan hello düğümleri aynı sayıda ve hello aynı çoğaltmaların sayısı.</span><span class="sxs-lookup"><span data-stu-id="8eb53-267">Each domain has hello same number of nodes and hello same number of replicas.</span></span>

<span data-ttu-id="8eb53-268">Şimdi, N6 yerine N2 kullandık neler olacağını konumundaki bakalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-268">Now, let's look at what would happen if we'd used N6 instead of N2.</span></span> <span data-ttu-id="8eb53-269">Nasıl hello çoğaltmaları sonra dağıtılmış?</span><span class="sxs-lookup"><span data-stu-id="8eb53-269">How would hello replicas be distributed then?</span></span>

|  | <span data-ttu-id="8eb53-270">FD0</span><span class="sxs-lookup"><span data-stu-id="8eb53-270">FD0</span></span> | <span data-ttu-id="8eb53-271">FD1</span><span class="sxs-lookup"><span data-stu-id="8eb53-271">FD1</span></span> | <span data-ttu-id="8eb53-272">FD2</span><span class="sxs-lookup"><span data-stu-id="8eb53-272">FD2</span></span> | <span data-ttu-id="8eb53-273">FD3</span><span class="sxs-lookup"><span data-stu-id="8eb53-273">FD3</span></span> | <span data-ttu-id="8eb53-274">FD4</span><span class="sxs-lookup"><span data-stu-id="8eb53-274">FD4</span></span> | <span data-ttu-id="8eb53-275">UDTotal</span><span class="sxs-lookup"><span data-stu-id="8eb53-275">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="8eb53-276">**UD0**</span><span class="sxs-lookup"><span data-stu-id="8eb53-276">**UD0**</span></span> |<span data-ttu-id="8eb53-277">R1</span><span class="sxs-lookup"><span data-stu-id="8eb53-277">R1</span></span> | | | | |<span data-ttu-id="8eb53-278">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-278">1</span></span> |
| <span data-ttu-id="8eb53-279">**UD1**</span><span class="sxs-lookup"><span data-stu-id="8eb53-279">**UD1**</span></span> |<span data-ttu-id="8eb53-280">R5</span><span class="sxs-lookup"><span data-stu-id="8eb53-280">R5</span></span> | | | | |<span data-ttu-id="8eb53-281">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-281">1</span></span> |
| <span data-ttu-id="8eb53-282">**UD2**</span><span class="sxs-lookup"><span data-stu-id="8eb53-282">**UD2**</span></span> | | |<span data-ttu-id="8eb53-283">R2</span><span class="sxs-lookup"><span data-stu-id="8eb53-283">R2</span></span> | | |<span data-ttu-id="8eb53-284">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-284">1</span></span> |
| <span data-ttu-id="8eb53-285">**UD3**</span><span class="sxs-lookup"><span data-stu-id="8eb53-285">**UD3**</span></span> | | | |<span data-ttu-id="8eb53-286">R3</span><span class="sxs-lookup"><span data-stu-id="8eb53-286">R3</span></span> | |<span data-ttu-id="8eb53-287">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-287">1</span></span> |
| <span data-ttu-id="8eb53-288">**UD4**</span><span class="sxs-lookup"><span data-stu-id="8eb53-288">**UD4**</span></span> | | | | |<span data-ttu-id="8eb53-289">R4</span><span class="sxs-lookup"><span data-stu-id="8eb53-289">R4</span></span> |<span data-ttu-id="8eb53-290">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-290">1</span></span> |
| <span data-ttu-id="8eb53-291">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="8eb53-291">**FDTotal**</span></span> |<span data-ttu-id="8eb53-292">2</span><span class="sxs-lookup"><span data-stu-id="8eb53-292">2</span></span> |<span data-ttu-id="8eb53-293">0</span><span class="sxs-lookup"><span data-stu-id="8eb53-293">0</span></span> |<span data-ttu-id="8eb53-294">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-294">1</span></span> |<span data-ttu-id="8eb53-295">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-295">1</span></span> |<span data-ttu-id="8eb53-296">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-296">1</span></span> |- |

<span data-ttu-id="8eb53-297">Bu düzen hello hata etki alanı kısıtlaması için bizim tanımını ihlal ediyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-297">This layout violates our definition for hello Fault Domain constraint.</span></span> <span data-ttu-id="8eb53-298">FD1 iki toplam sıfır, FD0 ve FD1 yapmayı hello birbirinden sahipken FD0 iki çoğaltması yok.</span><span class="sxs-lookup"><span data-stu-id="8eb53-298">FD0 has two replicas, while FD1 has zero, making hello difference between FD0 and FD1 a total of two.</span></span> <span data-ttu-id="8eb53-299">Merhaba Küme Kaynak Yöneticisi, bu düzenleme izin vermiyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-299">hello Cluster Resource Manager does not allow this arrangement.</span></span> <span data-ttu-id="8eb53-300">Benzer şekilde biz N2 ve N6 (yerine N1 ve N2) kaldırdıysa biz alın:</span><span class="sxs-lookup"><span data-stu-id="8eb53-300">Similarly if we picked N2 and N6 (instead of N1 and N2) we'd get:</span></span>

|  | <span data-ttu-id="8eb53-301">FD0</span><span class="sxs-lookup"><span data-stu-id="8eb53-301">FD0</span></span> | <span data-ttu-id="8eb53-302">FD1</span><span class="sxs-lookup"><span data-stu-id="8eb53-302">FD1</span></span> | <span data-ttu-id="8eb53-303">FD2</span><span class="sxs-lookup"><span data-stu-id="8eb53-303">FD2</span></span> | <span data-ttu-id="8eb53-304">FD3</span><span class="sxs-lookup"><span data-stu-id="8eb53-304">FD3</span></span> | <span data-ttu-id="8eb53-305">FD4</span><span class="sxs-lookup"><span data-stu-id="8eb53-305">FD4</span></span> | <span data-ttu-id="8eb53-306">UDTotal</span><span class="sxs-lookup"><span data-stu-id="8eb53-306">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="8eb53-307">**UD0**</span><span class="sxs-lookup"><span data-stu-id="8eb53-307">**UD0**</span></span> | | | | | |<span data-ttu-id="8eb53-308">0</span><span class="sxs-lookup"><span data-stu-id="8eb53-308">0</span></span> |
| <span data-ttu-id="8eb53-309">**UD1**</span><span class="sxs-lookup"><span data-stu-id="8eb53-309">**UD1**</span></span> |<span data-ttu-id="8eb53-310">R5</span><span class="sxs-lookup"><span data-stu-id="8eb53-310">R5</span></span> |<span data-ttu-id="8eb53-311">R1</span><span class="sxs-lookup"><span data-stu-id="8eb53-311">R1</span></span> | | | |<span data-ttu-id="8eb53-312">2</span><span class="sxs-lookup"><span data-stu-id="8eb53-312">2</span></span> |
| <span data-ttu-id="8eb53-313">**UD2**</span><span class="sxs-lookup"><span data-stu-id="8eb53-313">**UD2**</span></span> | | |<span data-ttu-id="8eb53-314">R2</span><span class="sxs-lookup"><span data-stu-id="8eb53-314">R2</span></span> | | |<span data-ttu-id="8eb53-315">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-315">1</span></span> |
| <span data-ttu-id="8eb53-316">**UD3**</span><span class="sxs-lookup"><span data-stu-id="8eb53-316">**UD3**</span></span> | | | |<span data-ttu-id="8eb53-317">R3</span><span class="sxs-lookup"><span data-stu-id="8eb53-317">R3</span></span> | |<span data-ttu-id="8eb53-318">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-318">1</span></span> |
| <span data-ttu-id="8eb53-319">**UD4**</span><span class="sxs-lookup"><span data-stu-id="8eb53-319">**UD4**</span></span> | | | | |<span data-ttu-id="8eb53-320">R4</span><span class="sxs-lookup"><span data-stu-id="8eb53-320">R4</span></span> |<span data-ttu-id="8eb53-321">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-321">1</span></span> |
| <span data-ttu-id="8eb53-322">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="8eb53-322">**FDTotal**</span></span> |<span data-ttu-id="8eb53-323">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-323">1</span></span> |<span data-ttu-id="8eb53-324">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-324">1</span></span> |<span data-ttu-id="8eb53-325">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-325">1</span></span> |<span data-ttu-id="8eb53-326">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-326">1</span></span> |<span data-ttu-id="8eb53-327">1</span><span class="sxs-lookup"><span data-stu-id="8eb53-327">1</span></span> |- |

<span data-ttu-id="8eb53-328">Bu düzen, hata etki alanlarını bakımından dengelenir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-328">This layout is balanced in terms of Fault Domains.</span></span> <span data-ttu-id="8eb53-329">Ancak, şimdi onu hello yükseltme etki alanı kısıtlaması ihlal.</span><span class="sxs-lookup"><span data-stu-id="8eb53-329">However, now it's violating hello Upgrade Domain constraint.</span></span> <span data-ttu-id="8eb53-330">UD1 iki sahipken UD0 sıfır çoğaltmalarına sahip olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-330">This is because UD0 has zero replicas while UD1 has two.</span></span> <span data-ttu-id="8eb53-331">Bu nedenle, bu düzeni ayrıca geçersiz ve hello küme kaynak yöneticisi tarafından çekilmesi olmaz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-331">Therefore, this layout is also invalid and won't be picked by hello Cluster Resource Manager.</span></span> 

## <a name="configuring-fault-and-upgrade-domains"></a><span data-ttu-id="8eb53-332">Hata ve yükseltme etki alanlarını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="8eb53-332">Configuring fault and Upgrade Domains</span></span>
<span data-ttu-id="8eb53-333">Hata etki alanları ve yükseltme etki alanları tanımlama yapılır otomatik olarak Azure Service Fabric dağıtımları barındırılan.</span><span class="sxs-lookup"><span data-stu-id="8eb53-333">Defining Fault Domains and Upgrade Domains is done automatically in Azure hosted Service Fabric deployments.</span></span> <span data-ttu-id="8eb53-334">Service Fabric alır ve Azure hello ortam bilgileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-334">Service Fabric picks up and uses hello environment information from Azure.</span></span>

<span data-ttu-id="8eb53-335">Kendi kümenizi oluşturmakta olduğunuz (veya toorun geliştirme belirli bir topolojisinde istediğiniz varsa), kendiniz hello hata etki alanı ve etki alanı yükseltme bilgileri sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-335">If you’re creating your own cluster (or want toorun a particular topology in development), you can provide hello Fault Domain and Upgrade Domain information yourself.</span></span> <span data-ttu-id="8eb53-336">Bu örnekte, üç "veri merkezleri" (her üç rafları) yayılan dokuz düğümlü bir yerel geliştirme küme tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-336">In this example, we define a nine node local development cluster that spans three “datacenters” (each with three racks).</span></span> <span data-ttu-id="8eb53-337">Bu küme üç yükseltme bu üç veri merkezi arasında şeritli etki alanı da sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-337">This cluster also has three Upgrade Domains striped across those three datacenters.</span></span> <span data-ttu-id="8eb53-338">Merhaba yapılandırma örneği aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="8eb53-338">An example of hello configuration is below:</span></span> 

<span data-ttu-id="8eb53-339">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="8eb53-339">ClusterManifest.xml</span></span>

```xml
  <Infrastructure>
    <!-- IsScaleMin indicates that this cluster runs on one-box /one single server -->
    <WindowsServer IsScaleMin="true">
      <NodeList>
        <Node NodeName="Node01" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType01" FaultDomain="fd:/DC01/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node02" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType02" FaultDomain="fd:/DC01/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node03" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType03" FaultDomain="fd:/DC01/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node04" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType04" FaultDomain="fd:/DC02/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node05" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType05" FaultDomain="fd:/DC02/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node06" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType06" FaultDomain="fd:/DC02/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node07" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType07" FaultDomain="fd:/DC03/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node08" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType08" FaultDomain="fd:/DC03/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node09" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType09" FaultDomain="fd:/DC03/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
      </NodeList>
    </WindowsServer>
  </Infrastructure>
```

<span data-ttu-id="8eb53-340">tek başına dağıtımlarında ClusterConfig.json</span><span class="sxs-lookup"><span data-stu-id="8eb53-340">via ClusterConfig.json for Standalone deployments</span></span>

```json
"nodes": [
  {
    "nodeName": "vm1",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm2",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm3",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm4",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm5",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm6",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm7",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm8",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm9",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD3"
  }
],
```

> [!NOTE]
> <span data-ttu-id="8eb53-341">Kümeler Azure Resource Manager aracılığıyla tanımlarken, hata etki alanları ve yükseltme etki alanlarının Azure tarafından atanır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-341">When defining clusters via Azure Resource Manager, Fault Domains and Upgrade Domains are assigned by Azure.</span></span> <span data-ttu-id="8eb53-342">Bu nedenle, düğüm türleri ve sanal makine ölçek kümeleri için Azure Resource Manager şablonunda hello tanımı hata etki alanı veya etki alanı yükseltme bilgileri içermez.</span><span class="sxs-lookup"><span data-stu-id="8eb53-342">Therefore, hello definition of your Node Types and Virtual Machine Scale Sets in your Azure Resource Manager template does not include Fault Domain or Upgrade Domain information.</span></span>
>

## <a name="node-properties-and-placement-constraints"></a><span data-ttu-id="8eb53-343">Düğüm özellikleri ve yerleştirme kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="8eb53-343">Node properties and placement constraints</span></span>
<span data-ttu-id="8eb53-344">Bazen (aslında hello zamanının çoğunu), belirli türde bir hello kümedeki düğümler üzerinde yalnızca belirli iş yüklerini çalıştırmak toowant tooensure oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="8eb53-344">Sometimes (in fact, most of hello time) you’re going toowant tooensure that certain workloads run only on certain types of nodes in hello cluster.</span></span> <span data-ttu-id="8eb53-345">Örneğin, diğerleri olmayabilir ancak bazı iş yükü GPU veya SSD gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-345">For example, some workload may require GPUs or SSDs while others may not.</span></span> <span data-ttu-id="8eb53-346">Neredeyse her n katmanlı mimarisi ölçeklendiriyor donanım tooparticular iş yükleri hedefleme harika bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-346">A great example of targeting hardware tooparticular workloads is almost every n-tier architecture out there.</span></span> <span data-ttu-id="8eb53-347">Belirli makineler ön uç veya hello uygulamanın tarafı hizmet veren API hello olarak sunulan toohello istemciler veya Internet hello.</span><span class="sxs-lookup"><span data-stu-id="8eb53-347">Certain machines serve as hello front end or API serving side of hello application and are exposed toohello clients or hello internet.</span></span> <span data-ttu-id="8eb53-348">Genellikle, farklı donanım kaynakları olan farklı makinelerde hello işlem ya da depolama katmanları hello çalışmanın işleyin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-348">Different machines, often with different hardware resources, handle hello work of hello compute or storage layers.</span></span> <span data-ttu-id="8eb53-349">Çoğunlukla bunlar _değil_ doğrudan tooclients kullanıma sunulan veya Internet hello.</span><span class="sxs-lookup"><span data-stu-id="8eb53-349">These are usually _not_ directly exposed tooclients or hello internet.</span></span> <span data-ttu-id="8eb53-350">Service Fabric burada belirli iş yükleri üzerinde belirli donanım yapılandırmalarını toorun gereken durumlarda olduğunu bekliyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-350">Service Fabric expects that there are cases where particular workloads need toorun on particular hardware configurations.</span></span> <span data-ttu-id="8eb53-351">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="8eb53-351">For example:</span></span>

* <span data-ttu-id="8eb53-352">bir Service Fabric ortamına varolan n katmanlı uygulama "kaldırılmış ve gölgeye" olarak adlandırılmıştır</span><span class="sxs-lookup"><span data-stu-id="8eb53-352">an existing n-tier application has been “lifted and shifted” into a Service Fabric environment</span></span>
* <span data-ttu-id="8eb53-353">bir iş yükü toorun belirli donanım üzerinde performans, Ölçek veya güvenlik yalıtımı nedeniyle istemektedir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-353">a workload wants toorun on specific hardware for performance, scale, or security isolation reasons</span></span>
* <span data-ttu-id="8eb53-354">Bir iş yükü İlkesi ya da kaynak tüketimi nedeniyle diğer iş yüklerini üzerinden olmalıdır</span><span class="sxs-lookup"><span data-stu-id="8eb53-354">A workload should be isolated from other workloads for policy or resource consumption reasons</span></span>

<span data-ttu-id="8eb53-355">toosupport yapılandırmaları, bu tür Service Fabric uygulanan toonodes olabilir etiketleri birinci sınıf kavramı vardır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-355">toosupport these sorts of configurations, Service Fabric has a first class notion of tags that can be applied toonodes.</span></span> <span data-ttu-id="8eb53-356">Bu etiketler adlı **düğümü özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="8eb53-356">These tags are called **node properties**.</span></span> <span data-ttu-id="8eb53-357">**Kısıtlamalarından** olan hello deyimleri bağlı bir veya daha fazla düğüm özelliklerini seçin tooindividual Hizmetleri.</span><span class="sxs-lookup"><span data-stu-id="8eb53-357">**Placement constraints** are hello statements attached tooindividual services that select for one or more node properties.</span></span> <span data-ttu-id="8eb53-358">Kısıtlamalarından Hizmetleri çalıştırdığı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8eb53-358">Placement constraints define where services should run.</span></span> <span data-ttu-id="8eb53-359">Merhaba kısıtlamaları Genişletilebilir kümesidir - herhangi bir anahtar/değer çifti çalışabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-359">hello set of constraints is extensible - any key/value pair can work.</span></span> 

<span data-ttu-id="8eb53-360"><center>
![Düzen farklı iş yükleri küme][Image5]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-360"><center>
![Cluster Layout Different Workloads][Image5]
</center></span></span>

### <a name="built-in-node-properties"></a><span data-ttu-id="8eb53-361">Düğüm özellikleri yerleşik</span><span class="sxs-lookup"><span data-stu-id="8eb53-361">Built in node properties</span></span>
<span data-ttu-id="8eb53-362">Service Fabric toodefine sahip hello kullanıcı otomatik olarak kullanılabilecek bazı varsayılan düğüm özelliklerini tanımlayan bunları.</span><span class="sxs-lookup"><span data-stu-id="8eb53-362">Service Fabric defines some default node properties that can be used automatically without hello user having toodefine them.</span></span> <span data-ttu-id="8eb53-363">her düğümde tanımlanan hello varsayılan özelliklerdir hello **NodeType** ve hello **NodeName**.</span><span class="sxs-lookup"><span data-stu-id="8eb53-363">hello default properties defined at each node are hello **NodeType** and hello **NodeName**.</span></span> <span data-ttu-id="8eb53-364">Bu nedenle örneğin yerleştirme kısıtlama olarak yazabilirsiniz `"(NodeType == NodeType03)"`.</span><span class="sxs-lookup"><span data-stu-id="8eb53-364">So for example you could write a placement constraint as `"(NodeType == NodeType03)"`.</span></span> <span data-ttu-id="8eb53-365">Genellikle NodeType toobe en yaygın olarak kullanılan hello özelliklerinden biri bulduk.</span><span class="sxs-lookup"><span data-stu-id="8eb53-365">Generally we have found NodeType toobe one of hello most commonly used properties.</span></span> <span data-ttu-id="8eb53-366">Bir makine türüyle 1:1 karşılık gelen beri yararlı olur.</span><span class="sxs-lookup"><span data-stu-id="8eb53-366">It is useful since it corresponds 1:1 with a type of a machine.</span></span> <span data-ttu-id="8eb53-367">Her makine türünün karşılık gelen bir geleneksel n katmanlı uygulama iş yükündeki tooa türü.</span><span class="sxs-lookup"><span data-stu-id="8eb53-367">Each type of machine corresponds tooa type of workload in a traditional n-tier application.</span></span>

<span data-ttu-id="8eb53-368"><center>
![Yerleştirme kısıtlamaları ve düğüm özellikleri][Image6]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-368"><center>
![Placement Constraints and Node Properties][Image6]
</center></span></span>

## <a name="placement-constraint-and-node-property-syntax"></a><span data-ttu-id="8eb53-369">Yerleştirme kısıtlaması ve düğüm özellik sözdizimi</span><span class="sxs-lookup"><span data-stu-id="8eb53-369">Placement Constraint and Node Property Syntax</span></span> 
<span data-ttu-id="8eb53-370">Merhaba düğümü özelliğinde belirtilen hello değeri veya uzun imzalı bir string, bool, olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-370">hello value specified in hello node property can be a string, bool, or signed long.</span></span> <span data-ttu-id="8eb53-371">Merhaba deyimi hello hizmetine bir yerleştirme adlı *kısıtlaması* hello hizmeti hello kümede burada çalışabilir kısıtlar beri.</span><span class="sxs-lookup"><span data-stu-id="8eb53-371">hello statement at hello service is called a placement *constraint* since it constrains where hello service can run in hello cluster.</span></span> <span data-ttu-id="8eb53-372">Merhaba kısıtlaması hello farklı bir düğüme hello küme özelliklerinde çalıştırır herhangi bir Boole ifadesini olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-372">hello constraint can be any Boolean statement that operates on hello different node properties in hello cluster.</span></span> <span data-ttu-id="8eb53-373">Bu boolean deyimlerinde Hello geçerli seçiciler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8eb53-373">hello valid selectors in these boolean statements are:</span></span>

1) <span data-ttu-id="8eb53-374">belirli ifadeleri oluşturmak için koşullu denetimleri</span><span class="sxs-lookup"><span data-stu-id="8eb53-374">conditional checks for creating particular statements</span></span>

| <span data-ttu-id="8eb53-375">Deyimi</span><span class="sxs-lookup"><span data-stu-id="8eb53-375">Statement</span></span> | <span data-ttu-id="8eb53-376">Sözdizimi</span><span class="sxs-lookup"><span data-stu-id="8eb53-376">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="8eb53-377">"eşit"</span><span class="sxs-lookup"><span data-stu-id="8eb53-377">"equal to"</span></span> | <span data-ttu-id="8eb53-378">"=="</span><span class="sxs-lookup"><span data-stu-id="8eb53-378">"=="</span></span> |
| <span data-ttu-id="8eb53-379">"eşit değil"</span><span class="sxs-lookup"><span data-stu-id="8eb53-379">"not equal to"</span></span> | <span data-ttu-id="8eb53-380">"!="</span><span class="sxs-lookup"><span data-stu-id="8eb53-380">"!="</span></span> |
| <span data-ttu-id="8eb53-381">"büyüktür"</span><span class="sxs-lookup"><span data-stu-id="8eb53-381">"greater than"</span></span> | <span data-ttu-id="8eb53-382">">"</span><span class="sxs-lookup"><span data-stu-id="8eb53-382">">"</span></span> |
| <span data-ttu-id="8eb53-383">"değerinden büyük veya eşit"</span><span class="sxs-lookup"><span data-stu-id="8eb53-383">"greater than or equal to"</span></span> | <span data-ttu-id="8eb53-384">">="</span><span class="sxs-lookup"><span data-stu-id="8eb53-384">">="</span></span> |
| <span data-ttu-id="8eb53-385">"küçüktür"</span><span class="sxs-lookup"><span data-stu-id="8eb53-385">"less than"</span></span> | <span data-ttu-id="8eb53-386">"<"</span><span class="sxs-lookup"><span data-stu-id="8eb53-386">"<"</span></span> |
| <span data-ttu-id="8eb53-387">"küçük veya eşit"</span><span class="sxs-lookup"><span data-stu-id="8eb53-387">"less than or equal to"</span></span> | <span data-ttu-id="8eb53-388">"<="</span><span class="sxs-lookup"><span data-stu-id="8eb53-388">"<="</span></span> |

2) <span data-ttu-id="8eb53-389">gruplandırma ve mantıksal işlemleri için Boole ifadeleri</span><span class="sxs-lookup"><span data-stu-id="8eb53-389">boolean statements for grouping and logical operations</span></span>

| <span data-ttu-id="8eb53-390">Deyimi</span><span class="sxs-lookup"><span data-stu-id="8eb53-390">Statement</span></span> | <span data-ttu-id="8eb53-391">Sözdizimi</span><span class="sxs-lookup"><span data-stu-id="8eb53-391">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="8eb53-392">"ve"</span><span class="sxs-lookup"><span data-stu-id="8eb53-392">"and"</span></span> | <span data-ttu-id="8eb53-393">"&&"</span><span class="sxs-lookup"><span data-stu-id="8eb53-393">"&&"</span></span> |
| <span data-ttu-id="8eb53-394">"veya"</span><span class="sxs-lookup"><span data-stu-id="8eb53-394">"or"</span></span> | <span data-ttu-id="8eb53-395">"&#124;&#124;"</span><span class="sxs-lookup"><span data-stu-id="8eb53-395">"&#124;&#124;"</span></span> |
| <span data-ttu-id="8eb53-396">"değil"</span><span class="sxs-lookup"><span data-stu-id="8eb53-396">"not"</span></span> | <span data-ttu-id="8eb53-397">"!"</span><span class="sxs-lookup"><span data-stu-id="8eb53-397">"!"</span></span> |
| <span data-ttu-id="8eb53-398">"grubu olarak tek bir deyimde"</span><span class="sxs-lookup"><span data-stu-id="8eb53-398">"group as single statement"</span></span> | <span data-ttu-id="8eb53-399">"()"</span><span class="sxs-lookup"><span data-stu-id="8eb53-399">"()"</span></span> |

<span data-ttu-id="8eb53-400">Temel kısıtlama deyimleri bazı örnekleri aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-400">Here are some examples of basic constraint statements.</span></span>

  * `"Value >= 5"`
  * `"NodeColor != green"`
  * `"((OneProperty < 100) || ((AnotherProperty == false) && (OneProperty >= 100)))"`

<span data-ttu-id="8eb53-401">Burada hello genel yerleştirme kısıtlaması deyimi "True" çok değerlendirir yalnızca düğümler üzerinde yerleştirilen hello hizmetine sahip olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-401">Only nodes where hello overall placement constraint statement evaluates too“True” can have hello service placed on it.</span></span> <span data-ttu-id="8eb53-402">Tanımlanmış bir özellik olmayan düğümleri içeren bu özellik her yerleştirme kısıtlamayla eşleşmiyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-402">Nodes that do not have a property defined do not match any placement constraint containing that property.</span></span>

<span data-ttu-id="8eb53-403">Düğüm özellikleri verilen düğüm türü için tanımlı aşağıdaki o hello varsayalım:</span><span class="sxs-lookup"><span data-stu-id="8eb53-403">Let’s say that hello following node properties were defined for a given node type:</span></span>

<span data-ttu-id="8eb53-404">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="8eb53-404">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType01">
      <PlacementProperties>
        <Property Name="HasSSD" Value="true"/>
        <Property Name="NodeColor" Value="green"/>
        <Property Name="SomeProperty" Value="5"/>
      </PlacementProperties>
    </NodeType>
```

<span data-ttu-id="8eb53-405">tek başına dağıtımlarında ClusterConfig.json ya da Azure için Template.json aracılığıyla kümeleri barındırılan.</span><span class="sxs-lookup"><span data-stu-id="8eb53-405">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

> [!NOTE]
> <span data-ttu-id="8eb53-406">Azure Resource Manager şablonu hello düğümünüz türü genellikle parametreli.</span><span class="sxs-lookup"><span data-stu-id="8eb53-406">In your Azure Resource Manager template hello node type is usually parameterized.</span></span> <span data-ttu-id="8eb53-407">"NodeType01 yerine", "[parameters('vmNodeType1Name')]" gibi görünür.</span><span class="sxs-lookup"><span data-stu-id="8eb53-407">It would look like "[parameters('vmNodeType1Name')]" rather than "NodeType01".</span></span>
>

```json
"nodeTypes": [
    {
        "name": "NodeType01",
        "placementProperties": {
            "HasSSD": "true",
            "NodeColor": "green",
            "SomeProperty": "5"
        },
    }
],
```

<span data-ttu-id="8eb53-408">Hizmet yerleşimi oluşturabilirsiniz *kısıtlamaları* gösterildiği gibi bir hizmet için:</span><span class="sxs-lookup"><span data-stu-id="8eb53-408">You can create service placement *constraints* for a service like as follows:</span></span>

<span data-ttu-id="8eb53-409">C#</span><span class="sxs-lookup"><span data-stu-id="8eb53-409">C#</span></span>

```csharp
FabricClient fabricClient = new FabricClient();
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
serviceDescription.PlacementConstraints = "(HasSSD == true && SomeProperty >= 4)";
// add other required servicedescription fields
//...
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="8eb53-410">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8eb53-410">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceType -Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton -PlacementConstraint "HasSSD == true && SomeProperty >= 4"
```

<span data-ttu-id="8eb53-411">Tüm düğümleri NodeType01 geçerliyse, bu düğüm türü hello kısıtlaması ile öğesini de seçebilirsiniz "(NodeType == NodeType01)".</span><span class="sxs-lookup"><span data-stu-id="8eb53-411">If all nodes of NodeType01 are valid, you can also select that node type with hello constraint "(NodeType == NodeType01)".</span></span>

<span data-ttu-id="8eb53-412">Merhaba harika bir hizmetin kısıtlamalarından çalışmalarıdır bunlar dinamik olarak çalışma zamanı sırasında güncelleştirilmesi biridir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-412">One of hello cool things about a service’s placement constraints is that they can be updated dynamically during runtime.</span></span> <span data-ttu-id="8eb53-413">Bu nedenle gerekiyorsa, bir hizmet hello kümede hareket ettirin, ekleyip kaldırabilirsiniz gereksinimleri, vb.. Service Fabric hello hizmet yukarı ve kullanılabilir bile, bu tür değişiklikleri yapılan kaldığından emin olma mvc'deki.</span><span class="sxs-lookup"><span data-stu-id="8eb53-413">So if you need to, you can move a service around in hello cluster, add and remove requirements, etc. Service Fabric takes care of ensuring that hello service stays up and available even when these types of changes are made.</span></span>

<span data-ttu-id="8eb53-414">C# ' TA:</span><span class="sxs-lookup"><span data-stu-id="8eb53-414">C#:</span></span>

```csharp
StatefulServiceUpdateDescription updateDescription = new StatefulServiceUpdateDescription();
updateDescription.PlacementConstraints = "NodeType == NodeType01";
await fabricClient.ServiceManager.UpdateServiceAsync(new Uri("fabric:/app/service"), updateDescription);
```

<span data-ttu-id="8eb53-415">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8eb53-415">Powershell:</span></span>

```posh
Update-ServiceFabricService -Stateful -ServiceName $serviceName -PlacementConstraints "NodeType == NodeType01"
```

<span data-ttu-id="8eb53-416">Kısıtlamalarından her farklı adlı hizmet örneği için belirtilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-416">Placement constraints are specified for every different named service instance.</span></span> <span data-ttu-id="8eb53-417">Güncelleştirmeleri her zaman hello yerine uygulamanız (üzerine yaz) ne daha önce belirtildi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-417">Updates always take hello place of (overwrite) what was previously specified.</span></span>

<span data-ttu-id="8eb53-418">Merhaba Küme tanımı bir düğümde hello özelliklerini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8eb53-418">hello cluster definition defines hello properties on a node.</span></span> <span data-ttu-id="8eb53-419">Bir düğümün özelliklerini değiştirme küme yapılandırması yükseltme gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-419">Changing a node's properties requires a cluster configuration upgrade.</span></span> <span data-ttu-id="8eb53-420">Bir düğümün özellikleri yükseltme her etkilenen düğüm toorestart tooreport yeni özelliklerini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-420">Upgrading a node's properties requires each affected node toorestart tooreport its new properties.</span></span> <span data-ttu-id="8eb53-421">Bunlar çalışırken yükseltme Service Fabric tarafından yönetilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-421">These rolling upgrades are managed by Service Fabric.</span></span>

## <a name="describing-and-managing-cluster-resources"></a><span data-ttu-id="8eb53-422">Açıklayan ve küme kaynaklarını yönetme</span><span class="sxs-lookup"><span data-stu-id="8eb53-422">Describing and Managing Cluster Resources</span></span>
<span data-ttu-id="8eb53-423">Merhaba işleri tüm orchestrator olan toohelp en önemli birini hello küme kaynak tüketimini yönetin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-423">One of hello most important jobs of any orchestrator is toohelp manage resource consumption in hello cluster.</span></span> <span data-ttu-id="8eb53-424">Küme kaynaklarını yönetme farklı şunları anlamına gelebilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-424">Managing cluster resources can mean a couple of different things.</span></span> <span data-ttu-id="8eb53-425">İlk olarak, var. makineler aşırı yüklü olmadığını sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-425">First, there's ensuring that machines are not overloaded.</span></span> <span data-ttu-id="8eb53-426">Bu makineler bunlar işleyebileceğinden daha fazla hizmet çalıştırmıyor emin olma anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-426">This means making sure that machines aren't running more services than they can handle.</span></span> <span data-ttu-id="8eb53-427">İkinci olarak, Yük Dengeleme ve kritik toorunning Hizmetleri verimli bir şekilde olan en iyi duruma getirme yoktur.</span><span class="sxs-lookup"><span data-stu-id="8eb53-427">Second, there's balancing and optimization which is critical toorunning services efficiently.</span></span> <span data-ttu-id="8eb53-428">Başkalarının soğuk durumdayken maliyet etkili veya performans hassas hizmet teklifleri bazı düğümler toobe etkin izin veremez.</span><span class="sxs-lookup"><span data-stu-id="8eb53-428">Cost effective or performance sensitive service offerings can't allow some nodes toobe hot while others are cold.</span></span> <span data-ttu-id="8eb53-429">Etkin düğümleri tooresource Çekişme ve düşük performans ve soğuk düğümleri küçülttüğü iyi bir şekilde temsil kaynakları ve artan maliyetleri sağlama.</span><span class="sxs-lookup"><span data-stu-id="8eb53-429">Hot nodes lead tooresource contention and poor performance, and cold nodes represent wasted resources and increased costs.</span></span> 

<span data-ttu-id="8eb53-430">Service Fabric kaynakları olarak temsil eden `Metrics`.</span><span class="sxs-lookup"><span data-stu-id="8eb53-430">Service Fabric represents resources as `Metrics`.</span></span> <span data-ttu-id="8eb53-431">Toodescribe tooService doku istediğiniz mantıksal veya fiziksel kaynak ölçümleridir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-431">Metrics are any logical or physical resource that you want toodescribe tooService Fabric.</span></span> <span data-ttu-id="8eb53-432">"WorkQueueDepth" veya "MemoryInMb" gibi şeyleri ölçümleri örnekleridir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-432">Examples of metrics are things like “WorkQueueDepth” or “MemoryInMb”.</span></span> <span data-ttu-id="8eb53-433">Düğümlerde Service Fabric yönetebilecek hello fiziksel kaynakları hakkında bilgi için bkz: [kaynak İdaresi](service-fabric-resource-governance.md).</span><span class="sxs-lookup"><span data-stu-id="8eb53-433">For information about hello physical resources that Service Fabric can govern on nodes, see [resource governance](service-fabric-resource-governance.md).</span></span> <span data-ttu-id="8eb53-434">Özel ölçümleri ve kullanımları yapılandırma hakkında daha fazla bilgi için bkz: [bu makalede](service-fabric-cluster-resource-manager-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="8eb53-434">For information on configuring custom metrics and their uses, see [this article](service-fabric-cluster-resource-manager-metrics.md)</span></span>

<span data-ttu-id="8eb53-435">Ölçümleri yerleşimi kısıtlamaları ve düğüm özellikleri farklıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-435">Metrics are different from placements constraints and node properties.</span></span> <span data-ttu-id="8eb53-436">Düğüm, statik tanımlayıcıları hello düğümlerin kendilerini özelliklerdir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-436">Node properties are static descriptors of hello nodes themselves.</span></span> <span data-ttu-id="8eb53-437">Ölçümleri düğümünüz kaynaklar ve bir düğümde çalıştırdığınızda hizmetlerini kullanma açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-437">Metrics describe resources that nodes have and that services consume when they are run on a node.</span></span> <span data-ttu-id="8eb53-438">Bir düğüm özelliği "HasSSD" olabilir ve tootrue ya da yanlış ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-438">A node property could be "HasSSD" and could be set tootrue or false.</span></span> <span data-ttu-id="8eb53-439">kullanılabilir alan miktarını Hello bu SSD ve ne kadar hizmetler tarafından kullanılan "DriveSpaceInMb" gibi bir ölçü olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-439">hello amount of space available on that SSD and how much is consumed by services would be a metric like “DriveSpaceInMb”.</span></span> 

<span data-ttu-id="8eb53-440">Merhaba Service Fabric kümesi Kaynak Yöneticisi hello ölçümleri ortalama hangi hello adlarını anlamıyor kısıtlamalarından ve düğüm özellikleri için olduğu gibi önemli toonote olur.</span><span class="sxs-lookup"><span data-stu-id="8eb53-440">It is important toonote that just like for placement constraints and node properties, hello Service Fabric Cluster Resource Manager doesn't understand what hello names of hello metrics mean.</span></span> <span data-ttu-id="8eb53-441">Ölçüm adları yalnızca dizelerdir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-441">Metric names are just strings.</span></span> <span data-ttu-id="8eb53-442">Bu bir iyi bir uygulama toodeclare belirsiz olabilir, oluşturduğunuz hello ölçüm adları bir parçası olarak birimidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-442">It is a good practice toodeclare units as a part of hello metric names that you create when it could be ambiguous.</span></span>

## <a name="capacity"></a><span data-ttu-id="8eb53-443">Kapasite</span><span class="sxs-lookup"><span data-stu-id="8eb53-443">Capacity</span></span>
<span data-ttu-id="8eb53-444">Tüm kaynak etkinleştirdiyseniz *Dengeleme*, Service Fabric'ın Küme Kaynak Yöneticisi hala sağlamak hiçbir düğüm kapasitesi sonuçlandı olduğunu.</span><span class="sxs-lookup"><span data-stu-id="8eb53-444">If you turned off all resource *balancing*, Service Fabric’s Cluster Resource Manager would still ensure that no node ended up over its capacity.</span></span> <span data-ttu-id="8eb53-445">Kapasite taşmaları yönetme hello küme çok dolu veya hello iş yükünün düğümlerinden büyük olduğu sürece mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8eb53-445">Managing capacity overruns is possible unless hello cluster is too full or hello workload is larger than any node.</span></span> <span data-ttu-id="8eb53-446">Kapasitesi ise başka bir *kısıtlaması* toounderstand bu hello Küme Kaynak Yöneticisi'ni kullanan düğüm bir kaynağın ne kadarının.</span><span class="sxs-lookup"><span data-stu-id="8eb53-446">Capacity is another *constraint* that hello Cluster Resource Manager uses toounderstand how much of a resource a node has.</span></span> <span data-ttu-id="8eb53-447">Kapasite kalan da hello küme için bir bütün olarak izlenir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-447">Remaining capacity is also tracked for hello cluster as a whole.</span></span> <span data-ttu-id="8eb53-448">Merhaba kapasite ve hello tüketim hello hizmeti düzeyinde ölçümleri cinsinden ifade edilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-448">Both hello capacity and hello consumption at hello service level are expressed in terms of metrics.</span></span> <span data-ttu-id="8eb53-449">Bu nedenle örneğin hello ölçüm "ClientConnections" olabilir ve belirli bir düğümün 32768 "ClientConnections" için bir kapasiteye sahip.</span><span class="sxs-lookup"><span data-stu-id="8eb53-449">So for example, hello metric might be "ClientConnections" and a given Node may have a capacity for "ClientConnections" of 32768.</span></span> <span data-ttu-id="8eb53-450">Diğer düğümlere o düğümü üzerinde çalıştıran bazı hizmet deyin, şu anda "ClientConnections" Merhaba ölçüsünün 32256 kullanan diğer sınırlamaları olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-450">Other nodes can have other limits Some service running on that node can say it is currently consuming 32256 of hello metric "ClientConnections".</span></span>

<span data-ttu-id="8eb53-451">Çalışma zamanı sırasında Kalan kapasite hello kümedeki ve düğümlere hello küme Resource Manager izler.</span><span class="sxs-lookup"><span data-stu-id="8eb53-451">During runtime, hello Cluster Resource Manager tracks remaining capacity in hello cluster and on nodes.</span></span> <span data-ttu-id="8eb53-452">Sipariş tootrack kapasite hello Küme Kaynağı Yöneticisi her hizmetin kullanımı hello hizmetinin çalıştığı düğümün kapasiteden çıkarır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-452">In order tootrack capacity hello Cluster Resource Manager subtracts each service's usage from node's capacity where hello service runs.</span></span> <span data-ttu-id="8eb53-453">Bu bilgiyle nereye hello Service Fabric kümesi Kaynak Yöneticisi şekil tooplace veya düğüm kapasitesi geçmez, böylece çoğaltmaları taşıyın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-453">With this information, hello Service Fabric Cluster Resource Manager can figure out where tooplace or move replicas so that nodes don’t go over capacity.</span></span>

<span data-ttu-id="8eb53-454"><center>
![Küme düğümlerini ve kapasite][Image7]
</center></span><span class="sxs-lookup"><span data-stu-id="8eb53-454"><center>
![Cluster nodes and capacity][Image7]
</center></span></span>

<span data-ttu-id="8eb53-455">C# ' TA:</span><span class="sxs-lookup"><span data-stu-id="8eb53-455">C#:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
ServiceLoadMetricDescription metric = new ServiceLoadMetricDescription();
metric.Name = "ClientConnections";
metric.PrimaryDefaultLoad = 1024;
metric.SecondaryDefaultLoad = 0;
metric.Weight = ServiceLoadMetricWeight.High;
serviceDescription.Metrics.Add(metric);
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="8eb53-456">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8eb53-456">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ClientConnections,High,1024,0)
```

<span data-ttu-id="8eb53-457">Merhaba küme bildiriminde tanımlanan kapasiteleri görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="8eb53-457">You can see capacities defined in hello cluster manifest:</span></span>

<span data-ttu-id="8eb53-458">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="8eb53-458">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType03">
      <Capacities>
        <Capacity Name="ClientConnections" Value="65536"/>
      </Capacities>
    </NodeType>
```

<span data-ttu-id="8eb53-459">tek başına dağıtımlarında ClusterConfig.json ya da Azure için Template.json aracılığıyla kümeleri barındırılan.</span><span class="sxs-lookup"><span data-stu-id="8eb53-459">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

```json
"nodeTypes": [
    {
        "name": "NodeType03",
        "capacities": {
            "ClientConnections": "65536",
        }
    }
],
```

<span data-ttu-id="8eb53-460">Yaygın olarak bir hizmetin değişiklikleri dinamik olarak yükleyin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-460">Commonly a service’s load changes dynamically.</span></span> <span data-ttu-id="8eb53-461">"ClientConnections" yineleme yükünü 1024 too2048 ancak çalışan ardından yalnızca o ölçüm için kalan 512 kapasitesi olduğu hello düğümü değiştiğini söyleyin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-461">Say that a replica's load of "ClientConnections" changed from 1024 too2048, but hello node it was running on then only had 512 capacity remaining for that metric.</span></span> <span data-ttu-id="8eb53-462">Bu düğüm üzerinde yeterli alan olmadığından şimdi bu çoğaltma veya örneğinin yerleştirme, geçersiz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-462">Now that replica or instance's placement is invalid, since there's not enough room on that node.</span></span> <span data-ttu-id="8eb53-463">Merhaba küme Resource Manager tookick sahiptir ve hello düğüm kapasitesi aşağıda geri alın.</span><span class="sxs-lookup"><span data-stu-id="8eb53-463">hello Cluster Resource Manager has tookick in and get hello node back below capacity.</span></span> <span data-ttu-id="8eb53-464">Bu düğüm tooother düğümlerden biri veya daha fazla hello çoğaltmaları veya örnekleri taşıyarak kapasitesi ise hello düğümü üzerindeki yükü azaltır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-464">It reduces load on hello node that is over capacity by moving one or more of hello replicas or instances from that node tooother nodes.</span></span> <span data-ttu-id="8eb53-465">Çoğaltmaları taşırken hello küme kaynak yöneticisi bu hareketleri toominimize hello maliyetini çalışır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-465">When moving replicas, hello Cluster Resource Manager tries toominimize hello cost of those movements.</span></span> <span data-ttu-id="8eb53-466">Taşıma maliyeti ele alınmıştır [bu makalede](service-fabric-cluster-resource-manager-movement-cost.md) daha hakkında hello küme Resource Manager stratejileri dengelenmesi ve kurallar açıklanmaktadır [burada](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="8eb53-466">Movement cost is discussed in [this article](service-fabric-cluster-resource-manager-movement-cost.md) and more about hello Cluster Resource Manager's rebalancing strategies and rules is described [here](service-fabric-cluster-resource-manager-metrics.md).</span></span>

## <a name="cluster-capacity"></a><span data-ttu-id="8eb53-467">Küme kapasite</span><span class="sxs-lookup"><span data-stu-id="8eb53-467">Cluster capacity</span></span>
<span data-ttu-id="8eb53-468">Nasıl hello Service Fabric kümesi Kaynak Yöneticisi Koru hello genel çok tam olmasını küme?</span><span class="sxs-lookup"><span data-stu-id="8eb53-468">So how does hello Service Fabric Cluster Resource Manager keep hello overall cluster from being too full?</span></span> <span data-ttu-id="8eb53-469">İyi yok çok dinamik yük ile bunu yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-469">Well, with dynamic load there’s not a lot it can do.</span></span> <span data-ttu-id="8eb53-470">Hizmetleri hello küme kaynak yöneticisi tarafından gerçekleştirilen eylemler bağımsız olarak kendi yük depo olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-470">Services can have their load spike independently of actions taken by hello Cluster Resource Manager.</span></span> <span data-ttu-id="8eb53-471">Sonuç olarak, yarın ünlü olduğunda kümenizle yeterli boş alan bugün underpowered olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-471">As a result, your cluster with plenty of headroom today may be underpowered when you become famous tomorrow.</span></span> <span data-ttu-id="8eb53-472">Bu, tooprevent sorunlarını baked bazı denetimler vardır belirtti.</span><span class="sxs-lookup"><span data-stu-id="8eb53-472">That said, there are some controls that are baked in tooprevent problems.</span></span> <span data-ttu-id="8eb53-473">yapabiliriz hello ilk hello küme toobecome tam neden olacağından yeni iş yüklerine hello oluşturulmasını engellemek şeydir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-473">hello first thing we can do is prevent hello creation of new workloads that would cause hello cluster toobecome full.</span></span>

<span data-ttu-id="8eb53-474">Durum bilgisi olmayan bir hizmet oluşturmak ve onunla ilişkili bazı yük sahip söyleyin.</span><span class="sxs-lookup"><span data-stu-id="8eb53-474">Say that you create a stateless service and it has some load associated with it.</span></span> <span data-ttu-id="8eb53-475">Merhaba hizmet hello "DiskSpaceInMb" ölçüm hakkında cares varsayalım.</span><span class="sxs-lookup"><span data-stu-id="8eb53-475">Let’s say that hello service cares about hello "DiskSpaceInMb" metric.</span></span> <span data-ttu-id="8eb53-476">Ayrıca, devam eden tooconsume beş birimleri hello hizmetinin her örneği için "DiskSpaceInMb" olduğunu düşünelim.</span><span class="sxs-lookup"><span data-stu-id="8eb53-476">Let's also say that it is going tooconsume five units of "DiskSpaceInMb" for every instance of hello service.</span></span> <span data-ttu-id="8eb53-477">Toocreate üç hello hizmet örneklerini istiyor.</span><span class="sxs-lookup"><span data-stu-id="8eb53-477">You want toocreate three instances of hello service.</span></span> <span data-ttu-id="8eb53-478">Harika!</span><span class="sxs-lookup"><span data-stu-id="8eb53-478">Great!</span></span> <span data-ttu-id="8eb53-479">Böylece "DiskSpaceInMb" toobe 15 birimleri ihtiyacımız anlamına gelir hello küme bize sırayla tooeven sunmak mümkün toocreate bu hizmet örneği olabilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-479">So that means that we need 15 units of "DiskSpaceInMb" toobe present in hello cluster in order for us tooeven be able toocreate these service instances.</span></span> <span data-ttu-id="8eb53-480">Merhaba küme Resource Manager sürekli hello kapasitesi ve her ölçümü tüketimini hesaplar hello kümede hello kalan kapasite belirleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-480">hello Cluster Resource Manager continually calculates hello capacity and consumption of each metric so it can determine hello remaining capacity in hello cluster.</span></span> <span data-ttu-id="8eb53-481">Yeterli alan yoksa hello küme Resource Manager reddeder hello hizmeti çağrısı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8eb53-481">If there isn't enough space, hello Cluster Resource Manager rejects hello create service call.</span></span>

<span data-ttu-id="8eb53-482">Merhaba gereksinim yalnızca 15 birimler kullanılabilir olmadığından, bu alanı birçok farklı yolu ayrılamadı.</span><span class="sxs-lookup"><span data-stu-id="8eb53-482">Since hello requirement is only that there be 15 units available, this space could be allocated many different ways.</span></span> <span data-ttu-id="8eb53-483">Örneğin, olabilir bir kalan birim kapasitesi 15 farklı düğümlerde ya da üç kalan birim kapasitesi beş farklı düğümlerde.</span><span class="sxs-lookup"><span data-stu-id="8eb53-483">For example, there could be one remaining unit of capacity on 15 different nodes, or three remaining units of capacity on five different nodes.</span></span> <span data-ttu-id="8eb53-484">Bu yüzden beş birimler kullanılabilir üç düğümlerinde hello küme Resource Manager şeyler düzenleyebilirsiniz hello hizmeti yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-484">If hello Cluster Resource Manager can rearrange things so there's five units available on three nodes, it places hello service.</span></span> <span data-ttu-id="8eb53-485">Düzenler hello küme genellikle hello küme dolmak veya hello varolan Hizmetleri herhangi bir nedenden dolayı birleştirilmiş olamaz sürece mümkündür.</span><span class="sxs-lookup"><span data-stu-id="8eb53-485">Rearranging hello cluster is usually possible unless hello cluster is almost full or hello existing services can't be consolidated for some reason.</span></span>

## <a name="buffered-capacity"></a><span data-ttu-id="8eb53-486">Arabelleğe alınan kapasite</span><span class="sxs-lookup"><span data-stu-id="8eb53-486">Buffered Capacity</span></span>
<span data-ttu-id="8eb53-487">Arabelleğe alınan kapasite hello Küme Kaynak Yöneticisi'ni başka bir özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-487">Buffered capacity is another feature of hello Cluster Resource Manager.</span></span> <span data-ttu-id="8eb53-488">Merhaba kısmı ayırma sağlar genel düğüm kapasitesi.</span><span class="sxs-lookup"><span data-stu-id="8eb53-488">It allows reservation of some portion of hello overall node capacity.</span></span> <span data-ttu-id="8eb53-489">Bu kapasite arabellek yalnızca kullanılan tooplace yükseltmeleri ve düğüm hataları sırasında hizmetleridir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-489">This capacity buffer is only used tooplace services during upgrades and node failures.</span></span> <span data-ttu-id="8eb53-490">Arabelleğe alınan kapasite ölçüm tüm düğümler için başına genel olarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-490">Buffered Capacity is specified globally per metric for all nodes.</span></span> <span data-ttu-id="8eb53-491">ayrılmış hello kapasiteyi çekme hello değeri hello sayıda hata ve yükseltme hello kümedeki sahip etki alanları bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-491">hello value you pick for hello reserved capacity is a function of hello number of Fault and Upgrade Domains you have in hello cluster.</span></span> <span data-ttu-id="8eb53-492">Daha fazla hata ve yükseltme etki alanları anlamına gelir için arabelleğe alınan kapasite daha düşük bir sayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-492">More Fault and Upgrade Domains means that you can pick a lower number for your buffered capacity.</span></span> <span data-ttu-id="8eb53-493">Daha fazla etki alanı varsa, küme toobe daha küçük miktarda kullanılabilir yükseltmeleri ve hataları sırasında bekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8eb53-493">If you have more domains, you can expect smaller amounts of your cluster toobe unavailable during upgrades and failures.</span></span> <span data-ttu-id="8eb53-494">Belirtilen hello düğüm kapasitesi bir ölçüm için ayrıca varsa arabelleğe alınan kapasite belirtme yalnızca anlamlıdır.</span><span class="sxs-lookup"><span data-stu-id="8eb53-494">Specifying Buffered Capacity only makes sense if you have also specified hello node capacity for a metric.</span></span>

<span data-ttu-id="8eb53-495">Aşağıda, nasıl toospecify kapasite arabelleğe ilişkin bir örnek verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="8eb53-495">Here's an example of how toospecify buffered capacity:</span></span>

<span data-ttu-id="8eb53-496">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="8eb53-496">ClusterManifest.xml</span></span>

```xml
        <Section Name="NodeBufferPercentage">
            <Parameter Name="SomeMetric" Value="0.15" />
            <Parameter Name="SomeOtherMetric" Value="0.20" />
        </Section>
```

<span data-ttu-id="8eb53-497">tek başına dağıtımlarında ClusterConfig.json ya da Azure için Template.json aracılığıyla kümeleri barındırılan:</span><span class="sxs-lookup"><span data-stu-id="8eb53-497">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "NodeBufferPercentage",
    "parameters": [
      {
          "name": "SomeMetric",
          "value": "0.15"
      },
      {
          "name": "SomeOtherMetric",
          "value": "0.20"
      }
    ]
  }
]
```

<span data-ttu-id="8eb53-498">Merhaba küme bir ölçüm için arabelleğe alınan kapasite dışında olduğunda yeni hizmetleri hello oluşturma başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="8eb53-498">hello creation of new services fails when hello cluster is out of buffered capacity for a metric.</span></span> <span data-ttu-id="8eb53-499">Yeni hizmetler toopreserve hello arabellek Hello oluşturulmasını önleme yükseltmeleri ve hataları düğümleri toogo kapasite aşımı neden yok sağlar.</span><span class="sxs-lookup"><span data-stu-id="8eb53-499">Preventing hello creation of new services toopreserve hello buffer ensures that upgrades and failures don’t cause nodes toogo over capacity.</span></span> <span data-ttu-id="8eb53-500">Arabelleğe alınan kapasite isteğe bağlıdır, ancak bir ölçüm için bir kapasite tanımlayan herhangi bir küme önerilir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-500">Buffered capacity is optional but is recommended in any cluster that defines a capacity for a metric.</span></span>

<span data-ttu-id="8eb53-501">Merhaba küme kaynak yöneticisi bu yük bilgilerini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8eb53-501">hello Cluster Resource Manager exposes this load information.</span></span> <span data-ttu-id="8eb53-502">Her ölçüm için bu bilgileri içerir:</span><span class="sxs-lookup"><span data-stu-id="8eb53-502">For each metric, this information includes:</span></span> 
  - <span data-ttu-id="8eb53-503">Merhaba kapasite ayarlarını arabelleğe alındı.</span><span class="sxs-lookup"><span data-stu-id="8eb53-503">hello buffered capacity settings</span></span>
  - <span data-ttu-id="8eb53-504">Merhaba toplam kapasite</span><span class="sxs-lookup"><span data-stu-id="8eb53-504">hello total capacity</span></span>
  - <span data-ttu-id="8eb53-505">Merhaba geçerli tüketim</span><span class="sxs-lookup"><span data-stu-id="8eb53-505">hello current consumption</span></span>
  - <span data-ttu-id="8eb53-506">Dengeli veya her ölçümü olup olmadığı kabul edilir</span><span class="sxs-lookup"><span data-stu-id="8eb53-506">whether each metric is considered balanced or not</span></span>
  - <span data-ttu-id="8eb53-507">Merhaba standart sapma hakkındaki istatistiklerdir</span><span class="sxs-lookup"><span data-stu-id="8eb53-507">statistics about hello standard deviation</span></span>
  - <span data-ttu-id="8eb53-508">en fazla ve en az yük hello olan hello düğümler</span><span class="sxs-lookup"><span data-stu-id="8eb53-508">hello nodes which have hello most and least load</span></span>  
  
<span data-ttu-id="8eb53-509">Aşağıdaki örnek, çıktı olarak bakın:</span><span class="sxs-lookup"><span data-stu-id="8eb53-509">Below we see an example of that output:</span></span>

```posh
PS C:\Users\user> Get-ServiceFabricClusterLoadInformation
LastBalancingStartTimeUtc : 9/1/2016 12:54:59 AM
LastBalancingEndTimeUtc   : 9/1/2016 12:54:59 AM
LoadMetricInformation     :
                            LoadMetricName        : Metric1
                            IsBalancedBefore      : False
                            IsBalancedAfter       : False
                            DeviationBefore       : 0.192450089729875
                            DeviationAfter        : 0.192450089729875
                            BalancingThreshold    : 1
                            Action                : NoActionNeeded
                            ActivityThreshold     : 0
                            ClusterCapacity       : 189
                            ClusterLoad           : 45
                            ClusterRemainingCapacity : 144
                            NodeBufferPercentage  : 10
                            ClusterBufferedCapacity : 170
                            ClusterRemainingBufferedCapacity : 125
                            ClusterCapacityViolation : False
                            MinNodeLoadValue      : 0
                            MinNodeLoadNodeId     : 3ea71e8e01f4b0999b121abcbf27d74d
                            MaxNodeLoadValue      : 15
                            MaxNodeLoadNodeId     : 2cc648b6770be1bc9824fa995d5b68b1
```

## <a name="next-steps"></a><span data-ttu-id="8eb53-510">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="8eb53-510">Next steps</span></span>
* <span data-ttu-id="8eb53-511">Merhaba mimarisi ve bilgi akışını hello küme Resource Manager içinde hakkında daha fazla bilgi için kullanıma [bu makalede](service-fabric-cluster-resource-manager-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="8eb53-511">For information on hello architecture and information flow within hello Cluster Resource Manager, check out [this article ](service-fabric-cluster-resource-manager-architecture.md)</span></span>
* <span data-ttu-id="8eb53-512">Birleştirme ölçümleri tanımlama tek yönlü tooconsolidate yayılmak yerine düğümlerde yüktür. toolearn nasıl tooconfigure birleştirme, çok bakın[bu makalede](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="8eb53-512">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
* <span data-ttu-id="8eb53-513">Merhaba baştan başlatın ve [giriş toohello Service Fabric kümesi Kaynak Yöneticisi Al](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="8eb53-513">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
* <span data-ttu-id="8eb53-514">toofind hello Küme Kaynak Yöneticisi yönetir ve dengeleyen hello kümedeki yük hakkında hello makalesine üzerinde kullanıma [Yük Dengeleme](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="8eb53-514">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-domains.png
[Image2]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-uneven-fault-domain-layout.png
[Image3]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domains-with-placement.png
[Image4]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domain-layout-strategies.png
[Image5]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-layout-different-workloads.png
[Image6]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-placement-constraints-node-properties.png
[Image7]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-nodes-and-capacity.png
