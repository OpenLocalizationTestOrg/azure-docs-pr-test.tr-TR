---
title: "Güvenilir hizmetler aaaAdvanced kullanımını | Microsoft Docs"
description: "Service Fabric'ın Reliable Services hizmetlerinizi eklenen esneklik için Gelişmiş kullanımı hakkında bilgi edinin."
services: Service-Fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: masnider
ms.assetid: f2942871-863d-47c3-b14a-7cdad9a742c7
ms.service: Service-Fabric
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: e6d6310a4deae9edcfcd76551e1337f0e39e9e5d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="advanced-usage-of-hello-reliable-services-programming-model"></a><span data-ttu-id="a1794-103">Merhaba güvenilir programlama modeli hizmetler kullanımını Gelişmiş</span><span class="sxs-lookup"><span data-stu-id="a1794-103">Advanced usage of hello Reliable Services programming model</span></span>
<span data-ttu-id="a1794-104">Azure Service Fabric, yazma ve durum bilgisiz ve durum bilgisi olan güvenilir hizmetler yönetme basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="a1794-104">Azure Service Fabric simplifies writing and managing reliable stateless and stateful services.</span></span> <span data-ttu-id="a1794-105">Bu kılavuz, hizmetlerinizi Reliable Services toogain Gelişmiş kullanımlar hakkında daha fazla denetim ve esneklik alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="a1794-105">This guide talks about advanced usages of Reliable Services toogain more control and flexibility over your services.</span></span> <span data-ttu-id="a1794-106">Önceki tooreading bu kılavuz, ile öğrenmeniz [hello Reliable Services programlama modeli](service-fabric-reliable-services-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="a1794-106">Prior tooreading this guide, familiarize yourself with [hello Reliable Services programming model](service-fabric-reliable-services-introduction.md).</span></span>

<span data-ttu-id="a1794-107">Durum bilgisi olan ve durum bilgisi olmayan hizmetler için kullanıcı kodu iki birincil giriş noktası vardır:</span><span class="sxs-lookup"><span data-stu-id="a1794-107">Both stateful and stateless services have two primary entry points for user code:</span></span>

* <span data-ttu-id="a1794-108">`RunAsync(C#) / runAsync(Java)`Hizmet kodunuz için genel amaçlı giriş noktası niteliğindedir.</span><span class="sxs-lookup"><span data-stu-id="a1794-108">`RunAsync(C#) / runAsync(Java)` is a general-purpose entry point for your service code.</span></span>
* <span data-ttu-id="a1794-109">`CreateServiceReplicaListeners(C#)`ve `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` istemci istekleri için iletişim dinleyicileri açmak içindir.</span><span class="sxs-lookup"><span data-stu-id="a1794-109">`CreateServiceReplicaListeners(C#)` and `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` is for opening communication listeners for client requests.</span></span>

<span data-ttu-id="a1794-110">Çoğu hizmetler için bu iki giriş noktaları yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="a1794-110">For most services, these two entry points are sufficient.</span></span> <span data-ttu-id="a1794-111">Nadir durumlarda bir hizmetin yaşam döngüsü hakkında daha fazla denetime gerektiğinde ek yaşam döngüsü olayları kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-111">In rare cases when more control over a service's lifecycle is required, additional lifecycle events are available.</span></span>

## <a name="stateless-service-instance-lifecycle"></a><span data-ttu-id="a1794-112">Durum bilgisiz hizmet örneği yaşam döngüsü</span><span class="sxs-lookup"><span data-stu-id="a1794-112">Stateless service instance lifecycle</span></span>
<span data-ttu-id="a1794-113">Bir durum bilgisi olmayan hizmetin yaşam döngüsü, çok basit bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="a1794-113">A stateless service's lifecycle is very simple.</span></span> <span data-ttu-id="a1794-114">Durum bilgisiz hizmeti yalnızca açık, kapalı, durduruldu veya kaldırılabilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-114">A stateless service can only be opened, closed, or aborted.</span></span> <span data-ttu-id="a1794-115">`RunAsync`bir hizmet örneği açılır ve bir hizmet örneği durduruldu veya kapatıldığında iptal durum bilgisi olmayan bir hizmet olarak yürütülür.</span><span class="sxs-lookup"><span data-stu-id="a1794-115">`RunAsync` in a stateless service is executed when a service instance is opened, and canceled when a service instance is closed or aborted.</span></span>

<span data-ttu-id="a1794-116">Ancak `RunAsync` neredeyse tüm durumlarda, hello açık kapatın ve durum bilgisiz hizmet durdurma olayları kullanılabilir ayrıca içinde yeterli olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="a1794-116">Although `RunAsync` should be sufficient in almost all cases, hello open, close, and abort events in a stateless service are also available:</span></span>

* <span data-ttu-id="a1794-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java`Merhaba durum bilgisiz hizmet örneği hakkında kullanılan toobe olduğunda OnOpenAsync adı verilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java` OnOpenAsync is called when hello stateless service instance is about toobe used.</span></span> <span data-ttu-id="a1794-118">Genişletilmiş hizmeti başlatma görevleri şu anda başlatılabilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-118">Extended service initialization tasks can be started at this time.</span></span>
* <span data-ttu-id="a1794-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java`Merhaba durum bilgisiz hizmet örneği toobe geçerken OnCloseAsync adlı düzgün biçimde kapatma.</span><span class="sxs-lookup"><span data-stu-id="a1794-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java` OnCloseAsync is called when hello stateless service instance is going toobe gracefully shut down.</span></span> <span data-ttu-id="a1794-120">Bu hello hizmetin kod yükseltilmesi, tooload Dengeleme nedeniyle hello hizmet örneği taşındığı ya da geçici bir hata algılandığında ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-120">This can occur when hello service's code is being upgraded, hello service instance is being moved due tooload balancing, or a transient fault is detected.</span></span> <span data-ttu-id="a1794-121">OnCloseAsync Kapat kullanılan toosafely herhangi bir kaynağa olması, herhangi bir arka plan işlem durdurmak, dış durumu kaydetmeyi bitirmek veya var olan bağlantıları kapatın.</span><span class="sxs-lookup"><span data-stu-id="a1794-121">OnCloseAsync can be used toosafely close any resources, stop any background processing, finish saving external state, or close down existing connections.</span></span>
* <span data-ttu-id="a1794-122">`void OnAbort() - C# / void onAbort() - Java`Merhaba durum bilgisiz hizmet örneği zorla kapatılıyor OnAbort denir.</span><span class="sxs-lookup"><span data-stu-id="a1794-122">`void OnAbort() - C# / void onAbort() - Java` OnAbort is called when hello stateless service instance is being forcefully shut down.</span></span> <span data-ttu-id="a1794-123">Bu genellikle hello düğümde kalıcı bir hata algılandığında veya Service Fabric güvenilir bir şekilde hello hizmet örneğinin yaşam döngüsü toointernal hataları nedeniyle yönetemediğinde olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="a1794-123">This is generally called when a permanent fault is detected on hello node, or when Service Fabric cannot reliably manage hello service instance's lifecycle due toointernal failures.</span></span>

## <a name="stateful-service-replica-lifecycle"></a><span data-ttu-id="a1794-124">Durum bilgisi olan hizmet çoğaltma yaşam döngüsü</span><span class="sxs-lookup"><span data-stu-id="a1794-124">Stateful service replica lifecycle</span></span>

> [!NOTE]
> <span data-ttu-id="a1794-125">Durum bilgisi olan güvenilir hizmetler Java'da henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="a1794-125">Stateful reliable services are not supported in Java yet.</span></span>
>
>

<span data-ttu-id="a1794-126">Bir durum bilgisi olan hizmet yinelemenin yaşam döngüsü, bir durum bilgisiz hizmet örneği çok daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="a1794-126">A stateful service replica's lifecycle is much more complex than a stateless service instance.</span></span> <span data-ttu-id="a1794-127">Ayrıca tooopen, kapatın ve olayları abort, bir durum bilgisi olan hizmet çoğaltma rolü değişiklikleri yaşam süresi boyunca uğradığında.</span><span class="sxs-lookup"><span data-stu-id="a1794-127">In addition tooopen, close, and abort events, a stateful service replica undergoes role changes during its lifetime.</span></span> <span data-ttu-id="a1794-128">Bir durum bilgisi olan hizmet çoğaltma rolü değiştiğinde hello `OnChangeRoleAsync` olay tetiklenir:</span><span class="sxs-lookup"><span data-stu-id="a1794-128">When a stateful service replica changes role, hello `OnChangeRoleAsync` event is triggered:</span></span>

* <span data-ttu-id="a1794-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)`Merhaba durum bilgisi olan hizmet çoğaltma rolü, örneğin tooprimary veya ikincil değiştirirken OnChangeRoleAsync adı verilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)` OnChangeRoleAsync is called when hello stateful service replica is changing role, for example tooprimary or secondary.</span></span> <span data-ttu-id="a1794-130">Birincil çoğaltmalara yazma durumu verilmiştir (toocreate izin verilir ve tooReliable koleksiyonları yazma).</span><span class="sxs-lookup"><span data-stu-id="a1794-130">Primary replicas are given write status (are allowed toocreate and write tooReliable Collections).</span></span> <span data-ttu-id="a1794-131">İkincil çoğaltmaları (yalnızca var olan güvenilir koleksiyonlarından okuyabilir) okuma durumu atanır.</span><span class="sxs-lookup"><span data-stu-id="a1794-131">Secondary replicas are given read status (can only read from existing Reliable Collections).</span></span> <span data-ttu-id="a1794-132">Durum bilgisi olan hizmet çoğu iş hello birincil kopyada gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-132">Most work in a stateful service is performed at hello primary replica.</span></span> <span data-ttu-id="a1794-133">İkincil çoğaltmaların salt okunur doğrulama, rapor oluşturma, veri araştırma veya diğer salt okunur işleri gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a1794-133">Secondary replicas can perform read-only validation, report generation, data mining, or other read-only jobs.</span></span>

<span data-ttu-id="a1794-134">Durum bilgisi olan bir hizmette yalnızca hello birincil çoğaltma yazma erişimi toostate vardır ve bu nedenle hello hizmet asıl işi gerçekleştirirken genellikle olur.</span><span class="sxs-lookup"><span data-stu-id="a1794-134">In a stateful service, only hello primary replica has write access toostate and thus is generally when hello service is performing actual work.</span></span> <span data-ttu-id="a1794-135">Merhaba `RunAsync` durum bilgisi olan hizmet yönteminde yalnızca hello durum bilgisi olan hizmet çoğaltma birincil olduğunda gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-135">hello `RunAsync` method in a stateful service is executed only when hello stateful service replica is primary.</span></span> <span data-ttu-id="a1794-136">Merhaba `RunAsync` birincil kopyanın rol değişiklikleri birincil çıktığınızda yanı sıra hello sırasında kapatıp olayları abort yöntemi iptal edilir.</span><span class="sxs-lookup"><span data-stu-id="a1794-136">hello `RunAsync` method is canceled when a primary replica's role changes away from primary, as well as during hello close and abort events.</span></span>

<span data-ttu-id="a1794-137">Hello kullanarak `OnChangeRoleAsync` olay tooperform iş çoğaltma rolü de olduğu gibi yanıt toorole değişiklik bağlı olarak verir.</span><span class="sxs-lookup"><span data-stu-id="a1794-137">Using hello `OnChangeRoleAsync` event allows you tooperform work depending on replica role as well as in response toorole change.</span></span>

<span data-ttu-id="a1794-138">Durum bilgisi olan hizmet ayrıca hello aynı dört yaşam döngüsü olayları durumsuz bir hizmet olarak sağlar hello aynı semantiği ve kullanım örnekleri:</span><span class="sxs-lookup"><span data-stu-id="a1794-138">A stateful service also provides hello same four lifecycle events as a stateless service, with hello same semantics and use cases:</span></span>

```csharp
* Task OnOpenAsync(IStatefulServicePartition, CancellationToken)
* Task OnCloseAsync(CancellationToken)
* void OnAbort()
```

## <a name="next-steps"></a><span data-ttu-id="a1794-139">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="a1794-139">Next steps</span></span>
<span data-ttu-id="a1794-140">Daha gelişmiş konular ilgili tooService için doku, makaleler hello bakın:</span><span class="sxs-lookup"><span data-stu-id="a1794-140">For more advanced topics related tooService Fabric, see hello following articles:</span></span>

* [<span data-ttu-id="a1794-141">Durum bilgisi olan güvenilir hizmetler yapılandırma</span><span class="sxs-lookup"><span data-stu-id="a1794-141">Configuring stateful Reliable Services</span></span>](service-fabric-reliable-services-configuration.md)
* [<span data-ttu-id="a1794-142">Service Fabric sistem durumu giriş</span><span class="sxs-lookup"><span data-stu-id="a1794-142">Service Fabric health introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="a1794-143">Sorun giderme için sistem durumu raporlarını kullanma</span><span class="sxs-lookup"><span data-stu-id="a1794-143">Using system health reports for troubleshooting</span></span>](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)
* [<span data-ttu-id="a1794-144">Yapılandırma Hizmetleri hello Service Fabric kümesi Resource Manager ile</span><span class="sxs-lookup"><span data-stu-id="a1794-144">Configuring Services with hello Service Fabric Cluster Resource Manager</span></span>](service-fabric-cluster-resource-manager-configure-services.md)
