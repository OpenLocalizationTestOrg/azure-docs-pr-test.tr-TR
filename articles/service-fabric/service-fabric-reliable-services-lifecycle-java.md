---
title: "Azure Service Fabric güvenilir hizmetlerini hello yaşam döngüsünün aaaOverview | Microsoft Docs"
description: "Service Fabric güvenilir hizmetler hello farklı yaşam döngüsü olayları hakkında bilgi edinin"
services: Service-Fabric
documentationcenter: java
author: PavanKunapareddyMSFT
manager: timlt
ms.assetid: 
ms.service: Service-Fabric
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/30/2017
ms.author: pakunapa;
ms.openlocfilehash: 6d48c217d12bc5248c2da57b544aac747cecd872
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="reliable-services-lifecycle-overview"></a><span data-ttu-id="931e4-103">Güvenilir hizmetler yaşam döngüsüne genel bakış</span><span class="sxs-lookup"><span data-stu-id="931e4-103">Reliable services lifecycle overview</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="931e4-104">Windows üzerinde C#</span><span class="sxs-lookup"><span data-stu-id="931e4-104">C# on Windows</span></span>](service-fabric-reliable-services-lifecycle.md)
> * [<span data-ttu-id="931e4-105">Linux üzerinde Java</span><span class="sxs-lookup"><span data-stu-id="931e4-105">Java on Linux</span></span>](service-fabric-reliable-services-lifecycle-java.md)
>
>

<span data-ttu-id="931e4-106">Güvenilir hizmetler Hello yaşam döngüleri hakkında düşünürken, hello yaşam döngüsü hello temelleri hello en önemli olan.</span><span class="sxs-lookup"><span data-stu-id="931e4-106">When thinking about hello lifecycles of Reliable Services, hello basics of hello lifecycle are hello most important.</span></span> <span data-ttu-id="931e4-107">Genel olarak:</span><span class="sxs-lookup"><span data-stu-id="931e4-107">In general:</span></span>

* <span data-ttu-id="931e4-108">Başlatma sırasında</span><span class="sxs-lookup"><span data-stu-id="931e4-108">During Startup</span></span>
  * <span data-ttu-id="931e4-109">Hizmetleri oluşturulur</span><span class="sxs-lookup"><span data-stu-id="931e4-109">Services are constructed</span></span>
  * <span data-ttu-id="931e4-110">Bir fırsat tooconstruct olması ve sıfır veya daha fazla dinleyicileri Döndür</span><span class="sxs-lookup"><span data-stu-id="931e4-110">They have an opportunity tooconstruct and return zero or more listeners</span></span>
  * <span data-ttu-id="931e4-111">Merhaba hizmeti ile iletişimi sağlayan tüm döndürülen dinleyiciler açıldı</span><span class="sxs-lookup"><span data-stu-id="931e4-111">Any returned listeners are opened, allowing communication with hello service</span></span>
  * <span data-ttu-id="931e4-112">Merhaba hizmetin runAsync yöntemi çağrılır, hizmet toodo uzun süredir çalışıp hello erişime izin verme veya iş arka plan</span><span class="sxs-lookup"><span data-stu-id="931e4-112">hello Service's runAsync method is called, allowing hello service toodo long running or background work</span></span>
* <span data-ttu-id="931e4-113">Kapatma sırasında</span><span class="sxs-lookup"><span data-stu-id="931e4-113">During shutdown</span></span>
  * <span data-ttu-id="931e4-114">Merhaba iptal belirteci geçirilen toorunAsync iptal edilir ve hello dinleyicileri kapalı</span><span class="sxs-lookup"><span data-stu-id="931e4-114">hello cancellation token passed toorunAsync is canceled, and hello listeners are closed</span></span>
  * <span data-ttu-id="931e4-115">Bu işlem tamamlandıktan sonra destructed hello hizmeti nesnesinin kendisi</span><span class="sxs-lookup"><span data-stu-id="931e4-115">Once that is complete, hello service object itself is destructed</span></span>

<span data-ttu-id="931e4-116">Bu olaylar sıralama tam hello ayrıntılarla vardır.</span><span class="sxs-lookup"><span data-stu-id="931e4-116">There are details around hello exact ordering of these events.</span></span> <span data-ttu-id="931e4-117">Özellikle, olayların hello sırası biraz hello güvenilir hizmet Stateless veya durum bilgisi olan olmasına bağlı olarak değişebilir.</span><span class="sxs-lookup"><span data-stu-id="931e4-117">In particular, hello order of events may change slightly depending on whether hello Reliable Service is Stateless or Stateful.</span></span> <span data-ttu-id="931e4-118">Ayrıca, durum bilgisi olan hizmetler için toodeal hello birincil takas senaryo ile sahibiz.</span><span class="sxs-lookup"><span data-stu-id="931e4-118">In addition, for stateful services, we have toodeal with hello Primary swap scenario.</span></span> <span data-ttu-id="931e4-119">Bu dizisi sırasında birincil hello rolü aktarılan tooanother çoğaltma (veya geri gelir) olmadan hello hizmet kapatılıyor.</span><span class="sxs-lookup"><span data-stu-id="931e4-119">During this sequence, hello role of Primary is transferred tooanother replica (or comes back) without hello service shutting down.</span></span> <span data-ttu-id="931e4-120">Son olarak, hata veya hata durumları hakkında toothink sahip.</span><span class="sxs-lookup"><span data-stu-id="931e4-120">Finally, we have toothink about error or failure conditions.</span></span>

## <a name="stateless-service-startup"></a><span data-ttu-id="931e4-121">Durum bilgisiz hizmetini başlatma</span><span class="sxs-lookup"><span data-stu-id="931e4-121">Stateless service startup</span></span>
<span data-ttu-id="931e4-122">bir durum bilgisi olmayan hizmetin Hello yaşam döngüsü oldukça basittir.</span><span class="sxs-lookup"><span data-stu-id="931e4-122">hello lifecycle of a stateless service is fairly straightforward.</span></span> <span data-ttu-id="931e4-123">Olayların hello sırası şöyledir:</span><span class="sxs-lookup"><span data-stu-id="931e4-123">Here's hello order of events:</span></span>

1. <span data-ttu-id="931e4-124">Merhaba hizmet oluşturulur</span><span class="sxs-lookup"><span data-stu-id="931e4-124">hello Service is constructed</span></span>
2. <span data-ttu-id="931e4-125">Ardından paralel iki şey olur:</span><span class="sxs-lookup"><span data-stu-id="931e4-125">Then, in parallel two things happen:</span></span>
    - <span data-ttu-id="931e4-126">`StatelessService.createServiceInstanceListeners()`çağrılan tüm döndürülen dinleyiciler açıldığı (`CommunicationListener.openAsync()` her dinleyici adı verilir)</span><span class="sxs-lookup"><span data-stu-id="931e4-126">`StatelessService.createServiceInstanceListeners()` is invoked and any returned listeners are Opened (`CommunicationListener.openAsync()` is called on each listener)</span></span>
    - <span data-ttu-id="931e4-127">hizmetin runAsync yöntemi hello (`StatelessService.runAsync()`) olarak adlandırılır</span><span class="sxs-lookup"><span data-stu-id="931e4-127">hello service's runAsync method (`StatelessService.runAsync()`) is called</span></span>
3. <span data-ttu-id="931e4-128">Varsa, hello hizmetin kendi onOpenAsync yöntemi çağrılır (özellikle, `StatelessService.onOpenAsync()` olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="931e4-128">If present, hello service's own onOpenAsync method is called (Specifically, `StatelessService.onOpenAsync()` is called.</span></span> <span data-ttu-id="931e4-129">Seyrek bir geçersiz kılma budur ancak kullanılabilir).</span><span class="sxs-lookup"><span data-stu-id="931e4-129">This is an uncommon override but it is available).</span></span>

<span data-ttu-id="931e4-130">Merhaba çağrıları toocreate ve açık hello dinleyicileri ve runAsync arasında sıralamaya olduğu önemli toonote olur.</span><span class="sxs-lookup"><span data-stu-id="931e4-130">It is important toonote that there is no ordering between hello calls toocreate and open hello listeners and runAsync.</span></span> <span data-ttu-id="931e4-131">runAsync başlatılmadan önce hello dinleyicileri açılabilir.</span><span class="sxs-lookup"><span data-stu-id="931e4-131">hello listeners may open before runAsync is started.</span></span> <span data-ttu-id="931e4-132">Benzer şekilde, runAsync hello iletişim dinleyicileri açık veya hatta oluşturulan önce çağrılan bitirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="931e4-132">Similarly, runAsync may end up invoked before hello communication listeners are open or have even been constructed.</span></span> <span data-ttu-id="931e4-133">Herhangi bir eşitleme gerekiyorsa, bir alıştırma toohello uygulayan kalır.</span><span class="sxs-lookup"><span data-stu-id="931e4-133">If any synchronization is required, it is left as an exercise toohello implementer.</span></span> <span data-ttu-id="931e4-134">Yaygın çözümleri:</span><span class="sxs-lookup"><span data-stu-id="931e4-134">Common solutions:</span></span>

* <span data-ttu-id="931e4-135">Bazen diğer bazı bilgiler oluşturulur veya çalışma kadar dinleyicileri çalışamaz.</span><span class="sxs-lookup"><span data-stu-id="931e4-135">Sometimes listeners can't function until some other information is created or work done.</span></span> <span data-ttu-id="931e4-136">İş genellikle hello hizmetin oluşturucuda hello sırasında yapılabilir durum bilgisi olmayan hizmetler için `createServiceInstanceListeners()` çağrısı, veya hello dinleyicisi kendisini hello yapımı bir parçası olarak.</span><span class="sxs-lookup"><span data-stu-id="931e4-136">For stateless services that work can usually be done in hello service's constructor, during hello `createServiceInstanceListeners()` call, or as a part of hello construction of hello listener itself.</span></span>
* <span data-ttu-id="931e4-137">Merhaba dinleyicileri açık kadar bazen hello runAsync kodda toostart istemiyor.</span><span class="sxs-lookup"><span data-stu-id="931e4-137">Sometimes hello code in runAsync does not want toostart until hello listeners are open.</span></span> <span data-ttu-id="931e4-138">Bu durumda ek koordinasyon gereklidir.</span><span class="sxs-lookup"><span data-stu-id="931e4-138">In this case additional coordination is necessary.</span></span> <span data-ttu-id="931e4-139">Bir ortak Yöneticiler, tooactual iş devam etmeden önce runAsync denetleneceği tamamladığınızda belirten hello dinleyicileri içinde bazı bayrağı çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="931e4-139">One common solution is some flag within hello listeners indicating when they have completed, which is checked in runAsync before continuing tooactual work.</span></span>

## <a name="stateless-service-shutdown"></a><span data-ttu-id="931e4-140">Durum bilgisiz hizmet kapanması</span><span class="sxs-lookup"><span data-stu-id="931e4-140">Stateless service shutdown</span></span>
<span data-ttu-id="931e4-141">Durum bilgisi olmayan bir hizmeti kapatılıyor, hello aynı düzeni, yalnızca geriye doğru izlenir:</span><span class="sxs-lookup"><span data-stu-id="931e4-141">When shutting down a stateless service, hello same pattern is followed, just in reverse:</span></span>

1. <span data-ttu-id="931e4-142">Paralel olarak</span><span class="sxs-lookup"><span data-stu-id="931e4-142">In parallel</span></span>
    - <span data-ttu-id="931e4-143">Tüm açık dinleyiciler kapalı (`CommunicationListener.closeAsync()` her dinleyici adı verilir)</span><span class="sxs-lookup"><span data-stu-id="931e4-143">Any open listeners are Closed (`CommunicationListener.closeAsync()` is called on each listener)</span></span>
    - <span data-ttu-id="931e4-144">Merhaba iptal belirteci geçirilen çok`runAsync()` iptal edildi (Merhaba iptal belirtecin denetimi `isCancelled` özelliği true döndürür ve hello belirtecin çağrıldıklarında `throwIfCancellationRequested` yöntemi atar bir `CancellationException`)</span><span class="sxs-lookup"><span data-stu-id="931e4-144">hello cancellation token passed too`runAsync()` is canceled (checking hello cancellation token's `isCancelled` property returns true, and if called hello token's `throwIfCancellationRequested` method throws a `CancellationException`)</span></span>
2. <span data-ttu-id="931e4-145">Bir kez `closeAsync()` her Dinleyicide tamamlandıktan ve `runAsync()` tamamlandıktan ayrıca hello hizmetin `StatelessService.onCloseAsync()` yöntemi çağrıldığında, varsa (yeniden seyrek bir geçersiz kılma budur).</span><span class="sxs-lookup"><span data-stu-id="931e4-145">Once `closeAsync()` completes on each listener and `runAsync()` also completes, hello service's `StatelessService.onCloseAsync()` method is called, if present (again this is an uncommon override).</span></span>
3. <span data-ttu-id="931e4-146">Sonra `StatelessService.onCloseAsync()` tamamlandıktan hello hizmet nesnesi destructed</span><span class="sxs-lookup"><span data-stu-id="931e4-146">After `StatelessService.onCloseAsync()` completes, hello service object is destructed</span></span>

## <a name="notes-on-service-lifecycle"></a><span data-ttu-id="931e4-147">Hizmet yaşam döngüsü ile ilgili notlar</span><span class="sxs-lookup"><span data-stu-id="931e4-147">Notes on service lifecycle</span></span>
* <span data-ttu-id="931e4-148">Her iki hello `runAsync()` yöntemi ve hello `createServiceInstanceListeners` çağrıları isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="931e4-148">Both hello `runAsync()` method and hello `createServiceInstanceListeners` calls are optional.</span></span> <span data-ttu-id="931e4-149">Bir hizmeti bunları, her ikisini birden veya hiçbiri olabilir.</span><span class="sxs-lookup"><span data-stu-id="931e4-149">A service may have one of them, both, or neither.</span></span> <span data-ttu-id="931e4-150">Örneğin, hello hizmet yanıt toouser çağrıları tüm işlerini varsa, gerek yoktur, için tooimplement `runAsync()`.</span><span class="sxs-lookup"><span data-stu-id="931e4-150">For example, if hello service does all its work in response toouser calls, there is no need for it tooimplement `runAsync()`.</span></span> <span data-ttu-id="931e4-151">Yalnızca hello iletişim dinleyicileri ve bunların ilişkili kodu gereklidir.</span><span class="sxs-lookup"><span data-stu-id="931e4-151">Only hello communication listeners and their associated code are necessary.</span></span> <span data-ttu-id="931e4-152">Benzer şekilde, oluşturma ve iletişim dinleyicileri döndürme hello hizmeti yalnızca toodo iş arka plan seçilmiş olabilir isteğe bağlıdır ve yalnızca tooimplement bekliyor`runAsync()`</span><span class="sxs-lookup"><span data-stu-id="931e4-152">Similarly, creating and returning communication listeners is optional, as hello service may have only background work toodo, and so only needs tooimplement `runAsync()`</span></span>
* <span data-ttu-id="931e4-153">Hizmet toocomplete için geçerli `runAsync()` başarıyla ve dönüş almaktır.</span><span class="sxs-lookup"><span data-stu-id="931e4-153">It is valid for a service toocomplete `runAsync()` successfully and return from it.</span></span> <span data-ttu-id="931e4-154">Bu bir hata durumu olarak kabul edilmez ve hizmet hello tamamlama hello arka plan iş temsil eder.</span><span class="sxs-lookup"><span data-stu-id="931e4-154">This is not considered a failure condition and would represent hello background work of hello service completing.</span></span> <span data-ttu-id="931e4-155">Durum bilgisi olan güvenilir hizmetler için `runAsync()` hello hizmet birincil sunucudan indirgendi ve geri tooprimary yükseltilmiş yeniden çağrılması.</span><span class="sxs-lookup"><span data-stu-id="931e4-155">For stateful reliable services `runAsync()` would be called again if hello service were demoted from primary and then promoted back tooprimary.</span></span>
* <span data-ttu-id="931e4-156">Gelen bir hizmet bulunup bulunmadığını `runAsync()` bazı beklenmeyen bir özel durum atma tarafından bu bir hatadır ve hello hizmet nesnesi kapatmak ve bir sistem durumu hatası bildirdi.</span><span class="sxs-lookup"><span data-stu-id="931e4-156">If a service exits from `runAsync()` by throwing some unexpected exception, this is a failure and hello service object is shut down and a health error reported.</span></span>
* <span data-ttu-id="931e4-157">Varken hiçbir zaman sınırı bu yöntemlerden döndürme, hemen hello özelliği toowrite kaybeder ve bu nedenle herhangi bir gerçek iş tamamlayamıyor.</span><span class="sxs-lookup"><span data-stu-id="931e4-157">While there is no time limit on returning from these methods, you immediately lose hello ability toowrite and therefore cannot complete any real work.</span></span> <span data-ttu-id="931e4-158">Merhaba iptal isteği aldıktan sonra hızlı bir şekilde olabildiğince dönüş önerilir.</span><span class="sxs-lookup"><span data-stu-id="931e4-158">It is recommended that you return as quickly as possible upon receiving hello cancellation request.</span></span> <span data-ttu-id="931e4-159">Hizmetiniz bir makul sürede Service Fabric zorla olabilir toothese API çağrıları yanıt vermezse, hizmetiniz sonlanır.</span><span class="sxs-lookup"><span data-stu-id="931e4-159">If your service does not respond toothese API calls in a reasonable amount of time Service Fabric may forcibly terminate your service.</span></span> <span data-ttu-id="931e4-160">Genellikle yalnızca uygulama yükseltmelerini ya da hizmet zaman siliniyor sırasında meydana gelir.</span><span class="sxs-lookup"><span data-stu-id="931e4-160">Usually this only happens during application upgrades or when a service is being deleted.</span></span> <span data-ttu-id="931e4-161">Bu zaman aşımı, varsayılan değer 15 dakikadır.</span><span class="sxs-lookup"><span data-stu-id="931e4-161">This timeout is 15 minutes by default.</span></span>
* <span data-ttu-id="931e4-162">Merhaba hatalarına `onCloseAsync()` yolu sonucunda `onAbort()` hello için bir son olasılığı en yüksek çaba fırsat olduğu çağrılan hizmet tooclean yukarı ve talep tüm kaynakları serbest bırakmak.</span><span class="sxs-lookup"><span data-stu-id="931e4-162">Failures in hello `onCloseAsync()` path result in `onAbort()` being called which is a last-chance best-effort opportunity for hello service tooclean up and release any resources that they have claimed.</span></span>

> [!NOTE]
> <span data-ttu-id="931e4-163">Durum bilgisi olan güvenilir hizmetler Java'da henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="931e4-163">Stateful reliable services are not supported in java yet.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="931e4-164">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="931e4-164">Next steps</span></span>
* [<span data-ttu-id="931e4-165">Giriş tooReliable Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="931e4-165">Introduction tooReliable Services</span></span>](service-fabric-reliable-services-introduction.md)
* [<span data-ttu-id="931e4-166">Güvenilir hizmetler hızlı başlangıç</span><span class="sxs-lookup"><span data-stu-id="931e4-166">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="931e4-167">Kullanım Gelişmiş güvenilir hizmetler</span><span class="sxs-lookup"><span data-stu-id="931e4-167">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
