---
title: "aaaGuidelines & Azure Service Fabric güvenilir koleksiyonlar için öneriler | Microsoft Docs"
description: "Kılavuzları ve önerileri Service Fabric güvenilir koleksiyonları kullanma"
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: masnider,rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/3/2017
ms.author: mcoskun
ms.openlocfilehash: bcdbc9d013bc044e06c43761e7f515c7e4bf340c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="guidelines-and-recommendations-for-reliable-collections-in-azure-service-fabric"></a><span data-ttu-id="047ef-103">Kılavuzları ve önerileri Azure Service Fabric güvenilir koleksiyonlar için</span><span class="sxs-lookup"><span data-stu-id="047ef-103">Guidelines and recommendations for Reliable Collections in Azure Service Fabric</span></span>
<span data-ttu-id="047ef-104">Bu bölümde, durum Yöneticisi'ni güvenilir ve güvenilir koleksiyonları kullanma yönergeleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="047ef-104">This section provides guidelines for using Reliable State Manager and Reliable Collections.</span></span> <span data-ttu-id="047ef-105">Merhaba toohelp kullanıcılar ortak tehlikesinden hedeftir.</span><span class="sxs-lookup"><span data-stu-id="047ef-105">hello goal is toohelp users avoid common pitfalls.</span></span>

<span data-ttu-id="047ef-106">Merhaba yönergeleri hello şartlarını önekli basit öneriler olarak düzenlenir *yapmak*, *düşünün*, *kaçının* ve *sağlamadığı*.</span><span class="sxs-lookup"><span data-stu-id="047ef-106">hello guidelines are organized as simple recommendations prefixed with hello terms *Do*, *Consider*, *Avoid* and *Do not*.</span></span>

* <span data-ttu-id="047ef-107">Okuma işlemleri tarafından döndürülen özel türde bir nesne değiştirmeyin (örneğin, `TryPeekAsync` veya `TryGetValueAsync`).</span><span class="sxs-lookup"><span data-stu-id="047ef-107">Do not modify an object of custom type returned by read operations (for example, `TryPeekAsync` or `TryGetValueAsync`).</span></span> <span data-ttu-id="047ef-108">Eşzamanlı koleksiyonları gibi güvenilir koleksiyonları başvuru toohello nesneleri ve bir kopyasını döndürür.</span><span class="sxs-lookup"><span data-stu-id="047ef-108">Reliable Collections, just like Concurrent Collections, return a reference toohello objects and not a copy.</span></span>
* <span data-ttu-id="047ef-109">Derin kopyalama hello değiştirmeden önce bir özel tür nesnesinin döndürülen yapın.</span><span class="sxs-lookup"><span data-stu-id="047ef-109">Do deep copy hello returned object of a custom type before modifying it.</span></span> <span data-ttu-id="047ef-110">Yapılar ve yerleşik türler geçişi değerli olduğundan, bunları derin bir kopyasında toodo gerekmez.</span><span class="sxs-lookup"><span data-stu-id="047ef-110">Since structs and built-in types are pass-by-value, you do not need toodo a deep copy on them.</span></span>
* <span data-ttu-id="047ef-111">Kullanmayın `TimeSpan.MaxValue` zaman aşımları için.</span><span class="sxs-lookup"><span data-stu-id="047ef-111">Do not use `TimeSpan.MaxValue` for time-outs.</span></span> <span data-ttu-id="047ef-112">Zaman aşımları kullanılan toodetect kilitlenmeleri olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="047ef-112">Time-outs should be used toodetect deadlocks.</span></span>
* <span data-ttu-id="047ef-113">Bunu kabul edilen, iptal, atıldı veya oluşturulduktan sonra bir işlem kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="047ef-113">Do not use a transaction after it has been committed, aborted, or disposed.</span></span>
* <span data-ttu-id="047ef-114">Numaralandırma oluşturulduğu hello işlem kapsamı dışında kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="047ef-114">Do not use an enumeration outside of hello transaction scope it was created in.</span></span>
* <span data-ttu-id="047ef-115">Bir işlem içinde başka bir işlemdeki oluşturmayın `using` deyimi kilitlenmeleri neden.</span><span class="sxs-lookup"><span data-stu-id="047ef-115">Do not create a transaction within another transaction’s `using` statement because it can cause deadlocks.</span></span>
* <span data-ttu-id="047ef-116">Emin olun, `IComparable<TKey>` uygulamasıdır doğru.</span><span class="sxs-lookup"><span data-stu-id="047ef-116">Do ensure that your `IComparable<TKey>` implementation is correct.</span></span> <span data-ttu-id="047ef-117">Merhaba sistemi bağımlılık yararlanır `IComparable<TKey>` kontrol noktalarına ve satır birleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="047ef-117">hello system takes dependency on `IComparable<TKey>` for merging checkpoints and rows.</span></span>
* <span data-ttu-id="047ef-118">Güncelleştirme kilidi bir amaç tooupdate bir öğesiyle okunurken kullanın, tooprevent kilitlenmelerin belirli bir sınıf.</span><span class="sxs-lookup"><span data-stu-id="047ef-118">Do use Update lock when reading an item with an intention tooupdate it tooprevent a certain class of deadlocks.</span></span>
* <span data-ttu-id="047ef-119">80 Kbayt öğelerinizi (örneğin, TKey + güvenilir sözlüğü için TValue) halde tutmayı düşünün: küçük hello daha iyi.</span><span class="sxs-lookup"><span data-stu-id="047ef-119">Consider keeping your items (for example, TKey + TValue for Reliable Dictionary) below 80 KBytes: smaller hello better.</span></span> <span data-ttu-id="047ef-120">Bu, büyük nesne yığın kullanımı yanı sıra disk ve ağ g/ç gereksinimleri hello miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="047ef-120">This reduces hello amount of Large Object Heap usage as well as disk and network IO requirements.</span></span> <span data-ttu-id="047ef-121">Genellikle, yalnızca bir küçük değerinin bir parçası hello güncelleştirildiğinde yinelenen veri çoğaltmak azaltır.</span><span class="sxs-lookup"><span data-stu-id="047ef-121">Often, it reduces replicating duplicate data when only one small part of hello value is being updated.</span></span> <span data-ttu-id="047ef-122">Yaygın şekilde tooachieve güvenilir sözlükte budur toobreak, satır toomultiple satır.</span><span class="sxs-lookup"><span data-stu-id="047ef-122">Common way tooachieve this in Reliable Dictionary, is toobreak your rows in toomultiple rows.</span></span>
* <span data-ttu-id="047ef-123">Yedekleme kullanmayı düşünün ve işlevselliği toohave olağanüstü durum kurtarma geri yükleyin.</span><span class="sxs-lookup"><span data-stu-id="047ef-123">Consider using backup and restore functionality toohave disaster recovery.</span></span>
* <span data-ttu-id="047ef-124">Tek bir varlık işlemleri ve birden çok varlık işlemleri karıştırma önlemek (örneğin `GetCountAsync`, `CreateEnumerableAsync`) hello içinde aynı işlem toohello farklı yalıtım düzeylerinde son.</span><span class="sxs-lookup"><span data-stu-id="047ef-124">Avoid mixing single entity operations and multi-entity operations (e.g `GetCountAsync`, `CreateEnumerableAsync`) in hello same transaction due toohello different isolation levels.</span></span>
* <span data-ttu-id="047ef-125">InvalidOperationException işleyin.</span><span class="sxs-lookup"><span data-stu-id="047ef-125">Do handle InvalidOperationException.</span></span> <span data-ttu-id="047ef-126">Kullanıcı işlemleri çeşitli nedenlerle hello sistem tarafından iptal.</span><span class="sxs-lookup"><span data-stu-id="047ef-126">User transactions can be aborted by hello system for variety of reasons.</span></span> <span data-ttu-id="047ef-127">Örneğin, hello güvenilir durum Yöneticisi rolüne birincil dışında değiştirirken veya uzun süre çalışan işlem zaman hello işlem günlük kesilmesi engelliyor.</span><span class="sxs-lookup"><span data-stu-id="047ef-127">For example, when hello Reliable State Manager is changing its role out of Primary or when a long-running transaction is blocking truncation of hello transactional log.</span></span> <span data-ttu-id="047ef-128">Böyle durumlarda, kullanıcı kendi işlem zaten sonlandırıldı belirten InvalidOperationException alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="047ef-128">In such cases, user may receive InvalidOperationException indicating that their transaction has already been terminated.</span></span> <span data-ttu-id="047ef-129">Varsayıldığında, hello işlem hello sonlandırılması hello kullanıcı tarafından istenen değil, en iyi şekilde toohandle bu özel durumun toodispose hello işlem hello iptal belirteci işaret (veya hello çoğaltma hello rolü değiştirildi varsa), onay ve aksi durumda Yeni işlem ve yeniden oluşturun.</span><span class="sxs-lookup"><span data-stu-id="047ef-129">Assuming, hello termination of hello transaction was not requested by hello user, best way toohandle this exception is toodispose hello transaction, check if hello cancellation token has been signaled (or hello role of hello replica has been changed), and if not create a new transaction and retry.</span></span>  

<span data-ttu-id="047ef-130">Göz önünde bazı şeyleri tookeep şunlardır:</span><span class="sxs-lookup"><span data-stu-id="047ef-130">Here are some things tookeep in mind:</span></span>

* <span data-ttu-id="047ef-131">Merhaba varsayılan zaman aşımı değeri, tüm hello güvenilir koleksiyonu API'leri için dört saniyedir.</span><span class="sxs-lookup"><span data-stu-id="047ef-131">hello default time-out is four seconds for all hello Reliable Collection APIs.</span></span> <span data-ttu-id="047ef-132">Kullanıcıların çoğunun hello varsayılan zaman aşımı kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="047ef-132">Most users should use hello default time-out.</span></span>
* <span data-ttu-id="047ef-133">Merhaba varsayılan iptal belirteci olan `CancellationToken.None` tüm güvenilir koleksiyonları API'lerde.</span><span class="sxs-lookup"><span data-stu-id="047ef-133">hello default cancellation token is `CancellationToken.None` in all Reliable Collections APIs.</span></span>
* <span data-ttu-id="047ef-134">anahtar türü parametre hello (*TKey*) güvenilir bir sözlük doğru uygulamalıdır için `GetHashCode()` ve `Equals()`.</span><span class="sxs-lookup"><span data-stu-id="047ef-134">hello key type parameter (*TKey*) for a Reliable Dictionary must correctly implement `GetHashCode()` and `Equals()`.</span></span> <span data-ttu-id="047ef-135">Anahtarları sabit olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="047ef-135">Keys must be immutable.</span></span>
* <span data-ttu-id="047ef-136">tooachieve hello güvenilir koleksiyonlar için yüksek kullanılabilirlik, her hizmetin en az bir hedef ve en küçük çoğaltma kümesi boyutu 3 olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="047ef-136">tooachieve high availability for hello Reliable Collections, each service should have at least a target and minimum replica set size of 3.</span></span>
* <span data-ttu-id="047ef-137">Merhaba ikincil okuma işlemleri kaydedilen çekirdek değildir sürümleri okuyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="047ef-137">Read operations on hello secondary may read versions that are not quorum committed.</span></span>
  <span data-ttu-id="047ef-138">Başka bir deyişle, tek bir ikincil okuma verilerinin sürümü yanlış progressed.</span><span class="sxs-lookup"><span data-stu-id="047ef-138">This means that a version of data that is read from a single secondary might be false progressed.</span></span>
  <span data-ttu-id="047ef-139">Birincil okuma kararlı her zaman: hiçbir zaman false progressed.</span><span class="sxs-lookup"><span data-stu-id="047ef-139">Reads from Primary are always stable: can never be false progressed.</span></span>

### <a name="next-steps"></a><span data-ttu-id="047ef-140">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="047ef-140">Next steps</span></span>
* [<span data-ttu-id="047ef-141">Güvenilir Koleksiyonlar ile çalışma</span><span class="sxs-lookup"><span data-stu-id="047ef-141">Working with Reliable Collections</span></span>](service-fabric-work-with-reliable-collections.md)
* [<span data-ttu-id="047ef-142">İşlemler ve kilitleri</span><span class="sxs-lookup"><span data-stu-id="047ef-142">Transactions and Locks</span></span>](service-fabric-reliable-services-reliable-collections-transactions-locks.md)
* [<span data-ttu-id="047ef-143">Güvenilir durum Yöneticisi'ni ve koleksiyon dahili bileşenleri</span><span class="sxs-lookup"><span data-stu-id="047ef-143">Reliable State Manager and Collection Internals</span></span>](service-fabric-reliable-services-reliable-collections-internals.md)
* <span data-ttu-id="047ef-144">Veri Yönetimi</span><span class="sxs-lookup"><span data-stu-id="047ef-144">Managing Data</span></span>
  * [<span data-ttu-id="047ef-145">Yedekleme ve Geri Yükleme</span><span class="sxs-lookup"><span data-stu-id="047ef-145">Backup and Restore</span></span>](service-fabric-reliable-services-backup-restore.md)
  * [<span data-ttu-id="047ef-146">Bildirimler</span><span class="sxs-lookup"><span data-stu-id="047ef-146">Notifications</span></span>](service-fabric-reliable-services-notifications.md)
  * [<span data-ttu-id="047ef-147">Seri hale getirme ve yükseltme</span><span class="sxs-lookup"><span data-stu-id="047ef-147">Serialization and Upgrade</span></span>](service-fabric-application-upgrade-data-serialization.md)
  * [<span data-ttu-id="047ef-148">Güvenilir durum Yöneticisi yapılandırması</span><span class="sxs-lookup"><span data-stu-id="047ef-148">Reliable State Manager configuration</span></span>](service-fabric-reliable-services-configuration.md)
* <span data-ttu-id="047ef-149">Diğer</span><span class="sxs-lookup"><span data-stu-id="047ef-149">Others</span></span>
  * [<span data-ttu-id="047ef-150">Güvenilir hizmetler hızlı başlangıç</span><span class="sxs-lookup"><span data-stu-id="047ef-150">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
  * [<span data-ttu-id="047ef-151">Güvenilir koleksiyonlar için Geliştirici Başvurusu</span><span class="sxs-lookup"><span data-stu-id="047ef-151">Developer reference for Reliable Collections</span></span>](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)
