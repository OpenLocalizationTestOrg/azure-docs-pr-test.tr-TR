---
title: "büyük Azure sanal makine ölçek kümeleri ile aaaWorking | Microsoft Docs"
description: "Gerekenler tooknow toouse büyük Azure sanal makine ölçekleme kümeleri"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="e76ee-103">Büyük sanal makine ölçek kümeleri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="e76ee-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="e76ee-104">Artık Azure oluşturabilirsiniz [sanal makine ölçek kümeleri](/azure/virtual-machine-scale-sets/) too1, 000 VM'ler yukarı kapasitesine sahip.</span><span class="sxs-lookup"><span data-stu-id="e76ee-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="e76ee-105">Bu belgede, bir _büyük sanal makine ölçek kümesini_ ölçeği 100 VM'ler daha toogreater ölçeklendirme özellikli Ayarla olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="e76ee-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling toogreater than 100 VMs.</span></span> <span data-ttu-id="e76ee-106">Bu özellik bir ölçek kümesi özelliği ile ayarlanır (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="e76ee-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="e76ee-107">Yük Dengeleme ve hata etki alanları farklı tooa standart ölçek kümesini davranır gibi büyük ölçekli belirli özelliklerini ayarlar.</span><span class="sxs-lookup"><span data-stu-id="e76ee-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently tooa standard scale set.</span></span> <span data-ttu-id="e76ee-108">Bu belge büyük ölçekli kümelerinin hello özelliklerini açıklar ve hangi tooknow toosuccessfully bunları uygulamalarınızda kullanmanız açıklar.</span><span class="sxs-lookup"><span data-stu-id="e76ee-108">This document explains hello characteristics of large scale sets, and describes what you need tooknow toosuccessfully use them in your applications.</span></span> 

<span data-ttu-id="e76ee-109">Büyük ölçekli bulut altyapısını dağıtmak için ortak bir yaklaşım toocreate kümesidir _ölçek birimleri_, örneğin birden çok VM oluşturarak kümeleri birden çok sanal ağlara ve depolama hesapları arasında ölçeklendirin.</span><span class="sxs-lookup"><span data-stu-id="e76ee-109">A common approach for deploying cloud infrastructure at large scale is toocreate a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="e76ee-110">Bu yaklaşım daha kolay yönetim karşılaştırıldığında toosingle VM'ler sağlar ve özellikle birden çok sanal ağlar ve uç noktaları gibi diğer yığınlanabilir bileşenleri gerektiren birçok uygulama için birden fazla ölçek birimi yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="e76ee-110">This approach provides easier management compared toosingle VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="e76ee-111">Uygulamanızın tek bir büyük küme ancak gerektiriyorsa, tek bir ölçek too1, 000 VM'ler kümesi daha kolay toodeploy olabilir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-111">If your application requires a single large cluster however, it can be more straightforward toodeploy a single scale set of up too1,000 VMs.</span></span> <span data-ttu-id="e76ee-112">Örnek senaryolar arasında merkezi büyük veri dağıtımları veya büyük bir çalışan düğümü havuzunun basit yönetimini gerektiren işlem kılavuzları sayılabilir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="e76ee-113">VM ölçek kümesi ile birlikte [veri diskleri ekli](virtual-machine-scale-sets-attached-disks.md), büyük ölçekli kümeleri etkinleştirmek, toodeploy binlerce çekirdek ve tek bir işlem olarak depolama petabaytlarca oluşan ölçeklenebilir bir altyapı.</span><span class="sxs-lookup"><span data-stu-id="e76ee-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you toodeploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="e76ee-114">Yerleştirme grupları</span><span class="sxs-lookup"><span data-stu-id="e76ee-114">Placement groups</span></span> 
<span data-ttu-id="e76ee-115">Kılan bir _büyük_ ölçeği özel Ayarla VM hello sayısı, ancak hello sayısı değil _yerleştirme grupları_ içeriyor.</span><span class="sxs-lookup"><span data-stu-id="e76ee-115">What makes a _large_ scale set special is not hello number of VMs, but hello number of _placement groups_ it contains.</span></span> <span data-ttu-id="e76ee-116">Bir yapı benzer tooan Azure kullanılabilirlik kümesi, kendi hata etki alanları ve yükseltme etki alanları ile bir yerleştirme grubudur.</span><span class="sxs-lookup"><span data-stu-id="e76ee-116">A placement group is a construct similar tooan Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="e76ee-117">Varsayılan olarak, bir ölçek kümesi en fazla 100 VM boyutuna sahip tek bir yerleştirme grubundan oluşur.</span><span class="sxs-lookup"><span data-stu-id="e76ee-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="e76ee-118">Bir ölçek adlı özellik ayarlarsanız _singlePlacementGroup_ too_false_, ayarlanır hello ölçek kümesini birden çok yerleştirme grupları oluşturulabilir ve 0-1000 aralığındadır VM'ler.</span><span class="sxs-lookup"><span data-stu-id="e76ee-118">If a scale set property called _singlePlacementGroup_ is set too_false_, hello scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="e76ee-119">Toohello varsayılan değer olarak ayarlandığında _doğru_, Ölçek kümesini tek yerleştirme grubu oluşur ve 0-100 aralığındadır VM'ler.</span><span class="sxs-lookup"><span data-stu-id="e76ee-119">When set toohello default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="e76ee-120">Büyük ölçek kümelerini kullanmaya ilişkin denetim listesi</span><span class="sxs-lookup"><span data-stu-id="e76ee-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="e76ee-121">toodecide etkili kullanımını büyük ölçekli kümeleri, uygulamanızın yapabilirsiniz olup olmadığını hello aşağıdaki gereksinimleri göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="e76ee-121">toodecide whether your application can make effective use of large scale sets, consider hello following requirements:</span></span>

- <span data-ttu-id="e76ee-122">Büyük ölçek kümeleri Azure Yönetilen Diskleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="e76ee-123">Yönetilen Diskler ile oluşturulmayan ölçek kümeleri birden fazla depolama hesabı (her 20 VM için bir tane) gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="e76ee-124">Büyük ölçekli, özel olarak aboneliğinize çalıştıran depolama yönetim ek yükü ve tooavoid hello riskini depolama hesapları için sınırlar yönetilen diskleri tooreduce ile tasarlanmış toowork kümeleridir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-124">Large scale sets are designed toowork exclusively with Managed Disks tooreduce your storage management overhead, and tooavoid hello risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="e76ee-125">Yönetilen diskleri kullanmazsanız, Ölçek sınırlı too100 VM'ler kümesidir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-125">If you do not use Managed Disks, your scale set is limited too100 VMs.</span></span>
- <span data-ttu-id="e76ee-126">Azure Market görüntülerden oluşturulan ölçek kümeleri too1, 000 VM'ler ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e76ee-126">Scale sets created from Azure Marketplace images can scale up too1,000 VMs.</span></span>
- <span data-ttu-id="e76ee-127">Özel resimler (oluşturmak ve kendiniz yüklemek VM görüntüleri) oluşturulan ölçek kümeleri şu anda too100 Vm'leri ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e76ee-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up too100 VMs.</span></span>
- <span data-ttu-id="e76ee-128">Katman 4 Yük Dengeleme Hello Azure yük dengeleyici ile birden çok yerleştirme gruplardan oluşan ölçek kümeleri için henüz desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="e76ee-128">Layer-4 load balancing with hello Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="e76ee-129">Azure yük dengeleyici olmak emin hello Ölçeği Ayarla toouse hello gerekiyorsa yapılandırılmış toouse hello varsayılan ayar olan bir tek yerleştirme, grubudur.</span><span class="sxs-lookup"><span data-stu-id="e76ee-129">If you need toouse hello Azure Load Balancer make sure hello scale set is configured toouse a single placement group, which is hello default setting.</span></span>
- <span data-ttu-id="e76ee-130">Katman 7 Yük Dengeleme Hello Azure uygulama ağ geçidi ile tüm ölçek kümeleri için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-130">Layer-7 load balancing with hello Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="e76ee-131">Ölçek kümesini tek bir alt ağ ile tanımlanan - gereksinim duyduğunuz tüm hello VM'ler için yeterince büyük bir adres alanı alt ağınızı sahip olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e76ee-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all hello VMs you need.</span></span> <span data-ttu-id="e76ee-132">Varsayılan olarak bir ölçek overprovisions kümesi (hangi sizin için sizden ücret istenmese fazladan VM'ler dağıtım zamanında veya çıkışı, ölçekleme sırasında oluşturur) tooimprove dağıtım güvenilirlik ve performans.</span><span class="sxs-lookup"><span data-stu-id="e76ee-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) tooimprove deployment reliability and performance.</span></span> <span data-ttu-id="e76ee-133">Bir adres alanı % 20 tooscale için planlama VM'ler hello sayısından daha izin verir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-133">Allow for an address space 20% greater than hello number of VMs you plan tooscale to.</span></span>
- <span data-ttu-id="e76ee-134">Birçok VM toodeploy planlıyorsanız, işlem çekirdek kotası artan toobe gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="e76ee-134">If you are planning toodeploy many VMs, your Compute core quota limits may need toobe increased.</span></span>
- <span data-ttu-id="e76ee-135">Hata etki alanları ve yükseltme etki alanları yalnızca bir yerleştirme grubu içinde tutarlıdır.</span><span class="sxs-lookup"><span data-stu-id="e76ee-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="e76ee-136">Bu mimari hello değiştirmez genel kullanılabilirlik bir ölçek kümesi, sanal makineleri farklı fiziksel donanım üzerinde dağılımla, ancak iki VM olan farklı donanım üzerinde tooguarantee ihtiyacınız varsa, farklı hatası olduklarından emin olmak anlamına gelir mu etki alanlarında aynı yerleştirme Grup hello.</span><span class="sxs-lookup"><span data-stu-id="e76ee-136">This architecture does not change hello overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need tooguarantee two VMs are on different hardware, make sure they are in different fault domains in hello same placement group.</span></span> <span data-ttu-id="e76ee-137">Hata etki alanı ve yerleştirme Grup Kimliği hello gösterilen _örnek görünümü_ VM ölçeğini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="e76ee-137">Fault domain and placement group ID are shown in hello _instance view_ of a scale set VM.</span></span> <span data-ttu-id="e76ee-138">VM ölçek kümesi örnek görünümünü hello hello görüntüleyebilirsiniz [Azure kaynak Gezgini](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e76ee-138">You can view hello instance view of a scale set VM in hello [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="e76ee-139">Büyük ölçek kümesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="e76ee-139">Creating a large scale set</span></span>
<span data-ttu-id="e76ee-140">Ölçeği hello Azure portal Ayarla oluşturduğunuzda, onu tooscale toomultiple yerleştirme grupları ayarlama hello tarafından izin verebilirsiniz _sınırı tooa tek yerleştirme grup_ seçeneği too_False_ hello içinde _Temelleri_ dikey.</span><span class="sxs-lookup"><span data-stu-id="e76ee-140">When you create a scale set in hello Azure portal, you can allow it tooscale toomultiple placement groups by setting hello _Limit tooa single placement group_ option too_False_ in hello _Basics_ blade.</span></span> <span data-ttu-id="e76ee-141">Bu seçenek kümesi too_False_ belirttiğiniz bir _örnek sayısını_ değerini too1, 000 ayarlama.</span><span class="sxs-lookup"><span data-stu-id="e76ee-141">With this option set too_False_, you can specify an _Instance count_ value of up too1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="e76ee-142">Merhaba kullanılarak ayarlanan büyük bir VM ölçek oluşturabilirsiniz [Azure CLI](https://github.com/Azure/azure-cli) _az vmss oluşturma_ komutu.</span><span class="sxs-lookup"><span data-stu-id="e76ee-142">You can create a large VM scale set using hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="e76ee-143">Bu komut hello bağlı alt ağ boyutu gibi akıllı varsayılan ayarlar _örnek sayısı_ bağımsız değişkeni:</span><span class="sxs-lookup"><span data-stu-id="e76ee-143">This command sets intelligent defaults such as subnet size based on hello _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="e76ee-144">Bu hello Not _vmss oluşturma_ bunları belirtmezseniz, komut Varsayılanları bazı yapılandırma değerleri.</span><span class="sxs-lookup"><span data-stu-id="e76ee-144">Note that hello _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="e76ee-145">geçersiz kılabilirsiniz toosee hello kullanılabilir seçenekleri deneyin:</span><span class="sxs-lookup"><span data-stu-id="e76ee-145">toosee hello available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="e76ee-146">Bir Azure Resource Manager şablonu oluşturma tarafından ayarlanmış büyük bir ölçekte oluşturuyorsanız, yönetilen Azure disklerde dayalı bir ölçek kümesini hello şablon oluşturur emin olun.</span><span class="sxs-lookup"><span data-stu-id="e76ee-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure hello template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="e76ee-147">Merhaba ayarlayabilirsiniz _singlePlacementGroup_ özelliği too_false_ hello içinde _özellikleri_ hello bölümünü _Microsoft.Compute/virtualMAchineScaleSets_ kaynak.</span><span class="sxs-lookup"><span data-stu-id="e76ee-147">You can set hello _singlePlacementGroup_ property too_false_ in hello _properties_ section of hello _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="e76ee-148">Merhaba aşağıdaki JSON parça gösterir hello 1.000 VM kapasitesi ve hello gibi bir ölçek kümesi şablonu hello başlangıcını _"singlePlacementGroup": yanlış_ ayarı:</span><span class="sxs-lookup"><span data-stu-id="e76ee-148">hello following JSON fragment shows hello beginning of a scale set template, including hello 1,000 VM capacity and hello _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="e76ee-149">Büyük ölçekli tam bir örnek için şablon ayarlama, çok bakın[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="e76ee-149">For a complete example of a large scale set template, refer too[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a><span data-ttu-id="e76ee-150">Varolan bir ölçek dönüştürme toospan birden çok yerleştirme grupları</span><span class="sxs-lookup"><span data-stu-id="e76ee-150">Converting an existing scale set toospan multiple placement groups</span></span>
<span data-ttu-id="e76ee-151">var olan bir VM ölçek kümesi 100 VM'ler daha toomore ölçeklendirme özellikli toomake toochange hello ihtiyacınız _singplePlacementGroup_ özelliği too_false_ hello ölçeğinde modeli ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="e76ee-151">toomake an existing VM scale set capable of scaling toomore than 100 VMs, you need toochange hello _singplePlacementGroup_ property too_false_ in hello scale set model.</span></span> <span data-ttu-id="e76ee-152">Bu özelliğin hello ile değiştirilmesi test [Azure kaynak Gezgini](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e76ee-152">You can test changing this property with hello [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="e76ee-153">Mevcut bir ölçek kümesini, select Bul _Düzenle_ hello değiştirip _singlePlacementGroup_ özelliği.</span><span class="sxs-lookup"><span data-stu-id="e76ee-153">Find an existing scale set, select _Edit_ and change hello _singlePlacementGroup_ property.</span></span> <span data-ttu-id="e76ee-154">Bu özellik görmüyorsanız hello ölçeği hello Microsoft.Compute API daha eski bir sürümü Ayarla görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="e76ee-154">If you do not see this property, you may be viewing hello scale set with an older version of hello Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="e76ee-155">Birden çok yerleştirme gruplarını destekleyen bir tek yerleştirme grubu yalnızca (Merhaba, varsayılan davranıştır) tooa destekleyen ayarlamak ölçek değiştirebilirsiniz, ancak hello şekilde dönüştürülemiyor.</span><span class="sxs-lookup"><span data-stu-id="e76ee-155">You can change a scale set from supporting a single placement group only (hello default behavior) tooa supporting multiple placement groups, but you cannot convert hello other way around.</span></span> <span data-ttu-id="e76ee-156">Bu nedenle dönüştürmeden önce büyük ölçekli kümeleri hello özelliklerini anladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e76ee-156">Therefore make sure you understand hello properties of large scale sets before converting.</span></span> <span data-ttu-id="e76ee-157">Özellikle, katman 4 Yük Dengeleme hello Azure yük dengeleyici ile gerekmez emin olun.</span><span class="sxs-lookup"><span data-stu-id="e76ee-157">In particular, make sure you do not need layer-4 load balancing with hello Azure Load Balancer.</span></span>


