---
title: "Büyük Azure Sanal Makine Ölçek Kümeleri ile çalışma | Microsoft Docs"
description: "Büyük Azure sanal makine ölçek kümelerini kullanmak için bilmeniz gerekenler"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: 9e9eae1623e55c1c05e97aa0b836819ce5dc16f9
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/03/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="0557b-103">Büyük sanal makine ölçek kümeleri ile çalışma</span><span class="sxs-lookup"><span data-stu-id="0557b-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="0557b-104">Artık, 1000 adede kadar VM kapasiteli Azure [sanal makine ölçek kümeleri](/azure/virtual-machine-scale-sets/) oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up to 1,000 VMs.</span></span> <span data-ttu-id="0557b-105">Bu belgede _büyük bir sanal makine ölçek kümesi_, 100’den fazla VM'yi ölçeklendirme kapasitesine sahip bir ölçek kümesi olarak tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="0557b-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling to greater than 100 VMs.</span></span> <span data-ttu-id="0557b-106">Bu özellik bir ölçek kümesi özelliği ile ayarlanır (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="0557b-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="0557b-107">Büyük ölçek kümelerinin yük dengeleme ve hata etki alanları gibi bazı özellikleri, standart bir ölçek kümesinden farklı davranır.</span><span class="sxs-lookup"><span data-stu-id="0557b-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently to a standard scale set.</span></span> <span data-ttu-id="0557b-108">Bu belgede büyük ölçek kümelerinin özellikleri ve bunları uygulamalarınızda başarıyla kullanabilmeniz için bilmeniz gerekenler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="0557b-108">This document explains the characteristics of large scale sets, and describes what you need to know to successfully use them in your applications.</span></span> 

<span data-ttu-id="0557b-109">Büyük ölçekte bulut altyapısı dağıtmaya yönelik genel bir yaklaşım, _ölçek birimleri_ kümesi oluşturmayı içerir (örneğin, birden fazla sanal ağ ve depolama hesabında birden fazla VM oluşturarak).</span><span class="sxs-lookup"><span data-stu-id="0557b-109">A common approach for deploying cloud infrastructure at large scale is to create a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="0557b-110">Bu yaklaşım, tek VM'lerle karşılaştırıldığında daha kolay yönetim sağlar. Ayrıca, birden fazla ölçek birimi, yığınlanabilen bileşenler (birden çok sanal ağ ve uç nokta gibi) gerektiren uygulamalar başta olmak üzere çoğu uygulama için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="0557b-110">This approach provides easier management compared to single VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="0557b-111">Ancak, uygulamanız tek bir büyük küme gerektiriyorsa, 1.000 adede kadar VM içerebilen tek bir ölçek kümesinin dağıtılması daha kolay olabilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-111">If your application requires a single large cluster however, it can be more straightforward to deploy a single scale set of up to 1,000 VMs.</span></span> <span data-ttu-id="0557b-112">Örnek senaryolar arasında merkezi büyük veri dağıtımları veya büyük bir çalışan düğümü havuzunun basit yönetimini gerektiren işlem kılavuzları sayılabilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="0557b-113">VM ölçek kümesi [bağlı veri diskleri](virtual-machine-scale-sets-attached-disks.md) ile bir araya geldiğinde, büyük ölçek kümeleri, tek bir işlem olarak binlerce çekirdek ve petabaytlarca depolama alanından oluşan ölçeklenebilir bir altyapı dağıtmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="0557b-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you to deploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="0557b-114">Yerleştirme grupları</span><span class="sxs-lookup"><span data-stu-id="0557b-114">Placement groups</span></span> 
<span data-ttu-id="0557b-115">_Büyük_ bir ölçek kümesini özel kılan özellik VM sayısı değil, içerdiği _yerleştirme grubu_ sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="0557b-115">What makes a _large_ scale set special is not the number of VMs, but the number of _placement groups_ it contains.</span></span> <span data-ttu-id="0557b-116">Yerleştirme grubu, kendi hata etki alanları ve yükseltme etki alanları ile Azure kullanılabilirlik kümesine benzer bir yapıdır.</span><span class="sxs-lookup"><span data-stu-id="0557b-116">A placement group is a construct similar to an Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="0557b-117">Varsayılan olarak, bir ölçek kümesi en fazla 100 VM boyutuna sahip tek bir yerleştirme grubundan oluşur.</span><span class="sxs-lookup"><span data-stu-id="0557b-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="0557b-118">_singlePlacementGroup_ adlı ölçek kümesi özelliği _false_ olarak ayarlanırsa, ölçek kümesi birden fazla yerleştirme grubundan oluşabilir ve 0-1.000 aralığında VM içerebilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-118">If a scale set property called _singlePlacementGroup_ is set to _false_, the scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="0557b-119">Varsayılan _true_ değerine ayarlandığında ise ölçek kümesi tek bir yerleştirme grubundan oluşur ve 0-100 aralığında VM içerir.</span><span class="sxs-lookup"><span data-stu-id="0557b-119">When set to the default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="0557b-120">Büyük ölçek kümelerini kullanmaya ilişkin denetim listesi</span><span class="sxs-lookup"><span data-stu-id="0557b-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="0557b-121">Uygulamanızın büyük ölçek kümelerini etkili bir şekilde kullanıp kullanmadığına karar vermek için aşağıdaki gereksinimleri göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="0557b-121">To decide whether your application can make effective use of large scale sets, consider the following requirements:</span></span>

- <span data-ttu-id="0557b-122">Büyük ölçek kümeleri Azure Yönetilen Diskleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0557b-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="0557b-123">Yönetilen Diskler ile oluşturulmayan ölçek kümeleri birden fazla depolama hesabı (her 20 VM için bir tane) gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0557b-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="0557b-124">Büyük ölçek kümeleri, depolama yönetimi yükünüzü azaltmak ve depolama hesaplarının abonelik sınırlarını aşma riskini önlemek üzere yalnızca Yönetilen Disklerle çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="0557b-124">Large scale sets are designed to work exclusively with Managed Disks to reduce your storage management overhead, and to avoid the risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="0557b-125">Yönetilen Diskleri kullanmazsanız, ölçek kümeniz 100 VM ile sınırlı olur.</span><span class="sxs-lookup"><span data-stu-id="0557b-125">If you do not use Managed Disks, your scale set is limited to 100 VMs.</span></span>
- <span data-ttu-id="0557b-126">Azure Market’te oluşturulan ölçek kümeleri 1.000 VM’ye kadar ölçeklendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-126">Scale sets created from Azure Marketplace images can scale up to 1,000 VMs.</span></span>
- <span data-ttu-id="0557b-127">Özel görüntülerden oluşturulan ölçek kümeleri (kendi oluşturduğunuz ve yüklediğiniz VM görüntüleri) şu anda en fazla 100 VM’ye kadar ölçeklendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up to 100 VMs.</span></span>
- <span data-ttu-id="0557b-128">Azure Load Balancer ile 4. katman yük dengeleme, birden fazla yerleştirme grubundan oluşan ölçek kümeleri için henüz desteklenmemektedir.</span><span class="sxs-lookup"><span data-stu-id="0557b-128">Layer-4 load balancing with the Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="0557b-129">Azure Load Balancer’ı kullanmanız gerekirse, ölçek kümesinin tek bir yerleştirme grubu kullanacak şekilde (varsayılan ayar) yapılandırıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="0557b-129">If you need to use the Azure Load Balancer make sure the scale set is configured to use a single placement group, which is the default setting.</span></span>
- <span data-ttu-id="0557b-130">Azure Application Gateway ile 7. katman yük dengeleme tüm ölçek kümeleri için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="0557b-130">Layer-7 load balancing with the Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="0557b-131">Ölçek kümesi tek bir alt ağ ile tanımlanır; alt ağınızın gereken tüm VM’ler için yeterince geniş bir adres alanına sahip olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="0557b-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all the VMs you need.</span></span> <span data-ttu-id="0557b-132">Varsayılan olarak, dağıtım güvenilirliğini ve performansını artırmak için ölçek kümesi fazla sağlama yapar (dağıtım sırasında veya ölçeklendirme sırasında fazladan VM oluşturur, bunlar için ücret alınmaz).</span><span class="sxs-lookup"><span data-stu-id="0557b-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) to improve deployment reliability and performance.</span></span> <span data-ttu-id="0557b-133">Ölçeklendirmeyi planladığınız VM sayısından %20 daha fazla adres alanı ayırın.</span><span class="sxs-lookup"><span data-stu-id="0557b-133">Allow for an address space 20% greater than the number of VMs you plan to scale to.</span></span>
- <span data-ttu-id="0557b-134">Çok sayıda VM dağıtmayı planlıyorsanız, İşlem çekirdek kotası sınırlarınızın artırılması gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-134">If you are planning to deploy many VMs, your Compute core quota limits may need to be increased.</span></span>
- <span data-ttu-id="0557b-135">Hata etki alanları ve yükseltme etki alanları yalnızca bir yerleştirme grubu içinde tutarlıdır.</span><span class="sxs-lookup"><span data-stu-id="0557b-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="0557b-136">VM’ler ayrı bir fiziksel donanım üzerinde dağıtıldığı için bu mimari bir ölçek kümesinin genel kullanılabilirliğini değiştirmez, ancak farklı bir donanım üzerinde iki VM’yi garanti etmeniz gerekiyorsa, bunların aynı yerleştirme grubundaki farklı hata etki alanlarında olduğundan emin olmanız gerektiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="0557b-136">This architecture does not change the overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need to guarantee two VMs are on different hardware, make sure they are in different fault domains in the same placement group.</span></span> <span data-ttu-id="0557b-137">Hata etki alanı ve yerleştirme grubu kimliği, bir ölçek kümesi sanal makinesinin _örnek görünümünde_ gösterilir.</span><span class="sxs-lookup"><span data-stu-id="0557b-137">Fault domain and placement group ID are shown in the _instance view_ of a scale set VM.</span></span> <span data-ttu-id="0557b-138">Bir ölçek kümesi sanal makinesinin örnek görünümünü [Azure Kaynak Gezgini](https://resources.azure.com/)’nde görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-138">You can view the instance view of a scale set VM in the [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="0557b-139">Büyük ölçek kümesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="0557b-139">Creating a large scale set</span></span>
<span data-ttu-id="0557b-140">Azure portalında bir ölçek kümesi oluştururken, _Temel Özellikler_ dikey penceresinde _Tek bir yerleştirme grubuyla sınırla_ seçeneğini _False_ olarak ayarlayarak ölçek kümesinin birden fazla yerleştirme grubuna ölçeklendirilmesine izin verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-140">When you create a scale set in the Azure portal, you can allow it to scale to multiple placement groups by setting the _Limit to a single placement group_ option to _False_ in the _Basics_ blade.</span></span> <span data-ttu-id="0557b-141">Bu seçenek _False_ olarak ayarlandığında, _Örnek sayısı_ değerini 1.000’e kadar belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-141">With this option set to _False_, you can specify an _Instance count_ value of up to 1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="0557b-142">[Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ komutunu kullanarak büyük bir VM ölçek kümesi oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-142">You can create a large VM scale set using the [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="0557b-143">Bu komut, alt ağ boyutu gibi akıllı varsayılan değerleri _instance-count_ bağımsız değişkenine göre ayarlar:</span><span class="sxs-lookup"><span data-stu-id="0557b-143">This command sets intelligent defaults such as subnet size based on the _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="0557b-144">Belirtmemeniz durumunda, _vmss create_ komutu bazı yapılandırma değerlerini varsayılan olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="0557b-144">Note that the _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="0557b-145">Geçersiz kılabileceğiniz seçenekleri görmek için şunları deneyin:</span><span class="sxs-lookup"><span data-stu-id="0557b-145">To see the available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="0557b-146">Bir Azure Resource Manager şablonu oluşturarak büyük bir ölçek kümesi oluşturuyorsanız, şablonun Azure Yönetilen Diskleri temel alan bir ölçek kümesi oluşturduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="0557b-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure the template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="0557b-147">_Microsoft.Compute/virtualMAchineScaleSets_ kaynağının _özellikler_ bölümünde _singlePlacementGroup_ özelliğini _false_ olarak ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-147">You can set the _singlePlacementGroup_ property to _false_ in the _properties_ section of the _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="0557b-148">Aşağıdaki JSON parçası, 1.000 VM kapasite ve _"singlePlacementGroup" : false_ ayarına sahip bir ölçek kümesi şablonunun başlangıcını gösterir:</span><span class="sxs-lookup"><span data-stu-id="0557b-148">The following JSON fragment shows the beginning of a scale set template, including the 1,000 VM capacity and the _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="0557b-149">Büyük bir ölçek kümesi şablonunun tam örneği için bkz. [https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="0557b-149">For a complete example of a large scale set template, refer to [https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-to-span-multiple-placement-groups"></a><span data-ttu-id="0557b-150">Mevcut bir ölçek kümesini birden fazla yerleştirme grubuna yayılacak şekilde dönüştürme</span><span class="sxs-lookup"><span data-stu-id="0557b-150">Converting an existing scale set to span multiple placement groups</span></span>
<span data-ttu-id="0557b-151">Mevcut bir VM ölçek kümesini 100’den fazla VM ölçeklendirebilecek kapasiteye getirmek için, ölçek kümesi modelinde _singplePlacementGroup_ özelliğini _false_ olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0557b-151">To make an existing VM scale set capable of scaling to more than 100 VMs, you need to change the _singplePlacementGroup_ property to _false_ in the scale set model.</span></span> <span data-ttu-id="0557b-152">Bu özelliğin değiştirilmesini [Azure Kaynak Gezgini](https://resources.azure.com/) ile test edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-152">You can test changing this property with the [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="0557b-153">Mevcut bir ölçek kümesini bulun, _Düzenle_’yi seçin ve _singlePlacementGroup_ özelliğini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="0557b-153">Find an existing scale set, select _Edit_ and change the _singlePlacementGroup_ property.</span></span> <span data-ttu-id="0557b-154">Bu özelliği görmüyorsanız, ölçek kümesini Microsoft.Compute API’sinin daha eski bir sürümüyle görüntülüyor olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-154">If you do not see this property, you may be viewing the scale set with an older version of the Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="0557b-155">Tek bir yerleştirme grubunu destekleyen bir ölçek kümesini (varsayılan davranış), birden fazla yerleştirme grubunu destekleyecek şekilde değiştirebilirsiniz, ancak zıt yönde değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="0557b-155">You can change a scale set from supporting a single placement group only (the default behavior) to a supporting multiple placement groups, but you cannot convert the other way around.</span></span> <span data-ttu-id="0557b-156">Bu nedenle, dönüştürmeden önce büyük ölçek kümelerinin özelliklerini anladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="0557b-156">Therefore make sure you understand the properties of large scale sets before converting.</span></span> <span data-ttu-id="0557b-157">Özellikle, Azure Load Balancer ile 4. katman yük dengelemenin gerekli olmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="0557b-157">In particular, make sure you do not need layer-4 load balancing with the Azure Load Balancer.</span></span>


