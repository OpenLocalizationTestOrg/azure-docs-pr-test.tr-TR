---
title: "Test yük devretme Azure Site Recovery | Microsoft Docs"
description: "Şirket içinden Azure'a yük devretme testi çalıştırma hakkında bilgi edinin"
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/04/2017
ms.author: pratshar
ms.openlocfilehash: 54f62af6abcdd38254fd5379b95baa05656dc90b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="test--failover-to-azure-in-site-recovery"></a><span data-ttu-id="fb388-103">Azure Site kurtarma için yük devretme sınaması</span><span class="sxs-lookup"><span data-stu-id="fb388-103">Test  Failover to Azure in Site Recovery</span></span>



<span data-ttu-id="fb388-104">Bu makalede bilgiler sağlanmaktadır ve yük devretme testi ya da bir DR detayı sanal makinelerin ve fiziksel sunucuları, yapmaya yönelik yönergeler kurtarma sitesi olarak Azure kullanarak Site Recovery ile korunur.</span><span class="sxs-lookup"><span data-stu-id="fb388-104">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using Azure as the recovery site.</span></span>

<span data-ttu-id="fb388-105">Tüm yorumlarınızı ve sorularınızı bu makalenin alt kısmında veya [Azure Kurtarma Hizmetleri Forumu](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr)'nda paylaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fb388-105">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="fb388-106">Çoğaltma stratejinizi doğrulamak veya herhangi bir veri kaybı veya kapalı kalma süresi olmadan bir olağanüstü durum kurtarma ayrıntıya gerçekleştirmek için yük devretme testi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="fb388-106">Test failover is run to validate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="fb388-107">Yük devretme testi yapılması etkilerini devam eden çoğaltmayı veya üretim ortamınıza sahip değil.</span><span class="sxs-lookup"><span data-stu-id="fb388-107">Doing a test failover doesn't have any impact on the ongoing replication or on your production environment.</span></span> <span data-ttu-id="fb388-108">Yük devretme sınaması yapılabilir ya da üzerinde bir sanal makine veya bir [kurtarma planı](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="fb388-108">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="fb388-109">Yük devretme testi tetiklendiğinde, sanal makineleri bağlanacağı hangi test ağ belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-109">When triggering a test failover, you need to specify the network to which test virtual machines would connect to.</span></span> <span data-ttu-id="fb388-110">Yük devretme testi tetiklenir sonra ilerleme durumunu izleyebilirsiniz **işleri** sayfası.</span><span class="sxs-lookup"><span data-stu-id="fb388-110">Once a test failover is triggered, you can track progress in the **Jobs** page.</span></span>  


## <a name="supported-scenarios"></a><span data-ttu-id="fb388-111">Desteklenen senaryolar</span><span class="sxs-lookup"><span data-stu-id="fb388-111">Supported scenarios</span></span>
<span data-ttu-id="fb388-112">Yük devretme testi desteklenen tüm dağıtım senaryolarında dışında [Azure'da eski VMware sitesi](site-recovery-vmware-to-azure-classic-legacy.md).</span><span class="sxs-lookup"><span data-stu-id="fb388-112">Test failover is supported in all deployment scenarios other than [legacy VMware site to Azure](site-recovery-vmware-to-azure-classic-legacy.md).</span></span> <span data-ttu-id="fb388-113">Sanal makine üzerinde Azure için başarısız oldu, yük devretme sınaması da desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="fb388-113">Test failover is also not supported when virtual machine has been failed over to Azure.</span></span>  


## <a name="run-a-test-failover"></a><span data-ttu-id="fb388-114">Yük devretme testi çalıştırma</span><span class="sxs-lookup"><span data-stu-id="fb388-114">Run a test failover</span></span>
<span data-ttu-id="fb388-115">Bu yordam, bir yük devretme sınaması için bir kurtarma planı Çalıştır açıklar.</span><span class="sxs-lookup"><span data-stu-id="fb388-115">This procedure describes how to run a test failover for a recovery plan.</span></span> <span data-ttu-id="fb388-116">Alternatif olarak, uygun seçeneği kullanılarak tek bir makine için yük devretme testi de çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fb388-116">Alternatively you can also run test failover for a single machine by using the appropriate option on it.</span></span>

![Yük devretme sınaması](./media/site-recovery-test-failover-to-azure/TestFailover.png)


1. <span data-ttu-id="fb388-118">Seçin **kurtarma planları** > *recoveryplan_name*.</span><span class="sxs-lookup"><span data-stu-id="fb388-118">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="fb388-119">Tıklatın **yük devretme testi**.</span><span class="sxs-lookup"><span data-stu-id="fb388-119">Click **Test Failover**.</span></span>
1. <span data-ttu-id="fb388-120">Seçin bir **kurtarma noktası** yük.</span><span class="sxs-lookup"><span data-stu-id="fb388-120">Select a **Recovery Point** to failover to.</span></span> <span data-ttu-id="fb388-121">Aşağıdaki seçeneklerden birini kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="fb388-121">You can use one of the following options:</span></span>
    1.  <span data-ttu-id="fb388-122">**En son işlenen**: Site Recovery hizmeti tarafından işlenmiş olan en son kurtarma noktasına kurtarma planının tüm sanal makineleri bu seçenek yöneltilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-122">**Latest processed**: This option fails over all virtual machines of the recovery plan to the latest recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="fb388-123">Bir sanal makine yük devretme yapılırken, en son işlenen kurtarma noktası zaman damgası da gösterilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-123">When you are doing test failover of a virtual machine, time stamp of the latest processed recovery point is also shown.</span></span> <span data-ttu-id="fb388-124">Bir kurtarma planı yük devretme yapıyorsanız, tek tek sanal makineye gidin ve bakmak **en son kurtarma noktası** bu bilgileri almak için bölme.</span><span class="sxs-lookup"><span data-stu-id="fb388-124">If you are doing failover of a recovery plan, you can go to individual virtual machine and look at **Latest Recovery Points** tile to get this information.</span></span> <span data-ttu-id="fb388-125">İşlenmemiş verileri işlemek için harcanan hiçbir zaman gibi bu seçenek bir düşük RTO (Kurtarma süresi hedefi) yük devretme seçeneği sağlar.</span><span class="sxs-lookup"><span data-stu-id="fb388-125">As no time is spent to process the unprocessed data, this option provides a low RTO (Recovery Time Objective) failover option.</span></span>
    1.  <span data-ttu-id="fb388-126">**Son uygulama tutarlı**: Site Recovery hizmeti tarafından işlenmiş olan son uygulama tutarlı kurtarma noktasına kurtarma planının tüm sanal makineleri bu seçenek yöneltilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-126">**Latest app-consistent**: This option fails over all virtual machines of the recovery plan to the latest application consistent recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="fb388-127">Bir sanal makine yük devretme yapılırken en son uygulamayla tutarlı kurtarma noktasının zaman damgası da gösterilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-127">When you are doing test failover of a virtual machine, time stamp of the latest app-consistent recovery point is also shown.</span></span> <span data-ttu-id="fb388-128">Bir kurtarma planı yük devretme yapıyorsanız, tek tek sanal makineye gidin ve bakmak **en son kurtarma noktası** bu bilgileri almak için bölme.</span><span class="sxs-lookup"><span data-stu-id="fb388-128">If you are doing failover of a recovery plan, you can go to individual virtual machine and look at **Latest Recovery Points** tile to get this information.</span></span>
    1.  <span data-ttu-id="fb388-129">**En son**: Bu seçenek ilk bunları üzerinden ona başarısız olmadan önce her bir sanal makine için bir kurtarma noktası oluşturmak için Site Recovery hizmetine gönderilen tüm verileri işler.</span><span class="sxs-lookup"><span data-stu-id="fb388-129">**Latest**: This option first processes all the data that has been sent to Site Recovery service to create a recovery point for each virtual machine before failing them over to it.</span></span> <span data-ttu-id="fb388-130">Bu seçenek, düşük RPO'ya (kurtarma noktası hedefi) yük devretme tüm verileri sonra oluşturulan sanal yük devretme tetiklendiğinde, Site Recovery hizmetine çoğaltılan makinenin sağlar.</span><span class="sxs-lookup"><span data-stu-id="fb388-130">This option provides the lowest RPO (Recovery Point Objective) as the virtual machine created after failover will have all the data that has been replicated to Site Recovery service when the failover was triggered.</span></span>
    1.  <span data-ttu-id="fb388-131">**En son çoklu işlenen VM**: Bu seçenek yalnızca çoklu VM tutarlılığını en az bir sanal makineyle sahip kurtarma planları için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-131">**Latest multi-VM processed**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="fb388-132">En son ortak çoklu VM tutarlı Kurtarma bir çoğaltma grubu yük devretme parçası olan sanal makineleri gelin.</span><span class="sxs-lookup"><span data-stu-id="fb388-132">Virtual machines that are part of a replication group failover to the latest common multi-VM consistent recovery point.</span></span> <span data-ttu-id="fb388-133">Diğer sanal makineler yük devretme bunların en son işlenen kurtarma noktası.</span><span class="sxs-lookup"><span data-stu-id="fb388-133">Other virtual machines failover to their latest processed recovery point.</span></span>  
    1.  <span data-ttu-id="fb388-134">**En son çoklu VM uygulamayla tutarlı**: Bu seçenek yalnızca çoklu VM tutarlılığı ON ile en az bir sanal makinenin kurtarma planları için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-134">**Latest multi-VM app-consistent**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="fb388-135">Çoğaltma grubu yük devretme son ortak çoklu VM uygulamaları tutarlı kurtarma için bir parçası olan sanal makineleri gelin.</span><span class="sxs-lookup"><span data-stu-id="fb388-135">Virtual machines that are part of a replication group failover to the latest common multi-VM application-consistent recovery point.</span></span> <span data-ttu-id="fb388-136">Diğer sanal makineler kendi son noktaya yük devretme uygulamaları tutarlı kurtarma.</span><span class="sxs-lookup"><span data-stu-id="fb388-136">Other virtual machines failover to their latest application-consistent recovery point.</span></span> 
    1.  <span data-ttu-id="fb388-137">**Özel**: bir sanal makinenin yük devretme testi yapmakta olduğunuz sonra belirli bir kurtarma noktası için yük devretme için bu seçeneği kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fb388-137">**Custom**: If you are doing test failover of a virtual machine, then you can use this option to failover to a particular recovery point.</span></span>
1. <span data-ttu-id="fb388-138">Seçin bir **Azure sanal ağı**: Burada test sanal makineleri oluşturulacaktır bir Azure sanal ağı sağlar.</span><span class="sxs-lookup"><span data-stu-id="fb388-138">Select an **Azure virtual network**: Provide an Azure virtual network where the test virtual machines would be created.</span></span> <span data-ttu-id="fb388-139">Site kurtarma denemeleri test sanal makineleri aynı ad ve aynı IP sağlanan olarak kullanarak bir alt ağ oluşturmak **işlem ve ağ** sanal makinenin ayarlarını.</span><span class="sxs-lookup"><span data-stu-id="fb388-139">Site Recovery attempts to create test virtual machines in a subnet of same name and using the same IP as that provided in **Compute and Network** settings of the virtual machine.</span></span> <span data-ttu-id="fb388-140">Ardından aynı adlı alt ağ yük devretme sınaması için sağlanan Azure sanal ağda kullanılabilir durumda değilse, test sanal makine ağdaki ilk alt alfabetik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fb388-140">If subnet of same name is not available in the Azure virtual network provided for test failover, then test virtual machine is created in the first subnet alphabetically.</span></span> <span data-ttu-id="fb388-141">Aynı IP alt ağda kullanılabilir durumda değilse, sanal makine başka bir IP adresi alt ağında kullanılabilir alır.</span><span class="sxs-lookup"><span data-stu-id="fb388-141">If same IP is not available in the subnet, then virtual machine gets another IP address available in the subnet.</span></span> <span data-ttu-id="fb388-142">Bu bölüm için okuma [daha fazla ayrıntı](#creating-a-network-for-test-failover)</span><span class="sxs-lookup"><span data-stu-id="fb388-142">Read this section for [more details](#creating-a-network-for-test-failover)</span></span>
1. <span data-ttu-id="fb388-143">Azure'a devretmek ve veri şifrelemesi etkin olduğunda, buna **şifreleme anahtarı** sağlayıcı yüklemesi sırasında veri şifrelemesi etkin olduğunda verilmiş sertifikayı seçin.</span><span class="sxs-lookup"><span data-stu-id="fb388-143">If you're failing over to Azure and data encryption is enabled, in **Encryption Key** select the certificate that was issued when you enabled data encryption during Provider installation.</span></span> <span data-ttu-id="fb388-144">Sanal makine üzerinde şifrelemeyi etkinleştirmediyseniz, bu adımı yoksayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fb388-144">You can ignore this step if you have not enabled encryption on the virtual machine.</span></span>
1. <span data-ttu-id="fb388-145">Yük devretme işleminin ilerleyişini izlemek **işleri** sekmesi.</span><span class="sxs-lookup"><span data-stu-id="fb388-145">Track failover progress on the **Jobs** tab.</span></span> <span data-ttu-id="fb388-146">Azure portalında test yineleme makine görebilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-146">You should be able to see the test replica machine in the Azure portal.</span></span>
1. <span data-ttu-id="fb388-147">Sanal makinede bir RDP bağlantı başlatmak için gerekecektir [bir ortak IP eklemek](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) başarısız ağ arabiriminde sanal makine üzerinde.</span><span class="sxs-lookup"><span data-stu-id="fb388-147">To initiate an RDP connection on the virtual machine, you will need to [add a public ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on the network interface of the failed over virtual machine.</span></span> <span data-ttu-id="fb388-148">Klasik sanal makineye üzerinden başarısız oluyor sonra yapmanız [bir uç nokta ekleyin](../virtual-machines/windows/classic/setup-endpoints.md) 3389 numaralı bağlantı noktasında</span><span class="sxs-lookup"><span data-stu-id="fb388-148">If you are failing over to a Classic virtual machine, then you need to [add an endpoint](../virtual-machines/windows/classic/setup-endpoints.md) on port 3389</span></span>
1. <span data-ttu-id="fb388-149">İşiniz bittiğinde tıklatın **temizleme yük devretme testi** kurtarma planı üzerinde.</span><span class="sxs-lookup"><span data-stu-id="fb388-149">Once you're done, click **Cleanup test failover** on the recovery plan.</span></span> <span data-ttu-id="fb388-150">Yük devretme testiyle ilişkili gözlemlerinizi kaydetmek ve saklamak için **Notlar**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="fb388-150">In **Notes** record and save any observations associated with the test failover.</span></span> <span data-ttu-id="fb388-151">Yük devretme testi sırasında oluşturulan sanal makineleri siler.</span><span class="sxs-lookup"><span data-stu-id="fb388-151">This deletes the virtual machines that were created during test failover.</span></span>


> [!TIP]
> <span data-ttu-id="fb388-152">Site kurtarma denemeleri test sanal makineleri aynı ad ve aynı IP sağlanan olarak kullanarak bir alt ağ oluşturmak **işlem ve ağ** sanal makinenin ayarlarını.</span><span class="sxs-lookup"><span data-stu-id="fb388-152">Site Recovery attempts to create test virtual machines in a subnet of same name and using the same IP as that provided in **Compute and Network** settings of the virtual machine.</span></span> <span data-ttu-id="fb388-153">Ardından aynı adlı alt ağ yük devretme sınaması için sağlanan Azure sanal ağda kullanılabilir durumda değilse, test sanal makine ağdaki ilk alt alfabetik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fb388-153">If subnet of same name is not available in the Azure virtual network provided for test failover, then test virtual machine is created in the first subnet alphabetically.</span></span> <span data-ttu-id="fb388-154">Hedef IP seçilen alt ağın parçası ise, site kurtarma, hedef IP kullanarak test yük devretme sanal makine oluşturmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="fb388-154">If the target IP is part of the chosen subnet, then site recovery tries to create the test failover virtual machine using the target IP.</span></span> <span data-ttu-id="fb388-155">Hedef IP, seçilen alt ağının parçası değilse, test yük devretme sanal makine seçilen alt ağında kullanılabilir herhangi bir IP'yi kullanılarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="fb388-155">If the target IP is not part of the chosen subnet then test failover virtual machine gets created using any available IP in the chosen subnet.</span></span>
>
>

## <a name="test-failover-job"></a><span data-ttu-id="fb388-156">Test yük devretme işi</span><span class="sxs-lookup"><span data-stu-id="fb388-156">Test failover job</span></span>

![Yük devretme sınaması](./media/site-recovery-test-failover-to-azure/TestFailoverJob.png)

<span data-ttu-id="fb388-158">Yük devretme testi tetiklendiğinde, aşağıdaki adımları içerir:</span><span class="sxs-lookup"><span data-stu-id="fb388-158">When a test failover is triggered, it involves following steps:</span></span>

1. <span data-ttu-id="fb388-159">Önkoşul denetimi: Bu adım, yük devretme için gerekli tüm koşulların karşılandığından sağlar</span><span class="sxs-lookup"><span data-stu-id="fb388-159">Prerequisites check: This step ensures that all conditions required for failover are met</span></span>
1. <span data-ttu-id="fb388-160">Yük devretme: Bu adım verileri işler ve böylece dışında bir Azure sanal makinesi oluşturulabilir hazır kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="fb388-160">Failover: This step processes the data and makes it ready so that an Azure virtual machine can be created out of it.</span></span> <span data-ttu-id="fb388-161">Seçmiş olmanız durumunda **son** kurtarma noktası bu adımı oluşturur, bir kurtarma noktası hizmete gönderilen verileri.</span><span class="sxs-lookup"><span data-stu-id="fb388-161">If you have chosen **Latest** recovery point, this step creates a recovery point from the data that has been sent to the service.</span></span>
1. <span data-ttu-id="fb388-162">Başlangıç: Bu adım önceki adımda işlenen veri kullanarak bir Azure sanal makine oluşturur.</span><span class="sxs-lookup"><span data-stu-id="fb388-162">Start: This step creates an Azure virtual machine using the data processed in the previous step.</span></span>

## <a name="time-taken-for-failover"></a><span data-ttu-id="fb388-163">Yük devretme için harcanan süre</span><span class="sxs-lookup"><span data-stu-id="fb388-163">Time taken for failover</span></span>

<span data-ttu-id="fb388-164">Bazı durumlarda, sanal makinelerin yük devretme genellikle tamamlamak için yaklaşık 8-10 dakika sürer bir ek ara adım gerektirir.</span><span class="sxs-lookup"><span data-stu-id="fb388-164">In certain cases, failover of virtual machines requires an extra intermediate step that usually takes around 8  to 10 minutes to complete.</span></span> <span data-ttu-id="fb388-165">Bu durumların olarak olan aşağıdaki:</span><span class="sxs-lookup"><span data-stu-id="fb388-165">These cases are as following:</span></span>

* <span data-ttu-id="fb388-166">Mobility hizmetinin 9.8 eski bir sürümünü kullanarak VMware sanal makineleri</span><span class="sxs-lookup"><span data-stu-id="fb388-166">VMware virtual machines using a version of the Mobility service older than 9.8</span></span>
* <span data-ttu-id="fb388-167">Fiziksel sunucuları</span><span class="sxs-lookup"><span data-stu-id="fb388-167">Physical servers</span></span>
* <span data-ttu-id="fb388-168">VMware Linux sanal makineleri</span><span class="sxs-lookup"><span data-stu-id="fb388-168">VMware Linux virtual machines</span></span>
* <span data-ttu-id="fb388-169">Fiziksel sunucuları olarak korunan Hyper-V sanal makineler</span><span class="sxs-lookup"><span data-stu-id="fb388-169">Hyper-V virtual machines protected as physical servers</span></span>
* <span data-ttu-id="fb388-170">Burada aşağıdaki sürücüleri önyükleme sürücüler olarak mevcut olmayan VMware sanal makineler</span><span class="sxs-lookup"><span data-stu-id="fb388-170">VMware virtual machines where following drivers are not present as boot drivers</span></span>
    * <span data-ttu-id="fb388-171">storvsc</span><span class="sxs-lookup"><span data-stu-id="fb388-171">storvsc</span></span>
    * <span data-ttu-id="fb388-172">VMBus</span><span class="sxs-lookup"><span data-stu-id="fb388-172">vmbus</span></span>
    * <span data-ttu-id="fb388-173">storflt</span><span class="sxs-lookup"><span data-stu-id="fb388-173">storflt</span></span>
    * <span data-ttu-id="fb388-174">Intelide</span><span class="sxs-lookup"><span data-stu-id="fb388-174">intelide</span></span>
    * <span data-ttu-id="fb388-175">ATAPI</span><span class="sxs-lookup"><span data-stu-id="fb388-175">atapi</span></span>
* <span data-ttu-id="fb388-176">VMware sanal makineleri'de, DHCP hizmeti, DHCP veya statik kullanarak yedeklemiş etkin olmayan IP adresleri</span><span class="sxs-lookup"><span data-stu-id="fb388-176">VMware virtual machines that don't have DHCP service enabled irrespective of whether they are using DHCP or static IP addresses</span></span>

<span data-ttu-id="fb388-177">Tüm diğer durumlarda bu ara adım gerekli değildir ve yük devretme için harcanan süre önemli ölçüde düşebilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-177">In all the other cases this intermediate step is not required and the time taken for the failover is significantly lower.</span></span>


## <a name="creating-a-network-for-test-failover"></a><span data-ttu-id="fb388-178">Yük devretme sınaması için bir ağ oluşturma</span><span class="sxs-lookup"><span data-stu-id="fb388-178">Creating a network for test failover</span></span>
<span data-ttu-id="fb388-179">Bir test yük devretme yapılırken sağladığınız üretim ağınızdan kurtarma sitesi yalıtılmış bir ağ seçmeniz önerilir **işlem ve ağ** sanal makine için ayarları.</span><span class="sxs-lookup"><span data-stu-id="fb388-179">It is recommended that when you are doing a test failover you choose a network that is isolated from your production recovery site network that you provided in **Compute and Network** settings for the virtual machine.</span></span> <span data-ttu-id="fb388-180">Bir Azure sanal ağı oluşturduğunuzda varsayılan olarak, diğer ağlardan yalıtılır.</span><span class="sxs-lookup"><span data-stu-id="fb388-180">By default when you create an Azure virtual network, it is isolated from other networks.</span></span> <span data-ttu-id="fb388-181">Bu ağın üretim ağınızdan taklit etmelidir:</span><span class="sxs-lookup"><span data-stu-id="fb388-181">This network should mimic your production network:</span></span>

1. <span data-ttu-id="fb388-182">Test ağı üretim ağınızda aynı sayıda alt ağlar olarak, üretim ağınıza ve bu alt ağ ile aynı ada sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-182">Test network should have same number of subnets as that in your production network and with the same name as those of the subnets in your production network.</span></span>
1. <span data-ttu-id="fb388-183">Test ağı aynı IP aralığı, üretim ağınıza kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-183">Test network should use the same IP range as that of your production network.</span></span>
1. <span data-ttu-id="fb388-184">IP altında DNS sanal makine için hedef olarak verdiğiniz IP olarak Test ağı DNS güncelleştirme **işlem ve ağ** ayarlar.</span><span class="sxs-lookup"><span data-stu-id="fb388-184">Update the DNS of the Test Network as the IP that you gave as target IP for the DNS virtual machine under **Compute and Network** settings.</span></span> <span data-ttu-id="fb388-185">Git üzerinden [test active directory için yük devretme konuları](site-recovery-active-directory.md#test-failover-considerations) daha fazla ayrıntı için bölüm.</span><span class="sxs-lookup"><span data-stu-id="fb388-185">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>


## <a name="test-failover-to-a-production-network-on-recovery-site"></a><span data-ttu-id="fb388-186">Kurtarma sitesinde bir üretim ağı için yük devretme sınaması</span><span class="sxs-lookup"><span data-stu-id="fb388-186">Test failover to a production network on recovery site</span></span>
<span data-ttu-id="fb388-187">Bir test yük devretme yapılırken sağladığınız üretim ağınızdan kurtarma sitesini farklı bir ağ seçmeniz önerilir **işlem ve ağ** sanal makine için ayarları.</span><span class="sxs-lookup"><span data-stu-id="fb388-187">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Compute and Network** settings for the virtual machine.</span></span> <span data-ttu-id="fb388-188">Ancak gerçekten uçtan uca ağ bağlantısına başarısız doğrulamak istiyorsanız, sanal makine üzerinde aşağıdaki noktalara dikkat edin:</span><span class="sxs-lookup"><span data-stu-id="fb388-188">But if you really want to validate end to end network connectivity in a failed over virtual machine, note the following points:</span></span>

1. <span data-ttu-id="fb388-189">Test yük devretme yapılırken birincil sanal makine kapatma olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="fb388-189">Make sure that the primary virtual machine is shutdown when you are doing the test failover.</span></span> <span data-ttu-id="fb388-190">Bunu yapmazsanız, iki sanal makine aynı anda aynı ağda çalışan aynı kimliğe sahip olur ve istenmeyen sonuçlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-190">If you don't do so, there will be two virtual machines with the same identity running in the same network at the same time and that can lead to undesired consequences.</span></span>
1. <span data-ttu-id="fb388-191">Test yük devretme sanal makineleri yaptığınız tüm değişiklikler olduğunda kayıp Temizle, test yük devretme sanal makineler.</span><span class="sxs-lookup"><span data-stu-id="fb388-191">Any changes that you make into the test failover virtual machines would be lost when you cleanup the test failover virtual machines.</span></span> <span data-ttu-id="fb388-192">Bu değişiklikleri birincil sanal makine çoğaltılmamış.</span><span class="sxs-lookup"><span data-stu-id="fb388-192">These changes will not be replicated back to the primary virtual machine.</span></span>
1. <span data-ttu-id="fb388-193">Bu şekilde test yapmanın üretim uygulamanız için bir kapalı kalma yol açar.</span><span class="sxs-lookup"><span data-stu-id="fb388-193">This way of doing testing leads to a downtime of your production application.</span></span> <span data-ttu-id="fb388-194">Uygulamanın kullanıcılarını DR detayı devam ederken uygulama kullanmamayı sorulan.</span><span class="sxs-lookup"><span data-stu-id="fb388-194">Users of the application should be asked to not use the application when the DR drill is in progress.</span></span>  



## <a name="prepare-active-directory-and-dns"></a><span data-ttu-id="fb388-195">Active Directory ve DNS hazırlama</span><span class="sxs-lookup"><span data-stu-id="fb388-195">Prepare Active Directory and DNS</span></span>
<span data-ttu-id="fb388-196">Bir yük devretme sınaması için sınama uygulama çalıştırmak için test ortamınızda üretim Active Directory ortamında bir kopyasını gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-196">To run a test failover for application testing, you need a copy of the production Active Directory environment in your test environment.</span></span> <span data-ttu-id="fb388-197">Git üzerinden [test active directory için yük devretme konuları](site-recovery-active-directory.md#test-failover-considerations) daha fazla ayrıntı için bölüm.</span><span class="sxs-lookup"><span data-stu-id="fb388-197">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>

## <a name="prepare-to-connect-to-azure-vms-after-failover"></a><span data-ttu-id="fb388-198">Yük devretmeden sonra Azure VM'lerine bağlanmak için hazırlık yapma</span><span class="sxs-lookup"><span data-stu-id="fb388-198">Prepare to connect to Azure VMs after failover</span></span>

<span data-ttu-id="fb388-199">Yük devretmeden sonra RDP kullanarak Azure vm'lerine bağlanmak isterseniz, tabloda özetlenen Eylemler yaptığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="fb388-199">If you want to connect to Azure VMs using RDP after failover, make sure you do the actions summarized in the table.</span></span>

<span data-ttu-id="fb388-200">**Yük devretme**</span><span class="sxs-lookup"><span data-stu-id="fb388-200">**Failover**</span></span> | <span data-ttu-id="fb388-201">**Konum**</span><span class="sxs-lookup"><span data-stu-id="fb388-201">**Location**</span></span> | <span data-ttu-id="fb388-202">**Eylemler**</span><span class="sxs-lookup"><span data-stu-id="fb388-202">**Actions**</span></span>
--- | --- | ---
<span data-ttu-id="fb388-203">**Windows çalıştıran azure VM**</span><span class="sxs-lookup"><span data-stu-id="fb388-203">**Azure VM running Windows**</span></span> | <span data-ttu-id="fb388-204">Yük devretmeden önce şirket içi makinede</span><span class="sxs-lookup"><span data-stu-id="fb388-204">On on-premises machine before failover</span></span> | <span data-ttu-id="fb388-205">Azure VM internet üzerinden erişim, RDP etkinleştirmek için emin TCP ve UDP olun kuralları eklenir için **ortak**, ve bu seçeneklerinde RDP'ye izin **Windows Güvenlik Duvarı** > **izin verilen uygulamaları**, tüm profiller için.</span><span class="sxs-lookup"><span data-stu-id="fb388-205">To access the Azure VM over the internet, enable RDP, make sure TCP, and UDP rules are added for the **Public**, and that RDP is allowed in **Windows Firewall** > **Allowed Apps**, for all profiles.</span></span><br/><br/> <span data-ttu-id="fb388-206">Bir siteden siteye bağlantı üzerinden erişim, makinede RDP etkinleştirmek ve RDP izin verildiğinden emin olun **Windows Güvenlik Duvarı** -> **verilen uygulamalar ve Özellikler** için **etki alanı ve özel** ağlar.</span><span class="sxs-lookup"><span data-stu-id="fb388-206">To access over a site-to-site connection, enable RDP on the machine, and ensure that RDP is allowed in the **Windows Firewall** -> **Allowed apps and features** for **Domain and Private** networks.</span></span><br/><br/>  <span data-ttu-id="fb388-207">Emin olun işletim sisteminin SAN ilkesinin ayarlanmış **OnlineAll**.</span><span class="sxs-lookup"><span data-stu-id="fb388-207">Make sure the operating system's SAN policy is set to **OnlineAll**.</span></span> <span data-ttu-id="fb388-208">[Daha fazla bilgi edinin](https://support.microsoft.com/kb/3031135).</span><span class="sxs-lookup"><span data-stu-id="fb388-208">[Learn more](https://support.microsoft.com/kb/3031135).</span></span><br/><br/> <span data-ttu-id="fb388-209">Hiçbir Windows güncelleştirmelerini bekleyen sanal makine bir yük devretme tetiklemek zaman olmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="fb388-209">Make sure there are no Windows updates pending on the virtual machine when you trigger a failover.</span></span> <span data-ttu-id="fb388-210">Windows update, yük devretme ve güncelleştirme tamamlanana kadar sanal makineye oturum açabilmeniz olmaz başlayabilir.</span><span class="sxs-lookup"><span data-stu-id="fb388-210">Windows update might start when you failover and you will not be able to login to the virtual machine until the update completes.</span></span> <br/><br/>
<span data-ttu-id="fb388-211">**Windows çalıştıran azure VM**</span><span class="sxs-lookup"><span data-stu-id="fb388-211">**Azure VM running Windows**</span></span> | <span data-ttu-id="fb388-212">Yük devretme sonrasında Azure VM'de</span><span class="sxs-lookup"><span data-stu-id="fb388-212">On Azure VM after failover</span></span> | <span data-ttu-id="fb388-213">Klasik sanal makine için [genel bir uç nokta ekleme](../virtual-machines/windows/classic/setup-endpoints.md) RDP Protokolü (3389 numaralı bağlantı noktası)</span><span class="sxs-lookup"><span data-stu-id="fb388-213">For a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) for the RDP protocol (port 3389)</span></span><br/><br/>  <span data-ttu-id="fb388-214">Resource Manager sanal makinesi [bir ortak IP eklemek](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) üzerindeki.</span><span class="sxs-lookup"><span data-stu-id="fb388-214">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="fb388-215">RDP bağlantı noktasına gelen bağlantılara izin vermek ağ güvenlik grubu kural devredilen VM ve bağlı, Azure alt ağ gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-215">The network security group rules on the failed over VM, and the Azure subnet to which it is connected, need to allow incoming connections to the RDP port.</span></span><br/><br/> <span data-ttu-id="fb388-216">Bir Resource Manager sanal makine için kontrol edebilirsiniz **önyükleme tanılama** bir sanal makine ekran aramak için</span><span class="sxs-lookup"><span data-stu-id="fb388-216">For a Resource Manager virtual machine, you can check **Boot diagnostics** to look at a screenshot of the virtual machine</span></span><br/><br/> <span data-ttu-id="fb388-217">Bağlanamıyorsanız, VM çalışıp çalışmadığını denetleyin ve bunlara Ara [sorun giderme ipuçları](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span><span class="sxs-lookup"><span data-stu-id="fb388-217">If you can't connect, check that the VM is running and then look at these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span><br/><br/>
<span data-ttu-id="fb388-218">**Linux çalıştıran azure VM**</span><span class="sxs-lookup"><span data-stu-id="fb388-218">**Azure VM running Linux**</span></span> | <span data-ttu-id="fb388-219">Yük devretmeden önce şirket içi makinede</span><span class="sxs-lookup"><span data-stu-id="fb388-219">On on-premises machine before failover</span></span> | <span data-ttu-id="fb388-220">Azure VM'de Secure Shell hizmetinin sistem önyüklemesinde otomatik olarak başlatılacak şekilde ayarlandığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="fb388-220">Ensure that the Secure Shell service on the Azure VM is set to start automatically on system boot.</span></span><br/><br/> <span data-ttu-id="fb388-221">Güvenlik duvarı kurallarının gerçekleştirilecek SSH bağlantısına izin verdiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="fb388-221">Check that firewall rules allow an SSH connection to it.</span></span>
<span data-ttu-id="fb388-222">**Linux çalıştıran azure VM**</span><span class="sxs-lookup"><span data-stu-id="fb388-222">**Azure VM running Linux**</span></span> | <span data-ttu-id="fb388-223">Yük devretme sonrasında Azure VM</span><span class="sxs-lookup"><span data-stu-id="fb388-223">Azure VM after failover</span></span> | <span data-ttu-id="fb388-224">Yük devredilen VM'deki ve VM'nin bağlandığı Azure alt ağındaki ağ güvenlik grubu kurallarının, SSH bağlantı noktasına gelen bağlantılara izin vermesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="fb388-224">The network security group rules on the failed over VM, and the Azure subnet to which it is connected, need to allow incoming connections to the SSH port.</span></span><br/><br/> <span data-ttu-id="fb388-225">Klasik sanal makine için [genel bir uç nokta ekleme](../virtual-machines/windows/classic/setup-endpoints.md) , SSH bağlantı noktası (TCP bağlantı noktası 22 varsayılan olarak) gelen bağlantılara izin verecek şekilde oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="fb388-225">For  a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) should be created, to allow incoming connections on the SSH port (TCP port 22 by default).</span></span><br/><br/> <span data-ttu-id="fb388-226">Resource Manager sanal makinesi [bir ortak IP eklemek](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) üzerindeki.</span><span class="sxs-lookup"><span data-stu-id="fb388-226">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="fb388-227">Bir Resource Manager sanal makine için kontrol edebilirsiniz **önyükleme tanılama** bir sanal makine ekran aramak için</span><span class="sxs-lookup"><span data-stu-id="fb388-227">For a Resource Manager virtual machine, you can check **Boot diagnostics** to look at a screenshot of the virtual machine</span></span><br/><br/>



## <a name="next-steps"></a><span data-ttu-id="fb388-228">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="fb388-228">Next steps</span></span>
<span data-ttu-id="fb388-229">Yük devretme testi başarıyla denediyseniz sonra yapılması deneyebilirsiniz bir [yük devretme](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="fb388-229">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>
