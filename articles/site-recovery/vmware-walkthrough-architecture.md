---
title: "VMware çoğaltma tooAzure için aaaReview hello mimarisi | Microsoft Docs"
description: "Bu makalede, bileşenleri ve hello Azure Site Recovery hizmeti ile şirket içi VMware sanal makinelerini tooAzure çoğaltırken kullanılan mimariye genel bakış sağlar"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27.017
ms.author: raynew
ms.openlocfilehash: 7acb1d8e83a846dca79e175fd1af9324f2c31e65
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="step-1-review-hello-architecture-for-vmware-replication-tooazure"></a><span data-ttu-id="c8fb8-103">1. adım: VMware çoğaltma tooAzure hello mimarisi gözden geçirin</span><span class="sxs-lookup"><span data-stu-id="c8fb8-103">Step 1: Review hello architecture for VMware replication tooAzure</span></span>

<span data-ttu-id="c8fb8-104">Bu makalede hello bileşenleri ve süreçleri çoğaltma VMware sanal makineleri tooAzure hello kullanarak şirket içi kullanılan [Azure Site Recovery](site-recovery-overview.md) hizmet.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-104">This article describes hello components and processes used when replicating on-premises VMware virtual machines tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="c8fb8-105">Bu makalenin hello altındaki tüm yorumlar gönderin ya da hello sorular sormak [Azure kurtarma Hizmetleri Forumu](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="c8fb8-105">Post any comments at hello bottom of this article, or ask questions in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="c8fb8-106">Mimari bileşenler</span><span class="sxs-lookup"><span data-stu-id="c8fb8-106">Architectural components</span></span>

<span data-ttu-id="c8fb8-107">Merhaba tablo ihtiyacınız hello bileşenleri özetler.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-107">hello table summarizes hello components you need.</span></span>

<span data-ttu-id="c8fb8-108">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-108">**Component**</span></span> | <span data-ttu-id="c8fb8-109">**Gereksinim**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-109">**Requirement**</span></span> | <span data-ttu-id="c8fb8-110">**Ayrıntılar**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="c8fb8-111">**Azure**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-111">**Azure**</span></span> | <span data-ttu-id="c8fb8-112">Bir Azure aboneliği, Azure storage hesabı ve bir Azure ağı gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-112">You need an Azure subscription, an Azure storage account, and an Azure network.</span></span> | <span data-ttu-id="c8fb8-113">Çoğaltılan veriler hello depolama hesabında depolanır.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-113">Replicated data is stored in hello storage account.</span></span> <span data-ttu-id="c8fb8-114">Şirket içi sitenizdeki yük devretme durumunda azure Vm'leri çoğaltılan hello verilerle oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-114">Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span> <span data-ttu-id="c8fb8-115">Hello Azure VM'ler, oluşturuldukları zaman toohello Azure sanal ağı bağlayın.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-115">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="c8fb8-116">**Yapılandırma sunucusu**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-116">**Configuration server**</span></span> | <span data-ttu-id="c8fb8-117">Tek bir yönetim sunucusu (VMware VM) tüm hello şirket içi hello dağıtımı için Site Recovery bileşenlerini çalıştıran şirket içi.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-117">A single on-premises management server (VMware VM) that runs all hello on-premises Site Recovery components for hello deployment.</span></span> <span data-ttu-id="c8fb8-118">Bunlar bir yapılandırma sunucusuna işlem sunucusu, ana hedef sunucusu içerir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-118">These include a configuration server, process server, master target server.</span></span> | <span data-ttu-id="c8fb8-119">Merhaba yapılandırma sunucusu bileşeni şirket içi ve Azure arasındaki iletişimi düzenler ve veri çoğaltma işlemlerini yönetir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-119">hello configuration server component coordinates communications between on-premises and Azure, and manages data replication.</span></span>
 <span data-ttu-id="c8fb8-120">**İşlem sunucusu**:</span><span class="sxs-lookup"><span data-stu-id="c8fb8-120">**Process server**:</span></span>  | <span data-ttu-id="c8fb8-121">Varsayılan olarak hello yapılandırma sunucusunda yüklü.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-121">Installed by default on hello configuration server.</span></span> | <span data-ttu-id="c8fb8-122">Çoğaltma ağ geçidi olarak davranır.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-122">Acts as a replication gateway.</span></span> <span data-ttu-id="c8fb8-123">Çoğaltma verilerini alıp, önbelleğe alma, sıkıştırma ve şifreleme iyileştirir ve tooAzure depolama gönderir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-123">Receives replication data, optimizes it with caching, compression, and encryption, and sends it tooAzure storage.</span></span><br/><br/> <span data-ttu-id="c8fb8-124">Merhaba işlem sunucusu da hello Mobility hizmeti tooprotected makinelere göndermeli yüklemesini işler ve VMware vm'lerinin otomatik bulma işlemini gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-124">hello process server also handles push installation of hello Mobility service tooprotected machines, and performs automatic discovery of VMware VMs.</span></span><br/><br/> <span data-ttu-id="c8fb8-125">Dağıtımınız büyüdükçe, çoğaltma trafik artırma ek ayrı adanmış işlem sunucuları toohandle ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-125">As your deployment grows you can add additional separate dedicated process servers toohandle increasing volumes of replication traffic.</span></span>
 <span data-ttu-id="c8fb8-126">**Ana hedef sunucu**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-126">**Master target server**</span></span> | <span data-ttu-id="c8fb8-127">Merhaba şirket içi yapılandırma sunucusu üzerinde varsayılan olarak yüklüdür.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-127">Installed by default on hello on-premises configuration server.</span></span> | <span data-ttu-id="c8fb8-128">Azure’dan yeniden çalışma sırasında çoğaltma verilerini işler.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-128">Handles replication data during failback from Azure.</span></span><br/><br/> <span data-ttu-id="c8fb8-129">Yeniden çalışma trafiğinin hacmi yüksekse, yeniden çalışma için ayrı bir ana hedef sunucu dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-129">If volumes of failback traffic are high, you can deploy a separate master target server for failback.</span></span>
<span data-ttu-id="c8fb8-130">**VMware sunucuları**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-130">**VMware servers**</span></span> | <span data-ttu-id="c8fb8-131">VMware Vm'lerini vSphere ESXi sunucularda barındırılan ve bir vCenter server toomanage hello konakları öneririz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-131">VMware VMs are hosted on vSphere ESXi servers, and we recommend a vCenter server toomanage hello hosts.</span></span> | <span data-ttu-id="c8fb8-132">VMware sunucularını tooyour kurtarma Hizmetleri kasası ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-132">You add VMware servers tooyour Recovery Services vault.</span></span>
<span data-ttu-id="c8fb8-133">**Çoğaltılan makineler**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-133">**Replicated machines**</span></span> | <span data-ttu-id="c8fb8-134">Merhaba Mobility hizmeti Çoğalttığınız her VMware VM yüklenir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-134">hello Mobility service will be installed on each VMware VM you replicate.</span></span> <span data-ttu-id="c8fb8-135">El ile her makinede veya hello işlem sunucusu anında yüklemesinden ile yüklenebilir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-135">It can be installed manually on each machine, or with a push installation from hello process server.</span></span>

<span data-ttu-id="c8fb8-136">**Şekil 1: VMware tooAzure bileşenleri**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-136">**Figure 1: VMware tooAzure components**</span></span>

![Bileşenler](./media/vmware-walkthrough-architecture/arch-enhanced.png)

## <a name="replication-process"></a><span data-ttu-id="c8fb8-138">Çoğaltma işlemi</span><span class="sxs-lookup"><span data-stu-id="c8fb8-138">Replication process</span></span>

1. <span data-ttu-id="c8fb8-139">Şirket içi ve Azure bileşenleri de dahil olmak üzere hello dağıtım, ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-139">You set up hello deployment, including on-premises and Azure components.</span></span> <span data-ttu-id="c8fb8-140">Merhaba kurtarma Hizmetleri kasasına hello çoğaltma kaynak ve hedef hello yapılandırma sunucusunu ayarlamayı, bir çoğaltma ilkesi oluşturmak hello Mobility hizmeti dağıtmak, çoğaltmayı etkinleştirmek ve yük devretme testi çalıştırmak belirtin.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-140">In hello Recovery Services vault, you specify hello replication source and target, set up hello configuration server, create a replication policy, deploy hello Mobility service, enable replication, and run a test failover.</span></span>
2. <span data-ttu-id="c8fb8-141">Makinelerin çoğaltılacağı hello Çoğaltma İlkesi ve bir başlangıç kopyasını hello veri uygun olarak çoğaltılmış tooAzure Depolama ' dir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-141">Machines replicate in accordance with hello replication policy, and an initial copy of hello data is replicated tooAzure storage.</span></span>
3. <span data-ttu-id="c8fb8-142">İlk çoğaltma sonlandırıldıktan sonra delta değişiklikleri tooAzure çoğaltmasını başlar.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-142">After initial replication finishes, replication of delta changes tooAzure begins.</span></span> <span data-ttu-id="c8fb8-143">Bir makine için izlenen değişiklikler bir .hrl dosyasında saklanır.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-143">Tracked changes for a machine are held in a .hrl file.</span></span>
    - <span data-ttu-id="c8fb8-144">Çoğaltma HTTPS 443 numaralı bağlantı noktasında hello yapılandırma sunucusuyla gelen çoğaltma yönetimi için iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-144">Replicating machines communicate with hello configuration server on port HTTPS 443 inbound, for replication management.</span></span>
    - <span data-ttu-id="c8fb8-145">Çoğaltılan makineler Gönder çoğaltma verileri toohello işlem sunucusu HTTPS 9443 bağlantı noktasına gelen (değiştirilmiş).</span><span class="sxs-lookup"><span data-stu-id="c8fb8-145">Replicating machines send replication data toohello process server on port HTTPS 9443 inbound (can be modified).</span></span>
    - <span data-ttu-id="c8fb8-146">Merhaba yapılandırma sunucusu Azure ile çoğaltma yönetimi HTTPS 443 giden bağlantı noktası üzerinden düzenler.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-146">hello configuration server orchestrates replication management with Azure over port HTTPS 443 outbound.</span></span>
    - <span data-ttu-id="c8fb8-147">Merhaba işlem sunucusu kaynak makinelerden verileri alan, en iyi duruma getirir ve bunu şifreler ve tooAzure depolama bağlantı noktası 443 üzerinden giden gönderir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-147">hello process server receives data from source machines, optimizes and encrypts it, and sends it tooAzure storage over port 443 outbound.</span></span>
    - <span data-ttu-id="c8fb8-148">Çoklu VM tutarlılığını etkinleştirmek, ardından hello çoğaltma grubundaki birbiriyle 20004 bağlantı noktası üzerinden iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-148">If you enable multi-VM consistency, then machines in hello replication group communicate with each other over port 20004.</span></span> <span data-ttu-id="c8fb8-149">Çoklu VM, birden çok makineyi yük devrettikleri zaman kilitlenmeyle tutarlı ve uygulamayla tutarlı kurtarma noktalarını paylaşan çoğaltma grupları halinde gruplandırdığınızda kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-149">Multi-VM is used if you group multiple machines into replication groups that share crash-consistent and app-consistent recovery points when they fail over.</span></span> <span data-ttu-id="c8fb8-150">Bu makineler çalışıyorsa yararlıdır hello aynı iş yükünü ve toobe tutarlı gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-150">This is useful if machines are running hello same workload and need toobe consistent.</span></span>
4. <span data-ttu-id="c8fb8-151">Trafiğidir çoğaltılmış tooAzure depolama ortak uç noktaları, üzerinde Internet hello.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-151">Traffic is replicated tooAzure storage public endpoints, over hello internet.</span></span> <span data-ttu-id="c8fb8-152">Alternatif olarak, Azure ExpressRoute [genel eşliğini](../expressroute/expressroute-circuit-peerings.md#public-peering) kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-152">Alternately, you can use Azure ExpressRoute [public peering](../expressroute/expressroute-circuit-peerings.md#public-peering).</span></span> <span data-ttu-id="c8fb8-153">Bir siteden siteye VPN bağlantısını bir şirket içi site tooAzure üzerinden trafik çoğaltma desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-153">Replicating traffic over a site-to-site VPN from an on-premises site tooAzure isn't supported.</span></span>


<span data-ttu-id="c8fb8-154">**Şekil 2: VMware tooAzure çoğaltma**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-154">**Figure 2: VMware tooAzure replication**</span></span>

![Gelişmiş](./media/vmware-walkthrough-architecture/v2a-architecture-henry.png)

## <a name="failover-and-failback-process"></a><span data-ttu-id="c8fb8-156">Yük devretme ve yeniden çalışma işlemi</span><span class="sxs-lookup"><span data-stu-id="c8fb8-156">Failover and failback process</span></span>

1. <span data-ttu-id="c8fb8-157">Yük devretme sınaması beklenen şekilde çalıştığını doğruladıktan sonra planlanmamış yük devretmeler tooAzure gerektiği gibi çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-157">After you verify that test failover is working as expected, you can run unplanned failovers tooAzure as required.</span></span> <span data-ttu-id="c8fb8-158">Planlanan yük devretme desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-158">Planned failover isn't supported.</span></span>
2. <span data-ttu-id="c8fb8-159">Üzerinde tek bir makine başarısız veya oluşturma [kurtarma planlarına](site-recovery-create-recovery-plans.md), birden çok VM üzerinden toofail.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-159">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md), toofail over multiple VMs.</span></span>
3. <span data-ttu-id="c8fb8-160">Yük devretme işlemini çalıştırdığınızda Azure’da çoğaltma sanal makineleri oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-160">When you run a failover, replica VMs are created in Azure.</span></span> <span data-ttu-id="c8fb8-161">Bir yük devretme toostart erişilirken hello iş yükü Azure VM hello çoğaltmasından uygulayın.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-161">You commit a failover toostart accessing hello workload from hello replica Azure VM.</span></span>
4. <span data-ttu-id="c8fb8-162">Birincil şirket içi siteniz yeniden kullanılabilir olduğunda siteyi yeniden çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-162">When your primary on-premises site is available again, you can fail back.</span></span> <span data-ttu-id="c8fb8-163">Bir yeniden çalışma altyapısını ayarlamak, hello makine hello ikincil site toohello birincil çoğaltma işlemi başlatma ve hello ikincil siteden planlanmamış bir yük devretme çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-163">You set up a failback infrastructure, start replicating hello machine from hello secondary site toohello primary, and run an unplanned failover from hello secondary site.</span></span> <span data-ttu-id="c8fb8-164">Bu yük devretme yürüttükten sonra veri arka şirket içi olur ve yeniden tooenable çoğaltma tooAzure gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-164">After you commit this failover, data will be back on-premises, and you need tooenable replication tooAzure again.</span></span> [<span data-ttu-id="c8fb8-165">Daha fazla bilgi</span><span class="sxs-lookup"><span data-stu-id="c8fb8-165">Learn more</span></span>](site-recovery-failback-azure-to-vmware.md)

<span data-ttu-id="c8fb8-166">Birkaç yeniden çalışma gereksinimi vardır:</span><span class="sxs-lookup"><span data-stu-id="c8fb8-166">There are a few failback requirements:</span></span>


- <span data-ttu-id="c8fb8-167">**Azure'da geçici işlem sunucusu**: toofail geri azure'dan yük devretme sonrasında istiyorsanız Azure toohandle çoğaltmadan bir işlem sunucusu olarak yapılandırılan bir Azure VM yukarı tooset gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-167">**Temporary process server in Azure**: If you want toofail back from Azure after failover you'll need tooset up an Azure VM configured as a process server, toohandle replication from Azure.</span></span> <span data-ttu-id="c8fb8-168">Yeniden çalışma sona erdikten sonra bu VM'yi silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-168">You can delete this VM after failback finishes.</span></span>
- <span data-ttu-id="c8fb8-169">**VPN bağlantısı**: hello Azure ağ toohello şirket içi siteden gerekir yeniden çalışma için bir VPN bağlantısı (veya Azure ExpressRoute) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-169">**VPN connection**: For failback you'll need a VPN connection (or Azure ExpressRoute) set up from hello Azure network toohello on-premises site.</span></span>
- <span data-ttu-id="c8fb8-170">**Ayrı şirket içi ana hedef sunucusu**: hello şirket içi ana hedef sunucusu yeniden çalışma işlemini yürütür.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-170">**Separate on-premises master target server**: hello on-premises master target server handles failback.</span></span> <span data-ttu-id="c8fb8-171">Hello ana hedef sunucusu varsayılan olarak hello yönetim sunucusunda yüklü, ancak daha fazla hacimli trafikte çalıştırma işlemini gerçekleştiriyorsanız bu amaç için bir ayrı şirket içi ana hedef sunucusu ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-171">hello master target server is installed by default on hello management server, but if you're failing back larger volumes of traffic you should set up a separate on-premises master target server for this purpose.</span></span>
- <span data-ttu-id="c8fb8-172">**Yeniden çalışma ilkesi**: tooreplicate geri tooyour şirket içi site, bir yeniden çalışma ilkesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-172">**Failback policy**: tooreplicate back tooyour on-premises site, you need a failback policy.</span></span> <span data-ttu-id="c8fb8-173">Bu ilke çoğaltma ilkenizi oluşturduğunuzda otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-173">This is automatically created when you created your replication policy.</span></span>
- <span data-ttu-id="c8fb8-174">**VMware altyapı**: geri başarısız olması tooan şirket içi VMware VM.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-174">**VMware infrastructure**: You must fail back tooan on-premises VMware VM.</span></span> <span data-ttu-id="c8fb8-175">Şirket içi fiziksel sunucuların tooAzure çoğaltıyorsanız bile bu, bir şirket içi VMware altyapı ihtiyacınız anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c8fb8-175">This means you need an on-premises VMware infrastructure, even if you're replicating on-premises physical servers tooAzure.</span></span>

<span data-ttu-id="c8fb8-176">**Şekil 3: VMware/fiziksel yeniden çalışma**</span><span class="sxs-lookup"><span data-stu-id="c8fb8-176">**Figure 3: VMware/physical failback**</span></span>

![Yeniden çalışma](./media/vmware-walkthrough-architecture/enhanced-failback.png)


## <a name="next-steps"></a><span data-ttu-id="c8fb8-178">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="c8fb8-178">Next steps</span></span>

<span data-ttu-id="c8fb8-179">Çok Git[2. adım: Önkoşullar ve sınırlamalar doğrulayın](vmware-walkthrough-prerequisites.md)</span><span class="sxs-lookup"><span data-stu-id="c8fb8-179">Go too[Step 2: Verify prerequisites and limitations](vmware-walkthrough-prerequisites.md)</span></span>
