---
title: "VMM bulutlarındaki Hyper-V sanal makineleri Azure Site Recovery ile Azure için çoğaltmayı etkinleştirme | Microsoft Docs"
description: "Azure'a çoğaltma için Azure Site Recovery hizmeti ile VMM bulutlarındaki Hyper-V sanal makineleri için etkinleştirmeyi açıklar"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 89a2c4fc-7e03-4a86-a2c0-52831ccebc1a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 96a817e43a830e836f2faa4603fc88ed9c0b1828
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="step-11-enable-replication-to-azure-for-hyper-v-vms-in-vmm-clouds"></a><span data-ttu-id="0033a-103">11. adım: VMM bulutlarındaki Hyper-V sanal makineleri Azure için çoğaltmayı etkinleştirin</span><span class="sxs-lookup"><span data-stu-id="0033a-103">Step 11: Enable replication to Azure for Hyper-V VMs in VMM clouds</span></span>

<span data-ttu-id="0033a-104">Bir çoğaltma ilkesi ayarladıktan sonra bu makalede System Center Virtual Machine Manager (VMM) bulutlarında yönetilen şirket içi Hyper-V sanal makineleri (VM'ler) için çoğaltmayı etkinleştirmek için kullanın), Azure, kullanarak [Azure Site Recovery](site-recovery-overview.md) Azure portalında hizmeti.</span><span class="sxs-lookup"><span data-stu-id="0033a-104">After you've set up a replication policy, use this article to enable replication for on-premises Hyper-V virtual machines (VMs) managed in System Center Virtual Machine Manager (VMM) clouds), to Azure, using the [Azure Site Recovery](site-recovery-overview.md) service in the Azure portal.</span></span>

<span data-ttu-id="0033a-105">POST açıklamaları ve soruları alt bu makalenin veya üzerinde [Azure kurtarma Hizmetleri Forumu](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="0033a-105">Post comments and questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="before-you-start"></a><span data-ttu-id="0033a-106">Başlamadan önce</span><span class="sxs-lookup"><span data-stu-id="0033a-106">Before you start</span></span>

<span data-ttu-id="0033a-107">Azure hesabınızda doğru olduğundan emin olun [izinleri](site-recovery-role-based-linked-access-control.md#permissions-required-to-enable-replication-for-new-virtual-machines)Azure VM'ler oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="0033a-107">Make sure your Azure account has the correct [permissions](site-recovery-role-based-linked-access-control.md#permissions-required-to-enable-replication-for-new-virtual-machines)to create Azure VMs.</span></span> <span data-ttu-id="0033a-108">[Daha fazla bilgi edinin](../active-directory/role-based-access-built-in-roles.md) Azure rol tabanlı erişim denetimi hakkında.</span><span class="sxs-lookup"><span data-stu-id="0033a-108">[Learn more](../active-directory/role-based-access-built-in-roles.md) about Azure role-based access control.</span></span>

## <a name="exclude-disks-from-replication"></a><span data-ttu-id="0033a-109">Diskleri çoğaltmanın dışında tutma</span><span class="sxs-lookup"><span data-stu-id="0033a-109">Exclude disks from replication</span></span>

<span data-ttu-id="0033a-110">Varsayılan olarak, bir makine üzerindeki tüm diskleri çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="0033a-110">By default all disks on a machine are replicated.</span></span> <span data-ttu-id="0033a-111">Diskleri çoğaltmanın dışında bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-111">You can exclude disks from replication.</span></span> <span data-ttu-id="0033a-112">Örneğin, geçici veriler veya her zaman bir makine yeniledi veri disklerini çoğaltmak istemeyebilirsiniz veya (örneğin pagefile.sys ya da SQL Server tempdb) uygulamasını yeniden başlatır.</span><span class="sxs-lookup"><span data-stu-id="0033a-112">For example you might not want to replicate disks with temporary data, or data that's refreshed each time a machine or application restarts (for example pagefile.sys or SQL Server tempdb).</span></span> [<span data-ttu-id="0033a-113">Daha fazla bilgi</span><span class="sxs-lookup"><span data-stu-id="0033a-113">Learn more</span></span>](site-recovery-exclude-disk.md)

## <a name="replicate-vms"></a><span data-ttu-id="0033a-114">Vm'lerini çoğaltma</span><span class="sxs-lookup"><span data-stu-id="0033a-114">Replicate VMs</span></span>

<span data-ttu-id="0033a-115">VM'ler için çoğaltma gibi etkinleştirin:</span><span class="sxs-lookup"><span data-stu-id="0033a-115">Enable replication for VMs as follows:</span></span>  

1. <span data-ttu-id="0033a-116">**2. Adım: Uygulama çoğaltma** > **Kaynak** seçeneklerine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-116">Click **Step 2: Replicate application** > **Source**.</span></span> <span data-ttu-id="0033a-117">Çoğaltmayı ilk kez etkinleştirdikten sonra ek makineler için çoğaltma işlemini etkinleştirmek istiyorsanız kasada **+Çoğalt**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-117">After you've enabled replication for the first time, click **+Replicate** in the vault to enable replication for additional machines.</span></span>

    ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication1.png)
2. <span data-ttu-id="0033a-119">**Kaynak** dikey penceresinde Hyper-V konaklarının bulunduğu VMM sunucusunu ve bulutu seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-119">In the **Source** blade, select the VMM server, and the cloud in which the Hyper-V hosts are located.</span></span> <span data-ttu-id="0033a-120">Daha sonra, **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-120">Then click **OK**.</span></span>

    ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication-source.png)
3. <span data-ttu-id="0033a-122">**Hedef** kısmında aboneliği, yük devretme sonrası dağıtım modelini ve çoğaltılan veriler için kullandığınız depolama hesabını seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-122">In **Target**, select the subscription, post-failover deployment model, and the storage account you're using for replicated data.</span></span>

    ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication-target.png)
4. <span data-ttu-id="0033a-124">Kullanmak istediğiniz depolama hesabını seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-124">Select the storage account you want to use.</span></span> <span data-ttu-id="0033a-125">Sahip olduğunuz hesaplardan farklı bir depolama hesabı kullanmak isterseniz [yeni bir hesap](#set-up-an-azure-storage-account) oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-125">If you want to use a different storage account than those you have, you can [create one](#set-up-an-azure-storage-account).</span></span> <span data-ttu-id="0033a-126">Çoğaltılan veriler için bir premium depolama hesabı kullanıyorsanız şirket içi verilerde gerçekleşen değişiklikleri yakalayan çoğaltma günlüklerini depolamak üzere ek bir standart depolama hesabı seçmeniz gerekir. Resource Manager kullanarak depolama hesabı oluşturmak için **Yeni oluştur**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-126">If you’re using a premium storage account for replicated data, you need to select  an additional standard storage account to store replication logs that capture ongoing changes to on-premises data.To create a storage account using the Resource Manager model click **Create new**.</span></span> <span data-ttu-id="0033a-127">Klasik modeli kullanarak bir depolama hesabı oluşturmak istiyorsanız bu işlemi [Azure portalından](../storage/common/storage-create-storage-account.md) gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="0033a-127">If you want to create a storage account using the classic model, do that [in the Azure portal](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="0033a-128">Daha sonra, **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-128">Then click **OK**.</span></span>
5. <span data-ttu-id="0033a-129">Yük devretme sonrasında oluşturulan Azure VM'lerinin bağlanacağı Azure ağını ve alt ağını seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-129">Select the Azure network and subnet to which Azure VMs will connect, when they're created after failover.</span></span> <span data-ttu-id="0033a-130">Koruma için seçtiğiniz tüm makinelere ağ ayarını uygulamak için **Seçili makineler için şimdi yapılandır**’ı seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-130">Select **Configure now for selected machines**, to apply the network setting to all machines you select for protection.</span></span> <span data-ttu-id="0033a-131">Her makine için Azure ağını ayrı ayrı seçmek üzere **Daha sonra yapılandır**'ı seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-131">Select **Configure later**, to select the Azure network per machine.</span></span> <span data-ttu-id="0033a-132">Sahip olduğunuz ağlardan farklı bir ağ kullanmak isterseniz [yeni bir ağ](#set-up-an-azure-network) oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-132">If you want to use a different network from those you have, you can [create one](#set-up-an-azure-network).</span></span> <span data-ttu-id="0033a-133">Resource Manager modelini kullanarak bir ağ oluşturmak için **Yeni oluştur**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-133">To create a network using the Resource Manager model click **Create new**.</span></span> <span data-ttu-id="0033a-134">Klasik modeli kullanarak bir ağ oluşturmak isterseniz bu işlemi [Azure portalından](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="0033a-134">If you want to create a network using the classic model, do that [in the Azure portal](../virtual-network/virtual-networks-create-vnet-classic-pportal.md).</span></span> <span data-ttu-id="0033a-135">Bir alt ağ (varsa) seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-135">Select a subnet if applicable.</span></span> <span data-ttu-id="0033a-136">Daha sonra, **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-136">Then click **OK**.</span></span>
6. <span data-ttu-id="0033a-137">**Sanal Makineler** > **Sanal makine seçin** seçeneklerine tıklayın ve çoğaltmak istediğiniz makineleri seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-137">In **Virtual Machines** > **Select virtual machines**, click and select each machine you want to replicate.</span></span> <span data-ttu-id="0033a-138">Yalnızca çoğaltmanın etkinleştirildiği makineleri seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-138">You can only select machines for which replication can be enabled.</span></span> <span data-ttu-id="0033a-139">Daha sonra, **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-139">Then click **OK**.</span></span>

    ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication5.png)

7. <span data-ttu-id="0033a-141">**Özellikler** > **Özellikleri yapılandır** seçeneklerinde, seçili VM'ler için işletme sistemini ve OS diskini seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-141">In **Properties** > **Configure properties**, select the operating system for the selected VMs, and the OS disk.</span></span>

    - <span data-ttu-id="0033a-142">Azure VM adının (hedef ad) [Azure sanal makine gereksinimlerine](site-recovery-support-matrix-to-azure.md#failed-over-azure-vm-requirements) uygun olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="0033a-142">Verify that the Azure VM name (target name) complies with [Azure virtual machine requirements](site-recovery-support-matrix-to-azure.md#failed-over-azure-vm-requirements).</span></span>   
    - <span data-ttu-id="0033a-143">Varsayılan olarak VM'nin tüm diskleri çoğaltma için seçilir ancak istemediklerinizin işaretini kaldırarak onları hariç tutabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-143">By default all the disks of the VM are selected for replication, but you can clear disks to exclude them.</span></span>

        - <span data-ttu-id="0033a-144">Çoğaltma bant genişliğini azaltmak için diskleri hariç tutmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-144">You might want to exclude disks to reduce replication bandwidth.</span></span> <span data-ttu-id="0033a-145">Örneğin geçici verilere veya bilgisayar ya da uygulama yeniden başlatıldığında yenilenen verilere (pagefile.sys veya Microsoft SQL Server tempdb gibi) sahip diskleri çoğaltmak istemeyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-145">For example, you might not want to replicate disks with temporary data, or data that's refreshed each time a machine or apps restarts (such as pagefile.sys or Microsoft SQL Server tempdb).</span></span> <span data-ttu-id="0033a-146">Diskin seçimini kaldırarak çoğaltma kapsamı dışında bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-146">You can exclude the disk from replication by unselecting the disk.</span></span>
        - <span data-ttu-id="0033a-147">Yalnızca temel diskler dışarıda bırakılabilir.</span><span class="sxs-lookup"><span data-stu-id="0033a-147">Only basic disks can be exclude.</span></span> <span data-ttu-id="0033a-148">İşletim sistemi diskleri dışarıda bırakılamaz.</span><span class="sxs-lookup"><span data-stu-id="0033a-148">You can't exclude OS disks.</span></span>
        - <span data-ttu-id="0033a-149">Dinamik diskleri dışarıda tutmamanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="0033a-149">We recommend that you don't exclude dynamic disks.</span></span> <span data-ttu-id="0033a-150">Site Recovery, konuk VM içerisindeki bir sanal sabit diskin temel mi yoksa dinamik mi olduğunu anlayamaz.</span><span class="sxs-lookup"><span data-stu-id="0033a-150">Site Recovery can't identify whether a virtual hard disk inside a guest VM is basic or dynamic.</span></span> <span data-ttu-id="0033a-151">Bağımlı dinamik birim disklerinin tümü hariç bırakılmazsa, korumalı dinamik disk VM yük devrinde başarısız olur ve diskteki verilere erişim sağlanamaz.</span><span class="sxs-lookup"><span data-stu-id="0033a-151">If all dependent dynamic volume disks aren't excluded, the protected dynamic disk will show as a failed disk when the VM fails over, and the data on that disk won't be accessible.</span></span>
        - <span data-ttu-id="0033a-152">Çoğaltmayı etkinleştirdikten sonra çoğaltma için disk ekleme veya kaldırma gerçekleştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-152">After replication is enabled, you can't add or remove disks for replication.</span></span> <span data-ttu-id="0033a-153">Disk eklemek veya dışlamak istiyorsanız, VM’nin korumasını devre dışı bırakmanız ve yeniden etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="0033a-153">If you want to add or exclude a disk, you need to disable protection for the VM, and then re-enable it.</span></span>
        - <span data-ttu-id="0033a-154">Azure'da el ile oluşturduğunuz diskler yeniden çalışır duruma getirilmez.</span><span class="sxs-lookup"><span data-stu-id="0033a-154">Disks you create manually in Azure aren't failed back.</span></span> <span data-ttu-id="0033a-155">Örneğin, üç disk için yük devretme gerçekleştirir ve ikisini doğrudan Azure sanal makinesinde oluşturursanız, yalnızca yük devretme gerçekleştirilen üç disk Azure'dan Hyper-V'ye çoğaltılarak yeniden çalışır hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="0033a-155">For example, if you fail over three disks, and create two directly in Azure VM, only the three disks which were failed over will be failed back from Azure to Hyper-V.</span></span> <span data-ttu-id="0033a-156">El ile oluşturulmuş diskleri yeniden çalışma veya Hyper-V'den Azure'a geri çoğaltma işlemine dahil edemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-156">You can't include disks created manually in failback, or in reverse replication from Hyper-V to Azure.</span></span>
        - <span data-ttu-id="0033a-157">Bir uygulamanın çalışması için gerekli olan bir diski hariç tutarsanız, Azure'a yük devretme gerçekleştirildikten sonra çoğaltılan uygulamanın çalışması için Azure'da el ile oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0033a-157">If you exclude a disk that's needed for an application to operate, after failover to Azure you need to create it manually in Azure, so that the replicated application can run.</span></span> <span data-ttu-id="0033a-158">Alternatif olarak makinenin yük devri sırasında diskin otomatik olarak oluşturulması için Azure otomasyonunu bir kurtarma planıyla tümleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-158">Alternatively, you could integrate Azure automation into a recovery plan, to create the disk during failover of the machine.</span></span>

    <span data-ttu-id="0033a-159">Değişiklikleri kaydetmek için **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-159">Click **OK** to save changes.</span></span> <span data-ttu-id="0033a-160">Daha sonra ek özellikleri ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-160">You can set additional properties later.</span></span>

    ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication6-with-exclude-disk.png)

8. <span data-ttu-id="0033a-162">**Çoğaltma ayarları** > **Çoğaltma ayarlarını yapılandır** seçeneklerinde, korumalı VM'lere uygulamak istediğiniz çoğaltma ilkesini seçin.</span><span class="sxs-lookup"><span data-stu-id="0033a-162">In **Replication settings** > **Configure replication settings**, select the replication policy you want to apply for the protected VMs.</span></span> <span data-ttu-id="0033a-163">Daha sonra, **Tamam**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="0033a-163">Then click **OK**.</span></span> <span data-ttu-id="0033a-164">**Çoğaltma ilkeleri** > ilke adı > **Ayarları Düzenle**’de çoğaltma ilkesini değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-164">You can modify the replication policy in **Replication policies** > policy name > **Edit Settings**.</span></span> <span data-ttu-id="0033a-165">Uyguladığınız değişiklikler, zaten çoğaltılmakta olan makinelere ve yeni makinelere uygulanır.</span><span class="sxs-lookup"><span data-stu-id="0033a-165">Changes you apply are used for machines that are already replicating, and new machines.</span></span>

   ![Çoğaltmayı etkinleştirme](./media/vmm-to-azure-walkthrough-enable-replication/enable-replication7.png)

<span data-ttu-id="0033a-167">**İşler** > **Site Recovery işleri** üzerinden **Korumayı Etkinleştir** işinin ilerleyişini izleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0033a-167">You can track progress of the **Enable Protection** job in **Jobs** > **Site Recovery jobs**.</span></span> <span data-ttu-id="0033a-168">**Korumayı Sonlandır** işi çalıştırıldıktan sonra makine yük devretme için hazırdır.</span><span class="sxs-lookup"><span data-stu-id="0033a-168">After the **Finalize Protection** job runs, the machine is ready for failover.</span></span>



## <a name="next-steps"></a><span data-ttu-id="0033a-169">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="0033a-169">Next steps</span></span>

<span data-ttu-id="0033a-170">Git [adım 12: yük devretme testi çalıştırma](vmm-to-azure-walkthrough-test-failover.md)</span><span class="sxs-lookup"><span data-stu-id="0033a-170">Go to [Step 12: Run a test failover](vmm-to-azure-walkthrough-test-failover.md)</span></span>
