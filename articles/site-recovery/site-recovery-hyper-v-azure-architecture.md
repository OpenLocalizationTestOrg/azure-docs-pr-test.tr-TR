---
title: "Hyper-V çoğaltma tooAzure Site Recovery işlerinde aaaHow mu? | Microsoft Belgeleri"
description: "Bu makalede, Hyper-V çoğaltmasının Azure Site Recovery’de nasıl çalıştığına dair genel bir bakış sağlanmaktadır"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/14/2017
ms.author: raynew
ROBOTS: NOINDEX, NOFOLLOW
redirect_url: site-recovery-architecture-hyper-v-to-azure
ms.openlocfilehash: e982806b4d6cdec2f71f82d8c73c17cc50ad3c33
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="how-does-hyper-v-replication-tooazure-work"></a><span data-ttu-id="23412-104">Hyper-V çoğaltma tooAzure nasıl çalışır?</span><span class="sxs-lookup"><span data-stu-id="23412-104">How does Hyper-V replication tooAzure work?</span></span>

<span data-ttu-id="23412-105">Bu makale toounderstand hello mimarisi ve Hyper-V çoğaltma tooAzure hello kullanarak iş akışları okuma [Azure Site Recovery](site-recovery-overview.md) hizmet.</span><span class="sxs-lookup"><span data-stu-id="23412-105">Read this article toounderstand hello architecture and workflows for Hyper-V replication tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="23412-106">Bu makalenin veya hello hello altındaki tüm yorumlar sonrası [Azure kurtarma Hizmetleri Forumu](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="23412-106">Post any comments at hello bottom of this article, or in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="23412-107">TooAzure aşağıdaki hello çoğaltabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="23412-107">You can replicate hello following tooAzure:</span></span>
- <span data-ttu-id="23412-108">**VMM ile Hyper-V**: System Center Virtual MAchine Manager (VMM) bulutlarında yönetilen şirket içi Hyper-V ana bilgisayarlarında yer alan VM'ler.</span><span class="sxs-lookup"><span data-stu-id="23412-108">**Hyper-V with VMM**: VMs located on on-premises Hyper-V hosts managed in  System Center Virtual MAchine Manager (VMM) clouds.</span></span> <span data-ttu-id="23412-109">Ana bilgisayarlar, [desteklenen herhangi bir işletim sistemini](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers) çalıştırıyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="23412-109">Hosts can be running any [supported operating system](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span> <span data-ttu-id="23412-110">[Hyper-V ve Azure tarafından desteklenen](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) herhangi bir konuk işletim sistemini çalıştıran Hyper-V VM’lerini çoğaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-110">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>
- <span data-ttu-id="23412-111">**VMM olmadan Hyper-V**: VMM bulutlarında yönetilmeyen Hyper-V ana bilgisayarlarında bulunan şirket içi VM’ler.</span><span class="sxs-lookup"><span data-stu-id="23412-111">**Hyper-V without VMM**: On-premises VMs located on Hyper-V hosts that aren't managed in VMM clouds.</span></span> <span data-ttu-id="23412-112">Konaklar hello hiçbirini çalıştırabilirsiniz [desteklenen işletim sistemleri](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span><span class="sxs-lookup"><span data-stu-id="23412-112">Hosts can run any of hello [supported operating systems](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span></span> <span data-ttu-id="23412-113">[Hyper-V ve Azure tarafından desteklenen](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) herhangi bir konuk işletim sistemini çalıştıran Hyper-V VM’lerini çoğaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-113">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="23412-114">Mimari bileşenler</span><span class="sxs-lookup"><span data-stu-id="23412-114">Architectural components</span></span>

<span data-ttu-id="23412-115">**Alan**</span><span class="sxs-lookup"><span data-stu-id="23412-115">**Area**</span></span> | <span data-ttu-id="23412-116">**Bileşen**</span><span class="sxs-lookup"><span data-stu-id="23412-116">**Component**</span></span> | <span data-ttu-id="23412-117">**Ayrıntılar**</span><span class="sxs-lookup"><span data-stu-id="23412-117">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="23412-118">**Azure**</span><span class="sxs-lookup"><span data-stu-id="23412-118">**Azure**</span></span> | <span data-ttu-id="23412-119">Azure’da bir Microsoft Azure hesabına, bir Azure depolama hesabına ve bir Azure ağına ihtiyacınız vardır.</span><span class="sxs-lookup"><span data-stu-id="23412-119">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="23412-120">Depolama ve ağ, Kaynak Yöneticisi tabanlı veya klasik hesaplar olabilir.</span><span class="sxs-lookup"><span data-stu-id="23412-120">Storage and network can be Resource Manager-based, or classic accounts.</span></span><br/><br/> <span data-ttu-id="23412-121">Çoğaltılan veriler hello depolama hesabında depolanır ve şirket içi sitenizdeki yük devretme durumunda Azure Vm'leri çoğaltılan hello verilerle oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="23412-121">Replicated data is stored in hello storage account, and Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="23412-122">Hello Azure VM'ler, oluşturuldukları zaman toohello Azure sanal ağı bağlayın.</span><span class="sxs-lookup"><span data-stu-id="23412-122">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="23412-123">**VMM sunucusu**</span><span class="sxs-lookup"><span data-stu-id="23412-123">**VMM server**</span></span> | <span data-ttu-id="23412-124">VMM bulutlarında bulunan Hyper-V ana bilgisayarları</span><span class="sxs-lookup"><span data-stu-id="23412-124">Hyper-V hosts located in VMM clouds</span></span> | <span data-ttu-id="23412-125">VMM bulutlarındaki Hyper-V konakları yönetiliyorsa, Kurtarma Hizmetleri kasası hello hello VMM sunucusunu kaydedin.</span><span class="sxs-lookup"><span data-stu-id="23412-125">If Hyper-V hosts are managed in VMM clouds, you register hello VMM server in hello Recovery Services vault.</span></span><br/><br/> <span data-ttu-id="23412-126">Merhaba VMM sunucusuna Azure ile Merhaba Site kurtarma sağlayıcısı tooorchestrate çoğaltma yükleyin.</span><span class="sxs-lookup"><span data-stu-id="23412-126">On hello VMM server you install hello Site Recovery Provider tooorchestrate replication with Azure.</span></span><br/><br/> <span data-ttu-id="23412-127">VM ağları tooconfigure ağ eşlemesi ayarlamanız ve mantıksal gerekir.</span><span class="sxs-lookup"><span data-stu-id="23412-127">You need logical and VM networks set up tooconfigure network mapping.</span></span> <span data-ttu-id="23412-128">Bir VM ağı hello bulutla ilişkilendirilen mantıksal ağ bağlantılı tooa olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="23412-128">A VM network should be linked tooa logical network that's associated with hello cloud.</span></span>
<span data-ttu-id="23412-129">**Hyper-V konağı**</span><span class="sxs-lookup"><span data-stu-id="23412-129">**Hyper-V host**</span></span> | <span data-ttu-id="23412-130">Hyper-V sunucuları VMM sunucusu ile veya sunucu olmadan dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="23412-130">Hyper-V servers can be deployed with or without VMM server.</span></span> | <span data-ttu-id="23412-131">VMM sunucusu yoksa üzerinden Site Recovery ile Merhaba konak tooorchestrate çoğaltma üzerindeki Site Recovery sağlayıcısı yüklü hello Internet hello.</span><span class="sxs-lookup"><span data-stu-id="23412-131">If there's no VMM server, hello Site Recovery Provider is installed on hello host tooorchestrate replication with Site Recovery over hello internet.</span></span> <span data-ttu-id="23412-132">Bir VMM sunucusu ise, hello sağlayıcısı üzerindeki ve hello konaktaki yüklenir.</span><span class="sxs-lookup"><span data-stu-id="23412-132">If there's a VMM server, hello Provider is installed on it, and not on hello host.</span></span><br/><br/> <span data-ttu-id="23412-133">Merhaba kurtarma Hizmetleri Aracısı hello konak toohandle veri çoğaltmayı yüklenir.</span><span class="sxs-lookup"><span data-stu-id="23412-133">hello Recovery Services agent is installed on hello host toohandle data replication.</span></span><br/><br/> <span data-ttu-id="23412-134">Merhaba sağlayıcısı ve hello Aracısı gelen iletişimler güvenli ve şifrelidir.</span><span class="sxs-lookup"><span data-stu-id="23412-134">Communications from both hello Provider and hello agent are secure and encrypted.</span></span> <span data-ttu-id="23412-135">Azure depolama alanında çoğaltılan veriler de şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="23412-135">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="23412-136">**Hyper-V VM’leri**</span><span class="sxs-lookup"><span data-stu-id="23412-136">**Hyper-V VMs**</span></span> | <span data-ttu-id="23412-137">Hello Hyper-V konak sunucusunda bir veya daha fazla VM gerekir.</span><span class="sxs-lookup"><span data-stu-id="23412-137">You need one or more VMs on hello Hyper-V host server.</span></span> | <span data-ttu-id="23412-138">Hiçbir şey Vm'lere yüklü tooexplicitly gerekiyor</span><span class="sxs-lookup"><span data-stu-id="23412-138">Nothing needs tooexplicitly installed on VMs</span></span>

## <a name="deployment-steps"></a><span data-ttu-id="23412-139">Dağıtım adımları</span><span class="sxs-lookup"><span data-stu-id="23412-139">Deployment steps</span></span>

1. <span data-ttu-id="23412-140">**Azure**: Azure bileşenleri hello ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="23412-140">**Azure**: You set up hello Azure components.</span></span> <span data-ttu-id="23412-141">Site Recovery dağıtımına başlamadan önce depolama ve ağ hesapları ayarlamanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="23412-141">We recommend you set up storage and network accounts before you begin Site Recovery deployment.</span></span>
2. <span data-ttu-id="23412-142">**Kasa**: Site Recovery için bir Kurtarma Hizmetleri kasası oluşturun ve kaynak ile hedef ayarlarını yapılandırma, bir çoğaltma ilkesi ayarlama ve çoğaltmayı etkinleştirilme de dahil olmak üzere kasa ayarlarını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="23412-142">**Vault**: You create a Recovery Services vault for Site Recovery, and configure vault settings, including configuring source and target settings, setting up a replication policy, and enabling replication.</span></span>
3. <span data-ttu-id="23412-143">**Kaynak ve hedef**:</span><span class="sxs-lookup"><span data-stu-id="23412-143">**Source and target**:</span></span>
    - <span data-ttu-id="23412-144">**VMM bulutlarındaki Hyper-V konakları**: parçası olarak, kaynak ayarlarını belirtme, indirin ve hello Azure Site Recovery sağlayıcısı hello VMM sunucusunu ve her Hyper-V ana bilgisayarda hello Azure kurtarma Hizmetleri aracısını yükleyin.</span><span class="sxs-lookup"><span data-stu-id="23412-144">**Hyper-V hosts in VMM clouds**: As part of specifying source settings, you download and install hello Azure Site Recovery Provider on hello VMM server, and hello Azure Recovery Services agent on each Hyper-V host.</span></span> <span data-ttu-id="23412-145">Merhaba kaynak hello VMM sunucusu olacaktır.</span><span class="sxs-lookup"><span data-stu-id="23412-145">hello source will be hello VMM server.</span></span> <span data-ttu-id="23412-146">Merhaba, Azure hedefidir.</span><span class="sxs-lookup"><span data-stu-id="23412-146">hello target is Azure.</span></span>
    - <span data-ttu-id="23412-147">Hyper-V konakları VMM olmadan: kaynak ayarları belirttiğinizde, yükleyip hello sağlayıcı ve aracı her Hyper-V ana bilgisayarda.</span><span class="sxs-lookup"><span data-stu-id="23412-147">Hyper-V hosts without VMM: When you specify source settings, you download and install hello Provider and agent on each Hyper-V host.</span></span> <span data-ttu-id="23412-148">Dağıtımı sırasında Hyper-V siteye hello ana bilgisayarları toplayın ve bu site hello kaynağı olarak belirtin.</span><span class="sxs-lookup"><span data-stu-id="23412-148">During deployment you gather hello hosts into a Hyper-V site, and specify this site as hello source.</span></span> <span data-ttu-id="23412-149">Merhaba, Azure hedefidir.</span><span class="sxs-lookup"><span data-stu-id="23412-149">hello target is Azure.</span></span>

    <span data-ttu-id="23412-150">![Hyper-V/VMM çoğaltma tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![Hyper-V sitesi çoğaltma tooAzure](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span><span class="sxs-lookup"><span data-stu-id="23412-150">![Hyper-V/VMM replication tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![Hyper-V site replication tooAzure](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span></span>


4. <span data-ttu-id="23412-151">**Çoğaltma İlkesi**: hello Hyper-V sitesi veya VMM bulutu için bir çoğaltma ilkesi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="23412-151">**Replication policy**: You create a replication policy for hello Hyper-V site or VMM cloud.</span></span> <span data-ttu-id="23412-152">Merhaba, uygulanan tooall VM'ler hello site veya Bulut ana bilgisayar üzerindeki ilkesidir.</span><span class="sxs-lookup"><span data-stu-id="23412-152">hello policy is applied tooall VMs located on hosts in hello site or cloud.</span></span>
5. <span data-ttu-id="23412-153">**Çoğaltmayı etkinleştir**: Hyper-V VM’leri için çoğaltmayı etkinleştir.</span><span class="sxs-lookup"><span data-stu-id="23412-153">**Enable replication**: You enable replication for Hyper-V VMs.</span></span> <span data-ttu-id="23412-154">İlk çoğaltma hello Çoğaltma İlkesi ayarlarına uygun şekilde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="23412-154">Initial replication occurs in accordance with hello replication policy settings.</span></span> <span data-ttu-id="23412-155">Veri değişiklikleri izlenir ve delta değişiklikleri tooAzure çoğaltmasını hello ilk çoğaltma sonlandırıldıktan sonra başlar.</span><span class="sxs-lookup"><span data-stu-id="23412-155">Data changes are tracked, and replication of delta changes tooAzure begins after hello initial replication finishes.</span></span> <span data-ttu-id="23412-156">Bir öğe için izlenen değişiklikler bir .hrl dosyasında saklanır.</span><span class="sxs-lookup"><span data-stu-id="23412-156">Tracked changes for an item are held in a .hrl file.</span></span>
6. <span data-ttu-id="23412-157">**Yük devretme sınamasını**: bir test yük devretme toomake her şeyi çalıştığını beklendiği gibi emin çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="23412-157">**Test failover**:  You run a test failover toomake sure everything's working as expected.</span></span>

<span data-ttu-id="23412-158">Dağıtım hakkında daha fazla bilgi edinin:</span><span class="sxs-lookup"><span data-stu-id="23412-158">Learn more about deployment:</span></span>
- [<span data-ttu-id="23412-159">Hyper-V VM çoğaltma tooAzure - VMM ile kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="23412-159">Get started with Hyper-V VM replication tooAzure - with VMM</span></span>](site-recovery-vmm-to-azure.md)
- [<span data-ttu-id="23412-160">Hyper-V VM çoğaltma tooAzure - VMM olmadan kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="23412-160">Get started with Hyper-V VM replication tooAzure - without VMM</span></span>](site-recovery-hyper-v-site-to-azure.md)

## <a name="hyper-v-replication-workflow"></a><span data-ttu-id="23412-161">Hyper-V çoğaltma iş akışı</span><span class="sxs-lookup"><span data-stu-id="23412-161">Hyper-V replication workflow</span></span>

### <a name="enable-protection"></a><span data-ttu-id="23412-162">Korumayı etkinleştir</span><span class="sxs-lookup"><span data-stu-id="23412-162">Enable protection</span></span>

1. <span data-ttu-id="23412-163">Hyper-V sanal makine için koruma etkinleştirildikten sonra Azure portalına veya şirket içi, hello hello **korumayı etkinleştir** başlatır.</span><span class="sxs-lookup"><span data-stu-id="23412-163">After you enable protection for a Hyper-V VM, in hello Azure portal or on-premises, hello **Enable protection** starts.</span></span>
2. <span data-ttu-id="23412-164">Merhaba iş o hello makine hello çağırmadan önce önkoşulları ile uyumlu denetler [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), yapılandırdığınız hello ayarlarla çoğaltma tooset.</span><span class="sxs-lookup"><span data-stu-id="23412-164">hello job checks that hello machine complies with prerequisites, before invoking hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset up replication with hello settings you've configured.</span></span>
3. <span data-ttu-id="23412-165">Merhaba işini hello çağırarak ilk çoğaltmayı başlatır [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) yöntemi, tam bir VM çoğaltmasını tooinitialize ve gönderme hello sanal makinenin sanal diskleri tooAzure.</span><span class="sxs-lookup"><span data-stu-id="23412-165">hello job starts initial replication by invoking hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, tooinitialize a full VM replication, and send hello VM's virtual disks tooAzure.</span></span>
4. <span data-ttu-id="23412-166">Merhaba hello işinde izleyebilirsiniz **işleri** sekmesi.      ![İşler listesi](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Korumayı etkinleştir ayrıntıları](media/site-recovery-hyper-v-azure-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="23412-166">You can monitor hello job in hello **Jobs** tab.      ![Jobs list](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Enable protection drill down](media/site-recovery-hyper-v-azure-architecture/image2.png)</span></span>

### <a name="initial-replication"></a><span data-ttu-id="23412-167">İlk çoğaltma</span><span class="sxs-lookup"><span data-stu-id="23412-167">Initial replication</span></span>

1. <span data-ttu-id="23412-168">İlk çoğaltma tetiklendiğinde bir [Hyper-V VM anlık görüntüsü](https://technet.microsoft.com/library/dd560637.aspx) alınır.</span><span class="sxs-lookup"><span data-stu-id="23412-168">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="23412-169">Tüm kopyalanan tooAzure oluncaya kadar sanal sabit diskler çoğaltılır ' dir.</span><span class="sxs-lookup"><span data-stu-id="23412-169">Virtual hard disks are replicated one by one until they're all copied tooAzure.</span></span> <span data-ttu-id="23412-170">Merhaba VM boyutuna bağlı olarak uzun sürebilir ve ağ bant genişliği.</span><span class="sxs-lookup"><span data-stu-id="23412-170">It could take a while, depending on hello VM size, and network bandwidth.</span></span> <span data-ttu-id="23412-171">toooptimize, ağ kullanımınızı bkz [nasıl toomanage tooAzure koruma ağ bant genişliği kullanımını içi](https://support.microsoft.com/kb/3056159).</span><span class="sxs-lookup"><span data-stu-id="23412-171">toooptimize your network usage, see [How toomanage on-premises tooAzure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="23412-172">İlk çoğaltma işlemi devam ederken disk değişimi meydana gelirse hello Hyper-V çoğaltma çoğaltma İzleyicisi bu değişiklikleri Hyper-V çoğaltma günlükleri (.hrl) izler.</span><span class="sxs-lookup"><span data-stu-id="23412-172">If disk changes occur while initial replication is in progress, hello Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="23412-173">Bu dosyalar hello bulunur hello diskleri aynı klasöre.</span><span class="sxs-lookup"><span data-stu-id="23412-173">These files are located in hello same folder as hello disks.</span></span> <span data-ttu-id="23412-174">Her diskin toosecondary depolama gönderilecek bir ilişkili .hrl dosyası vardır.</span><span class="sxs-lookup"><span data-stu-id="23412-174">Each disk has an associated .hrl file that will be sent toosecondary storage.</span></span>
4. <span data-ttu-id="23412-175">ilk çoğaltma işlemi devam ederken hello anlık görüntü ve günlük dosyalarının disk kaynaklarını tüketebilir.</span><span class="sxs-lookup"><span data-stu-id="23412-175">hello snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="23412-176">Merhaba ilk çoğaltma tamamlandığında hello VM anlık görüntüsü silinir.</span><span class="sxs-lookup"><span data-stu-id="23412-176">When hello initial replication finishes, hello VM snapshot is deleted.</span></span> <span data-ttu-id="23412-177">Değişim diski değişiklikleri hello günlüğünde eşitlenmesi ve birleştirilmiş toohello üst disk var.</span><span class="sxs-lookup"><span data-stu-id="23412-177">Delta disk changes in hello log are synchronized and merged toohello parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="23412-178">Korumayı sonlandırma</span><span class="sxs-lookup"><span data-stu-id="23412-178">Finalize protection</span></span>

1. <span data-ttu-id="23412-179">Merhaba ilk çoğaltma, hello bittikten sonra **hello sanal makinede korumayı Sonlandır** işi, ağ ve diğer çoğaltma sonrası ayarlarını hello sanal makine korunuyor böylece yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="23412-179">After hello initial replication finishes, hello **Finalize protection on hello virtual machine** job configures network and other post-replication settings, so that hello virtual machine is protected.</span></span>
    <span data-ttu-id="23412-180">![Korumayı sonlandır işi](media/site-recovery-hyper-v-azure-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="23412-180">![Finalize protection job](media/site-recovery-hyper-v-azure-architecture/image3.png)</span></span>
2. <span data-ttu-id="23412-181">TooAzure çoğaltıyorsanız, böylece yük devretme için hazır tootweak hello ayarları hello sanal makine için gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="23412-181">If you're replicating tooAzure, you might need tootweak hello settings for hello virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="23412-182">Bu noktada, her şeyin beklendiği gibi çalıştığını test yük devretme toocheck çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-182">At this point you can run a test failover toocheck everything is working as expected.</span></span>

### <a name="delta-replication"></a><span data-ttu-id="23412-183">Değişim çoğaltması</span><span class="sxs-lookup"><span data-stu-id="23412-183">Delta replication</span></span>

1. <span data-ttu-id="23412-184">Merhaba ilk çoğaltma sonrasında delta eşitleme, çoğaltma ayarlarına uygun şekilde başlar.</span><span class="sxs-lookup"><span data-stu-id="23412-184">After hello initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="23412-185">Merhaba Hyper-V çoğaltma çoğaltma İzleyicisi Merhaba değişiklikleri tooa sanal sabit disk .hrl dosyası izler.</span><span class="sxs-lookup"><span data-stu-id="23412-185">hello Hyper-V Replica Replication Tracker tracks hello changes tooa virtual hard disk as .hrl files.</span></span> <span data-ttu-id="23412-186">Çoğaltma için yapılandırılmış her diskin ilişkili bir .hrl dosyası vardır.</span><span class="sxs-lookup"><span data-stu-id="23412-186">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="23412-187">İlk çoğaltma tamamlandıktan sonra bu günlük toohello müşterinin depolama hesabı gönderilir.</span><span class="sxs-lookup"><span data-stu-id="23412-187">This log is sent toohello customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="23412-188">Bir günlük transit tooAzure olduğunda, hello değişiklikler hello birincil diski başka bir günlük dosyasında, hello izlenir aynı dizin.</span><span class="sxs-lookup"><span data-stu-id="23412-188">When a log is in transit tooAzure, hello changes in hello primary disk are tracked in another log file, in hello same directory.</span></span>
3. <span data-ttu-id="23412-189">Başlangıç ve değişim çoğaltma sırasında VM hello hello VM görünüm izleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-189">During initial and delta replication, you can monitor hello VM in hello VM view.</span></span> <span data-ttu-id="23412-190">[Daha fazla bilgi edinin](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="23412-190">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="replication-synchronization"></a><span data-ttu-id="23412-191">Çoğaltma eşitleme</span><span class="sxs-lookup"><span data-stu-id="23412-191">Replication synchronization</span></span>

1. <span data-ttu-id="23412-192">Değişim çoğaltması başarısız olursa ve bant genişliği ile zaman açısından tam çoğaltma maliyetli olacaksa, bir VM yeniden eşitleme için işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="23412-192">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="23412-193">Merhaba .hrl dosyası hello disk boyutunun % 50 ulaştıysanız, örneğin, ardından hello VM yeniden eşitleme için işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="23412-193">For example, if hello .hrl files reach 50% of hello disk size, then hello VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="23412-194">Yeniden eşitleme hello hello kaynak ve hedef sanal makine sağlama bilgi işlem ve yalnızca hello değişim verileri gönderme gönderilen veri miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="23412-194">Resynchronization minimizes hello amount of data sent by computing checksums of hello source and target virtual machines, and sending only hello delta data.</span></span> <span data-ttu-id="23412-195">Yeniden eşitleme, kaynak ve hedef dosyaların sabit öbeklere bölündüğü bir sabit blok kümeleme algoritması kullanır.</span><span class="sxs-lookup"><span data-stu-id="23412-195">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="23412-196">Her bir öbeğin sağlama oluşturulur ve hello kaynak gerek toobe uygulanan toohello hedeften engeller toodetermine karşılaştırılan.</span><span class="sxs-lookup"><span data-stu-id="23412-196">Checksums for each chunk are generated and then compared toodetermine which blocks from hello source need toobe applied toohello target.</span></span>
3. <span data-ttu-id="23412-197">Yeniden eşitleme sona erdikten sonra, normal değişim çoğaltması devam edecektir.</span><span class="sxs-lookup"><span data-stu-id="23412-197">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="23412-198">Varsayılan olarak yeniden eşitleme ofis saatleri dışında otomatik olarak zamanlanan toorun olmakla birlikte, bir sanal makineyi el ile eşitleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-198">By default resynchronization is scheduled toorun automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="23412-199">Örneğin, bir ağ kesintisi veya başka bir kesinti oluşursa, yeniden eşitlemeyi devam ettirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23412-199">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="23412-200">toodo hello portal Bu, select hello VM > **eşitlemek**.</span><span class="sxs-lookup"><span data-stu-id="23412-200">toodo this, select hello VM in hello portal > **Resynchronize**.</span></span>

    ![El ile yeniden eşitleme](media/site-recovery-hyper-v-azure-architecture/image4.png)


### <a name="retries"></a><span data-ttu-id="23412-202">Yeniden deneme sayısı</span><span class="sxs-lookup"><span data-stu-id="23412-202">Retries</span></span>

<span data-ttu-id="23412-203">Bir çoğaltma hatası meydana gelirse, yerleşik yeniden deneme işlevi vardır.</span><span class="sxs-lookup"><span data-stu-id="23412-203">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="23412-204">Bu mantık iki kategoride sınıflandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="23412-204">This logic can be classified into two categories:</span></span>

<span data-ttu-id="23412-205">**Kategori**</span><span class="sxs-lookup"><span data-stu-id="23412-205">**Category**</span></span> | <span data-ttu-id="23412-206">**Ayrıntılar**</span><span class="sxs-lookup"><span data-stu-id="23412-206">**Details**</span></span>
--- | ---
<span data-ttu-id="23412-207">**Kurtarılamaz hatalar**</span><span class="sxs-lookup"><span data-stu-id="23412-207">**Non-recoverable errors**</span></span> | <span data-ttu-id="23412-208">Yeniden deneme yapılmaya çalışılmaz.</span><span class="sxs-lookup"><span data-stu-id="23412-208">No retry is attempted.</span></span> <span data-ttu-id="23412-209">VM durumu **Kritik** olacaktır ve yönetici müdahalesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="23412-209">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="23412-210">Bu hataların örnekler: VHD zinciri; bozuk Geçersiz durum hello çoğaltma VM için; Ağ kimlik doğrulama hataları: Yetkilendirme hataları; VM hataları (tek başına Hyper-V sunucuları için) bulunamadı</span><span class="sxs-lookup"><span data-stu-id="23412-210">Examples of these errors include: broken VHD chain; Invalid state for hello replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="23412-211">**Kurtarılabilir hatalar**</span><span class="sxs-lookup"><span data-stu-id="23412-211">**Recoverable errors**</span></span> | <span data-ttu-id="23412-212">Yeniden deneme bir üstel geri hello yeniden deneme aralığı 1, 2, 4, 8 ilk denemede hello hello başından ve 10 dakika artan dışı kullanarak, her bir çoğaltma aralığı oluşur.</span><span class="sxs-lookup"><span data-stu-id="23412-212">Retries occur every replication interval, using an exponential back-off that increases hello retry interval from hello start of hello first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="23412-213">Hata devam ederse, 30 dakikada bir yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="23412-213">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="23412-214">Örnekler şunlardır: ağ hataları; düşük disk hataları; yetersiz bellek durumları</span><span class="sxs-lookup"><span data-stu-id="23412-214">Examples include: network errors; low disk  errors; low memory conditions</span></span> |

## <a name="protection-and-recovery-lifecycle"></a><span data-ttu-id="23412-215">Koruma ve kurtarma yaşam döngüsü</span><span class="sxs-lookup"><span data-stu-id="23412-215">Protection and recovery lifecycle</span></span>

![iş akışı](./media/site-recovery-components/arch-hyperv-azure-workflow.png)

## <a name="next-steps"></a><span data-ttu-id="23412-217">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="23412-217">Next steps</span></span>

- [<span data-ttu-id="23412-218">Dağıtım önkoşullarını denetleme</span><span class="sxs-lookup"><span data-stu-id="23412-218">Check deployment prerequisites</span></span>](site-recovery-prereq.md)
- <span data-ttu-id="23412-219">Aşağıdakilerle sorun giderme:</span><span class="sxs-lookup"><span data-stu-id="23412-219">Troubleshoot with:</span></span>
    - [<span data-ttu-id="23412-220">Koruma izleme ve sorun giderme</span><span class="sxs-lookup"><span data-stu-id="23412-220">Monitor and troubleshoot protection</span></span>](site-recovery-monitoring-and-troubleshooting.md)
    - [<span data-ttu-id="23412-221">Microsoft destekten yardım</span><span class="sxs-lookup"><span data-stu-id="23412-221">Help from Microsoft support</span></span>](site-recovery-monitoring-and-troubleshooting.md#reach-out-for-microsoft-support)
    - [<span data-ttu-id="23412-222">Genel sorunlar ve çözümleri</span><span class="sxs-lookup"><span data-stu-id="23412-222">Common errors and resolutions</span></span>](site-recovery-monitoring-and-troubleshooting.md#common-azure-site-recovery-errors-and-their-resolutions)
