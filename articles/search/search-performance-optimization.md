---
title: "Azure arama performans ve en iyi duruma getirme konuları | Microsoft Docs"
description: "Azure Search performansı ayarlamak ve en iyi ölçeği yapılandırın"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: f4e371fc16bc57e6963f1ec51c0ea864fa568f0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="0b5c9-103">Azure arama performans ve en iyi duruma getirme konuları</span><span class="sxs-lookup"><span data-stu-id="0b5c9-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="0b5c9-104">Harika arama deneyimi, birçok mobil için başarı ve web uygulamaları için bir anahtardır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-104">A great search experience is a key to success for many mobile and web applications.</span></span> <span data-ttu-id="0b5c9-105">Gayrimenkul araba Pazar çevrimiçi katalog için kullanılan için hızlı arama ve ilgili sonuçlar müşteri deneyimini etkiler.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-105">From real estate, to used car marketplaces to online catalogs, fast search and relevant results will affect the customer experience.</span></span> <span data-ttu-id="0b5c9-106">Bu belge, ölçeklenebilirlik, karmaşık gereksinimlerine Gelişmiş senaryolar için özellikle Azure Search dışında en çok dilli alma için en iyi uygulamaları destekleyen Bul Yardım veya özel bir derecelendirme yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-106">This document is intended to help you discover best practices for how to get the most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="0b5c9-107">Ayrıca, bu belgede iç Ayrıntılar özetlemektedir ve gerçek müşteri uygulamalarında etkili yaklaşımlar kapsar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="0b5c9-108">Performans ve ölçek arama hizmetleri için ayarlama</span><span class="sxs-lookup"><span data-stu-id="0b5c9-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="0b5c9-109">Biz tüm arama motorları Bing ve Google ve bunlar sunar yüksek performans gibi için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-109">We are all used to search engines such as Bing and Google and the high performance they offer.</span></span>  <span data-ttu-id="0b5c9-110">Sonuç olarak, müşteriler arama etkin web veya mobil uygulama kullandığınızda, benzer performans özellikleri istedikleri.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="0b5c9-111">İçin arama performansı en iyi duruma getirme, en iyi yaklaşımın tamamlamak ve sonuçları döndüren bir sorgu gereken süredir gecikme üzerinde odaklanmaya biridir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-111">When optimizing for search performance, one of the best approaches is to focus on latency, which is the time a query takes to complete and return results.</span></span>  <span data-ttu-id="0b5c9-112">İçin arama gecikme süresini en iyi duruma getirme zaman için önemlidir:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="0b5c9-113">Bir hedef gecikme (veya en fazla süreyi), tipik bir arama isteği tamamlamak için yapması gereken seçin.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-113">Pick a target latency (or maximum amount of time) that a typical search request should take to complete.</span></span>
2. <span data-ttu-id="0b5c9-114">Oluşturun ve bu gecikme oranları ölçmek için gerçekçi bir veri kümesi ile arama hizmetinizi karşı gerçek bir iş yükü test edin.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-114">Create and test a real workload against your search service with a realistic dataset to measure these latency rates.</span></span>
3. <span data-ttu-id="0b5c9-115">Sorgular (QPS) saniyede az sayıda başlayın ve sorgu gecikmesi tanımlanan hedef gecikme düşene kadar testinde yürütülen numarası büyümeye devam eder.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-115">Start with a low number of queries per second (QPS) and continue to increase the number executed in the test until the query latency drops below the defined target latency.</span></span>  <span data-ttu-id="0b5c9-116">Uygulamanızın kullanımını büyüdükçe için ölçek planlamanıza yardımcı olması için önemli bir Kıyaslama budur.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-116">This is an important benchmark to help you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="0b5c9-117">Mümkün olduğunda, HTTP bağlantılarını yeniden kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="0b5c9-118">Azure Search .NET SDK'sı kullanıyorsanız, bu örneğini yeniden gelir veya [Searchındexclient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) örneği ve REST API kullanıyorsanız, tek bir HttpClient yeniden kullanmamalısınız.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-118">If you are using the Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using the REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="0b5c9-119">Bunlar oluşturulurken test iş yükleri, Azure Search göz önünde bulundurmanız bazı özellikleri vardır:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-119">While creating these test workloads, there are some characteristics of Azure Search to keep in mind:</span></span>

1. <span data-ttu-id="0b5c9-120">Azure Search hizmetinizin kullanılabilir kaynakları çok, aynı anda birçok arama sorgular için anında iletme için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-120">It is possible to push so many search queries at one time, that the resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="0b5c9-121">Bu durumda, HTTP 503 yanıt kodları görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="0b5c9-122">Bu nedenle, daha fazla arama istekleri ekledikçe gecikme oranları farklılıkları görmek için arama istekleri çeşitli aralıklarıyla başlatmak en iyisidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-122">For this reason, it is best to start with various ranges of search requests to see the differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="0b5c9-123">Azure Search içerik karşıya genel performans ve Azure Search Hizmeti gecikme etkiler.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-123">Uploading of content to Azure Search will impact the overall performance and latency of the Azure Search service.</span></span>  <span data-ttu-id="0b5c9-124">Kullanıcıların aramaları gerçekleştirirken veri göndermesini bekliyorsanız, bu iş yükünü hesaba testlerinizde almanız önemlidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-124">If you expect to send data while users are performing searches, it is important to take this workload into account in your tests.</span></span>
3. <span data-ttu-id="0b5c9-125">Her arama sorgusu aynı performans düzeylerinde gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-125">Not every search query will perform at the same performance levels.</span></span>  <span data-ttu-id="0b5c9-126">Örneğin, bir belge arama veya arama öneri genellikle çok sayıda modelleri ve filtreleri içeren bir sorgu daha hızlı gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="0b5c9-127">Testlerinizi oluştururken dikkate görmeyi beklediğiniz çeşitli sorguları olabilmesi en iyisidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-127">It is best to take the various queries you expect to see into account when building your tests.</span></span>  
4. <span data-ttu-id="0b5c9-128">Arama istekleri çeşitlemesi önemlidir, çünkü aynı arama istekleri sürekli olarak çalıştırırsanız verileri önbelleğe alma daha farklı bir sorgu ayarlayabilir daha görüntü daha iyi performans sağlamak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-128">Variation of search requests is important because if you continually execute the same search requests, caching of data will start to make performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="0b5c9-129">[Visual Studio Yük testi](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) , kıyaslama gerçekleştirmek için gerçekten iyi bir yöntem testleri, Azure arama sorguları yürütmek için gereken HTTP isteklerini yürütmek üzere verdiğinden ve istekleri paralelleştirme sağlar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way to perform your benchmark tests as it allows you to execute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="0b5c9-130">Azure Search yüksek sorgu hızları için ölçekleme ve istekleri kısıtlanan</span><span class="sxs-lookup"><span data-stu-id="0b5c9-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="0b5c9-131">Çok fazla daraltılmış isteklerini almak ya da hedef gecikme ücretlerinizi artırılmış sorgu yük aşan gecikme oranları iki yoldan biriyle azaltmak için arayabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look to decrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="0b5c9-132">**Artış çoğaltmaları:** Yük Dengeleme isteklerini birden çok kopya karşı Azure Search izin vererek, verilerin bir kopyasını bir çoğaltma gibidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search to load balance requests against the multiple copies.</span></span>  <span data-ttu-id="0b5c9-133">Tüm Yük Dengeleme ve çoğaltmalar arasında verileri çoğaltmasını Azure arama tarafından yönetilir ve herhangi bir zamanda hizmetiniz için ayrılan çoğaltmaların sayısı değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter the number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="0b5c9-134">Standard arama hizmeti olarak 12 çoğaltmaları ve temel arama hizmeti 3 yinelemede kadar ayırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-134">You can allocate up to 12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="0b5c9-135">Çoğaltmaları olabilir herhangi birinden ayarlanmış [Azure portal](search-create-service-portal.md) veya [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-135">Replicas can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="0b5c9-136">**Artış arama katmanı:** Azure arama geldiğinde bir [katmanları sayısı](https://azure.microsoft.com/pricing/details/search/) ve bu katmanların her çeşitli performans düzeylerini sunar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="0b5c9-137">Bazı durumlarda bile çıkışı çoğaltmaları kullanımının zaman bulunduğunuzu katmanı yeterince düşük gecikme süresi oranları sağlayamayacağını çok fazla sayıda sorgular olabilir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-137">In some cases, you may have so many queries that the tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.</span></span>  <span data-ttu-id="0b5c9-138">Bu durumda, bir çok sayıda belgeleri ve son derece yüksek sorgu iş yükleri ile senaryoları için uygundur Azure arama S3 katmanı gibi daha yüksek arama katmanı yararlanarak göz önünde bulundurun isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-138">In this case, you may want to consider leveraging one of the higher search tiers such as the Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="0b5c9-139">Azure Search yavaş tek tek sorgular için ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="0b5c9-139">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="0b5c9-140">Başka bir nedeni neden gecikme oranları yavaş olabilir, tamamlanması çok uzun sürüyor tek bir sorgudan olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-140">Another reason why latency rates can be slow is from a single query taking too long to complete.</span></span>  <span data-ttu-id="0b5c9-141">Bu durumda, çoğaltmaları ekleme gecikme hızlarını artırır değil.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-141">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="0b5c9-142">Bu durumda kullanılabilen iki seçenek vardır:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-142">For this case there are two options available:</span></span>

1. <span data-ttu-id="0b5c9-143">**Bölümler artırmak** bir bölüm verilerinizi ek kaynaklar arasında bölmek için bir mekanizmadır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-143">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="0b5c9-144">İkinci bir bölüm eklediğinizde, bu nedenle, verilerinizi ikiye böl.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-144">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="0b5c9-145">Üçüncü bir bölüm dizininizi üç vb. ayırır.  Bu da bazı durumlarda, yavaş sorguları daha hızlı hesaplama paralelleştirme nedeniyle gerçekleştireceğini etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-145">A third partition splits your index into three, etc.  This also has the effect that in some cases, slow queries will perform faster due to the parallelization of computation.</span></span>  <span data-ttu-id="0b5c9-146">İş de son derece düşük seçiciliği sorgular olan sorguları ile bu paralelleştirme burada anlatıldığı bazı örnekler verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-146">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="0b5c9-147">Bu, çok sayıda belge eşleşen veya olduğunu sayıları belgeleri çok sayıda sağlamak gerektiği zaman sorguları oluşur.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-147">This consists of queries that match many documents or when faceting needs to provide counts over large numbers of documents.</span></span>  <span data-ttu-id="0b5c9-148">Çok fazla hesaplama belgeleri uygunluğunu puan veya belgeleri sayıda saymak için gerekli olduğundan, ek hesaplama sağlamak için ek bölümleri ekleme yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-148">Since there is a lot of computation needed to score the relevancy of the documents or to count the numbers of documents, adding extra partitions can help to provide additional computation.</span></span>  
   
   <span data-ttu-id="0b5c9-149">En çok Standard arama hizmeti olarak 12 bölüme ve 1 temel arama hizmeti bölümünde olabilir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-149">There can be a maximum of 12 partitions in Standard search service and 1 partition in the basic search service.</span></span>  <span data-ttu-id="0b5c9-150">Bölümler olabilir herhangi birinden ayarlanmış [Azure portal](search-create-service-portal.md) veya [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-150">Partitions can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="0b5c9-151">**Sınır yüksek nicelik alanlar:** modellenebilir veya önemli sayıda benzersiz değere sahip ve sonuç olarak, çok fazla kaynak üzerinde sonuçları işlem alan filtrelenebilir alan yüksek kardinalite alan oluşur.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-151">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources to compute results over.</span></span>   <span data-ttu-id="0b5c9-152">Belge değerleri belgeye çoğunu benzersiz olduğundan Örneğin, bir ürün kimliği veya açıklama alanı modellenebilir/filtrelenebilir olarak ayarlamak için yüksek kardinalite olmaması anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-152">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of the values from document to document are unique.</span></span> <span data-ttu-id="0b5c9-153">Mümkün olduğunda, yüksek kardinalite alan sayısını sınırlayın.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-153">Wherever possible, limit the number of high cardinality fields.</span></span>
3. <span data-ttu-id="0b5c9-154">**Artış arama katmanı:** kadar daha yüksek bir Azure Search katmanı yavaş sorguların performansını artırmak için başka bir yolu olabilir taşıma.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-154">**Increase Search Tier:**  Moving up to a higher Azure Search tier can be another way to improve performance of slow queries.</span></span>  <span data-ttu-id="0b5c9-155">Her daha yüksek katman daha hızlı CPU'lar ve sorgu performansına pozitif bir etkisi olan daha fazla bellek de sağlar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-155">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="0b5c9-156">Kullanılabilirlik için ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="0b5c9-156">Scaling for availability</span></span>
<span data-ttu-id="0b5c9-157">Çoğaltmaları değil yalnızca sorgu gecikmesi azaltmaya yardımcı olmak ancak yüksek kullanılabilirlik için de izin verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-157">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="0b5c9-158">Tek bir çoğaltma ile ortaya çıkar diğer bakım olayları veya yazılım güncelleştirmelerini sonra sunucu yeniden başlatma nedeniyle düzenli kapalı kalma süresini beklemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-158">With a single replica, you should expect periodic downtime due to server reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="0b5c9-159">Sonuç olarak, uygulamanızı yazma (dizin oluşturma olayları) yanı sıra aramaları (sorgular), yüksek kullanılabilirlik gerektiriyorsa dikkate almak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-159">As a result, it is important to consider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="0b5c9-160">Azure arama aşağıdaki özelliklere sahip tüm Ücretli Arama tekliflerini SLA seçenekleri sunar:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-160">Azure Search offers SLA options on all the paid search offerings with the following attributes:</span></span>

* <span data-ttu-id="0b5c9-161">salt okunur iş yüklerinin (sorgular) yüksek kullanılabilirlik için 2 çoğaltma</span><span class="sxs-lookup"><span data-stu-id="0b5c9-161">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="0b5c9-162">okuma-yazma iş yüklerinin (sorgu ve dizin oluşturma) yüksek kullanılabilirlik için 3 veya daha fazla yineleme</span><span class="sxs-lookup"><span data-stu-id="0b5c9-162">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="0b5c9-163">Bunun hakkında daha fazla ayrıntı için lütfen ziyaret [Azure Search hizmet düzeyi sözleşmesi](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-163">For more details on this, please visit the [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="0b5c9-164">Çoğaltmaları verilerinizin kopyasını olduğundan, birden çok çoğaltma yeniden başlatmalar ve Bakım bir çoğaltma karşı birer birer karşı diğer çoğaltmaları yürütülecek devam etmek sorguları verirken makine Azure Search sağlar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-164">Since replicas are copies of your data, having multiple replicas allows Azure Search to do machine reboots and maintenance against one replica at a time while allowing queries to continue to be executed against the other replicas.</span></span>  <span data-ttu-id="0b5c9-165">Bu nedenle, bu kapalı kalma süresi artık daha az verisinin bir kopyası karşı yürütülecek sorguları nasıl etkileyebilir göz önüne almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-165">For that reason, you will also need to consider how this downtime may impact the queries that now have to be executed against one less copy of the data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="0b5c9-166">Coğrafi olarak dağıtılan iş yükleri ölçekleme ve coğrafi artıklık sağlamak</span><span class="sxs-lookup"><span data-stu-id="0b5c9-166">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="0b5c9-167">Coğrafi olarak dağıtılan iş yükleri için Azure Search hizmetinizin barındırıldığı veri merkezi gölgeden uzak bulunan kullanıcılara yüksek gecikme hızları olduğunu bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-167">For geo-distributed workloads, you will find that users located far from the data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="0b5c9-168">Bu nedenle, bu kullanıcılar için daha yakın bir yerde konumlandırıldığında olan bölgeler birden çok arama hizmetleri sağlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-168">For this reason, it is often important to have multiple search services in regions that are in closer proximity to these users.</span></span>  <span data-ttu-id="0b5c9-169">Azure Search'te Azure Search dizinlerini coğrafi çoğaltma otomatik olarak yöntemi şu anda bölgeler arasında sağlamaz, ancak bu işlem uygulamak ve yönetmek basit hale getirmek kullanılabilir bazı teknikler vardır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-169">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple to implement and manage.</span></span> <span data-ttu-id="0b5c9-170">Bu sonraki birkaç bölümlerde özetlenmiştir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-170">These are outlined in the next few sections.</span></span>

<span data-ttu-id="0b5c9-171">Bu örnekte görüldüğü gibi en düşük gecikme sağlayan Azure Search hizmeti için bir kullanıcı burada yönlendirilir iki veya daha fazla bölgelerdeki iki veya daha fazla dizinler kullanılabilir olması için arama hizmetleri coğrafi olarak dağıtılan bir dizi belirtilir:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-171">The goal of a geo-distributed set of search services is to have two or more indexes available in two or more regions where a user will be routed to the Azure Search service that provides the lowest latency as seen in this example:</span></span>

   ![Bölgeye göre hizmetleri arası sekmesinde][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="0b5c9-173">Veriler arasında birden fazla Azure arama hizmetleri eşitlenmiş şekilde kalmasının</span><span class="sxs-lookup"><span data-stu-id="0b5c9-173">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="0b5c9-174">Ya da kullanarak oluşan dağıtılmış arama hizmetlerinizi eşitlenmiş tutmak için iki seçenek vardır [Azure Search dizin oluşturucusunu](search-indexer-overview.md) veya itme API (olarak da adlandırılan [Azure Search REST API'sini](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-174">There are two options for keeping your distributed search services in sync which consist of either using the [Azure Search Indexer](search-indexer-overview.md) or the Push API (also referred to as the [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="0b5c9-175">Azure Search'te dizin oluşturucular</span><span class="sxs-lookup"><span data-stu-id="0b5c9-175">Azure Search Indexers</span></span>
<span data-ttu-id="0b5c9-176">Azure Search dizin oluşturucusunu kullanıyorsanız, zaten veri değişiklikleri merkezi bir veri deposu Azure SQL DB ya da Azure Cosmos DB gibi alma.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-176">If you are using the Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="0b5c9-177">Yeni bir arama hizmeti oluşturduğunuzda, yalnızca bu aynı veri deposuna işaret bu hizmet için yeni bir Azure Search dizin oluşturucusunu oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-177">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points to this same datastore.</span></span> <span data-ttu-id="0b5c9-178">Yeni değişiklikler veri deposuna gelen olduğunda bu şekilde, bunlar daha sonra çeşitli dizin oluşturucu tarafından dizinlenir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-178">That way, whenever new changes come into the data store, they will then be indexed by the various Indexers.</span></span>  

<span data-ttu-id="0b5c9-179">Bu mimari aşağıdaki gibi görünür, örnek aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-179">Here is an example of what that architecture would look like.</span></span>

   ![Tek veri kaynağıyla dağıtılmış dizin oluşturucu ve hizmet birleşimler][2]

### <a name="push-api"></a><span data-ttu-id="0b5c9-181">Anında iletme API</span><span class="sxs-lookup"><span data-stu-id="0b5c9-181">Push API</span></span>
<span data-ttu-id="0b5c9-182">Azure Search itme API kullanıyorsanız [güncelleştirme Azure Search dizininizi içeriği](https://docs.microsoft.com/rest/api/searchservice/update-index), bir güncelleştirme gerekli olduğunda değişiklikler için tüm arama hizmetlerinin ileterek, çeşitli arama hizmetleri eşitlenmiş tutabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-182">If you are using the Azure Search Push API to [update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes to all search services whenever an update is required.</span></span>  <span data-ttu-id="0b5c9-183">Bunu yaparken bir arama hizmeti için bir güncelleştirme başarısız olduğu ve bir veya daha fazla güncelleştirme başarılı durumlarında emin olmak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-183">When doing this it is important to make sure to handle cases where an update to one search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="0b5c9-184">Yararlanmayı Azure trafik Yöneticisi</span><span class="sxs-lookup"><span data-stu-id="0b5c9-184">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="0b5c9-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) sonra birden fazla Azure arama hizmetleri tarafından desteklenen birden çok coğrafi konumda bulunan Web siteleri için rota isteklere izin verir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you to route requests to multiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="0b5c9-186">Kullanılabilir olduğundan emin olun ve kullanıcıları alternatif arama hizmetleri kapalı kalma süresi durumunda yönlendirmek için Azure Search araştırma, trafik Yöneticisi'nin avantajlarından biri.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-186">One advantage of the Traffic Manager is that it can probe Azure Search to ensure that it is available and route users to alternate search services in the event of downtime.</span></span>  <span data-ttu-id="0b5c9-187">Ayrıca, arama istekleri aracılığıyla Azure Web siteleri yönlendirme, Azure trafik Yöneticisi, Web sitesi yukarı olduğu Bakiye durumlarda yüklemek için ancak Azure Search sağlar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-187">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you to load balance cases where the Website is up but not Azure Search.</span></span>  <span data-ttu-id="0b5c9-188">Trafik Yöneticisi yararlanır hangi mimarisi bir örneği burada verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-188">Here is an example of what the architecture that leverages Traffic Manager.</span></span>

   ![Çapraz-sekmesinde, bölgeye göre Hizmetleri Merkezi Traffic Manager ile][3]

## <a name="monitoring-performance"></a><span data-ttu-id="0b5c9-190">Performans izleme</span><span class="sxs-lookup"><span data-stu-id="0b5c9-190">Monitoring performance</span></span>
<span data-ttu-id="0b5c9-191">Azure arama çözümlemek ve hizmeti aracılığıyla performansını izleme olanağı sağlar [arama trafiği Analytics (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-191">Azure Search offers the ability to analyze and monitor the performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="0b5c9-192">STA isteğe bağlı olarak tek tek arama işlemlerinin yanı sıra toplanan ölçümler sonra analiz için işlenen ya da Power BI'da görselleştirilen bir Azure Storage hesabı oturum açabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-192">Through STA, you can optionally log the individual search operations as well as aggregated metrics to an Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="0b5c9-193">STA ölçümleri'ni kullanarak performans istatistikleri sorgular veya sorgusu yanıt sürelerini ortalama sayısı gibi gözden geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-193">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="0b5c9-194">Ayrıca, işlem günlüğü, belirli arama işlemlerinin ayrıntılara ayrıntıya olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-194">In addition, the operation logging allows you to drill into details of specific search operations.</span></span>

<span data-ttu-id="0b5c9-195">STA gecikme hızları, Azure Search açısından anlamak için önemli bir araçtır.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-195">STA is a valuable tool to understand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="0b5c9-196">Bir sorgu Azure Search'te (out gönderildiğinde istenen zamandan) tam olarak işlenmesi için geçen süreyi oturum sorgu performans ölçümleri dayalı olduğundan, bu gecikme sorunlarına Azure Search Hizmet tarafı ya da aşımı ayarlarına olup olmadığını belirlemek için kullanabilirsiniz IDE hizmetinin gibi ağ gecikmesi uğradıysa.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-196">Since the query performance metrics logged are based on the time a query takes to be fully processed in Azure Search (from the time it is requested to when it is sent out), you are able to use this to determine if latency issues are from the Azure Search service side or outside of the service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="0b5c9-197">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="0b5c9-197">Next steps</span></span>
<span data-ttu-id="0b5c9-198">Her biri için fiyatlandırma katmanlarına ve Hizmetleri sınırları hakkında daha fazla bilgi için bkz: [hizmet sınırları Azure Search'te](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="0b5c9-198">To learn more about the pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="0b5c9-199">Ziyaret [kapasite planlaması](search-capacity-planning.md) bölüm ve çoğaltma birleşimlerini hakkında daha fazla bilgi edinmek için.</span><span class="sxs-lookup"><span data-stu-id="0b5c9-199">Visit [Capacity planning](search-capacity-planning.md) to learn more about partition and replica combinations.</span></span>

<span data-ttu-id="0b5c9-200">Daha fazla ayrıntıya gitme performansı ve nasıl bu makalede açıklanan iyileştirmeler uygulanacağı bazı gösterileri görmek için için aşağıdaki videoyu izleyin:</span><span class="sxs-lookup"><span data-stu-id="0b5c9-200">For more drilldown on performance and to see some demonstrations of how to implement the optimizations discussed in this article, watch the following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
