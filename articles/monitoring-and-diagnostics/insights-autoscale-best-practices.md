---
title: "Otomatik ölçeklendirme için en iyi uygulamaları | Microsoft Docs"
description: "Azure Web uygulamaları, sanal makine ölçek kümeleri ve bulut Hizmetleri için otomatik ölçeklendirme düzenleri"
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: 54dad831287376db7fb2dc46e4591be1499dc072
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/03/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="d134b-103">Otomatik ölçeklendirme için en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="d134b-103">Best practices for Autoscale</span></span>
<span data-ttu-id="d134b-104">Bu makalede, azure'da otomatik ölçeklendirme için en iyi yöntemler öğretir.</span><span class="sxs-lookup"><span data-stu-id="d134b-104">This article teaches best practices to autoscale in Azure.</span></span> <span data-ttu-id="d134b-105">Azure İzleyici otomatik ölçeklendirme uygular yalnızca [sanal makine ölçek kümeleri](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [bulut Hizmetleri](https://azure.microsoft.com/services/cloud-services/), ve [uygulama hizmeti - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="d134b-105">Azure Monitor autoscale applies only to [Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="d134b-106">Diğer Azure hizmetleriyle farklı ölçekleme yöntemlerini kullanın.</span><span class="sxs-lookup"><span data-stu-id="d134b-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="d134b-107">Otomatik ölçeklendirme kavramları</span><span class="sxs-lookup"><span data-stu-id="d134b-107">Autoscale concepts</span></span>
* <span data-ttu-id="d134b-108">Bir kaynak yalnızca olabilir *bir* otomatik ölçeklendirme ayarı</span><span class="sxs-lookup"><span data-stu-id="d134b-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="d134b-109">Otomatik ölçeklendirme ayarına sahip olabilir veya daha fazla profilleri ve her bir profili bir veya daha fazla otomatik ölçeklendirme kurallarını sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="d134b-110">Otomatik ölçeklendirme ayarı olduğu örnekleri yatay olarak ölçeklendirir. *çıkışı* örnekleri artırarak ve *içinde* örneklerinin sayısını azaltarak tarafından.</span><span class="sxs-lookup"><span data-stu-id="d134b-110">An autoscale setting scales instances horizontally, which is *out* by increasing the instances and *in* by decreasing the number of instances.</span></span>
  <span data-ttu-id="d134b-111">Otomatik ölçeklendirme ayarı, maksimum, minimum ve varsayılan değer örneklerinin sahiptir.</span><span class="sxs-lookup"><span data-stu-id="d134b-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="d134b-112">Otomatik ölçeklendirme iş genişleme veya ölçek bileşenini için yapılandırılmış eşiği aşıldığında değilse denetimi tarafından ölçeklendirmek için ilişkili ölçüm her zaman okur.</span><span class="sxs-lookup"><span data-stu-id="d134b-112">An autoscale job always reads the associated metric to scale by, checking if it has crossed the configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="d134b-113">Listesini görüntüleyebileceğiniz ölçümlerini, otomatik ölçeklendirme tarafından adresindeki ölçeklendirebilirsiniz [Azure İzleyici otomatik ölçeklendirmeyi ortak ölçümleri](insights-autoscale-common-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="d134b-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="d134b-114">Tüm eşikler bir örnek düzeyinde hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="d134b-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="d134b-115">Örneğin, "ölçek dışarı 1 örneği tarafından ne zaman ortalama CPU > % 80'e örnek sayısı 2 olduğunda", ortalama CPU tüm örneklerde % 80 ' büyük olduğunda genişleme anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="d134b-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when the average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="d134b-116">Her zaman e-posta yoluyla bildirimleri hatası alırsınız.</span><span class="sxs-lookup"><span data-stu-id="d134b-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="d134b-117">Özellikle, sahibi, Katkıda Bulunanlar ve okuyucular hedef kaynağın e-posta alırsınız.</span><span class="sxs-lookup"><span data-stu-id="d134b-117">Specifically, the owner, contributor, and readers of the target resource receive email.</span></span> <span data-ttu-id="d134b-118">Ayrıca her zaman aldığınız bir *kurtarma* otomatik ölçeklendirme bir hatadan kurtarır ve düzgün çalışan başladığında e-posta.</span><span class="sxs-lookup"><span data-stu-id="d134b-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="d134b-119">Size e-posta ve Web kancalarını başarılı ölçek eylemi bildirim almak için katılımı.</span><span class="sxs-lookup"><span data-stu-id="d134b-119">You can opt-in to receive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="d134b-120">Otomatik ölçeklendirme en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="d134b-120">Autoscale best practices</span></span>
<span data-ttu-id="d134b-121">Otomatik ölçeklendirme kullanırken aşağıdaki en iyi yöntemleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="d134b-121">Use the following best practices as you use autoscale.</span></span>

### <a name="ensure-the-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="d134b-122">Maksimum ve minimum değerler farklı olduğundan ve aralarındaki yeterli bir kenar boşluğu bulunduğundan emin olun</span><span class="sxs-lookup"><span data-stu-id="d134b-122">Ensure the maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="d134b-123">En az olan bir ayarı varsa = 2, en fazla = 2 ve geçerli örnek sayısı, 2, herhangi bir ölçek eylemi oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="d134b-123">If you have a setting that has minimum=2, maximum=2 and the current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="d134b-124">Kapsayıcı maksimum ve minimum örnek sayısı arasında yeterli bir kenar boşluğu tutun.</span><span class="sxs-lookup"><span data-stu-id="d134b-124">Keep an adequate margin between the maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="d134b-125">Otomatik ölçeklendirme, her zaman bu sınırlar arasında ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="d134b-126">Otomatik ölçeklendirme min ve max tarafından el ile ölçeklendirme sıfırlanır</span><span class="sxs-lookup"><span data-stu-id="d134b-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="d134b-127">Bir değere üstüne veya altına en fazla örnek sayısı el ile güncelleştirirseniz, otomatik ölçeklendirme altyapısı dön (üstündeyse) veya en küçük (yüksekse) otomatik olarak ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-127">If you manually update the instance count to a value above or below the maximum, the autoscale engine automatically scales back to the minimum (if below) or the maximum (if above).</span></span> <span data-ttu-id="d134b-128">Örneğin, 3 ile 6 arasındaki bir aralıkta ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="d134b-128">For example, you set the range between 3 and 6.</span></span> <span data-ttu-id="d134b-129">Bir çalışan örneği varsa, otomatik ölçeklendirme altyapısı sonraki çalıştırılmasında 3 örneklerine ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-129">If you have one running instance, the autoscale engine scales to 3 instances on its next run.</span></span> <span data-ttu-id="d134b-130">Benzer şekilde, bu ölçek bileşenini 8 örnekleri sonraki çalıştırılmasında 6 yedekleyin.</span><span class="sxs-lookup"><span data-stu-id="d134b-130">Likewise, it would scale-in 8 instances back to 6 on its next run.</span></span>  <span data-ttu-id="d134b-131">Otomatik ölçeklendirme kurallarını da sıfırlama sürece, el ile ölçeklendirme çok geçicidir.</span><span class="sxs-lookup"><span data-stu-id="d134b-131">Manual scaling is very temporary unless you reset the autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="d134b-132">Her zaman bir artırma ve azaltma yapan bir genişleme ve ölçek bileşenini kural bileşimi kullanın</span><span class="sxs-lookup"><span data-stu-id="d134b-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="d134b-133">Otomatik ölçeklendirme ölçek maksimum veya en düşük gereksinim, kadar tek çıkışı veya, bileşeni yalnızca bir bölümü birleşimi kullanırsanız, ulaşıldı.</span><span class="sxs-lookup"><span data-stu-id="d134b-133">If you use only one part of the combination, autoscale scale-in that single out, or in, until the maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-the-azure-portal-and-the-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="d134b-134">Azure portalı ve Azure Klasik portalı arasında otomatik ölçeklendirme yönetirken geçme</span><span class="sxs-lookup"><span data-stu-id="d134b-134">Do not switch between the Azure portal and the Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="d134b-135">Bulut Hizmetleri ve uygulama Hizmetleri (Web uygulamaları) için Azure portal (portal.azure.com) oluşturmak ve otomatik ölçeklendirme ayarlarını yönetmek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="d134b-135">For Cloud Services and App Services (Web Apps), use the Azure portal (portal.azure.com) to create and manage autoscale settings.</span></span> <span data-ttu-id="d134b-136">Sanal makine ölçek kümeleri oluşturmak ve otomatik ölçeklendirme ayarı yönetmek için PowerShell'i, CLI veya REST API'yi kullanın.</span><span class="sxs-lookup"><span data-stu-id="d134b-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API to create and manage autoscale setting.</span></span> <span data-ttu-id="d134b-137">Klasik Azure portalı (manage.windowsazure.com) ve Azure Portalı'nı (portal.azure.com) arasında otomatik ölçeklendirme yapılandırmaları yönetirken geçiş değil.</span><span class="sxs-lookup"><span data-stu-id="d134b-137">Do not switch between the Azure classic portal (manage.windowsazure.com) and the Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="d134b-138">Klasik Azure portalı ve arka plandaki kendi arka uç sınırlamalara sahiptir.</span><span class="sxs-lookup"><span data-stu-id="d134b-138">The Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="d134b-139">Otomatik ölçeklendirme bir grafik kullanıcı arabirimini kullanarak yönetmek için Azure portalında taşıyın.</span><span class="sxs-lookup"><span data-stu-id="d134b-139">Move to the Azure portal to manage autoscale using a graphical user interface.</span></span> <span data-ttu-id="d134b-140">Otomatik ölçeklendirme PowerShell'i, CLI veya REST API (üzerinden Azure kaynak Gezgini) kullanmak için Seçenekler şunlardır.</span><span class="sxs-lookup"><span data-stu-id="d134b-140">The options are to use the autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-the-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="d134b-141">Tanılama ölçümü için uygun istatistiği seçin</span><span class="sxs-lookup"><span data-stu-id="d134b-141">Choose the appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="d134b-142">Tanılama ölçümleri arasından seçim yapabilirsiniz *ortalama*, *Minimum*, *maksimum* ve *toplam* göre ölçeklendirme ölçüm olarak.</span><span class="sxs-lookup"><span data-stu-id="d134b-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric to scale by.</span></span> <span data-ttu-id="d134b-143">En yaygın istatistik *ortalama*.</span><span class="sxs-lookup"><span data-stu-id="d134b-143">The most common statistic is *Average*.</span></span>

### <a name="choose-the-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="d134b-144">Tüm ölçüm türleri eşikler dikkatle seçin</span><span class="sxs-lookup"><span data-stu-id="d134b-144">Choose the thresholds carefully for all metric types</span></span>
<span data-ttu-id="d134b-145">Dikkatli bir şekilde genişleme ve ölçek-üzerinde pratik durumlarda bağlı olarak farklı eşikler seçme öneririz.</span><span class="sxs-lookup"><span data-stu-id="d134b-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="d134b-146">Biz *değil önerilir* gibi otomatik ölçeklendirme ayarları aynı veya benzer eşik değerleri out ve koşullar aşağıda örnekler:</span><span class="sxs-lookup"><span data-stu-id="d134b-146">We *do not recommend* autoscale settings like the examples below with the same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="d134b-147">Örnek 1 artırmasını ne zaman saymak iş parçacığı sayısı < = 600</span><span class="sxs-lookup"><span data-stu-id="d134b-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="d134b-148">1 ile örnekleri azaltmak ne zaman saymak iş parçacığı sayısı > = 600</span><span class="sxs-lookup"><span data-stu-id="d134b-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="d134b-149">Karmaşık görünebilir bir davranışa neden olabilir, bir örneğe bakalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-149">Let's look at an example of what can lead to a behavior that may seem confusing.</span></span> <span data-ttu-id="d134b-150">Aşağıdaki sırada göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="d134b-150">Consider the following sequence.</span></span>

1. <span data-ttu-id="d134b-151">2 örneği vardır başından itibaren ve ardından iş parçacığı örneği başına ortalama sayısı için 625 büyütmeleri varsayalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-151">Assume there are 2 instances to begin with and then the average number of threads per instance grows to 625.</span></span>
2. <span data-ttu-id="d134b-152">Otomatik ölçeklendirme 3 örneğini eklemede çıkışı ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="d134b-153">Ardından, örnek arasında ortalama iş parçacığı sayısı için 575 düştüğünü varsayalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-153">Next, assume that the average thread count across instance falls to 575.</span></span>
4. <span data-ttu-id="d134b-154">Ölçeklendirme önce son durum tahmin etmek için otomatik ölçeklendirme çalıştığında, ölçeği, olacaktır.</span><span class="sxs-lookup"><span data-stu-id="d134b-154">Before scaling down, autoscale tries to estimate what the final state will be if it scaled in.</span></span> <span data-ttu-id="d134b-155">Örneğin, 575 x 3 (geçerli örnek sayısı) 1,725 = / 2 (ölçeklendirilmiş durumlarda son sayısı) 862.5 iş parçacığı =.</span><span class="sxs-lookup"><span data-stu-id="d134b-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="d134b-156">Başka bir deyişle, hemen yeniden ortalama iş parçacığı sayısı aynı kalır ya da yalnızca kısa süreli bile döner bile, ölçeği sonra genişleme için otomatik ölçeklendirme sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d134b-156">This means autoscale would have to immediately scale-out again even after it scaled in, if the average thread count remains the same or even falls only a small amount.</span></span> <span data-ttu-id="d134b-157">Tüm işlemini yeniden ölçeklendirilmiş, ancak, sonsuz bir döngüde baştaki yineleyin.</span><span class="sxs-lookup"><span data-stu-id="d134b-157">However, if it scaled up again, the whole process would repeat, leading to an infinite loop.</span></span>
5. <span data-ttu-id="d134b-158">("Flapping" olarak adlandırılır) bu durumu önlemek için otomatik ölçeklendirme hiç ölçeklenmez.</span><span class="sxs-lookup"><span data-stu-id="d134b-158">To avoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="d134b-159">Bunun yerine, atlar ve hizmetin iş tekrar tekrar çalıştırıldığında koşul reevaluates.</span><span class="sxs-lookup"><span data-stu-id="d134b-159">Instead, it skips and reevaluates the condition again the next time the service's job executes.</span></span> <span data-ttu-id="d134b-160">Otomatik ölçeklendirme ortalama iş parçacığı sayısı 575 değiştirildiği çalışmaya görünmeyecektir çünkü bu birçok karıştırır.</span><span class="sxs-lookup"><span data-stu-id="d134b-160">This could confuse many people because autoscale wouldn't appear to work when the average thread count was 575.</span></span>

<span data-ttu-id="d134b-161">Tahmin bir ölçek sırasında "durumlarda, ölçek ve genişletme Eylemler sürekli geri ve İleri nereye dalgalanma" önlemek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="d134b-161">Estimation during a scale-in is intended to avoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="d134b-162">Bu davranış genişleme için aynı eşikler seçtiğinizde unutmayın ve içinde kalmasını sağlayın.</span><span class="sxs-lookup"><span data-stu-id="d134b-162">Keep this behavior in mind when you choose the same thresholds for scale-out and in.</span></span>

<span data-ttu-id="d134b-163">Genişleme arasında ve eşikleri yeterli bir kenar boşluğu seçme öneririz.</span><span class="sxs-lookup"><span data-stu-id="d134b-163">We recommend choosing an adequate margin between the scale-out and in thresholds.</span></span> <span data-ttu-id="d134b-164">Örnek olarak, aşağıdaki daha iyi kural birleşimi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="d134b-164">As an example, consider the following better rule combination.</span></span>

* <span data-ttu-id="d134b-165">Örnek 1 artırmasını ne zaman saymak CPU % > = 80</span><span class="sxs-lookup"><span data-stu-id="d134b-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="d134b-166">1 ile örnekleri azaltmak ne zaman saymak CPU % < = 60</span><span class="sxs-lookup"><span data-stu-id="d134b-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="d134b-167">Bu durumda</span><span class="sxs-lookup"><span data-stu-id="d134b-167">In this case</span></span>  

1. <span data-ttu-id="d134b-168">2 örneği vardır başlamak varsayalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-168">Assume there are 2 instances to start with.</span></span>
2. <span data-ttu-id="d134b-169">Örnekler arasında ortalama CPU % 80 kalırsa, üçüncü bir örneğini ekleme çıkışı otomatik ölçeklendirme ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-169">If the average CPU% across instances goes to 80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="d134b-170">Şimdi zamanla CPU % 60 olarak döner varsayalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-170">Now assume that over time the CPU% falls to 60.</span></span>
4. <span data-ttu-id="d134b-171">Ölçek için olsaydı otomatik ölçeklendirme'nın ölçek, kuralı son durum tahmin eder.</span><span class="sxs-lookup"><span data-stu-id="d134b-171">Autoscale's scale-in rule estimates the final state if it were to scale-in.</span></span> <span data-ttu-id="d134b-172">Örneğin, 60 x 3 (geçerli örnek sayısı) 180 = / 2 (ölçeklendirilmiş durumlarda son sayısı) 90 =.</span><span class="sxs-lookup"><span data-stu-id="d134b-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="d134b-173">Otomatik ölçeklendirme ölçek hemen yeniden genişletmek sahip için açma biçimde değil.</span><span class="sxs-lookup"><span data-stu-id="d134b-173">So autoscale does not scale-in because it would have to scale-out again immediately.</span></span> <span data-ttu-id="d134b-174">Bunun yerine, ölçekleme atlar.</span><span class="sxs-lookup"><span data-stu-id="d134b-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="d134b-175">Sonraki saat otomatik ölçeklendirme 50'ye düşmesine CPU devam denetler.</span><span class="sxs-lookup"><span data-stu-id="d134b-175">The next time autoscale checks, the CPU continues to fall to 50.</span></span> <span data-ttu-id="d134b-176">Yeniden - 50 x 3 örneği tahminleri 150 = / 2 örnekleri 80 genişleme eşiğin altına bunu içinde başarıyla 2 örneklerine ölçeklendirir şekilde olan 75 =.</span><span class="sxs-lookup"><span data-stu-id="d134b-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below the scale-out threshold of 80, so it scales in successfully to 2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="d134b-177">Eşik değerleri için özel ölçümleri ölçeklendirme dikkat edilmesi gereken noktalar</span><span class="sxs-lookup"><span data-stu-id="d134b-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="d134b-178">Depolama veya hizmet veri yolu kuyruğu uzunluğu ölçüm gibi özel ölçümleri eşiği iletileri geçerli örnek sayısı kullanılabilir ortalama sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="d134b-178">For special metrics such as Storage or Service Bus Queue length metric, the threshold is the average number of messages available per current number of instances.</span></span> <span data-ttu-id="d134b-179">Dikkatle seçin Bu ölçüm için eşik değerini seçin.</span><span class="sxs-lookup"><span data-stu-id="d134b-179">Carefully choose the choose the threshold value for this metric.</span></span>

<span data-ttu-id="d134b-180">Şimdi daha iyi davranış anladığınızdan emin olmak için bir örnek gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="d134b-180">Let's illustrate it with an example to ensure you understand the behavior better.</span></span>

* <span data-ttu-id="d134b-181">Depolama kuyruğu iletisi gönderdiğinde sayısı 1 sayısına göre örneklerini artırın > = 50</span><span class="sxs-lookup"><span data-stu-id="d134b-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="d134b-182">Depolama kuyruğu iletisi gönderdiğinde sayısı 1 sayısına göre örnekleri azaltmak < = 10</span><span class="sxs-lookup"><span data-stu-id="d134b-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="d134b-183">Aşağıdaki sırada göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="d134b-183">Consider the following sequence:</span></span>

1. <span data-ttu-id="d134b-184">2 depolama kuyruğu örneği vardır.</span><span class="sxs-lookup"><span data-stu-id="d134b-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="d134b-185">İleti gelmeye devam ve depolama kuyruğu incelediğinizde, toplam sayısı 50 okur.</span><span class="sxs-lookup"><span data-stu-id="d134b-185">Messages keep coming and when you review the storage queue, the total count reads 50.</span></span> <span data-ttu-id="d134b-186">Bu otomatik ölçeklendirme bir ölçeklendirme eylemi başlaması gereken varsayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="d134b-187">Ancak, 50/2 olduğunu unutmayın = örneği başına 25 iletileri.</span><span class="sxs-lookup"><span data-stu-id="d134b-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="d134b-188">Bu nedenle, genişleme gerçekleşmez.</span><span class="sxs-lookup"><span data-stu-id="d134b-188">So, scale-out does not occur.</span></span> <span data-ttu-id="d134b-189">İlk gerçekleşecek şekilde genişleme için depolama sırasındaki toplam ileti sayısı 100 olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d134b-189">For the first scale-out to happen, the total message count in the storage queue should be 100.</span></span>
3. <span data-ttu-id="d134b-190">Ardından, toplam ileti sayısı 100 ulaştığında varsayalım.</span><span class="sxs-lookup"><span data-stu-id="d134b-190">Next, assume that the total message count reaches 100.</span></span>
4. <span data-ttu-id="d134b-191">3 depolama sıra örneği bir ölçeklendirme eylemi nedeniyle eklenir.</span><span class="sxs-lookup"><span data-stu-id="d134b-191">A 3rd storage queue instance is added due to a scale-out action.</span></span>  <span data-ttu-id="d134b-192">Sıradaki toplam ileti sayısı nedeniyle 150 ulaşana kadar sonraki ölçeklendirme eylemi yapılmaz 150/3 = 50.</span><span class="sxs-lookup"><span data-stu-id="d134b-192">The next scale-out action will not happen until the total message count in the queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="d134b-193">Şimdi daha küçük sırasındaki ileti sayısını alır.</span><span class="sxs-lookup"><span data-stu-id="d134b-193">Now the number of messages in the queue gets smaller.</span></span> <span data-ttu-id="d134b-194">Tüm sıralardaki toplam ileti için en fazla 30 eklediğinizde 3 örnekleriyle ilk ölçek eylemi olur 30/3 = için ölçek eşik örneği başına 10 iletileri.</span><span class="sxs-lookup"><span data-stu-id="d134b-194">With 3 instances, the first scale-in action happens when the total messages in all queues add up to 30 because 30/3 = 10 messages per instance, which is the scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="d134b-195">Otomatik ölçeklendirme ayarında birden çok profil yapılandırıldığında ölçeklendirme dikkat edilmesi gereken noktalar</span><span class="sxs-lookup"><span data-stu-id="d134b-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="d134b-196">Otomatik ölçeklendirme ayarında zamanlama veya zaman bağımlılıkları olmadan her zaman uygulanır, bir varsayılan profili seçebilir veya bir tarih ve saat aralığı ile sabit bir dönem için yinelenen bir profil ya da profili seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="d134b-197">Otomatik ölçeklendirme hizmeti bunları işlediğinde, her zaman şu sırayla denetler:</span><span class="sxs-lookup"><span data-stu-id="d134b-197">When autoscale service processes them, it always checks in the following order:</span></span>

1. <span data-ttu-id="d134b-198">Sabit tarih profili</span><span class="sxs-lookup"><span data-stu-id="d134b-198">Fixed Date profile</span></span>
2. <span data-ttu-id="d134b-199">Yinelenen profili</span><span class="sxs-lookup"><span data-stu-id="d134b-199">Recurring profile</span></span>
3. <span data-ttu-id="d134b-200">Varsayılan ("her zaman") profil</span><span class="sxs-lookup"><span data-stu-id="d134b-200">Default ("Always") profile</span></span>

<span data-ttu-id="d134b-201">Bir profil koşul karşılandığında, otomatik ölçeklendirme altındaki sonraki profili koşulu denetlemez.</span><span class="sxs-lookup"><span data-stu-id="d134b-201">If a profile condition is met, autoscale does not check the next profile condition below it.</span></span> <span data-ttu-id="d134b-202">Otomatik ölçeklendirme, aynı anda yalnızca bir profil işler.</span><span class="sxs-lookup"><span data-stu-id="d134b-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="d134b-203">Başka bir deyişle, ayrıca bir alt katmanlı profili işleme durumundan dahil etmek istiyorsanız, bu kurallar da geçerli profilinde eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d134b-203">This means if you want to also include a processing condition from a lower-tier profile, you must include those rules as well in the current profile.</span></span>

<span data-ttu-id="d134b-204">Şimdi bu örneği kullanarak gözden geçirin:</span><span class="sxs-lookup"><span data-stu-id="d134b-204">Let's review this using an example:</span></span>

<span data-ttu-id="d134b-205">Aşağıdaki resimde bir otomatik ölçeklendirme ayarı gösterir 2 ve en fazla örnekleri minimum örnekleri ile bir varsayılan profili = = 10.</span><span class="sxs-lookup"><span data-stu-id="d134b-205">The image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="d134b-206">Bu örnekte, kuralları sıradaki ileti sayısı 10'dan büyük olduğunda genişletmek için yapılandırılmış ve ölçek bileşenini sıradaki ileti sayısı 3'ten az olduğunda.</span><span class="sxs-lookup"><span data-stu-id="d134b-206">In this example, rules are configured to scale-out when the message count in the queue is greater than 10 and scale-in when the message count in the queue is less than 3.</span></span> <span data-ttu-id="d134b-207">Artık kaynak 2 ile 10 örnekleri arasında ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-207">So now the resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="d134b-208">Ayrıca, yinelenen bir profili Pazartesi kümesi yok.</span><span class="sxs-lookup"><span data-stu-id="d134b-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="d134b-209">Minimum örnekleri için ayarlanmış 2 ve en fazla örnekleri = = 12.</span><span class="sxs-lookup"><span data-stu-id="d134b-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="d134b-210">Yani Pazartesi günü, bu koşul için ilk zaman otomatik ölçeklendirme denetler örnek sayısı 2 ise, yeni en az 3 için ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-210">This means on Monday, the first time autoscale checks for this condition, if the instance count is 2, it scales to the new minimum of 3.</span></span> <span data-ttu-id="d134b-211">Bu profil koşul bulmak otomatik ölçeklendirme devam ettiği sürece (Pazartesi) eşleşen, yalnızca bu profil için yapılandırılmış CPU tabanlı ölçek genişletme/bileşenini kuralların işler.</span><span class="sxs-lookup"><span data-stu-id="d134b-211">As long as autoscale continues to find this profile condition matched (Monday), it only processes the CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="d134b-212">Şu anda bu kuyruk uzunluğu için denetlemez.</span><span class="sxs-lookup"><span data-stu-id="d134b-212">At this time, it does not check for the queue length.</span></span> <span data-ttu-id="d134b-213">Denetlenecek kuyruk uzunluğu koşul da istiyorsanız, ancak, varsayılan profil bu kurallardan de Pazartesi profilinizde içermelidir.</span><span class="sxs-lookup"><span data-stu-id="d134b-213">However, if you also want the queue length condition to be checked, you should include those rules from the default profile as well in your Monday profile.</span></span>

<span data-ttu-id="d134b-214">Otomatik ölçeklendirme varsayılan profiline geçtiğinde, benzer şekilde, onu önce minimum ve maksimum koşulların karşılandığından denetler.</span><span class="sxs-lookup"><span data-stu-id="d134b-214">Similarly, when autoscale switches back to the default profile, it first checks if the minimum and maximum conditions are met.</span></span> <span data-ttu-id="d134b-215">Zaman örneklerinin sayısını 12 ise, bu, 10, varsayılan profili için izin verilen maksimum ölçeklendirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-215">If the number of instances at the time is 12, it scales in to 10, the maximum allowed for the default profile.</span></span>

![otomatik ölçeklendirme ayarları](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="d134b-217">Birden çok kural, bir profilde yapılandırıldığında ölçeklendirme dikkat edilmesi gereken noktalar</span><span class="sxs-lookup"><span data-stu-id="d134b-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="d134b-218">Burada bir profilde birden çok kural ayarlamak için sahip olduğu durumlar vardır.</span><span class="sxs-lookup"><span data-stu-id="d134b-218">There are cases where you may have to set multiple rules in a profile.</span></span> <span data-ttu-id="d134b-219">Otomatik ölçeklendirme kurallarını aşağıdaki kümesini birden çok kural ayarlandığında Hizmetleri kullanım tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d134b-219">The following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="d134b-220">Üzerinde *ölçeğini*, herhangi bir kural karşılanır otomatik ölçeklendirme çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="d134b-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="d134b-221">Üzerinde *ölçek bileşenini*, otomatik ölçeklendirme karşılanması gereken tüm kuralları gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d134b-221">On *scale-in*, autoscale require all rules to be met.</span></span>

<span data-ttu-id="d134b-222">Göstermek için aşağıdaki 4 otomatik ölçeklendirme kurallarını sahip olduğunuzu varsayın:</span><span class="sxs-lookup"><span data-stu-id="d134b-222">To illustrate, assume that you have the following 4 autoscale rules:</span></span>

* <span data-ttu-id="d134b-223">Varsa CPU < % 30, Ölçek 1 ile açma</span><span class="sxs-lookup"><span data-stu-id="d134b-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="d134b-224">Varsa bellek < % 50, Ölçek-1 ile</span><span class="sxs-lookup"><span data-stu-id="d134b-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="d134b-225">Varsa CPU > %75, 1 ile genişletme</span><span class="sxs-lookup"><span data-stu-id="d134b-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="d134b-226">Varsa bellek > %75, 1 ile genişletme</span><span class="sxs-lookup"><span data-stu-id="d134b-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="d134b-227">Ardından izleme oluşur:</span><span class="sxs-lookup"><span data-stu-id="d134b-227">Then the follow occurs:</span></span>

* <span data-ttu-id="d134b-228">% 76 CPU, bellek % 50 ise, biz genişletme.</span><span class="sxs-lookup"><span data-stu-id="d134b-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="d134b-229">% 50 CPU, bellek % 76 ise, biz genişletme.</span><span class="sxs-lookup"><span data-stu-id="d134b-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="d134b-230">Diğer taraftan, CPU ise % 25 ve bellektir % 51 otomatik ölçeklendirme yapar **değil** ölçek açma.</span><span class="sxs-lookup"><span data-stu-id="d134b-230">On the other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="d134b-231">Aşağıdakileri yapmak için ölçek içinde CPU %29 ve bellek % 49 olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d134b-231">In order to scale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="d134b-232">Her zaman güvenli varsayılan örnek sayısı seçin</span><span class="sxs-lookup"><span data-stu-id="d134b-232">Always select a safe default instance count</span></span>
<span data-ttu-id="d134b-233">Varsayılan örnek sayısı, ölçümleri kullanılabilir olmadığında otomatik ölçeklendirme, count hizmetinize ölçeklendirir önemlidir.</span><span class="sxs-lookup"><span data-stu-id="d134b-233">The default instance count is important autoscale scales your service to that count when metrics are not available.</span></span> <span data-ttu-id="d134b-234">Bu nedenle, iş yükleriniz için güvenli bir varsayılan örnek sayısı seçin.</span><span class="sxs-lookup"><span data-stu-id="d134b-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="d134b-235">Otomatik ölçeklendirme bildirimleri yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d134b-235">Configure autoscale notifications</span></span>
<span data-ttu-id="d134b-236">Aşağıdaki koşullardan herhangi biri oluştuğunda otomatik ölçeklendirme kaynağının Katkıda Bulunanlar ve yöneticiler e-posta ile bildirimde bulunur.</span><span class="sxs-lookup"><span data-stu-id="d134b-236">Autoscale notifies the administrators and contributors of the resource by email if any of the following conditions occur:</span></span>

* <span data-ttu-id="d134b-237">otomatik ölçeklendirme hizmeti bir eylem başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="d134b-237">autoscale service fails to take an action.</span></span>
* <span data-ttu-id="d134b-238">Ölçümleri ölçek karar vermek için otomatik ölçeklendirme hizmeti kullanılabilir değil.</span><span class="sxs-lookup"><span data-stu-id="d134b-238">Metrics are not available for autoscale service to make a scale decision.</span></span>
* <span data-ttu-id="d134b-239">(Yeniden bir ölçek karar vermek için kullanılabilir kurtarma) ölçümleridir.</span><span class="sxs-lookup"><span data-stu-id="d134b-239">Metrics are available (recovery) again to make a scale decision.</span></span>
  <span data-ttu-id="d134b-240">Yukarıdaki koşullar yanı sıra başarılı ölçeklendirme eylemi için bildirim almak için e-posta veya Web kancası bildirimleri yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-240">In addition to the conditions above, you can configure email or webhook notifications to get notified for successful scale actions.</span></span>
  
<span data-ttu-id="d134b-241">Bir etkinlik günlüğü uyarı, otomatik ölçeklendirme altyapısı sağlığını izlemek için de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d134b-241">You can also use an Activity Log alert to monitor the health of the autoscale engine.</span></span> <span data-ttu-id="d134b-242">Örnekler için [bir etkinlik günlüğü aboneliğinizi tüm otomatik ölçeklendirme motoru işlemleri izlemek için uyarı oluşturma](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) veya [bir etkinlik günlüğü tüm başarısız otomatik ölçeklendirme ölçek izlemek / aboneliğinizi işlemlerini genişletmek için uyarı oluşturma](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span><span class="sxs-lookup"><span data-stu-id="d134b-242">Here are examples to [create an Activity Log Alert to monitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or to [create an Activity Log Alert to monitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d134b-243">Sonraki Adımlar</span><span class="sxs-lookup"><span data-stu-id="d134b-243">Next Steps</span></span>
- [<span data-ttu-id="d134b-244">Bir etkinlik günlüğü aboneliğinizi tüm otomatik ölçeklendirme motoru işlemleri izlemek için uyarı oluştur.</span><span class="sxs-lookup"><span data-stu-id="d134b-244">Create an Activity Log Alert to monitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="d134b-245">Bir etkinlik günlüğü tüm başarısız otomatik ölçeklendirme ölçek izlemek / aboneliğinizi işlemlerini genişletmek için uyarı oluştur</span><span class="sxs-lookup"><span data-stu-id="d134b-245">Create an Activity Log Alert to monitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
