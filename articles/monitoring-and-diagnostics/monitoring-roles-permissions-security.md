---
title: "Roller, izinleri ve güvenlik Azure İzleyicisi ile kullanmaya başlama | Microsoft Docs"
description: "Azure monitörün yerleşik rolleri ve izinleri kaynakları izlemek için erişimi kısıtlamak için nasıl kullanılacağını öğrenin."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: a28f971ae898ffdd1168550a909f2a48e1b3b652
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/18/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="3d153-103">Roller, izinleri ve güvenlik Azure İzleyicisi ile kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="3d153-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="3d153-104">İzleme verilerini ve ayarları için erişimi kesinlikle yönetmenin birçok ekip gerekir.</span><span class="sxs-lookup"><span data-stu-id="3d153-104">Many teams need to strictly regulate access to monitoring data and settings.</span></span> <span data-ttu-id="3d153-105">Örneğin, özel olarak (destek mühendisleri, devops mühendisleri) izleme üzerinde çalışan takım üyeleri sahipseniz veya bir yönetilen hizmet sağlayıcısı kullanıyorsanız, bunları oluşturmak için kendi yeteneği kısıtlama sırasında yalnızca izleme verilerine erişim vermek isteyebilirsiniz, değiştirmek veya kaynakları silin.</span><span class="sxs-lookup"><span data-stu-id="3d153-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want to grant them access to only monitoring data while restricting their ability to create, modify, or delete resources.</span></span> <span data-ttu-id="3d153-106">Bu makalede, hızlı bir şekilde bir kullanıcı Azure içinde yerleşik bir izleme RBAC rolü uygulamak veya kendi özel rol sınırlı izleme izinleri gereken kullanıcılar için yapı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3d153-106">This article shows how to quickly apply a built-in monitoring RBAC role to a user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="3d153-107">Ardından Azure İzleyicisi ile ilgili kaynaklarınızın ve içerdikleri verilere erişimin nasıl sınırlandırmak için güvenlik konuları ele alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="3d153-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access to the data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="3d153-108">Yerleşik izleme roller</span><span class="sxs-lookup"><span data-stu-id="3d153-108">Built-in monitoring roles</span></span>
<span data-ttu-id="3d153-109">Azure monitörün yerleşik roller yardımcı olmak için tasarlanmıştır hala elde edilir ve ihtiyaç duydukları verilere yapılandırmak için altyapı izleme için sorumlu etkinleştirme sırasında bir abonelik kaynaklara erişimi sınırlayabilir.</span><span class="sxs-lookup"><span data-stu-id="3d153-109">Azure Monitor’s built-in roles are designed to help limit access to resources in a subscription while still enabling those responsible for monitoring infrastructure to obtain and configure the data they need.</span></span> <span data-ttu-id="3d153-110">Azure İzleyicisi, iki Giden kutusu rolleri sağlar: bir izleme okuyucu ve izleme katılımcı.</span><span class="sxs-lookup"><span data-stu-id="3d153-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="3d153-111">Okuyucu izleme</span><span class="sxs-lookup"><span data-stu-id="3d153-111">Monitoring Reader</span></span>
<span data-ttu-id="3d153-112">İzleme okuyucu rolüne atanan kişi bir Abonelikteki tüm izleme verilerini görüntüleme ancak herhangi bir kaynağa değiştiremez veya kaynakları izleme ile ilgili ayarları düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="3d153-112">People assigned the Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related to monitoring resources.</span></span> <span data-ttu-id="3d153-113">Bu rol için gerekir desteği veya işlem mühendisleri gibi bir kuruluştaki kullanıcılar için uygundur:</span><span class="sxs-lookup"><span data-stu-id="3d153-113">This role is appropriate for users in an organization, such as support or operations engineers, who need to be able to:</span></span>

* <span data-ttu-id="3d153-114">İzleme panoları portalda görüntüleyebilir ve kendi özel izleme panolar oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3d153-114">View monitoring dashboards in the portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="3d153-115">Ölçümleri kullanarak sorgu [Azure İzleyici REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlet'leri](insights-powershell-samples.md), veya [platformlar arası CLI](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="3d153-115">Query for metrics using the [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="3d153-116">Portal, Azure İzleyici REST API'si, PowerShell cmdlet'lerini veya platformlar arası CLI kullanarak Etkinlik günlüğü sorgu.</span><span class="sxs-lookup"><span data-stu-id="3d153-116">Query the Activity Log using the portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="3d153-117">Görünüm [tanılama ayarlarını](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) bir kaynak için.</span><span class="sxs-lookup"><span data-stu-id="3d153-117">View the [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="3d153-118">Görünüm [oturum profili](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) aboneliği.</span><span class="sxs-lookup"><span data-stu-id="3d153-118">View the [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="3d153-119">Otomatik ölçeklendirme ayarlarını görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="3d153-119">View autoscale settings.</span></span>
* <span data-ttu-id="3d153-120">Uyarı etkinliği görüntüle ve ayarlar.</span><span class="sxs-lookup"><span data-stu-id="3d153-120">View alert activity and settings.</span></span>
* <span data-ttu-id="3d153-121">Application Insights verilere erişmek ve veri AI analizleri görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="3d153-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="3d153-122">Çalışma alanı için kullanım verilerini de dahil olmak üzere günlük analizi (OMS) çalışma veri arayın.</span><span class="sxs-lookup"><span data-stu-id="3d153-122">Search Log Analytics (OMS) workspace data including usage data for the workspace.</span></span>
* <span data-ttu-id="3d153-123">Günlük analizi (OMS) yönetim grupları görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="3d153-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="3d153-124">Günlük analizi (OMS) arama şemasını alın.</span><span class="sxs-lookup"><span data-stu-id="3d153-124">Retrieve the Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="3d153-125">Günlük analizi (OMS) Intelligence paketlerini listeler.</span><span class="sxs-lookup"><span data-stu-id="3d153-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="3d153-126">Almak ve günlük analizi (OMS) kayıtlı aramalar yürütün.</span><span class="sxs-lookup"><span data-stu-id="3d153-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="3d153-127">Günlük analizi (OMS) depolama yapılandırmasını alır.</span><span class="sxs-lookup"><span data-stu-id="3d153-127">Retrieve the Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="3d153-128">Bu rol, bir olay hub'ına akışı veya bir depolama hesabında depolanan günlük verileri için okuma erişimi sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="3d153-128">This role does not give read access to log data that has been streamed to an event hub or stored in a storage account.</span></span> <span data-ttu-id="3d153-129">[Aşağıya bakın](#security-considerations-for-monitoring-data) bu kaynaklara erişim yapılandırma hakkında bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3d153-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access to these resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="3d153-130">Katkıda bulunan izleme</span><span class="sxs-lookup"><span data-stu-id="3d153-130">Monitoring Contributor</span></span>
<span data-ttu-id="3d153-131">Kişilerin izleme katılımcı rolü atanmış bir abonelikte tüm izleme verilerini görüntüleyebilir ve oluşturmak veya izleme ayarlarını değiştirmek, ancak diğer kaynakları değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="3d153-131">People assigned the Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="3d153-132">Bu rolü izleme okuyucu rolüne bir üst kümesidir ve kuruluşun izleme takım veya isteyen, yukarıdaki izinleri yanı sıra de erişebilmeleri için Yönetilen hizmet sağlayıcıları üyeleri için uygundur:</span><span class="sxs-lookup"><span data-stu-id="3d153-132">This role is a superset of the Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition to the permissions above, also need to be able to:</span></span>

* <span data-ttu-id="3d153-133">İzleme panoları paylaşılan Pano olarak yayımlayın.</span><span class="sxs-lookup"><span data-stu-id="3d153-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="3d153-134">Ayarlama [tanılama ayarlarını](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) bir resource.* için</span><span class="sxs-lookup"><span data-stu-id="3d153-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="3d153-135">Ayarlama [oturum profili](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) bir subscription.* için</span><span class="sxs-lookup"><span data-stu-id="3d153-135">Set the [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="3d153-136">Uyarı etkinliği ve ayarları ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3d153-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="3d153-137">Application Insights web testleri ve bileşenleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3d153-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="3d153-138">Günlük analizi (OMS) paylaşılan çalışma alanı anahtarlarının listesi.</span><span class="sxs-lookup"><span data-stu-id="3d153-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="3d153-139">Etkinleştirmek veya devre dışı günlük analizi (OMS) Intelligence paketleri.</span><span class="sxs-lookup"><span data-stu-id="3d153-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="3d153-140">Oluşturma ve silme ve günlük analizi (OMS) kayıtlı aramalar çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="3d153-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="3d153-141">Oluşturun ve günlük analizi (OMS) depolama yapılandırması silin.</span><span class="sxs-lookup"><span data-stu-id="3d153-141">Create and delete the Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="3d153-142">* Kullanıcı ayrıca günlük profil veya tanılama ayarını ayarlamak için ListKeys (depolama hesabı veya olay hub'ad alanı) hedef kaynak üzerindeki izni verilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="3d153-142">*user must also separately be granted ListKeys permission on the target resource (storage account or event hub namespace) to set a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="3d153-143">Bu rol, bir olay hub'ına akışı veya bir depolama hesabında depolanan günlük verileri için okuma erişimi sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="3d153-143">This role does not give read access to log data that has been streamed to an event hub or stored in a storage account.</span></span> <span data-ttu-id="3d153-144">[Aşağıya bakın](#security-considerations-for-monitoring-data) bu kaynaklara erişim yapılandırma hakkında bilgi için.</span><span class="sxs-lookup"><span data-stu-id="3d153-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access to these resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="3d153-145">İzinler ve özel RBAC rolleri izleme</span><span class="sxs-lookup"><span data-stu-id="3d153-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="3d153-146">Yukarıdaki yerleşik roller ekibinizin tam gereksinimlerini karşılamıyorsa, aşağıdakileri yapabilirsiniz [özel RBAC rolü oluşturma](../active-directory/role-based-access-control-custom-roles.md) daha ayrıntılı izinlere sahip.</span><span class="sxs-lookup"><span data-stu-id="3d153-146">If the above built-in roles don’t meet the exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="3d153-147">Açıklamaları ortak Azure İzleyici RBAC işlemleriyle aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="3d153-147">Below are the common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="3d153-148">İşlem</span><span class="sxs-lookup"><span data-stu-id="3d153-148">Operation</span></span> | <span data-ttu-id="3d153-149">Açıklama</span><span class="sxs-lookup"><span data-stu-id="3d153-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3d153-150">Microsoft.Insights/AlertRules/[Read, yazma, silme]</span><span class="sxs-lookup"><span data-stu-id="3d153-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="3d153-151">Okuma/yazma/silme uyarı kuralları.</span><span class="sxs-lookup"><span data-stu-id="3d153-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="3d153-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="3d153-153">Olaylar (tetiklenen uyarı kuralı geçmişini) için uyarı kuralları listesi.</span><span class="sxs-lookup"><span data-stu-id="3d153-153">List incidents (history of the alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="3d153-154">Bu, yalnızca portalına geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-154">This only applies to the portal.</span></span> |
| <span data-ttu-id="3d153-155">Microsoft.Insights/AutoscaleSettings/[Read, yazma, silme]</span><span class="sxs-lookup"><span data-stu-id="3d153-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="3d153-156">Okuma/yazma/silme otomatik ölçeklendirme ayarları.</span><span class="sxs-lookup"><span data-stu-id="3d153-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="3d153-157">Microsoft.Insights/DiagnosticSettings/[Read, yazma, silme]</span><span class="sxs-lookup"><span data-stu-id="3d153-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="3d153-158">Okuma/yazma/silme tanılama ayarları.</span><span class="sxs-lookup"><span data-stu-id="3d153-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="3d153-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="3d153-160">Bu izin, etkinlik günlükleri için portal aracılığıyla erişmek isteyen kullanıcılar için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-160">This permission is necessary for users who need access to Activity Logs via the portal.</span></span> |
| <span data-ttu-id="3d153-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="3d153-162">Bir abonelikte etkinlik günlüğü olayları (Yönetim olayları) listeler.</span><span class="sxs-lookup"><span data-stu-id="3d153-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="3d153-163">Bu izin, etkinlik günlüğü programlı ve portal erişimi için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-163">This permission is applicable to both programmatic and portal access to the Activity Log.</span></span> |
| <span data-ttu-id="3d153-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="3d153-165">Bu izin, etkinlik günlükleri için portal aracılığıyla erişmek isteyen kullanıcılar için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-165">This permission is necessary for users who need access to Activity Logs via the portal.</span></span> |
| <span data-ttu-id="3d153-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="3d153-167">Ölçüm tanımlarını (bir kaynak için kullanılabilir ölçüm türlerinin listesi) okuyun.</span><span class="sxs-lookup"><span data-stu-id="3d153-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="3d153-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="3d153-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="3d153-169">Bir kaynak için ölçümleri okuyun.</span><span class="sxs-lookup"><span data-stu-id="3d153-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="3d153-170">Kullanıcının kaynak türü ve bu kaynağın kapsamını okuma erişimi olan bir kaynak gerektirir uyarıları, tanılama ayarlarını ve ölçümleri erişin.</span><span class="sxs-lookup"><span data-stu-id="3d153-170">Access to alerts, diagnostic settings, and metrics for a resource requires that the user has Read access to the resource type and scope of that resource.</span></span> <span data-ttu-id="3d153-171">("Yazma") oluşturma kullanıcıya, aynı zamanda hedef kaynak üzerindeki ListKeys izne sahip bir depolama hesabı veya olay hub'ları akışlara arşivler tanılama bir ayarı veya günlük profili gerektirir.</span><span class="sxs-lookup"><span data-stu-id="3d153-171">Creating (“write”) a diagnostic setting or log profile that archives to a storage account or streams to event hubs requires the user to also have ListKeys permission on the target resource.</span></span>
> 
> 

<span data-ttu-id="3d153-172">Örneğin, bir "etkinlik günlüğü okuyucusu" şöyle için özel bir RBAC rolü oluşturabilir yukarıdaki tabloyu kullanarak:</span><span class="sxs-lookup"><span data-stu-id="3d153-172">For example, using the above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="3d153-173">Verilerin izlenmesi için güvenlik konuları</span><span class="sxs-lookup"><span data-stu-id="3d153-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="3d153-174">İzleme verilerini — özellikle günlük dosyalarını — IP adresleri veya kullanıcı adları gibi gizli bilgiler içerebilir.</span><span class="sxs-lookup"><span data-stu-id="3d153-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="3d153-175">İzleme verilerini Azure üç temel formlarında gelir:</span><span class="sxs-lookup"><span data-stu-id="3d153-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="3d153-176">Etkinlik, Azure aboneliğinizde tüm denetim düzlemi eylemleri açıklayan günlük.</span><span class="sxs-lookup"><span data-stu-id="3d153-176">The Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="3d153-177">Tanılama günlükleri, bir kaynak tarafından gösterilen günlükleri.</span><span class="sxs-lookup"><span data-stu-id="3d153-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="3d153-178">Kaynaklar tarafından gösterilen ölçümleri.</span><span class="sxs-lookup"><span data-stu-id="3d153-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="3d153-179">Bu veri türlerini üç bir depolama hesabında depolanan veya olay her ikisi de genel amaçlı Azure kaynaklardır Hub'ına akışı.</span><span class="sxs-lookup"><span data-stu-id="3d153-179">All three of these data types can be stored in a storage account or streamed to Event Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="3d153-180">Bu genel amaçlı kaynaklar olduğundan, oluşturma, silme ve bunlara erişmek için bir yönetici genellikle ayrılmış ayrıcalıklı bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="3d153-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="3d153-181">Kötüye kullanımı önlemek için izleme ile ilgili kaynaklar için aşağıdaki yöntemleri kullanmanızı öneririz:</span><span class="sxs-lookup"><span data-stu-id="3d153-181">We suggest that you use the following practices for monitoring-related resources to prevent misuse:</span></span>

* <span data-ttu-id="3d153-182">Bir tek, özel bir depolama hesabı verileri izlemek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="3d153-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="3d153-183">İzleme verilerini birden çok depolama hesabı ayırmak gerekiyorsa, hiçbir zaman bir depolama hesabı izleme arasında kullanımı paylaşabilir ve bu olarak izleme olmayan veri yanlışlıkla yalnızca izleme (ör. verilerine erişmesi gereken olanlar verebilir</span><span class="sxs-lookup"><span data-stu-id="3d153-183">If you need to separate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access to monitoring data (eg.</span></span> <span data-ttu-id="3d153-184">bir üçüncü taraf SIEM) erişimi olmayan izleme için veri.</span><span class="sxs-lookup"><span data-stu-id="3d153-184">a third-party SIEM) access to non-monitoring data.</span></span>
* <span data-ttu-id="3d153-185">Tek ve özel bir hizmet veri yolu veya olay hub'ın ad yukarıdaki gibi aynı nedenden dolayı tüm tanılama ayarlarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="3d153-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for the same reason as above.</span></span>
* <span data-ttu-id="3d153-186">Farklı bir kaynak grubunda tutarak izleme ile ilgili depolama hesapları veya olay hub'ları erişimi sınırlayabilir ve [kapsamı kullan](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) yalnızca o kaynak grubu erişimi sınırlamak için izleme rolleri.</span><span class="sxs-lookup"><span data-stu-id="3d153-186">Limit access to monitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles to limit access to only that resource group.</span></span>
* <span data-ttu-id="3d153-187">Hiçbir zaman ListKeys ya da depolama hesapları için izni veya olay hub'ları abonelik kapsamında bir kullanıcı yalnızca izleme verilerine erişimi olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="3d153-187">Never grant the ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access to monitoring data.</span></span> <span data-ttu-id="3d153-188">(Ayrılmış bir izleme kaynak grubu varsa) bunun yerine, bu izinleri bir kaynak veya kaynak grubu kullanıcıya vermek kapsamı.</span><span class="sxs-lookup"><span data-stu-id="3d153-188">Instead, give these permissions to the user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-to-monitoring-related-storage-accounts"></a><span data-ttu-id="3d153-189">İzleme ile ilgili depolama hesaplarına erişimi sınırlandırma</span><span class="sxs-lookup"><span data-stu-id="3d153-189">Limiting access to monitoring-related storage accounts</span></span>
<span data-ttu-id="3d153-190">Bir kullanıcı veya uygulama İzleme verilerine bir depolama hesabındaki erişim sağlaması gerektiğinde, gereken [bir hesap SAS oluşturmak](https://msdn.microsoft.com/library/azure/mt584140.aspx) depolama hesabındaki blob depolama hizmet düzeyi salt okunur erişimi olan izleme verilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="3d153-190">When a user or application needs access to monitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on the storage account that contains monitoring data with service-level read-only access to blob storage.</span></span> <span data-ttu-id="3d153-191">PowerShell'de, bunu aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="3d153-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="3d153-192">Ardından belirteç varlığa o depolama alanından okunmasını hesabı ve listelemek ve o depolama hesabındaki tüm BLOB'lar okuma olduğunu verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3d153-192">You can then give the token to the entity that needs to read from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="3d153-193">Alternatif olarak, bu izne sahip RBAC denetlemeye ihtiyacınız varsa, o varlık bu belirli depolama hesabı Microsoft.Storage/storageAccounts/listkeys/action izni verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3d153-193">Alternatively, if you need to control this permission with RBAC, you can grant that entity the Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="3d153-194">Bu, tanılama ayarını ayarlayın veya bir depolama hesabına arşivlemek için profil oturum açabilmesi için gereken kullanıcılar için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-194">This is necessary for users who need to be able to set a diagnostic setting or log profile to archive to a storage account.</span></span> <span data-ttu-id="3d153-195">Örneğin, bir kullanıcı veya yalnızca bir depolama hesabından okumak için gereken uygulama için aşağıdaki özel RBAC rolü oluşturabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3d153-195">For example, you could create the following custom RBAC role for a user or application that only needs to read from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get the storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="3d153-196">ListKeys izni kullanıcının birincil ve ikincil depolama hesabı anahtarlarını Listele sağlar.</span><span class="sxs-lookup"><span data-stu-id="3d153-196">The ListKeys permission enables the user to list the primary and secondary storage account keys.</span></span> <span data-ttu-id="3d153-197">Bu anahtarları kullanıcı tüm imzalı izin ver (okuma, yazma, BLOB'ları oluşturmak, silmek BLOB'lar vb.) tüm hizmetleri (blob, kuyruk, tablo, dosya), depolama hesabındaki imzalanmış.</span><span class="sxs-lookup"><span data-stu-id="3d153-197">These keys grant the user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="3d153-198">Mümkün olduğunda yukarıda açıklanan bir hesap SAS kullanılmasını öneririz.</span><span class="sxs-lookup"><span data-stu-id="3d153-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-to-monitoring-related-event-hubs"></a><span data-ttu-id="3d153-199">İzleme ile ilgili olay hub'ları erişimi sınırlandırma</span><span class="sxs-lookup"><span data-stu-id="3d153-199">Limiting access to monitoring-related event hubs</span></span>
<span data-ttu-id="3d153-200">Event hubs ile benzer bir desen izlenebilir, ancak önce adanmış bir dinleme yetkilendirme kuralı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3d153-200">A similar pattern can be followed with event hubs, but first you need to create a dedicated Listen authorization rule.</span></span> <span data-ttu-id="3d153-201">İzleme ile ilgili event hubs'a dinlemek için yalnızca gereken bir uygulamaya erişim vermek istiyorsanız, aşağıdakileri yapın:</span><span class="sxs-lookup"><span data-stu-id="3d153-201">If you want to grant access to an application that only needs to listen to monitoring-related event hubs, do the following:</span></span>

1. <span data-ttu-id="3d153-202">Yalnızca dinleme talepleri ile izleme verilerini akış için oluşturulan olay ölçeklendirecek bir paylaşılan erişim ilkesi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3d153-202">Create a shared access policy on the event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="3d153-203">Bu portalda yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="3d153-203">This can be done in the portal.</span></span> <span data-ttu-id="3d153-204">Örneğin, "monitoringReadOnly." çağırabilirsiniz</span><span class="sxs-lookup"><span data-stu-id="3d153-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="3d153-205">Mümkünse, bu anahtarı doğrudan tüketiciye verin ve bir sonraki adımı atlayın isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="3d153-205">If possible, you will want to give that key directly to the consumer and skip the next step.</span></span>
2. <span data-ttu-id="3d153-206">Tüketici anahtarı geçici almak mümkün olması gerekiyorsa, kullanıcı bu olay hub'ın ListKeys eylem verin.</span><span class="sxs-lookup"><span data-stu-id="3d153-206">If the consumer needs to be able to get the key ad-hoc, grant the user the ListKeys action for that event hub.</span></span> <span data-ttu-id="3d153-207">Bu, aynı zamanda bir tanılama ayarını ayarlayın veya olay hub'ları akışına profili oturum açabilmesi için gereken kullanıcılar için de gereklidir.</span><span class="sxs-lookup"><span data-stu-id="3d153-207">This is also necessary for users who need to be able to set a diagnostic setting or log profile to stream to event hubs.</span></span> <span data-ttu-id="3d153-208">Örneğin, bir RBAC kuralı oluşturabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3d153-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get the key to listen to an event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="3d153-209">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="3d153-209">Next steps</span></span>
* [<span data-ttu-id="3d153-210">RBAC ve izinlerini Kaynak Yöneticisi'ni okuyun</span><span class="sxs-lookup"><span data-stu-id="3d153-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="3d153-211">Azure'da izleme genel bakış bilgileri okuyun</span><span class="sxs-lookup"><span data-stu-id="3d153-211">Read the overview of monitoring in Azure</span></span>](monitoring-overview.md)

