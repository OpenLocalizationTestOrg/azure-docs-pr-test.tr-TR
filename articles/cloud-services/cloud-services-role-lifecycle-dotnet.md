---
title: "aaaHandle bulut hizmeti yaşam döngüsü olayları | Microsoft Docs"
description: "Bir bulut hizmeti rolü hello yaşam döngüsü yöntemlerini .NET içinde nasıl kullanılacağını öğrenin"
services: cloud-services
documentationcenter: .net
author: Thraka
manager: timlt
editor: 
ms.assetid: 39b30acd-57b9-48b7-a7c4-40ea3430e451
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/18/2017
ms.author: adegeo
ms.openlocfilehash: cc0ccc5f055b965202b6e081a6ab72ad5d39b034
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="customize-hello-lifecycle-of-a-web-or-worker-role-in-net"></a><span data-ttu-id="4293e-103">Merhaba .NET Web veya çalışan rolünde ömrünü özelleştirme</span><span class="sxs-lookup"><span data-stu-id="4293e-103">Customize hello Lifecycle of a Web or Worker role in .NET</span></span>
<span data-ttu-id="4293e-104">Çalışan rolü oluşturduğunuzda, hello genişletmek [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) yanıt toolifecycle olayları için izin toooverride yöntemleri sağlayan sınıf.</span><span class="sxs-lookup"><span data-stu-id="4293e-104">When you create a worker role, you extend hello [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) class which provides methods for you toooverride that let you respond toolifecycle events.</span></span> <span data-ttu-id="4293e-105">Toorespond toolifecycle olayları kullanmalısınız web rolleri için bu sınıf isteğe bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="4293e-105">For web roles this class is optional, so you must use it toorespond toolifecycle events.</span></span>

## <a name="extend-hello-roleentrypoint-class"></a><span data-ttu-id="4293e-106">Merhaba RoleEntryPoint sınıfını genişletir</span><span class="sxs-lookup"><span data-stu-id="4293e-106">Extend hello RoleEntryPoint class</span></span>
<span data-ttu-id="4293e-107">Hello [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) sınıfı, Azure tarafından çağrılan yöntemler içerir, bunu **başlatır**, **çalıştıran**, veya **durdurur** web veya çalışan rolü.</span><span class="sxs-lookup"><span data-stu-id="4293e-107">hello [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) class includes methods that are called by Azure when it **starts**, **runs**, or **stops** a web or worker role.</span></span> <span data-ttu-id="4293e-108">İsteğe bağlı olarak, bu yöntemleri toomanage rol başlatma, rol kapatma dizileri veya hello yürütme iş parçacığı hello rolünün kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4293e-108">You can optionally override these methods toomanage role initialization, role shutdown sequences, or hello execution thread of hello role.</span></span> 

<span data-ttu-id="4293e-109">Genişletirken **RoleEntryPoint**, hello yöntemleri davranışlarını aşağıdaki Merhaba bilincinde olmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="4293e-109">When extending **RoleEntryPoint**, you should be aware of hello following behaviors of hello methods:</span></span>

* <span data-ttu-id="4293e-110">Merhaba [OnStart](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx) ve [OnStop](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) yöntemleri olası tooreturn olacak şekilde bir Boole değeri döndürür **false** bu yöntemlerden.</span><span class="sxs-lookup"><span data-stu-id="4293e-110">hello [OnStart](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx) and [OnStop](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) methods return a boolean value, so it is possible tooreturn **false** from these methods.</span></span>
  
   <span data-ttu-id="4293e-111">Kodunuzu döndürürse **false**hello rol işlem beklenmedik şekilde sona erdirildi, tüm kapatma dizisi çalıştırmadan yerinde olabilir.</span><span class="sxs-lookup"><span data-stu-id="4293e-111">If your code returns **false**, hello role process is abruptly terminated, without running any shutdown sequence you may have in place.</span></span> <span data-ttu-id="4293e-112">Genel olarak, döndürme kaçınmalısınız **false** hello gelen **OnStart** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="4293e-112">In general, you should avoid returning **false** from hello **OnStart** method.</span></span>
* <span data-ttu-id="4293e-113">Herhangi bir aşırı yüklemesini içinde özel durum yakalanmamış bir **RoleEntryPoint** yöntemi, işlenmeyen bir özel durum değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="4293e-113">Any uncaught exception within an overload of a **RoleEntryPoint** method is treated as an unhandled exception.</span></span>
  
   <span data-ttu-id="4293e-114">Merhaba yaşam döngüsü yöntemlerden birini içinde bir özel durum oluşursa, Azure hello oluşturacağı [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) olay, ve ardından hello işlemi sonlandırdı.</span><span class="sxs-lookup"><span data-stu-id="4293e-114">If an exception occurs within one of hello lifecycle methods, Azure will raise hello [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) event, and then hello process is terminated.</span></span> <span data-ttu-id="4293e-115">Rolünüze çevrimdışı alındıktan sonra Azure tarafından başlatılır.</span><span class="sxs-lookup"><span data-stu-id="4293e-115">After your role has been taken offline, it will be restarted by Azure.</span></span> <span data-ttu-id="4293e-116">İşlenmeyen bir özel durum oluştuğunda, hello [durdurma](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx) olay başlatılmaz ve hello **OnStop** yöntemi çağrılmaz.</span><span class="sxs-lookup"><span data-stu-id="4293e-116">When an unhandled exception occurs, hello [Stopping](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx) event is not raised, and hello **OnStop** method is not called.</span></span>

<span data-ttu-id="4293e-117">Rolünüze başlamıyor ya da hello arasında meşgul ve durduruluyor durumlarını, başlatma, geri dönüştürme kodunuzun her zaman hello rolü yeniden hello yaşam döngüsü olayları biri içinde işlenmeyen bir özel durum atma.</span><span class="sxs-lookup"><span data-stu-id="4293e-117">If your role does not start, or is recycling between hello initializing, busy, and stopping states, your code may be throwing an unhandled exception within one of hello lifecycle events each time hello role restarts.</span></span> <span data-ttu-id="4293e-118">Bu durumda, hello kullanarak [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) olay toodetermine hello hello özel durumun nedeni olan ve uygun şekilde işlemesine.</span><span class="sxs-lookup"><span data-stu-id="4293e-118">In this case, use hello [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) event toodetermine hello cause of hello exception and handle it appropriately.</span></span> <span data-ttu-id="4293e-119">Rolünüze de hello döndürme [çalıştırmak](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx) hello rol toorestart neden yöntemi.</span><span class="sxs-lookup"><span data-stu-id="4293e-119">Your role may also be returning from hello [Run](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx) method, which causes hello role toorestart.</span></span> <span data-ttu-id="4293e-120">Dağıtım durumları hakkında daha fazla bilgi için bkz: [ortak sorunları neden rolleri tooRecycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md).</span><span class="sxs-lookup"><span data-stu-id="4293e-120">For more information about deployment states, see [Common Issues Which Cause Roles tooRecycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md).</span></span>

> [!NOTE]
> <span data-ttu-id="4293e-121">Merhaba kullanıyorsanız **Azure Araçları için Microsoft Visual Studio** toodevelop, uygulamanızın hello rol proje şablonlarını otomatik olarak hello genişletmek **RoleEntryPoint** hello siziniçinsınıfında*WebRole.cs* ve *WorkerRole.cs* dosyaları.</span><span class="sxs-lookup"><span data-stu-id="4293e-121">If you are using hello **Azure Tools for Microsoft Visual Studio** toodevelop your application, hello role project templates automatically extend hello **RoleEntryPoint** class for you, in hello *WebRole.cs* and *WorkerRole.cs* files.</span></span>
> 
> 

## <a name="onstart-method"></a><span data-ttu-id="4293e-122">OnStart yöntemi</span><span class="sxs-lookup"><span data-stu-id="4293e-122">OnStart method</span></span>
<span data-ttu-id="4293e-123">Merhaba **OnStart** rol örneğinizi Azure tarafından çevrimiçi duruma getirildiğinde yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="4293e-123">hello **OnStart** method is called when your role instance is brought online by Azure.</span></span> <span data-ttu-id="4293e-124">Merhaba OnStart kod yürütülürken hello rol örneği olarak işaretlenmiş **meşgul** ve hiçbir harici trafik hello yük dengeleyici tarafından yönlendirilen tooit olacaktır.</span><span class="sxs-lookup"><span data-stu-id="4293e-124">While hello OnStart code is executing, hello role instance is marked as **Busy** and no external traffic will be directed tooit by hello load balancer.</span></span> <span data-ttu-id="4293e-125">Olay işleyicileri uygulama ve başlatma gibi bu yöntemi tooperform başlatma işi, kılabilirsiniz [Azure tanılama](cloud-services-how-to-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="4293e-125">You can override this method tooperform initialization work, such as implementing event handlers and starting [Azure Diagnostics](cloud-services-how-to-monitor.md).</span></span>

<span data-ttu-id="4293e-126">Varsa **OnStart** döndürür **true**hello örneği başarıyla başlatıldı ve Azure çağırır hello **RoleEntryPoint.Run** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="4293e-126">If **OnStart** returns **true**, hello instance is successfully initialized and Azure calls hello **RoleEntryPoint.Run** method.</span></span> <span data-ttu-id="4293e-127">Varsa **OnStart** döndürür **yanlış**, herhangi bir planlı kapatma dizisini çalıştırmadan hello rol hemen sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="4293e-127">If **OnStart** returns **false**, hello role terminates immediately, without executing any planned shutdown sequences.</span></span>

<span data-ttu-id="4293e-128">Kod örnekteki nasıl aşağıdaki hello toooverride hello **OnStart** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="4293e-128">hello following code example shows how toooverride hello **OnStart** method.</span></span> <span data-ttu-id="4293e-129">Bu yöntem yapılandırır ve hello rol örneğini başlatır ve veri tooa depolama hesabı günlüğü'nün aktarma ayarlar tanı İzleyicisi başlar:</span><span class="sxs-lookup"><span data-stu-id="4293e-129">This method configures and starts a diagnostic monitor when hello role instance starts and sets up a transfer of logging data tooa storage account:</span></span>

```csharp
public override bool OnStart()
{
    var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

    config.DiagnosticInfrastructureLogs.ScheduledTransferLogLevelFilter = LogLevel.Error;
    config.DiagnosticInfrastructureLogs.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

    DiagnosticMonitor.Start("DiagnosticsConnectionString", config);

    return true;
}
```

## <a name="onstop-method"></a><span data-ttu-id="4293e-130">OnStop yöntemi</span><span class="sxs-lookup"><span data-stu-id="4293e-130">OnStop method</span></span>
<span data-ttu-id="4293e-131">Merhaba **OnStop** yöntemi, bir rol örneği Azure tarafından ve çıkılıyor hello önce çevrimdışı alındıktan sonra çağrılır.</span><span class="sxs-lookup"><span data-stu-id="4293e-131">hello **OnStop** method is called after a role instance has been taken offline by Azure and before hello process exits.</span></span> <span data-ttu-id="4293e-132">Bu yöntemi toocall kodu kapatmak, rol örneği toocleanly için gerekli kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4293e-132">You can override this method toocall code required for your role instance toocleanly shut down.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4293e-133">Hello çalışan kodu **OnStop** yöntemi nedeniyle kullanıcı tarafından başlatılan bir kapatma dışında çağrıldığında sınırlı bir süre toofinish sahiptir.</span><span class="sxs-lookup"><span data-stu-id="4293e-133">Code running in hello **OnStop** method has a limited time toofinish when it is called for reasons other than a user-initiated shutdown.</span></span> <span data-ttu-id="4293e-134">Bu süre geçtikten sonra bu kodu hello olmanız gerekir böylece hello işlemin, sonlandırıldığından **OnStop** yöntemi çalışmıyor toocompletion göstereceği veya hızlı bir şekilde çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4293e-134">After this time elapses, hello process is terminated, so you must make sure that code in hello **OnStop** method can run quickly or tolerates not running toocompletion.</span></span> <span data-ttu-id="4293e-135">Merhaba **OnStop** yöntemi çağrıldıktan sonra hello **durdurma** olayı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="4293e-135">hello **OnStop** method is called after hello **Stopping** event is raised.</span></span>
> 
> 

## <a name="run-method"></a><span data-ttu-id="4293e-136">Run yöntemi</span><span class="sxs-lookup"><span data-stu-id="4293e-136">Run method</span></span>
<span data-ttu-id="4293e-137">Merhaba kılabilirsiniz **çalıştırmak** yöntemi tooimplement rol örneği için uzun süre çalışan iş parçacığı.</span><span class="sxs-lookup"><span data-stu-id="4293e-137">You can override hello **Run** method tooimplement a long-running thread for your role instance.</span></span>

<span data-ttu-id="4293e-138">Merhaba geçersiz kılma **çalıştırmak** yöntemi gerekli değildir; hello varsayılan uygulaması sonsuza kadar uyku bir iş parçacığı başlatır.</span><span class="sxs-lookup"><span data-stu-id="4293e-138">Overriding hello **Run** method is not required; hello default implementation starts a thread that sleeps forever.</span></span> <span data-ttu-id="4293e-139">Merhaba geçersiz kılarsanız **çalıştırmak** yöntemi, kodunuzu engelleme süresiz olarak.</span><span class="sxs-lookup"><span data-stu-id="4293e-139">If you do override hello **Run** method, your code should block indefinitely.</span></span> <span data-ttu-id="4293e-140">Merhaba, **çalıştırmak** yöntemi döndürür, hello rolü otomatik olarak düzgün bir şekilde geri dönüştürüldüğünde; diğer bir deyişle, Azure başlatır hello **durdurma** olay ve çağrıları hello **OnStop** yöntemi için kapatma dizileriniz hello rolü önce yürütülebilecek çevrimdışı hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="4293e-140">If hello **Run** method returns, hello role is automatically gracefully recycled; in other words, Azure raises hello **Stopping** event and calls hello **OnStop** method so that your shutdown sequences may be executed before hello role is taken offline.</span></span>

### <a name="implementing-hello-aspnet-lifecycle-methods-for-a-web-role"></a><span data-ttu-id="4293e-141">Web rolü için uygulama hello ASP.NET yaşam döngüsü yöntemleri</span><span class="sxs-lookup"><span data-stu-id="4293e-141">Implementing hello ASP.NET lifecycle methods for a web role</span></span>
<span data-ttu-id="4293e-142">Ayrıca toothose hello tarafından sağlanan hello ASP.NET yaşam döngüsü yöntemleri kullanabilirsiniz **RoleEntryPoint** sınıfı, bir web rolü için toomanage başlatma ve kapatma serileri.</span><span class="sxs-lookup"><span data-stu-id="4293e-142">You can use hello ASP.NET lifecycle methods, in addition toothose provided by hello **RoleEntryPoint** class, toomanage initialization and shutdown sequences for a web role.</span></span> <span data-ttu-id="4293e-143">Mevcut bir ASP.NET uygulaması tooAzure bağlantı noktası oluşturma, bu uyumluluk amacıyla yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="4293e-143">This may be useful for compatibility purposes if you are porting an existing ASP.NET application tooAzure.</span></span> <span data-ttu-id="4293e-144">Merhaba ASP.NET yaşam döngüsü yöntemleri hello içinde çağrılır **RoleEntryPoint** yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="4293e-144">hello ASP.NET lifecycle methods are called from within hello **RoleEntryPoint** methods.</span></span> <span data-ttu-id="4293e-145">Merhaba **uygulama\_Başlat** yöntemi çağrıldıktan sonra hello **RoleEntryPoint.OnStart** yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="4293e-145">hello **Application\_Start** method is called after hello **RoleEntryPoint.OnStart** method finishes.</span></span> <span data-ttu-id="4293e-146">Merhaba **uygulama\_son** yöntemi çağrılmadan önce hello **RoleEntryPoint.OnStop** yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="4293e-146">hello **Application\_End** method is called before hello **RoleEntryPoint.OnStop** method is called.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4293e-147">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="4293e-147">Next steps</span></span>
<span data-ttu-id="4293e-148">Nasıl çok öğrenin[bir bulut hizmet paketi oluşturma](cloud-services-model-and-package.md).</span><span class="sxs-lookup"><span data-stu-id="4293e-148">Learn how too[create a cloud service package](cloud-services-model-and-package.md).</span></span>

