---
title: bir bulut hizmeti aaaHow tooupdate | Microsoft Docs
description: "Tooupdate bulut Azure hizmetleri nasıl öğrenin. Bir bulut hizmeti üzerinde güncelleştirme tooensure kullanılabilirlik nasıl geçer öğrenin."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 7e4c8bd46e51a555b4309ea8927d120e8efcf0ea
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooupdate-a-cloud-service"></a><span data-ttu-id="fbb7b-104">Nasıl tooupdate bir bulut hizmeti</span><span class="sxs-lookup"><span data-stu-id="fbb7b-104">How tooupdate a cloud service</span></span>

<span data-ttu-id="fbb7b-105">Kendi rolleri ve konuk işletim sistemi, dahil olmak üzere bir bulut hizmeti güncelleştirme üç adım bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="fbb7b-106">İlk olarak, hello ikili dosyaları ve yapılandırma dosyalarını hello yeni bulut hizmeti veya işletim sistemi sürümü yüklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-106">First, hello binaries and configuration files for hello new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="fbb7b-107">Ardından, Azure hello gereksinimlerine göre hello yeni bulut hizmeti sürümü hello bulut hizmeti için işlem ve ağ kaynakları ayırır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-107">Next, Azure reserves compute and network resources for hello cloud service based on hello requirements of hello new cloud service version.</span></span> <span data-ttu-id="fbb7b-108">Son olarak, Azure çalışırken yükseltme tooincrementally güncelleştirme hello Kiracı toohello yeni sürümü ya da konuk işletim sistemi, kullanılabilirliği koruyarak gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-108">Finally, Azure performs a rolling upgrade tooincrementally update hello tenant toohello new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="fbb7b-109">Bu makalede bu son adım – yükseltmesinde hello hello ayrıntılarını anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-109">This article discusses hello details of this last step – hello rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="fbb7b-110">Bir Azure hizmetini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="fbb7b-110">Update an Azure Service</span></span>
<span data-ttu-id="fbb7b-111">Azure rolü örneklerinizi yükseltme etki alanları (UD) adı verilen mantıksal gruplar düzenler.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="fbb7b-112">Yükseltme etki alanları (UD) bir grup olarak güncelleştirilen rol örnekleri mantıksal kümeleridir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="fbb7b-113">Bulut bir Azure güncelleştirmeleri bir UD, her seferinde diğer UDs toocontinue trafiği hizmet örnekleri sağlayan hizmet.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs toocontinue serving traffic.</span></span>

<span data-ttu-id="fbb7b-114">Merhaba varsayılan yükseltme etki alanlarının sayısı 5'tir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-114">hello default number of upgrade domains is 5.</span></span> <span data-ttu-id="fbb7b-115">Merhaba hizmetin tanım dosyası (.csdef) hello upgradeDomainCount özniteliği dahil olmak üzere farklı bir yükseltme etki alanlarının sayısını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-115">You can specify a different number of upgrade domains by including hello upgradeDomainCount attribute in hello service’s definition file (.csdef).</span></span> <span data-ttu-id="fbb7b-116">Merhaba upgradeDomainCount özniteliği hakkında daha fazla bilgi için bkz: [WebRole şema](https://msdn.microsoft.com/library/azure/gg557553.aspx) veya [örn şema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-116">For more information about hello upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="fbb7b-117">Bir veya daha fazla rolün bir yerinde güncelleştirme hizmetinizi gerçekleştirdiğinizde, ait oldukları yükseltme etki alanı toowhich toohello göre rol örnekleri kümesi Azure güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according toohello upgrade domain toowhich they belong.</span></span> <span data-ttu-id="fbb7b-118">Tüm bunları getirilmesi güncelleştirme onları durdurma belirli bir yükseltme etki alanındaki – hello örneklerinin çevrimiçi – geri azure güncelleştirmeleri sonra hello sonraki etki alanında oturum taşır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-118">Azure updates all of hello instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto hello next domain.</span></span> <span data-ttu-id="fbb7b-119">Etki alanı yükseltme Hello geçerli çalışan yalnızca hello örnekleri durdurarak, Azure bir güncelleştirme hizmetini çalıştıran hello olabildiğince az etkisi toohello olduğunda emin olur.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-119">By stopping only hello instances running in hello current upgrade domain, Azure makes sure that an update occurs with hello least possible impact toohello running service.</span></span> <span data-ttu-id="fbb7b-120">Daha fazla bilgi için bkz: [nasıl hello güncelleştirme işlemi devam eder](#howanupgradeproceeds) bu makalenin ilerisinde yer.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-120">For more information, see [How hello update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="fbb7b-121">While hello koşulları **güncelleştirme** ve **yükseltme** Azure hello bağlamda biraz farklı bir anlama sahip, hello işlemleri ve bu belgedeki hello özelliklerin açıklamaları için birbirinin yerine kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-121">While hello terms **update** and **upgrade** have slightly different meaning in hello context Azure, they can be used interchangeably for hello processes and descriptions of hello features in this document.</span></span>
>
>

<span data-ttu-id="fbb7b-122">Hizmetiniz bir rol, rol güncelleştirilmiş toobe yerinde kapalı kalma süresi olmadan için en az iki örnek tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-122">Your service must define at least two instances of a role for that role toobe updated in-place without downtime.</span></span> <span data-ttu-id="fbb7b-123">Merhaba hizmeti bir rolü yalnızca bir örneği oluşuyorsa, hello yerinde güncelleştirme tamamlanana kadar hizmet kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-123">If hello service consists of only one instance of one role, your service will be unavailable until hello in-place update has finished.</span></span>

<span data-ttu-id="fbb7b-124">Bu konu Azure güncelleştirmeler hakkında bilgi aşağıdaki hello şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-124">This topic covers hello following information about Azure updates:</span></span>

* [<span data-ttu-id="fbb7b-125">Hizmet değişikliklerini güncelleştirme sırasında izin verilen</span><span class="sxs-lookup"><span data-stu-id="fbb7b-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="fbb7b-126">Nasıl bir yükseltme işlemi devam eder</span><span class="sxs-lookup"><span data-stu-id="fbb7b-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="fbb7b-127">Bir güncelleştirme geri alma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="fbb7b-128">Devam eden bir dağıtımda birden çok mutating işlemleri başlatma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="fbb7b-129">Yükseltme etki alanları arasında rollerin dağıtım</span><span class="sxs-lookup"><span data-stu-id="fbb7b-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="fbb7b-130">Hizmet değişikliklerini güncelleştirme sırasında izin verilen</span><span class="sxs-lookup"><span data-stu-id="fbb7b-130">Allowed service changes during an update</span></span>
<span data-ttu-id="fbb7b-131">Merhaba aşağıdaki tabloda hello değişiklikleri tooa hizmet güncelleştirme sırasında izin verilen gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-131">hello following table shows hello allowed changes tooa service during an update:</span></span>

| <span data-ttu-id="fbb7b-132">Toohosting, hizmetler ve roller izin değişiklikleri</span><span class="sxs-lookup"><span data-stu-id="fbb7b-132">Changes permitted toohosting, services, and roles</span></span> | <span data-ttu-id="fbb7b-133">Yerinde güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="fbb7b-133">In-place update</span></span> | <span data-ttu-id="fbb7b-134">Hazırlanmış (VIP takas)</span><span class="sxs-lookup"><span data-stu-id="fbb7b-134">Staged (VIP swap)</span></span> | <span data-ttu-id="fbb7b-135">Silme ve yeniden Dağıt</span><span class="sxs-lookup"><span data-stu-id="fbb7b-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="fbb7b-136">İşletim sistemi sürümü</span><span class="sxs-lookup"><span data-stu-id="fbb7b-136">Operating system version</span></span> |<span data-ttu-id="fbb7b-137">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-137">Yes</span></span> |<span data-ttu-id="fbb7b-138">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-138">Yes</span></span> |<span data-ttu-id="fbb7b-139">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-139">Yes</span></span> |
| <span data-ttu-id="fbb7b-140">.NET güven düzeyi</span><span class="sxs-lookup"><span data-stu-id="fbb7b-140">.NET trust level</span></span> |<span data-ttu-id="fbb7b-141">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-141">Yes</span></span> |<span data-ttu-id="fbb7b-142">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-142">Yes</span></span> |<span data-ttu-id="fbb7b-143">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-143">Yes</span></span> |
| <span data-ttu-id="fbb7b-144">Sanal makine boyutu<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="fbb7b-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="fbb7b-145">Evet<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="fbb7b-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="fbb7b-146">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-146">Yes</span></span> |<span data-ttu-id="fbb7b-147">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-147">Yes</span></span> |
| <span data-ttu-id="fbb7b-148">Yerel depolama ayarları</span><span class="sxs-lookup"><span data-stu-id="fbb7b-148">Local storage settings</span></span> |<span data-ttu-id="fbb7b-149">Yalnızca artırmak<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="fbb7b-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="fbb7b-150">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-150">Yes</span></span> |<span data-ttu-id="fbb7b-151">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-151">Yes</span></span> |
| <span data-ttu-id="fbb7b-152">Rolleri bir hizmet olarak ekleyip</span><span class="sxs-lookup"><span data-stu-id="fbb7b-152">Add or remove roles in a service</span></span> |<span data-ttu-id="fbb7b-153">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-153">Yes</span></span> |<span data-ttu-id="fbb7b-154">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-154">Yes</span></span> |<span data-ttu-id="fbb7b-155">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-155">Yes</span></span> |
| <span data-ttu-id="fbb7b-156">Belirli bir rol örneklerinin sayısını</span><span class="sxs-lookup"><span data-stu-id="fbb7b-156">Number of instances of a particular role</span></span> |<span data-ttu-id="fbb7b-157">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-157">Yes</span></span> |<span data-ttu-id="fbb7b-158">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-158">Yes</span></span> |<span data-ttu-id="fbb7b-159">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-159">Yes</span></span> |
| <span data-ttu-id="fbb7b-160">Sayı veya bir hizmet için uç nokta türü</span><span class="sxs-lookup"><span data-stu-id="fbb7b-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="fbb7b-161">Evet<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="fbb7b-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="fbb7b-162">Hayır</span><span class="sxs-lookup"><span data-stu-id="fbb7b-162">No</span></span> |<span data-ttu-id="fbb7b-163">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-163">Yes</span></span> |
| <span data-ttu-id="fbb7b-164">Adları ve yapılandırma ayarlarının değerleri</span><span class="sxs-lookup"><span data-stu-id="fbb7b-164">Names and values of configuration settings</span></span> |<span data-ttu-id="fbb7b-165">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-165">Yes</span></span> |<span data-ttu-id="fbb7b-166">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-166">Yes</span></span> |<span data-ttu-id="fbb7b-167">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-167">Yes</span></span> |
| <span data-ttu-id="fbb7b-168">Değerleri (ancak değil adları) yapılandırma ayarları</span><span class="sxs-lookup"><span data-stu-id="fbb7b-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="fbb7b-169">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-169">Yes</span></span> |<span data-ttu-id="fbb7b-170">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-170">Yes</span></span> |<span data-ttu-id="fbb7b-171">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-171">Yes</span></span> |
| <span data-ttu-id="fbb7b-172">Yeni sertifika Ekle</span><span class="sxs-lookup"><span data-stu-id="fbb7b-172">Add new certificates</span></span> |<span data-ttu-id="fbb7b-173">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-173">Yes</span></span> |<span data-ttu-id="fbb7b-174">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-174">Yes</span></span> |<span data-ttu-id="fbb7b-175">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-175">Yes</span></span> |
| <span data-ttu-id="fbb7b-176">Mevcut sertifikalarını değiştirme</span><span class="sxs-lookup"><span data-stu-id="fbb7b-176">Change existing certificates</span></span> |<span data-ttu-id="fbb7b-177">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-177">Yes</span></span> |<span data-ttu-id="fbb7b-178">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-178">Yes</span></span> |<span data-ttu-id="fbb7b-179">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-179">Yes</span></span> |
| <span data-ttu-id="fbb7b-180">Yeni kod dağıtın</span><span class="sxs-lookup"><span data-stu-id="fbb7b-180">Deploy new code</span></span> |<span data-ttu-id="fbb7b-181">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-181">Yes</span></span> |<span data-ttu-id="fbb7b-182">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-182">Yes</span></span> |<span data-ttu-id="fbb7b-183">Evet</span><span class="sxs-lookup"><span data-stu-id="fbb7b-183">Yes</span></span> |

<span data-ttu-id="fbb7b-184"><sup>1</sup> boyutu değişikliği sınırlı toohello alt boyutlarının hello bulut hizmeti için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-184"><sup>1</sup> Size change limited toohello subset of sizes available for hello cloud service.</span></span>

<span data-ttu-id="fbb7b-185"><sup>2</sup> Azure SDK 1.5 gerektirir veya sonraki sürümler.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="fbb7b-186">Merhaba sanal makine boyutunu değiştirme yerel verileri silecektir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-186">Changing hello virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="fbb7b-187">Aşağıdaki öğelerindeki hello güncelleştirme sırasında desteklenmez:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-187">hello following items are not supported during an update:</span></span>

* <span data-ttu-id="fbb7b-188">Bir rolü Hello adının değiştirilmesi.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-188">Changing hello name of a role.</span></span> <span data-ttu-id="fbb7b-189">Kaldırın ve ardından hello Yeni adla hello rolünü ekleyin.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-189">Remove and then add hello role with hello new name.</span></span>
* <span data-ttu-id="fbb7b-190">Merhaba yükseltme etki alanı sayısı değiştirme.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-190">Changing of hello Upgrade Domain count.</span></span>
* <span data-ttu-id="fbb7b-191">Merhaba yerel kaynaklar Hello boyutunu azaltma.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-191">Decreasing hello size of hello local resources.</span></span>

<span data-ttu-id="fbb7b-192">Yerel kaynak hello boyutunu azaltmak gibi tooyour hizmetin tanımı, diğer güncelleştirmeleri yapıyorsanız bir VIP takas güncelleştirmesi yerine gerçekleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-192">If you are making other updates tooyour service's definition, such as decreasing hello size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="fbb7b-193">Daha fazla bilgi için bkz: [takas dağıtım](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="fbb7b-194">Nasıl bir yükseltme işlemi devam eder</span><span class="sxs-lookup"><span data-stu-id="fbb7b-194">How an upgrade proceeds</span></span>
<span data-ttu-id="fbb7b-195">Tooupdate isteyip istemediğinize karar verebilirsiniz tüm hizmetiniz hello rollerinde veya hello hizmetindeki tek bir rol.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-195">You can decide whether you want tooupdate all of hello roles in your service or a single role in hello service.</span></span> <span data-ttu-id="fbb7b-196">Her iki durumda da, yükseltilmekte olan ve toohello ilk yükseltme etki alanına ait her bir rol tüm örneklerini durduruldu, yükseltme ve tekrar çevrimiçi.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-196">In either case, all instances of each role that is being upgraded and belong toohello first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="fbb7b-197">Yeniden çevrimiçi olduktan sonra hello hello ikinci yükseltme etki alanındaki örnekleri durduruldu, yükseltme ve çevrimiçi duruma geri.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-197">Once they are back online, hello instances in hello second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="fbb7b-198">Bir bulut hizmeti en çok bir yükseltme aynı anda etkin olabilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="fbb7b-199">Merhaba yükseltme her zaman hello en son sürümünü hello bulut hizmeti karşı gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-199">hello upgrade is always performed against hello latest version of hello cloud service.</span></span>

<span data-ttu-id="fbb7b-200">Merhaba Aşağıdaki diyagramda tüm hello hizmetindeki hello rollerin yükseltiyorsanız nasıl hello yükseltme işlemi devam eder gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-200">hello following diagram illustrates how hello upgrade proceeds if you are upgrading all of hello roles in hello service:</span></span>

<span data-ttu-id="fbb7b-201">![Hizmet yükseltme](media/cloud-services-update-azure-service/IC345879.png "yükseltme hizmeti")</span><span class="sxs-lookup"><span data-stu-id="fbb7b-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="fbb7b-202">Sonraki Bu diyagramda, yalnızca tek bir rol yükseltiyorsanız nasıl hello güncelleştirme işlemi devam eder gösterilir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-202">This next diagram illustrates how hello update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="fbb7b-203">![Yükseltme rol](media/cloud-services-update-azure-service/IC345880.png "yükseltme rolü")</span><span class="sxs-lookup"><span data-stu-id="fbb7b-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="fbb7b-204">Cihazın güvenli toowalk hello olduğunda sonraki UD bir otomatik güncelleştirme sırasında hello Azure yapı denetleyicisi hello bulut hizmeti toodetermine hello durumunu düzenli aralıklarla değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-204">During an automatic update, hello Azure Fabric Controller periodically evaluates hello health of hello cloud service toodetermine when it’s safe toowalk hello next UD.</span></span> <span data-ttu-id="fbb7b-205">Bu sistem durumu değerlendirmesi bir rol başına temelinde gerçekleştirilir ve hello en son sürüm (yani zaten gitti UDs örneklerinden) yalnızca örnekleri göz önünde bulundurur.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-205">This health evaluation is performed on a per-role basis and considers only instances in hello latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="fbb7b-206">Olduğunu doğrular en az sayıda her rol için rol örneği elde tatmin edici terminal durumuna.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="fbb7b-207">Rol örneği başlangıç zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="fbb7b-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="fbb7b-208">Merhaba doku denetleyicisi her rol örneği tooreach Başlatıldı durumuna 30 dakika bekler.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-208">hello Fabric Controller will wait 30 minutes for each role instance tooreach a Started state.</span></span> <span data-ttu-id="fbb7b-209">Merhaba zaman aşımı süresi aşılırsa, hello doku denetleyicisi toohello sonraki rol örneği taramasını devam eder.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-209">If hello timeout duration elapses, hello Fabric Controller will continue walking toohello next role instance.</span></span>

### <a name="impact-toodrive-data-during-cloud-service-upgrades"></a><span data-ttu-id="fbb7b-210">Bulut hizmeti yükseltme sırasında etkisi toodrive verileri</span><span class="sxs-lookup"><span data-stu-id="fbb7b-210">Impact toodrive data during Cloud Service upgrades</span></span>

<span data-ttu-id="fbb7b-211">Bir hizmet hello yükseltme toohello şekilde Azure Hizmetleri yükseltme gerçekleştirilirken hizmetinizi gidersiniz aşağı tek örnek toomultiple örnekleri yükseltirken.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-211">When upgrading a service from a single instance toomultiple instances your service will be brought down while hello upgrade is performed due toohello way Azure upgrades services.</span></span> <span data-ttu-id="fbb7b-212">Merhaba hizmet düzeyi sözleşmesi güvence altına almak hizmet kullanılabilirliği, yalnızca birden fazla örneği ile dağıtılan tooservices geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-212">hello service level agreement guaranteeing service availability only applies tooservices that are deployed with more than one instance.</span></span> <span data-ttu-id="fbb7b-213">Merhaba aşağıdaki listede her sürücüde hello veri her Azure hizmet yükseltme senaryosu tarafından nasıl etkilendiğini açıklanmaktadır:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-213">hello following list describes how hello data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="fbb7b-214">Senaryo</span><span class="sxs-lookup"><span data-stu-id="fbb7b-214">Scenario</span></span>|<span data-ttu-id="fbb7b-215">C sürücüsü</span><span class="sxs-lookup"><span data-stu-id="fbb7b-215">C Drive</span></span>|<span data-ttu-id="fbb7b-216">D sürücüsü</span><span class="sxs-lookup"><span data-stu-id="fbb7b-216">D Drive</span></span>|<span data-ttu-id="fbb7b-217">E sürücüsü</span><span class="sxs-lookup"><span data-stu-id="fbb7b-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="fbb7b-218">VM yeniden başlatma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-218">VM reboot</span></span>|<span data-ttu-id="fbb7b-219">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-219">Preserved</span></span>|<span data-ttu-id="fbb7b-220">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-220">Preserved</span></span>|<span data-ttu-id="fbb7b-221">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-221">Preserved</span></span>|
|<span data-ttu-id="fbb7b-222">Portal yeniden başlatma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-222">Portal reboot</span></span>|<span data-ttu-id="fbb7b-223">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-223">Preserved</span></span>|<span data-ttu-id="fbb7b-224">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-224">Preserved</span></span>|<span data-ttu-id="fbb7b-225">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-225">Destroyed</span></span>|
|<span data-ttu-id="fbb7b-226">Portal yeniden görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-226">Portal reimage</span></span>|<span data-ttu-id="fbb7b-227">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-227">Preserved</span></span>|<span data-ttu-id="fbb7b-228">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-228">Destroyed</span></span>|<span data-ttu-id="fbb7b-229">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-229">Destroyed</span></span>|
|<span data-ttu-id="fbb7b-230">Yerinde yükseltme</span><span class="sxs-lookup"><span data-stu-id="fbb7b-230">In-Place Upgrade</span></span>|<span data-ttu-id="fbb7b-231">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-231">Preserved</span></span>|<span data-ttu-id="fbb7b-232">Korunur</span><span class="sxs-lookup"><span data-stu-id="fbb7b-232">Preserved</span></span>|<span data-ttu-id="fbb7b-233">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-233">Destroyed</span></span>|
|<span data-ttu-id="fbb7b-234">Düğüm geçiş</span><span class="sxs-lookup"><span data-stu-id="fbb7b-234">Node migration</span></span>|<span data-ttu-id="fbb7b-235">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-235">Destroyed</span></span>|<span data-ttu-id="fbb7b-236">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-236">Destroyed</span></span>|<span data-ttu-id="fbb7b-237">Yok</span><span class="sxs-lookup"><span data-stu-id="fbb7b-237">Destroyed</span></span>|

<span data-ttu-id="fbb7b-238">Merhaba listesinin hello E: sürücü hello rolün kök sürücüsünde temsil eder ve sabit kodlanmış olmamalıdır, unutmayın.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-238">Note that, in hello above list, hello E: drive represents hello role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="fbb7b-239">Bunun yerine, hello kullanın **RoleRoot %** ortam değişkeni toorepresent hello sürücü.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-239">Instead, use hello **%RoleRoot%** environment variable toorepresent hello drive.</span></span>

<span data-ttu-id="fbb7b-240">Tek Örnekli bir hizmeti yükseltirken toominimize hello kapalı kalma süresi, yeni bir çok örnekli hizmet toohello Hazırlama sunucusu dağıtmak ve bir VIP takası gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-240">toominimize hello downtime when upgrading a single-instance service, deploy a new multi-instance service toohello staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="fbb7b-241">Bir güncelleştirme geri alma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-241">Rollback of an update</span></span>
<span data-ttu-id="fbb7b-242">Azure Hizmetleri hello ilk güncelleştirme isteği hello Azure yapı denetleyicisi tarafından kabul edildikten sonra bir hizmete ek işlemleri başlatmak izin vererek güncelleştirme sırasında yönetme esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after hello initial update request is accepted by hello Azure Fabric Controller.</span></span> <span data-ttu-id="fbb7b-243">Bir geri alma, yalnızca bir güncelleştirme olduğunda (yapılandırma değişikliği) gerçekleştirilebilir veya yükseltmedir hello **devam eden** hello dağıtımda durum.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-243">A rollback can only be performed when an update (configuration change) or upgrade is in hello **in progress** state on hello deployment.</span></span> <span data-ttu-id="fbb7b-244">En az bir örnek henüz güncelleştirilmiş toohello yeni sürüm edilmemiş hello hizmetinin var olduğu sürece toobe süren bir güncelleştirme veya yükseltme olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-244">An update or upgrade is considered toobe in-progress as long as there is at least one instance of hello service which has not yet been updated toohello new version.</span></span> <span data-ttu-id="fbb7b-245">tootest geri almaya izin verilip verilmeyeceğini hello değeri tarafından döndürülen hello RollbackAllowed bayrağı denetleyin [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx) işlemleri tootrue ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-245">tootest whether a rollback is allowed, check hello value of hello RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set tootrue.</span></span>

> [!NOTE]
> <span data-ttu-id="fbb7b-246">Yalnızca anlamlı toocall geri alma üzerinde kolaylaştırır bir **yerinde** güncelleştirmek veya bir çalışan örneğinin tamamını hizmetinizi diğeriyle VIP takas yükseltmeler içerdiğinden dolayı yükseltin.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-246">It only makes sense toocall Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="fbb7b-247">Geri alma devam eden güncelleştirme hello dağıtım etkileri aşağıdaki hello sahiptir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-247">Rollback of an in-progress update has hello following effects on hello deployment:</span></span>

* <span data-ttu-id="fbb7b-248">Güncelleştirilmiş veya yükseltilmiş toohello yeni sürüm henüz yüklenmiş değil tüm rol örneklerinin güncelleştirilmez veya bu örneklerde hello hedef hello hizmetinin sürümü zaten çalıştığından, yükseltme.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-248">Any role instances which had not yet been updated or upgraded toohello new version are not updated or upgraded, because those instances are already running hello target version of hello service.</span></span>
* <span data-ttu-id="fbb7b-249">Hangi zaten güncelleştirilmişse veya yükseltilmiş toohello yeni hello hizmet paketi sürümünü herhangi bir rol örnekleri (\*.cspkg) dosyası ya da hello hizmet yapılandırması (\*.cscfg) dosya (veya her iki dosya) olan döndürülen toohello yükseltme öncesi sürümü Bu dosyalar.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-249">Any role instances which had already been updated or upgraded toohello new version of hello service package (\*.cspkg) file or hello service configuration (\*.cscfg) file (or both files) are reverted toohello pre-upgrade version of these files.</span></span>

<span data-ttu-id="fbb7b-250">Bu, işlevsel olarak özellikler aşağıdaki hello tarafından sağlanır:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-250">This functionally is provided by hello following features:</span></span>

* <span data-ttu-id="fbb7b-251">Merhaba [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) bir yapılandırma güncelleştirme çağrılabilir işlemi (çağırarak tetiklenen [dağıtım yapılandırmasını değiştirme](https://msdn.microsoft.com/library/azure/ee460809.aspx)) veya yükseltme (çağırarak tetiklenen [ Yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx)) var olduğu sürece en az bir örnek hello hizmetinde toohello yeni sürüm henüz değiştirilmediğinden güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-251">hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in hello service which has not yet been updated toohello new version.</span></span>
* <span data-ttu-id="fbb7b-252">Merhaba hello yanıt gövdesi bir parçası olarak döndürülen kilitli öğe ve hello RollbackAllowed öğenin hello [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx) işlemleri:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-252">hello Locked element and hello RollbackAllowed element, which are returned as part of hello response body of hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="fbb7b-253">mutating işlemi üzerinde belirli bir dağıtım çağrılabilir olduğunda hello kilitli öğesi toodetect izin verir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-253">hello Locked element allows you toodetect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="fbb7b-254">Merhaba RollbackAllowed öğesi toodetect hello olduğunda sağlar [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) işlemi üzerinde belirli bir dağıtım çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-254">hello RollbackAllowed element allows you toodetect when hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="fbb7b-255">Sipariş tooperform bir geri alma, kilitli hello hem RollbackAllowed öğeleri hello toocheck gerekmez.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-255">In order tooperform a rollback, you do not have toocheck both hello Locked and hello RollbackAllowed elements.</span></span> <span data-ttu-id="fbb7b-256">RollbackAllowed tootrue ayarlandığını tooconfirm soneklerini.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-256">It suffices tooconfirm that RollbackAllowed is set tootrue.</span></span> <span data-ttu-id="fbb7b-257">Bu yöntemler hello istek üstbilgisi çok ayarlamak kullanarak çağrılan bu öğeleri yalnızca döndürülür "x-ms-version: 2011-10-01" veya sonraki bir sürümü.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-257">These elements are only returned if these methods are invoked by using hello request header set too“x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="fbb7b-258">Sürüm oluşturma üstbilgileri hakkında daha fazla bilgi için bkz: [Hizmet Yönetimi sürüm](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="fbb7b-259">Bazı durumlar vardır geri alma bir güncelleştirme olduğunda veya yükseltme desteklenmiyor, bunlar şu şekildedir:</span><span class="sxs-lookup"><span data-stu-id="fbb7b-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="fbb7b-260">Yerel kaynaklar - azalma hello güncelleştirme artar hello yerel kaynakları bir rol için Azure platformu hello durumunda izin vermiyor geri alınıyor.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-260">Reduction in local resources - If hello update increases hello local resources for a role hello Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="fbb7b-261">Kota sınırlamaları - hello güncelleştirme işlemi artık olabilecek bir ölçek ise yeterli işlem kota toocomplete hello geri alma işlemi vardır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-261">Quota limitations - If hello update was a scale down operation you may no longer have sufficient compute quota toocomplete hello rollback operation.</span></span> <span data-ttu-id="fbb7b-262">Her Azure aboneliği hello en yüksek toothat abonelik ait tüm barındırılan hizmetler tarafından kullanılan çekirdek sayısı belirtir kendisiyle ilişkili bir kota sahiptir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-262">Each Azure subscription has a quota associated with it that specifies hello maximum number of cores which can be consumed by all hosted services that belong toothat subscription.</span></span> <span data-ttu-id="fbb7b-263">Verilen güncelleştirmesi işlemin geri alınmasının aboneliğinizi kota sonra koyabilirsiniz, bir geri alma etkin değil.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="fbb7b-264">Yarış durumu - Hello ilk güncelleştirme tamamladıysa, bir geri alma mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-264">Race condition - If hello initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="fbb7b-265">Ne zaman bir güncelleştirme hello geri alma yararlı olabilecek bir hello kullanıyorsanız örnektir [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx) en önemli bir yerinde yükseltme tooyour Azure barındırılan hizmeti el ile moduna toocontrol hello oranı işlem toplama.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-265">An example of when hello rollback of an update might be useful is if you are using hello [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode toocontrol hello rate at which a major in-place upgrade tooyour Azure hosted service is rolled out.</span></span>

<span data-ttu-id="fbb7b-266">Merhaba yükseltme Hello piyasaya sürme sırasında çağırmanız [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx) el ile modunda ve toowalk yükseltme etki alanlarının başlayın.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-266">During hello rollout of hello upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin toowalk upgrade domains.</span></span> <span data-ttu-id="fbb7b-267">Merhaba yükseltme izlerken bir noktada, bazı rol örnekleri, inceleyin hello ilk yükseltme etki alanlarında vermiyordu unutmayın, hello çağırabilirsiniz [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) hello dağıtım işlemi, henüz yükseltme dokunulmadan hello örnekleri bırakır ve toohello önceki hizmet paketi ve yapılandırma olsaydı geri alma örneklerini yükseltilecektir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-267">If at some point, as you monitor hello upgrade, you note some role instances in hello first upgrade domains that you examine have become unresponsive, you can call hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on hello deployment, which will leave untouched hello instances which had not yet been upgraded and rollback instances which had been upgraded toohello previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="fbb7b-268">Devam eden bir dağıtımda birden çok mutating işlemleri başlatma</span><span class="sxs-lookup"><span data-stu-id="fbb7b-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="fbb7b-269">Bazı durumlarda, devam eden bir dağıtım birden çok eşzamanlı mutating işlemleri tooinitiate isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-269">In some cases you may want tooinitiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="fbb7b-270">Örneğin, bir hizmet güncelleştirmesi gerçekleştirebilir ve bu güncelleştirmeyi hizmetiniz arasında alınmakta olsa da, toomake bazı değiştirmek istediğiniz, örneğin tooroll geri güncelleştirme Merhaba, farklı bir güncelleştirme uygulamak veya bile hello dağıtımı silin.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want toomake some change, e.g. tooroll hello update back, apply a different update, or even delete hello deployment.</span></span> <span data-ttu-id="fbb7b-271">Hizmet yükseltmesi bir yükseltilen rol örneği toorepeatedly çökmesine neden olan buggy kodu içeriyorsa, bu gerekli olabilir durumu gösterir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance toorepeatedly crash.</span></span> <span data-ttu-id="fbb7b-272">Bu durumda, hello Azure yapı denetleyicisi hello yükseltilmiş etki alanındaki örnekleri sayısı yetersiz sağlıklı olduğundan, yükseltme uygulanırken mümkün toomake sürüyor olmaz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-272">In this case, hello Azure Fabric Controller will not be able toomake progress in applying that upgrade because an insufficient number of instances in hello upgraded domain are healthy.</span></span> <span data-ttu-id="fbb7b-273">Bu durumda başvurulan tooas bir *takılmış dağıtım*.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-273">This state is referred tooas a *stuck deployment*.</span></span> <span data-ttu-id="fbb7b-274">Merhaba güncelleştirme geri veya yeni bir güncelleştirme biri başarısız hello üst uygulama tarafından hello dağıtım sürüklemeniz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-274">You can unstick hello deployment by rolling back hello update or applying a fresh update over top of hello failing one.</span></span>

<span data-ttu-id="fbb7b-275">Merhaba ilk istek tooupdate veya yükseltme hello hizmeti hello Azure yapı denetleyicisi tarafından alınan sonra sonraki diziyi işlemleri başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-275">Once hello initial request tooupdate or upgrade hello service has been received by hello Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="fbb7b-276">Diğer bir deyişle, başka bir mutating işlemi başlamadan önce hello ilk işlemi toocomplete toowait gerekmez.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-276">That is, you do not have toowait for hello initial operation toocomplete before you can start another mutating operation.</span></span>

<span data-ttu-id="fbb7b-277">Merhaba ilk güncelleştirme devam eden durumdayken ikinci bir güncelleştirme işlemi başlatma benzer toohello geri alma işlemi gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-277">Initiating a second update operation while hello first update is ongoing will perform similar toohello rollback operation.</span></span> <span data-ttu-id="fbb7b-278">Merhaba ikinci güncelleştirmeyi otomatik modda ise, hello ilk yükseltme etki alanı hemen yükseltilir, büyük olasılıkla hello çevrimdışı olmasından birden fazla yükseltme etki alanlarından tooinstances baştaki aynı zamanda noktası.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-278">If hello second update is in automatic mode, hello first upgrade domain will be upgraded immediately, possibly leading tooinstances from multiple upgrade domains being offline at hello same point in time.</span></span>

<span data-ttu-id="fbb7b-279">Merhaba diziyi işlem aşağıdaki gibidir: [dağıtım yapılandırmasını değiştirme](https://msdn.microsoft.com/library/azure/ee460809.aspx), [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx), [güncelleştirme dağıtım durumunu](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Sil Dağıtım](https://msdn.microsoft.com/library/azure/ee460815.aspx), ve [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-279">hello mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="fbb7b-280">İki işlem [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx), incelenmesi toodetermine mutating işlemi üzerinde belirli bir dağıtım çağrılabilir olup olmadığını olabilen hello kilitli bayrağı döndürür.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return hello Locked flag which can be examined toodetermine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="fbb7b-281">Merhaba kilitli bayrağı döndüren sipariş toocall hello sürümünde bu yöntemler, istek üstbilgisi çok ayarlamanız gerekir "x-ms-version: 2011-10-01" ya da daha sonra.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-281">In order toocall hello version of these methods which returns hello Locked flag, you must set request header too“x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="fbb7b-282">Sürüm oluşturma üstbilgileri hakkında daha fazla bilgi için bkz: [Hizmet Yönetimi sürüm](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="fbb7b-283">Yükseltme etki alanları arasında rollerin dağıtım</span><span class="sxs-lookup"><span data-stu-id="fbb7b-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="fbb7b-284">Azure rol örneklerini hello hizmet açıklaması (.csdef) dosyasının bir parçası olarak yapılandırılmış yükseltme etki alanlarının sayısı kümesini arasında eşit olarak dağıtır.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of hello service definition (.csdef) file.</span></span> <span data-ttu-id="fbb7b-285">Yükseltme etki alanlarının en büyük sayı Hello 20'dir ve hello varsayılan 5'tir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-285">hello max number of upgrade domains is 20 and hello default is 5.</span></span> <span data-ttu-id="fbb7b-286">Nasıl toomodify hello hizmet tanımı dosyası hakkında daha fazla bilgi için bkz: [Azure Hizmet tanım Şeması (.csdef dosyası)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="fbb7b-286">For more information about how toomodify hello service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="fbb7b-287">Örneğin, rolünüze on örneği varsa, varsayılan olarak her bir yükseltme etki alanı iki örneklerini içerir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="fbb7b-288">Rolünüze 14 örneği varsa, dört hello yükseltme etki alanlarının üç örneklerini içerir ve iki beşinci bir etki alanı içerir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-288">If your role has 14 instances, then four of hello upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="fbb7b-289">Yükseltme etki alanları, sıfır tabanlı bir dizin ile tanımlanır: hello ilk yükseltme etki alanı kimliği 0 ve hello ikinci yükseltme etki alanı varsa bir kimliği 1 ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-289">Upgrade domains are identified with a zero-based index: hello first upgrade domain has an ID of 0, and hello second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="fbb7b-290">Merhaba Aşağıdaki diyagramda nasıl iki rolü içeren bir hizmet dağıtılır hello hizmet iki yükseltme etki alanlarının tanımladığında gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-290">hello following diagram illustrates how a service than contains two roles are distributed when hello service defines two upgrade domains.</span></span> <span data-ttu-id="fbb7b-291">Merhaba hizmeti sekiz hello web rolü örneklerini ve hello çalışan rolü dokuz örneklerini çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-291">hello service is running eight instances of hello web role and nine instances of hello worker role.</span></span>

<span data-ttu-id="fbb7b-292">![Yükseltme etki alanlarının dağıtım](media/cloud-services-update-azure-service/IC345533.png "yükseltme etki alanlarının dağılımı")</span><span class="sxs-lookup"><span data-stu-id="fbb7b-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="fbb7b-293">Azure örnekleri yükseltme etki alanları arasında nasıl ayrıldığını denetleyen unutmayın.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="fbb7b-294">Hangi örnekleri toowhich etki alanı ayrılacağını olası toospecify değil.</span><span class="sxs-lookup"><span data-stu-id="fbb7b-294">It's not possible toospecify which instances are allocated toowhich domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="fbb7b-295">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="fbb7b-295">Next steps</span></span>
[<span data-ttu-id="fbb7b-296">TooManage Cloud Services nasıl</span><span class="sxs-lookup"><span data-stu-id="fbb7b-296">How tooManage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="fbb7b-297">TooMonitor Cloud Services nasıl</span><span class="sxs-lookup"><span data-stu-id="fbb7b-297">How tooMonitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="fbb7b-298">TooConfigure Cloud Services nasıl</span><span class="sxs-lookup"><span data-stu-id="fbb7b-298">How tooConfigure Cloud Services</span></span>](cloud-services-how-to-configure.md)  
