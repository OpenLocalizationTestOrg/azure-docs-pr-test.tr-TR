---
title: "Bir bulut hizmeti güncelleştirmek nasıl | Microsoft Docs"
description: "Azure bulut Hizmetleri güncelleştirmesi öğrenin. Nasıl kullanılabilirliğini sağlamak için bir bulut hizmeti üzerinde güncelleştirme işlemi devam eder öğrenin."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 2ba9676ed2afce7f18446642527971f5001b5ca7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-update-a-cloud-service"></a><span data-ttu-id="40329-104">Bir bulut hizmeti güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="40329-104">How to update a cloud service</span></span>

<span data-ttu-id="40329-105">Kendi rolleri ve konuk işletim sistemi, dahil olmak üzere bir bulut hizmeti güncelleştirme üç adım bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="40329-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="40329-106">İlk olarak, ikili dosyaları ve yapılandırma dosyalarını yeni bulut hizmeti veya işletim sistemi sürümü yüklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="40329-106">First, the binaries and configuration files for the new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="40329-107">Ardından, Azure yeni bulut hizmeti sürümü gereksinimlerine bağlı olarak bulut hizmeti için işlem ve ağ kaynakları ayırır.</span><span class="sxs-lookup"><span data-stu-id="40329-107">Next, Azure reserves compute and network resources for the cloud service based on the requirements of the new cloud service version.</span></span> <span data-ttu-id="40329-108">Son olarak, Azure artımlı olarak Kiracı yeni sürümü veya konuk işletim sistemi, kullanılabilirliği koruyarak güncelleştirmek için bir yükseltme gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="40329-108">Finally, Azure performs a rolling upgrade to incrementally update the tenant to the new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="40329-109">Bu makalede bu son adım – yükseltme ayrıntılarını anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="40329-109">This article discusses the details of this last step – the rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="40329-110">Bir Azure hizmetini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="40329-110">Update an Azure Service</span></span>
<span data-ttu-id="40329-111">Azure rolü örneklerinizi yükseltme etki alanları (UD) adı verilen mantıksal gruplar düzenler.</span><span class="sxs-lookup"><span data-stu-id="40329-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="40329-112">Yükseltme etki alanları (UD) bir grup olarak güncelleştirilen rol örnekleri mantıksal kümeleridir.</span><span class="sxs-lookup"><span data-stu-id="40329-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="40329-113">Bulut bir Azure güncelleştirmeleri bir UD, her seferinde trafiği hizmet veren devam etmek için diğer UDs örnekleri sağlayan hizmet.</span><span class="sxs-lookup"><span data-stu-id="40329-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs to continue serving traffic.</span></span>

<span data-ttu-id="40329-114">Yükseltme etki alanlarının varsayılan sayısı 5'tir.</span><span class="sxs-lookup"><span data-stu-id="40329-114">The default number of upgrade domains is 5.</span></span> <span data-ttu-id="40329-115">Hizmet tanım dosyası (.csdef) upgradeDomainCount özniteliği dahil olmak üzere farklı bir yükseltme etki alanlarının sayısını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="40329-115">You can specify a different number of upgrade domains by including the upgradeDomainCount attribute in the service’s definition file (.csdef).</span></span> <span data-ttu-id="40329-116">UpgradeDomainCount özniteliği hakkında daha fazla bilgi için bkz: [WebRole şema](https://msdn.microsoft.com/library/azure/gg557553.aspx) veya [örn şema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="40329-116">For more information about the upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="40329-117">Bir veya daha fazla rolün bir yerinde güncelleştirme hizmetinizi gerçekleştirdiğinizde, Azure kümeleri rol örneklerinin ait oldukları yükseltme etki alanına göre güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="40329-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according to the upgrade domain to which they belong.</span></span> <span data-ttu-id="40329-118">Tüm bunları getirilmesi güncelleştirme onları durdurma belirli bir yükseltme etki alanındaki – örneklerinin çevrimiçi – geri azure güncelleştirmeleri sonra sonraki etki alanında oturum taşır.</span><span class="sxs-lookup"><span data-stu-id="40329-118">Azure updates all of the instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto the next domain.</span></span> <span data-ttu-id="40329-119">Yalnızca geçerli yükseltme etki alanında çalışan örnekleri durdurarak Azure bir güncelleştirme en az olumsuz etkiyi ile çalışan hizmet olduğunda emin olur.</span><span class="sxs-lookup"><span data-stu-id="40329-119">By stopping only the instances running in the current upgrade domain, Azure makes sure that an update occurs with the least possible impact to the running service.</span></span> <span data-ttu-id="40329-120">Daha fazla bilgi için bkz: [nasıl güncelleştirme işlemi devam eder](#howanupgradeproceeds) bu makalenin ilerisinde yer.</span><span class="sxs-lookup"><span data-stu-id="40329-120">For more information, see [How the update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="40329-121">While koşulları **güncelleştirme** ve **yükseltme** Azure bağlamda biraz farklı bir anlama sahip, bu belgedeki özelliklerin açıklamaları ve işlemler için birbirinin yerine kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="40329-121">While the terms **update** and **upgrade** have slightly different meaning in the context Azure, they can be used interchangeably for the processes and descriptions of the features in this document.</span></span>
>
>

<span data-ttu-id="40329-122">Hizmetinizi güncelleştirilmesi bu rol için bir rolün en az iki örnek tanımlamalısınız yerinde kapalı kalma süresi olmadan.</span><span class="sxs-lookup"><span data-stu-id="40329-122">Your service must define at least two instances of a role for that role to be updated in-place without downtime.</span></span> <span data-ttu-id="40329-123">Hizmet bir rolü yalnızca bir örneği oluşuyorsa, yerinde güncelleştirme tamamlanana kadar hizmet kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="40329-123">If the service consists of only one instance of one role, your service will be unavailable until the in-place update has finished.</span></span>

<span data-ttu-id="40329-124">Bu konu, Azure güncelleştirmeler hakkında aşağıdaki bilgileri içerir:</span><span class="sxs-lookup"><span data-stu-id="40329-124">This topic covers the following information about Azure updates:</span></span>

* [<span data-ttu-id="40329-125">Hizmet değişikliklerini güncelleştirme sırasında izin verilen</span><span class="sxs-lookup"><span data-stu-id="40329-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="40329-126">Nasıl bir yükseltme işlemi devam eder</span><span class="sxs-lookup"><span data-stu-id="40329-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="40329-127">Bir güncelleştirme geri alma</span><span class="sxs-lookup"><span data-stu-id="40329-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="40329-128">Devam eden bir dağıtımda birden çok mutating işlemleri başlatma</span><span class="sxs-lookup"><span data-stu-id="40329-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="40329-129">Yükseltme etki alanları arasında rollerin dağıtım</span><span class="sxs-lookup"><span data-stu-id="40329-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="40329-130">Hizmet değişikliklerini güncelleştirme sırasında izin verilen</span><span class="sxs-lookup"><span data-stu-id="40329-130">Allowed service changes during an update</span></span>
<span data-ttu-id="40329-131">Aşağıdaki tabloda, güncelleştirme sırasında bir hizmeti izin verilen değişiklikler gösterilir:</span><span class="sxs-lookup"><span data-stu-id="40329-131">The following table shows the allowed changes to a service during an update:</span></span>

| <span data-ttu-id="40329-132">Barındırma, hizmetler ve roller değişikliklere izin</span><span class="sxs-lookup"><span data-stu-id="40329-132">Changes permitted to hosting, services, and roles</span></span> | <span data-ttu-id="40329-133">Yerinde güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="40329-133">In-place update</span></span> | <span data-ttu-id="40329-134">Hazırlanmış (VIP takas)</span><span class="sxs-lookup"><span data-stu-id="40329-134">Staged (VIP swap)</span></span> | <span data-ttu-id="40329-135">Silme ve yeniden Dağıt</span><span class="sxs-lookup"><span data-stu-id="40329-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="40329-136">İşletim sistemi sürümü</span><span class="sxs-lookup"><span data-stu-id="40329-136">Operating system version</span></span> |<span data-ttu-id="40329-137">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-137">Yes</span></span> |<span data-ttu-id="40329-138">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-138">Yes</span></span> |<span data-ttu-id="40329-139">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-139">Yes</span></span> |
| <span data-ttu-id="40329-140">.NET güven düzeyi</span><span class="sxs-lookup"><span data-stu-id="40329-140">.NET trust level</span></span> |<span data-ttu-id="40329-141">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-141">Yes</span></span> |<span data-ttu-id="40329-142">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-142">Yes</span></span> |<span data-ttu-id="40329-143">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-143">Yes</span></span> |
| <span data-ttu-id="40329-144">Sanal makine boyutu<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="40329-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="40329-145">Evet<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="40329-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="40329-146">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-146">Yes</span></span> |<span data-ttu-id="40329-147">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-147">Yes</span></span> |
| <span data-ttu-id="40329-148">Yerel depolama ayarları</span><span class="sxs-lookup"><span data-stu-id="40329-148">Local storage settings</span></span> |<span data-ttu-id="40329-149">Yalnızca artırmak<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="40329-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="40329-150">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-150">Yes</span></span> |<span data-ttu-id="40329-151">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-151">Yes</span></span> |
| <span data-ttu-id="40329-152">Rolleri bir hizmet olarak ekleyip</span><span class="sxs-lookup"><span data-stu-id="40329-152">Add or remove roles in a service</span></span> |<span data-ttu-id="40329-153">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-153">Yes</span></span> |<span data-ttu-id="40329-154">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-154">Yes</span></span> |<span data-ttu-id="40329-155">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-155">Yes</span></span> |
| <span data-ttu-id="40329-156">Belirli bir rol örneklerinin sayısını</span><span class="sxs-lookup"><span data-stu-id="40329-156">Number of instances of a particular role</span></span> |<span data-ttu-id="40329-157">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-157">Yes</span></span> |<span data-ttu-id="40329-158">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-158">Yes</span></span> |<span data-ttu-id="40329-159">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-159">Yes</span></span> |
| <span data-ttu-id="40329-160">Sayı veya bir hizmet için uç nokta türü</span><span class="sxs-lookup"><span data-stu-id="40329-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="40329-161">Evet<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="40329-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="40329-162">Hayır</span><span class="sxs-lookup"><span data-stu-id="40329-162">No</span></span> |<span data-ttu-id="40329-163">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-163">Yes</span></span> |
| <span data-ttu-id="40329-164">Adları ve yapılandırma ayarlarının değerleri</span><span class="sxs-lookup"><span data-stu-id="40329-164">Names and values of configuration settings</span></span> |<span data-ttu-id="40329-165">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-165">Yes</span></span> |<span data-ttu-id="40329-166">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-166">Yes</span></span> |<span data-ttu-id="40329-167">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-167">Yes</span></span> |
| <span data-ttu-id="40329-168">Değerleri (ancak değil adları) yapılandırma ayarları</span><span class="sxs-lookup"><span data-stu-id="40329-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="40329-169">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-169">Yes</span></span> |<span data-ttu-id="40329-170">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-170">Yes</span></span> |<span data-ttu-id="40329-171">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-171">Yes</span></span> |
| <span data-ttu-id="40329-172">Yeni sertifika Ekle</span><span class="sxs-lookup"><span data-stu-id="40329-172">Add new certificates</span></span> |<span data-ttu-id="40329-173">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-173">Yes</span></span> |<span data-ttu-id="40329-174">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-174">Yes</span></span> |<span data-ttu-id="40329-175">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-175">Yes</span></span> |
| <span data-ttu-id="40329-176">Mevcut sertifikalarını değiştirme</span><span class="sxs-lookup"><span data-stu-id="40329-176">Change existing certificates</span></span> |<span data-ttu-id="40329-177">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-177">Yes</span></span> |<span data-ttu-id="40329-178">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-178">Yes</span></span> |<span data-ttu-id="40329-179">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-179">Yes</span></span> |
| <span data-ttu-id="40329-180">Yeni kod dağıtın</span><span class="sxs-lookup"><span data-stu-id="40329-180">Deploy new code</span></span> |<span data-ttu-id="40329-181">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-181">Yes</span></span> |<span data-ttu-id="40329-182">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-182">Yes</span></span> |<span data-ttu-id="40329-183">Evet</span><span class="sxs-lookup"><span data-stu-id="40329-183">Yes</span></span> |

<span data-ttu-id="40329-184"><sup>1</sup> boyut bulut hizmeti için kullanılabilir boyutları alt sınırlı değişiklik.</span><span class="sxs-lookup"><span data-stu-id="40329-184"><sup>1</sup> Size change limited to the subset of sizes available for the cloud service.</span></span>

<span data-ttu-id="40329-185"><sup>2</sup> Azure SDK 1.5 gerektirir veya sonraki sürümler.</span><span class="sxs-lookup"><span data-stu-id="40329-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="40329-186">Sanal makine boyutunu değiştirme yerel verileri silecektir.</span><span class="sxs-lookup"><span data-stu-id="40329-186">Changing the virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="40329-187">Aşağıdaki öğeler, güncelleştirme sırasında desteklenmez:</span><span class="sxs-lookup"><span data-stu-id="40329-187">The following items are not supported during an update:</span></span>

* <span data-ttu-id="40329-188">Bir rolün adını değiştirme.</span><span class="sxs-lookup"><span data-stu-id="40329-188">Changing the name of a role.</span></span> <span data-ttu-id="40329-189">Kaldırın ve ardından yeni adıyla rolünü ekleyin.</span><span class="sxs-lookup"><span data-stu-id="40329-189">Remove and then add the role with the new name.</span></span>
* <span data-ttu-id="40329-190">Yükseltme etki alanı sayısı değiştirme.</span><span class="sxs-lookup"><span data-stu-id="40329-190">Changing of the Upgrade Domain count.</span></span>
* <span data-ttu-id="40329-191">Yerel kaynakların boyutu kısaltır.</span><span class="sxs-lookup"><span data-stu-id="40329-191">Decreasing the size of the local resources.</span></span>

<span data-ttu-id="40329-192">Yerel kaynak boyutu azalan gibi hizmet tanımı, diğer güncelleştirmeleri yapıyorsanız bir VIP takas güncelleştirmesi yerine gerçekleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="40329-192">If you are making other updates to your service's definition, such as decreasing the size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="40329-193">Daha fazla bilgi için bkz: [takas dağıtım](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="40329-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="40329-194">Nasıl bir yükseltme işlemi devam eder</span><span class="sxs-lookup"><span data-stu-id="40329-194">How an upgrade proceeds</span></span>
<span data-ttu-id="40329-195">Tüm hizmetiniz rollerinde veya tek bir rol hizmetinde güncelleştirmek isteyip istemediğinize karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="40329-195">You can decide whether you want to update all of the roles in your service or a single role in the service.</span></span> <span data-ttu-id="40329-196">Her iki durumda da, yükseltilmekte olan ve ilk yükseltme etki alanına ait her bir rol tüm örneklerini durduruldu, yükseltme ve tekrar çevrimiçi.</span><span class="sxs-lookup"><span data-stu-id="40329-196">In either case, all instances of each role that is being upgraded and belong to the first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="40329-197">Yeniden çevrimiçi olduktan sonra ikinci yükseltme etki alanındaki örnekleri durduruldu, yükseltme ve tekrar çevrimiçi.</span><span class="sxs-lookup"><span data-stu-id="40329-197">Once they are back online, the instances in the second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="40329-198">Bir bulut hizmeti en çok bir yükseltme aynı anda etkin olabilir.</span><span class="sxs-lookup"><span data-stu-id="40329-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="40329-199">Yükseltme her zaman en son sürümünü bulut hizmeti karşı gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="40329-199">The upgrade is always performed against the latest version of the cloud service.</span></span>

<span data-ttu-id="40329-200">Aşağıdaki diyagramda, nasıl tüm hizmet rollerin yükseltiyorsanız yükseltmeye devam eder gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="40329-200">The following diagram illustrates how the upgrade proceeds if you are upgrading all of the roles in the service:</span></span>

<span data-ttu-id="40329-201">![Hizmet yükseltme](media/cloud-services-update-azure-service/IC345879.png "yükseltme hizmeti")</span><span class="sxs-lookup"><span data-stu-id="40329-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="40329-202">Sonraki Bu diyagramda, yalnızca tek bir rol yükseltiyorsanız nasıl güncelleştirme işlemi devam eder gösterilir:</span><span class="sxs-lookup"><span data-stu-id="40329-202">This next diagram illustrates how the update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="40329-203">![Yükseltme rol](media/cloud-services-update-azure-service/IC345880.png "yükseltme rolü")</span><span class="sxs-lookup"><span data-stu-id="40329-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="40329-204">Bir otomatik güncelleştirme sırasında Azure yapı denetleyicisi sonraki UD yol güvenli olduğunda belirlemek için bulut hizmeti düzenli olarak değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="40329-204">During an automatic update, the Azure Fabric Controller periodically evaluates the health of the cloud service to determine when it’s safe to walk the next UD.</span></span> <span data-ttu-id="40329-205">Bu sistem durumu değerlendirmesi bir rol başına temelinde gerçekleştirilir ve yalnızca en son sürümünü (yani zaten gitti UDs örneklerinden) örneği göz önünde bulundurur.</span><span class="sxs-lookup"><span data-stu-id="40329-205">This health evaluation is performed on a per-role basis and considers only instances in the latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="40329-206">Olduğunu doğrular en az sayıda her rol için rol örneği elde tatmin edici terminal durumuna.</span><span class="sxs-lookup"><span data-stu-id="40329-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="40329-207">Rol örneği başlangıç zaman aşımı</span><span class="sxs-lookup"><span data-stu-id="40329-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="40329-208">Yapı denetleyicisi Başlatıldı durumuna ulaşması her rol örneği için 30 dakika bekler.</span><span class="sxs-lookup"><span data-stu-id="40329-208">The Fabric Controller will wait 30 minutes for each role instance to reach a Started state.</span></span> <span data-ttu-id="40329-209">Zaman aşımı süresi aşılırsa, yapı denetleyicisi sonraki rol örneği taramasını devam eder.</span><span class="sxs-lookup"><span data-stu-id="40329-209">If the timeout duration elapses, the Fabric Controller will continue walking to the next role instance.</span></span>

### <a name="impact-to-drive-data-during-cloud-service-upgrades"></a><span data-ttu-id="40329-210">Bulut hizmeti sırasında sürücü verilere etkisi yükseltir</span><span class="sxs-lookup"><span data-stu-id="40329-210">Impact to drive data during Cloud Service upgrades</span></span>

<span data-ttu-id="40329-211">Yükseltme yolu Azure yükseltmeler Hizmetleri nedeniyle gerçekleştirilirken bir hizmet birden çok örneği için tek bir örnekten yükseltirken hizmetinizi gidersiniz.</span><span class="sxs-lookup"><span data-stu-id="40329-211">When upgrading a service from a single instance to multiple instances your service will be brought down while the upgrade is performed due to the way Azure upgrades services.</span></span> <span data-ttu-id="40329-212">Hizmet düzeyi sözleşmesi guaranteeing hizmet kullanılabilirliği, yalnızca birden fazla örneği ile dağıtılan Hizmetleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="40329-212">The service level agreement guaranteeing service availability only applies to services that are deployed with more than one instance.</span></span> <span data-ttu-id="40329-213">Aşağıdaki listede, her sürücüdeki verilerin her Azure hizmet yükseltme senaryosu nasıl etkilendiği açıklanmaktadır:</span><span class="sxs-lookup"><span data-stu-id="40329-213">The following list describes how the data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="40329-214">Senaryo</span><span class="sxs-lookup"><span data-stu-id="40329-214">Scenario</span></span>|<span data-ttu-id="40329-215">C sürücüsü</span><span class="sxs-lookup"><span data-stu-id="40329-215">C Drive</span></span>|<span data-ttu-id="40329-216">D sürücüsü</span><span class="sxs-lookup"><span data-stu-id="40329-216">D Drive</span></span>|<span data-ttu-id="40329-217">E sürücüsü</span><span class="sxs-lookup"><span data-stu-id="40329-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="40329-218">VM yeniden başlatma</span><span class="sxs-lookup"><span data-stu-id="40329-218">VM reboot</span></span>|<span data-ttu-id="40329-219">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-219">Preserved</span></span>|<span data-ttu-id="40329-220">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-220">Preserved</span></span>|<span data-ttu-id="40329-221">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-221">Preserved</span></span>|
|<span data-ttu-id="40329-222">Portal yeniden başlatma</span><span class="sxs-lookup"><span data-stu-id="40329-222">Portal reboot</span></span>|<span data-ttu-id="40329-223">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-223">Preserved</span></span>|<span data-ttu-id="40329-224">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-224">Preserved</span></span>|<span data-ttu-id="40329-225">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-225">Destroyed</span></span>|
|<span data-ttu-id="40329-226">Portal yeniden görüntü oluşturma</span><span class="sxs-lookup"><span data-stu-id="40329-226">Portal reimage</span></span>|<span data-ttu-id="40329-227">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-227">Preserved</span></span>|<span data-ttu-id="40329-228">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-228">Destroyed</span></span>|<span data-ttu-id="40329-229">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-229">Destroyed</span></span>|
|<span data-ttu-id="40329-230">Yerinde yükseltme</span><span class="sxs-lookup"><span data-stu-id="40329-230">In-Place Upgrade</span></span>|<span data-ttu-id="40329-231">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-231">Preserved</span></span>|<span data-ttu-id="40329-232">Korunur</span><span class="sxs-lookup"><span data-stu-id="40329-232">Preserved</span></span>|<span data-ttu-id="40329-233">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-233">Destroyed</span></span>|
|<span data-ttu-id="40329-234">Düğüm geçiş</span><span class="sxs-lookup"><span data-stu-id="40329-234">Node migration</span></span>|<span data-ttu-id="40329-235">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-235">Destroyed</span></span>|<span data-ttu-id="40329-236">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-236">Destroyed</span></span>|<span data-ttu-id="40329-237">Yok</span><span class="sxs-lookup"><span data-stu-id="40329-237">Destroyed</span></span>|

<span data-ttu-id="40329-238">Yukarıdaki listede E: sürücü rolün kök sürücüsünde temsil eder ve sabit kodlanmış olmamalıdır, unutmayın.</span><span class="sxs-lookup"><span data-stu-id="40329-238">Note that, in the above list, the E: drive represents the role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="40329-239">Bunun yerine, kullanın **RoleRoot %** sürücü temsil etmek için ortam değişkeni.</span><span class="sxs-lookup"><span data-stu-id="40329-239">Instead, use the **%RoleRoot%** environment variable to represent the drive.</span></span>

<span data-ttu-id="40329-240">Tek Örnekli bir hizmeti yükseltirken kapalı kalma süresini en aza indirmek için yeni bir çok örnekli hizmet hazırlama sunucusuna dağıtır ve bir VIP takası gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="40329-240">To minimize the downtime when upgrading a single-instance service, deploy a new multi-instance service to the staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="40329-241">Bir güncelleştirme geri alma</span><span class="sxs-lookup"><span data-stu-id="40329-241">Rollback of an update</span></span>
<span data-ttu-id="40329-242">Azure tarafından Azure yapı denetleyicisi ilk güncelleştirme isteği kabul edildikten sonra bir hizmete ek işlemleri başlatmak izin vererek güncelleştirme sırasında hizmetlerini yönetme esneklik sağlar.</span><span class="sxs-lookup"><span data-stu-id="40329-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after the initial update request is accepted by the Azure Fabric Controller.</span></span> <span data-ttu-id="40329-243">Bir geri alma, yalnızca bir güncelleştirme olduğunda (yapılandırma değişikliği) gerçekleştirilebilir veya yükseltme işlemi **devam eden** dağıtımda durum.</span><span class="sxs-lookup"><span data-stu-id="40329-243">A rollback can only be performed when an update (configuration change) or upgrade is in the **in progress** state on the deployment.</span></span> <span data-ttu-id="40329-244">Bir güncelleştirme veya yükseltme henüz yeni sürüme güncelleştirilmemiş hizmetinin en az bir örnek var olduğu sürece devam ediyor olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="40329-244">An update or upgrade is considered to be in-progress as long as there is at least one instance of the service which has not yet been updated to the new version.</span></span> <span data-ttu-id="40329-245">Bir geri alma izin verilip verilmeyeceğini sınamak için tarafından döndürülen RollbackAllowed bayrak değerini denetleyin [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx) işlemleri ayarlanır true.</span><span class="sxs-lookup"><span data-stu-id="40329-245">To test whether a rollback is allowed, check the value of the RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set to true.</span></span>

> [!NOTE]
> <span data-ttu-id="40329-246">Yalnızca geri alma çağırmak için bir anlam bir **yerinde** güncelleştirmek veya bir çalışan örneğinin tamamını hizmetinizi diğeriyle VIP takas yükseltmeler içerdiğinden dolayı yükseltin.</span><span class="sxs-lookup"><span data-stu-id="40329-246">It only makes sense to call Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="40329-247">Geri alma devam eden güncelleştirme dağıtımda aşağıdaki etkileri gösterir:</span><span class="sxs-lookup"><span data-stu-id="40329-247">Rollback of an in-progress update has the following effects on the deployment:</span></span>

* <span data-ttu-id="40329-248">Henüz güncelleştirildi veya en yeni sürüme yükseltildiğinden tüm rol örnekleri güncelleştirilmez veya bu örneklerde hizmetinin hedefi sürümü zaten çalıştığından, yükseltme.</span><span class="sxs-lookup"><span data-stu-id="40329-248">Any role instances which had not yet been updated or upgraded to the new version are not updated or upgraded, because those instances are already running the target version of the service.</span></span>
* <span data-ttu-id="40329-249">Zaten güncelleştirildi veya yeni hizmet paketi sürümüne tüm rol örnekleri (\*.cspkg) dosyası ya da hizmet yapılandırması (\*.cscfg) dosya (veya her iki dosya) Bu dosyalar yükseltme öncesi sürümüne geri.</span><span class="sxs-lookup"><span data-stu-id="40329-249">Any role instances which had already been updated or upgraded to the new version of the service package (\*.cspkg) file or the service configuration (\*.cscfg) file (or both files) are reverted to the pre-upgrade version of these files.</span></span>

<span data-ttu-id="40329-250">Bu, işlevsel olarak aşağıdaki özellikler tarafından sağlanır:</span><span class="sxs-lookup"><span data-stu-id="40329-250">This functionally is provided by the following features:</span></span>

* <span data-ttu-id="40329-251">[Geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) bir yapılandırma güncelleştirme çağrılabilir işlemi (çağırarak tetiklenen [dağıtım yapılandırmasını değiştirme](https://msdn.microsoft.com/library/azure/ee460809.aspx)) veya yükseltme (çağırarak tetiklenen [ Yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx)) var olduğu sürece en az bir örnek hizmetindeki henüz yeni sürüme güncelleştirilmemiş.</span><span class="sxs-lookup"><span data-stu-id="40329-251">The [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in the service which has not yet been updated to the new version.</span></span>
* <span data-ttu-id="40329-252">Yanıt gövdesi bir parçası olarak döndürülen kilitli öğesi ve RollbackAllowed öğesi [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx) işlemleri:</span><span class="sxs-lookup"><span data-stu-id="40329-252">The Locked element and the RollbackAllowed element, which are returned as part of the response body of the [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="40329-253">Kilitli öğesi mutating işlemi üzerinde belirli bir dağıtım çağrılabilir algılamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="40329-253">The Locked element allows you to detect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="40329-254">RollbackAllowed öğesi algılama sayesinde [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) işlemi üzerinde belirli bir dağıtım çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="40329-254">The RollbackAllowed element allows you to detect when the [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="40329-255">Bir geri alma işlemi gerçekleştirmek için kilitli ve RollbackAllowed öğeleri denetleme gerekmez.</span><span class="sxs-lookup"><span data-stu-id="40329-255">In order to perform a rollback, you do not have to check both the Locked and the RollbackAllowed elements.</span></span> <span data-ttu-id="40329-256">RollbackAllowed ayarlandığını doğrulamak için son eklerini true.</span><span class="sxs-lookup"><span data-stu-id="40329-256">It suffices to confirm that RollbackAllowed is set to true.</span></span> <span data-ttu-id="40329-257">Bu yöntemleri kümesine istek üstbilgisi kullanarak çağrılan bu öğeleri yalnızca döndürülür "x-ms-version: 2011-10-01" veya sonraki bir sürümü.</span><span class="sxs-lookup"><span data-stu-id="40329-257">These elements are only returned if these methods are invoked by using the request header set to “x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="40329-258">Sürüm oluşturma üstbilgileri hakkında daha fazla bilgi için bkz: [Hizmet Yönetimi sürüm](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="40329-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="40329-259">Bazı durumlar vardır geri alma bir güncelleştirme olduğunda veya yükseltme desteklenmiyor, bunlar şu şekildedir:</span><span class="sxs-lookup"><span data-stu-id="40329-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="40329-260">Yerel kaynaklar - güncelleştirme rolü Azure platformu için yerel kaynak artarsa azalma geri izin vermiyor.</span><span class="sxs-lookup"><span data-stu-id="40329-260">Reduction in local resources - If the update increases the local resources for a role the Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="40329-261">Kota sınırlamalarını - güncelleştirme işlemi artık olabilecek bir ölçek idiyse, geri alma işlemi tamamlamak için yeterli işlem kotası sahip.</span><span class="sxs-lookup"><span data-stu-id="40329-261">Quota limitations - If the update was a scale down operation you may no longer have sufficient compute quota to complete the rollback operation.</span></span> <span data-ttu-id="40329-262">Her Azure aboneliğinin bu aboneliğe ait tüm barındırılan hizmetler tarafından kullanılan çekirdek sayısını belirten ilişkili kota sahiptir.</span><span class="sxs-lookup"><span data-stu-id="40329-262">Each Azure subscription has a quota associated with it that specifies the maximum number of cores which can be consumed by all hosted services that belong to that subscription.</span></span> <span data-ttu-id="40329-263">Verilen güncelleştirmesi işlemin geri alınmasının aboneliğinizi kota sonra koyabilirsiniz, bir geri alma etkin değil.</span><span class="sxs-lookup"><span data-stu-id="40329-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="40329-264">Yarış durumu - ilk güncelleştirme tamamladıysa, bir geri alma mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="40329-264">Race condition - If the initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="40329-265">Kullanıyorsanız, bir güncelleştirme geri alma ne zaman yararlı olabilir, bir örnek verilmiştir [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx) işlemi, Azure ana yerinde yükseltme sırasında hizmet barındırılan hızı denetlemek için el ile modunda alındı.</span><span class="sxs-lookup"><span data-stu-id="40329-265">An example of when the rollback of an update might be useful is if you are using the [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode to control the rate at which a major in-place upgrade to your Azure hosted service is rolled out.</span></span>

<span data-ttu-id="40329-266">Yükseltme piyasaya sürme sırasında çağırmanız [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx) el ile modunda ve yükseltme etki alanlarının gitmeye başlayın.</span><span class="sxs-lookup"><span data-stu-id="40329-266">During the rollout of the upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin to walk upgrade domains.</span></span> <span data-ttu-id="40329-267">Yükseltme, izleme gibi belirli bir noktada, Not Bazı rol örnekleri, inceleyin ilk yükseltme etki alanlarında yanıt veremez duruma gelmiş, çağırabilirsiniz [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx) bırakacaktır dağıtım işlemi önceki hizmet paketi ve yapılandırma için yükseltilmiş geri alma örneklerini ve henüz yükseltme örnekleri olduğu gibi kalmıştır.</span><span class="sxs-lookup"><span data-stu-id="40329-267">If at some point, as you monitor the upgrade, you note some role instances in the first upgrade domains that you examine have become unresponsive, you can call the [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on the deployment, which will leave untouched the instances which had not yet been upgraded and rollback instances which had been upgraded to the previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="40329-268">Devam eden bir dağıtımda birden çok mutating işlemleri başlatma</span><span class="sxs-lookup"><span data-stu-id="40329-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="40329-269">Bazı durumlarda, devam eden bir dağıtımda birden çok eşzamanlı mutating işlemi başlatmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="40329-269">In some cases you may want to initiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="40329-270">Örneğin, bir hizmet güncelleştirmesi gerçekleştirebilir ve bu güncelleştirmeyi hizmetiniz arasında alınmakta olsa da, bazı değişiklik örneğin hale getirmek istediğiniz güncelleştirme geri dönmek için farklı bir güncelleştirme uygulamak veya hatta dağıtımı silin.</span><span class="sxs-lookup"><span data-stu-id="40329-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want to make some change, e.g. to roll the update back, apply a different update, or even delete the deployment.</span></span> <span data-ttu-id="40329-271">Hizmet yükseltmesi yükseltilen rol örneğini art arda çökmesine neden olan buggy kodu içeriyorsa, bu gerekli olabilir durumu gösterir.</span><span class="sxs-lookup"><span data-stu-id="40329-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance to repeatedly crash.</span></span> <span data-ttu-id="40329-272">Bu durumda, Azure yapı denetleyicisi yükseltilmiş etki alanındaki örneklerinin sayısı yetersiz sağlıklı olduğundan yükseltme yapan uygulamada ilerleme mümkün olmaz.</span><span class="sxs-lookup"><span data-stu-id="40329-272">In this case, the Azure Fabric Controller will not be able to make progress in applying that upgrade because an insufficient number of instances in the upgraded domain are healthy.</span></span> <span data-ttu-id="40329-273">Bu durum olarak adlandırılır bir *takılmış dağıtım*.</span><span class="sxs-lookup"><span data-stu-id="40329-273">This state is referred to as a *stuck deployment*.</span></span> <span data-ttu-id="40329-274">Güncelleştirme geri veya yeni bir güncelleştirme başarısız olan üst uygulama dağıtımı sürüklemeniz biri.</span><span class="sxs-lookup"><span data-stu-id="40329-274">You can unstick the deployment by rolling back the update or applying a fresh update over top of the failing one.</span></span>

<span data-ttu-id="40329-275">Güncelleştirme veya hizmet yükseltmek için ilk istek Azure yapı denetleyicisi tarafından alınan sonra sonraki diziyi işlemleri başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="40329-275">Once the initial request to update or upgrade the service has been received by the Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="40329-276">Diğer bir deyişle, başka bir mutating işlemi başlamadan önce ilk işlemin tamamlanmasını beklemek zorunda değildir.</span><span class="sxs-lookup"><span data-stu-id="40329-276">That is, you do not have to wait for the initial operation to complete before you can start another mutating operation.</span></span>

<span data-ttu-id="40329-277">İlk güncelleştirme devam eden durumdayken ikinci bir güncelleştirme işlemi başlatma benzer şekilde geri alma işlemi gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="40329-277">Initiating a second update operation while the first update is ongoing will perform similar to the rollback operation.</span></span> <span data-ttu-id="40329-278">İkinci güncelleştirmeyi otomatik modda ise, ilk yükseltme etki alanı muhtemelen zamanında aynı noktada çevrimdışı olmasından birden fazla yükseltme etki alanlarından örneklerine baştaki hemen yükseltilir.</span><span class="sxs-lookup"><span data-stu-id="40329-278">If the second update is in automatic mode, the first upgrade domain will be upgraded immediately, possibly leading to instances from multiple upgrade domains being offline at the same point in time.</span></span>

<span data-ttu-id="40329-279">Mutating işlem aşağıdaki gibidir: [dağıtım yapılandırmasını değiştirme](https://msdn.microsoft.com/library/azure/ee460809.aspx), [yükseltme dağıtımı](https://msdn.microsoft.com/library/azure/ee460793.aspx), [güncelleştirme dağıtım durumunu](https://msdn.microsoft.com/library/azure/ee460808.aspx), [dağıtımı Sil ](https://msdn.microsoft.com/library/azure/ee460815.aspx), ve [geri alma güncelleştirme veya yükseltme](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="40329-279">The mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="40329-280">İki işlem [alma dağıtım](https://msdn.microsoft.com/library/azure/ee460804.aspx) ve [bulut hizmeti özellik alma](https://msdn.microsoft.com/library/azure/ee460806.aspx), mutating işlemi üzerinde belirli bir dağıtım çağrılan olup olmadığını belirlemek için denetlenen kilitli bayrak döndürür.</span><span class="sxs-lookup"><span data-stu-id="40329-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return the Locked flag which can be examined to determine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="40329-281">Kilitli bayrağı döndüren sürümü bu yöntemleri çağırmak için istek üstbilgisi ayarlamanız gerekir "x-ms-version: 2011-10-01" ya da daha sonra.</span><span class="sxs-lookup"><span data-stu-id="40329-281">In order to call the version of these methods which returns the Locked flag, you must set request header to “x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="40329-282">Sürüm oluşturma üstbilgileri hakkında daha fazla bilgi için bkz: [Hizmet Yönetimi sürüm](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="40329-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="40329-283">Yükseltme etki alanları arasında rollerin dağıtım</span><span class="sxs-lookup"><span data-stu-id="40329-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="40329-284">Azure bir rolün örnekleri sayıda hizmet açıklaması (.csdef) dosyasının bir parçası olarak yapılandırılmış yükseltme etki alanları arasında eşit olarak dağıtır.</span><span class="sxs-lookup"><span data-stu-id="40329-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of the service definition (.csdef) file.</span></span> <span data-ttu-id="40329-285">Yükseltme etki alanlarının en büyük sayı 20'dir ve varsayılan 5'tir.</span><span class="sxs-lookup"><span data-stu-id="40329-285">The max number of upgrade domains is 20 and the default is 5.</span></span> <span data-ttu-id="40329-286">Hizmet tanımı dosyası değiştirme hakkında daha fazla bilgi için bkz: [Azure Hizmet tanım Şeması (.csdef dosyası)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="40329-286">For more information about how to modify the service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="40329-287">Örneğin, rolünüze on örneği varsa, varsayılan olarak her bir yükseltme etki alanı iki örneklerini içerir.</span><span class="sxs-lookup"><span data-stu-id="40329-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="40329-288">Rolünüze 14 örneği varsa, dört yükseltme etki alanlarının üç örneklerini içerir ve iki beşinci bir etki alanı içerir.</span><span class="sxs-lookup"><span data-stu-id="40329-288">If your role has 14 instances, then four of the upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="40329-289">Yükseltme etki alanları, sıfır tabanlı bir dizin ile tanımlanır: ilk yükseltme etki alanı kimliği 0 ve 1 vb. kimliği ikinci yükseltme etki alanı varsa.</span><span class="sxs-lookup"><span data-stu-id="40329-289">Upgrade domains are identified with a zero-based index: the first upgrade domain has an ID of 0, and the second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="40329-290">Aşağıdaki diyagramda, nasıl iki rolü içeren bir hizmet dağıtılmış hizmet iki yükseltme etki alanlarının tanımladığında gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="40329-290">The following diagram illustrates how a service than contains two roles are distributed when the service defines two upgrade domains.</span></span> <span data-ttu-id="40329-291">Hizmet, sekiz örneklerini web rolü ve çalışan rolü dokuz örneklerini çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="40329-291">The service is running eight instances of the web role and nine instances of the worker role.</span></span>

<span data-ttu-id="40329-292">![Yükseltme etki alanlarının dağıtım](media/cloud-services-update-azure-service/IC345533.png "yükseltme etki alanlarının dağılımı")</span><span class="sxs-lookup"><span data-stu-id="40329-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="40329-293">Azure örnekleri yükseltme etki alanları arasında nasıl ayrıldığını denetleyen unutmayın.</span><span class="sxs-lookup"><span data-stu-id="40329-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="40329-294">Hangi girişlerin hangi etki alanı için ayrılan belirlemek mümkün değil.</span><span class="sxs-lookup"><span data-stu-id="40329-294">It's not possible to specify which instances are allocated to which domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="40329-295">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="40329-295">Next steps</span></span>
[<span data-ttu-id="40329-296">Cloud Services nasıl yönetilir?</span><span class="sxs-lookup"><span data-stu-id="40329-296">How to Manage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="40329-297">Bulut Hizmetleri izleme</span><span class="sxs-lookup"><span data-stu-id="40329-297">How to Monitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="40329-298">Cloud Services’ı Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="40329-298">How to Configure Cloud Services</span></span>](cloud-services-how-to-configure.md)  
