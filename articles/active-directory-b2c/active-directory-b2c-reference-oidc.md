---
title: "Web Openıd Connect - Azure AD B2C ile oturum açma | Microsoft Docs"
description: "Azure Active Directory uygulaması Openıd Connect kimlik doğrulama protokolü kullanarak Web uygulamaları oluşturma"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="2ae3f-103">Azure Active Directory B2C: Web oturum açma Openıd Connect ile</span><span class="sxs-lookup"><span data-stu-id="2ae3f-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="2ae3f-104">Openıd Connect kullanıcılar web uygulamaları için güvenli bir şekilde oturum açmak için kullanılan OAuth 2.0 üstünde yerleşik bir kimlik doğrulama, protokolüdür.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="2ae3f-105">Azure Active Directory B2C kullanarak Openıd Connect (Azure AD B2C) uygulaması, devredebilir kaydolma, oturum açma ve Azure Active Directory'ye (Azure AD), web uygulamalarında diğer kimlik yönetimi deneyimleri.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="2ae3f-106">Bu kılavuz bir dilden bağımsız biçimde bunun nasıl yapılacağı gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="2ae3f-107">Bu bizim açık kaynak kitaplıkları kullanmadan HTTP iletileri almasına ve göndermesine açıklar.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="2ae3f-108">[Openıd Connect](http://openid.net/specs/openid-connect-core-1_0.html) OAuth 2.0 genişletir *yetkilendirme* protokolü olarak kullanmak için bir *kimlik doğrulaması* protokolü.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="2ae3f-109">Bu, OAuth kullanarak, çoklu oturum açma gerçekleştirmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="2ae3f-110">Kavramını sunmaktadır bir *kimliği belirteci*, kullanıcının kimliğini doğrulamak ve kullanıcının temel profil bilgilerini almak istemci izin veren bir güvenlik belirteci değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="2ae3f-111">OAuth 2.0 genişlettiğinden, güvenli bir şekilde edinmeye uygulamalar ayrıca sağlar *erişim belirteçleri*.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="2ae3f-112">Access_tokens tarafından güvenliği sağlanan kaynaklara erişmek için kullanabileceğiniz bir [yetkilendirme sunucusu](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="2ae3f-113">Bir sunucuda barındırılan ve tarayıcı aracılığıyla erişilen bir web uygulaması oluşturuyorsanız Openıd Connect öneririz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="2ae3f-114">Kimlik Yönetimi, mobil veya Masaüstü uygulamalarınızı Azure AD B2C kullanarak eklemek istiyorsanız, kullanması gereken [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) Openıd Connect yerine.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="2ae3f-115">Azure AD B2C birden çok basit kimlik doğrulama ve yetkilendirme yapmak için standart Openıd Connect Protokolü genişletir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="2ae3f-116">Tanıttığı [İlkesi parametresi](active-directory-b2c-reference-policies.md), Openıd Connect gibi kullanıcı deneyimlerini--eklemek için kullanmanıza olanak sağlayan kaydolma, oturum açma ve profil yönetimi--uygulamanıza.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="2ae3f-117">Burada, biz, Openıd Connect ve ilkeleri her bu deneyimleri web uygulamalarınızda uygulamak için nasıl kullanılacağı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="2ae3f-118">Ayrıca web API'leri erişmek için erişim belirteçleri almak nasıl göstereceğiz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="2ae3f-119">Sonraki bölümde örnek HTTP isteklerini bizim örnek B2C dizini, fabrikamb2c.onmicrosoft.com, yanı sıra bizim örnek uygulama, https://aadb2cplayground.azurewebsites.net ve ilkeleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="2ae3f-120">İstekleri bu değerleri kullanarak kendiniz denemek boş ya da bunları kendi ile değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="2ae3f-121">Bilgi edinmek için nasıl [kendi B2C Kiracı, uygulama ve ilkeleri alma](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="2ae3f-122">Kimlik doğrulama isteklerini gönderme</span><span class="sxs-lookup"><span data-stu-id="2ae3f-122">Send authentication requests</span></span>
<span data-ttu-id="2ae3f-123">Web uygulamanızı kullanıcının kimliğini doğrulamak ve ilke yürütmesini gerektiğinde kullanıcıya yönlendirebilirsiniz `/authorize` uç noktası.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="2ae3f-124">Bu etkileşimli akış burada kullanıcı ilkesine bağlı olarak eylem gerçekleştirir bölümüdür.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="2ae3f-125">Bu istekte istemcisi kullanıcıdan almak için gereken izinleri belirtir. `scope` parametre ve içinde yürütmek için ilke `p` parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="2ae3f-126">Üç örnekler, her farklı ilke kullanılarak (satır sonuyla okunabilirlik için), aşağıdaki bölümlerde verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="2ae3f-127">Nasıl çalıştığı her istek için bir fikir almak için onu çalıştıran ve bir tarayıcıya istek yapıştırma deneyin.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="2ae3f-128">Bir oturum açma ilkesini kullanın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="2ae3f-129">Kayıt İlkesi'ni kullanın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="2ae3f-130">Bir profili Düzenle ilkesini kullanın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="2ae3f-131">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-131">Parameter</span></span> | <span data-ttu-id="2ae3f-132">Gerekli?</span><span class="sxs-lookup"><span data-stu-id="2ae3f-132">Required?</span></span> | <span data-ttu-id="2ae3f-133">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ae3f-134">client_id</span><span class="sxs-lookup"><span data-stu-id="2ae3f-134">client_id</span></span> |<span data-ttu-id="2ae3f-135">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-135">Required</span></span> |<span data-ttu-id="2ae3f-136">Uygulama Kimliği [Azure portal](https://portal.azure.com/) uygulamanıza atanmış.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="2ae3f-137">response_type</span><span class="sxs-lookup"><span data-stu-id="2ae3f-137">response_type</span></span> |<span data-ttu-id="2ae3f-138">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-138">Required</span></span> |<span data-ttu-id="2ae3f-139">Yanıt türü kimliği belirteci Openıd Connect eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="2ae3f-140">Ayrıca web uygulamanızı bir web API'sini çağırmak için belirteçleri ihtiyaç duyuyorsa kullanabileceğiniz `code+id_token`biz burada yaptığınız gibi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="2ae3f-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="2ae3f-141">redirect_uri</span></span> |<span data-ttu-id="2ae3f-142">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-142">Recommended</span></span> |<span data-ttu-id="2ae3f-143">`redirect_uri` Burada kimlik doğrulama yanıtları gönderilebilen veya uygulamanız tarafından alınan, uygulamanızın parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="2ae3f-144">Bu tam olarak eşleşmelidir `redirect_uri` URL kodlanmış olmalıdır ancak bu Portalı'nda kayıtlı parametreleri.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="2ae3f-145">Kapsam</span><span class="sxs-lookup"><span data-stu-id="2ae3f-145">scope</span></span> |<span data-ttu-id="2ae3f-146">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-146">Required</span></span> |<span data-ttu-id="2ae3f-147">Kapsamları boşlukla ayrılmış listesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-147">A space-separated list of scopes.</span></span> <span data-ttu-id="2ae3f-148">Tek bir kapsam değeri Azure AD ile istenen iki izinleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="2ae3f-149">`openid` Kapsam kullanıcı oturumu ve kullanıcı kimliği belirteçleri (daha fazla bu makalenin sonraki bölümlerinde gelmesini) biçiminde hakkında veri Al izni gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="2ae3f-150">`offline_access` Kapsamı web uygulamaları için isteğe bağlı değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="2ae3f-151">Uygulamanıza gerekecek gösteren bir *yenileme belirteci* uzun süreli kaynaklarına erişim için.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="2ae3f-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="2ae3f-152">response_mode</span></span> |<span data-ttu-id="2ae3f-153">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-153">Recommended</span></span> |<span data-ttu-id="2ae3f-154">Sonuçta elde edilen yetkilendirme kodu uygulamanıza geri göndermek için kullanılması gereken yöntem.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="2ae3f-155">Ya da olabilir `query`, `form_post`, veya `fragment`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="2ae3f-156">`form_post` Yanıt modu için en iyi güvenlik önerilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="2ae3f-157">durum</span><span class="sxs-lookup"><span data-stu-id="2ae3f-157">state</span></span> |<span data-ttu-id="2ae3f-158">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-158">Recommended</span></span> |<span data-ttu-id="2ae3f-159">Ayrıca belirteci yanıtta döndürülen istek dahil bir değer.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="2ae3f-160">İstediğiniz herhangi bir içerik dizesi olabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="2ae3f-161">Rastgele oluşturulan benzersiz bir değer genellikle siteler arası istek sahteciliği saldırılarına önlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="2ae3f-162">Durumu, sayfanın üzerinde oldukları gibi kimlik doğrulama isteği oluşmadan önce uygulama kullanıcının durumu hakkındaki bilgileri kodlamak için de kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="2ae3f-163">nonce</span><span class="sxs-lookup"><span data-stu-id="2ae3f-163">nonce</span></span> |<span data-ttu-id="2ae3f-164">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-164">Required</span></span> |<span data-ttu-id="2ae3f-165">Bir talep elde edilen kimliği belirtecindeki dahil (uygulama tarafından üretilen) istek içindeki bir değer.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="2ae3f-166">Uygulama sonra belirteç yeniden yürütme saldırıları azaltmak için bu değeri doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="2ae3f-167">Genellikle istek kaynağını tanımlamak için kullanılan rastgele, benzersiz bir dize değeridir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="2ae3f-168">P</span><span class="sxs-lookup"><span data-stu-id="2ae3f-168">p</span></span> |<span data-ttu-id="2ae3f-169">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-169">Required</span></span> |<span data-ttu-id="2ae3f-170">Yürütülecek ilkesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-170">The policy that will be executed.</span></span> <span data-ttu-id="2ae3f-171">B2C kiracınızda oluşturulan bir ilkeyi adıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="2ae3f-172">İlke adı değeri ile başlaması gereken `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="2ae3f-173">İlkeleri hakkında daha fazla bilgi edinin ve [Genişletilebilir ilke çerçevesini](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="2ae3f-174">istemi</span><span class="sxs-lookup"><span data-stu-id="2ae3f-174">prompt</span></span> |<span data-ttu-id="2ae3f-175">İsteğe bağlı</span><span class="sxs-lookup"><span data-stu-id="2ae3f-175">Optional</span></span> |<span data-ttu-id="2ae3f-176">Gerekli bir kullanıcı etkileşimi türü.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-176">The type of user interaction that is required.</span></span> <span data-ttu-id="2ae3f-177">Şu anda geçerli tek değer `login`, kullanıcının bu isteği kimlik bilgilerini girmesini zorlar.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="2ae3f-178">Çoklu oturum açma etkili olmaz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="2ae3f-179">Bu noktada, ilkenin iş akışını tamamlamak için kullanıcının istedi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="2ae3f-180">Bu dizini ya da herhangi bir ilkenin nasıl tanımlanır bağlı olarak adım sayısı için kaydolan bir sosyal kimlik bilgilerinizle oturum, kullanıcı adını ve parolasını girerek kullanıcı gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="2ae3f-181">Azure AD kullanıcı ilkeyi tamamladıktan sonra uygulamanızı belirtilen bir yanıt döndürür `redirect_uri` belirtilen yöntemi kullanarak parametresi `response_mode` parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="2ae3f-182">Yanıt, her yürütülen ilke bağımsız önceki örneklerinin aynıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="2ae3f-183">Başarılı yanıt kullanarak `response_mode=fragment` gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="2ae3f-184">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-184">Parameter</span></span> | <span data-ttu-id="2ae3f-185">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-186">id_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-186">id_token</span></span> |<span data-ttu-id="2ae3f-187">İstenen uygulama kimliği belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-187">The ID token that the app requested.</span></span> <span data-ttu-id="2ae3f-188">Kullanıcının kimliğini doğrulamak ve kullanıcı oturumu başlatmak için kimliği belirteci kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="2ae3f-189">Kimlik belirteçlerini ve içerikleri daha ayrıntılı bilgi yer alan [Azure AD B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="2ae3f-190">Kod</span><span class="sxs-lookup"><span data-stu-id="2ae3f-190">code</span></span> |<span data-ttu-id="2ae3f-191">Kullandıysanız, uygulama, istenen yetkilendirme kodu `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="2ae3f-192">Uygulama, bir hedef kaynak için bir erişim belirteci istemek için yetkilendirme kodu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="2ae3f-193">Yetkilendirme kodları çok kısa ömürlüdür.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="2ae3f-194">Genellikle, yaklaşık 10 dakika sonra süresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="2ae3f-195">durum</span><span class="sxs-lookup"><span data-stu-id="2ae3f-195">state</span></span> |<span data-ttu-id="2ae3f-196">Varsa bir `state` parametresi, aynı değeri yanıt olarak görünmesi gereken istekte bulunur.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="2ae3f-197">Uygulama olduğunu doğrulamanız gerekir `state` istek ve yanıt değerler aynı.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="2ae3f-198">Hata yanıtları da gönderilebilir için `redirect_uri` parametre böylece uygulama bunları uygun şekilde işleyebilir:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="2ae3f-199">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-199">Parameter</span></span> | <span data-ttu-id="2ae3f-200">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-201">error</span><span class="sxs-lookup"><span data-stu-id="2ae3f-201">error</span></span> |<span data-ttu-id="2ae3f-202">Hata oluşan ve hataları tepki vermek için kullanılabilir türleri sınıflandırmak için kullanılan bir hata kodu dizesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="2ae3f-203">error_description</span><span class="sxs-lookup"><span data-stu-id="2ae3f-203">error_description</span></span> |<span data-ttu-id="2ae3f-204">Bir geliştirici bir kimlik doğrulama hatası kök nedenini belirlemenize yardımcı olabilecek belirli bir hata iletisi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="2ae3f-205">durum</span><span class="sxs-lookup"><span data-stu-id="2ae3f-205">state</span></span> |<span data-ttu-id="2ae3f-206">Bu bölümdeki ilk tablodaki tam açıklamasına bakın.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="2ae3f-207">Varsa bir `state` parametresi, aynı değeri yanıt olarak görünmesi gereken istekte bulunur.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="2ae3f-208">Uygulama olduğunu doğrulamanız gerekir `state` istek ve yanıt değerler aynı.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="2ae3f-209">Kimliği belirtecini doğrula</span><span class="sxs-lookup"><span data-stu-id="2ae3f-209">Validate the ID token</span></span>
<span data-ttu-id="2ae3f-210">Yalnızca bir kimliği belirteci alma kullanıcının kimliğini doğrulamak için yeterli değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="2ae3f-211">Kimliği belirtecin imzayı doğrulamak ve uygulamanızın gereksinimleri başına belirtecinizdeki talepleri doğrulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="2ae3f-212">Azure AD B2C kullanan [JSON Web belirteçleri (Jwt'ler)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) ve Belirteçleri imzalamak ve bunların geçerli olduğunu doğrulamak için ortak anahtar şifrelemesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="2ae3f-213">Jwt'ler, tercih dilinizi bağlı olarak doğrulamak için kullanılabilen birçok açık kaynak kitaplıkları vardır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="2ae3f-214">Kendi doğrulama mantığı uygulamak yerine bu seçenekleri keşfetme öneririz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="2ae3f-215">Burada yer alan bilgiler düzgün bir şekilde bu kitaplıkları kullanma nasıl anlamak yararlı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="2ae3f-216">Azure AD B2C çalışma zamanında Azure AD B2C hakkında bilgi almak uygulama izin veren bir Openıd Connect meta veri uç noktası, vardır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="2ae3f-217">Bu bilgiler, uç noktaları, belirteç içerikleri ve belirteç imzalama anahtarları içerir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="2ae3f-218">B2C kiracınızda her ilke için bir JSON meta veri belgesi yoktur.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="2ae3f-219">Örneğin, meta veri belgesi için `b2c_1_sign_in` ilkesinde `fabrikamb2c.onmicrosoft.com` bulunur:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="2ae3f-220">Bu yapılandırma belgesi özelliklerini biri `jwks_uri`, aynı ilke olacaktır için bir değer:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="2ae3f-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="2ae3f-222">Hangi ilke kimliği oturum açma kullanılan belirlemek için belirteci (ve meta veri Getir nereden), iki seçeneğiniz vardır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="2ae3f-223">İlk olarak, ilke adını dahil `acr` kimliği belirteçte talep.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="2ae3f-224">Bir kimliği belirteci talepleri ayrıştırma hakkında daha fazla bilgi için bkz: [Azure AD B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="2ae3f-225">Değerini ilkesinde kodlamak için diğer seçeneğiniz olduğunu `state` isteği gönderin ve ardından ilkeyi kullanılan belirlemek için kod çözme parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="2ae3f-226">Her iki yöntem geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-226">Either method is valid.</span></span>

<span data-ttu-id="2ae3f-227">Openıd Connect meta veri uç noktasından meta veri belgesi edindiğiniz sonra (hangi Bu uç noktada bulunur) RSA 256 ortak anahtarlar kullanabilirsiniz kimliği belirtecinin imzası doğrulanamadı.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="2ae3f-228">Verilen herhangi bir noktada Bu uç noktada zamanında listelenen birden çok anahtar olabilir, her tarafından tanımlanan bir `kid` talep.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="2ae3f-229">Kimliği belirteci üstbilgisinin de içeren bir `kid` talep, bu anahtarlar hangisinin kimliği belirteç imzalamak için kullanılan gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="2ae3f-230">Daha fazla bilgi için bkz: [Azure AD B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md) (bölüm [belirteçleri doğrulama](active-directory-b2c-reference-tokens.md#token-validation), özellikle).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="2ae3f-231">Kimliği belirtecinin imzası doğruladıktan sonra doğrulamak için gereken birkaç talep vardır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="2ae3f-232">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-232">For instance:</span></span>

* <span data-ttu-id="2ae3f-233">Doğrulama `nonce` belirteç yeniden yürütme saldırılarını önlemek talep.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="2ae3f-234">Oturum açma istekte belirtilen değeri olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="2ae3f-235">Doğrulama `aud` kimliği belirteci uygulamanız için verilmiş emin olmak talep.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="2ae3f-236">Değeri, uygulamanızın uygulama kimliği olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="2ae3f-237">Doğrulama `iat` ve `exp` kimliği belirtecin süresi geçmemiş emin olmak talep.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="2ae3f-238">Gerçekleştirmeniz gereken birkaç daha fazla doğrulama vardır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="2ae3f-239">Bunlar içinde ayrıntılı olarak açıklanmıştır [Openıd Connect çekirdek Spec](http://openid.net/specs/openid-connect-core-1_0.html).  Senaryonuza bağlı olarak ek talep doğrulamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="2ae3f-240">Bazı ortak doğrulamaları şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-240">Some common validations include:</span></span>

* <span data-ttu-id="2ae3f-241">Kullanıcı/kuruluş uygulaması için kaydolmuş emin olma.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="2ae3f-242">Kullanıcının uygun yetkilendirme/ayrıcalıklara sahip olma.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="2ae3f-243">Belirli bir kimlik doğrulama gücünü, Azure multi-Factor Authentication gibi oluştuğunu sağlama.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="2ae3f-244">Bir kimliği belirtecinizdeki talepleri hakkında daha fazla bilgi için bkz: [Azure AD B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="2ae3f-245">Kimliği belirteci doğrulandıktan sonra kullanıcıyla oturum başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="2ae3f-246">Uygulamanızda kullanıcı hakkında bilgi edinmek için talep kimliği belirteçte kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="2ae3f-247">Bu bilgiler kullanımları görüntüleme, kayıtları ve yetkilendirme içerir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="2ae3f-248">Belirteç alın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-248">Get a token</span></span>
<span data-ttu-id="2ae3f-249">Yalnızca İlkeleri yürütmek için web uygulamanız gerekiyorsa, sonraki birkaç bölümlerde atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="2ae3f-250">Bu bölüm, yapmanız gereken uygulamaları bir web API çağrıları kimlik doğrulaması ve Azure AD B2C tarafından korunmuş web geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="2ae3f-251">Aldığınız yetki kodunu kullanın (kullanarak `response_type=code+id_token`) göndererek istenen kaynak için bir belirteç için bir `POST` isteği `/token` uç noktası.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="2ae3f-252">Şu an için bir belirteç isteği yalnızca kaynak uygulamanın kendi arka uç web API değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="2ae3f-253">Kendinize bir belirteç isteyen kuralı, uygulamanın istemci Kimliğini kapsamı olarak kullanmaktır:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="2ae3f-254">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-254">Parameter</span></span> | <span data-ttu-id="2ae3f-255">Gerekli?</span><span class="sxs-lookup"><span data-stu-id="2ae3f-255">Required?</span></span> | <span data-ttu-id="2ae3f-256">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ae3f-257">P</span><span class="sxs-lookup"><span data-stu-id="2ae3f-257">p</span></span> |<span data-ttu-id="2ae3f-258">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-258">Required</span></span> |<span data-ttu-id="2ae3f-259">Yetkilendirme kodu almak için kullanılan bir ilke.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="2ae3f-260">Bu isteği başka bir ilke kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="2ae3f-261">Bu parametre sorgu dizesi değil eklediğiniz Not `POST` gövdesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="2ae3f-262">client_id</span><span class="sxs-lookup"><span data-stu-id="2ae3f-262">client_id</span></span> |<span data-ttu-id="2ae3f-263">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-263">Required</span></span> |<span data-ttu-id="2ae3f-264">Uygulama Kimliği [Azure portal](https://portal.azure.com/) uygulamanıza atanmış.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="2ae3f-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="2ae3f-265">grant_type</span></span> |<span data-ttu-id="2ae3f-266">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-266">Required</span></span> |<span data-ttu-id="2ae3f-267">Olmalıdır grant türünü `authorization_code` yetkilendirme kodu akışı.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="2ae3f-268">Kapsam</span><span class="sxs-lookup"><span data-stu-id="2ae3f-268">scope</span></span> |<span data-ttu-id="2ae3f-269">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-269">Recommended</span></span> |<span data-ttu-id="2ae3f-270">Kapsamları boşlukla ayrılmış listesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-270">A space-separated list of scopes.</span></span> <span data-ttu-id="2ae3f-271">Tek bir kapsam değeri Azure AD ile istenen iki izinleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="2ae3f-272">`openid` Kapsamını, kullanıcıyla oturum açmak ve id_token parametreleri biçiminde kullanıcı hakkında veri Al izni belirtir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="2ae3f-273">Aynı uygulama kimliği istemci tarafından temsil edilen, uygulamanın kendi arka uç web API'si, belirteçleri almak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="2ae3f-274">`offline_access` Kapsamını belirtir, uygulamanızın uzun süreli kaynaklarına erişim için bir yenileme belirteci gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="2ae3f-275">Kod</span><span class="sxs-lookup"><span data-stu-id="2ae3f-275">code</span></span> |<span data-ttu-id="2ae3f-276">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-276">Required</span></span> |<span data-ttu-id="2ae3f-277">Akış ilk leg içinde aldığınız yetkilendirme kodu.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="2ae3f-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="2ae3f-278">redirect_uri</span></span> |<span data-ttu-id="2ae3f-279">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-279">Required</span></span> |<span data-ttu-id="2ae3f-280">`redirect_uri` Yetkilendirme kodu aldığınız uygulama parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="2ae3f-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="2ae3f-281">client_secret</span></span> |<span data-ttu-id="2ae3f-282">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-282">Required</span></span> |<span data-ttu-id="2ae3f-283">İçinde oluşturulan uygulama gizli anahtarı [Azure portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="2ae3f-284">Bu uygulama gizli anahtarı bir önemli güvenlik yapıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="2ae3f-285">Onu güvenli bir şekilde sunucunuzda depolamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-285">You should store it securely on your server.</span></span> <span data-ttu-id="2ae3f-286">Ayrıca bu gizli düzenli aralıklarla döndürme.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="2ae3f-287">Başarılı bir token yanıt şuna benzer:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="2ae3f-288">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-288">Parameter</span></span> | <span data-ttu-id="2ae3f-289">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-290">not_before</span><span class="sxs-lookup"><span data-stu-id="2ae3f-290">not_before</span></span> |<span data-ttu-id="2ae3f-291">Hangi belirtecin geçerli dönem zamanında değerlendirilir süre.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="2ae3f-292">token_type</span><span class="sxs-lookup"><span data-stu-id="2ae3f-292">token_type</span></span> |<span data-ttu-id="2ae3f-293">Belirteç türü değeri.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-293">The token type value.</span></span> <span data-ttu-id="2ae3f-294">Azure AD destekler yalnızca türü `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="2ae3f-295">access_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-295">access_token</span></span> |<span data-ttu-id="2ae3f-296">İstediğiniz imzalı JWT belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="2ae3f-297">Kapsam</span><span class="sxs-lookup"><span data-stu-id="2ae3f-297">scope</span></span> |<span data-ttu-id="2ae3f-298">Belirtecin geçerli olduğu kapsamlar.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="2ae3f-299">Bu, daha sonra kullanmak için belirteç önbelleğe almak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="2ae3f-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="2ae3f-300">expires_in</span></span> |<span data-ttu-id="2ae3f-301">Erişim belirtecinin (saniye olarak) geçerli olduğu süreyi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="2ae3f-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-302">refresh_token</span></span> |<span data-ttu-id="2ae3f-303">Bir OAuth 2.0 yenileme belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="2ae3f-304">Uygulama geçerli belirtecin süresi dolduktan sonra ek belirteçleri almak için bu belirteci kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="2ae3f-305">Yenileme belirteçleri uzun süreli ve uzun süre için kaynaklara erişimi korumak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="2ae3f-306">Daha fazla ayrıntı için başvurmak [B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="2ae3f-307">Kapsam kullanılan gerekir Not `offline_access` yetkilendirme ve bir yenileme belirteci almak için belirteç isteklerini.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="2ae3f-308">Hata yanıtları gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="2ae3f-309">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-309">Parameter</span></span> | <span data-ttu-id="2ae3f-310">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-311">error</span><span class="sxs-lookup"><span data-stu-id="2ae3f-311">error</span></span> |<span data-ttu-id="2ae3f-312">Hata oluşan ve hataları tepki vermek için kullanılabilir türleri sınıflandırmak için kullanılan bir hata kodu dizesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="2ae3f-313">error_description</span><span class="sxs-lookup"><span data-stu-id="2ae3f-313">error_description</span></span> |<span data-ttu-id="2ae3f-314">Bir geliştirici bir kimlik doğrulama hatası kök nedenini belirlemenize yardımcı olabilecek belirli bir hata iletisi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="2ae3f-315">Belirteci kullanın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-315">Use the token</span></span>
<span data-ttu-id="2ae3f-316">Bir erişim belirteci başarıyla edindiğiniz, belirteç isteklerini kullanabilirsiniz dahil ederek API'leri, arka uç web `Authorization` üstbilgisi:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="2ae3f-317">Belirteç Yenile</span><span class="sxs-lookup"><span data-stu-id="2ae3f-317">Refresh the token</span></span>
<span data-ttu-id="2ae3f-318">Kimlik belirteçlerini ömürlüdür.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-318">ID tokens are short-lived.</span></span> <span data-ttu-id="2ae3f-319">Kaynaklara erişmeye devam edebilmek için parolalarının süresi dolduktan sonra bunları yenilemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="2ae3f-320">Başka bir göndererek yapabilirsiniz `POST` isteği `/token` uç noktası.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="2ae3f-321">Bu süre sağlamak `refresh_token` yerine parametre `code` parametre:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="2ae3f-322">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-322">Parameter</span></span> | <span data-ttu-id="2ae3f-323">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-323">Required</span></span> | <span data-ttu-id="2ae3f-324">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ae3f-325">P</span><span class="sxs-lookup"><span data-stu-id="2ae3f-325">p</span></span> |<span data-ttu-id="2ae3f-326">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-326">Required</span></span> |<span data-ttu-id="2ae3f-327">Özgün yenileme belirtecini almak için kullanılan bir ilke.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="2ae3f-328">Bu isteği başka bir ilke kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="2ae3f-329">Bu parametre eklediğiniz sorgu dizesi için değil, POST gövde unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="2ae3f-330">client_id</span><span class="sxs-lookup"><span data-stu-id="2ae3f-330">client_id</span></span> |<span data-ttu-id="2ae3f-331">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-331">Required</span></span> |<span data-ttu-id="2ae3f-332">Uygulama Kimliği [Azure portal](https://portal.azure.com/) uygulamanıza atanmış.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="2ae3f-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="2ae3f-333">grant_type</span></span> |<span data-ttu-id="2ae3f-334">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-334">Required</span></span> |<span data-ttu-id="2ae3f-335">Bu leg yetkilendirme kodu akışı için bir yenileme belirteci olmalıdır grant türü.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="2ae3f-336">Kapsam</span><span class="sxs-lookup"><span data-stu-id="2ae3f-336">scope</span></span> |<span data-ttu-id="2ae3f-337">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-337">Recommended</span></span> |<span data-ttu-id="2ae3f-338">Kapsamları boşlukla ayrılmış listesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-338">A space-separated list of scopes.</span></span> <span data-ttu-id="2ae3f-339">Tek bir kapsam değeri Azure AD ile istenen iki izinleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="2ae3f-340">`openid` Kapsam kullanıcı oturumu ve kullanıcı kimliği belirteçleri biçiminde hakkında veri Al izni gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="2ae3f-341">Aynı uygulama kimliği istemci tarafından temsil edilen, uygulamanın kendi arka uç web API'si, belirteçleri almak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="2ae3f-342">`offline_access` Kapsamını belirtir, uygulamanızın uzun süreli kaynaklarına erişim için bir yenileme belirteci gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="2ae3f-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="2ae3f-343">redirect_uri</span></span> |<span data-ttu-id="2ae3f-344">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-344">Recommended</span></span> |<span data-ttu-id="2ae3f-345">`redirect_uri` Yetkilendirme kodu aldığınız uygulama parametresi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="2ae3f-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-346">refresh_token</span></span> |<span data-ttu-id="2ae3f-347">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-347">Required</span></span> |<span data-ttu-id="2ae3f-348">Akış ikinci leg içinde aldığınız özgün yenileme belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="2ae3f-349">Kapsam kullanılan gerekir Not `offline_access` yetkilendirme ve bir yenileme belirteci almak için belirteç isteklerini.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="2ae3f-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="2ae3f-350">client_secret</span></span> |<span data-ttu-id="2ae3f-351">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-351">Required</span></span> |<span data-ttu-id="2ae3f-352">İçinde oluşturulan uygulama gizli anahtarı [Azure portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="2ae3f-353">Bu uygulama gizli anahtarı bir önemli güvenlik yapıdır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="2ae3f-354">Onu güvenli bir şekilde sunucunuzda depolamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-354">You should store it securely on your server.</span></span> <span data-ttu-id="2ae3f-355">Ayrıca bu gizli düzenli aralıklarla döndürme.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="2ae3f-356">Başarılı bir token yanıt şuna benzer:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="2ae3f-357">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-357">Parameter</span></span> | <span data-ttu-id="2ae3f-358">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-359">not_before</span><span class="sxs-lookup"><span data-stu-id="2ae3f-359">not_before</span></span> |<span data-ttu-id="2ae3f-360">Hangi belirtecin geçerli dönem zamanında değerlendirilir süre.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="2ae3f-361">token_type</span><span class="sxs-lookup"><span data-stu-id="2ae3f-361">token_type</span></span> |<span data-ttu-id="2ae3f-362">Belirteç türü değeri.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-362">The token type value.</span></span> <span data-ttu-id="2ae3f-363">Azure AD destekler yalnızca türü `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="2ae3f-364">access_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-364">access_token</span></span> |<span data-ttu-id="2ae3f-365">İstediğiniz imzalı JWT belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="2ae3f-366">Kapsam</span><span class="sxs-lookup"><span data-stu-id="2ae3f-366">scope</span></span> |<span data-ttu-id="2ae3f-367">Daha sonra kullanmak için belirteç önbelleğe alma işlemi için kullanılan belirteci için geçerli olan kapsamı.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="2ae3f-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="2ae3f-368">expires_in</span></span> |<span data-ttu-id="2ae3f-369">Erişim belirtecinin (saniye olarak) geçerli olduğu süreyi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="2ae3f-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="2ae3f-370">refresh_token</span></span> |<span data-ttu-id="2ae3f-371">Bir OAuth 2.0 yenileme belirteci.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="2ae3f-372">Uygulama geçerli belirtecin süresi dolduktan sonra ek belirteçleri almak için bu belirteci kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="2ae3f-373">Yenileme belirteçleri uzun süreli ve uzun süre için kaynaklara erişimi korumak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="2ae3f-374">Daha fazla ayrıntı için bkz [B2C belirteç başvurusunda](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="2ae3f-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="2ae3f-375">Hata yanıtları gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="2ae3f-376">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-376">Parameter</span></span> | <span data-ttu-id="2ae3f-377">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ae3f-378">error</span><span class="sxs-lookup"><span data-stu-id="2ae3f-378">error</span></span> |<span data-ttu-id="2ae3f-379">Hata oluşan ve hataları tepki vermek için kullanılabilir türleri sınıflandırmak için kullanılan bir hata kodu dizesi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="2ae3f-380">error_description</span><span class="sxs-lookup"><span data-stu-id="2ae3f-380">error_description</span></span> |<span data-ttu-id="2ae3f-381">Bir geliştirici bir kimlik doğrulama hatası kök nedenini belirlemenize yardımcı olabilecek belirli bir hata iletisi.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="2ae3f-382">Oturum kapatma isteği gönder</span><span class="sxs-lookup"><span data-stu-id="2ae3f-382">Send a sign-out request</span></span>
<span data-ttu-id="2ae3f-383">Uygulama dışında kullanıcı oturum istediğinizde, uygulamanızın tanımlama bilgilerini veya aksi takdirde son kullanıcı oturumuyla temizlemek yeterli değil.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="2ae3f-384">Ayrıca, oturumu kapatmak için Azure ad kullanıcı yönlendirmesi gerekir. Bunu yapmak başarısız olursa, kullanıcı kimlik bilgilerini yeniden girmeye gerek kalmadan, uygulamanızın yeniden kimlik doğrulamaya olabilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="2ae3f-385">Bu durum, geçerli tek bir oturum açma oturumu Azure AD ile gerekir çünkü.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="2ae3f-386">Kullanıcıya yalnızca yönlendirebilirsiniz `end_session` Openıd Connect meta veri belgesinde listelenen endpoint önceki içinde "doğrulama kimliği belirteci" bölümünde açıklanan:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="2ae3f-387">Parametre</span><span class="sxs-lookup"><span data-stu-id="2ae3f-387">Parameter</span></span> | <span data-ttu-id="2ae3f-388">Gerekli?</span><span class="sxs-lookup"><span data-stu-id="2ae3f-388">Required?</span></span> | <span data-ttu-id="2ae3f-389">Açıklama</span><span class="sxs-lookup"><span data-stu-id="2ae3f-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ae3f-390">P</span><span class="sxs-lookup"><span data-stu-id="2ae3f-390">p</span></span> |<span data-ttu-id="2ae3f-391">Gerekli</span><span class="sxs-lookup"><span data-stu-id="2ae3f-391">Required</span></span> |<span data-ttu-id="2ae3f-392">Uygulamanızı dışında kullanıcı oturum için kullanmak istediğiniz ilke.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="2ae3f-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="2ae3f-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="2ae3f-394">Önerilen</span><span class="sxs-lookup"><span data-stu-id="2ae3f-394">Recommended</span></span> |<span data-ttu-id="2ae3f-395">Kullanıcı için sonra yeniden yönlendirilmesi gereken URL başarılı oturum kapatma. Dahil edilmezse, Azure AD B2C kullanıcı genel bir ileti gösterir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="2ae3f-396">Kullanıcıya yönlendirerek rağmen `end_session` uç nokta bazı Azure AD B2C ile kullanıcının tek oturum açma durumu Temizle, sosyal kimlik sağlayıcıyı (IDP) oturumuna dışında kullanıcı oturum yok.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="2ae3f-397">Kullanıcı bir sonraki oturum açma sırasında aynı IDP seçerse, bunlar, kullanıcıların kimlik bilgilerini girmeden kimliğinin yeniden doğrulanması.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="2ae3f-398">Bir kullanıcı oturumunu B2C uygulamanızı imzalamak isterse, mutlaka dışında kendi Facebook hesabıyla oturum istediği anlamına gelmez.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="2ae3f-399">Ancak, yerel hesaplar için söz konusu olduğunda, kullanıcının oturumunu düzgün sonlandırılır.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="2ae3f-400">B2C kiracısına kullanın</span><span class="sxs-lookup"><span data-stu-id="2ae3f-400">Use your own B2C tenant</span></span>
<span data-ttu-id="2ae3f-401">Bu istekleri kendiniz için denemek istiyorsanız, önce bu üç adımı gerçekleştirin ve ardından daha önce kendi açıklanan örnek değerleri değiştirin:</span><span class="sxs-lookup"><span data-stu-id="2ae3f-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="2ae3f-402">[B2C kiracısı oluşturma](active-directory-b2c-get-started.md)ve isteklerinde kiracınızın adını kullanın.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="2ae3f-403">[Uygulama oluşturma](active-directory-b2c-app-registration.md) bir uygulama kimliğini almak için</span><span class="sxs-lookup"><span data-stu-id="2ae3f-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="2ae3f-404">Bir web uygulaması/web API uygulamanızı içerir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="2ae3f-405">İsteğe bağlı olarak, bir uygulama gizli anahtarı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="2ae3f-406">[İlkelerinizi oluşturma](active-directory-b2c-reference-policies.md) ilke adları elde edilir.</span><span class="sxs-lookup"><span data-stu-id="2ae3f-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

