---
title: "Azure Active Directory B2C: Belirteç başvurusu | Microsoft Docs"
description: "Azure Active Directory B2C'de yayınlanan belirteçleri türleri"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="8e8f5-103">Azure AD B2C: Belirteç başvurusu</span><span class="sxs-lookup"><span data-stu-id="8e8f5-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="8e8f5-104">Azure Active Directory B2C (Azure AD B2C) her işlediği gibi çeşitli güvenlik belirteçleri yayar [kimlik doğrulaması akışı](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="8e8f5-105">Bu belgede biçimi, güvenlik özellikleri ve her tür bir belirteç içeriği açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="8e8f5-106">Belirteç türleri</span><span class="sxs-lookup"><span data-stu-id="8e8f5-106">Types of tokens</span></span>
<span data-ttu-id="8e8f5-107">Azure AD B2C destekleyen [OAuth 2.0 yetkilendirme protokolünü](active-directory-b2c-reference-protocols.md), erişim belirteçleri ve yenileme belirteçleri hangi her ikisini de kullanır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="8e8f5-108">Kimlik doğrulama ve oturum açma aracılığıyla da destekler [Openıd Connect](active-directory-b2c-reference-protocols.md), bir üçüncü Belirtecin türü sunar: kimliği belirteci.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="8e8f5-109">Her Bu belirteçler, taşıyıcı belirteç olarak temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="8e8f5-110">Bir taşıyıcı belirteci korunan bir kaynağa "bearer" erişim veren bir basit güvenlik belirtecidir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="8e8f5-111">Taşıyıcı belirteci sunabilir herhangi bir tarafa ' dir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="8e8f5-112">Bir taşıyıcı belirteci almak için önce azure AD önce bir taraf kimlik doğrulaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="8e8f5-113">Ancak belirteç iletim ve depolama güvenli hale getirmek için gerekli adımları katılmaz varsa, onu kullanılabilir ele ve istenmeyen bir şirket tarafından kullanılan.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="8e8f5-114">Bazı güvenlik belirteçleri kullanarak gelen yetkisiz tarafların engellemek için yerleşik bir mekanizma sahip, ancak taşıyıcı belirteçlerini bu düzenek sahip değil.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="8e8f5-115">Bunlar Aktarım Katmanı Güvenliği (HTTPS) gibi güvenli bir kanal taşınan gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="8e8f5-116">Bir taşıyıcı belirteci dışında güvenli bir kanal iletilirse, kötü amaçlı bir taraf belirtecini almak ve korunan bir kaynağa yetkisiz erişim kazanmak için kullanmak üzere bir adam-in--middle saldırı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="8e8f5-117">Taşıyıcı belirteçlerini depolanan veya daha sonra kullanmak için önbelleğe alınmış, aynı güvenlik ilkelerini uygular.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="8e8f5-118">Her zaman uygulamanızı aktarır ve güvenli bir şekilde taşıyıcı belirteçleri depolar emin olun.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="8e8f5-119">Taşıyıcı belirteçlerini üzerinde ek güvenlik konuları için bkz: [RFC 6750 bölüm 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="8e8f5-120">Azure AD B2C sorunları belirteçleri çoğunu JSON web belirteçleri (Jwt'ler) uygulanır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="8e8f5-121">JWT, iki taraf arasında bilgi aktarma compact, URL için güvenli bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="8e8f5-122">Jwt'ler talepler olarak bilinen bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="8e8f5-123">Bunlar, taşıyıcı hakkındaki bilgilerin onaylar ve belirteç konu olan.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="8e8f5-124">Jwt'ler talepleri, kodlanmış ve aktarım için seri JSON nesneleridir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="8e8f5-125">Azure AD B2C tarafından verilen Jwt'ler imzalanmış ancak şifreli olduğundan, hata ayıklamak için JWT içeriğini kolayca inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="8e8f5-126">Birkaç araç bulunmaktadır, yapabilir dahil olmak üzere bu [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="8e8f5-127">Jwt'ler hakkında daha fazla bilgi için bkz [JWT belirtimleri](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="8e8f5-128">Kimliği belirteçleri</span><span class="sxs-lookup"><span data-stu-id="8e8f5-128">ID tokens</span></span>
<span data-ttu-id="8e8f5-129">Bir kimliği belirteci uygulamanızı Azure AD B2C ' aldığı güvenlik belirteci biçimidir `authorize` ve `token` uç noktaları.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="8e8f5-130">Kimlik belirteçlerini olarak temsil [Jwt'ler](#types-of-tokens), uygulamanızda kullanıcıları tanımlamak için kullanabileceğiniz talepleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="8e8f5-131">Ne zaman kimlik belirteçlerini edinilen gelen `authorize` uç noktası, bunlar genellikle kullanıcıların web uygulamalarını imzalamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="8e8f5-132">Ne zaman kimlik belirteçlerini edinilen gelen `token` uç noktası, bunlar gönderilebilir HTTP isteklerinde aynı uygulama veya hizmet iki bileşenleri arasındaki iletişim sırasında.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="8e8f5-133">Uygun gördüğünüz şekilde kimliği belirteçte talep kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="8e8f5-134">Hesap bilgilerini görüntülemek veya erişim denetimi kararlarını bir uygulama için yaygın olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="8e8f5-135">Kimlik belirteçlerini imzalanmış, ancak şu anda şifrelenmez.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="8e8f5-136">Uygulamanızı veya API kimliği belirteci aldığında, gerekir [imzayı doğrulamak](#token-validation) belirteç gerçek olduğunu kanıtlamak için.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="8e8f5-137">Ayrıca, uygulama veya API geçerli olduğunu kanıtlamak için birkaç talep belirteci doğrulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="8e8f5-138">Senaryonun gereksinimlerine bağlı olarak, bir uygulama tarafından doğrulanmış talep farklılık gösterebilir, ancak uygulamanızı bazı gerçekleştirmelisiniz [ortak talep doğrulamaları](#token-validation) her senaryoda.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="8e8f5-139">Örnek kimliği belirteci</span><span class="sxs-lookup"><span data-stu-id="8e8f5-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="8e8f5-140">Erişim belirteçleri</span><span class="sxs-lookup"><span data-stu-id="8e8f5-140">Access tokens</span></span>
<span data-ttu-id="8e8f5-141">Bir erişim belirteci Ayrıca uygulamanızı Azure AD B2C ' aldığı güvenlik belirteci biçimidir `authorize` ve `token` uç noktaları.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="8e8f5-142">Erişim belirteçleri ayrıca olarak temsil [Jwt'ler](#types-of-tokens), Apı'lerinizi için verilen izinleri tanımlamak için kullanabileceğiniz talepleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="8e8f5-143">Erişim belirteçleri imzalanmış, ancak şu anda şifrelenmez.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="8e8f5-144">Erişim belirteçleri API'ler ve kaynak sunuculara erişmesini sağlamak için kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="8e8f5-145">Nasıl yapılır hakkında daha fazla bilgi [erişim belirteçleri kullanmak](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="8e8f5-146">API'nizi bir erişim belirteci aldığında, gerekir [imzayı doğrulamak](#token-validation) belirteç gerçek olduğunu kanıtlamak için.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="8e8f5-147">API'nizi da geçerli olduğunu kanıtlamak için birkaç talep belirteci doğrulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="8e8f5-148">Senaryonun gereksinimlerine bağlı olarak, bir uygulama tarafından doğrulanmış talep farklılık gösterebilir, ancak uygulamanızı bazı gerçekleştirmelisiniz [ortak talep doğrulamaları](#token-validation) her senaryoda.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="8e8f5-149">Kimlik ve erişim belirteçleri talepleri</span><span class="sxs-lookup"><span data-stu-id="8e8f5-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="8e8f5-150">Azure AD B2C kullandığınızda, belirteçlerinizi içeriğini hassas denetime sahip olursunuz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="8e8f5-151">Yapılandırabileceğiniz [ilkeleri](active-directory-b2c-reference-policies.md) belirli kullanıcı veri kümelerinin kendi işlemleri için uygulamanızı gerektiren talepleri göndermek için.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="8e8f5-152">Bu talep kullanıcının gibi standart özellikler içerebilir `displayName` ve `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="8e8f5-153">Ayrıca içerebilir [özel kullanıcı öznitelikleri](active-directory-b2c-reference-custom-attr.md) , B2C dizininizde tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="8e8f5-154">Her kimlik ve erişim aldığınız belirteç talep güvenlikle ilgili belirli bir kümesini içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="8e8f5-155">Uygulamalarınızı, bu talepler güvenli bir şekilde kullanıcılar ve istekleri kimlik doğrulaması yapmak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="8e8f5-156">Talep Kimliği belirteçlerinde belirli bir sırada döndürülmez unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="8e8f5-157">Ayrıca, yeni talep kimliği belirteçleri herhangi bir zamanda tanıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="8e8f5-158">Yeni Talep sunulduğu şekilde uygulamanızı parçalara değil.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="8e8f5-159">Burada, Azure AD B2C tarafından yayınlanan kimliği ve erişim belirteçleri mevcut beklediğiniz talep bulunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="8e8f5-160">Herhangi bir ek talep ilkeleri tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="8e8f5-161">Uygulama için örnek kimliği belirtecinizdeki talepleri içine yapıştırarak inceleniyor deneyin [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="8e8f5-162">Daha fazla ayrıntı bulunabilir [Openıd Connect belirtimi](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="8e8f5-163">Ad</span><span class="sxs-lookup"><span data-stu-id="8e8f5-163">Name</span></span> | <span data-ttu-id="8e8f5-164">İste</span><span class="sxs-lookup"><span data-stu-id="8e8f5-164">Claim</span></span> | <span data-ttu-id="8e8f5-165">Örnek değer</span><span class="sxs-lookup"><span data-stu-id="8e8f5-165">Example value</span></span> | <span data-ttu-id="8e8f5-166">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8e8f5-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8e8f5-167">Hedef kitle</span><span class="sxs-lookup"><span data-stu-id="8e8f5-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="8e8f5-168">Bir izleyici talep belirtecinin hedeflenen alıcı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="8e8f5-169">Azure AD B2C için hedef kitle, uygulamanızın uygulama kimliği, uygulama kayıt portalında uygulamanıza atanan aynıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="8e8f5-170">Uygulamanız bu değeri doğrulamak ve onu eşleşmiyorsa belirteci reddetme gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="8e8f5-171">Veren</span><span class="sxs-lookup"><span data-stu-id="8e8f5-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="8e8f5-172">Bu talep oluşturur ve belirteci döndüren güvenlik belirteci hizmeti (STS) tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="8e8f5-173">Ayrıca, kullanıcı kimlik doğrulamasının yapıldığı Azure AD dizini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="8e8f5-174">Uygulamanız Azure Active Directory v2.0 uç noktasından belirteç geldiğini emin olmak için verenin talep doğrulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="8e8f5-175">çıkışı</span><span class="sxs-lookup"><span data-stu-id="8e8f5-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="8e8f5-176">Bu talep belirteci, dönem saatle gösterilir düzenlendiği zamandır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="8e8f5-177">süre sonu</span><span class="sxs-lookup"><span data-stu-id="8e8f5-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="8e8f5-178">Dönem zaman temsil hangi belirteci geçersiz hale geldiği tarih talep sona erme saati.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="8e8f5-179">Uygulamanızı belirteç ömrü geçerliliğini doğrulamak için bu talep kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="8e8f5-180">önce değil</span><span class="sxs-lookup"><span data-stu-id="8e8f5-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="8e8f5-181">Bu talep aktarılma belirteç olur geçerli, dönem zaman gösterilen saattir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="8e8f5-182">Bu genellikle belirtecin verilmiş süresiyle aynıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="8e8f5-183">Uygulamanızı belirteç ömrü geçerliliğini doğrulamak için bu talep kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="8e8f5-184">Sürüm</span><span class="sxs-lookup"><span data-stu-id="8e8f5-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="8e8f5-185">Bu kimliği belirteci Azure AD tarafından tanımlandığı şekilde sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="8e8f5-186">kod karma</span><span class="sxs-lookup"><span data-stu-id="8e8f5-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="8e8f5-187">Yalnızca bir OAuth 2.0 yetkilendirme kodu ile birlikte belirtecin verildiğinde bir kod karma bir kimlik belirtecinde dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="8e8f5-188">Kod karma bir kimlik doğrulama kodu özgünlüğünü doğrulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="8e8f5-189">Bu doğrulama gerçekleştirme konusunda daha fazla ayrıntı için bkz: [Openıd Connect belirtimi](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="8e8f5-190">erişim belirteci karma</span><span class="sxs-lookup"><span data-stu-id="8e8f5-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="8e8f5-191">Yalnızca bir OAuth 2.0 erişim belirteci ile birlikte belirtecin verildiğinde bir erişim belirteci karma bir kimlik belirtecinde dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="8e8f5-192">Bir erişim belirteci karma bir erişim belirteci özgünlüğünü doğrulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="8e8f5-193">Bu doğrulama gerçekleştirme konusunda daha fazla ayrıntı için bkz: [Openıd Connect belirtimi](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="8e8f5-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="8e8f5-194">nonce</span><span class="sxs-lookup"><span data-stu-id="8e8f5-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="8e8f5-195">Nonce belirteç yeniden yürütme saldırıları azaltmak için kullanılan bir stratejidir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="8e8f5-196">Uygulamanızı bir nonce bir yetkilendirme isteği kullanarak belirtebilirsiniz `nonce` sorgu parametresi.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="8e8f5-197">İstekte sağladığınız değerin içinde değiştirilmemiş yayılan `nonce` yalnızca bir kimliği belirtecini talep.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="8e8f5-198">Bu uygulamanın oturumunu belirli bir kimliği belirteciyle ilişkilendirir istekte belirtilen değerle değerini doğrulamak uygulamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="8e8f5-199">Uygulamanız bu doğrulama kimliği belirteci doğrulama işlemi sırasında gerçekleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="8e8f5-200">Konu</span><span class="sxs-lookup"><span data-stu-id="8e8f5-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="8e8f5-201">Hakkında bilgi, bir uygulamanın kullanıcı gibi belirteci onaylar asıl budur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="8e8f5-202">Bu değer sabittir ve yeniden atandığında yeniden ya da silinemez.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="8e8f5-203">Belirtecin bir kaynağa erişmek için kullanıldığında gibi güvenli bir şekilde, yetkilendirme denetimleri gerçekleştirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="8e8f5-204">Varsayılan olarak, konu talep dizindeki kullanıcı nesne kimliği ile doldurulur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="8e8f5-205">Daha fazla bilgi için bkz: [Azure Active Directory B2C: belirteci, oturum ve tek oturum açma yapılandırması](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="8e8f5-206">Kimlik doğrulama bağlamı sınıf başvurusu</span><span class="sxs-lookup"><span data-stu-id="8e8f5-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="8e8f5-207">Uygulanamaz</span><span class="sxs-lookup"><span data-stu-id="8e8f5-207">Not applicable</span></span> |<span data-ttu-id="8e8f5-208">Şu anda kullanılmayan, söz konusu olduğunda eski ilkeleri dışındaki.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="8e8f5-209">Daha fazla bilgi için bkz: [Azure Active Directory B2C: belirteci, oturum ve tek oturum açma yapılandırması](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="8e8f5-210">Güven Framework İlkesi</span><span class="sxs-lookup"><span data-stu-id="8e8f5-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="8e8f5-211">Kimliği belirtecini almak için kullanılan ilkeyi adıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="8e8f5-212">Kimlik doğrulama süresi</span><span class="sxs-lookup"><span data-stu-id="8e8f5-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="8e8f5-213">Bu talep bir kullanıcı son girilen kimlik bilgileri, dönem zamanında temsil saattir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="8e8f5-214">Yenileme belirteçlerini</span><span class="sxs-lookup"><span data-stu-id="8e8f5-214">Refresh tokens</span></span>
<span data-ttu-id="8e8f5-215">Yenileme belirteçleri olan uygulamanızı yeni kimlik belirteçlerini edinmeli ve bir OAuth 2.0 akışı belirteçleri erişmek için kullanabileceğiniz güvenlik belirteçleri.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="8e8f5-216">Uygulamanızı uzun vadeli kaynaklara erişimi kullanıcılar adına sahip olan kullanıcılar ile etkileşimi gerektirmeden sağlarlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="8e8f5-217">Bir yenileme almak için bir belirteç yanıt belirteç uygulamanızı istemelisiniz `offline_acesss` kapsam.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="8e8f5-218">Daha fazla bilgi edinmek için `offline_access` kapsam, başvurmak [Azure AD B2C Protokolü başvurusu](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="8e8f5-219">Yenileme belirteçlerini olan ve her zaman, uygulamanıza tamamen opak olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="8e8f5-220">Bunlar Azure AD tarafından verilen ve Denetlenmekte ve yalnızca Azure AD tarafından yorumlanır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="8e8f5-221">Uzun süreli, ancak bir yenileme belirteci belirli bir döneme ait en son Beklenti ile uygulamanızı yazılmamalıysa.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="8e8f5-222">Çeşitli nedenlerle için herhangi bir anda yenileme belirteçleri geçersiz olabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="8e8f5-223">Tek bir yenileme belirteci geçerli olup olmadığını bilmek, uygulamanız için Azure AD için bir belirteç isteğini yaparak kullanma girişiminde yoludur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="8e8f5-224">Bir yenileme belirteci için yeni bir belirteç almak zaman (ve uygulamanızı verilirse `offline_access` kapsam), belirteç yanıt olarak yeni bir yenileme belirteci alırsınız.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="8e8f5-225">Yeni verilen yenileme belirteci kaydetmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="8e8f5-226">Daha önce istekte kullanılan yenileme belirteci değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="8e8f5-227">Bu, yenileme belirteçleri mümkün olduğunca uzun bir süre geçerli kalacağını garanti yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="8e8f5-228">Belirteç doğrulama</span><span class="sxs-lookup"><span data-stu-id="8e8f5-228">Token validation</span></span>
<span data-ttu-id="8e8f5-229">Bir belirteci doğrulamak için uygulamanızı imza ve talep belirtecinin denetlemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="8e8f5-230">Birçok açık kaynak kitaplıkları Jwt'ler, tercih ettiğiniz dili bağlı olarak doğrulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="8e8f5-231">Bu seçenek keşfetmek yerine kendi doğrulama mantığını uygulamak öneririz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="8e8f5-232">Bu kılavuzda yer alan bilgiler, bu kitaplıkları düzgün bir şekilde kullanmayı öğrenmek yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="8e8f5-233">İmza doğrulama</span><span class="sxs-lookup"><span data-stu-id="8e8f5-233">Validate the signature</span></span>
<span data-ttu-id="8e8f5-234">JWT ayrılmış üç parçaları içeren `.` karakter.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="8e8f5-235">İlk kesim *üstbilgi*, ikincisi ise *gövde*, ve üçüncü *imza*.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="8e8f5-236">İmza kesimi, böylece uygulamanız tarafından güvenilen belirteç özgünlüğünü doğrulamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="8e8f5-237">Azure AD B2C belirteç RSA 256 gibi endüstri standardı asimetrik şifreleme algoritmaları kullanılarak imzalanmıştır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="8e8f5-238">Belirteç üstbilgisi belirteç imzalamak için kullanılan anahtar ve şifreleme yöntemi hakkında bilgi içerir:</span><span class="sxs-lookup"><span data-stu-id="8e8f5-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="8e8f5-239">`alg` Talep belirteç imzalamak için kullanılan algoritmayı belirtir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="8e8f5-240">`kid` Talep belirteç imzalamak için kullanılan belirli ortak anahtarı gösterir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="8e8f5-241">Belirli bir zamanda, Azure AD belirli bir genel-özel anahtar çiftleri kümesini herhangi birini kullanarak bir belirteç oturum açabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="8e8f5-242">Bu anahtar değişiklikleri otomatik olarak işlemek için uygulamanızı yazılması gereken şekilde azure AD anahtarları olası kümesini düzenli olarak döndürür.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="8e8f5-243">24 saatte bir Azure AD tarafından kullanılan ortak anahtarlar için güncelleştirmeleri denetlemek için makul bir sıklığıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="8e8f5-244">Azure AD B2C Openıd Connect meta veri son nokta vardır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="8e8f5-245">Bu, çalışma zamanında Azure AD B2C hakkında bilgi almak uygulamalarının sağlar.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="8e8f5-246">Bu bilgiler, uç noktaları, belirteç içerikleri ve belirteç imzalama anahtarları içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="8e8f5-247">Her ilke için bir JSON meta veri belgesi, B2C dizini içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="8e8f5-248">Örneğin, meta veri belgesi için `b2c_1_sign_in` ilkesinde `fabrikamb2c.onmicrosoft.com` bulunur:</span><span class="sxs-lookup"><span data-stu-id="8e8f5-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="8e8f5-249">`fabrikamb2c.onmicrosoft.com`kullanıcının kimliğini doğrulamak için kullanılan B2C dizini ve `b2c_1_sign_in` belirtecini almak için kullanılan ilkesi.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="8e8f5-250">İlkeyi bir belirteç imzalamak için kullanılan (ve meta verileri almak için nereye) belirlemek için iki seçeneğiniz vardır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="8e8f5-251">İlk olarak, ilke adını dahil `acr` belirteç talep.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="8e8f5-252">Gövde kod çözme ve sonuçları JSON dizesinde seri 64 tabanlı tarafından talep JWT gövdesi dışında ayrıştıramıyor.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="8e8f5-253">`acr` Talep belirteci vermek için kullanılan ilkenin adı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="8e8f5-254">Değerini ilkesinde kodlamak için diğer seçeneğiniz olduğunu `state` isteği gönderin ve ardından ilkeyi kullanılan belirlemek için kod çözme parametresi.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="8e8f5-255">Her iki yöntem geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-255">Either method is valid.</span></span>

<span data-ttu-id="8e8f5-256">Meta veri belgesi birkaç yararlı bilgi parçalarını içeren bir JSON nesnesidir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="8e8f5-257">Bunlar, Openıd Connect kimlik doğrulama gerçekleştirmek için gerekli uç noktaları konumunu içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="8e8f5-258">Ayrıca içerirler `jwks_uri`, hangi ortak anahtarlar konumunu gösteren Belirteçleri imzalamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="8e8f5-259">Konum burada sağlanır, ancak konum meta veri belgesi kullanarak ve çıkışı ayrıştırma dinamik olarak getirilemedi en iyisidir `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="8e8f5-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="8e8f5-260">Bu URL'de bulunan JSON belgesi tüm ortak anahtar bilgileri belirli bir anda kullanımda içerir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="8e8f5-261">Uygulamanızı kullanabilirsiniz `kid` JSON belgenin belirli bir belirteç imzalamak için kullanılan ortak anahtar seçmek için JWT üstbilgisinde talep.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="8e8f5-262">Doğru ortak anahtar ve belirtilen algoritma kullanarak bunu imza doğrulaması daha sonra gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="8e8f5-263">Bu belgenin kapsamı dışında imza doğrulaması gerçekleştirme açıklamasıdır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="8e8f5-264">Birçok açık kaynak kitaplıkları ihtiyacınız olursa, bu konuda yardımcı olmak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="8e8f5-265">Talep doğrula</span><span class="sxs-lookup"><span data-stu-id="8e8f5-265">Validate the claims</span></span>
<span data-ttu-id="8e8f5-266">Uygulamanızı veya API kimliği belirteci aldığında bunu talep karşı bazı denetimleri kimliği belirteçte gerçekleştirmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="8e8f5-267">Bunlar arasında ancak bunlarla sınırlı değildir:</span><span class="sxs-lookup"><span data-stu-id="8e8f5-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="8e8f5-268">**İzleyici** talep: Bu kimliği belirteci uygulamanıza verilecek tasarlanmıştır doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="8e8f5-269">**Önce değil** ve **süre sonu** talep: Bu kimliği belirtecin süresi geçmemiş doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="8e8f5-270">**Veren** talep: Bu belirteç, uygulamanızın Azure AD tarafından verildiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="8e8f5-271">**Nonce**: belirteç yeniden yürütme saldırı azaltma için bir strateji budur.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="8e8f5-272">Uygulamanızı gerçekleştirmesi gerektiğini doğrulamaları tam bir listesi için başvurmak [Openıd Connect belirtimi](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="8e8f5-273">Bu talep beklenen değerler ayrıntılarını yer alan önceki [belirteci bölüm](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="8e8f5-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="8e8f5-274">Belirteç yaşam süresi</span><span class="sxs-lookup"><span data-stu-id="8e8f5-274">Token lifetimes</span></span>
<span data-ttu-id="8e8f5-275">Aşağıdaki belirteci yaşam süreleri bilginiz ilerletmek için sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="8e8f5-276">Geliştirme ve hata ayıklama uygulamaları bunlar yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="8e8f5-277">Uygulamalarınızı sabit kalması için bu yaşam süreleri hiçbirini beklenir yazılmamalıysa unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="8e8f5-278">Bunlar olabilir ve değiştirir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-278">They can and will change.</span></span> <span data-ttu-id="8e8f5-279">Daha fazla bilgi edinin [belirteci yaşam süreleri özelleştirmesini](active-directory-b2c-token-session-sso.md) Azure AD B2C'de.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="8e8f5-280">Belirteç</span><span class="sxs-lookup"><span data-stu-id="8e8f5-280">Token</span></span> | <span data-ttu-id="8e8f5-281">Yaşam süresi</span><span class="sxs-lookup"><span data-stu-id="8e8f5-281">Lifetime</span></span> | <span data-ttu-id="8e8f5-282">Açıklama</span><span class="sxs-lookup"><span data-stu-id="8e8f5-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8e8f5-283">Kimliği belirteçleri</span><span class="sxs-lookup"><span data-stu-id="8e8f5-283">ID tokens</span></span> |<span data-ttu-id="8e8f5-284">Bir saat</span><span class="sxs-lookup"><span data-stu-id="8e8f5-284">One hour</span></span> |<span data-ttu-id="8e8f5-285">Kimlik belirteçlerini bir saat için genellikle geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="8e8f5-286">Web uygulamanızın bu yaşam süresi (önerilen) kullanıcılarla kendi oturumları korumak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="8e8f5-287">Ayrıca, farklı oturum yaşam süresi seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="8e8f5-288">Uygulamanızı yeni bir kimliği belirtecini almak gerekirse, yalnızca Azure AD ile yeni bir oturum açma isteği yapmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="8e8f5-289">Geçerli tarayıcı oturumu Azure AD ile bir kullanıcı varsa, bu kullanıcının kimlik bilgilerini yeniden girmek için gerekli olabilir değil.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="8e8f5-290">Yenileme belirteçlerini</span><span class="sxs-lookup"><span data-stu-id="8e8f5-290">Refresh tokens</span></span> |<span data-ttu-id="8e8f5-291">14 gün</span><span class="sxs-lookup"><span data-stu-id="8e8f5-291">Up to 14 days</span></span> |<span data-ttu-id="8e8f5-292">Bir tek yenileme belirteci 14 gün sayısı için geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="8e8f5-293">Ancak, bir yenileme belirteci pek çok zaman geçersiz hale gelebilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="8e8f5-294">Uygulamanızı bir yenileme belirteci isteği başarısız kadar veya uygulamanız ile yeni bir yenileme belirteci değiştirir kadar kullanmayı denemeye devam etmelidir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="8e8f5-295">Bir yenileme belirteci Ayrıca kullanıcı son girilen kimlik bilgileri üzerinden 90 gün geçtiğinde, geçersiz hale gelebilir.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="8e8f5-296">Yetkilendirme kodları</span><span class="sxs-lookup"><span data-stu-id="8e8f5-296">Authorization codes</span></span> |<span data-ttu-id="8e8f5-297">Beş dakika</span><span class="sxs-lookup"><span data-stu-id="8e8f5-297">Five minutes</span></span> |<span data-ttu-id="8e8f5-298">Yetkilendirme kodları bilerek ömürlüdür.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="8e8f5-299">Bunlar alındığında bunlar hemen erişim belirteçleri, kimlik belirteçlerini veya yenileme belirteçleri için kullanılan.</span><span class="sxs-lookup"><span data-stu-id="8e8f5-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

