---
title: "Azure Data Lake Store performans ayarlama yönergeleri | Microsoft Docs"
description: "Azure Data Lake Store performans ayarlama yönergeleri"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: e7ea83465328bd4c7479dec4093cd94700463854
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="f2616-103">Azure Data Lake Store için performans ayarlama</span><span class="sxs-lookup"><span data-stu-id="f2616-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="f2616-104">Data Lake Store, g/ç yoğun analizi ve veri taşıma için yüksek verimlilik destekler.</span><span class="sxs-lookup"><span data-stu-id="f2616-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="f2616-105">Azure Data Lake Store'da tüm kullanılabilir verimlilik – okunan veya saniye başına yazılan veri miktarı – kullanarak en iyi performansı elde etmek önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-105">In Azure Data Lake Store, using all available throughput – the amount of data that can be read or written per second – is important to get the best performance.</span></span>  <span data-ttu-id="f2616-106">Bu sayıda okuma gerçekleştirerek elde edilir ve mümkün olduğunca paralel yazar.</span><span class="sxs-lookup"><span data-stu-id="f2616-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Data Lake Store performans](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="f2616-108">Azure Data Lake Store tüm analytics senaryo için gerekli verimlilik sağlamak için ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f2616-108">Azure Data Lake Store can scale to provide the necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="f2616-109">Varsayılan olarak, bir Azure Data Lake Store hesabı geniş bir kullanıcı kategorisi kullanım durumlarının ihtiyaçlarını karşılamak üzere yeterli işleme otomatik olarak sağlar.</span><span class="sxs-lookup"><span data-stu-id="f2616-109">By default, an Azure Data Lake Store account provides automatically enough throughput to meet the needs of a broad category of use cases.</span></span> <span data-ttu-id="f2616-110">Müşteriler varsayılan sınır çalıştırdığı durumlarda, ADLS hesabına Microsoft Destek ile iletişim kurarak daha fazla verimlilik sağlamak üzere yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-110">For the cases where customers run into the default limit, the ADLS account can be configured to provide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="f2616-111">Veri alımı</span><span class="sxs-lookup"><span data-stu-id="f2616-111">Data ingestion</span></span>

<span data-ttu-id="f2616-112">ADLS için bir kaynak sistemden veri alma, kaynak donanım, kaynak ağ donanım ve ağ bağlantısını ADLS performans sorunu olabilir dikkate almak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-112">When ingesting data from a source system to ADLS, it is important to consider that the source hardware, source network hardware, and network connectivity to ADLS can be the bottleneck.</span></span>  

![Data Lake Store performans](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="f2616-114">Veri taşıma faktörlerin tarafından etkilenmemesini sağlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-114">It is important to ensure that the data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="f2616-115">Kaynak donanım</span><span class="sxs-lookup"><span data-stu-id="f2616-115">Source Hardware</span></span>

<span data-ttu-id="f2616-116">Şirket içi makineler veya sanal makineleri Azure'da kullanıp kullanmadığınızı uygun donanım dikkatli seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2616-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select the appropriate hardware.</span></span> <span data-ttu-id="f2616-117">Kaynak Disk donanımı için SSD HDD için tercih ettiğiniz ve daha hızlı dağılımı ile disk donanımı seçin.</span><span class="sxs-lookup"><span data-stu-id="f2616-117">For Source Disk Hardware, prefer SSDs to HDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="f2616-118">Kaynak ağ donanımı için en hızlı NIC'ler olası kullanın.</span><span class="sxs-lookup"><span data-stu-id="f2616-118">For Source Network Hardware, use the fastest NICs possible.</span></span>  <span data-ttu-id="f2616-119">Azure üzerinde uygun şekilde güçlü disk ve ağ donanımı olan Azure D14 VM'ler öneririz.</span><span class="sxs-lookup"><span data-stu-id="f2616-119">On Azure, we recommend Azure D14 VMs which have the appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-to-azure-data-lake-store"></a><span data-ttu-id="f2616-120">Azure Data Lake Store ağ bağlantısı</span><span class="sxs-lookup"><span data-stu-id="f2616-120">Network Connectivity to Azure Data Lake Store</span></span>

<span data-ttu-id="f2616-121">Veri kaynağı ile Azure Data Lake store arasında ağ bağlantısı bazen performans sorunu olabilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-121">The network connectivity between your source data and Azure Data Lake store can sometimes be the bottleneck.</span></span> <span data-ttu-id="f2616-122">Veri kaynağınızı şirket içi olduğunda, ile ayrılmış bir bağlantı kullanmayı [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="f2616-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="f2616-123">Veri kaynağınızı Azure içinde ise, performans verileri Data Lake Store ile aynı Azure bölgesinde olduğunda en iyi olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f2616-123">If your source data is in Azure, the performance will be best when the data is in the same Azure region as the Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="f2616-124">Veri alımı araçları maksimum paralelleştirme için yapılandırma</span><span class="sxs-lookup"><span data-stu-id="f2616-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="f2616-125">Kaynak donanım ele ve ağ bağlantısı sorunlarını yukarıdaki sonra alım araçlarınızı yapılandırmaya hazırsınız demektir.</span><span class="sxs-lookup"><span data-stu-id="f2616-125">Once you have addressed the source hardware and network connectivity bottlenecks above, you are ready to configure your ingestion tools.</span></span> <span data-ttu-id="f2616-126">Aşağıdaki tabloda çeşitli popüler alım Araçlar anahtar ayarlarını özetler ve ayrıntılı performans makaleler için ayarlama sağlar.</span><span class="sxs-lookup"><span data-stu-id="f2616-126">The following table summarizes the key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="f2616-127">Senaryonuz için kullanmak üzere hangi aracı hakkında daha fazla bilgi edinmek için bu ziyaret [makale](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="f2616-127">To learn more about which tool to use for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="f2616-128">Aracı</span><span class="sxs-lookup"><span data-stu-id="f2616-128">Tool</span></span>               | <span data-ttu-id="f2616-129">Ayarlar</span><span class="sxs-lookup"><span data-stu-id="f2616-129">Settings</span></span>     | <span data-ttu-id="f2616-130">Daha fazla ayrıntı</span><span class="sxs-lookup"><span data-stu-id="f2616-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="f2616-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f2616-131">Powershell</span></span>       | <span data-ttu-id="f2616-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="f2616-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="f2616-133">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="f2616-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="f2616-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="f2616-134">AdlCopy</span></span>    | <span data-ttu-id="f2616-135">Azure Data Lake Analytics birimleri</span><span class="sxs-lookup"><span data-stu-id="f2616-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="f2616-136">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="f2616-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="f2616-137">Distcp'yi</span><span class="sxs-lookup"><span data-stu-id="f2616-137">DistCp</span></span>            | <span data-ttu-id="f2616-138">-m (Eşleyici)</span><span class="sxs-lookup"><span data-stu-id="f2616-138">-m (mapper)</span></span>   | [<span data-ttu-id="f2616-139">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="f2616-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="f2616-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="f2616-140">Azure Data Factory</span></span>| <span data-ttu-id="f2616-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="f2616-141">parallelCopies</span></span>    | [<span data-ttu-id="f2616-142">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="f2616-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="f2616-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="f2616-143">Sqoop</span></span>           | <span data-ttu-id="f2616-144">FS.Azure.Block.size, -m (Eşleyici)</span><span class="sxs-lookup"><span data-stu-id="f2616-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="f2616-145">Bağlantı</span><span class="sxs-lookup"><span data-stu-id="f2616-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="f2616-146">Veri kümenizi yapısı</span><span class="sxs-lookup"><span data-stu-id="f2616-146">Structure your data set</span></span>

<span data-ttu-id="f2616-147">Data Lake Store, dosya boyutu, veriler, dosya ve klasör yapısı sayısı bir performansı etkiler.</span><span class="sxs-lookup"><span data-stu-id="f2616-147">When data is stored in Data Lake Store, the file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="f2616-148">Aşağıdaki bölümde bu alanlarda en iyi uygulamaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="f2616-148">The following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="f2616-149">Dosya boyutu</span><span class="sxs-lookup"><span data-stu-id="f2616-149">File size</span></span>

<span data-ttu-id="f2616-150">Genellikle, analiz altyapıları Hdınsight ve Azure Data Lake Analytics gibi dosya başına ek yükleri vardır.</span><span class="sxs-lookup"><span data-stu-id="f2616-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="f2616-151">Verilerinizi kadar küçük dosyalarını depoluyorsa, bu performans olumsuz yönde etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="f2616-152">Genel olarak, verilerinizin daha iyi performans için daha büyük boyutlu dosyalar halinde düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="f2616-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="f2616-153">Altın kural, dosyalar 256 MB veya daha büyük veri kümelerinde düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="f2616-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="f2616-154">Görüntüleri ve ikili veriler gibi bazı durumlarda, paralel olarak işlemek olası değil.</span><span class="sxs-lookup"><span data-stu-id="f2616-154">In some cases such as images and binary data, it is not possible to process them in parallel.</span></span>  <span data-ttu-id="f2616-155">Bu durumda, tek tek dosyaların 2 GB'den tutmanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-155">In these cases, it is recommended to keep individual files under 2GB.</span></span>

<span data-ttu-id="f2616-156">Bazı durumlarda, veri ardışık çok sayıda küçük dosya olan ham veriler üzerinde denetim sınırlı.</span><span class="sxs-lookup"><span data-stu-id="f2616-156">Sometimes, data pipelines have limited control over the raw data which has lots of small files.</span></span>  <span data-ttu-id="f2616-157">Aşağı akış uygulamaları için kullanmak üzere büyük dosyaları oluşturur "pişirme" bir işlem olması önerilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-157">It is recommended to have a “cooking” process that generates larger files to use for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="f2616-158">Zaman serisi veri klasörlerde düzenleme</span><span class="sxs-lookup"><span data-stu-id="f2616-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="f2616-159">Hive ve ADLA iş yükleri için yalnızca bir veri alt kümesini performansını artıran okuma bazı sorgular zaman serisi veri bölümü ayıklanmasına yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of the data which improves performance.</span></span>    

<span data-ttu-id="f2616-160">Zaman serisi veri alma bu ardışık düzen genellikle dosya ve klasörler için çok yapılandırılmış adlandırma ile dosyalarına yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="f2616-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="f2616-161">Biz tarihe göre yapılandırılmış veriler için bkz: çok yaygın bir örneği aşağıdadır:</span><span class="sxs-lookup"><span data-stu-id="f2616-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="f2616-162">Datetime bilgi klasörleri hem dosya görüntülendiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="f2616-162">Notice that the datetime information appears both as folders and in the filename.</span></span>

<span data-ttu-id="f2616-163">Tarih ve saat için genel bir desen verilmiştir</span><span class="sxs-lookup"><span data-stu-id="f2616-163">For date and time, the following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="f2616-164">Yeniden klasörüyle yaptığınız seçim ve dosya organizasyonu daha büyük dosya boyutlarına ve her klasördeki dosyaları makul bir dizi iyileştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2616-164">Again, the choice you make with the folder and file organization should optimize for the larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="f2616-165">Hdınsight'ta Hadoop ve Spark iş yükleri üzerindeki g/ç yoğun işleri en iyi duruma getirme</span><span class="sxs-lookup"><span data-stu-id="f2616-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="f2616-166">İşlerini aşağıdaki üç kategoriden ayrılır:</span><span class="sxs-lookup"><span data-stu-id="f2616-166">Jobs fall into one of the following three categories:</span></span>

* <span data-ttu-id="f2616-167">**CPU yoğun.**</span><span class="sxs-lookup"><span data-stu-id="f2616-167">**CPU intensive.**</span></span>  <span data-ttu-id="f2616-168">Bu işleri en az g/ç sürelerinin uzun hesaplama zamanlarında vardır.</span><span class="sxs-lookup"><span data-stu-id="f2616-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="f2616-169">Örnek makine öğrenme ve doğal dil işleri işleme verilebilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="f2616-170">**Yoğun bellek.**</span><span class="sxs-lookup"><span data-stu-id="f2616-170">**Memory intensive.**</span></span>  <span data-ttu-id="f2616-171">Bu işlemler büyük miktarda bellek kullanır.</span><span class="sxs-lookup"><span data-stu-id="f2616-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="f2616-172">Örnek PageRank ve gerçek zamanlı analytics işleri verilebilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="f2616-173">**G/ç yoğun.**</span><span class="sxs-lookup"><span data-stu-id="f2616-173">**I/O intensive.**</span></span>  <span data-ttu-id="f2616-174">Bu işleri çoğu g/ç yapılması kendi zaman ayırın.</span><span class="sxs-lookup"><span data-stu-id="f2616-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="f2616-175">Yalnızca okuma ve yazma işlemlerinin bir kopya iş buna ortak bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="f2616-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="f2616-176">Diğer örnekler çok miktarda veri okuma, bazı veri dönüştürme gerçekleştirir ve ardından veri deposuna Yazar veri hazırlık işlerini içerir.</span><span class="sxs-lookup"><span data-stu-id="f2616-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes the data back to the store.</span></span>  

<span data-ttu-id="f2616-177">Aşağıdaki kılavuz yalnızca g/ç yoğun işleri için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-177">The following guidance is only applicable to I/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="f2616-178">Hdınsight kümesi için genel konular</span><span class="sxs-lookup"><span data-stu-id="f2616-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="f2616-179">**Hdınsight sürümleri.**</span><span class="sxs-lookup"><span data-stu-id="f2616-179">**HDInsight versions.**</span></span> <span data-ttu-id="f2616-180">En iyi performans için Hdınsight en son sürümünü kullanın.</span><span class="sxs-lookup"><span data-stu-id="f2616-180">For best performance, use the latest release of HDInsight.</span></span>
* <span data-ttu-id="f2616-181">**Bölgeleri.**</span><span class="sxs-lookup"><span data-stu-id="f2616-181">**Regions.**</span></span> <span data-ttu-id="f2616-182">Hdınsight kümesi ile aynı bölgede Data Lake Store yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="f2616-182">Place the Data Lake Store in the same region as the HDInsight cluster.</span></span>  

<span data-ttu-id="f2616-183">Hdınsight kümesi iki baş düğümler ve bazı çalışan düğümleri oluşur.</span><span class="sxs-lookup"><span data-stu-id="f2616-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="f2616-184">Her bir çalışan düğümünün belirli sayıda çekirdeğe ve VM türüne göre belirlenir bellek sağlar.</span><span class="sxs-lookup"><span data-stu-id="f2616-184">Each worker node provides a specific number of cores and memory, which is determined by the VM-type.</span></span>  <span data-ttu-id="f2616-185">Bir iş çalışırken YARN kullanılabilir bellek ve kapsayıcılar oluşturmak için çekirdek ayırır kaynak uzlaştırıcı ' dir.</span><span class="sxs-lookup"><span data-stu-id="f2616-185">When running a job, YARN is the resource negotiator that allocates the available memory and cores to create containers.</span></span>  <span data-ttu-id="f2616-186">Her kapsayıcı işi tamamlamak için gereken görevleri çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="f2616-186">Each container runs the tasks needed to complete the job.</span></span>  <span data-ttu-id="f2616-187">Kapsayıcıları görevleri hızlı bir şekilde işlemek için paralel olarak çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f2616-187">Containers run in parallel to process tasks quickly.</span></span> <span data-ttu-id="f2616-188">Bu nedenle, performans mümkün olduğu kadar paralel kapsayıcılar çalıştırarak geliştirildi.</span><span class="sxs-lookup"><span data-stu-id="f2616-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="f2616-189">Kapsayıcıları sayısını artırmak ve tüm kullanılabilir işleme kullanmak için ayarlanmış bir Hdınsight kümesi içinde üç katmanı vardır.</span><span class="sxs-lookup"><span data-stu-id="f2616-189">There are three layers within an HDInsight cluster that can be tuned to increase the number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="f2616-190">**Fiziksel katman**</span><span class="sxs-lookup"><span data-stu-id="f2616-190">**Physical layer**</span></span>
* <span data-ttu-id="f2616-191">**YARN katmanı**</span><span class="sxs-lookup"><span data-stu-id="f2616-191">**YARN layer**</span></span>
* <span data-ttu-id="f2616-192">**İş yükü katmanı**</span><span class="sxs-lookup"><span data-stu-id="f2616-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="f2616-193">Fiziksel katman</span><span class="sxs-lookup"><span data-stu-id="f2616-193">Physical Layer</span></span>

<span data-ttu-id="f2616-194">**Küme, daha fazla düğüm ve/veya daha büyük boyutlu VM'ler ile çalıştırın.**</span><span class="sxs-lookup"><span data-stu-id="f2616-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="f2616-195">Daha büyük bir küme, aşağıdaki resimde gösterildiği gibi daha fazla YARN kapsayıcıları çalışmasına olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="f2616-195">A larger cluster will enable you to run more YARN containers as shown in the picture below.</span></span>

![Data Lake Store performans](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="f2616-197">**VM'ler daha fazla ağ bant genişliği ile kullanın.**</span><span class="sxs-lookup"><span data-stu-id="f2616-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="f2616-198">Data Lake Store verimlilik daha az ağ bant genişliği ise ağ bant genişliği miktarını bir performans sorunu olabilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-198">The amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="f2616-199">Farklı sanal makineleri, ağ bant genişliği boyutları değişen sahip olur.</span><span class="sxs-lookup"><span data-stu-id="f2616-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="f2616-200">En büyük olası ağ bant genişliği olan bir VM-türü seçin.</span><span class="sxs-lookup"><span data-stu-id="f2616-200">Choose a VM-type that has the largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="f2616-201">YARN katmanı</span><span class="sxs-lookup"><span data-stu-id="f2616-201">YARN Layer</span></span>

<span data-ttu-id="f2616-202">**Daha küçük YARN kapsayıcıları kullanın.**</span><span class="sxs-lookup"><span data-stu-id="f2616-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="f2616-203">Daha fazla kapsayıcı kaynaklar ile aynı miktarda ile oluşturmak için her YARN kapsayıcı boyutunu azaltın.</span><span class="sxs-lookup"><span data-stu-id="f2616-203">Reduce the size of each YARN container to create more containers with the same amount of resources.</span></span>

![Data Lake Store performans](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="f2616-205">İş yükünüz bağlı olarak, her zaman olacaktır gereken en az bir YARN kapsayıcı boyutu.</span><span class="sxs-lookup"><span data-stu-id="f2616-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="f2616-206">Çok küçük bir kapsayıcı seçerseniz, işlerinizi bellek yetersiz sorunla çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f2616-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="f2616-207">Genellikle YARN kapsayıcıları Hayır 1 GB'den daha küçük olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2616-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="f2616-208">3 GB YARN kapsayıcıları görmek için yaygın bir durumdur.</span><span class="sxs-lookup"><span data-stu-id="f2616-208">It’s common to see 3GB YARN containers.</span></span> <span data-ttu-id="f2616-209">Bazı iş yükleri için daha büyük YARN kapsayıcıları gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="f2616-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="f2616-210">**YARN kapsayıcı başına çekirdek artırın.**</span><span class="sxs-lookup"><span data-stu-id="f2616-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="f2616-211">Her kapsayıcıya, her kapsayıcı içinde çalışan Paralel Görevler sayısını artırmak için ayrılan çekirdek sayısını artırın.</span><span class="sxs-lookup"><span data-stu-id="f2616-211">Increase the number of cores allocated to each container to increase the number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="f2616-212">Bu, kapsayıcı başına birden çok görevi çalıştır Spark gibi uygulamalar için çalışır.</span><span class="sxs-lookup"><span data-stu-id="f2616-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="f2616-213">Tek bir iş parçacığı her kapsayıcı içinde çalışan uygulamalar için Hive gibi kapsayıcı başına daha fazla çekirdek yerine daha fazla kapsayıcıları iyidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-213">For applications like Hive which run a single thread in each container, it is better to have more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="f2616-214">İş yükü katmanı</span><span class="sxs-lookup"><span data-stu-id="f2616-214">Workload Layer</span></span>

<span data-ttu-id="f2616-215">**Tüm kullanılabilir kapsayıcıları kullanın.**</span><span class="sxs-lookup"><span data-stu-id="f2616-215">**Use all available containers.**</span></span>  <span data-ttu-id="f2616-216">Böylece tüm kaynakları yararlanılmıştır eşit veya kullanılabilir kapsayıcıları sayısından büyük görevler sayısını ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="f2616-216">Set the number of tasks to be equal or larger than the number of available containers so that all resources are utilized.</span></span>

![Data Lake Store performans](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="f2616-218">**Başarısız görevlerin maliyetlidir.**</span><span class="sxs-lookup"><span data-stu-id="f2616-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="f2616-219">Her görev büyük miktarda veri işlemeye varsa, bir görev hatasını içinde pahalı bir yeniden deneme sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="f2616-219">If each task has a large amount of data to process, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="f2616-220">Bu nedenle, her biri çok küçük miktarda veri işleyen daha fazla görev oluşturmak iyidir.</span><span class="sxs-lookup"><span data-stu-id="f2616-220">Therefore, it is better to create more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="f2616-221">Yukarıdaki genel yönergeleri yanı sıra, her uygulamanın bu belirli bir uygulama için ayarlamak kullanılabilen farklı parametreleri vardır.</span><span class="sxs-lookup"><span data-stu-id="f2616-221">In addition to the general guidelines above, each application has different parameters available to tune for that specific application.</span></span> <span data-ttu-id="f2616-222">Aşağıdaki tablo bazı performans her uygulama için ayarlama ile çalışmaya başlamak için bağlantıları ve parametreleri listeler.</span><span class="sxs-lookup"><span data-stu-id="f2616-222">The table below lists some of the parameters and links to get started with performance tuning for each application.</span></span>

| <span data-ttu-id="f2616-223">İş yükü</span><span class="sxs-lookup"><span data-stu-id="f2616-223">Workload</span></span>               | <span data-ttu-id="f2616-224">Parametre görevleri ayarlamak için</span><span class="sxs-lookup"><span data-stu-id="f2616-224">Parameter to set tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="f2616-225">HDInisight Spark</span><span class="sxs-lookup"><span data-stu-id="f2616-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="f2616-226">NUM yürütücüler</span><span class="sxs-lookup"><span data-stu-id="f2616-226">Num-executors</span></span></li><li><span data-ttu-id="f2616-227">Bellek içi Yürütücü</span><span class="sxs-lookup"><span data-stu-id="f2616-227">Executor-memory</span></span></li><li><span data-ttu-id="f2616-228">Yürütücü çekirdek</span><span class="sxs-lookup"><span data-stu-id="f2616-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="f2616-229">Hdınsight'ta hive</span><span class="sxs-lookup"><span data-stu-id="f2616-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="f2616-230">Hive.tez.Container.size</span><span class="sxs-lookup"><span data-stu-id="f2616-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="f2616-231">Hdınsight üzerinde MapReduce</span><span class="sxs-lookup"><span data-stu-id="f2616-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="f2616-232">Mapreduce.Map.Memory</span><span class="sxs-lookup"><span data-stu-id="f2616-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="f2616-233">Mapreduce.job.Maps</span><span class="sxs-lookup"><span data-stu-id="f2616-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="f2616-234">Mapreduce.reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="f2616-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="f2616-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="f2616-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="f2616-236">Hdınsight üzerinde Storm</span><span class="sxs-lookup"><span data-stu-id="f2616-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="f2616-237">Çalışan işlem sayısı</span><span class="sxs-lookup"><span data-stu-id="f2616-237">Number of worker processes</span></span></li><li><span data-ttu-id="f2616-238">Spout Yürütücü örneği sayısı</span><span class="sxs-lookup"><span data-stu-id="f2616-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="f2616-239">Cıvata Yürütücü örneği sayısı</span><span class="sxs-lookup"><span data-stu-id="f2616-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="f2616-240">Spout görev sayısı</span><span class="sxs-lookup"><span data-stu-id="f2616-240">Number of spout tasks</span></span></li><li><span data-ttu-id="f2616-241">Cıvata görev sayısı</span><span class="sxs-lookup"><span data-stu-id="f2616-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="f2616-242">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="f2616-242">See also</span></span>
* [<span data-ttu-id="f2616-243">Azure Data Lake Store'a Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="f2616-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="f2616-244">Azure Data Lake Analytics ile Çalışmaya Başlama</span><span class="sxs-lookup"><span data-stu-id="f2616-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
