---
title: "Data Lake Store Spark performans ayarlama yönergeleri aaaAzure | Microsoft Docs"
description: "Azure Data Lake Store Spark performans kuralları ayarlama"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: da1d172e9cb1199ad95605ea1718e78559f79650
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="506df-103">Performans yönergeler Spark Hdınsight ve Azure Data Lake Store için ayarlama</span><span class="sxs-lookup"><span data-stu-id="506df-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="506df-104">Spark üzerinde performans ayarlaması için küme üzerinde çalışan uygulama tooconsider hello sayısı gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-104">When tuning performance on Spark, you need tooconsider hello number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="506df-105">Varsayılan olarak 4 çalıştırabilirsiniz, HDI kümesi üzerinde aynı anda uygulamaları (Not: hello varsayılan ayardır konu toochange).</span><span class="sxs-lookup"><span data-stu-id="506df-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: hello default setting is subject toochange).</span></span>  <span data-ttu-id="506df-106">Merhaba varsayılan ayarları geçersiz kılar ve hello kümesinin daha fazla bilgi için bu uygulamaları kullanmak için daha az uygulamaları toouse karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="506df-106">You may decide toouse fewer apps so you can override hello default settings and use more of hello cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="506df-107">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="506df-107">Prerequisites</span></span>

* <span data-ttu-id="506df-108">**Bir Azure aboneliği**.</span><span class="sxs-lookup"><span data-stu-id="506df-108">**An Azure subscription**.</span></span> <span data-ttu-id="506df-109">Bkz. [Azure ücretsiz deneme sürümü alma](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="506df-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="506df-110">**Bir Azure Data Lake Store hesabı**.</span><span class="sxs-lookup"><span data-stu-id="506df-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="506df-111">Yönergeler için toocreate bir, bkz: [Azure Data Lake Store ile çalışmaya başlama](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="506df-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="506df-112">**Azure Hdınsight kümesi** erişim tooa Data Lake Store hesabı ile.</span><span class="sxs-lookup"><span data-stu-id="506df-112">**Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="506df-113">Bkz: [Data Lake Store ile bir Hdınsight kümesi oluşturmayı](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="506df-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="506df-114">Merhaba küme için Uzak Masaüstü etkinleştirdiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="506df-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="506df-115">**Azure Data Lake Store üzerinde Spark kümesinde çalışan**.</span><span class="sxs-lookup"><span data-stu-id="506df-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="506df-116">Daha fazla bilgi için bkz: [kullanım Hdınsight Spark küme tooanalyze verileri Data Lake Store'da](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="506df-116">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="506df-117">**Performans ayarlama yönergeleri ADLS**.</span><span class="sxs-lookup"><span data-stu-id="506df-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="506df-118">Genel performans için bkz [Data Lake deposu performans rehberi ayarlama](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="506df-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="506df-119">Parametreler</span><span class="sxs-lookup"><span data-stu-id="506df-119">Parameters</span></span>

<span data-ttu-id="506df-120">Spark işlerinin çalıştırırken, ADLS bizi tooincrease performansına olabilir hello en önemli ayarları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="506df-120">When running Spark jobs, here are hello most important settings that can be tuned tooincrease performance on ADLS:</span></span>

* <span data-ttu-id="506df-121">**NUM yürütücüler** -hello yürütülebilir eşzamanlı görev sayısı.</span><span class="sxs-lookup"><span data-stu-id="506df-121">**Num-executors** - hello number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="506df-122">**Bellek içi Yürütücü** -hello tooeach Yürütücü ayrılmış bellek miktarı.</span><span class="sxs-lookup"><span data-stu-id="506df-122">**Executor-memory** - hello amount of memory allocated tooeach executor.</span></span>

* <span data-ttu-id="506df-123">**Yürütücü çekirdek** -çekirdek hello sayısı tooeach Yürütücü ayrılmış.</span><span class="sxs-lookup"><span data-stu-id="506df-123">**Executor-cores** - hello number of cores allocated tooeach executor.</span></span>                     

<span data-ttu-id="506df-124">**NUM yürütücüler** Num yürütücüler hello Maksimum sayıda paralel olarak çalıştırılabilir görev ayarlayacak.</span><span class="sxs-lookup"><span data-stu-id="506df-124">**Num-executors** Num-executors will set hello maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="506df-125">paralel olarak çalıştırılabilir görevleri gerçek sayısını Hello hello bellek ve CPU kaynaklarını kümenizdeki kullanılabilir sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="506df-125">hello actual number of tasks that can run in parallel is bounded by hello memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="506df-126">**Bellek içi Yürütücü** bu hello tooeach Yürütücü ayrılan bellek miktarıdır.</span><span class="sxs-lookup"><span data-stu-id="506df-126">**Executor-memory** This is hello amount of memory that is being allocated tooeach executor.</span></span>  <span data-ttu-id="506df-127">Her Yürütücü için ihtiyaç duyulan hello bellek hello işinde bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="506df-127">hello memory needed for each executor is dependent on hello job.</span></span>  <span data-ttu-id="506df-128">Karmaşık işlemleri için daha yüksek toobe hello bellek gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-128">For complex operations, hello memory needs toobe higher.</span></span>  <span data-ttu-id="506df-129">Okuma ve yazma gibi basit işlemleri için bellek gereksinimlerini daha düşük olacaktır.</span><span class="sxs-lookup"><span data-stu-id="506df-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="506df-130">Hello için bellek miktarı her Yürütücü Ambari içinde görüntülenebilir.</span><span class="sxs-lookup"><span data-stu-id="506df-130">hello amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="506df-131">Ambari, tooSpark gidin ve hello yapılandırmalar sekmesini görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="506df-131">In Ambari, navigate tooSpark and view hello Configs tab.</span></span>  

<span data-ttu-id="506df-132">**Yürütücü çekirdek** bu hello Yürütücü çalıştırılabilir paralel iş parçacıklarının sayısını belirler Yürütücü başına kullanılan çekirdek hello miktarını belirler.</span><span class="sxs-lookup"><span data-stu-id="506df-132">**Executor-cores** This sets hello amount of cores used per executor, which determines hello number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="506df-133">Örneğin, varsa Yürütücü çekirdek = 2, her Yürütücü hello Yürütücü 2 Paralel Görevler çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="506df-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in hello executor.</span></span>  <span data-ttu-id="506df-134">Merhaba Yürütücü-çekirdek hello işinde bağımlı olur.</span><span class="sxs-lookup"><span data-stu-id="506df-134">hello executor-cores needed will be dependent on hello job.</span></span>  <span data-ttu-id="506df-135">Daha fazla Paralel Görevler her Yürütücü işleyebilmesi için g/ç yoğun iş büyük miktarda bellek görev başına gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="506df-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="506df-136">Varsayılan olarak, Hdınsight'ta Spark çalıştırıldığında, her fiziksel çekirdek için iki sanal YARN çekirdek tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="506df-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="506df-137">Bu bağlam birden çok iş parçacığından değiştirme miktarına ve concurrecy iyi bir denge sağlar.</span><span class="sxs-lookup"><span data-stu-id="506df-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="506df-138">Rehber</span><span class="sxs-lookup"><span data-stu-id="506df-138">Guidance</span></span>

<span data-ttu-id="506df-139">Spark analitik iş yükleri toowork Data Lake Store'da verilerin ile çalışırken, Data Lake Store ile Merhaba en son Hdınsight sürüm tooget hello en iyi performansı kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="506df-139">While running Spark analytic workloads toowork with data in Data Lake Store, we recommend that you use hello most recent HDInsight version tooget hello best performance with Data Lake Store.</span></span> <span data-ttu-id="506df-140">İşinizi daha fazla g/ç yoğun olduğunda, belirli parametreleri yapılandırılmış tooimprove performans olabilir.</span><span class="sxs-lookup"><span data-stu-id="506df-140">When your job is more I/O intensive, then certain parameters can be configured tooimprove performance.</span></span>  <span data-ttu-id="506df-141">Azure Data Lake Store yüksek verimlilik işleyebilecek bir yüksek oranda ölçeklenebilir depolama platformudur.</span><span class="sxs-lookup"><span data-stu-id="506df-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="506df-142">Merhaba işi okuma veya yazma çoğunlukla oluşuyorsa, Azure Data Lake Store gelen g/ç tooand eşzamanlılık artırma performansı arttırabilir.</span><span class="sxs-lookup"><span data-stu-id="506df-142">If hello job mainly consists of read or writes, then increasing concurrency for I/O tooand from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="506df-143">G/ç yoğun işleri için birkaç genel yolları tooincrease eşzamanlılık vardır.</span><span class="sxs-lookup"><span data-stu-id="506df-143">There are a few general ways tooincrease concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="506df-144">**1. adım: kümenizde çalışan kaç uygulamalar belirlemek** – hello geçerli dahil olmak üzere hello kümede çalışan kaç uygulamalar bilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on hello cluster including hello current one.</span></span>  <span data-ttu-id="506df-145">4 olduğunu hello için varsayılan değerleri ayarı varsayar her Spark eş zamanlı olarak çalıştırılan uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="506df-145">hello default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="506df-146">Bu nedenle, yalnızca % 25'hello kümenin her uygulama için kullanılabilir olacaktır.</span><span class="sxs-lookup"><span data-stu-id="506df-146">Therefore, you will only have 25% of hello cluster available for each app.</span></span>  <span data-ttu-id="506df-147">tooget daha iyi performans, yürütücüler hello sayısını değiştirerek hello varsayılanlarını geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="506df-147">tooget better performance, you can override hello defaults by changing hello number of executors.</span></span>  

<span data-ttu-id="506df-148">**2. adım: Bellek içi Yürütücü ayarlama** – hello ilk şey tooset hello Yürütücü-bellektir.</span><span class="sxs-lookup"><span data-stu-id="506df-148">**Step 2: Set executor-memory** – hello first thing tooset is hello executor-memory.</span></span>  <span data-ttu-id="506df-149">Merhaba bellek hello işi devam eden toorun olduğunuz bağımlı olur.</span><span class="sxs-lookup"><span data-stu-id="506df-149">hello memory will be dependent on hello job that you are going toorun.</span></span>  <span data-ttu-id="506df-150">Yürütücü başına daha az bellek ayırarak eşzamanlılık artırabilir.</span><span class="sxs-lookup"><span data-stu-id="506df-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="506df-151">İşinizi çalıştırdığınızda yetersiz bellek özel durumları görürseniz, bu parametrenin hello değerini artırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-151">If you see out of memory exceptions when you run your job, then you should increase hello value for this parameter.</span></span>  <span data-ttu-id="506df-152">Bir tooget daha fazla bellek daha yüksek miktarlarda bellek sahip bir küme kullanarak veya kümenizin hello boyutunu artırmayı alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="506df-152">One alternative is tooget more memory by using a cluster that has higher amounts of memory or increasing hello size of your cluster.</span></span>  <span data-ttu-id="506df-153">Daha fazla bellek daha fazla eşzamanlılık anlamı kullanıldığında, daha fazla yürütücüler toobe olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="506df-153">More memory will enable more executors toobe used, which means more concurrency.</span></span>

<span data-ttu-id="506df-154">**3. adım: Ayarlama Yürütücü çekirdek** – isteğe bağlı olarak karmaşık işlemleri olmayan g/ç yoğun iş yükleri için çok sayıda Yürütücü çekirdek tooincrease hello Yürütücü başına Paralel Görevler sayısı ile iyi toostart değil.</span><span class="sxs-lookup"><span data-stu-id="506df-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good toostart with a high number of executor-cores tooincrease hello number of parallel tasks per executor.</span></span>  <span data-ttu-id="506df-155">Yürütücü çekirdek too4 ayarı iyi bir başlangıç noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="506df-155">Setting executor-cores too4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="506df-156">Yürütücü çekirdek hello sayısını artırmayı farklı Yürütücü çekirdeğiyle deneyebilirsiniz şekilde daha fazla paralellik verecektir.</span><span class="sxs-lookup"><span data-stu-id="506df-156">Increasing hello number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="506df-157">Daha karmaşık işlemleri sahip işleri hello Yürütücü başına çekirdek sayısı azaltmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-157">For jobs that have more complex operations, you should reduce hello number of cores per executor.</span></span>  <span data-ttu-id="506df-158">Yürütücü çekirdek ise 4'ten yüksek ayarlanmış sonra atık toplama verimsiz hale ve performansı düşebilir.</span><span class="sxs-lookup"><span data-stu-id="506df-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="506df-159">**Adım 4: küme YARN bellek miktarını belirlemek** – bu bilgiler Ambari içinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="506df-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="506df-160">TooYARN gidin ve hello yapılandırmalar sekmesini görüntüleyin.  Merhaba YARN bellek Bu pencerede görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="506df-160">Navigate tooYARN and view hello Configs tab.  hello YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="506df-161">Not: hello penceresinde olmakla birlikte, aynı zamanda hello varsayılan YARN kapsayıcı boyutu görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="506df-161">Note: while you are in hello window, you can also see hello default YARN container size.</span></span>  <span data-ttu-id="506df-162">Merhaba YARN kapsayıcı boyutu olan hello Yürütücü parametresi başına bellek ile aynı.</span><span class="sxs-lookup"><span data-stu-id="506df-162">hello YARN container size is hello same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="506df-163">**5. adım: num yürütücüler Hesapla**</span><span class="sxs-lookup"><span data-stu-id="506df-163">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="506df-164">**Bellek kısıtlama hesaplamak** -hello num yürütücüler parametre bellek veya CPU göre kısıtlı.</span><span class="sxs-lookup"><span data-stu-id="506df-164">**Calculate memory constraint** - hello num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="506df-165">Merhaba bellek kısıtlama hello uygulamanız için kullanılabilir YARN bellek miktarı tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="506df-165">hello memory constraint is determined by hello amount of available YARN memory for your application.</span></span>  <span data-ttu-id="506df-166">Toplam YARN bellek alın ve yürütücü bellekle bölün.</span><span class="sxs-lookup"><span data-stu-id="506df-166">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="506df-167">Merhaba kısıtlaması biz uygulamaları hello sayısına göre Böl şekilde uygulamaları hello sayısı için XML'deki ölçeklendirilmiş toobe gerekir.</span><span class="sxs-lookup"><span data-stu-id="506df-167">hello constraint needs toobe de-scaled for hello number of apps so we divide by hello number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="506df-168">**CPU kısıtlaması hesaplamak** -hello CPU kısıtlaması bölü hello Yürütücü başına çekirdek sayısı toplam sanal çekirdek hello olarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="506df-168">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total virtual cores divided by hello number of cores per executor.</span></span>  <span data-ttu-id="506df-169">Her fiziksel çekirdek için 2 sanal çekirdek vardır.</span><span class="sxs-lookup"><span data-stu-id="506df-169">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="506df-170">Benzer toohello bellek kısıtlama, uygulamaları hello sayısına göre Böl sahibiz.</span><span class="sxs-lookup"><span data-stu-id="506df-170">Similar toohello memory constraint, we have divide by hello number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="506df-171">**Ayarlama num yürütücüler** – hello num yürütücüler parametre belirlenir gerçekleştirerek hello hello bellek kısıtlaması ile Merhaba CPU en düşük.</span><span class="sxs-lookup"><span data-stu-id="506df-171">**Set num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="506df-172">Daha yüksek bir sayı yürütücüler sayısı ayarlanması, performans mutlaka artırmaz.</span><span class="sxs-lookup"><span data-stu-id="506df-172">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="506df-173">Daha fazla yürütücüler ekleme ekleyeceksiniz dikkate almanız gereken potansiyel olarak performansı düşürebilir her ek Yürütücü için fazladan genel gider.</span><span class="sxs-lookup"><span data-stu-id="506df-173">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="506df-174">NUM yürütücüler tarafından hello küme kaynağı ilişkisindeki.</span><span class="sxs-lookup"><span data-stu-id="506df-174">Num-executors is bounded by hello cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="506df-175">Örnek hesaplama</span><span class="sxs-lookup"><span data-stu-id="506df-175">Example Calculation</span></span>

<span data-ttu-id="506df-176">Şu anda çalışan 2 uygulamaları hello dahil olmak üzere bir bulacağınızı toorun 8 D4v2 düğümden oluşan bir küme sahip varsayalım.</span><span class="sxs-lookup"><span data-stu-id="506df-176">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including hello one you are going toorun.</span></span>  

<span data-ttu-id="506df-177">**1. adım: kümenizde çalışan kaç uygulamalar belirlemek** – 2 olduğunu bildiğiniz bir toorun bulacağınızı hello dahil olmak üzere kümenizde uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="506df-177">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including hello one you are going toorun.</span></span>  

<span data-ttu-id="506df-178">**2. adım: Bellek içi Yürütücü ayarlama** – Bu örnekte, 6 GB bellek Yürütücü g/ç yoğun iş için yeterli olacaktır olan belirleriz.</span><span class="sxs-lookup"><span data-stu-id="506df-178">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="506df-179">**3. adım: Ayarlama Yürütücü çekirdek** – bir g/ç yoğun iş olacağından, biz her Yürütücü too4 çekirdeği hello sayısını ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="506df-179">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set hello number of cores for each executor too4.</span></span>  <span data-ttu-id="506df-180">4 çöp toplama sorunlara neden olabilirsiniz daha Yürütücü toolarger başına çekirdek ayarlama.</span><span class="sxs-lookup"><span data-stu-id="506df-180">Setting cores per executor toolarger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="506df-181">**Adım 4: küme YARN bellek miktarını belirlemek** – biz her D4v2 25 GB YARN bellek olduğunu tooAmbari toofind dışarı gidin.</span><span class="sxs-lookup"><span data-stu-id="506df-181">**Step 4: Determine amount of YARN memory in cluster** – We navigate tooAmbari toofind out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="506df-182">8 düğüm olduğundan, hello bellek YARN 8 ile çarpılır.</span><span class="sxs-lookup"><span data-stu-id="506df-182">Since there are 8 nodes, hello available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="506df-183">**5. adım: num yürütücüler hesaplamak** – hello num yürütücüler parametre belirlenir gerçekleştirerek hello en az hello bellek kısıtlaması ile Merhaba tarafından bölünmüş hello CPU sayısı Spark üzerinde çalıştırılan uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="506df-183">**Step 5: Calculate num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint divided by hello # of apps running on Spark.</span></span>    

<span data-ttu-id="506df-184">**Bellek kısıtlama hesaplamak** – hello bellek kısıtlama Yürütücü başına hello bellek bölü hello toplam YARN bellek olarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="506df-184">**Calculate memory constraint** – hello memory constraint is calculated as hello total YARN memory divided by hello memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="506df-185">**CPU kısıtlaması hesaplamak** -hello CPU kısıtlaması bölü hello Yürütücü başına çekirdek sayısı toplam yarn çekirdek hello olarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="506df-185">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total yarn cores divided by hello number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="506df-186">**Set num-yürütücüler**</span><span class="sxs-lookup"><span data-stu-id="506df-186">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

