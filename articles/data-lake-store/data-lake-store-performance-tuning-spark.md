---
title: "Azure Data Lake Store Spark performans yönergeleri ayarlama | Microsoft Docs"
description: "Azure Data Lake Store Spark performans kuralları ayarlama"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: 2109744fb7ffdfafb7a86bbea355e119718af099
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/11/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="a886b-103">Performans yönergeler Spark Hdınsight ve Azure Data Lake Store için ayarlama</span><span class="sxs-lookup"><span data-stu-id="a886b-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="a886b-104">Spark üzerinde performans ayarlama olduğunda, küme üzerinde çalışan uygulama sayısı dikkate almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-104">When tuning performance on Spark, you need to consider the number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="a886b-105">Varsayılan olarak 4 çalıştırabilirsiniz, HDI kümesi üzerinde aynı anda uygulamaları (Not: değiştirilebilir varsayılan ayardır).</span><span class="sxs-lookup"><span data-stu-id="a886b-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: the default setting is subject to change).</span></span>  <span data-ttu-id="a886b-106">Varsayılan ayarları geçersiz kılar ve kümenin daha fazla bilgi için bu uygulamaları kullanmak için daha az uygulamaları kullanmaya karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a886b-106">You may decide to use fewer apps so you can override the default settings and use more of the cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="a886b-107">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="a886b-107">Prerequisites</span></span>

* <span data-ttu-id="a886b-108">**Bir Azure aboneliği**.</span><span class="sxs-lookup"><span data-stu-id="a886b-108">**An Azure subscription**.</span></span> <span data-ttu-id="a886b-109">Bkz. [Azure ücretsiz deneme sürümü alma](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="a886b-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="a886b-110">**Bir Azure Data Lake Store hesabı**.</span><span class="sxs-lookup"><span data-stu-id="a886b-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="a886b-111">Bir oluşturma hakkında yönergeler için bkz: [Azure Data Lake Store ile çalışmaya başlama](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="a886b-111">For instructions on how to create one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="a886b-112">**Azure Hdınsight kümesi** bir Data Lake Store hesabına erişim.</span><span class="sxs-lookup"><span data-stu-id="a886b-112">**Azure HDInsight cluster** with access to a Data Lake Store account.</span></span> <span data-ttu-id="a886b-113">Bkz: [Data Lake Store ile bir Hdınsight kümesi oluşturmayı](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a886b-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="a886b-114">Küme için Uzak Masaüstü etkinleştirdiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="a886b-114">Make sure you enable Remote Desktop for the cluster.</span></span>
* <span data-ttu-id="a886b-115">**Azure Data Lake Store üzerinde Spark kümesinde çalışan**.</span><span class="sxs-lookup"><span data-stu-id="a886b-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="a886b-116">Daha fazla bilgi için bkz: [Data Lake Store'da verileri çözümlemek üzere Hdınsight Spark kullanma küme](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="a886b-116">For more information, see [Use HDInsight Spark cluster to analyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="a886b-117">**Performans ayarlama yönergeleri ADLS**.</span><span class="sxs-lookup"><span data-stu-id="a886b-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="a886b-118">Genel performans için bkz [Data Lake deposu performans rehberi ayarlama](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="a886b-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="a886b-119">Parametreler</span><span class="sxs-lookup"><span data-stu-id="a886b-119">Parameters</span></span>

<span data-ttu-id="a886b-120">Spark işlerinin çalıştırırken ADLS performansını artırmak için ayarlanmış en önemli ayarları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="a886b-120">When running Spark jobs, here are the most important settings that can be tuned to increase performance on ADLS:</span></span>

* <span data-ttu-id="a886b-121">**NUM yürütücüler** -yürütülebilir eşzamanlı görev sayısı.</span><span class="sxs-lookup"><span data-stu-id="a886b-121">**Num-executors** - The number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="a886b-122">**Bellek içi Yürütücü** -her Yürütücü ayrılmış bellek miktarı.</span><span class="sxs-lookup"><span data-stu-id="a886b-122">**Executor-memory** - The amount of memory allocated to each executor.</span></span>

* <span data-ttu-id="a886b-123">**Yürütücü çekirdek** -her Yürütücü ayrılan çekirdek sayısı.</span><span class="sxs-lookup"><span data-stu-id="a886b-123">**Executor-cores** - The number of cores allocated to each executor.</span></span>                     

<span data-ttu-id="a886b-124">**NUM yürütücüler** Num yürütücüler paralel olarak çalıştırılabilir görevleri üst sınırını ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a886b-124">**Num-executors** Num-executors will set the maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="a886b-125">Paralel olarak çalıştırılabilir görevleri gerçek sayısını bellek ve CPU kaynaklarını kümenizdeki kullanılabilir sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="a886b-125">The actual number of tasks that can run in parallel is bounded by the memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="a886b-126">**Bellek içi Yürütücü** her Yürütücü için ayrılan bellek miktarıdır.</span><span class="sxs-lookup"><span data-stu-id="a886b-126">**Executor-memory** This is the amount of memory that is being allocated to each executor.</span></span>  <span data-ttu-id="a886b-127">Her Yürütücü için gereken bellek işine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a886b-127">The memory needed for each executor is dependent on the job.</span></span>  <span data-ttu-id="a886b-128">Karmaşık işlemleri için bellek daha yüksek olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-128">For complex operations, the memory needs to be higher.</span></span>  <span data-ttu-id="a886b-129">Okuma ve yazma gibi basit işlemleri için bellek gereksinimlerini daha düşük olacaktır.</span><span class="sxs-lookup"><span data-stu-id="a886b-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="a886b-130">Her Yürütücü belleğin Ambari içinde görüntülenebilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-130">The amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="a886b-131">Ambari, Spark için gidin ve yapılandırmalar sekmesini görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="a886b-131">In Ambari, navigate to Spark and view the Configs tab.</span></span>  

<span data-ttu-id="a886b-132">**Yürütücü çekirdek** bu Yürütücü çalıştırılabilir paralel iş parçacığı sayısını belirler Yürütücü başına kullanılan çekirdek miktarını belirler.</span><span class="sxs-lookup"><span data-stu-id="a886b-132">**Executor-cores** This sets the amount of cores used per executor, which determines the number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="a886b-133">Örneğin, varsa Yürütücü çekirdek = 2, her Yürütücü Yürütücü 2 Paralel Görevler çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a886b-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in the executor.</span></span>  <span data-ttu-id="a886b-134">Yürütücü çekirdek işinde bağımlı olur.</span><span class="sxs-lookup"><span data-stu-id="a886b-134">The executor-cores needed will be dependent on the job.</span></span>  <span data-ttu-id="a886b-135">Daha fazla Paralel Görevler her Yürütücü işleyebilmesi için g/ç yoğun iş büyük miktarda bellek görev başına gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="a886b-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="a886b-136">Varsayılan olarak, Hdınsight'ta Spark çalıştırıldığında, her fiziksel çekirdek için iki sanal YARN çekirdek tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="a886b-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="a886b-137">Bu bağlam birden çok iş parçacığından değiştirme miktarına ve concurrecy iyi bir denge sağlar.</span><span class="sxs-lookup"><span data-stu-id="a886b-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="a886b-138">Rehber</span><span class="sxs-lookup"><span data-stu-id="a886b-138">Guidance</span></span>

<span data-ttu-id="a886b-139">Spark Data Lake Store'da verilerin çalışmak için analitik iş yükleri çalıştırırken, Data Lake Store ile en iyi performansı elde etmek en son Hdınsight sürüm kullanmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="a886b-139">While running Spark analytic workloads to work with data in Data Lake Store, we recommend that you use the most recent HDInsight version to get the best performance with Data Lake Store.</span></span> <span data-ttu-id="a886b-140">İşinizi daha fazla g/ç yoğun olduğunda, belirli parametreleri performansını artırmak için yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-140">When your job is more I/O intensive, then certain parameters can be configured to improve performance.</span></span>  <span data-ttu-id="a886b-141">Azure Data Lake Store yüksek verimlilik işleyebilecek bir yüksek oranda ölçeklenebilir depolama platformudur.</span><span class="sxs-lookup"><span data-stu-id="a886b-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="a886b-142">İş, çoğunlukla okuma veya yazma oluşuyorsa, ardından eşzamanlılık g/ç için Azure Data Lake Store gelen ve giden performansı artırma.</span><span class="sxs-lookup"><span data-stu-id="a886b-142">If the job mainly consists of read or writes, then increasing concurrency for I/O to and from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="a886b-143">G/ç yoğun işleri için eşzamanlılık artırmak için genel birkaç yolu vardır.</span><span class="sxs-lookup"><span data-stu-id="a886b-143">There are a few general ways to increase concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="a886b-144">**1. adım: kümenizde çalışan kaç uygulamalar belirlemek** – geçerli de dahil olmak üzere kümede çalışan kaç uygulamalar bilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on the cluster including the current one.</span></span>  <span data-ttu-id="a886b-145">4 vardır ayarı varsayar her Spark varsayılan değerleri aynı anda çalıştırılan uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="a886b-145">The default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="a886b-146">Bu nedenle, her uygulama için kullanılabilir küme % 25'ini yalnızca sahip olur.</span><span class="sxs-lookup"><span data-stu-id="a886b-146">Therefore, you will only have 25% of the cluster available for each app.</span></span>  <span data-ttu-id="a886b-147">Daha iyi performans almak için yürütücüler sayısını değiştirerek Varsayılanları geçersiz kılabilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-147">To get better performance, you can override the defaults by changing the number of executors.</span></span>  

<span data-ttu-id="a886b-148">**2. adım: Bellek içi Yürütücü ayarlama** – ayarlamak için ilk Yürütücü bellek şeydir.</span><span class="sxs-lookup"><span data-stu-id="a886b-148">**Step 2: Set executor-memory** – the first thing to set is the executor-memory.</span></span>  <span data-ttu-id="a886b-149">Bellek çalışmasına olmaya işinde bağımlı olur.</span><span class="sxs-lookup"><span data-stu-id="a886b-149">The memory will be dependent on the job that you are going to run.</span></span>  <span data-ttu-id="a886b-150">Yürütücü başına daha az bellek ayırarak eşzamanlılık artırabilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="a886b-151">İşinizi çalıştırdığınızda yetersiz bellek özel durumları görürseniz, bu parametre için değer artırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-151">If you see out of memory exceptions when you run your job, then you should increase the value for this parameter.</span></span>  <span data-ttu-id="a886b-152">Daha fazla bellek daha yüksek miktarlarda bellek sahip bir küme kullanarak veya kümenizin boyutunu artırmayı almak bir alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="a886b-152">One alternative is to get more memory by using a cluster that has higher amounts of memory or increasing the size of your cluster.</span></span>  <span data-ttu-id="a886b-153">Daha fazla bellek, daha fazla eşzamanlılık başka bir deyişle, kullanılacak, daha fazla yürütücüler olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a886b-153">More memory will enable more executors to be used, which means more concurrency.</span></span>

<span data-ttu-id="a886b-154">**3. adım: Ayarlama Yürütücü çekirdek** – karmaşık işlemleri sahip olmaması için g/ç yoğun iş yükleri, bu çok sayıda Paralel Görevler Yürütücü başına sayısını artırmak için Yürütücü-çekirdek ile başlatmak iyi.</span><span class="sxs-lookup"><span data-stu-id="a886b-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good to start with a high number of executor-cores to increase the number of parallel tasks per executor.</span></span>  <span data-ttu-id="a886b-155">Yürütücü çekirdek 4 olarak ayarlamak, iyi bir başlangıç noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="a886b-155">Setting executor-cores to 4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="a886b-156">Yürütücü çekirdek sayısının artırılması farklı Yürütücü çekirdeğiyle deneyebilirsiniz şekilde daha fazla paralellik tanıyacaktır.</span><span class="sxs-lookup"><span data-stu-id="a886b-156">Increasing the number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="a886b-157">Daha karmaşık işlemleri sahip işleri Yürütücü başına çekirdek sayısı azaltmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-157">For jobs that have more complex operations, you should reduce the number of cores per executor.</span></span>  <span data-ttu-id="a886b-158">Yürütücü çekirdek ise 4'ten yüksek ayarlanmış sonra atık toplama verimsiz hale ve performansı düşebilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="a886b-159">**Adım 4: küme YARN bellek miktarını belirlemek** – bu bilgiler Ambari içinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="a886b-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="a886b-160">YARN için gidin ve yapılandırmalar sekmesini görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="a886b-160">Navigate to YARN and view the Configs tab.</span></span>  <span data-ttu-id="a886b-161">YARN bellek Bu pencerede görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="a886b-161">The YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="a886b-162">Not: penceresinde olmakla birlikte, aynı zamanda varsayılan YARN kapsayıcı boyutu görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a886b-162">Note: while you are in the window, you can also see the default YARN container size.</span></span>  <span data-ttu-id="a886b-163">YARN kapsayıcı boyutu Yürütücü parametresi başına bellek ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="a886b-163">The YARN container size is the same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="a886b-164">**5. adım: num yürütücüler Hesapla**</span><span class="sxs-lookup"><span data-stu-id="a886b-164">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="a886b-165">**Bellek kısıtlama hesaplamak** -num yürütücüler parametre bellek veya CPU tarafından sınırlanır.</span><span class="sxs-lookup"><span data-stu-id="a886b-165">**Calculate memory constraint** - The num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="a886b-166">Bellek kısıtlama, uygulamanız için kullanılabilir YARN bellek miktarı tarafından belirlenir.</span><span class="sxs-lookup"><span data-stu-id="a886b-166">The memory constraint is determined by the amount of available YARN memory for your application.</span></span>  <span data-ttu-id="a886b-167">Toplam YARN bellek alın ve yürütücü bellekle bölün.</span><span class="sxs-lookup"><span data-stu-id="a886b-167">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="a886b-168">Kısıtlama biz uygulamaları sayısına göre Böl şekilde uygulama sayısı için XML'deki ölçeklendirilmiş olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="a886b-168">The constraint needs to be de-scaled for the number of apps so we divide by the number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="a886b-169">**CPU kısıtlaması hesaplamak** -CPU kısıtlaması bölü Yürütücü başına çekirdek sayısı toplam sanal çekirdek olarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="a886b-169">**Calculate CPU constraint** - The CPU constraint is calculated as the total virtual cores divided by the number of cores per executor.</span></span>  <span data-ttu-id="a886b-170">Her fiziksel çekirdek için 2 sanal çekirdek vardır.</span><span class="sxs-lookup"><span data-stu-id="a886b-170">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="a886b-171">Bellek kısıtlama benzer, bölme uygulamaları sayısına göre sunuyoruz.</span><span class="sxs-lookup"><span data-stu-id="a886b-171">Similar to the memory constraint, we have divide by the number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="a886b-172">**Ayarlama num yürütücüler** – num yürütücüler parametresi en az bellek kısıtlama ve CPU kısıtlaması gerçekleştirerek belirlenir.</span><span class="sxs-lookup"><span data-stu-id="a886b-172">**Set num-executors** – The num-executors parameter is determined by taking the minimum of the memory constraint and the CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="a886b-173">Daha yüksek bir sayı yürütücüler sayısı ayarlanması, performans mutlaka artırmaz.</span><span class="sxs-lookup"><span data-stu-id="a886b-173">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="a886b-174">Daha fazla yürütücüler ekleme ekleyeceksiniz dikkate almanız gereken potansiyel olarak performansı düşürebilir her ek Yürütücü için fazladan genel gider.</span><span class="sxs-lookup"><span data-stu-id="a886b-174">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="a886b-175">NUM yürütücüler tarafından küme kaynağı ilişkisindeki.</span><span class="sxs-lookup"><span data-stu-id="a886b-175">Num-executors is bounded by the cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="a886b-176">Örnek hesaplama</span><span class="sxs-lookup"><span data-stu-id="a886b-176">Example Calculation</span></span>

<span data-ttu-id="a886b-177">2 çalışan 8 D4v2 düğümden oluşan bir küme şu anda sahip düşünelim bulacağınızı çalıştırmak için de dahil olmak üzere uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="a886b-177">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including the one you are going to run.</span></span>  

<span data-ttu-id="a886b-178">**1. adım: kümenizde çalışan kaç uygulamalar belirlemek** – 2 olduğunu bildiğiniz bulacağınızı çalıştırmak için de dahil olmak üzere kümenizde uygulamaları.</span><span class="sxs-lookup"><span data-stu-id="a886b-178">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including the one you are going to run.</span></span>  

<span data-ttu-id="a886b-179">**2. adım: Bellek içi Yürütücü ayarlama** – Bu örnekte, 6 GB bellek Yürütücü g/ç yoğun iş için yeterli olacaktır olan belirleriz.</span><span class="sxs-lookup"><span data-stu-id="a886b-179">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="a886b-180">**3. adım: Ayarlama Yürütücü çekirdek** – bir g/ç yoğun iş olacağından, size çekirdek sayısı her Yürütücü 4 ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a886b-180">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set the number of cores for each executor to 4.</span></span>  <span data-ttu-id="a886b-181">Yürütücü başına çekirdek 4 atık toplama sorunlara neden olabilirsiniz daha büyük için ayarlama.</span><span class="sxs-lookup"><span data-stu-id="a886b-181">Setting cores per executor to larger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="a886b-182">**Adım 4: küme YARN bellek miktarını belirlemek** – biz her D4v2 25 GB YARN bellek olduğunu öğrenmek için ambarı'na gidin.</span><span class="sxs-lookup"><span data-stu-id="a886b-182">**Step 4: Determine amount of YARN memory in cluster** – We navigate to Ambari to find out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="a886b-183">8 düğüm olduğundan, kullanılabilir YARN bellek 8 ile çarpılır.</span><span class="sxs-lookup"><span data-stu-id="a886b-183">Since there are 8 nodes, the available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="a886b-184">**5. adım: num yürütücüler hesaplamak** – num yürütücüler parametre en düşük bellek kısıtlamanın gerçekleştirerek belirlenir ve CPU kısıtlaması bölünmüş Spark üzerinde çalışan uygulamalar # tarafından.</span><span class="sxs-lookup"><span data-stu-id="a886b-184">**Step 5: Calculate num-executors** – The num-executors parameter is determined by taking the minimum of the memory constraint and the CPU constraint divided by the # of apps running on Spark.</span></span>    

<span data-ttu-id="a886b-185">**Bellek kısıtlama hesaplamak** – bellek kısıtlama toplam YARN bellek Yürütücü başına bellek bölünmesiyle hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="a886b-185">**Calculate memory constraint** – The memory constraint is calculated as the total YARN memory divided by the memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="a886b-186">**CPU kısıtlaması hesaplamak** -CPU kısıtlaması bölü Yürütücü başına çekirdek sayısı toplam yarn çekirdek olarak hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="a886b-186">**Calculate CPU constraint** - The CPU constraint is calculated as the total yarn cores divided by the number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="a886b-187">**Set num-yürütücüler**</span><span class="sxs-lookup"><span data-stu-id="a886b-187">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

