



<span data-ttu-id="547e2-101">Ortamınız ve Seçenekler bağlı olarak, Azure sanal ağı, depolama hesapları, bulut Hizmetleri, etki alanı denetleyicisi, uzak veya yerel SQL veritabanları, baş düğüm ve ek küme düğümlerini de dahil olmak üzere tüm küme altyapısı, komut dosyası oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="547e2-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="547e2-102">Alternatif olarak, komut dosyasını önceden var olan Azure altyapısını kullanır ve yalnızca HPC küme düğümleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="547e2-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="547e2-103">HPC Pack küme planlama hakkında arka plan bilgileri için bkz: [ürün değerlendirme ve planlama](https://technet.microsoft.com/library/jj899596.aspx) ve [Başlarken](https://technet.microsoft.com/library/jj899590.aspx) HPC Pack 2012 R2 TechNet Kitaplığı'nda içeriği.</span><span class="sxs-lookup"><span data-stu-id="547e2-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="547e2-104">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="547e2-104">Prerequisites</span></span>
* <span data-ttu-id="547e2-105">**Azure aboneliği**: Azure genel veya Azure Çin hizmetinde bir aboneliği kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="547e2-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="547e2-106">Abonelik sınırlarınızı sayısı ve türü dağıtabilmeniz için küme düğümlerinin etkiler.</span><span class="sxs-lookup"><span data-stu-id="547e2-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="547e2-107">Bilgi için bkz: [Azure aboneliği ve hizmet sınırları, kotaları ve kısıtlamaları](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="547e2-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="547e2-108">**Azure PowerShell 0.8.10 ile Windows istemci bilgisayarı veya sonrası yüklü ve yapılandırılmış**: bkz [Azure PowerShell ile çalışmaya başlama](/powershell/azureps-cmdlets-docs) yükleme yönergeleri ve adımlar Azure aboneliğinize bağlanmak için.</span><span class="sxs-lookup"><span data-stu-id="547e2-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="547e2-109">**HPC Pack Iaas dağıtım betiği**: karşıdan yükle ve en son sürümünü betikten paket [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="547e2-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="547e2-110">Komut dosyası sürümünü çalıştırarak denetleme `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="547e2-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="547e2-111">Bu makalede, komut dosyası sürüm 4.5.2 temel alır.</span><span class="sxs-lookup"><span data-stu-id="547e2-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="547e2-112">**Yapılandırma betiği**: HPC küme yapılandırmak için komut dosyası kullanan bir XML dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="547e2-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="547e2-113">Bilgi ve örnekler için bu makalede ve dağıtım betiği eşlik Manual.rtf dosya devamındaki bölümlere bakın.</span><span class="sxs-lookup"><span data-stu-id="547e2-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="547e2-114">Sözdizimi</span><span class="sxs-lookup"><span data-stu-id="547e2-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="547e2-115">Komut dosyasını bir yönetici olarak çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="547e2-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="547e2-116">Parametreler</span><span class="sxs-lookup"><span data-stu-id="547e2-116">Parameters</span></span>
* <span data-ttu-id="547e2-117">**ConfigFile**: HPC küme açıklamak için yapılandırma dosyasının dosya yolunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="547e2-118">Bu konuda yapılandırma dosyasında hakkında daha fazla bakın veya Manual.rtf klasöründeki dosyasındaki komut dosyasını içeren.</span><span class="sxs-lookup"><span data-stu-id="547e2-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="547e2-119">**AdminUserName**: kullanıcı adını belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="547e2-120">Etki alanı ormanı komut dosyası tarafından oluşturduysanız, bu tüm VM'ler için yerel yönetici kullanıcı adı ve etki alanı yöneticisi adı olur.</span><span class="sxs-lookup"><span data-stu-id="547e2-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="547e2-121">Etki alanı ormanı zaten varsa, bu etki alanı kullanıcısının HPC paketini yüklemek için yerel yönetici kullanıcı adı olarak belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="547e2-122">**Admınpassword**: Yönetici parolasını belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="547e2-123">Komut satırında belirtilmezse, betik parola girmesini ister.</span><span class="sxs-lookup"><span data-stu-id="547e2-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="547e2-124">**HPCImageName** (isteğe bağlı): HPC küme dağıtmak için kullanılan HPC Pack VM görüntü adı belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="547e2-125">Azure Marketi'nden Microsoft tarafından sağlanan HPC Pack bir görüntü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="547e2-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="547e2-126">Belirtilmezse, (genellikle önerilir), komut dosyasının en son yayımlanan seçer [HPC Pack 2012 R2 görüntüsünü](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span><span class="sxs-lookup"><span data-stu-id="547e2-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="547e2-127">En son görüntünün Windows Server 2012 R2 Datacenter HPC Pack 2012 R2 güncelleştirme 3 ile temel alır.</span><span class="sxs-lookup"><span data-stu-id="547e2-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="547e2-128">Geçerli bir HPC Pack görüntüsü belirtmezseniz dağıtımı başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="547e2-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="547e2-129">**Günlük dosyası** (isteğe bağlı): dağıtım günlük dosyası yolunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="547e2-130">Belirtilmezse, komut dosyası komut dosyasını çalıştıran bilgisayar temp dizininde bir günlük dosyası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="547e2-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="547e2-131">**Zorla** (isteğe bağlı): tüm onay komut istemlerini bastırır.</span><span class="sxs-lookup"><span data-stu-id="547e2-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="547e2-132">**NoCleanOnFailure** (isteğe bağlı): değil başarıyla dağıtılan Azure sanal makinelerini kaldırılmıyor belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="547e2-133">Dağıtım devam etmek için komut dosyası yeniden çalıştırmadan önce bu Vm'lere el ile kaldırın veya dağıtım başarısız.</span><span class="sxs-lookup"><span data-stu-id="547e2-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="547e2-134">**PSSessionSkipCACheck** (isteğe bağlı): Bu komut dosyası tarafından dağıtılan VM'ler ile her bulut hizmeti için otomatik olarak imzalanan bir sertifika Azure tarafından otomatik olarak oluşturulur ve bulut hizmetindeki tüm sanal makineleri bu sertifika varsayılan olarak Windows Uzaktan kullanın. Yönetim (WinRM) sertifikası.</span><span class="sxs-lookup"><span data-stu-id="547e2-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="547e2-135">Bu Azure VM'de HPC özellikler dağıtmak için varsayılan komut dosyası geçici olarak bu sertifikaları yerel bilgisayara yükler\\"güvenilmedi CA" güvenlik hatası gizlemek için istemci bilgisayarın güvenilir kök sertifika yetkilileri deposuna komut dosyası yürütme sırasında.</span><span class="sxs-lookup"><span data-stu-id="547e2-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="547e2-136">Betik tamamlandığında sertifikaları kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="547e2-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="547e2-137">Bu parametre belirtilmezse, istemci bilgisayar sertifikaları yüklü değil ve güvenlik uyarısı engellenir.</span><span class="sxs-lookup"><span data-stu-id="547e2-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="547e2-138">Bu parametre, üretim dağıtımları için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="547e2-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="547e2-139">Örnek</span><span class="sxs-lookup"><span data-stu-id="547e2-139">Example</span></span>
<span data-ttu-id="547e2-140">Aşağıdaki örnek yapılandırma dosyası kullanarak bir HPC Pack kümesini oluşturur *MyConfigFile.xml*, Küme yükleme için yönetici kimlik bilgilerini belirtir.</span><span class="sxs-lookup"><span data-stu-id="547e2-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="547e2-141">Diğer konular</span><span class="sxs-lookup"><span data-stu-id="547e2-141">Additional considerations</span></span>
* <span data-ttu-id="547e2-142">Komut dosyası iş gönderme HPC paketi web portalı üzerinden veya HPC Pack REST API isteğe bağlı olarak etkinleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="547e2-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="547e2-143">Ek yazılım yüklemesi veya diğer ayarları yapılandırmak istiyorsanız, komut dosyası baş düğümünde özel öncesi ve sonrası yapılandırma komut dosyaları isteğe bağlı olarak çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="547e2-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="547e2-144">Yapılandırma dosyası</span><span class="sxs-lookup"><span data-stu-id="547e2-144">Configuration file</span></span>
<span data-ttu-id="547e2-145">Dağıtım komut dosyası için yapılandırma dosyasını bir XML dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="547e2-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="547e2-146">Şema dosyası HPCIaaSClusterConfig.xsd HPC Pack Iaas dağıtım komut dosyası klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="547e2-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="547e2-147">**IaaSClusterConfig** ayrıntılı dağıtım komut dosyası klasörü Manual.rtf dosyasında açıklanan alt öğelerini içeren yapılandırma dosyasının kök öğedir.</span><span class="sxs-lookup"><span data-stu-id="547e2-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

